"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[39704],{28453(e,n,i){i.d(n,{R:()=>s,x:()=>l});var r=i(96540);const t={},o=r.createContext(t);function s(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),r.createElement(o.Provider,{value:n},e.children)}},45747(e,n,i){i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"script/Specializations/WorkMode","title":"WorkMode","description":"WorkMode","source":"@site/../docs/script/Specializations/WorkMode.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/WorkMode","permalink":"/FS25-Community-LUADOC/script/Specializations/WorkMode","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"WorkArea","permalink":"/FS25-Community-LUADOC/script/Specializations/WorkArea"},"next":{"title":"WorkParticles","permalink":"/FS25-Community-LUADOC/script/Specializations/WorkParticles"}}');var t=i(74848),o=i(28453);const s={},l=void 0,d={},a=[{value:"WorkMode",id:"workmode",level:2},{value:"actionEventWorkModeChange",id:"actioneventworkmodechange",level:3},{value:"actionEventWorkModeChangeDirect",id:"actioneventworkmodechangedirect",level:3},{value:"deactivateWindrowerEffects",id:"deactivatewindrowereffects",level:3},{value:"getAllowsLowering",id:"getallowslowering",level:3},{value:"getAreEffectsVisible",id:"getareeffectsvisible",level:3},{value:"getCanBeSelected",id:"getcanbeselected",level:3},{value:"getIsMovingToolActive",id:"getismovingtoolactive",level:3},{value:"getIsSprayTypeActive",id:"getisspraytypeactive",level:3},{value:"getIsWorkAreaActive",id:"getisworkareaactive",level:3},{value:"getIsWorkModeChangeAllowed",id:"getisworkmodechangeallowed",level:3},{value:"initSpecialization",id:"initspecialization",level:3},{value:"loadMovingToolFromXML",id:"loadmovingtoolfromxml",level:3},{value:"loadSprayTypeFromXML",id:"loadspraytypefromxml",level:3},{value:"loadWorkModeFromXML",id:"loadworkmodefromxml",level:3},{value:"onDeactivate",id:"ondeactivate",level:3},{value:"onDelete",id:"ondelete",level:3},{value:"onDraw",id:"ondraw",level:3},{value:"onFoldStateChanged",id:"onfoldstatechanged",level:3},{value:"onLoad",id:"onload",level:3},{value:"onPostLoad",id:"onpostload",level:3},{value:"onReadStream",id:"onreadstream",level:3},{value:"onReadUpdateStream",id:"onreadupdatestream",level:3},{value:"onRegisterActionEvents",id:"onregisteractionevents",level:3},{value:"onSetLowered",id:"onsetlowered",level:3},{value:"onTurnedOff",id:"onturnedoff",level:3},{value:"onTurnedOn",id:"onturnedon",level:3},{value:"onUpdate",id:"onupdate",level:3},{value:"onUpdateTick",id:"onupdatetick",level:3},{value:"onWriteStream",id:"onwritestream",level:3},{value:"onWriteUpdateStream",id:"onwriteupdatestream",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3},{value:"registerEvents",id:"registerevents",level:3},{value:"registerFunctions",id:"registerfunctions",level:3},{value:"registerOverwrittenFunctions",id:"registeroverwrittenfunctions",level:3},{value:"registerWorkModeXMLPaths",id:"registerworkmodexmlpaths",level:3},{value:"saveToXMLFile",id:"savetoxmlfile",level:3},{value:"setWorkMode",id:"setworkmode",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"workmode",children:"WorkMode"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Specialization for tools with switchable work modes by providing grouping of different animations and work areas"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Functions"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#actioneventworkmodechange",children:"actionEventWorkModeChange"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#actioneventworkmodechangedirect",children:"actionEventWorkModeChangeDirect"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#deactivatewindrowereffects",children:"deactivateWindrowerEffects"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#getallowslowering",children:"getAllowsLowering"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#getareeffectsvisible",children:"getAreEffectsVisible"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#getcanbeselected",children:"getCanBeSelected"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#getismovingtoolactive",children:"getIsMovingToolActive"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#getisspraytypeactive",children:"getIsSprayTypeActive"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#getisworkareaactive",children:"getIsWorkAreaActive"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#getisworkmodechangeallowed",children:"getIsWorkModeChangeAllowed"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#initspecialization",children:"initSpecialization"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#loadmovingtoolfromxml",children:"loadMovingToolFromXML"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#loadspraytypefromxml",children:"loadSprayTypeFromXML"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#loadworkmodefromxml",children:"loadWorkModeFromXML"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#ondeactivate",children:"onDeactivate"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#ondelete",children:"onDelete"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#ondraw",children:"onDraw"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onfoldstatechanged",children:"onFoldStateChanged"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onpostload",children:"onPostLoad"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onreadstream",children:"onReadStream"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onreadupdatestream",children:"onReadUpdateStream"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onregisteractionevents",children:"onRegisterActionEvents"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onsetlowered",children:"onSetLowered"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onturnedoff",children:"onTurnedOff"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onturnedon",children:"onTurnedOn"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onupdate",children:"onUpdate"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onupdatetick",children:"onUpdateTick"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onwritestream",children:"onWriteStream"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onwriteupdatestream",children:"onWriteUpdateStream"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#registerevents",children:"registerEvents"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#registeroverwrittenfunctions",children:"registerOverwrittenFunctions"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#registerworkmodexmlpaths",children:"registerWorkModeXMLPaths"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#savetoxmlfile",children:"saveToXMLFile"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#setworkmode",children:"setWorkMode"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"actioneventworkmodechange",children:"actionEventWorkModeChange"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"actionEventWorkModeChange()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"self"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"actionName"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"inputValue"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"callbackState"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"isAnalog"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function WorkMode.actionEventWorkModeChange( self , actionName, inputValue, callbackState, isAnalog)\n    local spec = self.spec_workMode\n    local state = spec.state + 1\n    if state > spec.stateMax then\n        state = 1\n    end\n\n    if state ~ = spec.state then\n        self:setWorkMode(state)\n    end\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"actioneventworkmodechangedirect",children:"actionEventWorkModeChangeDirect"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"actionEventWorkModeChangeDirect()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"self"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"actionName"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"inputValue"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"callbackState"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"isAnalog"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function WorkMode.actionEventWorkModeChangeDirect( self , actionName, inputValue, callbackState, isAnalog)\n    local spec = self.spec_workMode\n\n    for state, mode in ipairs(spec.workModes) do\n        if mode.inputAction = = InputAction[actionName] then\n            if state ~ = spec.state then\n                self:setWorkMode(state)\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"deactivatewindrowereffects",children:"deactivateWindrowerEffects"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on deactivate"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"deactivateWindrowerEffects()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function WorkMode:deactivateWindrowerEffects()\n    if self.isClient then\n        local spec = self.spec_workMode\n        for _, mode in pairs(spec.workModes) do\n            if mode.windrowerEffects ~ = nil then\n                g_effectManager:stopEffects(mode.windrowerEffects)\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"getallowslowering",children:"getAllowsLowering"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"getAllowsLowering()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function WorkMode:getAllowsLowering(superFunc)\n    local allowLowering, warning = superFunc( self )\n\n    local spec = self.spec_workMode\n    local hasLoweringAnimations = false\n    if spec.workModes ~ = nil and #spec.workModes > 0 then\n        hasLoweringAnimations = #spec.workModes[spec.state].loweringAnimations > 0\n    end\n\n    return allowLowering or hasLoweringAnimations, warning\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"getareeffectsvisible",children:"getAreEffectsVisible"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"getAreEffectsVisible()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function WorkMode:getAreEffectsVisible(superFunc)\n    if not superFunc( self ) then\n        return false\n    end\n\n    local spec = self.spec_workMode\n    if spec.stateMax ~ = nil then\n        if spec.stateMax > 0 then\n            for i = 1 , #spec.workModes do\n                local workMode = spec.workModes[i]\n\n                for j = 1 , #workMode.animations do\n                    if self:getIsAnimationPlaying(workMode.animations[j].animName) then\n                        return false\n                    end\n                end\n            end\n        end\n    end\n\n    return true\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"getcanbeselected",children:"getCanBeSelected"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"getCanBeSelected()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function WorkMode:getCanBeSelected(superFunc)\n    return true\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"getismovingtoolactive",children:"getIsMovingToolActive"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"getIsMovingToolActive()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"superFunc"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"movingTool"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function WorkMode:getIsMovingToolActive(superFunc, movingTool)\n    if not movingTool.allowWhileChangingWorkMode then\n        local spec = self.spec_workMode\n        if spec.stateMax ~ = nil then\n            for i = 1 , #spec.workModes do\n                local workMode = spec.workModes[i]\n\n                for j = 1 , #workMode.animations do\n                    if self:getIsAnimationPlaying(workMode.animations[j].animName) then\n                        return false\n                    end\n                end\n            end\n        end\n    end\n\n    return superFunc( self , movingTool)\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"getisspraytypeactive",children:"getIsSprayTypeActive"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"getIsSprayTypeActive()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"superFunc"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"sprayType"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function WorkMode:getIsSprayTypeActive(superFunc, sprayType)\n    if sprayType.workModeIndex ~ = nil then\n        if self.spec_workMode.state ~ = sprayType.workModeIndex then\n            return false\n        end\n    end\n\n    return superFunc( self , sprayType)\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"getisworkareaactive",children:"getIsWorkAreaActive"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"getIsWorkAreaActive()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"superFunc"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"workArea"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function WorkMode:getIsWorkAreaActive(superFunc, workArea)\n    local spec = self.spec_workMode\n    if spec.stateMax ~ = nil and spec.stateMax > 0 then\n        for _, workArea2 in pairs(spec.workModes[spec.state].workAreas) do\n            if workArea.index = = workArea2.workAreaIndex then\n                if workArea2.dropAreaIndex = = 0 then\n                    return false\n                end\n            end\n        end\n    end\n\n    return superFunc( self , workArea)\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"getisworkmodechangeallowed",children:"getIsWorkModeChangeAllowed"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Returns if work mode change is allowed"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"getIsWorkModeChangeAllowed()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"isAllowed"}),(0,t.jsx)(n.th,{children:"is allowed"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function WorkMode:getIsWorkModeChangeAllowed()\n    local spec = self.spec_workMode\n\n    if self.getFoldAnimTime ~ = nil then\n        if self:getFoldAnimTime() > spec.foldMaxLimit or self:getFoldAnimTime() < spec.foldMinLimit then\n            return false\n        end\n    end\n\n    if not spec.allowChangeOnLowered then\n        local attacherVehicle = self:getAttacherVehicle()\n        if attacherVehicle ~ = nil then\n            local index = attacherVehicle:getAttacherJointIndexFromObject( self )\n            local attacherJoint = attacherVehicle:getAttacherJointByJointDescIndex(index)\n\n            if attacherJoint.moveDown then\n                return false\n            end\n        end\n    end\n\n    return true\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"initspecialization",children:"initSpecialization"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on specialization initializing"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"initSpecialization()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function WorkMode.initSpecialization()\n    g_vehicleConfigurationManager:addConfigurationType( "workMode" , g_i18n:getText( "configuration_workMode" ), "workModes" , VehicleConfigurationItem )\n\n    local schema = Vehicle.xmlSchema\n    schema:setXMLSpecializationType( "WorkMode" )\n\n    WorkMode.registerWorkModeXMLPaths(schema, "vehicle.workModes" )\n    WorkMode.registerWorkModeXMLPaths(schema, "vehicle.workModes.workModeConfigurations.workModeConfiguration(?)" )\n\n    schema:setXMLSpecializationType()\n\n    local schemaSavegame = Vehicle.xmlSchemaSavegame\n    schemaSavegame:register(XMLValueType.INT, "vehicles.vehicle(?).workMode#state" , "Current work mode" , 1 )\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"loadmovingtoolfromxml",children:"loadMovingToolFromXML"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"loadMovingToolFromXML()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"superFunc"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"xmlFile"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"key"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"entry"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function WorkMode:loadMovingToolFromXML(superFunc, xmlFile, key, entry)\n    if not superFunc( self , xmlFile, key, entry) then\n        return false\n    end\n\n    entry.allowWhileChangingWorkMode = xmlFile:getValue(key .. "#allowWhileChangingWorkMode" , true )\n\n    return true\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"loadspraytypefromxml",children:"loadSprayTypeFromXML"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"loadSprayTypeFromXML()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"superFunc"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"xmlFile"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"key"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"sprayType"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function WorkMode:loadSprayTypeFromXML(superFunc, xmlFile, key, sprayType)\n    sprayType.workModeIndex = xmlFile:getValue(key .. "#workModeIndex" )\n\n    return superFunc( self , xmlFile, key, sprayType)\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"loadworkmodefromxml",children:"loadWorkModeFromXML"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"loadWorkModeFromXML()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"xmlFile"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"key"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"workMode"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function WorkMode:loadWorkModeFromXML(xmlFile, key, workMode)\n    workMode.name = xmlFile:getValue(key .. "#name" , nil , self.customEnvironment)\n    local inputBindingName = xmlFile:getValue(key .. "#inputBindingName" )\n    if inputBindingName ~ = nil then\n        if InputAction[inputBindingName] ~ = nil then\n            workMode.inputAction = InputAction[inputBindingName]\n        end\n    end\n\n    workMode.isDefault = xmlFile:getValue(key .. "#isDefault" , false )\n\n    workMode.turnedOnAnimations = { }\n    for _, animKey in xmlFile:iterator(key .. ".turnedOnAnimations.turnedOnAnimation" ) do\n        local turnedOnAnimation = { }\n        turnedOnAnimation.name = xmlFile:getValue(animKey .. "#name" )\n        turnedOnAnimation.turnOnFadeTime = xmlFile:getValue(animKey .. "#turnOnFadeTime" , 1 ) * 1000\n        turnedOnAnimation.turnOffFadeTime = xmlFile:getValue(animKey .. "#turnOffFadeTime" , 1 ) * 1000\n        turnedOnAnimation.speedScale = xmlFile:getValue(animKey .. "#speedScale" , 1 )\n\n        turnedOnAnimation.speedDirection = 0\n        turnedOnAnimation.currentSpeed = 0\n\n        if self:getAnimationExists(turnedOnAnimation.name) then\n            table.insert(workMode.turnedOnAnimations, turnedOnAnimation)\n        end\n    end\n\n    workMode.loweringAnimations = { }\n    for _, animKey in xmlFile:iterator(key .. ".loweringAnimations.loweringAnimation" ) do\n        local loweringAnimation = { }\n        loweringAnimation.name = xmlFile:getValue(animKey .. "#name" )\n        loweringAnimation.speed = xmlFile:getValue(animKey .. "#speed" , 1 )\n\n        if self:getAnimationExists(loweringAnimation.name) then\n            table.insert(workMode.loweringAnimations, loweringAnimation)\n        end\n    end\n\n    workMode.workAreas = { }\n    for i, workAreaKey in xmlFile:iterator(key .. ".workAreas.workArea" ) do\n        local workArea = { }\n        workArea.workAreaIndex = xmlFile:getValue(workAreaKey .. "#workAreaIndex" , i)\n        workArea.dropAreaIndex = xmlFile:getValue(workAreaKey .. "#dropAreaIndex" , i)\n\n        table.insert(workMode.workAreas, workArea)\n    end\n\n    workMode.animations = { }\n    for _, animKey in xmlFile:iterator(key .. ".animation" ) do\n        local animation = { }\n        animation.animName = xmlFile:getValue(animKey .. "#name" )\n        animation.animSpeed = xmlFile:getValue(animKey .. "#speed" , 1.0 )\n        animation.stopTime = xmlFile:getValue(animKey .. "#stopTime" )\n        animation.repeatAfterUnfolding = xmlFile:getValue(animKey .. "#repeatAfterUnfolding" , false )\n        animation.repeatStartTime = xmlFile:getValue(animKey .. "#repeatStartTime" )\n        animation.repeated = false\n\n        if self:getAnimationExists(animation.animName) then\n            table.insert(workMode.animations, animation)\n        end\n    end\n\n    local movingToolLimitNode = xmlFile:getValue(key .. ".movingToolLimit#node" , nil , self.components, self.i3dMappings)\n    if movingToolLimitNode ~ = nil then\n        workMode.movingTool = self:getMovingToolByNode(movingToolLimitNode)\n        workMode.movingToolMinRot = xmlFile:getValue(key .. ".movingToolLimit#minRot" , 0 )\n        workMode.movingToolMaxRot = xmlFile:getValue(key .. ".movingToolLimit#maxRot" , 0 )\n    end\n\n    workMode.windrowerEffects = g_effectManager:loadEffect(xmlFile, string.format( "%s.windrowerEffect" , key), self.components, self , self.i3dMappings)\n    workMode.animationNodes = g_animationManager:loadAnimations(xmlFile, key .. ".animationNodes" , self.components, self , self.i3dMappings)\n\n    if self.loadAIImplementBaseSetupFromXML ~ = nil then\n        self:loadAIImplementBaseSetupFromXML(xmlFile, key .. ".ai" , function (_)\n            local spec = self.spec_workMode\n            return spec.workModes[spec.state] = = workMode\n        end )\n    end\n\n    return true\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"ondeactivate",children:"onDeactivate"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on deactivate"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onDeactivate()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function WorkMode:onDeactivate()\n    WorkMode.deactivateWindrowerEffects( self )\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"ondelete",children:"onDelete"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onDelete()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function WorkMode:onDelete()\n    local spec = self.spec_workMode\n    if spec.workModes ~ = nil then\n        for _, mode in ipairs(spec.workModes) do\n            g_effectManager:deleteEffects(mode.windrowerEffects)\n            g_animationManager:deleteAnimations(mode.animationNodes)\n        end\n    end\n\n    if spec.hudExtension ~ = nil then\n        spec.hudExtension:delete()\n    end\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"ondraw",children:"onDraw"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on draw"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onDraw(boolean isActiveForInput, boolean isSelected, )"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"boolean"}),(0,t.jsx)(n.th,{children:"isActiveForInput"}),(0,t.jsx)(n.th,{children:"true if vehicle is active for input"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"boolean"}),(0,t.jsx)(n.td,{children:"isSelected"}),(0,t.jsx)(n.td,{children:"true if vehicle is selected"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"isSelected"}),(0,t.jsx)(n.td,{})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function WorkMode:onDraw(isActiveForInput, isActiveForInputIgnoreSelection, isSelected)\n    local spec = self.spec_workMode\n\n    if spec.hudExtension ~ = nil then\n        local hud = g_currentMission.hud\n        hud:addHelpExtension(spec.hudExtension)\n    end\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"onfoldstatechanged",children:"onFoldStateChanged"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on fold state change"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onFoldStateChanged(integer direction, )"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"integer"}),(0,t.jsx)(n.th,{children:"direction"}),(0,t.jsx)(n.th,{children:"direction of folding"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"moveToMiddle"}),(0,t.jsx)(n.td,{})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function WorkMode:onFoldStateChanged(direction, moveToMiddle)\n    local spec = self.spec_workMode\n\n    if direction > 0 then\n        local mode = spec.workModes[spec.state]\n\n        for _, anim in pairs(mode.animations) do\n            if anim.repeatAfterUnfolding then\n                anim.repeated = false\n            end\n        end\n\n        -- if the tool is still lowered while folding we lift it\n            if self:getIsLowered() then\n                if self.getAttacherVehicle ~ = nil then\n                    local attacherVehicle = self:getAttacherVehicle()\n                    if attacherVehicle ~ = nil then\n                        attacherVehicle:handleLowerImplementEvent()\n                    end\n                end\n            end\n        end\n    end\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on loading"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onLoad(table savegame)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"table"}),(0,t.jsx)(n.th,{children:"savegame"}),(0,t.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function WorkMode:onLoad(savegame)\n    local spec = self.spec_workMode\n\n    local baseKey = "vehicle.workModes"\n    local configurationId = self.configurations[ "workMode" ] or 1\n    local configKey = string.format(baseKey .. ".workModeConfigurations.workModeConfiguration(%d)" , configurationId - 1 )\n\n    if not self.xmlFile:hasProperty(configKey) then\n        configKey = baseKey\n    end\n\n    if self.xmlFile:hasProperty(configKey) then\n        spec.state = 1\n        spec.stateMax = 0\n\n        spec.foldMaxLimit = self.xmlFile:getValue(configKey .. "#foldMaxLimit" , 1 )\n        spec.foldMinLimit = self.xmlFile:getValue(configKey .. "#foldMinLimit" , 0 )\n        spec.allowChangeOnLowered = self.xmlFile:getValue(configKey .. "#allowChangeOnLowered" , true )\n        spec.allowChangeWhileTurnedOn = self.xmlFile:getValue(configKey .. "#allowChangeWhileTurnedOn" , true )\n\n        spec.workModes = { }\n        spec.defaultWorkModeIndex = 1\n\n        for _, key in self.xmlFile:iterator(configKey .. ".workMode" ) do\n            local entry = { }\n            if self:loadWorkModeFromXML( self.xmlFile, key, entry) then\n                table.insert(spec.workModes, entry)\n\n                if entry.isDefault then\n                    spec.defaultWorkModeIndex = #spec.workModes\n                end\n            end\n        end\n\n        spec.stateMax = #spec.workModes\n        if spec.stateMax > (( 2 ^ WorkMode.WORKMODE_SEND_NUM_BITS) - 1 ) then\n            printError( "Error:WorkMode only supports " .. (( 2 ^ WorkMode.WORKMODE_SEND_NUM_BITS) - 1 ) .. " modes!" )\n        end\n\n        if spec.stateMax > 0 then\n            self:setWorkMode(spec.defaultWorkModeIndex, true )\n\n            spec.hudExtension = WorkModeHUDExtension.new( self )\n        end\n\n        spec.accumulatedFruitType = FruitType.UNKNOWN\n        spec.dirtyFlag = self:getNextDirtyFlag()\n    end\n\n    if spec.stateMax = = nil or spec.stateMax = = 0 then\n        SpecializationUtil.removeEventListener( self , "onPostLoad" , WorkMode )\n        SpecializationUtil.removeEventListener( self , "onDelete" , WorkMode )\n        SpecializationUtil.removeEventListener( self , "onReadStream" , WorkMode )\n        SpecializationUtil.removeEventListener( self , "onWriteStream" , WorkMode )\n        SpecializationUtil.removeEventListener( self , "onReadUpdateStream" , WorkMode )\n        SpecializationUtil.removeEventListener( self , "onWriteUpdateStream" , WorkMode )\n        SpecializationUtil.removeEventListener( self , "onUpdate" , WorkMode )\n        SpecializationUtil.removeEventListener( self , "onUpdateTick" , WorkMode )\n        SpecializationUtil.removeEventListener( self , "onDraw" , WorkMode )\n        SpecializationUtil.removeEventListener( self , "onTurnedOn" , WorkMode )\n        SpecializationUtil.removeEventListener( self , "onTurnedOff" , WorkMode )\n        SpecializationUtil.removeEventListener( self , "onDeactivate" , WorkMode )\n        SpecializationUtil.removeEventListener( self , "onSetLowered" , WorkMode )\n        SpecializationUtil.removeEventListener( self , "onFoldStateChanged" , WorkMode )\n        SpecializationUtil.removeEventListener( self , "onRegisterActionEvents" , WorkMode )\n    end\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"onpostload",children:"onPostLoad"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onPostLoad()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function WorkMode:onPostLoad(savegame)\n    if savegame ~ = nil and not savegame.resetVehicles then\n        local spec = self.spec_workMode\n        if spec.stateMax > 0 then\n            if savegame.xmlFile:hasProperty(savegame.key .. ".workMode#state" ) then\n                local workMode = savegame.xmlFile:getValue(savegame.key .. ".workMode#state" , spec.defaultWorkModeIndex)\n                workMode = math.clamp(workMode, 1 , spec.stateMax)\n\n                self:setWorkMode(workMode, true )\n                AnimatedVehicle.updateAnimations( self , 99999999 , true )\n\n                if self.spec_foldable ~ = nil and self.spec_foldable.hasFoldingParts then\n                    if self.spec_foldable.foldMoveDirection = = 0 then\n                        local foldAnimTime = self:getFoldAnimTime()\n                        if foldAnimTime < = 0 then\n                            self.spec_foldable.foldMoveDirection = - 1\n                        else\n                                if self.spec_foldable.foldMiddleAnimTime = = foldAnimTime then\n                                    self.spec_foldable.moveToMiddle = true\n                                end\n\n                                self.spec_foldable.foldMoveDirection = 1\n                            end\n                        end\n                    end\n                end\n            end\n        end\n    end\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"onreadstream",children:"onReadStream"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on client side on join"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onReadStream(integer streamId, Connection connection)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"integer"}),(0,t.jsx)(n.th,{children:"streamId"}),(0,t.jsx)(n.th,{children:"streamId"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Connection"}),(0,t.jsx)(n.td,{children:"connection"}),(0,t.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function WorkMode:onReadStream(streamId, connection)\n    local state = streamReadUIntN(streamId, WorkMode.WORKMODE_SEND_NUM_BITS)\n    self:setWorkMode(state, true )\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"onreadupdatestream",children:"onReadUpdateStream"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on on update"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onReadUpdateStream(integer streamId, integer timestamp, table connection)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"integer"}),(0,t.jsx)(n.th,{children:"streamId"}),(0,t.jsx)(n.th,{children:"stream ID"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"integer"}),(0,t.jsx)(n.td,{children:"timestamp"}),(0,t.jsx)(n.td,{children:"timestamp"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"table"}),(0,t.jsx)(n.td,{children:"connection"}),(0,t.jsx)(n.td,{children:"connection"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function WorkMode:onReadUpdateStream(streamId, timestamp, connection)\n    if connection:getIsServer() then\n        if streamReadBool(streamId) then\n            local spec = self.spec_workMode\n\n            local mode = spec.workModes[spec.state]\n            for _, effect in ipairs(mode.windrowerEffects) do\n                if streamReadBool(streamId) then\n                    effect.lastChargeTime = g_currentMission.time\n                end\n            end\n\n            spec.accumulatedFruitType = streamReadUIntN(streamId, FruitTypeManager.SEND_NUM_BITS)\n        end\n    end\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"onregisteractionevents",children:"onRegisterActionEvents"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onRegisterActionEvents()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"isActiveForInput"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"isActiveForInputIgnoreSelection"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function WorkMode:onRegisterActionEvents(isActiveForInput, isActiveForInputIgnoreSelection)\n    if self.isClient then\n        local spec = self.spec_workMode\n        if spec.stateMax > 0 then\n            self:clearActionEventsTable(spec.actionEvents)\n\n            if isActiveForInputIgnoreSelection then\n                local _, actionEventId = self:addPoweredActionEvent(spec.actionEvents, InputAction.TOGGLE_WORKMODE, self , WorkMode.actionEventWorkModeChange, false , true , false , true , nil )\n                g_inputBinding:setActionEventTextPriority(actionEventId, GS_PRIO_NORMAL)\n                g_inputBinding:setActionEventActive(actionEventId, false )\n\n                for _, mode in ipairs(spec.workModes) do\n                    if mode.inputAction ~ = nil then\n                        _, actionEventId = self:addPoweredActionEvent(spec.actionEvents, mode.inputAction, self , WorkMode.actionEventWorkModeChangeDirect, false , true , false , true , nil )\n                        g_inputBinding:setActionEventTextVisibility(actionEventId, false )\n                        g_inputBinding:setActionEventActive(actionEventId, false )\n                    end\n                end\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"onsetlowered",children:"onSetLowered"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on change lowering state"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onSetLowered(boolean lowered)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"boolean"}),(0,t.jsx)(n.th,{children:"lowered"}),(0,t.jsx)(n.th,{children:"attachable is lowered"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function WorkMode:onSetLowered(lowered)\n    local spec = self.spec_workMode\n\n    if self.getFoldAnimTime ~ = nil then\n        local foldAnimTime = self:getFoldAnimTime()\n        if foldAnimTime ~ = 1 and foldAnimTime ~ = 0 and foldAnimTime ~ = self.foldMiddleAnimTime then\n            spec.playDelayedLoweringAnimation = lowered\n            return\n        end\n    end\n\n    local mode = spec.workModes[spec.state]\n\n    for _, loweringAnimation in pairs(mode.loweringAnimations) do\n        if lowered then\n            if self:getAnimationTime(loweringAnimation.name) < 1 then\n                self:playAnimation(loweringAnimation.name, loweringAnimation.speed, nil , true )\n            end\n        else\n                if self:getAnimationTime(loweringAnimation.name) > 0 then\n                    self:playAnimation(loweringAnimation.name, - loweringAnimation.speed, nil , true )\n                end\n            end\n        end\n    end\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"onturnedoff",children:"onTurnedOff"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on turn off"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onTurnedOff(boolean noEventSend)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"boolean"}),(0,t.jsx)(n.th,{children:"noEventSend"}),(0,t.jsx)(n.th,{children:"no event send"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function WorkMode:onTurnedOff()\n    local spec = self.spec_workMode\n\n    if self.isClient then\n        WorkMode.deactivateWindrowerEffects( self )\n        local mode = spec.workModes[spec.state]\n\n        for _, turnedOnAnimation in pairs(mode.turnedOnAnimations) do\n            turnedOnAnimation.speedDirection = - 1\n        end\n        g_animationManager:stopAnimations(mode.animationNodes)\n    end\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"onturnedon",children:"onTurnedOn"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on turn on"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onTurnedOn(boolean noEventSend)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"boolean"}),(0,t.jsx)(n.th,{children:"noEventSend"}),(0,t.jsx)(n.th,{children:"no event send"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function WorkMode:onTurnedOn()\n    local spec = self.spec_workMode\n\n    if self.isClient then\n        local mode = spec.workModes[spec.state]\n\n        for _, turnedOnAnimation in pairs(mode.turnedOnAnimations) do\n            turnedOnAnimation.speedDirection = 1\n        end\n\n        g_animationManager:startAnimations(mode.animationNodes)\n    end\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"onupdate",children:"onUpdate"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on update"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onUpdate(float dt, , , )"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"float"}),(0,t.jsx)(n.th,{children:"dt"}),(0,t.jsx)(n.th,{children:"time since last call in ms"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"isActiveForInput"}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"isActiveForInputIgnoreSelection"}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"isSelected"}),(0,t.jsx)(n.td,{})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function WorkMode:onUpdate(dt, isActiveForInput, isActiveForInputIgnoreSelection, isSelected)\n    local spec = self.spec_workMode\n\n    if self.isClient then\n        local mode = spec.workModes[spec.state]\n\n        for i = 1 , #spec.workModes do\n            for _, turnedOnAnimation in pairs(spec.workModes[i].turnedOnAnimations) do\n                if turnedOnAnimation.speedDirection ~ = 0 then\n                    local duration = turnedOnAnimation.turnOnFadeTime\n                    if turnedOnAnimation.speedDirection = = - 1 then\n                        duration = turnedOnAnimation.turnOffFadeTime\n                    end\n                    local min , max = 0 , 1\n                    if turnedOnAnimation.speedDirection = = 1 then\n                        min , max = - 1 , 1\n                    end\n\n                    turnedOnAnimation.currentSpeed = math.clamp(turnedOnAnimation.currentSpeed + turnedOnAnimation.speedDirection * dt / duration, min , max )\n\n                    if not self:getIsAnimationPlaying(turnedOnAnimation.name) then\n                        self:playAnimation(turnedOnAnimation.name, turnedOnAnimation.currentSpeed * turnedOnAnimation.speedScale, self:getAnimationTime(turnedOnAnimation.name), true )\n                    else\n                            self:setAnimationSpeed(turnedOnAnimation.name, turnedOnAnimation.currentSpeed * turnedOnAnimation.speedScale)\n                        end\n\n                        if turnedOnAnimation.speedDirection = = - 1 and turnedOnAnimation.currentSpeed = = 0 then\n                            self:stopAnimation(turnedOnAnimation.name, true )\n                        end\n\n                        if turnedOnAnimation.currentSpeed = = 1 or turnedOnAnimation.currentSpeed = = 0 then\n                            turnedOnAnimation.speedDirection = 0\n                        end\n                    end\n                end\n            end\n\n            for _, effect in pairs(mode.windrowerEffects) do\n                if effect.lastChargeTime + 500 > g_currentMission.time then\n                    local fillType = g_fruitTypeManager:getWindrowFillTypeIndexByFruitTypeIndex(spec.accumulatedFruitType)\n                    if fillType ~ = nil then\n                        effect:setFillType(fillType)\n                        if not effect:isRunning() then\n                            g_effectManager:startEffect(effect)\n                        end\n                    end\n                else\n                        if effect.turnOffRequiredEffect = = 0 or(effect.turnOffRequiredEffect ~ = 0 and not mode.windrowerEffects[effect.turnOffRequiredEffect]:isRunning()) then\n                            g_effectManager:stopEffect(effect)\n                        end\n                    end\n                end\n\n                local allowWorkModeChange = self:getIsWorkModeChangeAllowed()\n                local actionEvent = spec.actionEvents[InputAction.TOGGLE_WORKMODE]\n                if actionEvent ~ = nil then\n                    g_inputBinding:setActionEventActive(actionEvent.actionEventId, allowWorkModeChange)\n                end\n\n                for _, workMode in ipairs(spec.workModes) do\n                    if workMode.inputAction ~ = nil then\n                        actionEvent = spec.actionEvents[workMode.inputAction]\n                        if actionEvent ~ = nil then\n                            g_inputBinding:setActionEventActive(actionEvent.actionEventId, allowWorkModeChange)\n                        end\n                    end\n                end\n            end\n\n            if self.isServer then\n                local mode = spec.workModes[spec.state]\n\n                local fruitType\n                local workAreaCharge\n                for _, area in ipairs(mode.workAreas) do\n                    local workArea = self.spec_workArea.workAreas[area.workAreaIndex]\n                    if workArea ~ = nil then\n                        if workArea.lastValidPickupFruitType ~ = FruitType.UNKNOWN then\n                            fruitType = workArea.lastValidPickupFruitType\n                        end\n                        workAreaCharge = workAreaCharge or workArea.lastPickupLiters ~ = 0\n                    end\n                end\n\n                if fruitType ~ = nil then\n                    if fruitType ~ = spec.accumulatedFruitType then\n                        spec.accumulatedFruitType = fruitType\n                        self:raiseDirtyFlags(spec.dirtyFlag)\n                    end\n                end\n\n                for _, effect in pairs(mode.windrowerEffects) do\n                    if workAreaCharge then\n                        effect.lastChargeTime = g_currentMission.time\n                        self:raiseDirtyFlags(spec.dirtyFlag)\n                    end\n                end\n            end\n        end\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"onupdatetick",children:"onUpdateTick"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onUpdateTick()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"dt"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"isActiveForInput"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"isActiveForInputIgnoreSelection"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"isSelected"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function WorkMode:onUpdateTick(dt, isActiveForInput, isActiveForInputIgnoreSelection, isSelected)\n    local spec = self.spec_workMode\n\n    if self.getFoldAnimTime ~ = nil then\n        local foldAnimTime = self:getFoldAnimTime()\n        if foldAnimTime = = 0 or foldAnimTime = = self.spec_foldable.foldMiddleAnimTime then\n            local mode = spec.workModes[spec.state]\n            for _, anim in pairs(mode.animations) do\n                if anim.repeatAfterUnfolding then\n                    if not anim.repeated then\n                        local curTime = self:getAnimationTime(anim.animName)\n                        if anim.stopTime ~ = nil then\n                            self:setAnimationStopTime(anim.animName, anim.stopTime)\n                            local speed = math.abs(anim.animSpeed)\n                            if curTime > anim.stopTime then\n                                speed = - math.abs(anim.animSpeed)\n                            end\n                            self:playAnimation(anim.animName, speed, Utils.getNoNil(anim.repeatStartTime, curTime), true )\n                        else\n                                self:playAnimation(anim.animName, anim.animSpeed, Utils.getNoNil(anim.repeatStartTime, curTime), true )\n                            end\n\n                            anim.repeated = true\n                        end\n                    end\n                end\n            end\n\n            if spec.playDelayedLoweringAnimation ~ = nil then\n                if foldAnimTime = = 1 or foldAnimTime = = 0 or foldAnimTime = = self.spec_foldable.foldMiddleAnimTime then\n                    WorkMode.onSetLowered( self , spec.playDelayedLoweringAnimation)\n                    spec.playDelayedLoweringAnimation = nil\n                end\n            end\n        end\n    end\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"onwritestream",children:"onWriteStream"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on server side on join"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onWriteStream(integer streamId, Connection connection)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"integer"}),(0,t.jsx)(n.th,{children:"streamId"}),(0,t.jsx)(n.th,{children:"streamId"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Connection"}),(0,t.jsx)(n.td,{children:"connection"}),(0,t.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function WorkMode:onWriteStream(streamId, connection)\n    local spec = self.spec_workMode\n\n    streamWriteUIntN(streamId, spec.state, WorkMode.WORKMODE_SEND_NUM_BITS)\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"onwriteupdatestream",children:"onWriteUpdateStream"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on on update"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onWriteUpdateStream(integer streamId, table connection, integer dirtyMask)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"integer"}),(0,t.jsx)(n.th,{children:"streamId"}),(0,t.jsx)(n.th,{children:"stream ID"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"table"}),(0,t.jsx)(n.td,{children:"connection"}),(0,t.jsx)(n.td,{children:"connection"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"integer"}),(0,t.jsx)(n.td,{children:"dirtyMask"}),(0,t.jsx)(n.td,{children:"dirty mask"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function WorkMode:onWriteUpdateStream(streamId, connection, dirtyMask)\n    if not connection:getIsServer() then\n        local spec = self.spec_workMode\n        if streamWriteBool(streamId, bit32.band(dirtyMask, spec.dirtyFlag) ~ = 0 ) then\n            local mode = spec.workModes[spec.state]\n\n            for _, effect in ipairs(mode.windrowerEffects) do\n                streamWriteBool(streamId, effect.lastChargeTime + 500 > g_currentMission.time )\n            end\n\n            streamWriteUIntN(streamId, spec.accumulatedFruitType, FruitTypeManager.SEND_NUM_BITS)\n        end\n    end\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Checks if all prerequisite specializations are loaded"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"prerequisitesPresent(table specializations)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"table"}),(0,t.jsx)(n.th,{children:"specializations"}),(0,t.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"table"}),(0,t.jsx)(n.th,{children:"hasPrerequisite"}),(0,t.jsx)(n.th,{children:"true if all prerequisite specializations are loaded"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function WorkMode.prerequisitesPresent(specializations)\n    return SpecializationUtil.hasSpecialization( WorkArea , specializations)\n    and SpecializationUtil.hasSpecialization( AnimatedVehicle , specializations)\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function WorkMode.registerEventListeners(vehicleType)\n    SpecializationUtil.registerEventListener(vehicleType, "onLoad" , WorkMode )\n    SpecializationUtil.registerEventListener(vehicleType, "onPostLoad" , WorkMode )\n    SpecializationUtil.registerEventListener(vehicleType, "onDelete" , WorkMode )\n    SpecializationUtil.registerEventListener(vehicleType, "onReadStream" , WorkMode )\n    SpecializationUtil.registerEventListener(vehicleType, "onWriteStream" , WorkMode )\n    SpecializationUtil.registerEventListener(vehicleType, "onReadUpdateStream" , WorkMode )\n    SpecializationUtil.registerEventListener(vehicleType, "onWriteUpdateStream" , WorkMode )\n    SpecializationUtil.registerEventListener(vehicleType, "onUpdate" , WorkMode )\n    SpecializationUtil.registerEventListener(vehicleType, "onUpdateTick" , WorkMode )\n    SpecializationUtil.registerEventListener(vehicleType, "onDraw" , WorkMode )\n    SpecializationUtil.registerEventListener(vehicleType, "onTurnedOn" , WorkMode )\n    SpecializationUtil.registerEventListener(vehicleType, "onTurnedOff" , WorkMode )\n    SpecializationUtil.registerEventListener(vehicleType, "onDeactivate" , WorkMode )\n    SpecializationUtil.registerEventListener(vehicleType, "onSetLowered" , WorkMode )\n    SpecializationUtil.registerEventListener(vehicleType, "onFoldStateChanged" , WorkMode )\n    SpecializationUtil.registerEventListener(vehicleType, "onRegisterActionEvents" , WorkMode )\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"registerevents",children:"registerEvents"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Register all events that should be called for this specialization"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"registerEvents(table vehicleType)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"table"}),(0,t.jsx)(n.th,{children:"vehicleType"}),(0,t.jsx)(n.th,{children:"vehicle type"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function WorkMode.registerEvents(vehicleType)\n    SpecializationUtil.registerEvent(vehicleType, "onWorkModeChanged" )\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function WorkMode.registerFunctions(vehicleType)\n    SpecializationUtil.registerFunction(vehicleType, "loadWorkModeFromXML" , WorkMode.loadWorkModeFromXML)\n    SpecializationUtil.registerFunction(vehicleType, "setWorkMode" , WorkMode.setWorkMode)\n    SpecializationUtil.registerFunction(vehicleType, "getWorkMode" , WorkMode.getWorkMode)\n    SpecializationUtil.registerFunction(vehicleType, "getIsWorkModeChangeAllowed" , WorkMode.getIsWorkModeChangeAllowed)\n    SpecializationUtil.registerFunction(vehicleType, "deactivateWindrowerEffects" , WorkMode.deactivateWindrowerEffects)\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"registeroverwrittenfunctions",children:"registerOverwrittenFunctions"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"registerOverwrittenFunctions()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function WorkMode.registerOverwrittenFunctions(vehicleType)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getIsWorkAreaActive" , WorkMode.getIsWorkAreaActive)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getCanBeSelected" , WorkMode.getCanBeSelected)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getAllowsLowering" , WorkMode.getAllowsLowering)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "loadSprayTypeFromXML" , WorkMode.loadSprayTypeFromXML)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getIsSprayTypeActive" , WorkMode.getIsSprayTypeActive)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "loadMovingToolFromXML" , WorkMode.loadMovingToolFromXML)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getIsMovingToolActive" , WorkMode.getIsMovingToolActive)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getAreEffectsVisible" , WorkMode.getAreEffectsVisible)\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"registerworkmodexmlpaths",children:"registerWorkModeXMLPaths"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on specialization initializing"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"registerWorkModeXMLPaths()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"schema"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"basePath"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function WorkMode.registerWorkModeXMLPaths(schema, basePath)\n    schema:register(XMLValueType.FLOAT, basePath .. "#foldMaxLimit" , "Fold max.limit to change mode" , 1 )\n    schema:register(XMLValueType.FLOAT, basePath .. "#foldMinLimit" , "Fold min.limit to change mode" , 0 )\n    schema:register(XMLValueType.BOOL, basePath .. "#allowChangeOnLowered" , "Allow change while lowered" , true )\n        schema:register(XMLValueType.BOOL, basePath .. "#allowChangeWhileTurnedOn" , "Allow change while turned on" , true )\n\n            schema:addDelayedRegistrationPath(basePath .. ".workMode(?)" , "WorkMode:workMode" )\n\n            schema:register(XMLValueType.L10N_STRING, basePath .. ".workMode(?)#name" , "Work mode name" )\n            schema:register(XMLValueType.STRING, basePath .. ".workMode(?)#inputBindingName" , "Input action name for quick access" )\n                schema:register(XMLValueType.BOOL, basePath .. ".workMode(?)#isDefault" , "Work mode is active by default" , false )\n                schema:register(XMLValueType.STRING, basePath .. ".workMode(?).turnedOnAnimations.turnedOnAnimation(?)#name" , "Turned on animation name" )\n                schema:register(XMLValueType.FLOAT, basePath .. ".workMode(?).turnedOnAnimations.turnedOnAnimation(?)#turnOnFadeTime" , "Turn on fade time(sec.)" , 1 )\n                schema:register(XMLValueType.FLOAT, basePath .. ".workMode(?).turnedOnAnimations.turnedOnAnimation(?)#turnOffFadeTime" , "Turn off fade time(sec.)" , 1 )\n                schema:register(XMLValueType.FLOAT, basePath .. ".workMode(?).turnedOnAnimations.turnedOnAnimation(?)#speedScale" , "Speed scale" , 1 )\n\n                schema:register(XMLValueType.STRING, basePath .. ".workMode(?).loweringAnimations.loweringAnimation(?)#name" , "Lowering animation name" )\n                schema:register(XMLValueType.FLOAT, basePath .. ".workMode(?).loweringAnimations.loweringAnimation(?)#speed" , "Speed scale" , 1 )\n\n                schema:register(XMLValueType.INT, basePath .. ".workMode(?).workAreas.workArea(?)#workAreaIndex" , "Work area index" )\n                schema:register(XMLValueType.INT, basePath .. ".workMode(?).workAreas.workArea(?)#dropAreaIndex" , "Drop area index" )\n\n                schema:register(XMLValueType.STRING, basePath .. ".workMode(?).animation(?)#name" , "Mode change animation name" )\n                schema:register(XMLValueType.FLOAT, basePath .. ".workMode(?).animation(?)#speed" , "Mode change animation speed" , 1 )\n                schema:register(XMLValueType.FLOAT, basePath .. ".workMode(?).animation(?)#stopTime" , "Mode change animation stop time" )\n                schema:register(XMLValueType.BOOL, basePath .. ".workMode(?).animation(?)#repeatAfterUnfolding" , "Repeat animation after unfolding" , false )\n                schema:register(XMLValueType.FLOAT, basePath .. ".workMode(?).animation(?)#repeatStartTime" , "Repeat start time" )\n\n                schema:register(XMLValueType.NODE_INDEX, basePath .. ".workMode(?).movingToolLimit#node" , "Target moving tool node" )\n                schema:register(XMLValueType.ANGLE, basePath .. ".workMode(?).movingToolLimit#minRot" , "Min.rotation" , 0 )\n                schema:register(XMLValueType.ANGLE, basePath .. ".workMode(?).movingToolLimit#maxRot" , "Max.rotation" , 0 )\n\n                EffectManager.registerEffectXMLPaths(schema, basePath .. ".workMode(?).windrowerEffect" )\n                AnimationManager.registerAnimationNodesXMLPaths(schema, basePath .. ".workMode(?).animationNodes" )\n\n                AIImplement.registerAIImplementBaseXMLPaths(schema, basePath .. ".workMode(?).ai" )\n\n                schema:register(XMLValueType.INT, Sprayer.SPRAY_TYPE_XML_KEY .. "#workModeIndex" , "Index of work mode to activate spray type" )\n\n                schema:addDelayedRegistrationFunc( "Cylindered:movingTool" , function (cSchema, cKey)\n                    cSchema:register(XMLValueType.BOOL, cKey .. "#allowWhileChangingWorkMode" , "Allow movement while changing work mode" , true )\n                    end )\n                end\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"savetoxmlfile",children:"saveToXMLFile"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"saveToXMLFile()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"xmlFile"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"key"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"usedModNames"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function WorkMode:saveToXMLFile(xmlFile, key, usedModNames)\n    local spec = self.spec_workMode\n    if spec.state ~ = nil then\n        xmlFile:setValue(key .. "#state" , spec.state)\n    end\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"setworkmode",children:"setWorkMode"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Change work mode"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"setWorkMode(integer state, boolean noEventSend)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"integer"}),(0,t.jsx)(n.th,{children:"state"}),(0,t.jsx)(n.th,{children:"new state"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"boolean"}),(0,t.jsx)(n.td,{children:"noEventSend"}),(0,t.jsx)(n.td,{children:"no event send"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function WorkMode:setWorkMode(state, noEventSend)\n    local spec = self.spec_workMode\n\n    if noEventSend = = nil or noEventSend = = false then\n        if g_server ~ = nil then\n            g_server:broadcastEvent( SetWorkModeEvent.new( self , state), nil , nil , self )\n        else\n                g_client:getServerConnection():sendEvent( SetWorkModeEvent.new( self , state))\n            end\n        end\n\n        local currentMode = spec.workModes[spec.state]\n        local newMode = spec.workModes[state]\n        if newMode = = nil then\n            return\n        end\n\n        if state ~ = spec.state then\n            if currentMode.animations ~ = nil then\n                for _,anim in pairs(currentMode.animations) do\n                    local curTime = self:getAnimationTime(anim.animName)\n                    if anim.stopTime = = nil then\n                        self:playAnimation(anim.animName, - anim.animSpeed, curTime, noEventSend)\n                    end\n                end\n                g_animationManager:stopAnimations(currentMode.animationNodes)\n            end\n\n            if newMode.animations ~ = nil then\n                for _,anim in pairs(newMode.animations) do\n                    local curTime = self:getAnimationTime(anim.animName)\n                    if anim.stopTime ~ = nil then\n                        self:setAnimationStopTime(anim.animName, anim.stopTime)\n                        local speed = math.abs(anim.animSpeed)\n                        if curTime > anim.stopTime then\n                            speed = - math.abs(anim.animSpeed)\n                        end\n                        self:playAnimation(anim.animName, speed, curTime, noEventSend)\n                    else\n                            self:playAnimation(anim.animName, anim.animSpeed, curTime, noEventSend)\n                        end\n                    end\n                end\n\n                if self.getIsTurnedOn ~ = nil then\n                    local isTurnedOn = self:getIsTurnedOn()\n\n                    if newMode.animations ~ = nil then\n                        if isTurnedOn then\n                            g_animationManager:startAnimations(newMode.animationNodes)\n                        end\n                    end\n\n                    if isTurnedOn then\n                        for _, turnedOnAnimation in pairs(newMode.turnedOnAnimations) do\n                            if self:getIsAnimationPlaying(turnedOnAnimation.name) then\n                                for i = 1 , #spec.workModes do\n                                    local otherMode = spec.workModes[i]\n                                    if otherMode ~ = newMode then\n                                        for j = 1 , #otherMode.turnedOnAnimations do\n                                            local otherAnimation = otherMode.turnedOnAnimations[j]\n                                            if otherAnimation.name = = turnedOnAnimation.name then\n                                                local animationSpeed = self.spec_animatedVehicle.animations[turnedOnAnimation.name].currentSpeed\n                                                if animationSpeed ~ = 0 then\n                                                    local alpha = animationSpeed / turnedOnAnimation.speedScale\n                                                    turnedOnAnimation.currentSpeed = alpha\n                                                    otherAnimation.currentSpeed = 0\n                                                    otherAnimation.speedDirection = 0\n                                                end\n                                            end\n                                        end\n                                    end\n                                end\n                            end\n\n                            turnedOnAnimation.speedDirection = 1\n                        end\n                    end\n                end\n\n                for _, effect in pairs(currentMode.windrowerEffects) do\n                    g_effectManager:stopEffect(effect)\n                end\n\n                spec.state = state\n            end\n\n            local workAreaSpec = self.spec_workArea\n            if workAreaSpec ~ = nil then\n                local workAreas = workAreaSpec.workAreas\n                for _, workArea in pairs(spec.workModes[state].workAreas) do\n                    local workAreaToSet = workAreas[workArea.workAreaIndex]\n                    if workAreaToSet ~ = nil then\n                        workAreaToSet.dropWindrowWorkAreaIndex = workArea.dropAreaIndex -- windrower\n                        workAreaToSet.dropAreaIndex = workArea.dropAreaIndex -- mower\n                    end\n                end\n            end\n\n            if newMode.movingTool ~ = nil then\n                local movingTool = newMode.movingTool\n                if newMode.movingToolMinRot ~ = nil then\n                    movingTool.rotMin = newMode.movingToolMinRot\n                end\n\n                if newMode.movingToolMaxRot ~ = nil then\n                    movingTool.rotMax = newMode.movingToolMaxRot\n                end\n\n                if self.isClient then\n                    movingTool.networkInterpolators.rotation:setMinMax(movingTool.rotMin, movingTool.rotMax)\n                end\n            end\n\n            SpecializationUtil.raiseEvent( self , "onWorkModeChanged" , newMode, currentMode)\n        end\n\n'})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);