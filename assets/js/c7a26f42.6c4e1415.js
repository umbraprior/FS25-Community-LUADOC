"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[52930],{28453(n,e,s){s.d(e,{R:()=>r,x:()=>l});var i=s(96540);const t={},o=i.createContext(t);function r(n){const e=i.useContext(o);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:r(n.components),i.createElement(o.Provider,{value:e},n.children)}},29495(n,e,s){s.r(e),s.d(e,{assets:()=>d,contentTitle:()=>l,default:()=>a,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"script/GUI/GuiTopDownCursor","title":"GuiTopDownCursor","description":"GuiTopDownCursor","source":"@site/../docs/script/GUI/GuiTopDownCursor.md","sourceDirName":"script/GUI","slug":"/script/GUI/GuiTopDownCursor","permalink":"/FS25-Community-LUADOC/script/GUI/GuiTopDownCursor","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"GuiTopDownCamera","permalink":"/FS25-Community-LUADOC/script/GUI/GuiTopDownCamera"},"next":{"title":"GuiUtils","permalink":"/FS25-Community-LUADOC/script/GUI/GuiUtils"}}');var t=s(74848),o=s(28453);const r={},l=void 0,d={},c=[{value:"GuiTopDownCursor",id:"guitopdowncursor",level:2},{value:"activate",id:"activate",level:3},{value:"deactivate",id:"deactivate",level:3},{value:"delete",id:"delete",level:3},{value:"mouseEvent",id:"mouseevent",level:3},{value:"onInputModeChanged",id:"oninputmodechanged",level:3},{value:"registerActionEvents",id:"registeractionevents",level:3},{value:"removeActionEvents",id:"removeactionevents",level:3}];function h(n){const e={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h2,{id:"guitopdowncursor",children:"GuiTopDownCursor"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Description"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"Top-down cursor"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Functions"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#activate",children:"activate"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#deactivate",children:"deactivate"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#delete",children:"delete"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#mouseevent",children:"mouseEvent"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#oninputmodechanged",children:"onInputModeChanged"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#registeractionevents",children:"registerActionEvents"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#removeactionevents",children:"removeActionEvents"})}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"activate",children:"activate"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Description"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"Activate the cursor. This will show the cursor and take some input."}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"activate()"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Code"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-lua",children:"function GuiTopDownCursor:activate()\n    self.isActive = true\n    self:onInputModeChanged( { g_inputBinding:getLastInputMode() } )\n\n    if not self.shapesLoaded then\n        self:loadShapes()\n    end\n\n    if self.rootNode ~ = nil then\n        setVisibility( self.rootNode, self.isVisible)\n    end\n\n    self:registerActionEvents()\n    g_messageCenter:subscribe(MessageType.INPUT_MODE_CHANGED, self.onInputModeChanged, self )\nend\n\n"})}),"\n",(0,t.jsx)(e.h3,{id:"deactivate",children:"deactivate"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Description"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"Deactivate the cursor. This will hide the cursor and stop any grabbing of input."}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"deactivate()"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Code"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-lua",children:"function GuiTopDownCursor:deactivate()\n    if self.rootNode ~ = nil then\n        setVisibility( self.rootNode, false )\n    end\n\n    g_messageCenter:unsubscribeAll( self )\n    self:removeActionEvents()\n\n    self.isActive = false\nend\n\n"})}),"\n",(0,t.jsx)(e.h3,{id:"delete",children:"delete"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Description"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"delete()"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Code"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-lua",children:"function GuiTopDownCursor:delete()\n    if self.isActive then\n        self:deactivate()\n    end\n\n    if self.cursorOverlay ~ = nil then\n        self.cursorOverlay:delete()\n        self.cursorOverlay = nil\n    end\n\n    if self.rootNode ~ = nil then\n        delete( self.rootNode)\n    end\n\n    if self.loadRequestId ~ = nil then\n        g_i3DManager:cancelStreamI3DFile( self.loadRequestId)\n        self.loadRequestId = nil\n    end\nend\n\n"})}),"\n",(0,t.jsx)(e.h3,{id:"mouseevent",children:"mouseEvent"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Description"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"Handle mouse moves that are not caught by actions."}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"mouseEvent()"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"any"}),(0,t.jsx)(e.th,{children:"posX"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"any"}),(0,t.jsx)(e.td,{children:"posY"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"any"}),(0,t.jsx)(e.td,{children:"isDown"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"any"}),(0,t.jsx)(e.td,{children:"isUp"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"any"}),(0,t.jsx)(e.td,{children:"button"})]})]})]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Code"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-lua",children:"function GuiTopDownCursor:mouseEvent(posX, posY, isDown, isUp, button)\n    if self.mouseDisabled then\n        return\n    end\n\n    -- if self.isMouseMode and not self.isCatchingCursor then\n        -- self.mousePosX = posX\n        -- self.mousePosY = posY\n        -- end\n\n        if self.lastActionFrame > = g_ time then\n            return\n        end\n\n        -- Mouse move only happens when other actions did not\n        if self.isCatchingCursor then\n            self.isCatchingCursor = false\n            g_inputBinding:setShowMouseCursor( true , true )\n\n            wrapMousePosition( self.lockedMousePosX, self.lockedMousePosY)\n\n            g_inputBinding.mousePosXLast, g_inputBinding.mousePosYLast = self.lockedMousePosX, self.lockedMousePosY\n\n            self.mousePosX = self.lockedMousePosX\n            self.mousePosY = self.lockedMousePosY\n        else\n                if self.isMouseMode then\n                    self.mousePosX = posX\n                    self.mousePosY = posY\n                end\n            end\n        end\n\n"})}),"\n",(0,t.jsx)(e.h3,{id:"oninputmodechanged",children:"onInputModeChanged"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Description"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"Called when the mouse input mode changes."}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"onInputModeChanged()"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(e.table,{children:(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"any"}),(0,t.jsx)(e.th,{children:"inputMode"})]})})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Code"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-lua",children:"function GuiTopDownCursor:onInputModeChanged(inputMode)\n    self.isMouseMode = inputMode[ 1 ] = = GS_INPUT_HELP_MODE_KEYBOARD\n\n    -- Reset to center of screen\n    if not self.isMouseMode then\n        self.mousePosX = 0.5\n        self.mousePosY = 0.5\n    end\nend\n\n"})}),"\n",(0,t.jsx)(e.h3,{id:"registeractionevents",children:"registerActionEvents"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Description"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"Register required action events for the cursor."}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"registerActionEvents()"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Code"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-lua",children:"function GuiTopDownCursor:registerActionEvents()\n    local _, eventId = g_inputBinding:registerActionEvent(InputAction.AXIS_CONSTRUCTION_CURSOR_ROTATE, self , self.onRotate, false , false , true , false )\n    self.rotateEventId = eventId\n\n    g_inputBinding:setActionEventActive( self.rotateEventId, self.rotationEnabled)\n    g_inputBinding:setActionEventTextPriority( self.rotateEventId, GS_PRIO_NORMAL)\nend\n\n"})}),"\n",(0,t.jsx)(e.h3,{id:"removeactionevents",children:"removeActionEvents"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Description"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"Remove action events registered for the cursor."}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"removeActionEvents()"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Code"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-lua",children:"function GuiTopDownCursor:removeActionEvents()\n    self.rotateEventId = nil\n\n    g_inputBinding:removeActionEventsByTarget( self )\nend\n\n"})})]})}function a(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(h,{...n})}):h(n)}}}]);