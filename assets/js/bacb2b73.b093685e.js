"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[88101],{28453(n,e,l){l.d(e,{R:()=>o,x:()=>t});var i=l(96540);const r={},a=i.createContext(r);function o(n){const e=i.useContext(a);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:o(n.components),i.createElement(a.Provider,{value:e},n.children)}},72400(n,e,l){l.r(e),l.d(e,{assets:()=>s,contentTitle:()=>t,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"script/Configurations/PlaceableConfigurationItemColor","title":"PlaceableConfigurationItemColor","description":"PlaceableConfigurationItemColor","source":"@site/../docs/script/Configurations/PlaceableConfigurationItemColor.md","sourceDirName":"script/Configurations","slug":"/script/Configurations/PlaceableConfigurationItemColor","permalink":"/FS25-Community-LUADOC/script/Configurations/PlaceableConfigurationItemColor","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"PlaceableConfigurationItem","permalink":"/FS25-Community-LUADOC/script/Configurations/PlaceableConfigurationItem"},"next":{"title":"VehicleConfigurationDataSprayerNodes","permalink":"/FS25-Community-LUADOC/script/Configurations/VehicleConfigurationDataSprayerNodes"}}');var r=l(74848),a=l(28453);const o={},t=void 0,s={},c=[{value:"PlaceableConfigurationItemColor",id:"placeableconfigurationitemcolor",level:2},{value:"getColor",id:"getcolor",level:3},{value:"getColorAndMaterialFromPlaceable",id:"getcolorandmaterialfromplaceable",level:3},{value:"getFallbackConfigId",id:"getfallbackconfigid",level:3},{value:"hasDataChanged",id:"hasdatachanged",level:3},{value:"loadFromSavegameXMLFile",id:"loadfromsavegamexmlfile",level:3},{value:"loadFromXML",id:"loadfromxml",level:3},{value:"new",id:"new",level:3},{value:"onPostLoad",id:"onpostload",level:3},{value:"onSizeLoad",id:"onsizeload",level:3},{value:"postLoad",id:"postload",level:3},{value:"readFromStream",id:"readfromstream",level:3},{value:"registerSavegameXMLPaths",id:"registersavegamexmlpaths",level:3},{value:"registerXMLPaths",id:"registerxmlpaths",level:3},{value:"saveToXMLFile",id:"savetoxmlfile",level:3},{value:"writeToStream",id:"writetostream",level:3}];function d(n){const e={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h2,{id:"placeableconfigurationitemcolor",children:"PlaceableConfigurationItemColor"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Stores the data of a single color configuration"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Parent"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:"?version=script&category=16&class=178",children:"PlaceableConfigurationItem"})}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Functions"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#getcolor",children:"getColor"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#getcolorandmaterialfromplaceable",children:"getColorAndMaterialFromPlaceable"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#getfallbackconfigid",children:"getFallbackConfigId"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#hasdatachanged",children:"hasDataChanged"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#loadfromsavegamexmlfile",children:"loadFromSavegameXMLFile"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#loadfromxml",children:"loadFromXML"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#new",children:"new"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#onpostload",children:"onPostLoad"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#onsizeload",children:"onSizeLoad"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#postload",children:"postLoad"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#readfromstream",children:"readFromStream"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#registersavegamexmlpaths",children:"registerSavegameXMLPaths"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#registerxmlpaths",children:"registerXMLPaths"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#savetoxmlfile",children:"saveToXMLFile"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#writetostream",children:"writeToStream"})}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"getcolor",children:"getColor"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"getColor()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"placeable"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function PlaceableConfigurationItemColor:getColor(placeable)\n    local color, _, colorOffset = self:getColorAndMaterialFromPlaceable(placeable)\n    return color, colorOffset\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"getcolorandmaterialfromplaceable",children:"getColorAndMaterialFromPlaceable"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"getColorAndMaterialFromPlaceable()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"placeable"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function PlaceableConfigurationItemColor:getColorAndMaterialFromPlaceable(placeable)\n    local color, materialTemplateName = self.color, self.materialTemplateName\n\n    if placeable ~ = nil then\n        local data = placeable.configurationData[ self.configName]\n        if data ~ = nil then\n            local configurationData = data[ self.index]\n            if configurationData ~ = nil then\n                if configurationData.color ~ = nil then\n                    color = configurationData.color\n                end\n\n                if configurationData.materialTemplateName ~ = nil then\n                    materialTemplateName = configurationData.materialTemplateName\n                end\n            end\n        end\n    end\n\n    return table.clone(color), materialTemplateName, self.colorOffset\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"getfallbackconfigid",children:"getFallbackConfigId"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"getFallbackConfigId()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"configs"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"configId"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"configName"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"configFileName"})]})]})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function PlaceableConfigurationItemColor.getFallbackConfigId(configs, configId, configName, configFileName)\n    local numManualConfigs = 0\n    for _, config in pairs(configs) do\n        if config.isManualConfig then\n            numManualConfigs = numManualConfigs + 1\n        end\n    end\n\n    -- prior to patch 3, we used the color index as saveId, now we use the brand material name\n    local configIndex = tonumber(configId)\n    if configIndex ~ = nil then\n        if configIndex > numManualConfigs then\n            local brandMaterialName = PlaceableConfigurationItemColor.DEFAULT_COLORS_PATCH_ 1 _ 2 [configIndex - numManualConfigs]\n            for _, config in pairs(configs) do\n                if config.saveId = = brandMaterialName then\n                    return config.index, config.saveId\n                end\n            end\n        end\n\n        return nil , nil\n    end\n\n    return nil , nil\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"hasdatachanged",children:"hasDataChanged"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"hasDataChanged()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"configurationData1"})]})}),(0,r.jsx)(e.tbody,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"configurationData2"})]})})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function PlaceableConfigurationItemColor:hasDataChanged(configurationData1, configurationData2)\n    if self.isCustomColor then\n        if configurationData1.color ~ = nil and configurationData2.color ~ = nil then\n            if math.abs(configurationData1.color[ 1 ] - configurationData2.color[ 1 ]) > 0.00001\n                or math.abs(configurationData1.color[ 2 ] - configurationData2.color[ 2 ]) > 0.00001\n                or math.abs(configurationData1.color[ 3 ] - configurationData2.color[ 3 ]) > 0.00001 then\n                return true\n            end\n        elseif configurationData1.color ~ = nil or configurationData2.color ~ = nil then\n                return true\n            end\n\n            if configurationData1.materialTemplateName ~ = configurationData2.materialTemplateName then\n                return true\n            end\n        end\n\n        return false\n    end\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"loadfromsavegamexmlfile",children:"loadFromSavegameXMLFile"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"loadFromSavegameXMLFile()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"xmlFile"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"key"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"configurationData"})]})]})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:'function PlaceableConfigurationItemColor:loadFromSavegameXMLFile(xmlFile, key, configurationData)\n    PlaceableConfigurationItemColor:superClass().loadFromSavegameXMLFile( self , xmlFile, key, configurationData)\n\n    if self.isCustomColor then\n        configurationData.color = xmlFile:getValue(key .. "#color" , nil , true )\n        configurationData.materialTemplateName = xmlFile:getValue(key .. "#materialTemplateName" )\n    end\nend\n\n'})}),"\n",(0,r.jsx)(e.h3,{id:"loadfromxml",children:"loadFromXML"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"loadFromXML()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"xmlFile"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"baseKey"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"configKey"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"baseDirectory"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"customEnvironment"})]})]})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:'function PlaceableConfigurationItemColor:loadFromXML(xmlFile, baseKey, configKey, baseDirectory, customEnvironment)\n    if not PlaceableConfigurationItemColor:superClass().loadFromXML( self , xmlFile, baseKey, configKey, baseDirectory, customEnvironment) then\n        return false\n    end\n\n    local colorStr = xmlFile:getValue(configKey .. "#color" , nil , true )\n    local color, title = g_vehicleMaterialManager:getMaterialTemplateColorAndTitleByName(colorStr, customEnvironment)\n    if color ~ = nil then\n        if self.hasDefaultName then\n            self.name = title or self.name\n        end\n        self.color = color\n    else\n            self.color = string.getVector(colorStr)\n            if self.color ~ = nil and # self.color ~ = 3 then\n                Logging.xmlWarning(xmlFile, "Invalid rgb color \'%s\' in \'%s\'" , colorStr, configKey)\n                self.color = nil\n            end\n        end\n\n        self.uiColor = xmlFile:getValue(configKey .. "#uiColor" , nil , true )\n\n        local materialTemplateName = xmlFile:getValue(configKey .. "#materialTemplateName" )\n        if materialTemplateName ~ = nil then\n            color, title = g_vehicleMaterialManager:getMaterialTemplateColorAndTitleByName(materialTemplateName, customEnvironment)\n            if color ~ = nil then\n                self.color = self.color or color\n\n                if self.name = = nil or self.name = = "" then\n                    self.name = title or self.name\n                end\n            else\n                    Logging.xmlWarning(xmlFile, "Material template \'%s\' not defined for \'%s\'" , materialTemplateName, configKey)\n                    end\n                end\n\n                if self.color = = nil then\n                    self.color = { 1 , 1 , 1 }\n                end\n\n                self.colorOffset = xmlFile:getValue(configKey .. "#colorOffset" , 0.71 )\n\n                self.uiColor = self.uiColor or self.color\n                self.isManualConfig = true\n\n                return true\n            end\n\n'})}),"\n",(0,r.jsx)(e.h3,{id:"new",children:"new"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"new()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"configName"})]})}),(0,r.jsx)(e.tbody,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"customMt"})]})})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function PlaceableConfigurationItemColor.new(configName, customMt)\n    local self = PlaceableConfigurationItemColor:superClass().new(configName, PlaceableConfigurationItemColor _mt)\n\n    self.isCustomColor = false\n    self.isManualConfig = false\n\n    return self\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"onpostload",children:"onPostLoad"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"onPostLoad()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"placeable"})]})}),(0,r.jsx)(e.tbody,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"configId"})]})})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:'function PlaceableConfigurationItemColor:onPostLoad(placeable, configId)\n    PlaceableConfigurationItemColor:superClass().onPostLoad( self , placeable, configId)\n\n    local configurationDesc = g_placeableConfigurationManager:getConfigurationDescByName( self.configName)\n    local xmlFile = placeable.xmlFile\n\n    local color, _, colorOffset = self:getColorAndMaterialFromPlaceable(placeable)\n\n    local r, g, b = unpack(color)\n    for _, materialKey in xmlFile:iterator(configurationDesc.configurationsKey .. ".material" ) do\n        local slotName = xmlFile:getValue(materialKey .. "#slotName" )\n        PlaceableConfigurationItemColor.applyColor(placeable.rootNode, slotName, r, g, b, colorOffset)\n    end\n\n    for _, nodeKey in xmlFile:iterator(configurationDesc.configurationsKey .. ".node" ) do\n        local node = xmlFile:getValue(nodeKey .. "#node" , nil , placeable.components, placeable.i3dMappings)\n        if node ~ = nil then\n            setShaderParameter(node, "colorScale0" , r, g, b, 1 , false )\n        end\n    end\nend\n\n'})}),"\n",(0,r.jsx)(e.h3,{id:"onsizeload",children:"onSizeLoad"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"onSizeLoad()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"xmlFile"})]})}),(0,r.jsx)(e.tbody,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"sizeData"})]})})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:'function PlaceableConfigurationItemColor:onSizeLoad(xmlFile, sizeData)\n    -- exclude dynamic color configurations without xml definition\n    if self.configKey ~ = "" then\n        PlaceableConfigurationItemColor:superClass().onSizeLoad( self , xmlFile, sizeData)\n    end\nend\n\n'})}),"\n",(0,r.jsx)(e.h3,{id:"postload",children:"postLoad"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"postLoad()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"xmlFile"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"baseKey"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"baseDir"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"customEnvironment"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"isMod"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"configurationItems"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"storeItem"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"configName"})]})]})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:'function PlaceableConfigurationItemColor.postLoad(xmlFile, baseKey, baseDir, customEnvironment, isMod, configurationItems, storeItem, configName)\n    PlaceableConfigurationItemColor:superClass().postLoad(xmlFile, baseKey, baseDir, customEnvironment, isMod, configurationItems, storeItem, configName)\n\n    local defaultColorIndex = xmlFile:getValue(baseKey .. "#defaultColorIndex" )\n\n    if xmlFile:getValue(baseKey .. "#useDefaultColors" , false ) or(g_modIsLoaded[ "FS25_unlimitedColorConfigurations" ] and #configurationItems > 0 ) then\n        local price = xmlFile:getValue(baseKey .. "#price" , 1000 )\n\n        for i, brandMaterialName in pairs( PlaceableConfigurationItemColor.DEFAULT_COLORS) do\n            local color, title = g_vehicleMaterialManager:getMaterialTemplateColorAndTitleByName(brandMaterialName, customEnvironment)\n            if color ~ = nil then\n                local configItem = PlaceableConfigurationItemColor.new(configName)\n\n                configItem.name = title or configItem.name\n\n                if i = = defaultColorIndex then\n                    configItem.isDefault = true\n                    configItem.price = 0\n                else\n                        configItem.price = price\n                    end\n\n                    configItem.name = configItem.name or title\n                    configItem.color = color\n                    configItem.uiColor = color\n                    configItem.saveId = brandMaterialName\n\n                    table.insert(configurationItems, configItem)\n                    configItem:setIndex(#configurationItems)\n                end\n            end\n\n            local configItem = PlaceableConfigurationItemColor.new(configName)\n\n            configItem.name = g_i18n:getText( "ui_colorPicker_custom" )\n\n            configItem.price = price\n\n            configItem.color = { 1 , 1 , 1 , 1 }\n            configItem.uiColor = { 1 , 1 , 1 , 1 }\n            configItem.materialTemplateName = "calibratedPaint"\n            configItem.isCustomColor = true\n            configItem.isSelectable = false\n            configItem.saveId = "CUSTOM_COLOR"\n\n            table.insert(configurationItems, configItem)\n            configItem:setIndex(#configurationItems)\n        end\n\n        if defaultColorIndex = = nil then\n            local defaultIsDefined = false\n            for _, item in ipairs(configurationItems) do\n                if item.isDefault ~ = nil and item.isDefault then\n                    defaultIsDefined = true\n                end\n            end\n\n            if not defaultIsDefined then\n                if #configurationItems > 0 then\n                    configurationItems[ 1 ].isDefault = true\n                    configurationItems[ 1 ].price = 0\n                end\n            end\n        end\n    end\n\n'})}),"\n",(0,r.jsx)(e.h3,{id:"readfromstream",children:"readFromStream"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"readFromStream()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"streamId"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"connection"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"configurationData"})]})]})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function PlaceableConfigurationItemColor:readFromStream(streamId, connection, configurationData)\n    if self.isCustomColor then\n        local r, g, b = NetworkUtil.readCompressedColor(streamId)\n        configurationData.color = { r, g, b }\n\n        local templateIndex = streamReadUIntN(streamId, VehicleMaterialManager.NUM_BITS_TEMPLATE)\n        configurationData.materialTemplateName = g_vehicleMaterialManager:getMaterialTemplateNameByIndex(templateIndex)\n    end\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"registersavegamexmlpaths",children:"registerSavegameXMLPaths"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"registerSavegameXMLPaths()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"schema"})]})}),(0,r.jsx)(e.tbody,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"basePath"})]})})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:'function PlaceableConfigurationItemColor.registerSavegameXMLPaths(schema, basePath)\n    PlaceableConfigurationItemColor:superClass().registerSavegameXMLPaths(schema, basePath)\n\n    schema:register(XMLValueType.FLOAT, basePath .. "#colorOffset" , "colorOffset HSL" , 0.71 )\n    schema:register(XMLValueType.VECTOR_ 3 , basePath .. "#color" , "Configuration color" , "1 1 1" )\n    schema:register(XMLValueType.STRING, basePath .. "#materialTemplateName" , "Name of material template to use" )\nend\n\n'})}),"\n",(0,r.jsx)(e.h3,{id:"registerxmlpaths",children:"registerXMLPaths"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"registerXMLPaths()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"schema"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"rootPath"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"configPath"})]})]})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:'function PlaceableConfigurationItemColor.registerXMLPaths(schema, rootPath, configPath)\n    PlaceableConfigurationItemColor:superClass().registerXMLPaths(schema, rootPath, configPath)\n\n    schema:register(XMLValueType.INT, rootPath .. "#defaultColorIndex" , "Default color index on start" )\n    schema:register(XMLValueType.BOOL, rootPath .. "#useDefaultColors" , "Use default colors" , false )\n    schema:register(XMLValueType.INT, rootPath .. "#price" , "Default color price" , 1000 )\n\n    schema:register(XMLValueType.STRING, rootPath .. ".material(?)#slotName" )\n    schema:register(XMLValueType.NODE_INDEX, rootPath .. ".node(?)#node" )\n    schema:register(XMLValueType.FLOAT, configPath .. "#colorOffset" , "colorOffset when use HSL ShaderParam and the baseTextureColor isn\xb4t blue" , 0.71 )\n    schema:register(XMLValueType.STRING, configPath .. "#color" , "Configuration color" , "1 1 1 1" )\n    schema:register(XMLValueType.COLOR, configPath .. "#uiColor" , "Configuration UI color" , "1 1 1 1" )\n    schema:register(XMLValueType.STRING, configPath .. "#materialTemplateName" , "Name of the material template to use" )\nend\n\n'})}),"\n",(0,r.jsx)(e.h3,{id:"savetoxmlfile",children:"saveToXMLFile"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"saveToXMLFile()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"xmlFile"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"key"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"isActive"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"configurationData"})]})]})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:'function PlaceableConfigurationItemColor:saveToXMLFile(xmlFile, key, isActive, configurationData)\n    PlaceableConfigurationItemColor:superClass().saveToXMLFile( self , xmlFile, key, isActive, configurationData)\n\n    if self.isCustomColor then\n        if configurationData.color ~ = nil then\n            xmlFile:setValue(key .. "#color" , configurationData.color[ 1 ], configurationData.color[ 2 ], configurationData.color[ 3 ])\n        end\n\n        if configurationData.materialTemplateName ~ = nil then\n            xmlFile:setValue(key .. "#materialTemplateName" , configurationData.materialTemplateName)\n        end\n    end\nend\n\n'})}),"\n",(0,r.jsx)(e.h3,{id:"writetostream",children:"writeToStream"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"writeToStream()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"streamId"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"connection"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"configurationData"})]})]})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function PlaceableConfigurationItemColor:writeToStream(streamId, connection, configurationData)\n    if self.isCustomColor then\n        local r, g, b = 1 , 1 , 1\n        if configurationData.color ~ = nil then\n            r, g, b = configurationData.color[ 1 ], configurationData.color[ 2 ], configurationData.color[ 3 ]\n        end\n\n        NetworkUtil.writeCompressedColor(streamId, r, g, b)\n\n        local templateIndex = g_vehicleMaterialManager:getMaterialTemplateIndexByName(configurationData.materialTemplateName)\n        streamWriteUIntN(streamId, math.clamp(templateIndex, 0 , VehicleMaterialManager.MAX_TEMPLATE_INDEX), VehicleMaterialManager.NUM_BITS_TEMPLATE)\n    end\nend\n\n"})})]})}function h(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}}}]);