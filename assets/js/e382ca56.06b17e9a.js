"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[78996],{20703(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>f,frontMatter:()=>o,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"script/Hud/IngameMessage","title":"IngameMessage","description":"IngameMessage","source":"@site/../docs/script/Hud/IngameMessage.md","sourceDirName":"script/Hud","slug":"/script/Hud/IngameMessage","permalink":"/FS25-Community-LUADOC/script/Hud/IngameMessage","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"HUDTextButtonElement","permalink":"/FS25-Community-LUADOC/script/Hud/HUDTextButtonElement"},"next":{"title":"I3DManager","permalink":"/FS25-Community-LUADOC/script/I3d/I3DManager"}}');var l=t(74848),i=t(28453);const o={},r=void 0,c={},a=[{value:"IngameMessage",id:"ingamemessage",level:2},{value:"draw",id:"draw",level:3},{value:"new",id:"new",level:3},{value:"storeScaledValues",id:"storescaledvalues",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"ingamemessage",children:"IngameMessage"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Maximum message duration in milliseconds."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Parent"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"?version=script&category=&class=",children:"HUDDisplay"})}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Functions"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#draw",children:"draw"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#new",children:"new"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#storescaledvalues",children:"storeScaledValues"})}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"draw",children:"draw"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Draw the notifications."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"draw()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function IngameMessage:draw()\n    IngameMessage:superClass().draw( self )\n\n    if not self:getVisible() then\n        return\n    end\n\n    if g_gui:getIsGuiVisible() then\n        return\n    end\n\n    local message = self.currentMessage\n    if message ~ = nil then\n        local title = message.title\n        local text = message.text\n        local controls = message.controls\n\n        local posX, posY = self:getPosition()\n        posX = posX - self.width * 0.5\n        local height = 2 * self.textOffsetY + self.skipHeight\n\n        setTextColor( 1 , 1 , 1 , 1 )\n        setTextAlignment(RenderText.ALIGN_LEFT)\n        setTextVerticalAlignment(RenderText.VERTICAL_ALIGN_TOP)\n        setTextWrapWidth( self.maxTextWidth)\n\n        local titleHeight = 0\n        if title ~ = nil then\n            setTextBold( true )\n            titleHeight = getTextHeight( self.titleTextSize, title)\n            height = height + titleHeight + self.titleToTextOffsetY\n        end\n\n        local textHeight = 0\n        if text ~ = nil then\n            setTextBold( false )\n            textHeight = getTextHeight( self.textSize, text)\n            height = height + textHeight\n        end\n\n        if controls ~ = nil then\n            local numControls = #controls\n            height = height + self.controlsHeight * numControls + g_pixelSizeY * (numControls - 1 )\n        end\n\n        if title ~ = nil or text ~ = nil then\n            height = height + self.textControlsOffsetY\n        end\n\n        local color = HUD.COLOR.BACKGROUND_DARK\n        drawFilledRectRound(posX, posY, self.width, height, 0.5 , color[ 1 ], color[ 2 ], color[ 3 ], color[ 4 ])\n\n        local textPosX = posX + self.textOffsetX\n        local currentPosY = posY + height - self.textOffsetY\n        if title ~ = nil then\n            setTextBold( true )\n            renderText(textPosX, currentPosY, self.titleTextSize, title)\n            currentPosY = currentPosY - self.titleToTextOffsetY - titleHeight\n        end\n\n        if text ~ = nil then\n            setTextBold( false )\n            renderText(textPosX, currentPosY, self.textSize, text)\n            currentPosY = currentPosY - textHeight\n        end\n\n        setTextWrapWidth( 0 )\n        setTextVerticalAlignment(RenderText.VERTICAL_ALIGN_BASELINE)\n\n        if title ~ = nil or text ~ = nil then\n            currentPosY = currentPosY - self.textControlsOffsetY\n\n            local lineStart = posX + self.textOffsetX\n            local lineEnd = lineStart + self.maxTextWidth\n            drawLine2D(lineStart, currentPosY, lineEnd, currentPosY, g_pixelSizeY, 1 , 1 , 1 , 0.2 )\n        end\n\n        if controls ~ = nil then\n            local lineStart = posX + self.textOffsetX\n            local lineEnd = lineStart + self.maxTextWidth\n            local offsetY = ( self.controlsHeight - self.buttonHeight) * 0.5\n            for _, control in ipairs(controls) do\n                currentPosY = currentPosY - self.controlsHeight\n\n                local width = self:drawControl(control, lineEnd, currentPosY + offsetY)\n                local maxWidth = self.maxTextWidth - width - self.controlTextOffsetX\n\n                local controlText = Utils.limitTextToWidth(control.text, self.controlTextSize, maxWidth, false , " .. ." )\n                setTextBold( true )\n                renderText(textPosX, currentPosY + self.controlTextOffsetY, self.controlTextSize, controlText)\n\n                drawLine2D(lineStart, currentPosY, lineEnd, currentPosY, g_pixelSizeY, 1 , 1 , 1 , 0.2 )\n            end\n\n            local numControls = #controls\n            height = height + self.controlsHeight * numControls + g_pixelSizeY * (numControls - 1 )\n        end\n\n        setTextBold( true )\n        setTextAlignment(RenderText.ALIGN_RIGHT)\n        local skipTextWidth = getTextWidth( self.skipTextSize, self.skipText)\n\n        local skipTextPosX = posX + self.textOffsetX + self.maxTextWidth * 0.5 + skipTextWidth\n        local skipTextPosY = posY + self.skipTextOffsetY\n        renderText(skipTextPosX, skipTextPosY, self.skipTextSize, self.skipText)\n\n        local skipPosX = skipTextPosX - self.skipTextOffsetX - skipTextWidth\n        local skipPosY = posY + self.skipButtonOffsetY\n\n        self:drawControl( self.skipControl, skipPosX, skipPosY)\n\n        setTextColor( 1 , 1 , 1 , 1 )\n        setTextAlignment(RenderText.ALIGN_LEFT)\n    end\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"new",children:"new"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Create a new IngameMessage."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"new(any? customMt)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any?"}),(0,l.jsx)(n.th,{children:"customMt"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any?"}),(0,l.jsx)(n.th,{children:"self"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function IngameMessage.new(customMt)\n    local self = IngameMessage:superClass().new( IngameMessage _mt)\n\n    self.pendingMessages = { }\n    self.isCustomInputActive = false -- input state flag\n    self.lastInputMode = g_inputBinding:getInputHelpMode()\n\n    self.glyphButtonOverlay = GlyphButtonOverlay.new()\n    self.glyphButtonOverlay:setColor( 0.22323 , 0.40724 , 0.0036 , 1 , 0 , 0 , 0 , 0.80 )\n\n    self.keyButtonOverlay = ButtonOverlay.new()\n    self.keyButtonOverlay:setColor( 0.22323 , 0.40724 , 0.00368 , 1 , 0 , 0 , 0 , 0.80 )\n\n    self.skipText = g_i18n:getText( "button_ok" )\n    self.skipControl = nil\n\n    self.isGamePaused = false -- game paused state\n\n    self.nextMessageTimer = - 1\n\n    return self\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"storescaledvalues",children:"storeScaledValues"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Store scaled positioning, size and offset values."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"storeScaledValues()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function IngameMessage:storeScaledValues()\n    local offsetX, offsetY = self:scalePixelValuesToScreenVector( 0 , 0 )\n    local posX = 0.5 + offsetX\n    local posY = g_hudAnchorBottom + offsetY\n    self:setPosition(posX, posY)\n\n    self.width = self:scalePixelToScreenWidth( 640 )\n\n    self.skipTextSize = self:scalePixelToScreenHeight( 17 )\n    self.skipTextOffsetX, self.skipTextOffsetY = self:scalePixelValuesToScreenVector( 5 , 22 )\n    self.skipButtonOffsetY = self:scalePixelToScreenHeight( 12 )\n    self.skipHeight = self:scalePixelToScreenHeight( 30 )\n\n    self.titleTextSize = self:scalePixelToScreenHeight( 19 )\n    self.titleToTextOffsetY = self:scalePixelToScreenHeight( 10 )\n    self.titleOffsetY = self:scalePixelToScreenHeight( 20 )\n\n    self.textSize = self:scalePixelToScreenHeight( 17 )\n    self.textOffsetY = self:scalePixelToScreenHeight( 18 )\n\n    self.textOffsetX, self.textOffsetY = self:scalePixelValuesToScreenVector( 20 , 20 )\n    self.maxTextWidth = self.width - 2 * self.textOffsetX\n\n    self.controlTextSize = self:scalePixelToScreenHeight( 17 )\n    self.controlTextOffsetX, self.controlTextOffsetY = self:scalePixelValuesToScreenVector( 10 , 15 )\n    self.textControlsOffsetY = self:scalePixelToScreenHeight( 15 )\n    self.controlsHeight = self:scalePixelToScreenHeight( 42 )\n\n    self.keyButtonOverlay:setMinWidth( self:scalePixelToScreenWidth( 35 ))\n    self.glyphButtonOverlay:setMinWidth( self:scalePixelToScreenWidth( 35 ))\n    self.buttonHeight = self:scalePixelToScreenHeight( 30 )\n\n    self:updateControls()\nend\n\n"})})]})}function f(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},28453(e,n,t){t.d(n,{R:()=>o,x:()=>r});var s=t(96540);const l={},i=s.createContext(l);function o(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);