"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[15814],{28453(e,n,r){r.d(n,{R:()=>i,x:()=>c});var t=r(96540);const l={},s=t.createContext(l);function i(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),t.createElement(s.Provider,{value:n},e.children)}},81770(e,n,r){r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"script/AI/AIDriveStrategyConveyor","title":"AIDriveStrategyConveyor","description":"AIDriveStrategyConveyor","source":"@site/../docs/script/AI/AIDriveStrategyConveyor.md","sourceDirName":"script/AI","slug":"/script/AI/AIDriveStrategyConveyor","permalink":"/FS25-Community-LUADOC/script/AI/AIDriveStrategyConveyor","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"AIDriveStrategyCombine","permalink":"/FS25-Community-LUADOC/script/AI/AIDriveStrategyCombine"},"next":{"title":"AIDriveStrategyFieldCourse","permalink":"/FS25-Community-LUADOC/script/AI/AIDriveStrategyFieldCourse"}}');var l=r(74848),s=r(28453);const i={},c=void 0,o={},d=[{value:"AIDriveStrategyConveyor",id:"aidrivestrategyconveyor",level:2},{value:"getDriveData",id:"getdrivedata",level:3},{value:"new",id:"new",level:3},{value:"setAIVehicle",id:"setaivehicle",level:3},{value:"update",id:"update",level:3}];function a(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"aidrivestrategyconveyor",children:"AIDriveStrategyConveyor"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Class for a drive strategy for driving forward and backward\nCopyright (C) GIANTS Software GmbH, Confidential, All Rights Reserved."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Parent"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"?version=script&category=4&class=149",children:"AIDriveStrategy"})}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Functions"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getdrivedata",children:"getDriveData"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#new",children:"new"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#setaivehicle",children:"setAIVehicle"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#update",children:"update"})}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"getdrivedata",children:"getDriveData"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getDriveData()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"dt"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"vX"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"vY"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"vZ"})]})]})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AIDriveStrategyConveyor:getDriveData(dt, vX, vY, vZ)\n    local _, y, z = localToLocal( self.vehicle.wheels[ self.vehicle.aiConveyorBelt.backWheelIndex].repr, self.vehicle.components[ 1 ].node, 0 , 0 , 0 )\n    local worldCX, worldCY, worldCZ = localToWorld( self.vehicle.components[ 1 ].node, 0 , y, z)\n    local distanceMoved = MathUtil.vector2Length(worldCX - self.lastPos[ 1 ], worldCZ - self.lastPos[ 3 ])\n\n    self.distanceMoved = self.distanceMoved + distanceMoved\n    self.lastPos = { worldCX, worldCY, worldCZ }\n\n    if self.distanceMoved > = self.distanceToMove then\n        if self.fistTimeChange then\n            self.distanceToMove = self.distanceToMove * 2\n            self.fistTimeChange = false\n        end\n\n        self.distanceMoved = 0\n        if self.currentTarget = = 1 then\n            self.currentTarget = 2\n        else\n                self.currentTarget = 1\n            end\n        end\n\n        local speedFactor = math.clamp( math.sin( self.distanceMoved / self.distanceToMove * 3.14 ), 0.1 , 0.5 ) * 2\n\n        local dir = true\n        if self.currentTarget = = 2 then\n            dir = not dir\n        end\n        return self.worldTarget[ self.currentTarget][ 1 ], self.worldTarget[ self.currentTarget][ 3 ], dir, self.vehicle.aiConveyorBelt.speed * speedFactor, 100\n    end\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"new",children:"new"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"new()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"reconstructionData"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"customMt"})]})})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AIDriveStrategyConveyor.new(reconstructionData, customMt)\n    local self = AIDriveStrategy.new(reconstructionData, customMt or AIDriveStrategyConveyor _mt)\n\n    return self\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"setaivehicle",children:"setAIVehicle"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"setAIVehicle()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"vehicle"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AIDriveStrategyConveyor:setAIVehicle(vehicle)\n    AIDriveStrategyConveyor:superClass().setAIVehicle( self , vehicle)\n\n    local _, y, z = localToLocal( self.vehicle.wheels[ self.vehicle.aiConveyorBelt.backWheelIndex].repr, self.vehicle.components[ 1 ].node, 0 , 0 , 0 )\n    local x1, y1, z1 = localToWorld( self.vehicle.components[ 1 ].node, 0 , y, z)\n    local x2, y2, z2 = getWorldTranslation( self.vehicle.wheels[ self.vehicle.aiConveyorBelt.centerWheelIndex].repr)\n\n    local length = MathUtil.vector3Length(x1 - x2, y1 - y2, z1 - z2)\n    local width = length * math.sin( math.rad( self.vehicle.aiConveyorBelt.currentAngle / 2 ))\n    local length2 = math.sqrt( math.pow(length, 2 ) - math.pow(width, 2 ))\n\n    self.distanceToMove = math.rad( self.vehicle.aiConveyorBelt.currentAngle) * length / 2\n\n    self.currentTarget = 1\n\n    self.worldTarget = { }\n    self.worldTarget[ 1 ] = { localToWorld( self.vehicle.wheels[ self.vehicle.aiConveyorBelt.centerWheelIndex].repr, width, 0 , - length2) }\n    self.worldTarget[ 2 ] = { localToWorld( self.vehicle.wheels[ self.vehicle.aiConveyorBelt.centerWheelIndex].repr, - width, 0 , - length2) }\n\n    self.lastPos = { x1, y1, z1 }\n\n    self.distanceMoved = 0\n    self.fistTimeChange = true\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"update",children:"update"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"update()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"dt"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AIDriveStrategyConveyor:update(dt)\nend\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}}}]);