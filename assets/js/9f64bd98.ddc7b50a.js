"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[64153],{14122(e,n,i){i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>d});const l=JSON.parse('{"id":"script/Graphics/HumanGraphicsComponent","title":"HumanGraphicsComponent","description":"HumanGraphicsComponent","source":"@site/../docs/script/Graphics/HumanGraphicsComponent.md","sourceDirName":"script/Graphics","slug":"/script/Graphics/HumanGraphicsComponent","permalink":"/FS25-Community-LUADOC/script/Graphics/HumanGraphicsComponent","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"PlayerStyleConfig","permalink":"/FS25-Community-LUADOC/script/Graphical/PlayerStyleConfig"},"next":{"title":"HumanGraphicsComponentState","permalink":"/FS25-Community-LUADOC/script/Graphics/HumanGraphicsComponentState"}}');var t=i(74848),s=i(28453);const r={},a=void 0,o={},d=[{value:"HumanGraphicsComponent",id:"humangraphicscomponent",level:2},{value:"applyCustomWorkStyle",id:"applycustomworkstyle",level:3},{value:"debugDraw",id:"debugdraw",level:3},{value:"debugDrawAnimator",id:"debugdrawanimator",level:3},{value:"delete",id:"delete",level:3},{value:"getStyle",id:"getstyle",level:3},{value:"hide",id:"hide",level:3},{value:"initialize",id:"initialize",level:3},{value:"new",id:"new",level:3},{value:"setModel",id:"setmodel",level:3},{value:"setModelVisibility",id:"setmodelvisibility",level:3},{value:"setStyleAsync",id:"setstyleasync",level:3},{value:"show",id:"show",level:3},{value:"update",id:"update",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"humangraphicscomponent",children:"HumanGraphicsComponent"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Handles updating a human's graphical data (players, NPCs, etc.), like styles and physical position on the map."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Functions"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#applycustomworkstyle",children:"applyCustomWorkStyle"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#debugdraw",children:"debugDraw"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#debugdrawanimator",children:"debugDrawAnimator"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#delete",children:"delete"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#getstyle",children:"getStyle"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#hide",children:"hide"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#initialize",children:"initialize"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#new",children:"new"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#setmodel",children:"setModel"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#setmodelvisibility",children:"setModelVisibility"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#setstyleasync",children:"setStyleAsync"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#show",children:"show"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#update",children:"update"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"applycustomworkstyle",children:"applyCustomWorkStyle"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Sets a custom work style preset."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"applyCustomWorkStyle(string presetName, )"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"string"}),(0,t.jsx)(n.th,{children:"presetName"}),(0,t.jsx)(n.th,{children:"The name of the preset to use."})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"isOwner"}),(0,t.jsx)(n.td,{})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function HumanGraphicsComponent:applyCustomWorkStyle(presetName, isOwner)\n\n    -- Get the work style preset from its name.\n    local preset\n    if not string.isNilOrWhitespace(presetName) then\n        preset = self.style:getPresetByName(presetName)\n    end\n\n    -- If the preset was found, apply it.\n    if preset ~ = nil then\n        local tempStyle = PlayerStyle.new()\n        tempStyle:copyConfigurationFrom( self.baseStyle)\n        preset:applyToStyle(tempStyle)\n        self:setStyleAsync(tempStyle, nil , nil , nil , true , nil , isOwner)\n        -- Otherwise; fall back to the base style.\n    else\n            self:setStyleAsync( self.baseStyle, nil , nil , nil , false , nil , isOwner)\n        end\n    end\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"debugdraw",children:"debugDraw"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Displays the debug information."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"debugDraw(float x, float y, float textSize, boolean? debugDrawModel)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"float"}),(0,t.jsx)(n.th,{children:"x"}),(0,t.jsx)(n.th,{children:"The x position on the screen to begin drawing the values."})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"float"}),(0,t.jsx)(n.td,{children:"y"}),(0,t.jsx)(n.td,{children:"The y position on the screen to begin drawing the values."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"float"}),(0,t.jsx)(n.td,{children:"textSize"}),(0,t.jsx)(n.td,{children:"The height of the text."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"boolean?"}),(0,t.jsx)(n.td,{children:"debugDrawModel"}),(0,t.jsx)(n.td,{children:"If this is true or nil, the model and skeleton will be drawn."})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"boolean?"}),(0,t.jsx)(n.th,{children:"y"}),(0,t.jsx)(n.th,{children:"The y position on the screen after the entire debug info was drawn."})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function HumanGraphicsComponent:debugDraw(x, y, textSize, debugDrawModel)\n\n    -- Draw the model.\n    if (debugDrawModel or debugDrawModel = = nil ) and self.model ~ = nil then\n        self.model:debugDraw(x, y, textSize)\n    end\n\n    -- Draw the graphical root node.\n    DebugUtil.drawDebugNode( self.graphicsRootNode, "Graphics" , false , 0 )\n    DebugUtil.drawDebugNode( self.rightShoulderCameraNode, "ShoulderCam" , false , 0 )\n\n    -- Render the header.\n    y = DebugUtil.renderTextLine(x, y, textSize * 1.5 , "HumanGraphicsComponent" , nil , true )\n\n    local directionX, directionY, directionZ = localDirectionToWorld( self.graphicsRootNode, 0 , 0 , 1 )\n    local _, yaw = MathUtil.directionToPitchYaw(directionX, directionY, directionZ)\n\n    y = DebugUtil.renderTextLine(x, y, textSize, string.format( "Rotation: %.4f" , yaw), nil , true )\n\n    y = self.style:debugDraw(x, y, textSize)\n\n    -- Return the final y value.\n    return y\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"debugdrawanimator",children:"debugDrawAnimator"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Draws debug information for this component's animations."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"debugDrawAnimator(float x, float y, float textSize)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"float"}),(0,t.jsx)(n.th,{children:"x"}),(0,t.jsx)(n.th,{children:"The x position on the screen to begin drawing the values."})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"float"}),(0,t.jsx)(n.td,{children:"y"}),(0,t.jsx)(n.td,{children:"The y position on the screen to begin drawing the values."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"float"}),(0,t.jsx)(n.td,{children:"textSize"}),(0,t.jsx)(n.td,{children:"The height of the text."})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function HumanGraphicsComponent:debugDrawAnimator(x, y, textSize)\n    self.animation:debugDraw(x, y, textSize)\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"delete",children:"delete"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Cleans up the graphical data when the player is deleted."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"delete()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function HumanGraphicsComponent:delete()\n    if self:getHasFacialAnimation() then\n        self.facialAnimation:delete()\n    end\n\n    -- Delete the graphical data.\n    self.sounds:delete()\n    self.animation:delete()\n    self.model:delete()\n\n    -- Delete the graphical node.\n    if self.graphicsRootNode ~ = 0 and self.graphicsRootNode ~ = nil then\n        delete( self.graphicsRootNode)\n        self.graphicsRootNode = nil\n    end\n\n    -- Delete the foliage bending data.\n    local mission = g_currentMission\n    if mission ~ = nil and self.foliageBendingId ~ = nil then\n        mission.foliageBendingSystem:destroyObject( self.foliageBendingId)\n        self.foliageBendingId = nil\n    end\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"getstyle",children:"getStyle"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Returns the player's current style."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"getStyle(boolean? currentStyle)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"boolean?"}),(0,t.jsx)(n.th,{children:"currentStyle"}),(0,t.jsx)(n.th,{children:"If this is true, the player's current style is returned; otherwise it may fall back onto the base style if no style exists."})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"boolean?"}),(0,t.jsx)(n.th,{children:"style"}),(0,t.jsx)(n.th,{children:"The player's current style."})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function HumanGraphicsComponent:getStyle(currentStyle)\n    if currentStyle then\n        return self.style\n    end\n\n    return self.baseStyle or self.style\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"hide",children:"hide"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Handles hiding the graphical representation of the player from the world."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"hide()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function HumanGraphicsComponent:hide()\n    self:setModelVisibility( false )\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"initialize",children:"initialize"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called when the player loads into the map for the first time. Creates the required nodes in the scene."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"initialize()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function HumanGraphicsComponent:initialize()\n\n    -- Create the graphical node that shows where the player is.\n    self.graphicsRootNode = createTransformGroup( "player_graphicsRootNode" )\n    link(getRootNode(), self.graphicsRootNode)\n\n    -- Create the shoulder camera node.\n    self.rightShoulderCameraNode = createTransformGroup( "player_rightShoulderCameraNode" )\n    link( self.graphicsRootNode, self.rightShoulderCameraNode)\n    setTranslation( self.rightShoulderCameraNode, - 0.35 , 1.675 , - 0.35 )\n\n    -- Create the node used to bend foliage.\n    self.foliageBendingNode = createTransformGroup( "player_foliageBendingNode" )\n    link( self.graphicsRootNode, self.foliageBendingNode)\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"new",children:"new"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Creates a new instance of the player's graphics component."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"new()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"boolean?"}),(0,t.jsx)(n.th,{children:"instance"}),(0,t.jsx)(n.th,{children:"The created instance."})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function HumanGraphicsComponent.new()\n\n    -- Create the instance.\n    local self = setmetatable( { } , HumanGraphicsComponent _mt)\n\n    -- The data used for foliage bending.\n        self.foliageBendingId = nil\n        self.foliageBendingNode = nil\n\n        -- The node used to display the player model.\n        self.graphicsRootNode = nil\n        self.isGraphicsRootNodeVisible = true\n\n        -- The node used to position the camera when talking to NPCs.\n        self.rightShoulderCameraNode = nil\n\n        self.style = PlayerStyle.new()\n        self.baseStyle = PlayerStyle.new()\n\n        -- The player\'s model, starting off empty.\n        self.model = HumanModel.new()\n        self.model:loadEmpty()\n\n        self.nameTagOffsetY = 1.9\n\n        self.facialAnimation = nil\n        self.facialAnimationEnabled = false\n        self.facialAnimationMinimumDistance = FacialAnimation.MINIMUM_VISIBLE_CAMERA_DISTANCE\n        self.facialAnimationMaximumDistance = FacialAnimation.MAXIMUM_VISIBLE_CAMERA_DISTANCE\n\n        self.postAnimationCallbackHandle = nil\n\n        self.sounds = HumanSounds.new()\n        self.soundsEnabled = true\n\n        local animation = ConditionalAnimation.new()\n\n        local parameters = { }\n        parameters.absSpeed = animation:registerParameter( "absSpeed" , ConditionalAnimation.TYPE.FLOAT)\n        parameters.relativeVelocityX = animation:registerParameter( "relativeVelocityX" , ConditionalAnimation.TYPE.FLOAT)\n        parameters.relativeVelocityY = animation:registerParameter( "relativeVelocityY" , ConditionalAnimation.TYPE.FLOAT)\n        parameters.relativeVelocityZ = animation:registerParameter( "relativeVelocityZ" , ConditionalAnimation.TYPE.FLOAT)\n        parameters.rotationVelocity = animation:registerParameter( "rotationVelocity" , ConditionalAnimation.TYPE.FLOAT)\n        parameters.movementDirX = animation:registerParameter( "movementDirX" , ConditionalAnimation.TYPE.FLOAT)\n        parameters.movementDirZ = animation:registerParameter( "movementDirZ" , ConditionalAnimation.TYPE.FLOAT)\n        parameters.distanceToGround = animation:registerParameter( "distanceToGround" , ConditionalAnimation.TYPE.FLOAT)\n        parameters.isCloseToGround = animation:registerParameter( "isCloseToGround" , ConditionalAnimation.TYPE.BOOL)\n        parameters.isIdling = animation:registerParameter( "isIdling" , ConditionalAnimation.TYPE.BOOL)\n        parameters.isWalking = animation:registerParameter( "isWalking" , ConditionalAnimation.TYPE.BOOL)\n        parameters.isRunning = animation:registerParameter( "isRunning" , ConditionalAnimation.TYPE.BOOL)\n        parameters.isCrouching = animation:registerParameter( "isCrouching" , ConditionalAnimation.TYPE.BOOL)\n        parameters.isGrounded = animation:registerParameter( "isGrounded" , ConditionalAnimation.TYPE.BOOL)\n        parameters.isInWater = animation:registerParameter( "isInWater" , ConditionalAnimation.TYPE.BOOL)\n        parameters.isSwimming = animation:registerParameter( "isSwimming" , ConditionalAnimation.TYPE.BOOL)\n        parameters.isStrafeWalkMode = animation:registerParameter( "isStrafeWalkMode" , ConditionalAnimation.TYPE.BOOL)\n        parameters.isFirstPerson = animation:registerParameter( "isFirstPerson" , ConditionalAnimation.TYPE.BOOL)\n        parameters.isCutting = animation:registerParameter( "isCutting" , ConditionalAnimation.TYPE.BOOL)\n        parameters.isVerticalCut = animation:registerParameter( "isVerticalCut" , ConditionalAnimation.TYPE.BOOL)\n        parameters.isHoldingChainsaw = animation:registerParameter( "isHoldingChainsaw" , ConditionalAnimation.TYPE.BOOL)\n        parameters.isNPC = animation:registerParameter( "isNPC" , ConditionalAnimation.TYPE.BOOL)\n\n        animation:setSpecialParameterIds(parameters.absSpeed, parameters.rotationVelocity)\n\n        self.animation = animation\n        self.animationParameters = parameters\n\n        self.defaultState = HumanGraphicsComponentState.new()\n        self:defaultAllParameters()\n\n        -- Return the created instance.\n        return self\n    end\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"setmodel",children:"setModel"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Sets the player model to the given model."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"setModel(HumanModel model)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"HumanModel"}),(0,t.jsx)(n.th,{children:"model"}),(0,t.jsx)(n.th,{children:"The player model to use."})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function HumanGraphicsComponent:setModel(model)\n\n    -- Ensure the model has a root node.\n    if model.rootNode = = nil then\n        printCallstack()\n        Logging.error( "New model is missing root node and cannot be used!" )\n        return\n    end\n\n    -- Delete the model and animation.\n    if self.model ~ = nil and self.model ~ = model then\n        self.model:delete()\n    end\n\n    -- Set the model to the given one and link it to the graphics node.\n    self.model = model\n    link( self.graphicsRootNode, model.rootNode)\n\n    self:loadAnimation()\n    self:loadSounds()\n\n    -- Update the visibility.\n    self:setModelVisibility( true )\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"setmodelvisibility",children:"setModelVisibility"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Sets the visibility of the model to the given value."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"setModelVisibility(boolean visibility, )"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"boolean"}),(0,t.jsx)(n.th,{children:"visibility"}),(0,t.jsx)(n.th,{children:"The new visibility of the model."})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"overrideFoliageBending"}),(0,t.jsx)(n.td,{})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function HumanGraphicsComponent:setModelVisibility(visibility, overrideFoliageBending)\n    self.model:setVisibility(visibility)\n\n    self:setGraphicsRootNodeVisibility( self.isGraphicsRootNodeVisible)\n\n    local useFoliageBending = Utils.getNoNil(overrideFoliageBending, visibility)\n\n    local mission = g_currentMission\n    if useFoliageBending then\n        -- If foilage bending can be set up, do so.\n            if self.foliageBendingNode ~ = nil and self.foliageBendingId = = nil and mission ~ = nil and mission.foliageBendingSystem then\n                self.foliageBendingId = mission.foliageBendingSystem:createRectangle( - 0.5 , 0.5 , - 0.5 , 0.5 , 0.4 , self.foliageBendingNode)\n            end\n        else\n                if self.foliageBendingId ~ = nil then\n                    mission.foliageBendingSystem:destroyObject( self.foliageBendingId)\n                    self.foliageBendingId = nil\n                end\n            end\n        end\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"setstyleasync",children:"setStyleAsync"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Sets the style asynchronously, possibly loading a new model or using the network.\nCallback is not guaranteed to run after player changes in MP game."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"setStyleAsync(PlayerStyle style, function? callback, table? callbackObject, table? callbackArgs, boolean? isTempStyle,\nXMLFile? xmlFile, boolean? isOwner)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"PlayerStyle"}),(0,t.jsx)(n.th,{children:"style"}),(0,t.jsx)(n.th,{children:"The style to use."})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"function?"}),(0,t.jsx)(n.td,{children:"callback"}),(0,t.jsx)(n.td,{children:"The callback function, not guaranteed to run in multiplayer."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"table?"}),(0,t.jsx)(n.td,{children:"callbackObject"}),(0,t.jsx)(n.td,{children:"The optional target object for the callback function."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"table?"}),(0,t.jsx)(n.td,{children:"callbackArgs"}),(0,t.jsx)(n.td,{children:"The optional arguments for the callback function."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"boolean?"}),(0,t.jsx)(n.td,{children:"isTempStyle"}),(0,t.jsx)(n.td,{children:"Is true if this style is just temporary, e.g. a preview in the wardrobe; otherwise false."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"XMLFile?"}),(0,t.jsx)(n.td,{children:"xmlFile"}),(0,t.jsx)(n.td,{children:"The pre-loaded xml file."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"boolean?"}),(0,t.jsx)(n.td,{children:"isOwner"}),(0,t.jsx)(n.td,{children:"True if this graphics component is for the main player; otherwise false."})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function HumanGraphicsComponent:setStyleAsync(style, callback, callbackObject, callbackArgs, isTempStyle, xmlFile, isOwner)\n\n    local function onFinishedFacialAnimationCallback(target, success, args)\n        if not success and self.facialAnimation ~ = nil then\n            self.facialAnimation:delete()\n            self.facialAnimation = nil\n        end\n\n        local graphicsLoadingState = args.loadingState\n        if graphicsLoadingState = = HumanModelLoadingState.OK then\n            if self.graphicsRootNode ~ = nil then\n                self:setGraphicsRootNodeVisibility( self.isGraphicsRootNodeVisible)\n            end\n        end\n\n        if callback ~ = nil then\n            callback(callbackObject, graphicsLoadingState, args.loadedNewPlayerModel, callbackArgs)\n        end\n    end\n\n    -- The callback used when the style is fully loaded.\n    local function onStyleLoadedCallback(target, loadingState, args)\n\n        args.loadingState = loadingState\n        local isLoadingFacialAnimations = false\n        if self:getIsFacialAnimationEnabled() then\n            isLoadingFacialAnimations = self.facialAnimation:loadFromStyleAsync(style, self.model, onFinishedFacialAnimationCallback, target, args)\n        end\n\n        if not isLoadingFacialAnimations then\n            if self.facialAnimation ~ = nil then\n                self.facialAnimation:delete()\n                self.facialAnimation = nil\n            end\n            onFinishedFacialAnimationCallback(target, true , args)\n        end\n    end\n\n    if self.graphicsRootNode ~ = nil then\n        self:setGraphicsRootNodeVisibility( self.isGraphicsRootNodeVisible)\n    end\n\n    -- If the style uses the currently used model, just set the style directly.\n    if self.model.xmlFilename = = style.xmlFilename then\n\n        -- Set the style of the model.\n        self:setStyle(style, isTempStyle)\n        self.model:loadFromStyleAsync( self.style, onStyleLoadedCallback, nil , { loadedNewPlayerModel = false } )\n    else\n            self:setStyle(style, isTempStyle)\n\n            -- The callback for when the player's model is loaded.\n                local function onModelLoadedCallback(_, loadingState, _)\n\n                    -- If the model could not be loaded, do nothing.\n                        if loadingState ~ = HumanModelLoadingState.OK then\n                            Logging.warning( \"Player model could not be loaded from \" .. style.xmlFilename)\n                            return\n                        end\n\n                        -- Set the model and the style of the player.\n                        self:setModel( self.model)\n                        self.model:loadFromStyleAsync( self.style, onStyleLoadedCallback, nil , { loadedNewPlayerModel = true } )\n                    end\n\n                    -- Load the player's model.\n                    if xmlFile = = nil then\n                        self.model:load(style.xmlFilename, true , isOwner, true , onModelLoadedCallback)\n                    else\n                            self.model:loadFromXMLFileAsync(xmlFile, true , isOwner, true , onModelLoadedCallback)\n                        end\n                    end\n                end\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"show",children:"show"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Handles showing the graphical representation of the player in the world."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"show()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function HumanGraphicsComponent:show()\n    self:setModelVisibility( true )\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"update",children:"update"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Updates the graphics every frame."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"update(float dt)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"float"}),(0,t.jsx)(n.th,{children:"dt"}),(0,t.jsx)(n.th,{children:"Delta time in ms."})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function HumanGraphicsComponent:update(dt)\n    --#profile RemoteProfiler.zoneBeginN("HumanGraphicsComponent-updateAnimation")\n    self.animation:update(dt)\n    --#profile RemoteProfiler.zoneEnd()\n    --#profile RemoteProfiler.zoneBeginN("HumanGraphicsComponent-updateSounds")\n    self.sounds:update(dt)\n    --#profile RemoteProfiler.zoneEnd()\n\n    if self:getHasFacialAnimation() then\n        --#profile RemoteProfiler.zoneBeginN("HumanGraphicsComponent-updateFacialAnim")\n        self.facialAnimation:update(dt)\n        self:updateFacialAnimationEmotions()\n        --#profile RemoteProfiler.zoneEnd()\n    end\nend\n\n'})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},28453(e,n,i){i.d(n,{R:()=>r,x:()=>a});var l=i(96540);const t={},s=l.createContext(t);function r(e){const n=l.useContext(s);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),l.createElement(s.Provider,{value:n},e.children)}}}]);