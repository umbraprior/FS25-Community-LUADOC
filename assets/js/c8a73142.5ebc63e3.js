"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[58752],{26407(e,n,i){i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>a,frontMatter:()=>r,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"script/Specializations/SplineVehicle","title":"SplineVehicle","description":"SplineVehicle","source":"@site/../docs/script/Specializations/SplineVehicle.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/SplineVehicle","permalink":"/FS25-Community-LUADOC/script/Specializations/SplineVehicle","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"SpeedRotatingParts","permalink":"/FS25-Community-LUADOC/script/Specializations/SpeedRotatingParts"},"next":{"title":"Sprayer","permalink":"/FS25-Community-LUADOC/script/Specializations/Sprayer"}}');var l=i(74848),t=i(28453);const r={},c=void 0,d={},o=[{value:"SplineVehicle",id:"splinevehicle",level:2},{value:"alignToSplineTime",id:"aligntosplinetime",level:3},{value:"getAreSurfaceSoundsActive",id:"getaresurfacesoundsactive",level:3},{value:"getCurrentSplinePosition",id:"getcurrentsplineposition",level:3},{value:"getCurrentSurfaceSound",id:"getcurrentsurfacesound",level:3},{value:"getFrontToBackDistance",id:"getfronttobackdistance",level:3},{value:"getIsDischargeNodeActive",id:"getisdischargenodeactive",level:3},{value:"getLastSpeed",id:"getlastspeed",level:3},{value:"getSplinePositionAndTimeFromDistance",id:"getsplinepositionandtimefromdistance",level:3},{value:"getSplineTimeFromDistance",id:"getsplinetimefromdistance",level:3},{value:"initSpecialization",id:"initspecialization",level:3},{value:"loadDischargeNode",id:"loaddischargenode",level:3},{value:"onLoad",id:"onload",level:3},{value:"onUpdate",id:"onupdate",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3},{value:"registerFunctions",id:"registerfunctions",level:3},{value:"registerOverwrittenFunctions",id:"registeroverwrittenfunctions",level:3},{value:"setTrainSystem",id:"settrainsystem",level:3}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"splinevehicle",children:"SplineVehicle"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Specialization for vehicles driving on a spline only (e.g. train)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Functions"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#aligntosplinetime",children:"alignToSplineTime"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getaresurfacesoundsactive",children:"getAreSurfaceSoundsActive"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getcurrentsplineposition",children:"getCurrentSplinePosition"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getcurrentsurfacesound",children:"getCurrentSurfaceSound"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getfronttobackdistance",children:"getFrontToBackDistance"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getisdischargenodeactive",children:"getIsDischargeNodeActive"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getlastspeed",children:"getLastSpeed"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getsplinepositionandtimefromdistance",children:"getSplinePositionAndTimeFromDistance"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getsplinetimefromdistance",children:"getSplineTimeFromDistance"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#initspecialization",children:"initSpecialization"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#loaddischargenode",children:"loadDischargeNode"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#onupdate",children:"onUpdate"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#registeroverwrittenfunctions",children:"registerOverwrittenFunctions"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#settrainsystem",children:"setTrainSystem"})}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"aligntosplinetime",children:"alignToSplineTime"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"alignToSplineTime()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"spline"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"yOffset"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"tFront"})]})]})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function SplineVehicle:alignToSplineTime(spline, yOffset, tFront)\n    if self.trainSystem = = nil then\n        return\n    end\n\n    local spec = self.spec_splineVehicle\n    local splineLength = spec.trainSystem:getSplineLength()\n\n    local maxDiff = math.max( self.trainSystem:getLengthSplineTime(), 0.25 )\n\n    local delta = tFront - spec.splinePosition\n    if math.abs(delta) > maxDiff then\n        if delta > 0 then\n            delta = delta - 1\n        else\n                delta = delta + 1\n            end\n        end\n\n        self.movingDirection = 1\n        if delta < 0 then\n            self.movingDirection = - 1\n        end\n\n        local p1x,p1y,p1z,t = self:getSplinePositionAndTimeFromDistance(tFront, spec.rootNodeToFrontDistance, - 1.2 * spec.rootNodeToFrontSplineTime)\n\n        local wp1x,wp1y,wp1z = localToWorld(getParent(spline), p1x,p1y,p1z)\n\n        local p2x,p2y,p2z, t2 = self:getSplinePositionAndTimeFromDistance(t, spec.dollyToDollyDistance, - 1.2 * spec.dollyToDollySplineTime)\n\n        local wp2x,wp2y,wp2z = localToWorld(getParent(spline), p2x,p2y,p2z)\n\n        setDirection( self.rootNode, wp1x - wp2x,wp1y - wp2y,wp1z - wp2z, 0 , 1 , 0 )\n        local qx, qy, qz, qw = getWorldQuaternion( self.rootNode)\n\n        setWorldTranslation( self.rootNode, wp1x, wp1y + yOffset, wp1z)\n        local networkInterpolators = self.components[ 1 ].networkInterpolators\n        networkInterpolators.quaternion:setQuaternion(qx, qy, qz, qw)\n        networkInterpolators.position:setPosition(wp1x, wp1y + yOffset, wp1z)\n\n        if spec.alignDollys then\n            local d1x,d1y,d1z = getSplineDirection(spline, t)\n            local d2x,d2y,d2z = getSplineDirection(spline, t2)\n\n            d1x,d1y,d1z = localDirectionToLocal(spline, getParent(spec.dolly1Node), d1x,d1y,d1z)\n            d2x,d2y,d2z = localDirectionToLocal(spline, getParent(spec.dolly2Node), d2x,d2y,d2z)\n\n            setDirection(spec.dolly1Node, d1x,d1y,d1z, 0 , 1 , 0 )\n            setDirection(spec.dolly2Node, d2x,d2y,d2z, 0 , 1 , 0 )\n        end\n\n        spec.splinePosition = tFront\n\n        -- return spline time for backNode\n            local tBack = tFront - spec.frontToBackDistance / splineLength\n\n            return tBack\n        end\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getaresurfacesoundsactive",children:"getAreSurfaceSoundsActive"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getAreSurfaceSoundsActive()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function SplineVehicle:getAreSurfaceSoundsActive(superFunc)\n    local rootVehicle = self.rootVehicle\n    if rootVehicle ~ = nil and rootVehicle ~ = self then\n        return rootVehicle:getAreSurfaceSoundsActive()\n    end\n\n    return true\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getcurrentsplineposition",children:"getCurrentSplinePosition"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getCurrentSplinePosition()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function SplineVehicle:getCurrentSplinePosition()\n    return self.spec_splineVehicle.splinePosition\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getcurrentsurfacesound",children:"getCurrentSurfaceSound"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getCurrentSurfaceSound()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function SplineVehicle:getCurrentSurfaceSound()\n    return self.spec_wheels.surfaceNameToSound[ "railroad" ]\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"getfronttobackdistance",children:"getFrontToBackDistance"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getFrontToBackDistance()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function SplineVehicle:getFrontToBackDistance()\n    return self.spec_splineVehicle.frontToBackDistance\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getisdischargenodeactive",children:"getIsDischargeNodeActive"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getIsDischargeNodeActive()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"superFunc"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"dischargeNode"})]})})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function SplineVehicle:getIsDischargeNodeActive(superFunc, dischargeNode)\n    if dischargeNode.needsIsEntered then\n        local rootVehicle = self:getRootVehicle()\n        if rootVehicle ~ = nil and rootVehicle.getIsControlled ~ = nil and not rootVehicle:getIsControlled() then\n            return false\n        end\n    end\n\n    return superFunc( self , dischargeNode)\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getlastspeed",children:"getLastSpeed"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getLastSpeed()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"superFunc"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"useAttacherVehicleSpeed"})]})})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function SplineVehicle:getLastSpeed(superFunc, useAttacherVehicleSpeed)\n    return math.abs( self.spec_splineVehicle.splinePositionSpeed * 3.6 )\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getsplinepositionandtimefromdistance",children:"getSplinePositionAndTimeFromDistance"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getSplinePositionAndTimeFromDistance()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"t"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"distance"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"stepSize"})]})]})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function SplineVehicle:getSplinePositionAndTimeFromDistance(t, distance, stepSize)\n\n    if self.trainSystem = = nil then\n        return\n    end\n\n    local positiveTimeOffset = stepSize > = 0\n    local x,y,z, t2 = getSplinePositionWithDistance( self.trainSystem:getSpline(), t, distance, positiveTimeOffset, 0.01 )\n    return x,y,z, SplineUtil.getValidSplineTime(t2)\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getsplinetimefromdistance",children:"getSplineTimeFromDistance"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getSplineTimeFromDistance()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"t"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"distance"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"stepSize"})]})]})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function SplineVehicle:getSplineTimeFromDistance(t, distance, stepSize)\n    if self.trainSystem = = nil then\n        return\n    end\n\n    local positiveTimeOffset = stepSize > = 0\n    local _,_,_, t2 = getSplinePositionWithDistance( self.trainSystem:getSpline(), t, distance, positiveTimeOffset, 0.01 )\n    return SplineUtil.getValidSplineTime(t2)\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"initspecialization",children:"initSpecialization"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"initSpecialization()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function SplineVehicle.initSpecialization()\n    local schema = Vehicle.xmlSchema\n    schema:setXMLSpecializationType( "SplineVehicle" )\n\n    schema:register(XMLValueType.NODE_INDEX, "vehicle.splineVehicle.dollies#frontNode" , "Front node" )\n    schema:register(XMLValueType.NODE_INDEX, "vehicle.splineVehicle.dollies#backNode" , "Back node" )\n\n    schema:register(XMLValueType.NODE_INDEX, "vehicle.splineVehicle.dollies#dolly1Node" , "Front dolly node" )\n    schema:register(XMLValueType.NODE_INDEX, "vehicle.splineVehicle.dollies#dolly2Node" , "Back dolly node" )\n\n    schema:register(XMLValueType.BOOL, "vehicle.splineVehicle.dollies#alignDollys" , "Align dollies" , true )\n\n    schema:register(XMLValueType.BOOL, Dischargeable.DISCHARGE_NODE_XML_PATH .. "#needsIsEntered" , "Vehicle needs to be entered to do raycasting" , true )\n        schema:register(XMLValueType.BOOL, Dischargeable.DISCHARGE_NODE_CONFIG_XML_PATH .. "#needsIsEntered" , "Vehicle needs to be entered to do raycasting" , true )\n\n            schema:setXMLSpecializationType()\n        end\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"loaddischargenode",children:"loadDischargeNode"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"loadDischargeNode()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"superFunc"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"xmlFile"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"key"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"entry"})]})]})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function SplineVehicle:loadDischargeNode(superFunc, xmlFile, key, entry)\n    if not superFunc( self , xmlFile, key, entry) then\n        return false\n    end\n\n    entry.needsIsEntered = xmlFile:getValue(key .. "#needsIsEntered" , true )\n\n    return true\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Called on loading"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"onLoad(table savegame)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"table"}),(0,l.jsx)(n.th,{children:"savegame"}),(0,l.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function SplineVehicle:onLoad(savegame)\n    local spec = self.spec_splineVehicle\n\n    spec.frontNode = self.xmlFile:getValue( "vehicle.splineVehicle.dollies#frontNode" , nil , self.components, self.i3dMappings)\n    spec.backNode = self.xmlFile:getValue( "vehicle.splineVehicle.dollies#backNode" , nil , self.components, self.i3dMappings)\n\n    spec.frontToBackDistance = calcDistanceFrom(spec.frontNode, spec.backNode)\n\n    spec.dolly1Node = self.xmlFile:getValue( "vehicle.splineVehicle.dollies#dolly1Node" , nil , self.components, self.i3dMappings)\n    spec.dolly2Node = self.xmlFile:getValue( "vehicle.splineVehicle.dollies#dolly2Node" , nil , self.components, self.i3dMappings)\n\n    spec.dollyToDollyDistance = calcDistanceFrom(spec.dolly1Node, spec.dolly2Node)\n\n    spec.rootNodeToBackDistance = calcDistanceFrom(spec.backNode, self.rootNode)\n    spec.rootNodeToFrontDistance = calcDistanceFrom(spec.frontNode, self.rootNode)\n\n    spec.alignDollys = self.xmlFile:getValue( "vehicle.splineVehicle.dollies#alignDollys" , true )\n    spec.splinePosition = 0\n    spec.lastSplinePosition = 0\n    spec.currentSplinePosition = 0\n\n    spec.splinePositionSpeed = 0\n    spec.splinePositionSpeedReal = 0\n\n    spec.splineSpeed = 0\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"onupdate",children:"onUpdate"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"onUpdate()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"dt"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"isActiveForInput"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"isActiveForInputIgnoreSelection"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"isSelected"})]})]})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function SplineVehicle:onUpdate(dt, isActiveForInput, isActiveForInputIgnoreSelection, isSelected)\n    if self.trainSystem ~ = nil then\n        self.trainSystem:updateRailroadVehiclePositions(dt)\n    end\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Checks if all prerequisite specializations are loaded"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"prerequisitesPresent(table specializations)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"table"}),(0,l.jsx)(n.th,{children:"specializations"}),(0,l.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"table"}),(0,l.jsx)(n.th,{children:"hasPrerequisite"}),(0,l.jsx)(n.th,{children:"true if all prerequisite specializations are loaded"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function SplineVehicle.prerequisitesPresent(specializations)\n    return true\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function SplineVehicle.registerEventListeners(vehicleType)\n    SpecializationUtil.registerEventListener(vehicleType, "onLoad" , SplineVehicle )\n    SpecializationUtil.registerEventListener(vehicleType, "onUpdate" , SplineVehicle )\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function SplineVehicle.registerFunctions(vehicleType)\n    SpecializationUtil.registerFunction(vehicleType, "getFrontToBackDistance" , SplineVehicle.getFrontToBackDistance)\n    SpecializationUtil.registerFunction(vehicleType, "getSplineTimeFromDistance" , SplineVehicle.getSplineTimeFromDistance)\n    SpecializationUtil.registerFunction(vehicleType, "getSplinePositionAndTimeFromDistance" , SplineVehicle.getSplinePositionAndTimeFromDistance)\n    SpecializationUtil.registerFunction(vehicleType, "alignToSplineTime" , SplineVehicle.alignToSplineTime)\n    SpecializationUtil.registerFunction(vehicleType, "getCurrentSplinePosition" , SplineVehicle.getCurrentSplinePosition)\n    SpecializationUtil.registerFunction(vehicleType, "setSplineSpeed" , SplineVehicle.setSplineSpeed)\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"registeroverwrittenfunctions",children:"registerOverwrittenFunctions"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"registerOverwrittenFunctions()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function SplineVehicle.registerOverwrittenFunctions(vehicleType)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getLastSpeed" , SplineVehicle.getLastSpeed)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "setTrainSystem" , SplineVehicle.setTrainSystem)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getCurrentSurfaceSound" , SplineVehicle.getCurrentSurfaceSound)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getAreSurfaceSoundsActive" , SplineVehicle.getAreSurfaceSoundsActive)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getIsDischargeNodeActive" , SplineVehicle.getIsDischargeNodeActive)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "loadDischargeNode" , SplineVehicle.loadDischargeNode)\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"settrainsystem",children:"setTrainSystem"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"setTrainSystem()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"superFunc"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"trainSystem"})]})})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function SplineVehicle:setTrainSystem(superFunc, trainSystem)\n    superFunc( self , trainSystem)\n\n    local spec = self.spec_splineVehicle\n    spec.splineLength = trainSystem:getSplineLength()\n    spec.frontToBackSplineTime = spec.frontToBackDistance / spec.splineLength\n    spec.dollyToDollySplineTime = spec.dollyToDollyDistance / spec.splineLength\n    spec.rootNodeToBackSplineTime = spec.rootNodeToBackDistance / spec.splineLength\n    spec.rootNodeToFrontSplineTime = spec.rootNodeToFrontDistance / spec.splineLength\nend\n\n"})})]})}function a(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},28453(e,n,i){i.d(n,{R:()=>r,x:()=>c});var s=i(96540);const l={},t=s.createContext(l);function r(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);