"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[68768],{28453(e,n,i){i.d(n,{R:()=>r,x:()=>a});var l=i(96540);const s={},t=l.createContext(s);function r(e){const n=l.useContext(t);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),l.createElement(t.Provider,{value:n},e.children)}},94141(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>o});const l=JSON.parse('{"id":"script/Specializations/PlaceableVehicleBuyingStation","title":"PlaceableVehicleBuyingStation","description":"PlaceableVehicleBuyingStation","source":"@site/../docs/script/Specializations/PlaceableVehicleBuyingStation.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/PlaceableVehicleBuyingStation","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableVehicleBuyingStation","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"PlaceableVehicle","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableVehicle"},"next":{"title":"PlaceableVine","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableVine"}}');var s=i(74848),t=i(28453);const r={},a=void 0,c={},o=[{value:"PlaceableVehicleBuyingStation",id:"placeablevehiclebuyingstation",level:2},{value:"onDelete",id:"ondelete",level:3},{value:"onLoad",id:"onload",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"placeablevehiclebuyingstation",children:"PlaceableVehicleBuyingStation"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Specialization for placeables"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Functions"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#ondelete",children:"onDelete"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"ondelete",children:"onDelete"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onDelete()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableVehicleBuyingStation:onDelete()\n    local spec = self.spec_vehicleBuyingStation\n\n    if spec.triggerNode ~ = nil then\n        removeTrigger(spec.triggerNode)\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Called on loading"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onLoad(table savegame)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"savegame"}),(0,s.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableVehicleBuyingStation:onLoad(savegame)\n    local spec = self.spec_vehicleBuyingStation\n\n    local key = "placeable.vehicleBuyingStation"\n\n    spec.triggerNode = self.xmlFile:getNode(key .. ".trigger#node" , nil , self.components, self.i3dMappings)\n    if spec.triggerNode = = nil then\n        Logging.xmlError( self.xmlFile, "Missing triggerNode for vehicle buying station %s" , key)\n            return\n        end\n\n        addTrigger(spec.triggerNode, "onVehicleBuyingStationTriggerCallback" , self )\n\n        spec.storeItems = { }\n        for _, storeItemKey in self.xmlFile:iterator(key .. ".storeItem" ) do\n            local xmlFilename = self.xmlFile:getString(storeItemKey .. "#xmlFilename" )\n            if string.isNilOrWhitespace(xmlFilename) then\n                Logging.xmlError( self.xmlFile, "xmlFilename missing for vehicle buying station %s" , storeItemKey)\n                    continue\n                end\n\n                local filename = Utils.getFilename(xmlFilename, self.baseDirectory)\n                local storeItem = g_storeManager:getItemByXMLFilename(filename)\n                if storeItem = = nil then\n                    Logging.xmlError( self.xmlFile, "Could not find storeitem for xmlFilename \'%s\'" , filename)\n                        continue\n                    end\n\n                    local imageFilename = storeItem.imageFilename\n                    local price = self.xmlFile:getInt(storeItemKey .. "#price" , storeItem.price)\n                    local transportCosts = self.xmlFile:getInt(storeItemKey .. "#transportCosts" , 15000 )\n\n                    local data = {\n                    storeItem = storeItem,\n                    title = storeItem.name,\n                    price = price,\n                    imageFilename = imageFilename,\n                    transportCosts = transportCosts\n                    }\n\n                    table.addElement(spec.storeItems, data)\n                end\n\n                spec.sendNumBits = MathUtil.getNumRequiredBits(#spec.storeItems)\n\n                spec.usedPlaces = { }\n                spec.spawnPlaces = { }\n\n                for _, spawnPlaceKey in self.xmlFile:iterator(key .. ".spawnPlaces.spawnPlace" ) do\n                    local spawnPlace = PlacementUtil.loadPlaceFromXML( self.xmlFile, spawnPlaceKey, self.components, self.i3dMappings)\n                    table.insert(spec.spawnPlaces, spawnPlace)\n                end\n\n                if #spec.spawnPlaces = = 0 then\n                    Logging.xmlError(spec.xmlFile, "No spawn place(s) defined for vehicle buying station %s%s" , key, ".spawnPlaces" )\n                        return false\n                    end\n\n                    spec.vehicleBoughtMessage = self.xmlFile:getString(key .. ".message#bought" )\n                    spec.vehicleBuyingFailedMessage = self.xmlFile:getString(key .. ".message#failed" )\n                    spec.vehicleBuyingFailedNoSpaceMessage = self.xmlFile:getString(key .. ".message#noSpace" )\n                    spec.vehicleBuyingFailedNoPermissionMessage = self.xmlFile:getString(key .. ".message#noPermission" )\n                    spec.vehicleBuyingFailedNoMoneyMessage = self.xmlFile:getString(key .. ".message#noMoney" )\n\n                    local title = g_i18n:convertText( self.xmlFile:getString(key .. "#title" , "$l10n_ui_vehicleShopTitle" ), self.customEnvironment)\n                    local description = g_i18n:convertText( self.xmlFile:getString(key .. "#description" , "$l10n_ui_vehicleShopDescription" ), self.customEnvironment)\n\n                    local text = g_i18n:convertText( self.xmlFile:getString(key .. ".trigger#text" , "$l10n_vehicleShop_open" ), self.customEnvironment)\n                    local callbackFunc = function ()\n                        if g_currentMission:getHasPlayerPermission( Farm.PERMISSION.BUY_VEHICLE) then\n\n                            local spec = self.spec_vehicleBuyingStation\n                            VehicleShopDialog.show( PlaceableVehicleBuyingStation.vehicleShopCallback, self , spec.storeItems, title, description)\n                        else\n                                InfoDialog.show(g_i18n:getText( "shop_messageNoPermissionGeneral" ))\n                            end\n                        end\n                        spec.activatable = VehicleBuyingStationActivatable.new( self , callbackFunc, text)\n\n                        return true\n                    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Checks if all prerequisite specializations are loaded"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"prerequisitesPresent(table specializations)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"specializations"}),(0,s.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"hasPrerequisite"}),(0,s.jsx)(n.th,{children:"true if all prerequisite specializations are loaded"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableVehicleBuyingStation.prerequisitesPresent(specializations)\n    return true\nend\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);