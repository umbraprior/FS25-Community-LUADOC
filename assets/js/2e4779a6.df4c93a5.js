"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[17366],{28453(e,n,i){i.d(n,{R:()=>l,x:()=>o});var s=i(96540);const t={},r=s.createContext(t);function l(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(r.Provider,{value:n},e.children)}},36920(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"script/GUI/GuiTopDownCamera","title":"GuiTopDownCamera","description":"GuiTopDownCamera","source":"@site/../docs/script/GUI/GuiTopDownCamera.md","sourceDirName":"script/GUI","slug":"/script/GUI/GuiTopDownCamera","permalink":"/FS25-Community-LUADOC/script/GUI/GuiTopDownCamera","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"GuiSoundPlayer","permalink":"/FS25-Community-LUADOC/script/GUI/GuiSoundPlayer"},"next":{"title":"GuiTopDownCursor","permalink":"/FS25-Community-LUADOC/script/GUI/GuiTopDownCursor"}}');var t=i(74848),r=i(28453);const l={},o=void 0,a={},d=[{value:"GuiTopDownCamera",id:"guitopdowncamera",level:2},{value:"activate",id:"activate",level:3},{value:"applyMovement",id:"applymovement",level:3},{value:"createCameraNodes",id:"createcameranodes",level:3},{value:"deactivate",id:"deactivate",level:3},{value:"delete",id:"delete",level:3},{value:"determineMapPosition",id:"determinemapposition",level:3},{value:"getIsActive",id:"getisactive",level:3},{value:"getMouseEdgeScrollingMovement",id:"getmouseedgescrollingmovement",level:3},{value:"getPickRay",id:"getpickray",level:3},{value:"mouseEvent",id:"mouseevent",level:3},{value:"onInputModeChanged",id:"oninputmodechanged",level:3},{value:"onMoveForward",id:"onmoveforward",level:3},{value:"onMoveSide",id:"onmoveside",level:3},{value:"onRotate",id:"onrotate",level:3},{value:"onTilt",id:"ontilt",level:3},{value:"onZoom",id:"onzoom",level:3},{value:"registerActionEvents",id:"registeractionevents",level:3},{value:"removeActionEvents",id:"removeactionevents",level:3},{value:"reset",id:"reset",level:3},{value:"resetInputState",id:"resetinputstate",level:3},{value:"setCameraPosition",id:"setcameraposition",level:3},{value:"setEdgeScrollingOffset",id:"setedgescrollingoffset",level:3},{value:"setMouseEdgeScrollingActive",id:"setmouseedgescrollingactive",level:3},{value:"setTerrainRootNode",id:"setterrainrootnode",level:3},{value:"update",id:"update",level:3},{value:"updateMovement",id:"updatemovement",level:3},{value:"updatePosition",id:"updateposition",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"guitopdowncamera",children:"GuiTopDownCamera"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Top-down camera used for UI.\nProvides a birds-eye view for players when they need to interact with the world from the UI (e.g. placing objects,\nmodifying terrain)."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Functions"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#activate",children:"activate"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#applymovement",children:"applyMovement"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#createcameranodes",children:"createCameraNodes"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#deactivate",children:"deactivate"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#delete",children:"delete"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#determinemapposition",children:"determineMapPosition"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#getisactive",children:"getIsActive"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#getmouseedgescrollingmovement",children:"getMouseEdgeScrollingMovement"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#getpickray",children:"getPickRay"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#mouseevent",children:"mouseEvent"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#oninputmodechanged",children:"onInputModeChanged"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onmoveforward",children:"onMoveForward"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onmoveside",children:"onMoveSide"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onrotate",children:"onRotate"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#ontilt",children:"onTilt"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onzoom",children:"onZoom"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#registeractionevents",children:"registerActionEvents"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#removeactionevents",children:"removeActionEvents"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#reset",children:"reset"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#resetinputstate",children:"resetInputState"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#setcameraposition",children:"setCameraPosition"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#setedgescrollingoffset",children:"setEdgeScrollingOffset"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#setmouseedgescrollingactive",children:"setMouseEdgeScrollingActive"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#setterrainrootnode",children:"setTerrainRootNode"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#update",children:"update"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#updatemovement",children:"updateMovement"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#updateposition",children:"updatePosition"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"activate",children:"activate"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Activate the camera and change the game's viewpoint to it."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"activate()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function GuiTopDownCamera:activate()\n    g_inputBinding:setShowMouseCursor( true )\n    self:onInputModeChanged( { g_inputBinding:getLastInputMode() } )\n\n    self:updatePosition()\n\n    self.previousCamera = g_cameraManager:getActiveCamera()\n    g_cameraManager:setActiveCamera( self.camera)\n\n    local x, _y, z = g_localPlayer:getPosition()\n    self:setCameraPosition(x, z)\n\n    self:registerActionEvents()\n    g_messageCenter:subscribe(MessageType.INPUT_MODE_CHANGED, self.onInputModeChanged, self )\n\n    self.isActive = true\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"applymovement",children:"applyMovement"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Apply a movement to the camera (and view)."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"applyMovement()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"dt"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function GuiTopDownCamera:applyMovement(dt)\n    -- Smooth updates of camera\n    -- This lerps towards the target.Due to a constant alpha it will automatically\n    -- change faster if target is further away.\n\n        local xChange = ( self.targetCameraX - self.cameraX) / dt * 5\n        if xChange < 0.0001 and xChange > - 0.0001 then\n            self.cameraX = self.targetCameraX\n        else\n                self.cameraX = self.cameraX + xChange\n            end\n\n            local zChange = ( self.targetCameraZ - self.cameraZ) / dt * 5\n            if zChange < 0.0001 and zChange > - 0.0001 then\n                self.cameraZ = self.targetCameraZ\n            else\n                    self.cameraZ = self.cameraZ + zChange\n                end\n\n                local zoomChange = ( self.targetZoomFactor - self.zoomFactor) / dt * 2\n                if zoomChange < 0.0001 and zoomChange > - 0.0001 then\n                    self.zoomFactor = self.targetZoomFactor\n                else\n                        self.zoomFactor = math.clamp( self.zoomFactor + zoomChange, 0 , 1 )\n                    end\n\n                    local tiltChange = ( self.targetTiltFactor - self.tiltFactor) / dt * 5\n                    if tiltChange < 0.0001 and tiltChange > - 0.0001 then\n                        self.tiltFactor = self.targetTiltFactor\n                    else\n                            self.tiltFactor = math.clamp( self.tiltFactor + tiltChange, 0 , 1 )\n                        end\n\n                        local rotateChange = ( self.targetRotation - self.cameraRotY) / dt * 5\n                        if rotateChange < 0.0001 and rotateChange > - 0.0001 then\n                            self.cameraRotY = self.targetRotation\n                        else\n                                self.cameraRotY = self.cameraRotY + rotateChange\n                            end\n                        end\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"createcameranodes",children:"createCameraNodes"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Create scene graph camera nodes."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"createCameraNodes()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"Camera"}),(0,t.jsx)(n.th,{children:"node ID (view point, child of camera base node)"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"Camera"}),(0,t.jsx)(n.td,{children:"base node ID (view target, parent of camera node)"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function GuiTopDownCamera:createCameraNodes()\n    local camera = createCamera( "TopDownCamera" , math.rad( 60 ), 1 , 10000 ) -- camera view point node\n    local cameraBaseNode = createTransformGroup( "topDownCameraBaseNode" ) -- camera base node, look-at target\n\n    link(cameraBaseNode, camera)\n    setRotation(camera, 0 , math.rad( 180 ) , 0 )\n    setTranslation(camera, 0 , 0 , - 5 )\n    setRotation(cameraBaseNode, 0 , 0 , 0 )\n    setTranslation(cameraBaseNode, 0 , 110 , 0 )\n    setFastShadowUpdate(camera, true )\n\n    return camera, cameraBaseNode\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"deactivate",children:"deactivate"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Disable this camera."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"deactivate()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function GuiTopDownCamera:deactivate()\n    self.isActive = false\n\n    g_messageCenter:unsubscribeAll( self )\n    self:removeActionEvents()\n\n    -- local showCursor = self.controlledPlayer = = nil and self.controlledVehicle = = nil\n    g_inputBinding:setShowMouseCursor( false )\n\n    -- restore previous camera\n    if self.previousCamera ~ = nil then\n        g_cameraManager:setActiveCamera( self.previousCamera)\n    end\n\n    self.previousCamera = nil\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"delete",children:"delete"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"delete()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function GuiTopDownCamera:delete()\n    if self.isActive then\n        self:deactivate()\n    end\n\n    g_cameraManager:removeCamera( self.camera)\n    delete( self.cameraBaseNode) -- base node holds the camera as a child, this call deletes both\n    self.camera, self.cameraBaseNode = nil , nil\n    self:reset()\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"determinemapposition",children:"determineMapPosition"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Determine the current camera position and orientation."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"determineMapPosition()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"camX"}),(0,t.jsx)(n.th,{children:"Camera X world space position"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"camY"}),(0,t.jsx)(n.td,{children:"always 0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"camZ"}),(0,t.jsx)(n.td,{children:"Camera Z world space position"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"camRotY"}),(0,t.jsx)(n.td,{children:"Camera Y rotation in radians"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function GuiTopDownCamera:determineMapPosition()\n    return self.cameraX, 0 , self.cameraZ, self.cameraRotY - math.rad( 180 ), 0\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"getisactive",children:"getIsActive"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Check if this camera is active."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"getIsActive()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function GuiTopDownCamera:getIsActive()\n    return self.isActive\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"getmouseedgescrollingmovement",children:"getMouseEdgeScrollingMovement"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Get camera movement for mouse edge scrolling."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"getMouseEdgeScrollingMovement()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"direction"}),(0,t.jsx)(n.th,{children:"movement [-1, 1]"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"direction"}),(0,t.jsx)(n.td,{children:"movement [-1, 1]"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function GuiTopDownCamera:getMouseEdgeScrollingMovement()\n    local moveMarginStartX = 0.02\n    local moveMarginStartY = 0.02\n    local moveMarginEndX = 0.015\n    local moveMarginEndY = 0.015\n\n    local moveX, moveZ = 0 , 0\n\n    if self.mousePosX > = self.edgeScrollingOffset[ 3 ] - moveMarginEndX and self.mousePosX < = self.edgeScrollingOffset[ 3 ] then\n        moveX = math.min((moveMarginEndX - ( self.edgeScrollingOffset[ 3 ] - self.mousePosX)) / (moveMarginStartX - moveMarginEndX), 1 )\n    elseif self.mousePosX < = self.edgeScrollingOffset[ 1 ] + moveMarginStartX and self.mousePosX > = self.edgeScrollingOffset[ 1 ] then\n            moveX = - math.min((moveMarginStartX - self.edgeScrollingOffset[ 1 ] + self.mousePosX) / (moveMarginStartX - moveMarginEndX), 1 )\n        end\n\n        if self.mousePosY > = self.edgeScrollingOffset[ 4 ] - moveMarginEndY and self.mousePosY < = self.edgeScrollingOffset[ 4 ] then\n            moveZ = math.min((moveMarginEndY - ( self.edgeScrollingOffset[ 4 ] - self.mousePosY)) / (moveMarginStartY - moveMarginEndY), 1 )\n        elseif self.mousePosY < = self.edgeScrollingOffset[ 2 ] + moveMarginStartY and self.mousePosY > = self.edgeScrollingOffset[ 2 ] then\n                moveZ = - math.min((moveMarginStartY - self.edgeScrollingOffset[ 2 ] + self.mousePosY) / (moveMarginStartY - moveMarginEndY), 1 )\n            end\n\n            return moveX, moveZ\n        end\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"getpickray",children:"getPickRay"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Get a picking ray for the current camera orientation and cursor position."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"getPickRay()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function GuiTopDownCamera:getPickRay()\n    --if commented back in, placeables will be invisible when rotating them\n        -- if self.isCatchingCursor then\n            -- return nil\n            -- end\n\n            return RaycastUtil.getCameraPickingRay( self.mousePosX, self.mousePosY, self.camera)\n        end\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"mouseevent",children:"mouseEvent"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Handle mouse moves that are not caught by actions."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"mouseEvent()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"posX"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"posY"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"isDown"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"isUp"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"button"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function GuiTopDownCamera:mouseEvent(posX, posY, isDown, isUp, button)\n    if self.lastActionFrame > = g_ time or self.cursorLocked then\n        return\n    end\n\n    -- Mouse move only happens when other actions did not\n    if self.isCatchingCursor then\n        self.isCatchingCursor = false\n        g_inputBinding:setShowMouseCursor( true )\n\n        -- force warp to get rid of invisible position\n        wrapMousePosition( 0.5 , 0.5 )\n\n        self.mousePosX = 0.5\n        self.mousePosY = 0.5\n    else\n            if self.isMouseMode then\n                self.mousePosX = posX\n                self.mousePosY = posY\n            end\n        end\n    end\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"oninputmodechanged",children:"onInputModeChanged"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called when the mouse input mode changes."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onInputModeChanged()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"inputMode"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function GuiTopDownCamera:onInputModeChanged(inputMode)\n    self.isMouseMode = inputMode[ 1 ] = = GS_INPUT_HELP_MODE_KEYBOARD\n\n    -- Reset to center of screen\n    if not self.isMouseMode then\n        self.mousePosX = 0.5\n        self.mousePosY = 0.5\n    end\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"onmoveforward",children:"onMoveForward"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onMoveForward()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"_"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"inputValue"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function GuiTopDownCamera:onMoveForward(_, inputValue)\n    self.inputMoveForward = inputValue * GuiTopDownCamera.INPUT_MOVE_FACTOR / g_currentDt\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"onmoveside",children:"onMoveSide"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onMoveSide()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"_"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"inputValue"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function GuiTopDownCamera:onMoveSide(_, inputValue)\n    self.inputMoveSide = inputValue * GuiTopDownCamera.INPUT_MOVE_FACTOR / g_currentDt\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"onrotate",children:"onRotate"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onRotate()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"_"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"inputValue"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"_"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"isAnalog"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"isMouse"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function GuiTopDownCamera:onRotate(_, inputValue, _, isAnalog, isMouse)\n    if isMouse and self.mouseDisabled then\n        return\n    end\n\n    -- Do not show cursor and clip to center of screen so that cursor does not\n    -- overlap with edge scrolling\n    if isMouse and inputValue ~ = 0 then\n        self.lastActionFrame = g_ time\n\n        if not self.isCatchingCursor then\n            g_inputBinding:setShowMouseCursor( false )\n            self.isCatchingCursor = true\n        end\n    end\n\n    -- Analog has very small steps\n    if isMouse and isAnalog then\n        inputValue = inputValue * 3\n    end\n\n    self.inputRotate = - inputValue * 3 / g_currentDt * 16\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"ontilt",children:"onTilt"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onTilt()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"_"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"inputValue"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"_"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"isAnalog"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"isMouse"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function GuiTopDownCamera:onTilt(_, inputValue, _, isAnalog, isMouse)\n    if isMouse and self.mouseDisabled then\n        return\n    end\n\n    -- Do not show cursor and clip to center of screen so that cursor does not\n    -- overlap with edge scrolling\n    if isMouse and inputValue ~ = 0 then\n        self.lastActionFrame = g_ time\n\n        if not self.isCatchingCursor then\n            g_inputBinding:setShowMouseCursor( false )\n            self.isCatchingCursor = true\n        end\n    end\n\n    -- Analog has very small steps\n    if isMouse and isAnalog then\n        inputValue = inputValue * 3\n    end\n\n    self.inputTilt = inputValue * 3\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"onzoom",children:"onZoom"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onZoom()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"_"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"inputValue"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"_"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"isAnalog"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"isMouse"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function GuiTopDownCamera:onZoom(_, inputValue, _, isAnalog, isMouse)\n    if isMouse and self.mouseDisabled then\n        return\n    end\n\n    local change = math.max( GuiTopDownCamera.CAMERA_ZOOM_FACTOR * self.zoomFactor, GuiTopDownCamera.CAMERA_ZOOM_FACTOR_MIN) * inputValue\n    if isAnalog then\n        change = change * 0.5\n    elseif isMouse then -- UI mouse wheel zoom\n            change = change * InputBinding.MOUSE_WHEEL_INPUT_FACTOR\n        end\n\n        self.inputZoom = change\n    end\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"registeractionevents",children:"registerActionEvents"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Register required action events for the camera."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"registerActionEvents()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function GuiTopDownCamera:registerActionEvents()\n    local _, eventId = g_inputBinding:registerActionEvent(InputAction.AXIS_MOVE_SIDE_PLAYER, self , self.onMoveSide, false , false , true , true )\n    g_inputBinding:setActionEventTextPriority(eventId, GS_PRIO_VERY_LOW)\n    g_inputBinding:setActionEventTextVisibility(eventId, false )\n    self.eventMoveSide = eventId\n\n    _, eventId = g_inputBinding:registerActionEvent(InputAction.AXIS_MOVE_FORWARD_PLAYER, self , self.onMoveForward, false , false , true , true )\n    g_inputBinding:setActionEventTextPriority(eventId, GS_PRIO_VERY_LOW)\n    g_inputBinding:setActionEventTextVisibility(eventId, false )\n    self.eventMoveForward = eventId\n\n    _, eventId = g_inputBinding:registerActionEvent(InputAction.AXIS_CONSTRUCTION_CAMERA_ZOOM, self , self.onZoom, false , false , true , true )\n    g_inputBinding:setActionEventTextPriority(eventId, GS_PRIO_LOW)\n    _, eventId = g_inputBinding:registerActionEvent(InputAction.AXIS_CONSTRUCTION_CAMERA_ROTATE, self , self.onRotate, false , false , true , true )\n    g_inputBinding:setActionEventTextPriority(eventId, GS_PRIO_LOW)\n    _, eventId = g_inputBinding:registerActionEvent(InputAction.AXIS_CONSTRUCTION_CAMERA_TILT, self , self.onTilt, false , false , true , true )\n    g_inputBinding:setActionEventTextPriority(eventId, GS_PRIO_LOW)\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"removeactionevents",children:"removeActionEvents"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Remove action events registered on this screen."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"removeActionEvents()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function GuiTopDownCamera:removeActionEvents()\n    g_inputBinding:removeActionEventsByTarget( self )\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"reset",children:"reset"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"reset()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function GuiTopDownCamera:reset()\n    self.terrainRootNode = nil\n    self.terrainSize = 0\n    self.previousCamera = nil\n    self.isCatchingCursor = false\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"resetinputstate",children:"resetInputState"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Reset event input state."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"resetInputState()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function GuiTopDownCamera:resetInputState()\n    self.inputZoom = 0\n    self.inputMoveSide = 0\n    self.inputMoveForward = 0\n    self.inputTilt = 0\n    self.inputRotate = 0\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"setcameraposition",children:"setCameraPosition"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Set the camera target position on the map."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"setCameraPosition(float mapX, float mapZ)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"float"}),(0,t.jsx)(n.th,{children:"mapX"}),(0,t.jsx)(n.th,{children:"Map X position"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"float"}),(0,t.jsx)(n.td,{children:"mapZ"}),(0,t.jsx)(n.td,{children:"Map Z position"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function GuiTopDownCamera:setCameraPosition(mapX, mapZ)\n    self.cameraX, self.cameraZ = mapX, mapZ\n    self.targetCameraX, self.targetCameraZ = mapX, mapZ\n    self:updatePosition()\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"setedgescrollingoffset",children:"setEdgeScrollingOffset"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Sets the mouse move margin offset, which makes it so that the zone which is used for the edge scrolling is not\noverlpping with UI"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"setEdgeScrollingOffset(float xMin, float yMin, float xMax, float yMax)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"float"}),(0,t.jsx)(n.th,{children:"xMin"}),(0,t.jsx)(n.th,{children:"minimum X coordinate"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"float"}),(0,t.jsx)(n.td,{children:"yMin"}),(0,t.jsx)(n.td,{children:"minimum Y coordinate"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"float"}),(0,t.jsx)(n.td,{children:"xMax"}),(0,t.jsx)(n.td,{children:"maximum X coordinate"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"float"}),(0,t.jsx)(n.td,{children:"yMax"}),(0,t.jsx)(n.td,{children:"maximum Y coordinate"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function GuiTopDownCamera:setEdgeScrollingOffset(xMin, yMin, xMax, yMax)\n    self.edgeScrollingOffset[ 1 ] = xMin or self.edgeScrollingOffset[ 1 ]\n    self.edgeScrollingOffset[ 2 ] = yMin or self.edgeScrollingOffset[ 2 ]\n    self.edgeScrollingOffset[ 3 ] = xMax or self.edgeScrollingOffset[ 3 ]\n    self.edgeScrollingOffset[ 4 ] = yMax or self.edgeScrollingOffset[ 4 ]\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"setmouseedgescrollingactive",children:"setMouseEdgeScrollingActive"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Enable or disable the mouse edge scrolling."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"setMouseEdgeScrollingActive()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"isActive"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function GuiTopDownCamera:setMouseEdgeScrollingActive(isActive)\n    self.isMouseEdgeScrollingActive = isActive\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"setterrainrootnode",children:"setTerrainRootNode"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Set the current game's terrain's root node reference for terrain state queries and raycasts."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"setTerrainRootNode()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"terrainRootNode"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function GuiTopDownCamera:setTerrainRootNode(terrainRootNode)\n    self.terrainRootNode = terrainRootNode\n    self.terrainSize = getTerrainSize( self.terrainRootNode)\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"update",children:"update"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Update camera state."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"update()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"dt"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function GuiTopDownCamera:update(dt)\n    if self.isActive then\n        if self.isMouseMode or not self.movementDisabledForGamepad then\n            self:updateMovement(dt)\n            self:resetInputState()\n        end\n    end\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"updatemovement",children:"updateMovement"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Update camera position and orientation based on player input."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"updateMovement(dt Delta, movementMultiplier Speed)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"dt"}),(0,t.jsx)(n.th,{children:"Delta"}),(0,t.jsx)(n.th,{children:"time in milliseconds"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"movementMultiplier"}),(0,t.jsx)(n.td,{children:"Speed"}),(0,t.jsx)(n.td,{children:"factor for movement"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function GuiTopDownCamera:updateMovement(dt)\n    self.targetZoomFactor = math.clamp( self.targetZoomFactor - self.inputZoom * 0.2 , 0 , 1 )\n    self.targetRotation = self.targetRotation + dt * self.inputRotate * GuiTopDownCamera.ROTATION_SPEED\n    self.targetTiltFactor = math.clamp( self.targetTiltFactor + self.inputTilt * dt * GuiTopDownCamera.ROTATION_SPEED, 0 , 1 )\n\n    local moveX = self.inputMoveSide * dt\n    local moveZ = - self.inputMoveForward * dt -- inverted to make it consistent\n\n    -- When touching the edge with mouse cursor, move\n    if moveX = = 0 and moveZ = = 0 and self.isMouseEdgeScrollingActive then\n        moveX, moveZ = self:getMouseEdgeScrollingMovement()\n    end\n\n    -- make movement faster when zoomed out\n    local zoomMovementSpeedFactor = GuiTopDownCamera.MOVE_SPEED_FACTOR_NEAR + self.zoomFactor * ( GuiTopDownCamera.MOVE_SPEED_FACTOR_FAR - GuiTopDownCamera.MOVE_SPEED_FACTOR_NEAR)\n    moveX = moveX * zoomMovementSpeedFactor\n    moveZ = moveZ * zoomMovementSpeedFactor\n\n    -- note:we use the actual current camera rotation to define the direction, instead of the target location\n    local dirX = math.sin( self.cameraRotY) * moveZ + math.cos( self.cameraRotY) * - moveX\n    local dirZ = math.cos( self.cameraRotY) * moveZ - math.sin( self.cameraRotY) * - moveX\n    local moveFactor = dt * GuiTopDownCamera.MOVE_SPEED\n\n    local newTargetPosX = self.targetCameraX + dirX * moveFactor\n    local newTargetPosZ = self.targetCameraZ + dirZ * moveFactor\n\n    self.targetCameraX, self.targetCameraZ = g_currentMission.placeableSystem:limitPositionToBoundary(newTargetPosX, newTargetPosZ)\n\n    self:applyMovement(dt)\n    self:updatePosition()\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"updateposition",children:"updatePosition"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Update the camera position and orientation based on terrain and zoom state."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"updatePosition()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function GuiTopDownCamera:updatePosition()\n    local samplingGridStep = 2 -- terrain sampling step distance in meters\n    local cameraTargetHeight = 0\n\n    -- sample the terrain height around the camera\n    for x = - samplingGridStep, samplingGridStep, samplingGridStep do\n        for z = - samplingGridStep, samplingGridStep, samplingGridStep do\n            local sampleTerrainHeight = getTerrainHeightAtWorldPos( self.terrainRootNode, self.cameraX + x, 0 , self.cameraZ + z)\n            cameraTargetHeight = math.max(cameraTargetHeight, sampleTerrainHeight)\n        end\n    end\n\n    cameraTargetHeight = cameraTargetHeight + GuiTopDownCamera.CAMERA_TERRAIN_OFFSET\n\n    -- Tilt factor decides position between min and max.Min and max depend on zoom level\n    local rotMin = math.rad( GuiTopDownCamera.ROTATION_MIN_X_NEAR + ( GuiTopDownCamera.ROTATION_MIN_X_FAR - GuiTopDownCamera.ROTATION_MIN_X_NEAR) * self.zoomFactor)\n    local rotMax = math.rad( GuiTopDownCamera.ROTATION_MAX_X_NEAR + ( GuiTopDownCamera.ROTATION_MAX_X_FAR - GuiTopDownCamera.ROTATION_MAX_X_NEAR) * self.zoomFactor)\n    local rotationX = rotMin + (rotMax - rotMin) * self.tiltFactor\n\n    -- Distance to target depends fully on zoom level\n    local cameraZ = GuiTopDownCamera.DISTANCE_MIN_Z + self.zoomFactor * GuiTopDownCamera.DISTANCE_RANGE_Z\n\n    setTranslation( self.camera, 0 , 0 , cameraZ)\n    setRotation( self.cameraBaseNode, rotationX, self.cameraRotY, 0 )\n    setTranslation( self.cameraBaseNode, self.cameraX, cameraTargetHeight, self.cameraZ)\n\n    -- check if new camera position is close to or even under terrain and lift it if needed\n        local cameraX, cameraY\n        cameraX, cameraY, cameraZ = getWorldTranslation( self.camera)\n        local terrainHeight = 0\n        for x = - samplingGridStep, samplingGridStep, samplingGridStep do\n            for z = - samplingGridStep, samplingGridStep, samplingGridStep do\n                local y = getTerrainHeightAtWorldPos( self.terrainRootNode, cameraX + x, 0 , cameraZ + z)\n\n                local hit, _, hitY, _ = RaycastUtil.raycastClosest(cameraX + x, y + 100 , cameraZ + z, 0 , - 1 , 0 , 100 , GuiTopDownCamera.COLLISION_MASK)\n                if hit then\n                    y = hitY\n                end\n\n                terrainHeight = math.max(terrainHeight, y)\n            end\n        end\n\n        -- TODO instead we should tilt the camera up to clear the terrain .. .\n        if cameraY < terrainHeight + GuiTopDownCamera.GROUND_DISTANCE_MIN_Y then\n            cameraTargetHeight = cameraTargetHeight + (terrainHeight - cameraY + GuiTopDownCamera.GROUND_DISTANCE_MIN_Y)\n            setTranslation( self.cameraBaseNode, self.cameraX, cameraTargetHeight, self.cameraZ)\n        end\n    end\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);