"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[10781],{28453(e,n,i){i.d(n,{R:()=>r,x:()=>c});var l=i(96540);const s={},t=l.createContext(s);function r(e){const n=l.useContext(t);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),l.createElement(t.Provider,{value:n},e.children)}},93148(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>d});const l=JSON.parse('{"id":"script/Specializations/ReceivingHopper","title":"ReceivingHopper","description":"ReceivingHopper","source":"@site/../docs/script/Specializations/ReceivingHopper.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/ReceivingHopper","permalink":"/FS25-Community-LUADOC/script/Specializations/ReceivingHopper","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"RandomlyMovingParts","permalink":"/FS25-Community-LUADOC/script/Specializations/RandomlyMovingParts"},"next":{"title":"ReverseDriving","permalink":"/FS25-Community-LUADOC/script/Specializations/ReverseDriving"}}');var s=i(74848),t=i(28453);const r={},c=void 0,a={},d=[{value:"ReceivingHopper",id:"receivinghopper",level:2},{value:"actionEventToggleBoxCreation",id:"actioneventtoggleboxcreation",level:3},{value:"collisionTestCallback",id:"collisiontestcallback",level:3},{value:"createBox",id:"createbox",level:3},{value:"getCanBeSelected",id:"getcanbeselected",level:3},{value:"getCanSpawnNextBox",id:"getcanspawnnextbox",level:3},{value:"handleDischargeRaycast",id:"handledischargeraycast",level:3},{value:"initSpecialization",id:"initspecialization",level:3},{value:"onCreateBoxFinished",id:"oncreateboxfinished",level:3},{value:"onFillUnitFillLevelChanged",id:"onfillunitfilllevelchanged",level:3},{value:"onLoad",id:"onload",level:3},{value:"onRegisterActionEvents",id:"onregisteractionevents",level:3},{value:"onUpdateTick",id:"onupdatetick",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3},{value:"registerFunctions",id:"registerfunctions",level:3},{value:"registerOverwrittenFunctions",id:"registeroverwrittenfunctions",level:3},{value:"saveToXMLFile",id:"savetoxmlfile",level:3},{value:"setCreateBoxes",id:"setcreateboxes",level:3},{value:"updateActionEvents",id:"updateactionevents",level:3}];function o(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"receivinghopper",children:"ReceivingHopper"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Specialization for receiving hoppers filling tipped filltypes into boxes (e.g. potatoes)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Functions"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#actioneventtoggleboxcreation",children:"actionEventToggleBoxCreation"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#collisiontestcallback",children:"collisionTestCallback"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#createbox",children:"createBox"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getcanbeselected",children:"getCanBeSelected"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getcanspawnnextbox",children:"getCanSpawnNextBox"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#handledischargeraycast",children:"handleDischargeRaycast"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#initspecialization",children:"initSpecialization"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#oncreateboxfinished",children:"onCreateBoxFinished"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onfillunitfilllevelchanged",children:"onFillUnitFillLevelChanged"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onregisteractionevents",children:"onRegisterActionEvents"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onupdatetick",children:"onUpdateTick"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registeroverwrittenfunctions",children:"registerOverwrittenFunctions"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#savetoxmlfile",children:"saveToXMLFile"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#setcreateboxes",children:"setCreateBoxes"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#updateactionevents",children:"updateActionEvents"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"actioneventtoggleboxcreation",children:"actionEventToggleBoxCreation"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"actionEventToggleBoxCreation()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"self"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"actionName"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"inputValue"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"callbackState"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"isAnalog"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function ReceivingHopper.actionEventToggleBoxCreation( self , actionName, inputValue, callbackState, isAnalog)\n    local spec = self.spec_receivingHopper\n    self:setCreateBoxes( not spec.createBoxes)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"collisiontestcallback",children:"collisionTestCallback"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"collisionTestCallback()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"transformId"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function ReceivingHopper:collisionTestCallback(transformId)\n    if g_currentMission.nodeToObject[transformId] ~ = nil or g_currentMission.players[transformId] ~ = nil then\n        if g_currentMission.nodeToObject[transformId] ~ = self then\n            local spec = self.spec_receivingHopper\n            spec.foundObjectAtSpawnPlace = true\n        end\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"createbox",children:"createBox"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Create box"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"createBox()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function ReceivingHopper:createBox()\n    local spec = self.spec_receivingHopper\n    if self.isServer then\n        if spec.createBoxes then\n            local fillType = self:getFillUnitFillType(spec.fillUnitIndex)\n            if spec.boxes[fillType] ~ = nil then\n                local x, y, z = getWorldTranslation(spec.spawnPlace)\n                local rx, ry, rz = getWorldRotation(spec.spawnPlace)\n                local xmlFilename = Utils.getFilename(spec.boxes[fillType], self.baseDirectory)\n\n                spec.creatingBox = true\n\n                local data = VehicleLoadingData.new()\n                data:setFilename(xmlFilename)\n                data:setPosition(x, y, z)\n                data:setRotation(rx, ry, rz)\n                data:setPropertyState(VehiclePropertyState.OWNED)\n                data:setOwnerFarmId( self:getOwnerFarmId())\n\n                data:load( self.onCreateBoxFinished, self , nil )\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getcanbeselected",children:"getCanBeSelected"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getCanBeSelected()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function ReceivingHopper:getCanBeSelected(superFunc)\n    return true\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getcanspawnnextbox",children:"getCanSpawnNextBox"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getCanSpawnNextBox()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function ReceivingHopper:getCanSpawnNextBox()\n    local spec = self.spec_receivingHopper\n\n    if spec.creatingBox then\n        return false\n    end\n\n    local fillType = self:getFillUnitFillType(spec.fillUnitIndex)\n    if spec.boxes[fillType] ~ = nil then\n        if spec.lastBox ~ = nil then\n            if spec.lastBox:getFillUnitFreeCapacity( 1 ) > 0 then\n                return false\n            end\n        end\n\n        local xmlFilename = Utils.getFilename(spec.boxes[fillType], self.baseDirectory)\n        local size = StoreItemUtil.getSizeValues(xmlFilename, "vehicle" , 0 )\n\n        local x,y,z = getWorldTranslation(spec.spawnPlace)\n        local rx,ry,rz = getWorldRotation(spec.spawnPlace)\n\n        spec.foundObjectAtSpawnPlace = false\n        overlapBox(x, y, z, rx, ry, rz, size.width * 0.5 , 2 , size.length * 0.5 , "collisionTestCallback" , self , ReceivingHopper.BOX_SPAWN_OVERLAP_MASK)\n\n        return not spec.foundObjectAtSpawnPlace\n    end\n\n    return false\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"handledischargeraycast",children:"handleDischargeRaycast"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"handleDischargeRaycast()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"dischargeNode"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"hitObject"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"hitShape"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"hitDistance"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"hitFillUnitIndex"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"hitTerrain"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function ReceivingHopper:handleDischargeRaycast(superFunc, dischargeNode, hitObject, hitShape, hitDistance, hitFillUnitIndex, hitTerrain)\n    local stopDischarge = false\n    if hitObject ~ = nil then\n        local fillType = self:getDischargeFillType(dischargeNode)\n        local allowFillType = hitObject:getFillUnitAllowsFillType(hitFillUnitIndex, fillType)\n        if allowFillType and hitObject:getFillUnitFreeCapacity(hitFillUnitIndex) > 0 then\n            self:setDischargeState( Dischargeable.DISCHARGE_STATE_OBJECT, true )\n        else\n                stopDischarge = true\n            end\n        else\n                stopDischarge = true\n            end\n\n            if stopDischarge and self:getDischargeState() = = Dischargeable.DISCHARGE_STATE_OBJECT then\n                self:setDischargeState( Dischargeable.DISCHARGE_STATE_OFF, true )\n            end\n        end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"initspecialization",children:"initSpecialization"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"initSpecialization()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function ReceivingHopper.initSpecialization()\n    local schema = Vehicle.xmlSchema\n    schema:setXMLSpecializationType( "ReceivingHopper" )\n\n    schema:register(XMLValueType.INT, "vehicle.receivingHopper#fillUnitIndex" , "Fill unit index" , 1 )\n    schema:register(XMLValueType.NODE_INDEX, "vehicle.receivingHopper.boxes#spawnPlaceNode" , "Spawn place node" )\n    schema:register(XMLValueType.STRING, "vehicle.receivingHopper.boxes.box(?)#fillType" , "Fill type name" )\n    schema:register(XMLValueType.STRING, "vehicle.receivingHopper.boxes.box(?)#filename" , "Box filename" )\n\n    schema:setXMLSpecializationType()\n\n    local schemaSavegame = Vehicle.xmlSchemaSavegame\n    schemaSavegame:register(XMLValueType.BOOL, "vehicles.vehicle(?).receivingHopper#createBoxes" , "Create boxes" )\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"oncreateboxfinished",children:"onCreateBoxFinished"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onCreateBoxFinished()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"vehicles"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"vehicleLoadState"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"arguments"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function ReceivingHopper:onCreateBoxFinished(vehicles, vehicleLoadState, arguments)\n    local spec = self.spec_receivingHopper\n    spec.creatingBox = false\n\n    if vehicleLoadState = = VehicleLoadingState.OK then\n        spec.lastBox = vehicles[ 1 ]\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onfillunitfilllevelchanged",children:"onFillUnitFillLevelChanged"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onFillUnitFillLevelChanged()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"fillUnitIndex"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"fillLevelDelta"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"fillType"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"toolType"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"fillPositionData"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"appliedDelta"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function ReceivingHopper:onFillUnitFillLevelChanged(fillUnitIndex, fillLevelDelta, fillType, toolType, fillPositionData, appliedDelta)\n    if self:getFillUnitFillLevel(fillUnitIndex) > 0 then\n        self:raiseActive()\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Called on loading"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onLoad(table savegame)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"savegame"}),(0,s.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function ReceivingHopper:onLoad(savegame)\n    local spec = self.spec_receivingHopper\n\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.receivingHopper#unloadingDelay" , "Dischargeable functionalities" ) -- FS17 to FS19\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.receivingHopper#unloadInfoIndex" , "Dischargeable functionalities" ) -- FS17 to FS19\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.receivingHopper#dischargeInfoIndex" , "Dischargeable functionalities" ) -- FS17 to FS19\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.receivingHopper.tipTrigger#index" , "Dischargeable functionalities" ) -- FS17 to FS19\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.receivingHopper.boxTrigger#index" , "Dischargeable functionalities" ) -- FS17 to FS19\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.receivingHopper.fillScrollerNodes.fillScrollerNode" , "Dischargeable functionalities" ) -- FS17 to FS19\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.receivingHopper.fillEffect" , "Dischargeable functionalities" ) -- FS17 to FS19\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.receivingHopper.fillEffect" , "Dischargeable functionalities" ) -- FS17 to FS19\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.receivingHopper.boxTrigger#litersPerMinute" , "Dischargeable functionalities" ) -- FS17 to FS19\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.receivingHopper.raycastNode#index" , "Dischargeable functionalities" ) -- FS17 to FS19\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.receivingHopper.raycastNode#raycastLength" , "Dischargeable functionalities" ) -- FS17 to FS19\n\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.receivingHopper.boxTrigger#boxSpawnPlaceIndex" , "vehicle.receivingHopper.boxes#spawnPlaceNode" ) -- FS17 to FS19\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.receivingHopper.boxTrigger.box(0)" , "vehicle.receivingHopper.boxes.box(0)" ) -- FS17 to FS19\n\n    spec.fillUnitIndex = self.xmlFile:getValue( "vehicle.receivingHopper#fillUnitIndex" , 1 )\n    spec.spawnPlace = self.xmlFile:getValue( "vehicle.receivingHopper.boxes#spawnPlaceNode" , nil , self.components, self.i3dMappings)\n\n    spec.boxes = { }\n    local i = 0\n    while true do\n        local baseName = string.format( "vehicle.receivingHopper.boxes.box(%d)" , i)\n        if not self.xmlFile:hasProperty(baseName) then\n            break\n        end\n\n        local fillTypeStr = self.xmlFile:getValue(baseName .. "#fillType" )\n        local filename = self.xmlFile:getValue(baseName .. "#filename" )\n        local fillTypeIndex = g_fillTypeManager:getFillTypeIndexByName(fillTypeStr)\n        if fillTypeIndex ~ = nil then\n            spec.boxes[fillTypeIndex] = filename\n        else\n                Logging.xmlWarning( self.xmlFile, "Invalid fillType \'%s\'" , fillTypeStr)\n            end\n\n            i = i + 1\n        end\n\n        spec.createBoxes = false\n        spec.lastBox = nil\n        spec.creatingBox = false\n\n        if savegame ~ = nil then\n            spec.createBoxes = savegame.xmlFile:getValue(savegame.key .. ".receivingHopper#createBoxes" , spec.createBoxes)\n        end\n\n        if not self.isServer then\n            SpecializationUtil.removeEventListener( self , "onUpdateTick" , ReceivingHopper )\n        end\n    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"onregisteractionevents",children:"onRegisterActionEvents"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onRegisterActionEvents()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"isActiveForInput"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"isActiveForInputIgnoreSelection"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function ReceivingHopper:onRegisterActionEvents(isActiveForInput, isActiveForInputIgnoreSelection)\n    if self.isClient then\n        local spec = self.spec_receivingHopper\n        self:clearActionEventsTable(spec.actionEvents)\n        if isActiveForInputIgnoreSelection then\n            local _, actionEventId = self:addActionEvent(spec.actionEvents, InputAction.IMPLEMENT_EXTRA, self , ReceivingHopper.actionEventToggleBoxCreation, false , true , false , true , nil )\n            g_inputBinding:setActionEventTextPriority(actionEventId, GS_PRIO_NORMAL)\n            ReceivingHopper.updateActionEvents( self )\n        end\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onupdatetick",children:"onUpdateTick"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Called on update tick"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onUpdateTick(float dt, boolean isActiveForInput, boolean isSelected, )"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"float"}),(0,s.jsx)(n.th,{children:"dt"}),(0,s.jsx)(n.th,{children:"time since last call in ms"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"boolean"}),(0,s.jsx)(n.td,{children:"isActiveForInput"}),(0,s.jsx)(n.td,{children:"true if vehicle is active for input"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"boolean"}),(0,s.jsx)(n.td,{children:"isSelected"}),(0,s.jsx)(n.td,{children:"true if vehicle is selected"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"isSelected"}),(0,s.jsx)(n.td,{})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function ReceivingHopper:onUpdateTick(dt, isActiveForInput, isActiveForInputIgnoreSelection, isSelected)\n    local spec = self.spec_receivingHopper\n    if spec.createBoxes then\n        if self:getDischargeState() = = Dischargeable.DISCHARGE_STATE_OFF then\n            if self:getCanSpawnNextBox() then\n                self:createBox()\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Checks if all prerequisite specializations are loaded"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"prerequisitesPresent(table specializations)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"specializations"}),(0,s.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"hasPrerequisite"}),(0,s.jsx)(n.th,{children:"true if all prerequisite specializations are loaded"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function ReceivingHopper.prerequisitesPresent(specializations)\n    return SpecializationUtil.hasSpecialization( FillUnit , specializations) and SpecializationUtil.hasSpecialization( Dischargeable , specializations)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function ReceivingHopper.registerEventListeners(vehicleType)\n    SpecializationUtil.registerEventListener(vehicleType, "onLoad" , ReceivingHopper )\n    SpecializationUtil.registerEventListener(vehicleType, "onUpdateTick" , ReceivingHopper )\n    SpecializationUtil.registerEventListener(vehicleType, "onRegisterActionEvents" , ReceivingHopper )\n    SpecializationUtil.registerEventListener(vehicleType, "onFillUnitFillLevelChanged" , ReceivingHopper )\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function ReceivingHopper.registerFunctions(vehicleType)\n    SpecializationUtil.registerFunction(vehicleType, "setCreateBoxes" , ReceivingHopper.setCreateBoxes)\n    SpecializationUtil.registerFunction(vehicleType, "getCanSpawnNextBox" , ReceivingHopper.getCanSpawnNextBox)\n    SpecializationUtil.registerFunction(vehicleType, "collisionTestCallback" , ReceivingHopper.collisionTestCallback)\n    SpecializationUtil.registerFunction(vehicleType, "createBox" , ReceivingHopper.createBox)\n    SpecializationUtil.registerFunction(vehicleType, "onCreateBoxFinished" , ReceivingHopper.onCreateBoxFinished)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registeroverwrittenfunctions",children:"registerOverwrittenFunctions"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerOverwrittenFunctions()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function ReceivingHopper.registerOverwrittenFunctions(vehicleType)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "handleDischargeRaycast" , ReceivingHopper.handleDischargeRaycast)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getCanBeSelected" , ReceivingHopper.getCanBeSelected)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"savetoxmlfile",children:"saveToXMLFile"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"saveToXMLFile()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"xmlFile"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"key"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"usedModNames"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function ReceivingHopper:saveToXMLFile(xmlFile, key, usedModNames)\n    local spec = self.spec_receivingHopper\n\n    xmlFile:setValue(key .. "#createBoxes" , spec.createBoxes)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"setcreateboxes",children:"setCreateBoxes"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Toggle box creating"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"setCreateBoxes(boolean state, boolean noEventSend)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"boolean"}),(0,s.jsx)(n.th,{children:"state"}),(0,s.jsx)(n.th,{children:"new state"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"boolean"}),(0,s.jsx)(n.td,{children:"noEventSend"}),(0,s.jsx)(n.td,{children:"no event send"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function ReceivingHopper:setCreateBoxes(state, noEventSend)\n    local spec = self.spec_receivingHopper\n    if state ~ = spec.createBoxes then\n        ReceivingHopperSetCreateBoxesEvent.sendEvent( self , state, noEventSend)\n\n        spec.createBoxes = state\n        ReceivingHopper.updateActionEvents( self )\n\n        spec.lastBox = nil\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"updateactionevents",children:"updateActionEvents"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"updateActionEvents()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"self"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function ReceivingHopper.updateActionEvents( self )\n    local spec = self.spec_receivingHopper\n    local actionEvent = spec.actionEvents[InputAction.IMPLEMENT_EXTRA]\n    if actionEvent ~ = nil then\n        if spec.createBoxes then\n            g_inputBinding:setActionEventText(actionEvent.actionEventId, g_i18n:getText( "action_disablePalletSpawning" ))\n        else\n                g_inputBinding:setActionEventText(actionEvent.actionEventId, g_i18n:getText( "action_enablePalletSpawning" ))\n            end\n        end\n    end\n\n'})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}}}]);