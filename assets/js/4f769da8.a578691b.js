"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[68954],{28453(e,n,l){l.d(n,{R:()=>s,x:()=>r});var a=l(96540);const i={},t=a.createContext(i);function s(e){const n=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),a.createElement(t.Provider,{value:n},e.children)}},85245(e,n,l){l.r(n),l.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"script/Specializations/PlaceableShallowWaterSimulation","title":"PlaceableShallowWaterSimulation","description":"PlaceableShallowWaterSimulation","source":"@site/../docs/script/Specializations/PlaceableShallowWaterSimulation.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/PlaceableShallowWaterSimulation","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableShallowWaterSimulation","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"PlaceableSellingStation","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableSellingStation"},"next":{"title":"PlaceableSilo","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableSilo"}}');var i=l(74848),t=l(28453);const s={},r=void 0,o={},c=[{value:"PlaceableShallowWaterSimulation",id:"placeableshallowwatersimulation",level:2},{value:"onDelete",id:"ondelete",level:3},{value:"onLoad",id:"onload",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"placeableshallowwatersimulation",children:"PlaceableShallowWaterSimulation"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Specialization for placeables"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Functions"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#ondelete",children:"onDelete"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"ondelete",children:"onDelete"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onDelete()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function PlaceableShallowWaterSimulation:onDelete()\n    local spec = self.spec_shallowWaterSimulation\n\n    if spec.waterPlanes ~ = nil then\n        for _, waterPlane in ipairs(spec.waterPlanes) do\n            g_currentMission.shallowWaterSimulation:removeAreaGeometry(waterPlane)\n            g_currentMission.shallowWaterSimulation:removeWaterPlane(waterPlane)\n        end\n        spec.waterPlanes = nil\n    end\n\n    if spec.obstacles ~ = nil then\n        for _, obstacle in ipairs(spec.obstacles) do\n            g_currentMission.shallowWaterSimulation:removeObstacle(obstacle)\n        end\n        spec.obstacles = nil\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Called on loading"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onLoad(table savegame)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"table"}),(0,i.jsx)(n.th,{children:"savegame"}),(0,i.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function PlaceableShallowWaterSimulation:onLoad(savegame)\n    local spec = self.spec_shallowWaterSimulation\n\n    if g_currentMission.shallowWaterSimulation = = nil then\n        return\n    end\n\n    if self.propertyState = = PlaceablePropertyState.CONSTRUCTION_PREVIEW then\n        return -- do not add SWS for preview\n        end\n\n        for _, waterPlaneKey in self.xmlFile:iterator( "placeable.shallowWaterSimulation.waterPlane" ) do\n            local waterPlane = self.xmlFile:getValue(waterPlaneKey .. "#node" , nil , self.components, self.i3dMappings)\n\n            if waterPlane = = nil then\n                continue\n            end\n\n            -- set material from material holder if specified\n                local materialName = self.xmlFile:getValue(waterPlaneKey .. "#materialName" , nil )\n                if materialName ~ = nil then\n                    local waterSimMat = g_materialManager:getBaseMaterialByName(materialName)\n                    if waterSimMat = = nil then\n                        Logging.xmlError( self.xmlFile, "Unable to retrieve material %s for water plane %q at %q" , materialName, getName(waterPlane), waterPlaneKey)\n                        else\n                                setMaterial(waterPlane, waterSimMat, 0 )\n                            end\n                        end\n\n                        spec.waterPlanes = spec.waterPlanes or { }\n\n                        if g_currentMission.shallowWaterSimulation:addWaterPlane(waterPlane) then\n                            g_currentMission.shallowWaterSimulation:addAreaGeometry(waterPlane)\n                            table.insert(spec.waterPlanes, waterPlane)\n                        end\n                    end\n\n                    for _, key in self.xmlFile:iterator( "placeable.shallowWaterSimulation.obstacle" ) do\n                        local node = self.xmlFile:getValue(key .. "#node" , nil , self.components, self.i3dMappings)\n                        if node = = nil then\n                            Logging.xmlWarning( self.xmlFile, "Missing node for obstacle node \'%s\'" , key)\n                                continue\n                            end\n\n                            local type = ObstacleType.loadFromXMLFile( self.xmlFile, key .. "#type" ) or ObstacleType.RECTANGLE\n                            local size = self.xmlFile:getValue(key .. "#size" , "1 1 1" , true )\n                            local offset = self.xmlFile:getValue(key .. "#offset" , nil , true )\n\n                            local xDir, _, zDir = localDirectionToWorld(node, 0 , 0 , 1 )\n                            local rotY = MathUtil.getYRotationFromDirection(xDir, zDir)\n\n                            local obstacle = g_currentMission.shallowWaterSimulation:addObstacle(node, size[ 1 ], size[ 2 ], size[ 3 ], nil , nil , offset, rotY, type )\n                            if obstacle ~ = nil then\n                                spec.obstacles = spec.obstacles or { }\n                                table.insert(spec.obstacles, obstacle)\n                            end\n                        end\n                    end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Checks if all prerequisite specializations are loaded"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"prerequisitesPresent(table specializations)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"table"}),(0,i.jsx)(n.th,{children:"specializations"}),(0,i.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"table"}),(0,i.jsx)(n.th,{children:"hasPrerequisite"}),(0,i.jsx)(n.th,{children:"true if all prerequisite specializations are loaded"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function PlaceableShallowWaterSimulation.prerequisitesPresent(specializations)\n    return true\nend\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);