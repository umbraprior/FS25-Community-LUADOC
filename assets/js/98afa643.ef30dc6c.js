"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[49839],{16506(e,n,l){l.r(n),l.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"script/GUI/TimerElement","title":"TimerElement","description":"TimerElement","source":"@site/../docs/script/GUI/TimerElement.md","sourceDirName":"script/GUI","slug":"/script/GUI/TimerElement","permalink":"/FS25-Community-LUADOC/script/GUI/TimerElement","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"ThreePartBitmapElement","permalink":"/FS25-Community-LUADOC/script/GUI/ThreePartBitmapElement"},"next":{"title":"ToggleButtonElement","permalink":"/FS25-Community-LUADOC/script/GUI/ToggleButtonElement"}}');var s=l(74848),i=l(28453);const a={},t=void 0,o={},d=[{value:"TimerElement",id:"timerelement",level:2},{value:"copyAttributes",id:"copyattributes",level:3},{value:"delete",id:"delete",level:3},{value:"draw",id:"draw",level:3},{value:"loadFromXML",id:"loadfromxml",level:3},{value:"loadProfile",id:"loadprofile",level:3},{value:"new",id:"new",level:3},{value:"setValue",id:"setvalue",level:3},{value:"updateUVs",id:"updateuvs",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"timerelement",children:"TimerElement"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:'Timer element for a clock-like display.\nUsed layers: "image" for a foreground image, "bgImage" for a background image, "valueImage" for a value display,\n"markerImage" for a marker display.\nTODO: This element is not in use. Do we need to retain the code?'}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parent"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"?version=script&category=43&class=506",children:"GuiElement"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Functions"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#copyattributes",children:"copyAttributes"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#delete",children:"delete"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#draw",children:"draw"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#loadfromxml",children:"loadFromXML"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#loadprofile",children:"loadProfile"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#new",children:"new"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#setvalue",children:"setValue"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#updateuvs",children:"updateUVs"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"copyattributes",children:"copyAttributes"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"copyAttributes()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"src"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function TimerElement:copyAttributes(src)\n    TimerElement:superClass().copyAttributes( self , src)\n\n    self.timerSize = { src.timerSize[ 1 ], src.timerSize[ 2 ] }\n    self.markerSize = { src.markerSize[ 1 ], src.markerSize[ 2 ] }\n    self.timerOffset = { src.timerOffset[ 1 ], src.timerOffset[ 2 ] }\n    self.radius = { src.radius[ 1 ], src.radius[ 2 ] }\n    self.value = src.value\n\n    GuiOverlay.copyOverlay( self.overlayFront, src.overlayFront)\n    GuiOverlay.copyOverlay( self.overlayBackground1, src.overlayBackground1)\n    GuiOverlay.copyOverlay( self.overlayBackground2, src.overlayBackground2)\n    GuiOverlay.copyOverlay( self.overlayValue1, src.overlayValue1)\n    GuiOverlay.copyOverlay( self.overlayValue2, src.overlayValue2)\n    GuiOverlay.copyOverlay( self.overlayMarker, src.overlayMarker)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"delete",children:"delete"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"delete()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function TimerElement:delete()\n    GuiOverlay.deleteOverlay( self.overlayFront)\n    GuiOverlay.deleteOverlay( self.overlayBackground1)\n    GuiOverlay.deleteOverlay( self.overlayBackground2)\n    GuiOverlay.deleteOverlay( self.overlayValue1)\n    GuiOverlay.deleteOverlay( self.overlayValue2)\n    GuiOverlay.deleteOverlay( self.overlayMarker)\n    TimerElement:superClass().delete( self )\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"draw",children:"draw"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"draw()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"clipX1"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"clipY1"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"clipX2"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"clipY2"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function TimerElement:draw(clipX1, clipY1, clipX2, clipY2)\n    TimerElement:superClass().draw( self , clipX1, clipY1, clipX2, clipY2)\n\n    local state = GuiOverlay.STATE_NORMAL\n    if self.disabled then\n        state = GuiOverlay.STATE_DISABLED\n    end\n\n    if self.value > 0.5 then\n        GuiOverlay.renderOverlay( self.overlayBackground2, self.absPosition[ 1 ] + self.timerOffset[ 1 ], self.absPosition[ 2 ] + self.timerOffset[ 2 ], self.timerSize[ 1 ], self.timerSize[ 2 ], state)\n    end\n    GuiOverlay.renderOverlay( self.overlayValue1, self.absPosition[ 1 ] + self.timerOffset[ 1 ], self.absPosition[ 2 ] + self.timerOffset[ 2 ], self.timerSize[ 1 ], self.timerSize[ 2 ], state)\n\n    if self.value > 0.5 then\n        GuiOverlay.renderOverlay( self.overlayValue2, self.absPosition[ 1 ] + self.timerOffset[ 1 ], self.absPosition[ 2 ] + self.timerOffset[ 2 ], self.timerSize[ 1 ], self.timerSize[ 2 ], state)\n    else\n            GuiOverlay.renderOverlay( self.overlayBackground2, self.absPosition[ 1 ] + self.timerOffset[ 1 ], self.absPosition[ 2 ] + self.timerOffset[ 2 ], self.timerSize[ 1 ], self.timerSize[ 2 ], state)\n            GuiOverlay.renderOverlay( self.overlayBackground1, self.absPosition[ 1 ] + self.timerOffset[ 1 ], self.absPosition[ 2 ] + self.timerOffset[ 2 ], self.timerSize[ 1 ], self.timerSize[ 2 ], state)\n        end\n        GuiOverlay.renderOverlay( self.overlayFront, self.absPosition[ 1 ], self.absPosition[ 2 ], self.size[ 1 ], self.size[ 2 ], state)\n\n        local markerPosX = math.cos( math.rad((( 1 - self.value) * 360 ) + 90 )) * self.radius[ 1 ]\n        local markerPosY = math.sin( math.rad((( 1 - self.value) * 360 ) + 90 )) * self.radius[ 2 ]\n        GuiOverlay.renderOverlay( self.overlayMarker, self.absPosition[ 1 ] + self.size[ 1 ] / 2 - self.markerSize[ 1 ] / 2 + markerPosX, self.absPosition[ 2 ] + self.size[ 2 ] / 2 - self.markerSize[ 2 ] / 2 + markerPosY, self.markerSize[ 1 ], self.markerSize[ 2 ], state)\n    end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"loadfromxml",children:"loadFromXML"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"loadFromXML()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"xmlFile"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"key"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function TimerElement:loadFromXML(xmlFile, key)\n    TimerElement:superClass().loadFromXML( self , xmlFile, key)\n\n    GuiOverlay.loadOverlay( self , self.overlayFront, "image" , self.imageSize, nil , xmlFile, key)\n    GuiOverlay.loadOverlay( self , self.overlayBackground1, "bgImage" , self.imageSize, nil , xmlFile, key)\n    GuiOverlay.loadOverlay( self , self.overlayBackground2, "bgImage" , self.imageSize, nil , xmlFile, key)\n    GuiOverlay.loadOverlay( self , self.overlayValue1, "valueImage" , self.imageSize, nil , xmlFile, key)\n    GuiOverlay.loadOverlay( self , self.overlayValue2, "valueImage" , self.imageSize, nil , xmlFile, key)\n    GuiOverlay.loadOverlay( self , self.overlayMarker, "markerImage" , self.imageSize, nil , xmlFile, key)\n\n    self.timerSize = GuiUtils.getNormalizedScreenValues(getXMLString(xmlFile, key .. "#timerSize" ), self.timerSize)\n    self.markerSize = GuiUtils.getNormalizedScreenValues(getXMLString(xmlFile, key .. "#markerSize" ), self.markerSize)\n    self.value = Utils.getNoNil(getXMLFloat(xmlFile, key .. "#value" ), self.value)\n\n    local radius = getXMLString(xmlFile, key .. "#radius" )\n    if radius ~ = nil then\n        self.radius = GuiUtils.getNormalizedScreenValues(radius .. " " .. radius, self.radius)\n    end\n\n    GuiOverlay.createOverlay( self.overlayFront)\n    GuiOverlay.createOverlay( self.overlayBackground1)\n    GuiOverlay.createOverlay( self.overlayBackground2)\n    GuiOverlay.createOverlay( self.overlayValue1)\n    GuiOverlay.createOverlay( self.overlayValue2)\n    GuiOverlay.createOverlay( self.overlayMarker)\n\n    self:updateUVs( self.overlayValue2, math.rad( 180 ))\n    self:setValue( self.value)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"loadprofile",children:"loadProfile"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"loadProfile()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"profile"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"applyProfile"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function TimerElement:loadProfile(profile, applyProfile)\n    TimerElement:superClass().loadProfile( self , profile, applyProfile)\n\n    GuiOverlay.loadOverlay( self , self.overlayFront, "image" , self.imageSize, profile, nil , nil )\n    GuiOverlay.loadOverlay( self , self.overlayBackground1, "bgImage" , self.imageSize, profile, nil , nil )\n    GuiOverlay.loadOverlay( self , self.overlayBackground2, "bgImage" , self.imageSize, profile, nil , nil )\n    GuiOverlay.loadOverlay( self , self.overlayValue1, "valueImage" , self.imageSize, profile, nil , nil )\n    GuiOverlay.loadOverlay( self , self.overlayValue2, "valueImage" , self.imageSize, profile, nil , nil )\n    GuiOverlay.loadOverlay( self , self.overlayMarker, "markerImage" , self.imageSize, profile, nil , nil )\n\n    self.timerSize = GuiUtils.getNormalizedScreenValues(profile:getValue( "timerSize" ), self.timerSize)\n    self.markerSize = GuiUtils.getNormalizedScreenValues(profile:getValue( "markerSize" ), self.markerSize)\n    self.value = profile:getNumber( "value" , self.value)\n\n    local radius = profile:getValue( "radius" )\n    if radius ~ = nil then\n        self.radius = GuiUtils.getNormalizedScreenValues(radius .. " " .. radius, self.outputSize)\n    end\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"new",children:"new"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"new()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"target"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"custom_mt"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function TimerElement.new(target, custom_mt)\n    if custom_mt = = nil then\n        custom_mt = TimerElement _mt\n    end\n    local self = GuiElement.new(target, custom_mt)\n\n    self.value = 0\n    self.timerSize = { 1 , 1 }\n    self.markerSize = { 1 , 1 }\n    self.radius = 1\n    self.timerOffset = nil\n\n    self.overlayFront = { }\n    self.overlayBackground1 = { }\n    self.overlayBackground2 = { }\n    self.overlayValue1 = { }\n    self.overlayValue2 = { }\n    self.overlayMarker = { }\n\n    return self\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"setvalue",children:"setValue"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"setValue()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"newValue"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function TimerElement:setValue(newValue)\n    self.value = math.clamp(newValue, 0 , 1 )\n    self:updateUVs( self.overlayValue1, math.rad((( 1 - self.value) * 360 )))\n    self:updateUVs( self.overlayBackground1, math.rad( 180 + ( - self.value * 360 )))\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"updateuvs",children:"updateUVs"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"updateUVs()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"overlay"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"rotation"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function TimerElement:updateUVs(overlay, rotation)\n    local uvs = GuiOverlay.getOverlayUVs(overlay)\n    uvs[ 1 ] = - 0.5 * math.cos( - rotation) + 0.5 * math.sin( - rotation) + 0.5\n    uvs[ 2 ] = - 0.5 * math.sin( - rotation) - 0.5 * math.cos( - rotation) + 0.5\n    uvs[ 3 ] = - 0.5 * math.cos( - rotation) - 0.5 * math.sin( - rotation) + 0.5\n    uvs[ 4 ] = - 0.5 * math.sin( - rotation) + 0.5 * math.cos( - rotation) + 0.5\n    uvs[ 5 ] = 0.5 * math.cos( - rotation) + 0.5 * math.sin( - rotation) + 0.5\n    uvs[ 6 ] = 0.5 * math.sin( - rotation) - 0.5 * math.cos( - rotation) + 0.5\n    uvs[ 7 ] = 0.5 * math.cos( - rotation) - 0.5 * math.sin( - rotation) + 0.5\n    uvs[ 8 ] = 0.5 * math.sin( - rotation) + 0.5 * math.cos( - rotation) + 0.5\nend\n\n"})})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453(e,n,l){l.d(n,{R:()=>a,x:()=>t});var r=l(96540);const s={},i=r.createContext(s);function a(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);