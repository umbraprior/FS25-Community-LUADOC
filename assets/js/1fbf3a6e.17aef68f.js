"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[39817],{28453(e,n,l){l.d(n,{R:()=>t,x:()=>o});var i=l(96540);const s={},r=i.createContext(s);function t(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(r.Provider,{value:n},e.children)}},73393(e,n,l){l.r(n),l.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"script/Specializations/ChainRollers","title":"ChainRollers","description":"ChainRollers","source":"@site/../docs/script/Specializations/ChainRollers.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/ChainRollers","permalink":"/FS25-Community-LUADOC/script/Specializations/ChainRollers","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"CCTDrivable","permalink":"/FS25-Community-LUADOC/script/Specializations/CCTDrivable"},"next":{"title":"Combine","permalink":"/FS25-Community-LUADOC/script/Specializations/Combine"}}');var s=l(74848),r=l(28453);const t={},o=void 0,d={},a=[{value:"ChainRollers",id:"chainrollers",level:2},{value:"initSpecialization",id:"initspecialization",level:3},{value:"loadChainRollerFromXML",id:"loadchainrollerfromxml",level:3},{value:"loadExtraDependentParts",id:"loadextradependentparts",level:3},{value:"onLoad",id:"onload",level:3},{value:"onLoadFinished",id:"onloadfinished",level:3},{value:"onPostUpdate",id:"onpostupdate",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3},{value:"registerFunctions",id:"registerfunctions",level:3},{value:"registerOverwrittenFunctions",id:"registeroverwrittenfunctions",level:3},{value:"updateChainRoller",id:"updatechainroller",level:3},{value:"updateExtraDependentParts",id:"updateextradependentparts",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"chainrollers",children:"ChainRollers"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Specialization for roller chains that are controlled with a spline as position reference"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Functions"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#initspecialization",children:"initSpecialization"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#loadchainrollerfromxml",children:"loadChainRollerFromXML"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#loadextradependentparts",children:"loadExtraDependentParts"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onloadfinished",children:"onLoadFinished"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onpostupdate",children:"onPostUpdate"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registeroverwrittenfunctions",children:"registerOverwrittenFunctions"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#updatechainroller",children:"updateChainRoller"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#updateextradependentparts",children:"updateExtraDependentParts"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"initspecialization",children:"initSpecialization"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Called on specialization initializing"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"initSpecialization()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function ChainRollers.initSpecialization()\n    local schema = Vehicle.xmlSchema\n    schema:setXMLSpecializationType( "ChainRollers" )\n\n    schema:register(XMLValueType.FLOAT, "vehicle.chainRollers#maxUpdateDistance" , "If the player is more than this distance away the nodes will no longer be updated" , 100 )\n\n    schema:register(XMLValueType.NODE_INDEX, "vehicle.chainRollers.chainRoller(?)#elementsNode" , "Root node that contains every chain link" )\n    schema:register(XMLValueType.NODE_INDEX, "vehicle.chainRollers.chainRoller(?)#endReferenceNode" , "Reference node for the alignment of the last chain link" )\n        schema:register(XMLValueType.NODE_INDEX, "vehicle.chainRollers.chainRoller(?).splineNode(?)#node" , "Regular transform group(s) that define the spline(at least two have to be defined)" )\n\n        schema:addDelayedRegistrationFunc( "Cylindered:movingTool" , function (cSchema, cKey)\n            cSchema:register(XMLValueType.NODE_INDICES, cKey .. ".chainRollers#splineNodes" , "Spline nodes to update" )\n        end )\n\n        schema:addDelayedRegistrationFunc( "Cylindered:movingPart" , function (cSchema, cKey)\n            cSchema:register(XMLValueType.NODE_INDICES, cKey .. ".chainRollers#splineNodes" , "Spline nodes to update" )\n        end )\n\n        schema:setXMLSpecializationType()\n    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"loadchainrollerfromxml",children:"loadChainRollerFromXML"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"loadChainRollerFromXML()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"xmlFile"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"key"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"chainRoller"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function ChainRollers:loadChainRollerFromXML(xmlFile, key, chainRoller)\n    local spec = self.spec_chainRollers\n\n    chainRoller.elementsNode = xmlFile:getValue(key .. "#elementsNode" , nil , self.components, self.i3dMappings)\n    if chainRoller.elementsNode = = nil then\n        Logging.xmlWarning(xmlFile, "Missing \'elementsNode\' for chainRoller \'%s\'!" , key)\n            return false\n        end\n\n        chainRoller.elements = { }\n        for i = 1 , getNumOfChildren(chainRoller.elementsNode) do\n            local node = getChildAt(chainRoller.elementsNode, i - 1 )\n            table.insert(chainRoller.elements, node)\n        end\n\n        chainRoller.numElements = #chainRoller.elements\n        if chainRoller.numElements = = 0 then\n            Logging.xmlWarning(xmlFile, "Missing elements inside \'elementsNode\' for chainRoller \'%s\'!" , key)\n                return false\n            end\n\n            chainRoller.endReferenceNode = xmlFile:getValue(key .. "#endReferenceNode" , nil , self.components, self.i3dMappings)\n\n            chainRoller.splineNodes = { }\n            xmlFile:iterate(key .. ".splineNode" , function (index, key)\n                local splineNode = xmlFile:getValue(key .. "#node" , nil , self.components, self.i3dMappings)\n                if splineNode = = nil then\n                    Logging.xmlWarning(xmlFile, "Missing \'node\' for chainRoller spline \'%s\'!" , key)\n                        return false\n                    end\n\n                    table.insert(chainRoller.splineNodes, splineNode)\n                end )\n\n                if #chainRoller.splineNodes < 2 then\n                    Logging.xmlWarning(xmlFile, "Missing spline nodes for chainRoller \'%s\', at least two are required!" , key)\n                        return false\n                    end\n\n                    local editPoints = { }\n                    for _, splineNode in pairs(chainRoller.splineNodes) do\n                        local x, y, z = getTranslation(splineNode)\n                        table.insert(editPoints, x)\n                        table.insert(editPoints, y)\n                        table.insert(editPoints, z)\n                    end\n\n                    chainRoller.spline = createSplineFromEditPoints(getParent(chainRoller.splineNodes[ 1 ]), editPoints, false , false )\n                    setVisibility(chainRoller.spline, false )\n\n                    for index, splineNode in pairs(chainRoller.splineNodes) do\n                        spec.chainRollerSplineNodeToSpline[splineNode] = { chainRoller = chainRoller, spline = chainRoller.spline, index = index - 1 , isDirty = false }\n                    end\n\n                    chainRoller.isDirty = true\n\n                    return true\n                end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"loadextradependentparts",children:"loadExtraDependentParts"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"loadExtraDependentParts()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"xmlFile"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"baseName"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"entry"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function ChainRollers:loadExtraDependentParts(superFunc, xmlFile, baseName, entry)\n    if not superFunc( self , xmlFile, baseName, entry) then\n        return false\n    end\n\n    local splineNodes = xmlFile:getValue(baseName .. ".chainRollers#splineNodes" , nil , self.components, self.i3dMappings, true )\n    if splineNodes ~ = nil and #splineNodes > 0 then\n        entry.chainRollerSplineNodes = splineNodes\n    end\n\n    return true\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onLoad()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function ChainRollers:onLoad(savegame)\n    local spec = self.spec_chainRollers\n\n    if not self.xmlFile:hasProperty( "vehicle.chainRollers" ) then\n        SpecializationUtil.removeEventListener( self , "onLoadFinished" , ChainRollers )\n        SpecializationUtil.removeEventListener( self , "onPostUpdate" , ChainRollers )\n        return\n    end\n\n    spec.maxUpdateDistance = self.xmlFile:getValue( "vehicle.chainRollers#maxUpdateDistance" , 100 )\n\n    spec.chainRollers = { }\n    spec.chainRollerSplineNodeToSpline = { }\n    self.xmlFile:iterate( "vehicle.chainRollers.chainRoller" , function (index, key)\n        local chainRoller = { }\n        if self:loadChainRollerFromXML( self.xmlFile, key, chainRoller) then\n            table.insert(spec.chainRollers, chainRoller)\n        end\n    end )\n\n    if #spec.chainRollers = = 0 then\n        SpecializationUtil.removeEventListener( self , "onLoadFinished" , ChainRollers )\n        SpecializationUtil.removeEventListener( self , "onPostUpdate" , ChainRollers )\n    end\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"onloadfinished",children:"onLoadFinished"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onLoadFinished()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function ChainRollers:onLoadFinished(savegame)\n    ChainRollers.onPostUpdate( self , 99999 , false , false , false )\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onpostupdate",children:"onPostUpdate"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onPostUpdate()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"dt"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"isActiveForInput"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"isActiveForInputIgnoreSelection"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"isSelected"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function ChainRollers:onPostUpdate(dt, isActiveForInput, isActiveForInputIgnoreSelection, isSelected)\n    local spec = self.spec_chainRollers\n    if self.currentUpdateDistance < spec.maxUpdateDistance then\n        --#profile RemoteProfiler.zoneBeginN("ChainRollers:updateSplines")\n        for splineNode, splineData in pairs(spec.chainRollerSplineNodeToSpline) do\n            if splineData.isDirty then\n                setSplineCV(splineData.spline, splineData.index, localToLocal(splineNode, splineData.spline, 0 , 0 , 0 ))\n                splineData.isDirty = false\n                splineData.chainRoller.isDirty = true\n            end\n        end\n        --#profile RemoteProfiler.zoneEnd()\n\n        for _, chainRoller in pairs(spec.chainRollers) do\n            if chainRoller.isDirty then\n                self:updateChainRoller(chainRoller, dt)\n                chainRoller.isDirty = false\n            end\n        end\n\n        if VehicleDebug.state = = VehicleDebug.DEBUG_ATTRIBUTES then\n            for _, chainRoller in pairs(spec.chainRollers) do\n                for i = 1 , #chainRoller.splineNodes - 1 do\n                    local x1, y1, z1 = getWorldTranslation(chainRoller.splineNodes[i])\n                    local x2, y2, z2 = getWorldTranslation(chainRoller.splineNodes[i + 1 ])\n                    drawDebugLine(x1, y1, z1, 1 , 0 , 0 , x2, y2, z2, 1 , 0 , 0 , false )\n                    drawDebugPoint(x1, y1, z1, 1 , 0 , 0 , 1 , false )\n                    drawDebugPoint(x2, y2, z2, 1 , 0 , 0 , 1 , false )\n                end\n\n                for i = 0 , 99 do\n                    local t = i / 100\n                    local x1, y1, z1 = getSplinePosition(chainRoller.spline, t)\n                    local x2, y2, z2 = getSplinePosition(chainRoller.spline, t + 0.01 )\n                    drawDebugLine(x1, y1, z1, 0 , 1 , 0 , x2, y2, z2, 0 , 1 , 0 , false )\n                end\n            end\n        end\n    end\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"prerequisitesPresent()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function ChainRollers.prerequisitesPresent(specializations)\n    return true\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function ChainRollers.registerEventListeners(vehicleType)\n    SpecializationUtil.registerEventListener(vehicleType, "onLoad" , ChainRollers )\n    SpecializationUtil.registerEventListener(vehicleType, "onLoadFinished" , ChainRollers )\n    SpecializationUtil.registerEventListener(vehicleType, "onPostUpdate" , ChainRollers )\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function ChainRollers.registerFunctions(vehicleType)\n    SpecializationUtil.registerFunction(vehicleType, "loadChainRollerFromXML" , ChainRollers.loadChainRollerFromXML)\n    SpecializationUtil.registerFunction(vehicleType, "updateChainRoller" , ChainRollers.updateChainRoller)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registeroverwrittenfunctions",children:"registerOverwrittenFunctions"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerOverwrittenFunctions()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function ChainRollers.registerOverwrittenFunctions(vehicleType)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "loadExtraDependentParts" , ChainRollers.loadExtraDependentParts)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "updateExtraDependentParts" , ChainRollers.updateExtraDependentParts)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"updatechainroller",children:"updateChainRoller"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"updateChainRoller()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"chainRoller"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"dt"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function ChainRollers:updateChainRoller(chainRoller, dt)\n    --#profile RemoteProfiler.zoneBeginN("ChainRollers:updateElements")\n    local lastX, lastY, lastZ\n    local lastElementNode\n    for i = 1 , chainRoller.numElements do\n        local elementNode = chainRoller.elements[i]\n\n        local t = (i - 1 ) / (chainRoller.numElements - 1 )\n        local x, y, z = getSplinePosition(chainRoller.spline, t)\n        setWorldTranslation(elementNode, x, y, z)\n\n        if lastX ~ = nil then\n            local dx, dy, dz = MathUtil.vector3Normalize(x - lastX, y - lastY, z - lastZ)\n            dx, dy, dz = worldDirectionToLocal(chainRoller.elementsNode, dx, dy, dz)\n            setDirection(lastElementNode, dx, dy, dz, 0 , 1 , 0 )\n        end\n\n        lastX, lastY, lastZ = x, y, z\n        lastElementNode = elementNode\n    end\n\n    if chainRoller.endReferenceNode ~ = nil then\n        local lastElement = chainRoller.elements[chainRoller.numElements]\n        local x, y, z = getWorldTranslation(chainRoller.endReferenceNode)\n        local dx, dy, dz = MathUtil.vector3Normalize(x - lastX, y - lastY, z - lastZ)\n        dx, dy, dz = worldDirectionToLocal(chainRoller.elementsNode, dx, dy, dz)\n        setDirection(lastElement, dx, dy, dz, 0 , 1 , 0 )\n    end\n    --#profile RemoteProfiler.zoneEnd()\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"updateextradependentparts",children:"updateExtraDependentParts"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"updateExtraDependentParts()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"part"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"dt"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function ChainRollers:updateExtraDependentParts(superFunc, part, dt)\n    superFunc( self , part, dt)\n\n    if part.chainRollerSplineNodes ~ = nil then\n        local spec = self.spec_chainRollers\n        for i = 1 , #part.chainRollerSplineNodes do\n            local splineNode = part.chainRollerSplineNodes[i]\n            local splineData = spec.chainRollerSplineNodeToSpline[splineNode]\n            if splineData ~ = nil then\n                splineData.isDirty = true\n            end\n        end\n    end\nend\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);