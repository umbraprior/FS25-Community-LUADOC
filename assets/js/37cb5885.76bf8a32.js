"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[98760],{28453(e,n,l){l.d(n,{R:()=>t,x:()=>c});var s=l(96540);const i={},r=s.createContext(i);function t(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(r.Provider,{value:n},e.children)}},71701(e,n,l){l.r(n),l.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"script/GUI/Gui","title":"Gui","description":"Gui","source":"@site/../docs/script/GUI/Gui.md","sourceDirName":"script/GUI","slug":"/script/GUI/","permalink":"/FS25-Community-LUADOC/script/GUI/","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"FruitTypeManager","permalink":"/FS25-Community-LUADOC/script/Fruits/FruitTypeManager"},"next":{"title":"AnimalScreen","permalink":"/FS25-Community-LUADOC/script/GUI/AnimalScreen"}}');var i=l(74848),r=l(28453);const t={},c=void 0,a={},o=[{value:"Gui",id:"gui",level:2},{value:"addFrame",id:"addframe",level:3},{value:"addScreen",id:"addscreen",level:3},{value:"assignPlaySampleCallback",id:"assignplaysamplecallback",level:3},{value:"changeScreen",id:"changescreen",level:3},{value:"closeAllDialogs",id:"closealldialogs",level:3},{value:"closeDialog",id:"closedialog",level:3},{value:"closeDialogByName",id:"closedialogbyname",level:3},{value:"draw",id:"draw",level:3},{value:"enterMenuContext",id:"entermenucontext",level:3},{value:"getIsDialogVisible",id:"getisdialogvisible",level:3},{value:"getIsGuiVisible",id:"getisguivisible",level:3},{value:"getIsOverlayGuiVisible",id:"getisoverlayguivisible",level:3},{value:"getProfile",id:"getprofile",level:3},{value:"getScreenInstanceByClass",id:"getscreeninstancebyclass",level:3},{value:"hasElementInputFocus",id:"haselementinputfocus",level:3},{value:"initGuiLibrary",id:"initguilibrary",level:3},{value:"keyEvent",id:"keyevent",level:3},{value:"leaveMenuContext",id:"leavemenucontext",level:3},{value:"loadGui",id:"loadgui",level:3},{value:"loadGuiRec",id:"loadguirec",level:3},{value:"loadMapData",id:"loadmapdata",level:3},{value:"loadPresets",id:"loadpresets",level:3},{value:"loadProfiles",id:"loadprofiles",level:3},{value:"loadProfileSet",id:"loadprofileset",level:3},{value:"loadTraits",id:"loadtraits",level:3},{value:"makeChangeScreenClosure",id:"makechangescreenclosure",level:3},{value:"makePlaySampleClosure",id:"makeplaysampleclosure",level:3},{value:"makeToggleCustomInputContextClosure",id:"maketogglecustominputcontextclosure",level:3},{value:"mouseEvent",id:"mouseevent",level:3},{value:"new",id:"new",level:3},{value:"notifyControls",id:"notifycontrols",level:3},{value:"onMenuInput",id:"onmenuinput",level:3},{value:"onReleaseInput",id:"onreleaseinput",level:3},{value:"onReleaseMovement",id:"onreleasemovement",level:3},{value:"registerGuiElement",id:"registerguielement",level:3},{value:"registerGuiElementProcFunction",id:"registerguielementprocfunction",level:3},{value:"registerMenuInput",id:"registermenuinput",level:3},{value:"resolveFrameReference",id:"resolveframereference",level:3},{value:"setClient",id:"setclient",level:3},{value:"setCurrentMission",id:"setcurrentmission",level:3},{value:"setServer",id:"setserver",level:3},{value:"showDialog",id:"showdialog",level:3},{value:"showGui",id:"showgui",level:3},{value:"toggleCustomInputContext",id:"togglecustominputcontext",level:3},{value:"touchEvent",id:"touchevent",level:3},{value:"unloadMapData",id:"unloadmapdata",level:3},{value:"update",id:"update",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"gui",children:"Gui"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Graphical User Interface controller.\nBuilds UI from configurations, provides dialog display and propagates UI input."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Functions"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#addframe",children:"addFrame"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#addscreen",children:"addScreen"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#assignplaysamplecallback",children:"assignPlaySampleCallback"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#changescreen",children:"changeScreen"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#closealldialogs",children:"closeAllDialogs"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#closedialog",children:"closeDialog"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#closedialogbyname",children:"closeDialogByName"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#draw",children:"draw"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#entermenucontext",children:"enterMenuContext"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getisdialogvisible",children:"getIsDialogVisible"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getisguivisible",children:"getIsGuiVisible"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getisoverlayguivisible",children:"getIsOverlayGuiVisible"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getprofile",children:"getProfile"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getscreeninstancebyclass",children:"getScreenInstanceByClass"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#haselementinputfocus",children:"hasElementInputFocus"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#initguilibrary",children:"initGuiLibrary"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#keyevent",children:"keyEvent"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#leavemenucontext",children:"leaveMenuContext"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#loadgui",children:"loadGui"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#loadguirec",children:"loadGuiRec"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#loadmapdata",children:"loadMapData"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#loadpresets",children:"loadPresets"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#loadprofiles",children:"loadProfiles"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#loadprofileset",children:"loadProfileSet"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#loadtraits",children:"loadTraits"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#makechangescreenclosure",children:"makeChangeScreenClosure"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#makeplaysampleclosure",children:"makePlaySampleClosure"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#maketogglecustominputcontextclosure",children:"makeToggleCustomInputContextClosure"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#mouseevent",children:"mouseEvent"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#new",children:"new"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#notifycontrols",children:"notifyControls"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onmenuinput",children:"onMenuInput"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onreleaseinput",children:"onReleaseInput"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onreleasemovement",children:"onReleaseMovement"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#registerguielement",children:"registerGuiElement"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#registerguielementprocfunction",children:"registerGuiElementProcFunction"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#registermenuinput",children:"registerMenuInput"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#resolveframereference",children:"resolveFrameReference"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#setclient",children:"setClient"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#setcurrentmission",children:"setCurrentMission"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#setserver",children:"setServer"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#showdialog",children:"showDialog"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#showgui",children:"showGui"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#togglecustominputcontext",children:"toggleCustomInputContext"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#touchevent",children:"touchEvent"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#unloadmapdata",children:"unloadMapData"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#update",children:"update"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"addframe",children:"addFrame"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Add the instance of a specific reusable GUI frame."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"addFrame()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"frameController"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"frameRootElement"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui:addFrame(frameController, frameRootElement)\n    -- TODO:switch to class keys like screens\n    self.frames[frameController.name] = frameRootElement\n\n    frameController:setChangeScreenCallback( self.changeScreenClosure)\n    frameController:setInputContextCallback( self.toggleCustomInputContextClosure)\n    frameController:setPlaySampleCallback( self.playSampleClosure)\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"addscreen",children:"addScreen"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Add the instance of a specific GUI screen."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"addScreen()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"screenClass"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"screenInstance"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"screenRootElement"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui:addScreen(screenClass, screenInstance, screenRootElement)\n    self.screens[screenClass] = screenRootElement\n    self.screenControllers[screenClass] = screenInstance\n\n    -- TODO:use the same pattern for dialog calling from screens\n        screenInstance:setChangeScreenCallback( self.changeScreenClosure)\n        screenInstance:setInputContextCallback( self.toggleCustomInputContextClosure)\n        screenInstance:setPlaySampleCallback( self.playSampleClosure)\n    end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"assignplaysamplecallback",children:"assignPlaySampleCallback"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Assign the play sample closure to a GUI element which has the PlaySampleMixin included."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"assignPlaySampleCallback(table guiElement)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"table"}),(0,i.jsx)(n.th,{children:"guiElement"}),(0,i.jsx)(n.th,{children:"GuiElement instance"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"table"}),(0,i.jsx)(n.th,{children:"The"}),(0,i.jsx)(n.th,{children:"GuiElement instance given in the guiElement parameter"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui:assignPlaySampleCallback(guiElement)\n    if guiElement:hasIncluded( PlaySampleMixin ) then\n        guiElement:setPlaySampleCallback( self.playSampleClosure)\n    end\n\n    return guiElement\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"changescreen",children:"changeScreen"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Change the currently displayed screen."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"changeScreen(table? sourceScreen, table? screenClass, table? returnScreenClass)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"table?"}),(0,i.jsx)(n.th,{children:"sourceScreen"}),(0,i.jsx)(n.th,{children:"Source screen instance"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"table?"}),(0,i.jsx)(n.td,{children:"screenClass"}),(0,i.jsx)(n.td,{children:"Class table of the requested screen to change to or nil to close the GUI"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"table?"}),(0,i.jsx)(n.td,{children:"returnScreenClass"}),(0,i.jsx)(n.td,{children:'[optional] Class table of the screen which will be opened on a "back" action in the new screen.'})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"table?"}),(0,i.jsx)(n.th,{children:"Root"}),(0,i.jsx)(n.th,{children:"GuiElement instance of target screen"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Gui:changeScreen(sourceScreen, screenClass, returnScreenClass)\n    local screenController = self.screenControllers[screenClass]\n    if screenClass ~ = nil and screenController = = nil then\n        Logging.devWarning( "UI \'%s\' not found" , ClassUtil.getClassName(screenClass))\n        return nil\n    end\n\n    self:closeAllDialogs()\n\n    local isMenuOpening = not self:getIsGuiVisible()\n    local screenElement = self.screens[screenClass]\n\n    -- close given source or current gui if no source was given\n        if sourceScreen ~ = nil then\n            sourceScreen:onClose()\n        elseif self.currentGui ~ = nil then\n                self.currentGui:onClose()\n            end\n\n            local screenName = screenElement and screenElement.name or ""\n            self.currentGui = screenElement\n            self.currentGuiName = screenName\n            self.currentListener = screenElement\n\n            if screenElement ~ = nil and isMenuOpening then\n                g_messageCenter:publish(MessageType.GUI_BEFORE_OPEN)\n                self:enterMenuContext()\n            end\n\n            FocusManager:setGui(screenName)\n\n            if screenElement ~ = nil and screenController ~ = nil then\n                screenController:setReturnScreenClass(returnScreenClass or screenController.returnScreenClass) -- it\'s fine if its nil, the value is being checked\n                    screenElement:onOpen()\n\n                    if isMenuOpening then\n                        g_messageCenter:publish(MessageType.GUI_AFTER_OPEN)\n                    end\n                end\n\n                if not self:getIsGuiVisible() then\n                    g_messageCenter:publish(MessageType.GUI_BEFORE_CLOSE)\n                    -- clear input context if GUI is now completely closed(including dialogs)\n                        self:leaveMenuContext()\n                        g_messageCenter:publish(MessageType.GUI_AFTER_CLOSE)\n                    end\n\n                    g_adsSystem:setGroupActive(AdsSystem.OCCLUSION_GROUP.UI, self.currentGui ~ = nil )\n\n                    return screenElement -- required by some screens to transfer state to the next view\n                end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"closealldialogs",children:"closeAllDialogs"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Close all open dialogs."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"closeAllDialogs()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui:closeAllDialogs()\n    for _,v in ipairs( self.dialogs) do\n        self:closeDialog(v)\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"closedialog",children:"closeDialog"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Close a dialog identified by its root GuiElement.\nThis is always called when a dialog is closed, usually by itself."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"closeDialog()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"gui"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui:closeDialog(gui)\n    for k,v in ipairs( self.dialogs) do\n        if v = = gui then\n            v:onClose()\n            table.remove( self.dialogs, k)\n\n            if gui.blurAreaActive then\n                g_depthOfFieldManager:popArea()\n                gui.blurAreaActive = false\n            end\n\n            if self.currentListener = = gui then\n                if # self.dialogs > 0 then\n                    self.currentListener = self.dialogs[# self.dialogs]\n                else\n                        if self.currentGui = = gui then\n                            self.currentListener = nil\n                            self.currentGui = nil\n                        else\n                                self.currentListener = self.currentGui\n                            end\n                        end\n\n                        if self.currentListener ~ = nil then\n                            FocusManager:setGui( self.currentListener.name)\n                            if self.focusElements[ self.currentListener] ~ = nil then\n                                FocusManager:setFocus( self.focusElements[ self.currentListener])\n                                self.focusElements[ self.currentListener] = nil\n                            end\n                        end\n                    end\n\n                    if gui.target.needInput = = nil or gui.target.needInput = = true then\n                        -- revert dialog input context\n                        g_inputBinding:revertContext( false )\n                    end\n\n                    break\n                end\n            end\n\n            if not self:getIsGuiVisible() then\n                -- trigger close screen which dispatches required messages and adjusts input context:\n                self:changeScreen( nil )\n            end\n        end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"closedialogbyname",children:"closeDialogByName"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Close a dialog identified by name."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"closeDialogByName()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"guiName"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui:closeDialogByName(guiName)\n    local gui = self.guis[guiName]\n    if gui ~ = nil then\n        self:closeDialog(gui)\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"draw",children:"draw"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Draw the GUI.\nPropagates draw calls to all active UI elements."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"draw()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Gui:draw()\n    if self.currentGui ~ = nil then\n        -- self.currentGui:draw()\n        if self.currentGui.target ~ = nil then\n            if self.currentGui.target.draw ~ = nil then\n                self.currentGui.target:draw()\n            end\n        end\n    end\n\n    for _,v in pairs( self.dialogs) do\n        -- v:draw()\n        if v.target ~ = nil then\n            v.target:draw()\n        end\n    end\n\n    if g_uiDebugEnabled then\n        local item = FocusManager.currentFocusData.focusElement\n\n        local function getGuiElementName(e, _)\n            if e = = nil then\n                return "none"\n            else\n                    return e.id or e.profile or e.name\n                end\n            end\n\n            setTextAlignment(RenderText.ALIGN_CENTER)\n            renderText( 0.5 , 0.94 , 0.02 , "Focused element: " .. getGuiElementName(item))\n            if item ~ = nil then\n                renderText( 0.5 , 0.92 , 0.02 , "Top element: " .. getGuiElementName( FocusManager:getNextFocusElement(item, FocusManager.TOP)))\n                renderText( 0.5 , 0.90 , 0.02 , "Bottom element: " .. getGuiElementName( FocusManager:getNextFocusElement(item, FocusManager.BOTTOM)))\n                renderText( 0.5 , 0.88 , 0.02 , "Left element: " .. getGuiElementName( FocusManager:getNextFocusElement(item, FocusManager.LEFT)))\n                renderText( 0.5 , 0.86 , 0.02 , "Right element: " .. getGuiElementName( FocusManager:getNextFocusElement(item, FocusManager.RIGHT)))\n\n                local xPixel = 3 * g_pixelSizeX\n                local yPixel = 3 * g_pixelSizeY\n\n                drawFilledRect(item.absPosition[ 1 ] - xPixel, item.absPosition[ 2 ] - yPixel, item.absSize[ 1 ] + 2 * xPixel, yPixel, 1 , 0.5 , 0 , 1 )\n                drawFilledRect(item.absPosition[ 1 ] - xPixel, item.absPosition[ 2 ] + item.absSize[ 2 ], item.absSize[ 1 ] + 2 * xPixel, yPixel, 1 , 0.5 , 0 , 1 )\n                drawFilledRect(item.absPosition[ 1 ] - xPixel, item.absPosition[ 2 ], xPixel, item.absSize[ 2 ], 1 , 0.5 , 0 , 1 )\n                drawFilledRect(item.absPosition[ 1 ] + item.absSize[ 1 ], item.absPosition[ 2 ], xPixel, item.absSize[ 2 ], 1 , 0.5 , 0 , 1 )\n            end\n            setTextAlignment(RenderText.ALIGN_LEFT)\n        end\n    end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"entermenucontext",children:"enterMenuContext"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Enter a new menu input context.\nMenu views which require special input should provide a context name to not collide with the base menu input scheme."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"enterMenuContext(string? contextName)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"string?"}),(0,i.jsx)(n.th,{children:"contextName"}),(0,i.jsx)(n.th,{children:"[optional] Custom menu input context name"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui:enterMenuContext(contextName)\n    g_inputBinding:setContext(contextName or Gui.INPUT_CONTEXT_MENU, true , false )\n    self:registerMenuInput()\n    self.isInputListening = true\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getisdialogvisible",children:"getIsDialogVisible"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Determine if any dialog is visible."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getIsDialogVisible()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui:getIsDialogVisible()\n    return # self.dialogs > 0\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getisguivisible",children:"getIsGuiVisible"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Determine if any menu or dialog is visible."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getIsGuiVisible()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui:getIsGuiVisible()\n    return self.currentGui ~ = nil or self:getIsDialogVisible()\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getisoverlayguivisible",children:"getIsOverlayGuiVisible"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Determine if an overlaid UI view with regular game display is visible, e.g. placement or landscaping."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getIsOverlayGuiVisible()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui:getIsOverlayGuiVisible()\n    return false\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getprofile",children:"getProfile"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Get a UI profile by name."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getProfile()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"profileName"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Gui:getProfile(profileName)\n    if profileName ~ = nil then\n        local specialized = false\n\n        local defaultProfileName = profileName\n        for _, prefix in ipairs(Platform.guiPrefixes) do\n            local customProfileName = prefix .. defaultProfileName\n            if self.profiles[customProfileName] ~ = nil then\n                profileName = customProfileName\n                specialized = true\n            end\n        end\n\n        if not specialized and Platform.isConsole then\n            local consoleProfileName = "console_" .. profileName\n            if self.profiles[consoleProfileName] ~ = nil then\n                profileName = consoleProfileName\n                specialized = true\n            end\n        end\n\n        if not specialized and Platform.isMobile then\n            local consoleProfileName = "mobile_" .. profileName\n            if self.profiles[consoleProfileName] ~ = nil then\n                profileName = consoleProfileName\n                -- specialized = true\n            end\n        end\n    end\n\n    if not profileName or not self.profiles[profileName] then\n        -- only warn if profile name is wrong, undefined is fine\n            if profileName and profileName ~ = "" then\n                Logging.warning( "Could not retrieve GUI profile \'%s\'.Using base reference profile instead." , tostring(profileName))\n            end\n\n            profileName = Gui.GUI_PROFILE_BASE\n        end\n\n        return self.profiles[profileName]\n    end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"getscreeninstancebyclass",children:"getScreenInstanceByClass"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Get a screen controller instance by class for special cases."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getScreenInstanceByClass(table screenClass)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"table"}),(0,i.jsx)(n.th,{children:"screenClass"}),(0,i.jsx)(n.th,{children:"Class table of the requested screen"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"table"}),(0,i.jsx)(n.th,{children:"ScreenElement"}),(0,i.jsx)(n.th,{children:"descendant instance of the given class or nil if no such instance was registered"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui:getScreenInstanceByClass(screenClass)\n    return self.screenControllers[screenClass]\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"haselementinputfocus",children:"hasElementInputFocus"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Determine if a given GuiElement has input focus."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"hasElementInputFocus()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"element"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui:hasElementInputFocus(element)\n    return self.currentListener ~ = nil and self.currentListener.target = = element\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"initguilibrary",children:"initGuiLibrary"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Source in UI modules."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"initGuiLibrary(string baseDir)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"string"}),(0,i.jsx)(n.th,{children:"baseDir"}),(0,i.jsx)(n.th,{children:"Base scripts directory"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Gui.initGuiLibrary(baseDir)\n    source(baseDir .. "/base/GuiProfile.lua" )\n    source(baseDir .. "/base/GuiUtils.lua" )\n    source(baseDir .. "/base/GuiOverlay.lua" )\n\n    source(baseDir .. "/base/GuiDataSource.lua" )\n\n    source(baseDir .. "/base/GuiMixin.lua" )\n    source(baseDir .. "/base/IndexChangeSubjectMixin.lua" )\n    source(baseDir .. "/base/PlaySampleMixin.lua" )\n\n    source(baseDir .. "/base/Tween.lua" )\n    source(baseDir .. "/base/MultiValueTween.lua" )\n    source(baseDir .. "/base/TweenSequence.lua" )\n\n    source(baseDir .. "/elements/GuiElement.lua" )\n    source(baseDir .. "/elements/FrameElement.lua" )\n    source(baseDir .. "/elements/ScreenElement.lua" )\n    source(baseDir .. "/elements/DialogElement.lua" )\n    source(baseDir .. "/elements/BitmapElement.lua" )\n    source(baseDir .. "/elements/ClearElement.lua" )\n    source(baseDir .. "/elements/TextElement.lua" )\n    source(baseDir .. "/elements/ButtonElement.lua" )\n    source(baseDir .. "/elements/ToggleButtonElement.lua" )\n    source(baseDir .. "/elements/ColorPickButtonElement.lua" ) -- not used anywhere\n    source(baseDir .. "/elements/VideoElement.lua" )\n    source(baseDir .. "/elements/SliderElement.lua" )\n    source(baseDir .. "/elements/TextInputElement.lua" )\n    source(baseDir .. "/elements/MultiTextOptionElement.lua" )\n    source(baseDir .. "/elements/OptionSliderElement.lua" )\n    source(baseDir .. "/elements/CheckedOptionElement.lua" )\n    source(baseDir .. "/elements/BinaryOptionElement.lua" )\n    source(baseDir .. "/elements/ListItemElement.lua" )\n    source(baseDir .. "/elements/AnimationElement.lua" )\n    source(baseDir .. "/elements/TimerElement.lua" ) -- not used anywhere\n    source(baseDir .. "/elements/BoxLayoutElement.lua" )\n    source(baseDir .. "/elements/PagingElement.lua" )\n    source(baseDir .. "/elements/TableHeaderElement.lua" )\n    source(baseDir .. "/elements/IngameMapElement.lua" )\n    source(baseDir .. "/elements/IngameMapPreviewElement.lua" )\n    source(baseDir .. "/elements/IndexStateElement.lua" )\n    source(baseDir .. "/elements/FrameReferenceElement.lua" )\n    source(baseDir .. "/elements/RenderElement.lua" )\n    source(baseDir .. "/elements/BreadcrumbsElement.lua" )\n    source(baseDir .. "/elements/ThreePartBitmapElement.lua" )\n    source(baseDir .. "/elements/PictureElement.lua" )\n    source(baseDir .. "/elements/ScrollingLayoutElement.lua" )\n    source(baseDir .. "/elements/MultiOptionElement.lua" )\n    source(baseDir .. "/elements/TextBackdropElement.lua" )\n    source(baseDir .. "/elements/InputGlyphElementUI.lua" )\n    source(baseDir .. "/elements/TerrainLayerElement.lua" )\n    source(baseDir .. "/elements/SmoothListElement.lua" )\n    source(baseDir .. "/elements/DynamicFadedBitmapElement.lua" )\n    source(baseDir .. "/elements/PlatformIconElement.lua" )\n    source(baseDir .. "/elements/OptionToggleElement.lua" )\n    source(baseDir .. "/elements/RoundCornerElement.lua" )\n    source(baseDir .. "/elements/SafeFrameElement.lua" )\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"keyevent",children:"keyEvent"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"GUI key event hook.\nThis is used for GuiElements which need to have direct access to raw key input, such as TextInputElement."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"keyEvent()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"unicode"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"sym"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"modifier"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"isDown"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui:keyEvent(unicode, sym, modifier, isDown)\n    local eventUsed = false\n    if self.currentListener ~ = nil then\n        eventUsed = self.currentListener:keyEvent(unicode, sym, modifier, isDown)\n    end\n\n    if self.currentListener ~ = nil and self.currentListener.target ~ = nil and not eventUsed then\n        if self.currentListener.target.keyEvent ~ = nil then\n            self.currentListener.target:keyEvent(unicode, sym, modifier, isDown, eventUsed)\n        end\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"leavemenucontext",children:"leaveMenuContext"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Leave a menu input context.\nThis wraps the input context setting to check if the menu is actually active and the context should be reverted to\nthe state before entering the menu (or a custom menu input context within the menu)."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"leaveMenuContext()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui:leaveMenuContext()\n    if self.isInputListening then\n        g_inputBinding:revertContext( false )\n        self.isInputListening = self:getIsGuiVisible() -- keep listening if still visible\n        end\n    end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"loadgui",children:"loadGui"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Load a UI screen view's elements from an XML definition."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"loadGui(xmlFilename View, name Screen, controller FrameElement, isFrame? [optional,)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"xmlFilename"}),(0,i.jsx)(n.th,{children:"View"}),(0,i.jsx)(n.th,{children:"definition XML file path, relative to application root."})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"name"}),(0,i.jsx)(n.td,{children:"Screen"}),(0,i.jsx)(n.td,{children:"name"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"controller"}),(0,i.jsx)(n.td,{children:"FrameElement"}),(0,i.jsx)(n.td,{children:"instance which serves as the controller for loaded elements"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"isFrame?"}),(0,i.jsx)(n.td,{children:"[optional,"}),(0,i.jsx)(n.td,{children:"default=false] If true, will interpret the loaded view as a frame to be used in multiple places."})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"isFrame?"}),(0,i.jsx)(n.th,{children:"GuiElement"}),(0,i.jsx)(n.th,{children:"instance of loaded view or nil if the definition XML file could not be loaded."})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Gui:loadGui(xmlFilename, name, controller, isFrame)\n    local xmlFile = loadXMLFile( "Temp" , xmlFilename)\n\n    local gui = nil\n    if xmlFile ~ = nil and xmlFile ~ = 0 or self.currentlyReloading then\n        self:loadProfileSet(xmlFile, "GUI.GuiProfiles" , self.presets)\n\n        FocusManager:setGui(name)\n\n        gui = GuiElement.new(controller)\n        gui.name = name\n        gui.xmlFilename = xmlFilename\n        controller.name = name\n        controller.xmlFilename = xmlFilename\n\n        gui:loadFromXML(xmlFile, "GUI" )\n\n        -- if the gui has a safe frame, we adjust the size and position of the gui.because other gui elements adjust their size according to their parents upon loading,\n            -- other elements should automatically inherit these changes, if not, check those elements anchors\n                if g_screenWidth ~ = g_unsafeScreenWidth or g_screenHeight ~ = g_unsafeScreenHeight then\n                    gui:setPosition(g_safeFrameScreenOffsetX * g_pixelSizeX, g_safeFrameScreenOffsetY * g_pixelSizeY)\n                    gui:setSize(g_screenWidth / g_unsafeScreenWidth, g_screenHeight / g_unsafeScreenHeight, true )\n                end\n\n                if isFrame then\n                    controller.name = gui.name\n                    gui.isFrame = true\n                end\n\n                self:loadGuiRec(xmlFile, "GUI" , gui, controller)\n\n                controller:addElement(gui)\n\n                if not isFrame then -- frames must only be scaled as part of screens, do not scale them on loading\n                    controller:updateAbsolutePosition()\n                end\n\n                controller:exposeControlsAsFields(name)\n\n                controller:onGuiSetupFinished()\n                -- call onCreate of configuration root node --\x3e targets onCreate on view\n                gui:raiseCallback( "onCreateCallback" , gui, gui.onCreateArgs)\n\n                if isFrame then\n                    self:addFrame(controller, gui)\n                else\n                        self.guis[name] = gui\n                        self.nameScreenTypes[name] = controller:class() -- TEMP, until showGui is replaced\n                        -- store screen by its class for symbolic access\n                            self:addScreen(controller:class(), controller, gui)\n                        end\n\n                        delete(xmlFile)\n                    else\n                            Logging.error( "Could not open gui-config \'%s\'!" , xmlFilename)\n                            controller:delete()\n                        end\n\n                        return gui\n                    end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"loadguirec",children:"loadGuiRec"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Recursively load and build a UI configuration."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"loadGuiRec(xmlFile Opened, xmlNodePath Current, parentGuiElement Current, target Target)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"xmlFile"}),(0,i.jsx)(n.th,{children:"Opened"}),(0,i.jsx)(n.th,{children:"GUI configuration XML file"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"xmlNodePath"}),(0,i.jsx)(n.td,{children:"Current"}),(0,i.jsx)(n.td,{children:"XML node path"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"parentGuiElement"}),(0,i.jsx)(n.td,{children:"Current"}),(0,i.jsx)(n.td,{children:"parent GuiElement"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"target"}),(0,i.jsx)(n.td,{children:"Target"}),(0,i.jsx)(n.td,{children:"of newly instantiated elements"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Gui:loadGuiRec(xmlFile, xmlNodePath, parentGuiElement, target)\n    local numElements = getXMLNumOfChildren(xmlFile, xmlNodePath)\n\n    for index = 0 , numElements - 1 do\n        local typeName = getXMLElementName(xmlFile, string.format( "%s.*(%i)" , xmlNodePath, index))\n        local currentXmlPath = string.format( "%s.*(%i)" , xmlNodePath, index)\n\n        --we use uppercase names in mappings to avoid problems with camel case\n        local upperCaseTypeName = string.upper(typeName)\n\n        if upperCaseTypeName = = Gui.GUI_PROFILE_TYPE_NAME then\n            continue\n        end\n\n        -- instantiate element and load attribute values\n        local newGuiElement\n        local elementClass = Gui.CONFIGURATION_CLASS_MAPPING[upperCaseTypeName]\n        if elementClass then -- instantiate mapped class\n            newGuiElement = elementClass.new(target)\n        else\n                Logging.xmlWarning(xmlFile, string.format( "Could not find type name %s in registered GUI element classes" , typeName))\n                continue\n            end\n            newGuiElement.typeName = typeName\n\n            parentGuiElement:addElement(newGuiElement)\n            newGuiElement:loadFromXML(xmlFile, currentXmlPath)\n\n            -- run any processing resolution functions for specific types:\n                local processingFunction = Gui.ELEMENT_PROCESSING_FUNCTIONS[upperCaseTypeName]\n                if processingFunction then\n                    newGuiElement = processingFunction( self , newGuiElement)\n                end\n\n                -- recurse on children\n                self:loadGuiRec(xmlFile, currentXmlPath, newGuiElement, target)\n\n                -- raise callback after all child nodes have been processed\n                newGuiElement:raiseCallback( "onCreateCallback" , newGuiElement, newGuiElement.onCreateArgs)\n            end\n        end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"loadmapdata",children:"loadMapData"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Let the GUI (and its components) process map data when it's loaded."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"loadMapData(integer mapXmlFile, , )"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"integer"}),(0,i.jsx)(n.th,{children:"mapXmlFile"}),(0,i.jsx)(n.th,{children:"Map configuration XML file handle, do not close, will be handled by caller."})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"missionInfo"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"baseDirectory"}),(0,i.jsx)(n.td,{})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui:loadMapData(mapXmlFile, missionInfo, baseDirectory)\n    if not Platform.isMobile then\n        self.screenControllers[ShopConfigScreen]:loadMapData(mapXmlFile, missionInfo, baseDirectory)\n        self.screenControllers[LicensePlateDialog]:loadMapData(mapXmlFile, missionInfo, baseDirectory)\n        self.screenControllers[ ColorPickerDialog ]:loadMapData(mapXmlFile, missionInfo, baseDirectory)\n    end\n\n    if Platform.hasWardrobe then\n        self.screenControllers[ WardrobeScreen ]:loadMapData(mapXmlFile, missionInfo, baseDirectory)\n    end\n\n    --TODO change to for loop an check if loadMapData func exists for controller in next major release.Cannot be changed now as it would break mods\n    end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"loadpresets",children:"loadPresets"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"loadPresets()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"xmlFile"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"rootKey"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Gui:loadPresets(xmlFile, rootKey)\n    local presets = { }\n\n    local i = 0\n    while true do\n        local key = string.format( "%s.Preset(%d)" , rootKey, i)\n        if not hasXMLProperty(xmlFile, key) then\n            break\n        end\n\n        local name = getXMLString(xmlFile, key .. "#name" )\n        local value = getXMLString(xmlFile, key .. "#value" )\n        if name ~ = nil and value ~ = nil then\n            if value:startsWith( "$preset_" ) then\n                local preset = string.gsub(value, "$preset_" , "" )\n                if presets[preset] ~ = nil then\n                    value = presets[preset]\n                else\n                        Logging.devWarning( "Preset \'%s\' is not defined in Preset!" , preset)\n                    end\n                end\n\n                if self.presets[name] = = nil or self.currentlyReloading then\n                    presets[name] = value\n                    self.presets[name] = value\n                else\n                        Logging.xmlDevError(xmlFile, "GUI-Preset name \'%s\' already defined!" , name)\n                    end\n                end\n\n                i = i + 1\n            end\n\n            return presets\n        end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"loadprofiles",children:"loadProfiles"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Load UI profile data from XML."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"loadProfiles(xmlFilename UI)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"xmlFilename"}),(0,i.jsx)(n.th,{children:"UI"}),(0,i.jsx)(n.th,{children:"profiles definition XML file path, relative to application root."})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Gui:loadProfiles(xmlFilename)\n    local xmlFile = loadXMLFile( "Temp" , xmlFilename)\n\n    if xmlFile ~ = nil and xmlFile ~ = 0 then\n        self:loadPresets(xmlFile, "GuiProfiles.Presets" )\n        self:loadTraits(xmlFile, "GuiProfiles.Traits" , self.presets)\n        self:loadProfileSet(xmlFile, "GuiProfiles" , self.presets)\n\n        local i = 0\n        while true do\n            local key = string.format( "GuiProfiles.Category(%d)" , i)\n            if not hasXMLProperty(xmlFile, key) then\n                break\n            end\n\n            local categoryName = getXMLString(xmlFile, key .. "#name" )\n\n            self:loadProfileSet(xmlFile, key, self.presets, categoryName)\n\n            i = i + 1\n        end\n\n        delete(xmlFile)\n\n        return true\n    end\n\n    Logging.error( "Could not open guiProfile-config \'%s\'!" , xmlFilename)\n\n    return false\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"loadprofileset",children:"loadProfileSet"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"loadProfileSet()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"xmlFile"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"rootKey"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"presets"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"categoryName"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Gui:loadProfileSet(xmlFile, rootKey, presets, categoryName)\n    local i = 0\n    while true do\n        local profile = GuiProfile.new( self.profiles, self.traits)\n        local key = rootKey .. ".Profile(" .. i .. ")"\n        if not hasXMLProperty(xmlFile, key) then\n            break\n        end\n\n        profile:loadFromXML(xmlFile, key, presets, false )\n\n        if self.profiles[profile.name] = = nil or self.currentlyReloading then\n            profile.category = categoryName -- for debugging\n                self.profiles[profile.name] = profile\n\n                -- Load variants\n                local j = 0\n                while true do\n                    local k = rootKey .. ".Profile(" .. i .. ").Variant(" .. j .. ")"\n                    if not hasXMLProperty(xmlFile, k) then\n                        break\n                    end\n\n                    local variantName = getXMLString(xmlFile, k .. "#name" )\n                    if variantName ~ = nil then\n                        local variantProfile = GuiProfile.new( self.profiles, self.traits)\n                        if not hasXMLProperty(xmlFile, k) then\n                            break\n                        end\n\n                        variantProfile:loadFromXML(xmlFile, k, presets, false , true )\n\n                        if variantProfile.parent = = nil then\n                            variantProfile.parent = profile.name\n                        end\n\n                        variantProfile.category = categoryName\n                        variantProfile.name = variantName .. "_" .. profile.name\n\n                        if self.profiles[variantProfile.name] = = nil or self.currentlyReloading then\n                            self.profiles[variantProfile.name] = variantProfile\n                        else\n                                Logging.xmlDevError(xmlFile, "GUI-Profile name \'%s\' already defined!" , variantProfile.name)\n                            end\n                        end\n\n                        j = j + 1\n                    end\n                else\n                        Logging.xmlDevError(xmlFile, "GUI-Profile name \'%s\' already defined!" , profile.name)\n                    end\n\n                    i = i + 1\n                end\n            end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"loadtraits",children:"loadTraits"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"loadTraits()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"xmlFile"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"rootKey"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"presets"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Gui:loadTraits(xmlFile, rootKey, presets)\n    local i = 0\n    while true do\n        local trait = GuiProfile.new( self.profiles, self.traits)\n        local key = rootKey .. ".Trait(" .. i .. ")"\n        if not hasXMLProperty(xmlFile, key) then\n            break\n        end\n\n        trait:loadFromXML(xmlFile, key, presets, true )\n\n        if self.traits[trait.name] = = nil or self.currentlyReloading then\n            self.traits[trait.name] = trait\n        else\n                Logging.xmlDevError(xmlFile, "GUI-Trait name \'%s\' already defined!" , trait.name)\n            end\n\n            i = i + 1\n        end\n    end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"makechangescreenclosure",children:"makeChangeScreenClosure"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Make a change screen callback function which encloses the Gui self reference.\nThis avoids passing the reference around as a parameter or global reference."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"makeChangeScreenClosure()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui:makeChangeScreenClosure()\n    return function (source, screenClass, returnScreenClass)\n        self:changeScreen(source, screenClass, returnScreenClass)\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"makeplaysampleclosure",children:"makePlaySampleClosure"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Make a play sample function which encloses the Gui self reference."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"makePlaySampleClosure()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui:makePlaySampleClosure()\n    return function (sampleName)\n        self.guiSoundPlayer:playSample(sampleName)\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"maketogglecustominputcontextclosure",children:"makeToggleCustomInputContextClosure"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Make a toggle custom input context function which encloses the Gui self reference."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"makeToggleCustomInputContextClosure()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui:makeToggleCustomInputContextClosure()\n    return function (isActive, contextName)\n        self:toggleCustomInputContext(isActive, contextName)\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"mouseevent",children:"mouseEvent"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"GUI mouse event hook.\nThis is used primarily for mouse location checks, as button inputs are handled by InputBinding."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"mouseEvent()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"posX"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"posY"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"isDown"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"isUp"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"button"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui:mouseEvent(posX, posY, isDown, isUp, button)\n    local eventUsed = false\n\n    if self.currentListener ~ = nil then\n        eventUsed = self.currentListener:mouseEvent(posX, posY, isDown, isUp, button)\n    end\n\n    if not eventUsed and self.currentListener ~ = nil and self.currentListener.target ~ = nil then\n        if self.currentListener.target.mouseEvent ~ = nil then\n            self.currentListener.target:mouseEvent(posX, posY, isDown, isUp, button)\n        end\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"new",children:"new"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"new()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"self"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui.new()\n    local self = setmetatable( { } , Gui _mt)\n\n    -- input manager reference for event registration\n        self.guiSoundPlayer = GuiSoundPlayer.new(g_soundManager)\n        FocusManager:setSoundPlayer( self.guiSoundPlayer)\n\n        self.screens = { } -- screen class -> screen root element\n        self.screenControllers = { } -- screen class -> screen instance\n        self.dialogs = { }\n        self.profiles = { }\n        self.traits = { }\n        self.presets = { }\n        self.focusElements = { }\n        self.guis = { }\n        self.nameScreenTypes = { }\n        self.currentGuiName = \"\"\n\n        self.currentlyReloading = false\n\n        -- registered frame elements which can be referenced to be displayed in multiple places / on multiple screen views\n        self.frames = { } -- frame name -> frame controller element\n\n        -- state flag to check if the GUI input context is active(context can be multiple levels deep)\n            self.isInputListening = false\n            -- stores event IDs of GUI button/key actions(no movement)\n            self.actionEventIds = { }\n            -- current frame's input target, all inputs of one frame go to this target\n            self.frameInputTarget = nil\n            -- flag for handling of current frame's input, avoids reacting to multiple events per frame for double bindings(e.g.ESC on PC)\n                self.frameInputHandled = false\n\n                self.changeScreenClosure = self:makeChangeScreenClosure()\n                self.toggleCustomInputContextClosure = self:makeToggleCustomInputContextClosure()\n                self.playSampleClosure = self:makePlaySampleClosure()\n\n                g_adsSystem:clearGroupRegion(AdsSystem.OCCLUSION_GROUP.UI)\n                g_adsSystem:addGroupRegion(AdsSystem.OCCLUSION_GROUP.UI, 0 , 0 , 1 , 1 )\n                g_adsSystem:setGroupActive(AdsSystem.OCCLUSION_GROUP.UI, false )\n\n                return self\n            end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"notifycontrols",children:"notifyControls"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Notify controls of an action input with a value."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"notifyControls(action Action, value Action)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"action"}),(0,i.jsx)(n.th,{children:"Action"}),(0,i.jsx)(n.th,{children:"name as defined by loaded actions, see also scripts/input/InputAction.lua"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"value"}),(0,i.jsx)(n.td,{children:"Action"}),(0,i.jsx)(n.td,{children:"value [-1, 1]"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"value"}),(0,i.jsx)(n.th,{children:"if"}),(0,i.jsx)(n.th,{children:"any control has consumed the action event"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui:notifyControls(action, value)\n    local eventUsed = false\n\n    -- Ensure that only one component receives input per frame, otherwise we risk some unwanted input handling chains\n    -- when GUI current listeners(or similar) change.\n    if self.frameInputTarget = = nil then\n        self.frameInputTarget = self.currentListener\n    end\n\n    -- check with focus manager if it currently blocks this input\n        local locked = FocusManager:isFocusInputLocked(action, value)\n\n        if not locked then\n            -- try notifying current listener element or its target(usually either of these is a ScreenElement)\n            if not eventUsed and self.frameInputTarget ~ = nil then\n                eventUsed = self.frameInputTarget:inputEvent(action, value)\n            end\n\n            if not eventUsed and self.frameInputTarget ~ = nil and self.frameInputTarget.target ~ = nil then\n                eventUsed = self.frameInputTarget.target:inputEvent(action, value)\n            end\n\n            -- send input to the currently focused element if it's active\n                local focusedElement = FocusManager:getFocusedElement()\n                if not eventUsed and focusedElement ~ = nil and focusedElement:getIsActive() then\n                    eventUsed = focusedElement:inputEvent(action, value)\n                end\n\n                -- always notify the focus manager, but pass in event usage information\n                if not eventUsed then\n                    eventUsed = FocusManager:inputEvent(action, value, eventUsed)\n                end\n            end\n\n            -- lock down input for the current frame if we have reacted on the current input action\n                self.frameInputHandled = eventUsed\n            end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"onmenuinput",children:"onMenuInput"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Event callback for menu input."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onMenuInput()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"actionName"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"inputValue"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui:onMenuInput(actionName, inputValue)\n    if not self.frameInputHandled and self.isInputListening then\n        self:notifyControls(actionName, inputValue)\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"onreleaseinput",children:"onReleaseInput"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Event callback for released movement menu input."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onReleaseInput()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"action"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui:onReleaseInput(action)\n    if not self.frameInputHandled and self.isInputListening then\n        -- check with focus manager if it currently blocks this input\n            local locked = FocusManager:isFocusInputLocked(action)\n\n            if not locked then\n                -- try notifying current listener element or its target(usually either of these is a ScreenElement)\n                if self.frameInputTarget ~ = nil then\n                    self.frameInputTarget:inputReleaseEvent(action)\n                end\n\n                if self.frameInputTarget ~ = nil and self.frameInputTarget.target ~ = nil then\n                    self.frameInputTarget.target:inputReleaseEvent(action)\n                end\n\n                -- send input to the currently focused element if it's active\n                    local focusedElement = FocusManager:getFocusedElement()\n                    if focusedElement ~ = nil and focusedElement:getIsActive() then\n                        focusedElement:inputReleaseEvent(action)\n                    end\n                end\n            end\n        end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"onreleasemovement",children:"onReleaseMovement"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Event callback for released movement menu input."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onReleaseMovement()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"action"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui:onReleaseMovement(action)\n    self:onReleaseInput(action)\n\n    FocusManager:releaseMovementFocusInput(action)\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"registerguielement",children:"registerGuiElement"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Adds a class to the Gui.CONFIGURATION_CLASS_MAPPING."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"registerGuiElement(string name, table class)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"string"}),(0,i.jsx)(n.th,{children:"name"}),(0,i.jsx)(n.th,{children:"name of the class"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"table"}),(0,i.jsx)(n.td,{children:"class"}),(0,i.jsx)(n.td,{children:"table containing all class functions, tables, etc"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui.registerGuiElement(name, class)\n    name = string.upper(name)\n    Gui.CONFIGURATION_CLASS_MAPPING[name] = class\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"registerguielementprocfunction",children:"registerGuiElementProcFunction"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Adds a class to the Gui.CONFIGURATION_CLASS_MAPPING."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"registerGuiElementProcFunction(string name, table class)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"string"}),(0,i.jsx)(n.th,{children:"name"}),(0,i.jsx)(n.th,{children:"name of the class"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"table"}),(0,i.jsx)(n.td,{children:"class"}),(0,i.jsx)(n.td,{children:"table containing all class functions, tables, etc"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui.registerGuiElementProcFunction(name, procFunction)\n    name = string.upper(name)\n    Gui.ELEMENT_PROCESSING_FUNCTIONS[name] = procFunction\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"registermenuinput",children:"registerMenuInput"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Register menu input."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"registerMenuInput()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Gui:registerMenuInput()\n    self.actionEventIds = { }\n\n    -- register the menu input event for all menu navigation actions on button up\n        for _, actionName in ipairs( Gui.NAV_ACTIONS) do -- use ipairs to enforce action order\n            local _, eventId = g_inputBinding:registerActionEvent(actionName, self , self.onMenuInput, false , true , false , true )\n            g_inputBinding:setActionEventTextVisibility(eventId, false )\n\n            if self.actionEventIds[actionName] = = nil then\n                self.actionEventIds[actionName] = { }\n            end\n            table.addElement( self.actionEventIds[actionName], eventId)\n\n            if actionName = = InputAction.MENU_PAGE_PREV or actionName = = InputAction.MENU_PAGE_NEXT then\n                -- react to movement input stops("up" state), releases locks on focus manager input:\n                _, eventId = g_inputBinding:registerActionEvent(actionName, self , self.onReleaseInput, true , false , false , true )\n                g_inputBinding:setActionEventTextVisibility(eventId, false )\n                table.addElement( self.actionEventIds[actionName], eventId)\n            end\n        end\n\n        -- register input events for navigation movement actions for each input change\n            for _, actionName in pairs( Gui.NAV_AXES) do\n                -- react to any axis value changes:\n                local _, eventId = g_inputBinding:registerActionEvent(actionName, self , self.onMenuInput, false , true , true , true )\n                g_inputBinding:setActionEventTextVisibility(eventId, false )\n\n                if self.actionEventIds[actionName] = = nil then\n                    self.actionEventIds[actionName] = { }\n                end\n                table.addElement( self.actionEventIds[actionName], eventId)\n\n                -- react to movement input stops("up" state), releases locks on focus manager input:\n                _, eventId = g_inputBinding:registerActionEvent(actionName, self , self.onReleaseMovement, true , false , false , true )\n                g_inputBinding:setActionEventTextVisibility(eventId, false )\n                table.addElement( self.actionEventIds[actionName], eventId)\n            end\n\n            self.isInputListening = true\n        end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"resolveframereference",children:"resolveFrameReference"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Tries resolving a frame reference.\nIf no frame has been loaded with the name given by the reference, then the reference element itself is returned.\nOtherwise, the registered frame is cloned and returned."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"resolveFrameReference(self Gui, frameRefElement FrameReferenceElement)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"self"}),(0,i.jsx)(n.th,{children:"Gui"}),(0,i.jsx)(n.th,{children:"instance"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"frameRefElement"}),(0,i.jsx)(n.td,{children:"FrameReferenceElement"}),(0,i.jsx)(n.td,{children:"instance to resolve"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"frameRefElement"}),(0,i.jsx)(n.th,{children:"FrameElement"}),(0,i.jsx)(n.th,{children:"instance or frameRefElement if resolution failed."})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Gui:resolveFrameReference(frameRefElement)\n    local refName = frameRefElement.referencedFrameName or ""\n    local frame = self.frames[refName]\n\n    if frame ~ = nil then\n        local frameName = frameRefElement.name or refName\n        -- "frame" is the artificial root GuiElement instance holding the frame,\n        -- its parent is the controller FrameElement instance which needs to be cloned\n        local frameController = frame.parent\n        -- clone the controller, including element IDs and suppressing the onCreate callback for all elements\n            local frameParent = frameRefElement.parent\n            local controllerClone = frameController:clone(frameParent, true , true , true )\n            controllerClone.name = frameName\n            FocusManager:setGui(frameName) -- set focus data context\n\n            -- re-size and re-orient frame controller and its root to fit the new parent element(required for resolution stability)\n                controllerClone.positionOrigin = frameParent.positionOrigin\n                controllerClone.screenAlign = frameParent.screenAlign\n                controllerClone:setSize( unpack(frameParent.size))\n                local cloneRoot = controllerClone:getRootElement()\n                cloneRoot.positionOrigin = frameParent.positionOrigin\n                cloneRoot.screenAlign = frameParent.screenAlign\n                cloneRoot:setSize( unpack(frameParent.size))\n\n                controllerClone:setTarget(controllerClone, frameController, true )\n\n                local frameId = frameRefElement.id\n                controllerClone.id = frameId -- swap ID\n\n                if frameRefElement.target then\n                    -- swap frame reference field value for clone frame controller\n                        frameRefElement.target[frameId] = controllerClone\n                    end\n\n                    -- add cloned frame elements to focus system, would not support navigation otherwise\n                    FocusManager:loadElementFromCustomValues(controllerClone, nil , nil , false , false )\n\n                    -- safely discard reference element\n                    frameRefElement:unlinkElement()\n                    frameRefElement:delete()\n\n                    return controllerClone\n                else\n                        return frameRefElement\n                    end\n                end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"setclient",children:"setClient"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Set the network client reference for GUI screens."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"setClient()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"client"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui:setClient(client)\n    for _, controller in pairs( self.screenControllers) do\n        if controller.setClient ~ = nil then\n            controller:setClient(client)\n        end\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"setcurrentmission",children:"setCurrentMission"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Set the current mission reference for GUI screens."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"setCurrentMission()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"currentMission"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui:setCurrentMission(currentMission)\n    for _, controller in pairs( self.screenControllers) do\n        if controller.setCurrentMission ~ = nil then\n            controller:setCurrentMission(currentMission)\n        end\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"setserver",children:"setServer"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Set the network client reference for GUI screens."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"setServer()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"server"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui:setServer(server)\n    for _, controller in pairs( self.screenControllers) do\n        if controller.setServer ~ = nil then\n            controller:setServer(server)\n        end\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"showdialog",children:"showDialog"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Display a dialog identified by name."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"showDialog()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"guiName"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"closeAllOthers"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"GuiElement"}),(0,i.jsx)(n.th,{children:"of dialog or nil if the name did not match any known dialog."})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Gui:showDialog(guiName, closeAllOthers)\n    local gui = self.guis[guiName]\n    self.currentDialogName = guiName\n    self.currentDialog = guiName\n\n    if gui ~ = nil then\n        if closeAllOthers then\n            local list = self.dialogs\n            for _,v in ipairs(list) do\n                if v ~ = gui then\n                    self:closeDialog(v)\n                end\n            end\n        end\n\n        local oldListener = self.currentListener\n        if self.currentListener = = gui then\n            return gui\n        end\n\n        if self.currentListener ~ = nil then\n            self.focusElements[ self.currentListener] = FocusManager:getFocusedElement()\n        end\n\n        if gui.target.needInput = = nil or gui.target.needInput = = true then\n            if not self:getIsGuiVisible() then\n                self:enterMenuContext()\n            end\n\n            -- set distinct dialog context which can be reverted on dialog closing if we are in menu already\n                self:enterMenuContext( Gui.INPUT_CONTEXT_DIALOG .. "_" .. tostring(guiName))\n            end\n\n            FocusManager:setGui(guiName)\n            table.insert( self.dialogs, gui)\n            gui:onOpen()\n            self.currentListener = gui\n\n            g_messageCenter:publish(MessageType.GUI_DIALOG_OPENED, guiName, oldListener ~ = nil and oldListener ~ = gui)\n\n            gui.blurAreaActive = false\n            if gui.target.getBlurArea ~ = nil then\n                local x, y, width, height = gui.target:getBlurArea()\n                if x ~ = nil then\n                    gui.blurAreaActive = true\n                    g_depthOfFieldManager:pushArea(x, y, width, height)\n                end\n            end\n        end\n\n        return gui\n    end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"showgui",children:"showGui"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Display and return a screen identified by name."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"showGui()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"guiName"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"GuiElement"}),(0,i.jsx)(n.th,{children:"of screen or nil if the name did not match any known screen."})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Gui:showGui(guiName)\n    -- TODO:replace all calls to this with Gui:changeScreen\n    if guiName = = nil then\n        guiName = ""\n    end\n\n    return self:changeScreen( self.guis[ self.currentGui], self.nameScreenTypes[guiName])\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"togglecustominputcontext",children:"toggleCustomInputContext"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Toggle a custom menu input context for one of the managed frames or screens."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"toggleCustomInputContext()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"isActive"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"contextName"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui:toggleCustomInputContext(isActive, contextName)\n    if isActive then\n        self:enterMenuContext(contextName)\n    else\n            self:leaveMenuContext()\n        end\n    end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"touchevent",children:"touchEvent"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"GUI touch event hook.\nThis is used primarily for touch location checks, as button inputs are handled by InputBinding."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"touchEvent()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"posX"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"posY"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"isDown"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"isUp"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"touchId"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui:touchEvent(posX, posY, isDown, isUp, touchId)\n    local eventUsed = false\n\n    if self.currentListener ~ = nil and self.currentListener.touchEvent ~ = nil then\n        eventUsed = self.currentListener:touchEvent(posX, posY, isDown, isUp, touchId)\n    end\n\n    if not eventUsed and self.currentListener ~ = nil and self.currentListener.target ~ = nil then\n        if self.currentListener.target.touchEvent ~ = nil then\n            self.currentListener.target:touchEvent(posX, posY, isDown, isUp, touchId)\n        end\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"unloadmapdata",children:"unloadMapData"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"unloadMapData()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui:unloadMapData()\n    self.screenControllers[ InGameMenu ]:unloadMapData()\n    self.screenControllers[ShopConfigScreen]:unloadMapData()\n    self.screenControllers[LicensePlateDialog]:unloadMapData()\n    self.screenControllers[ ColorPickerDialog ]:unloadMapData()\n\n    if Platform.hasWardrobe then\n        self.screenControllers[ WardrobeScreen ]:unloadMapData()\n    end\n\n    --TODO change to for loop an check if unloadMapData func exists for controller in next major release.Cannot be changed now as it would break mods\n    end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"update",children:"update"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Update the GUI.\nPropagates update to all active UI elements."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"update()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"dt"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Gui:update(dt)\n    for _,v in pairs( self.dialogs) do\n        -- v:update(dt)\n        if v.target ~ = nil then\n            v.target:update(dt)\n        end\n    end\n\n    local currentGui = self.currentGui\n    if currentGui ~ = nil then\n        if currentGui.target ~ = nil and currentGui.target.preUpdate ~ = nil then\n            currentGui.target:preUpdate(dt)\n        end\n\n        if currentGui = = self.currentGui then -- self.currentGui can change during update\n            -- currentGui:update(dt)\n            if currentGui = = self.currentGui then -- self.currentGui can change during update\n                if currentGui.target ~ = nil and currentGui.target.update ~ = nil then\n                    currentGui.target:update(dt)\n                end\n            end\n        end\n    end\n\n    -- reset input fields for next frame\n        self.frameInputTarget = nil\n        self.frameInputHandled = false\n    end\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);