"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[36208],{25489(n,e,l){l.r(e),l.d(e,{assets:()=>t,contentTitle:()=>i,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"script/Economy/FarmlandManager","title":"FarmlandManager","description":"FarmlandManager","source":"@site/../docs/script/Economy/FarmlandManager.md","sourceDirName":"script/Economy","slug":"/script/Economy/FarmlandManager","permalink":"/FS25-Community-LUADOC/script/Economy/FarmlandManager","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Farmland","permalink":"/FS25-Community-LUADOC/script/Economy/Farmland"},"next":{"title":"IngameMapPreviewElement","permalink":"/FS25-Community-LUADOC/script/Elements/IngameMapPreviewElement"}}');var a=l(74848),d=l(28453);const s={},i=void 0,t={},o=[{value:"FarmlandManager",id:"farmlandmanager",level:2},{value:"consoleCommandBuyAllFarmlands",id:"consolecommandbuyallfarmlands",level:3},{value:"consoleCommandBuyFarmland",id:"consolecommandbuyfarmland",level:3},{value:"consoleCommandSellAllFarmlands",id:"consolecommandsellallfarmlands",level:3},{value:"consoleCommandSellFarmland",id:"consolecommandsellfarmland",level:3},{value:"consoleCommandShowFarmlands",id:"consolecommandshowfarmlands",level:3},{value:"convertWorldToLocalPosition",id:"convertworldtolocalposition",level:3},{value:"delete",id:"delete",level:3},{value:"farmDestroyed",id:"farmdestroyed",level:3},{value:"getCanAccessLandAtWorldPosition",id:"getcanaccesslandatworldposition",level:3},{value:"getFarmlandAtWorldPosition",id:"getfarmlandatworldposition",level:3},{value:"getFarmlandById",id:"getfarmlandbyid",level:3},{value:"getFarmlandIdAtWorldPosition",id:"getfarmlandidatworldposition",level:3},{value:"getFarmlandOwner",id:"getfarmlandowner",level:3},{value:"getFarmlands",id:"getfarmlands",level:3},{value:"getIsOwnedByFarmAlongLine",id:"getisownedbyfarmalongline",level:3},{value:"getIsOwnedByFarmAtWorldPosition",id:"getisownedbyfarmatworldposition",level:3},{value:"getIsValidFarmlandId",id:"getisvalidfarmlandid",level:3},{value:"getLocalMap",id:"getlocalmap",level:3},{value:"getNumOwnedFarmlandIdsByFarmId",id:"getnumownedfarmlandidsbyfarmid",level:3},{value:"getOwnedFarmlandIdsByFarmId",id:"getownedfarmlandidsbyfarmid",level:3},{value:"getOwnerIdAtWorldPosition",id:"getowneridatworldposition",level:3},{value:"getPricePerHa",id:"getpriceperha",level:3},{value:"initDataStructures",id:"initdatastructures",level:3},{value:"loadFarmlandData",id:"loadfarmlanddata",level:3},{value:"loadFromXMLFile",id:"loadfromxmlfile",level:3},{value:"loadMapData",id:"loadmapdata",level:3},{value:"new",id:"new",level:3},{value:"saveToXMLFile",id:"savetoxmlfile",level:3},{value:"setLandOwnership",id:"setlandownership",level:3},{value:"unloadMapData",id:"unloadmapdata",level:3}];function c(n){const e={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.h2,{id:"farmlandmanager",children:"FarmlandManager"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Description"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"This class handles all basic functionality for land ownership"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Parent"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.a,{href:"?version=script&category=25&class=218",children:"AbstractManager"})}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Functions"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#consolecommandbuyallfarmlands",children:"consoleCommandBuyAllFarmlands"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#consolecommandbuyfarmland",children:"consoleCommandBuyFarmland"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#consolecommandsellallfarmlands",children:"consoleCommandSellAllFarmlands"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#consolecommandsellfarmland",children:"consoleCommandSellFarmland"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#consolecommandshowfarmlands",children:"consoleCommandShowFarmlands"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#convertworldtolocalposition",children:"convertWorldToLocalPosition"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#delete",children:"delete"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#farmdestroyed",children:"farmDestroyed"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#getcanaccesslandatworldposition",children:"getCanAccessLandAtWorldPosition"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#getfarmlandatworldposition",children:"getFarmlandAtWorldPosition"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#getfarmlandbyid",children:"getFarmlandById"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#getfarmlandidatworldposition",children:"getFarmlandIdAtWorldPosition"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#getfarmlandowner",children:"getFarmlandOwner"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#getfarmlands",children:"getFarmlands"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#getisownedbyfarmalongline",children:"getIsOwnedByFarmAlongLine"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#getisownedbyfarmatworldposition",children:"getIsOwnedByFarmAtWorldPosition"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#getisvalidfarmlandid",children:"getIsValidFarmlandId"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#getlocalmap",children:"getLocalMap"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#getnumownedfarmlandidsbyfarmid",children:"getNumOwnedFarmlandIdsByFarmId"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#getownedfarmlandidsbyfarmid",children:"getOwnedFarmlandIdsByFarmId"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#getowneridatworldposition",children:"getOwnerIdAtWorldPosition"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#getpriceperha",children:"getPricePerHa"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#initdatastructures",children:"initDataStructures"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#loadfarmlanddata",children:"loadFarmlandData"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#loadfromxmlfile",children:"loadFromXMLFile"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#loadmapdata",children:"loadMapData"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#new",children:"new"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#savetoxmlfile",children:"saveToXMLFile"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#setlandownership",children:"setLandOwnership"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#unloadmapdata",children:"unloadMapData"})}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"consolecommandbuyallfarmlands",children:"consoleCommandBuyAllFarmlands"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Description"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"consoleCommandBuyAllFarmlands()"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Code"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-lua",children:'function FarmlandManager:consoleCommandBuyAllFarmlands()\n    if (g_currentMission:getIsServer() or g_currentMission.isMasterUser) and g_currentMission:getIsClient() then\n        local farmId = g_localPlayer.farmId\n\n        for k, _ in pairs(g_farmlandManager:getFarmlands()) do\n            g_client:getServerConnection():sendEvent(FarmlandStateEvent.new(k, farmId, 0 ))\n        end\n        return "Bought all farmlands"\n    else\n            return "Command not allowed"\n        end\n    end\n\n'})}),"\n",(0,a.jsx)(e.h3,{id:"consolecommandbuyfarmland",children:"consoleCommandBuyFarmland"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Description"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"consoleCommandBuyFarmland()"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,a.jsx)(e.table,{children:(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"any"}),(0,a.jsx)(e.th,{children:"farmlandIdStr"})]})})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Code"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-lua",children:'function FarmlandManager:consoleCommandBuyFarmland(farmlandIdStr)\n    if (g_currentMission:getIsServer() or g_currentMission.isMasterUser) and g_currentMission:getIsClient() then\n        local farmlandId\n        if farmlandIdStr ~ = nil then\n            -- farmland given as argument\n            farmlandId = tonumber(farmlandIdStr)\n            if farmlandId = = nil or self:getFarmlandById(farmlandId) = = nil then\n                printError( string.format( "Error:Invalid farmland id %q." , farmlandIdStr))\n                return "Use gsFarmlandBuy <farmlandId>"\n            end\n        else\n                -- use current player pos farmland\n                local x, _, z = g_localPlayer:getPosition()\n                farmlandId = self:getFarmlandIdAtWorldPosition(x,z)\n\n                if farmlandId = = nil then\n                    printError( "Error:Unable to retrieve farmland id at player position, provide farmland as argument instead" )\n                    return\n                end\n            end\n\n            local farmId = g_localPlayer.farmId\n\n            if self:getFarmlandOwner(farmlandId) = = farmId then\n                printError( string.format( "Error:Farmland %d already owned by farm %d" , farmlandId, farmId))\n                return\n            end\n\n            -- send buy request\n            g_client:getServerConnection():sendEvent(FarmlandStateEvent.new(farmlandId, farmId, 0 ))\n\n            return "Bought farmland " .. farmlandId\n        else\n                return "Command not allowed"\n            end\n        end\n\n'})}),"\n",(0,a.jsx)(e.h3,{id:"consolecommandsellallfarmlands",children:"consoleCommandSellAllFarmlands"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Description"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"consoleCommandSellAllFarmlands()"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Code"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-lua",children:'function FarmlandManager:consoleCommandSellAllFarmlands()\n    if (g_currentMission:getIsServer() or g_currentMission.isMasterUser) and g_currentMission:getIsClient() then\n        for k, _ in pairs(g_farmlandManager:getFarmlands()) do\n            g_client:getServerConnection():sendEvent(FarmlandStateEvent.new(k, FarmlandManager.NO_OWNER_FARM_ID, 0 ))\n        end\n        return "Sold all farmlands"\n    else\n            return "Command not allowed"\n        end\n    end\n\n'})}),"\n",(0,a.jsx)(e.h3,{id:"consolecommandsellfarmland",children:"consoleCommandSellFarmland"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Description"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"consoleCommandSellFarmland()"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,a.jsx)(e.table,{children:(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"any"}),(0,a.jsx)(e.th,{children:"farmlandIdStr"})]})})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Code"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-lua",children:'function FarmlandManager:consoleCommandSellFarmland(farmlandIdStr)\n    if (g_currentMission:getIsServer() or g_currentMission.isMasterUser) and g_currentMission:getIsClient() then\n        local farmlandId\n        if farmlandIdStr ~ = nil then\n            -- farmland given as argument\n            farmlandId = tonumber(farmlandIdStr)\n            if farmlandId = = nil or self:getFarmlandById(farmlandId) = = nil then\n                printError( string.format( "Error:Invalid farmland id %q" , farmlandIdStr))\n                return "Use gsFarmlandSell <farmlandId>"\n            end\n        else\n                -- use current player pos farmland\n                local x, _, z = g_localPlayer:getPosition()\n                farmlandId = self:getFarmlandIdAtWorldPosition(x,z)\n\n                if farmlandId = = nil then\n                    printError( "Error:Unable to retrieve farmland id at player position, provide farmland as argument instead" )\n                    return\n                end\n            end\n\n            if self:getFarmlandOwner(farmlandId) = = FarmlandManager.NO_OWNER_FARM_ID then\n                printError( string.format( "Error:Farmland %d not owned by anyone" , farmlandId))\n                return\n            end\n\n            -- send sell request\n            g_client:getServerConnection():sendEvent(FarmlandStateEvent.new(farmlandId, FarmlandManager.NO_OWNER_FARM_ID, 0 ))\n\n            return "Sold farmland " .. farmlandId\n        else\n                return "Command not allowed"\n            end\n        end\n\n'})}),"\n",(0,a.jsx)(e.h3,{id:"consolecommandshowfarmlands",children:"consoleCommandShowFarmlands"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Description"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"consoleCommandShowFarmlands()"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Code"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-lua",children:'function FarmlandManager:consoleCommandShowFarmlands()\n    if not g_debugManager:hasDrawable( self ) then\n        g_debugManager:addDrawable( self )\n        return "showFarmlands = true\\nUse F5 to enter debug mode for enabling overlay"\n        else\n                g_debugManager:removeDrawable( self )\n                self.debugFarmlandColors = nil\n                return "showFarmlands = false"\n            end\n        end\n\n'})}),"\n",(0,a.jsx)(e.h3,{id:"convertworldtolocalposition",children:"convertWorldToLocalPosition"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Description"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"Converts world to local position"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"convertWorldToLocalPosition(float worldPosX, float worldPosZ)"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"float"}),(0,a.jsx)(e.th,{children:"worldPosX"}),(0,a.jsx)(e.th,{children:"world position x"})]})}),(0,a.jsx)(e.tbody,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"float"}),(0,a.jsx)(e.td,{children:"worldPosZ"}),(0,a.jsx)(e.td,{children:"world position z"})]})})]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"float"}),(0,a.jsx)(e.th,{children:"localPosX"}),(0,a.jsx)(e.th,{children:"local position x"})]})}),(0,a.jsx)(e.tbody,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"float"}),(0,a.jsx)(e.td,{children:"localPosZ"}),(0,a.jsx)(e.td,{children:"local position z"})]})})]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Code"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-lua",children:"function FarmlandManager:convertWorldToLocalPosition(worldPosX, worldPosZ)\n    local terrainSize = g_currentMission.terrainSize\n    return math.floor( self.localMapWidth * (worldPosX + terrainSize * 0.5 ) / terrainSize),\n    math.floor( self.localMapHeight * (worldPosZ + terrainSize * 0.5 ) / terrainSize)\nend\n\n"})}),"\n",(0,a.jsx)(e.h3,{id:"delete",children:"delete"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Description"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"Deletes farm land manager"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"delete()"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Code"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-lua",children:"function FarmlandManager:delete()\nend\n\n"})}),"\n",(0,a.jsx)(e.h3,{id:"farmdestroyed",children:"farmDestroyed"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Description"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"farmDestroyed()"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,a.jsx)(e.table,{children:(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"any"}),(0,a.jsx)(e.th,{children:"farmId"})]})})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Code"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-lua",children:"function FarmlandManager:farmDestroyed(farmId)\n    for _, farmland in pairs( self:getFarmlands()) do\n        if self:getFarmlandOwner(farmland.id) = = farmId then\n            self:setLandOwnership(farmland.id, FarmlandManager.NO_OWNER_FARM_ID)\n        end\n    end\nend\n\n"})}),"\n",(0,a.jsx)(e.h3,{id:"getcanaccesslandatworldposition",children:"getCanAccessLandAtWorldPosition"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Description"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"Checks if farm can access the given world position"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"getCanAccessLandAtWorldPosition(integer farmId, float worldPosX, float worldPosZ)"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"integer"}),(0,a.jsx)(e.th,{children:"farmId"}),(0,a.jsx)(e.th,{children:"farm id"})]})}),(0,a.jsxs)(e.tbody,{children:[(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"float"}),(0,a.jsx)(e.td,{children:"worldPosX"}),(0,a.jsx)(e.td,{children:"world position x"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"float"}),(0,a.jsx)(e.td,{children:"worldPosZ"}),(0,a.jsx)(e.td,{children:"world position z"})]})]})]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(e.table,{children:(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"float"}),(0,a.jsx)(e.th,{children:"canAccess"}),(0,a.jsx)(e.th,{children:"true if farm can access the land"})]})})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Code"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-lua",children:"function FarmlandManager:getCanAccessLandAtWorldPosition(farmId, worldPosX, worldPosZ)\n    if farmId = = FarmlandManager.NO_OWNER_FARM_ID or farmId = = nil then\n        return false\n    end\n\n    local farmlandId = self:getFarmlandIdAtWorldPosition(worldPosX, worldPosZ)\n    local ownerFarmId = self.farmlandMapping[farmlandId]\n    if ownerFarmId = = farmId then\n        return true\n    end\n\n    return g_currentMission.accessHandler:canFarmAccessOtherId(farmId, ownerFarmId)\nend\n\n"})}),"\n",(0,a.jsx)(e.h3,{id:"getfarmlandatworldposition",children:"getFarmlandAtWorldPosition"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Description"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"getFarmlandAtWorldPosition()"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"any"}),(0,a.jsx)(e.th,{children:"worldPosX"})]})}),(0,a.jsx)(e.tbody,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"any"}),(0,a.jsx)(e.td,{children:"worldPosZ"})]})})]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Code"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-lua",children:"function FarmlandManager:getFarmlandAtWorldPosition(worldPosX, worldPosZ)\n    local farmlandId = self:getFarmlandIdAtWorldPosition(worldPosX, worldPosZ)\n    return self.farmlands[farmlandId]\nend\n\n"})}),"\n",(0,a.jsx)(e.h3,{id:"getfarmlandbyid",children:"getFarmlandById"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Description"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"Gets farmland by id"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"getFarmlandById(integer farmlandId)"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(e.table,{children:(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"integer"}),(0,a.jsx)(e.th,{children:"farmlandId"}),(0,a.jsx)(e.th,{children:"farmland id"})]})})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(e.table,{children:(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"integer"}),(0,a.jsx)(e.th,{children:"farmland"}),(0,a.jsx)(e.th,{children:"farmland object"})]})})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Code"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-lua",children:"function FarmlandManager:getFarmlandById(farmlandId)\n    return self.farmlands[farmlandId]\nend\n\n"})}),"\n",(0,a.jsx)(e.h3,{id:"getfarmlandidatworldposition",children:"getFarmlandIdAtWorldPosition"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Description"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"Gets farmland id at given world position"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"getFarmlandIdAtWorldPosition(float worldPosX, float worldPosZ)"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"float"}),(0,a.jsx)(e.th,{children:"worldPosX"}),(0,a.jsx)(e.th,{children:"world position x"})]})}),(0,a.jsx)(e.tbody,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"float"}),(0,a.jsx)(e.td,{children:"worldPosZ"}),(0,a.jsx)(e.td,{children:"world position z"})]})})]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(e.table,{children:(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"float"}),(0,a.jsx)(e.th,{children:"farmlandId"}),(0,a.jsx)(e.th,{children:"farmland id. if 0, world position is no valid/buyable farmland"})]})})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Code"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-lua",children:"function FarmlandManager:getFarmlandIdAtWorldPosition(worldPosX, worldPosZ)\n    if self.localMap = = nil then\n        return FarmlandManager.NO_OWNER_FARM_ID\n    end\n\n    local localPosX, localPosZ = self:convertWorldToLocalPosition(worldPosX, worldPosZ)\n    return getBitVectorMapPoint( self.localMap, localPosX, localPosZ, 0 , self.numberOfBits)\nend\n\n"})}),"\n",(0,a.jsx)(e.h3,{id:"getfarmlandowner",children:"getFarmlandOwner"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Description"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"Gets farmland owner"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"getFarmlandOwner(integer farmlandId)"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(e.table,{children:(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"integer"}),(0,a.jsx)(e.th,{children:"farmlandId"}),(0,a.jsx)(e.th,{children:"farmland id"})]})})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(e.table,{children:(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"integer"}),(0,a.jsx)(e.th,{children:"farmId"}),(0,a.jsx)(e.th,{children:"id of farm. Returns 0 if land is not owned by anyone"})]})})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Code"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-lua",children:"function FarmlandManager:getFarmlandOwner(farmlandId)\n    --#debug Assert.isInteger(farmlandId) -- ensure farmland id and not farmland itself it given\n    if farmlandId = = nil or self.farmlandMapping[farmlandId] = = nil then\n        return FarmlandManager.NO_OWNER_FARM_ID\n    end\n\n    return self.farmlandMapping[farmlandId]\nend\n\n"})}),"\n",(0,a.jsx)(e.h3,{id:"getfarmlands",children:"getFarmlands"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Description"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"Gets all farmlands"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"getFarmlands()"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(e.table,{children:(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"integer"}),(0,a.jsx)(e.th,{children:"farmlands"}),(0,a.jsx)(e.th,{children:"all available farmlands"})]})})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Code"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-lua",children:"function FarmlandManager:getFarmlands()\n    return self.farmlands\nend\n\n"})}),"\n",(0,a.jsx)(e.h3,{id:"getisownedbyfarmalongline",children:"getIsOwnedByFarmAlongLine"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Description"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"Checks if farm owns all farmlands along a line"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"getIsOwnedByFarmAlongLine(integer farmId, float worldPosX1, float worldPosZ1, float worldPosX2, float worldPosZ2)"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"integer"}),(0,a.jsx)(e.th,{children:"farmId"}),(0,a.jsx)(e.th,{children:"farm id"})]})}),(0,a.jsxs)(e.tbody,{children:[(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"float"}),(0,a.jsx)(e.td,{children:"worldPosX1"}),(0,a.jsx)(e.td,{children:"line start world position x"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"float"}),(0,a.jsx)(e.td,{children:"worldPosZ1"}),(0,a.jsx)(e.td,{children:"line start world position z"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"float"}),(0,a.jsx)(e.td,{children:"worldPosX2"}),(0,a.jsx)(e.td,{children:"line end world position x"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"float"}),(0,a.jsx)(e.td,{children:"worldPosZ2"}),(0,a.jsx)(e.td,{children:"line end world position z"})]})]})]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(e.table,{children:(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"float"}),(0,a.jsx)(e.th,{children:"isOwned"}),(0,a.jsx)(e.th,{children:"true if farm owns all farmlands long the line"})]})})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Code"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-lua",children:"function FarmlandManager:getIsOwnedByFarmAlongLine(farmId, worldPosX1, worldPosZ1, worldPosX2, worldPosZ2)\n    if farmId = = FarmlandManager.NO_OWNER_FARM_ID or farmId = = nil then\n        return false\n    end\n\n    if self.localMap = = nil then\n        return false\n    end\n\n    local length = MathUtil.vector2Length(worldPosX1 - worldPosX2, worldPosZ1 - worldPosZ2)\n\n    if length = = 0 then\n        return self:getIsOwnedByFarmAtWorldPosition(farmId, worldPosX1, worldPosZ1)\n    end\n\n    local bitmapToWorld = g_currentMission.terrainSize / self.localMapWidth\n    local step = (bitmapToWorld / length) * 2 -- reduce number of probes as single pixels are unlikely anyways\n\n    -- local debugPoint = DebugPoint.new()\n\n    -- TODO:Optimization:do not step linearly but rather like a binary search to minimize number of probes\n        for alpha = 0 , 1 , step do\n            local x, z = MathUtil.vector2Lerp(worldPosX1, worldPosZ1, worldPosX2, worldPosZ2, alpha)\n            local localPosX, localPosZ = self:convertWorldToLocalPosition(x, z)\n            local farmlandId = getBitVectorMapPoint( self.localMap, localPosX, localPosZ, 0 , self.numberOfBits)\n            if self.farmlandMapping[farmlandId] ~ = farmId then\n                -- debugPoint:createWithWorldPos(x, 0, z, true):setColor(Color.PRESETS.RED):draw()\n                return false\n            end\n            -- debugPoint:createWithWorldPos(x, 0, z, true):setColor(Color.PRESETS.GREEN):draw()\n        end\n\n        return true\n    end\n\n"})}),"\n",(0,a.jsx)(e.h3,{id:"getisownedbyfarmatworldposition",children:"getIsOwnedByFarmAtWorldPosition"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Description"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"Checks if farm owns given world position"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"getIsOwnedByFarmAtWorldPosition(integer farmId, float worldPosX, float worldPosZ)"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"integer"}),(0,a.jsx)(e.th,{children:"farmId"}),(0,a.jsx)(e.th,{children:"farm id"})]})}),(0,a.jsxs)(e.tbody,{children:[(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"float"}),(0,a.jsx)(e.td,{children:"worldPosX"}),(0,a.jsx)(e.td,{children:"world position x"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"float"}),(0,a.jsx)(e.td,{children:"worldPosZ"}),(0,a.jsx)(e.td,{children:"world position z"})]})]})]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(e.table,{children:(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"float"}),(0,a.jsx)(e.th,{children:"isOwned"}),(0,a.jsx)(e.th,{children:"true if farm owns world position point, else false"})]})})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Code"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-lua",children:"function FarmlandManager:getIsOwnedByFarmAtWorldPosition(farmId, worldPosX, worldPosZ)\n    if farmId = = FarmlandManager.NO_OWNER_FARM_ID or farmId = = nil then\n        return false\n    end\n    local farmlandId = self:getFarmlandIdAtWorldPosition(worldPosX, worldPosZ)\n    return self.farmlandMapping[farmlandId] = = farmId\nend\n\n"})}),"\n",(0,a.jsx)(e.h3,{id:"getisvalidfarmlandid",children:"getIsValidFarmlandId"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Description"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"Checks if given farmland-id is valid"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"getIsValidFarmlandId(integer farmlandId)"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(e.table,{children:(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"integer"}),(0,a.jsx)(e.th,{children:"farmlandId"}),(0,a.jsx)(e.th,{children:"farmland id"})]})})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(e.table,{children:(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"integer"}),(0,a.jsx)(e.th,{children:"isValid"}),(0,a.jsx)(e.th,{children:"true if id is valid, else false"})]})})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Code"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-lua",children:"function FarmlandManager:getIsValidFarmlandId(farmlandId)\n    if farmlandId = = nil or farmlandId = = 0 or farmlandId < 0 then\n        return false\n    end\n    if self:getFarmlandById(farmlandId) = = nil then\n        return false\n    end\n    return true\nend\n\n"})}),"\n",(0,a.jsx)(e.h3,{id:"getlocalmap",children:"getLocalMap"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Description"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"Gets farmland bit vector handle"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"getLocalMap()"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(e.table,{children:(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"integer"}),(0,a.jsx)(e.th,{children:"mapHandle"}),(0,a.jsx)(e.th,{children:"id of bitvector"})]})})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Code"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-lua",children:"function FarmlandManager:getLocalMap()\n    return self.localMap\nend\n\n"})}),"\n",(0,a.jsx)(e.h3,{id:"getnumownedfarmlandidsbyfarmid",children:"getNumOwnedFarmlandIdsByFarmId"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Description"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"Gets number of owned farmland ids for given farm"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"getNumOwnedFarmlandIdsByFarmId(integer id)"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(e.table,{children:(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"integer"}),(0,a.jsx)(e.th,{children:"id"}),(0,a.jsx)(e.th,{children:"farm id"})]})})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(e.table,{children:(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"integer"}),(0,a.jsx)(e.th,{children:"numFarmlands"}),(0,a.jsx)(e.th,{children:"integer number of farmlands"})]})})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Code"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-lua",children:"function FarmlandManager:getNumOwnedFarmlandIdsByFarmId(id)\n    local num = 0\n    for farmlandId, farmId in pairs( self.farmlandMapping) do\n        if farmId = = id then\n            num = num + 1\n        end\n    end\n    return num\nend\n\n"})}),"\n",(0,a.jsx)(e.h3,{id:"getownedfarmlandidsbyfarmid",children:"getOwnedFarmlandIdsByFarmId"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Description"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"Gets list of owned farmland ids for given farm"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"getOwnedFarmlandIdsByFarmId(integer id)"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(e.table,{children:(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"integer"}),(0,a.jsx)(e.th,{children:"id"}),(0,a.jsx)(e.th,{children:"farm id"})]})})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(e.table,{children:(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"integer"}),(0,a.jsx)(e.th,{children:"farmlandIds"}),(0,a.jsx)(e.th,{children:"table list of farmland ids owned by given farm id"})]})})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Code"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-lua",children:"function FarmlandManager:getOwnedFarmlandIdsByFarmId(id)\n    local farmlandIds = { }\n    for farmlandId, farmId in pairs( self.farmlandMapping) do\n        if farmId = = id then\n            table.insert(farmlandIds, farmlandId)\n        end\n    end\n    return farmlandIds\nend\n\n"})}),"\n",(0,a.jsx)(e.h3,{id:"getowneridatworldposition",children:"getOwnerIdAtWorldPosition"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Description"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"getOwnerIdAtWorldPosition()"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"any"}),(0,a.jsx)(e.th,{children:"worldPosX"})]})}),(0,a.jsx)(e.tbody,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"any"}),(0,a.jsx)(e.td,{children:"worldPosZ"})]})})]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Code"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-lua",children:"function FarmlandManager:getOwnerIdAtWorldPosition(worldPosX, worldPosZ)\n    local farmlandId = self:getFarmlandIdAtWorldPosition(worldPosX, worldPosZ)\n    return self:getFarmlandOwner(farmlandId)\nend\n\n"})}),"\n",(0,a.jsx)(e.h3,{id:"getpriceperha",children:"getPricePerHa"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Description"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"getPricePerHa()"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Code"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-lua",children:"function FarmlandManager:getPricePerHa()\n    return self.pricePerHa\nend\n\n"})}),"\n",(0,a.jsx)(e.h3,{id:"initdatastructures",children:"initDataStructures"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Description"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"Initialize data structures"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"initDataStructures()"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Code"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-lua",children:"function FarmlandManager:initDataStructures()\n    self.farmlands = { }\n    self.sortedFarmlands = { }\n    self.sortedFarmlandIds = { }\n    -- mapping table farmland id to farm id\n    self.farmlandMapping = { }\n    self.localMap = nil\n    self.localMapWidth = 0\n    self.localMapHeight = 0\n    self.numberOfBits = 8\nend\n\n"})}),"\n",(0,a.jsx)(e.h3,{id:"loadfarmlanddata",children:"loadFarmlandData"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Description"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"Load data on map load"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"loadFarmlandData()"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,a.jsx)(e.table,{children:(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"any"}),(0,a.jsx)(e.th,{children:"xmlFileHandle"})]})})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(e.table,{children:(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"any"}),(0,a.jsx)(e.th,{children:"true"}),(0,a.jsx)(e.th,{children:"if loading was successful else false"})]})})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Code"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-lua",children:'function FarmlandManager:loadFarmlandData(xmlFileHandle)\n    local xmlFile = XMLFile.wrap(xmlFileHandle, FarmlandManager.xmlSchema)\n\n    self.isLoadedFromTerrain = true\n\n    local infoLayer\n    local infoLayerName = xmlFile:getValue( "map.farmlands#infoLayer" )\n    if infoLayerName ~ = nil then\n        infoLayer = getInfoLayerFromTerrain(g_terrainNode, infoLayerName)\n        if infoLayer = = nil or infoLayer = = 0 then\n            Logging.xmlWarning(xmlFile, "No info layer \'%s\' defined on terrain!" , infoLayerName)\n        end\n    end\n\n    local bitVectorMapFilename\n    if infoLayer = = nil then\n        bitVectorMapFilename = xmlFile:getValue( "map.farmlands#densityMapFilename" )\n        if bitVectorMapFilename = = nil then\n            Logging.xmlWarning(xmlFile, "Loading farmland file \'%s\' failed! Missing densityMapFilename" , bitVectorMapFilename)\n            return false\n        end\n\n        bitVectorMapFilename = Utils.getFilename(bitVectorMapFilename, g_currentMission.baseDirectory)\n        local numberOfBits = xmlFile:getValue( "map.farmlands#numChannels" ) or 8\n\n        infoLayer = createBitVectorMap( "FarmlandMap" )\n        local success = loadBitVectorMapFromFile(infoLayer, bitVectorMapFilename, numberOfBits)\n        if not success then\n            Logging.xmlWarning(xmlFile, "Loading farmland file \'%s\' failed!" , bitVectorMapFilename)\n            xmlFile:delete()\n            return false\n        end\n\n        self.isLoadedFromTerrain = false\n    end\n\n    self.pricePerHa = xmlFile:getValue( "map.farmlands#pricePerHa" ) or 60000\n\n    FarmlandManager.NOT_BUYABLE_FARM_ID = 2 ^ self.numberOfBits - 1\n\n    -- load a bitvector\n    self.localMap = infoLayer\n    self.numberOfBits = getBitVectorMapNumChannels( self.localMap)\n    self.localMapWidth, self.localMapHeight = getBitVectorMapSize( self.localMap)\n\n    local farmlandSizeMapping = { }\n    local farmlandCenterData = { }\n    local numOfFarmlands = 0\n    local maxFarmlandId = 0\n    local missingFarmlandDefinitions = false\n\n    for x = 0 , self.localMapWidth - 1 do\n        for y = 0 , self.localMapHeight - 1 do\n            local value = getBitVectorMapPoint( self.localMap, x, y, 0 , self.numberOfBits)\n\n            if value > 0 then\n                if self.farmlandMapping[value] = = nil then\n                    farmlandSizeMapping[value] = 0\n                    farmlandCenterData[value] = { sumPosX = 0 , sumPosZ = 0 }\n                    self.farmlandMapping[value] = FarmlandManager.NO_OWNER_FARM_ID\n                    numOfFarmlands = numOfFarmlands + 1\n                    maxFarmlandId = math.max(value, maxFarmlandId)\n                end\n\n                farmlandSizeMapping[value] = farmlandSizeMapping[value] + 1\n                farmlandCenterData[value].sumPosX = farmlandCenterData[value].sumPosX + (x - 0.5 )\n                farmlandCenterData[value].sumPosZ = farmlandCenterData[value].sumPosZ + (y - 0.5 )\n            else\n                    missingFarmlandDefinitions = true\n                end\n            end\n        end\n\n        if missingFarmlandDefinitions then\n            Logging.xmlWarning(xmlFile, "Farmland-Id was not set for all pixels in farmland-infoLayer!" )\n            end\n\n            local isNewSavegame = not g_currentMission.missionInfo.isValid\n\n            for _, key in xmlFile:iterator( "map.farmlands.farmland" ) do\n                local farmland = Farmland.new()\n                if farmland:load(xmlFile, key) and self.farmlands[farmland.id] = = nil and self.farmlandMapping[farmland.id] ~ = nil then\n                    self.farmlands[farmland.id] = farmland\n                    table.insert( self.sortedFarmlands, farmland)\n                    table.insert( self.sortedFarmlandIds, farmland.id)\n\n                    -- If default should be owned .. .\n                    local shouldAddDefaults = isNewSavegame and g_currentMission.missionInfo.hasInitiallyOwnedFarmlands and not g_currentMission.missionDynamicInfo.isMultiplayer\n                    -- .. .then set only default farmlands to owned\n                    if shouldAddDefaults and g_currentMission:getIsServer() and farmland.defaultFarmProperty then\n                        self:setLandOwnership(farmland.id, FarmManager.SINGLEPLAYER_FARM_ID, true )\n                    end\n                else\n                        if self.farmlandMapping[farmland.id] = = nil then\n                            Logging.xmlError(xmlFile, "Farmland-Id \'%s\' not defined in farmland info layer.Skipping farmland definition!" , farmland.id)\n                        end\n                        if self.farmlands[farmland.id] ~ = nil then\n                            Logging.xmlError(xmlFile, "Farmland-id \'%s\' already exists! Ignore it!" , farmland.id)\n                        end\n                        farmland:delete()\n                    end\n                end\n\n                for index, _ in pairs( self.farmlandMapping) do\n                    if index ~ = FarmlandManager.NOT_BUYABLE_FARM_ID and self.farmlands[index] = = nil then\n                        Logging.xmlError(xmlFile, "Farmland-Id \'%d\' not defined in farmland xml file!" , index)\n                    end\n                end\n\n                local transformFactor = g_currentMission.terrainSize / self.localMapWidth\n                local pixelToSqm = transformFactor * transformFactor\n\n                for id, farmland in pairs( self.farmlands) do\n                    local ha = MathUtil.areaToHa(farmlandSizeMapping[id], pixelToSqm)\n                    farmland:setArea(ha)\n                    farmland:addMapHotspot()\n\n                    if farmland.xWorldPos = = nil then\n                        local posX = ((farmlandCenterData[id].sumPosX / farmlandSizeMapping[id]) - self.localMapWidth * 0.5 ) * transformFactor\n                        local posZ = ((farmlandCenterData[id].sumPosZ / farmlandSizeMapping[id]) - self.localMapHeight * 0.5 ) * transformFactor\n                        farmland:setIndicatorPosition(posX, posZ)\n                    end\n                end\n\n                g_messageCenter:subscribe(MessageType.FARM_DELETED, self.farmDestroyed, self )\n                g_messageCenter:subscribe(MessageType.FARM_SETTINGS_CHANGED, self.onFarmSettingsChanged, self )\n\n                if g_addCheatCommands then\n                    if g_currentMission:getIsServer() then\n                        -- master user only cheats(will be added in setMasterUserLocal too)\n                        addConsoleCommand( "gsFarmlandBuy" , "Buys farmland with given id" , "consoleCommandBuyFarmland" , self )\n                        addConsoleCommand( "gsFarmlandBuyAll" , "Buys all farmlands" , "consoleCommandBuyAllFarmlands" , self )\n                        addConsoleCommand( "gsFarmlandSell" , "Sells farmland with given id" , "consoleCommandSellFarmland" , self )\n                        addConsoleCommand( "gsFarmlandSellAll" , "Sells all farmlands" , "consoleCommandSellAllFarmlands" , self )\n                    end\n\n                    addConsoleCommand( "gsFarmlandShow" , "Show farmlands" , "consoleCommandShowFarmlands" , self )\n                end\n\n                xmlFile:delete()\n\n                return true\n            end\n\n'})}),"\n",(0,a.jsx)(e.h3,{id:"loadfromxmlfile",children:"loadFromXMLFile"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Description"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"Load farmland ownership data from xml savegame file"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"loadFromXMLFile(string xmlFilename)"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(e.table,{children:(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"string"}),(0,a.jsx)(e.th,{children:"xmlFilename"}),(0,a.jsx)(e.th,{children:"xml filename"})]})})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Code"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-lua",children:'function FarmlandManager:loadFromXMLFile(xmlFilename)\n    if xmlFilename = = nil then\n        return false\n    end\n\n    local xmlFile = loadXMLFile( "farmlandXML" , xmlFilename)\n    if xmlFile = = 0 then\n        return false\n    end\n\n    local farmlandCounter = 0\n    while true do\n        local key = string.format( "farmlands.farmland(%d)" , farmlandCounter)\n        local farmlandId = getXMLInt(xmlFile, key .. "#id" )\n        if farmlandId = = nil then\n            break\n        end\n        local farmId = getXMLInt(xmlFile, key .. "#farmId" )\n        if farmId > FarmlandManager.NO_OWNER_FARM_ID then\n            self:setLandOwnership(farmlandId, farmId, true )\n        end\n\n        farmlandCounter = farmlandCounter + 1\n    end\n\n    delete(xmlFile)\n\n    g_farmManager:mergeFarmlandsForSingleplayer()\n\n    return true\nend\n\n'})}),"\n",(0,a.jsx)(e.h3,{id:"loadmapdata",children:"loadMapData"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Description"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"Load data on map load"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"loadMapData()"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,a.jsx)(e.table,{children:(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"any"}),(0,a.jsx)(e.th,{children:"xmlFile"})]})})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(e.table,{children:(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"any"}),(0,a.jsx)(e.th,{children:"true"}),(0,a.jsx)(e.th,{children:"if loading was successful else false"})]})})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Code"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-lua",children:'function FarmlandManager:loadMapData(xmlFile)\n    FarmlandManager:superClass().loadMapData( self )\n    return XMLUtil.loadDataFromMapXML(xmlFile, "farmlands" , g_currentMission.baseDirectory, self , self.loadFarmlandData)\nend\n\n'})}),"\n",(0,a.jsx)(e.h3,{id:"new",children:"new"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Description"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"Creating manager"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"new()"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,a.jsx)(e.table,{children:(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"any"}),(0,a.jsx)(e.th,{children:"customMt"})]})})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(e.table,{children:(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"any"}),(0,a.jsx)(e.th,{children:"instance"}),(0,a.jsx)(e.th,{children:"instance of object"})]})})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Code"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-lua",children:"function FarmlandManager.new(customMt)\n    local self = AbstractManager.new(customMt or FarmlandManager _mt)\n    return self\nend\n\n"})}),"\n",(0,a.jsx)(e.h3,{id:"savetoxmlfile",children:"saveToXMLFile"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Description"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"Write farmland ownership data to savegame file"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"saveToXMLFile(string xmlFilename)"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(e.table,{children:(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"string"}),(0,a.jsx)(e.th,{children:"xmlFilename"}),(0,a.jsx)(e.th,{children:"file path"})]})})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(e.table,{children:(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"string"}),(0,a.jsx)(e.th,{children:"true"}),(0,a.jsx)(e.th,{children:"if loading was successful else false"})]})})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Code"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-lua",children:'function FarmlandManager:saveToXMLFile(xmlFilename)\n    -- save farmland to xml\n    local xmlFile = createXMLFile( "farmlandsXML" , xmlFilename, "farmlands" )\n    if xmlFile = = 0 then\n        Logging.error( "Failed to create farmlands xml file" )\n        return false\n    end\n\n    local index = 0\n    for farmlandId, farmId in pairs( self.farmlandMapping) do\n        local farmlandKey = string.format( "farmlands.farmland(%d)" , index)\n        setXMLInt(xmlFile, farmlandKey .. "#id" , farmlandId)\n        setXMLInt(xmlFile, farmlandKey .. "#farmId" , Utils.getNoNil(farmId, FarmlandManager.NO_OWNER_FARM_ID))\n        index = index + 1\n    end\n\n    saveXMLFile(xmlFile)\n    delete(xmlFile)\n\n    return true\nend\n\n'})}),"\n",(0,a.jsx)(e.h3,{id:"setlandownership",children:"setLandOwnership"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Description"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"Sets farm land ownership"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"setLandOwnership(integer farmlandId, integer farmId, )"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"integer"}),(0,a.jsx)(e.th,{children:"farmlandId"}),(0,a.jsx)(e.th,{children:"farm land id"})]})}),(0,a.jsxs)(e.tbody,{children:[(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"integer"}),(0,a.jsx)(e.td,{children:"farmId"}),(0,a.jsx)(e.td,{children:"farm id. set farmid to 0 to sell farm land"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"any"}),(0,a.jsx)(e.td,{children:"loadFromSavegame"}),(0,a.jsx)(e.td,{})]})]})]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Code"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-lua",children:'function FarmlandManager:setLandOwnership(farmlandId, farmId, loadFromSavegame)\n    if not self:getIsValidFarmlandId(farmlandId) then\n        return false\n    end\n    if farmId = = nil or farmId < FarmlandManager.NO_OWNER_FARM_ID or farmId = = FarmlandManager.NOT_BUYABLE_FARM_ID then\n        return false\n    end\n\n    local farmland = self:getFarmlandById(farmlandId)\n    if farmland = = nil then\n        Logging.warning( "Farmland id %d not defined in map!" , farmlandId)\n        return false\n    end\n\n    if loadFromSavegame = = nil then\n        loadFromSavegame = false\n    end\n\n    self.farmlandMapping[farmlandId] = farmId\n    farmland:setOwnerFarmId(farmId)\n\n    g_messageCenter:publish(MessageType.FARMLAND_OWNER_CHANGED, farmlandId, farmId, loadFromSavegame)\n\n    return true\nend\n\n'})}),"\n",(0,a.jsx)(e.h3,{id:"unloadmapdata",children:"unloadMapData"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Description"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"Unload data on mission delete"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"unloadMapData()"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Code"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-lua",children:'function FarmlandManager:unloadMapData()\n    removeConsoleCommand( "gsFarmlandBuy" )\n    removeConsoleCommand( "gsFarmlandBuyAll" )\n    removeConsoleCommand( "gsFarmlandSell" )\n    removeConsoleCommand( "gsFarmlandSellAll" )\n    removeConsoleCommand( "gsFarmlandShow" )\n\n    g_messageCenter:unsubscribeAll( self )\n\n    if self.localMap ~ = nil then\n        if not self.isLoadedFromTerrain then\n            delete( self.localMap)\n        end\n        self.localMap = nil\n    end\n    if ( self.farmlands ~ = nil ) then\n        for _, farmland in pairs( self.farmlands) do\n            farmland:delete()\n        end\n    end\n\n    FarmlandManager:superClass().unloadMapData( self )\nend\n\n'})})]})}function h(n={}){const{wrapper:e}={...(0,d.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(c,{...n})}):c(n)}},28453(n,e,l){l.d(e,{R:()=>s,x:()=>i});var r=l(96540);const a={},d=r.createContext(a);function s(n){const e=r.useContext(d);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:s(n.components),r.createElement(d.Provider,{value:e},n.children)}}}]);