"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[45407],{28453(e,n,t){t.d(n,{R:()=>o,x:()=>c});var s=t(96540);const i={},l=s.createContext(i);function o(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(l.Provider,{value:n},e.children)}},99771(e,n,t){t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>c,default:()=>x,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"script/Hud/ContextActionDisplay","title":"ContextActionDisplay","description":"ContextActionDisplay","source":"@site/../docs/script/Hud/ContextActionDisplay.md","sourceDirName":"script/Hud","slug":"/script/Hud/ContextActionDisplay","permalink":"/FS25-Community-LUADOC/script/Hud/ContextActionDisplay","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"PlayerTargeter","permalink":"/FS25-Community-LUADOC/script/Handtools/PlayerTargeter"},"next":{"title":"ExtendedCombineHUDExtension","permalink":"/FS25-Community-LUADOC/script/Hud/ExtendedCombineHUDExtension"}}');var i=t(74848),l=t(28453);const o={},c=void 0,r={},d=[{value:"ContextActionDisplay",id:"contextactiondisplay",level:2},{value:"draw",id:"draw",level:3},{value:"new",id:"new",level:3},{value:"resetContext",id:"resetcontext",level:3},{value:"setContext",id:"setcontext",level:3},{value:"storeScaledValues",id:"storescaledvalues",level:3},{value:"update",id:"update",level:3}];function a(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"contextactiondisplay",children:"ContextActionDisplay"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Minimum display duration in milliseconds."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Parent"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"?version=script&category=&class=",children:"HUDDisplay"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Functions"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#draw",children:"draw"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#new",children:"new"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#resetcontext",children:"resetContext"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#setcontext",children:"setContext"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#storescaledvalues",children:"storeScaledValues"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#update",children:"update"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"draw",children:"draw"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Draw the context action display."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"draw()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function ContextActionDisplay:draw()\n    if g_currentMission.hud.ingameMessage:getVisible() then\n        return\n    end\n\n    local controls = self.controls\n    if controls ~ = nil then\n        local buttons = controls.buttons\n        local keys = controls.keys\n        local isComboButtonMapping = controls.isComboButtonMapping\n        local width = self.iconOverlay.width + self.iconOffsetX + self.textOffsetX\n        local title = self.actionText\n        local text = self.text\n        local totalButtonWidth = 0\n        if #buttons > 0 then\n            totalButtonWidth = self.glyphButtonOverlay:getButtonWidth(buttons, isComboButtonMapping, false , self.buttonHeight)\n            width = width + totalButtonWidth\n\n        elseif #keys > 0 then\n                for i = #keys, 1 , - 1 do\n                    local key = keys[i]\n                    local keyWidth = self.keyButtonOverlay:getButtonWidth(key, self.buttonHeight)\n                    local totalWidth = keyWidth + g_pixelSizeX\n                    width = width + totalWidth\n                    totalButtonWidth = totalButtonWidth + totalWidth\n                end\n            end\n\n            setTextWrapWidth( self.textMaxWidth)\n            width = width + getTextWidth( self.textSize, text)\n            local textHeight = getTextHeight( self.textSize, text)\n\n            local totalHeight = textHeight + self.titleTextOffsetY + self.titleTextSize\n\n            local posX, posY = self:getPosition()\n\n            local currentPosX = posX - width * 0.5\n\n            local buttonPosY = posY + (totalHeight - self.buttonHeight) * 0.5\n            if #buttons > 0 then\n                self.glyphButtonOverlay:renderButton(buttons, isComboButtonMapping, false , currentPosX, buttonPosY, self.buttonHeight)\n            else\n                    for i = #keys, 1 , - 1 do\n                        local key = keys[i]\n                        self.keyButtonOverlay:renderButton(key, currentPosX, buttonPosY, self.buttonHeight, true )\n                    end\n                end\n\n                currentPosX = currentPosX + totalButtonWidth\n\n                local iconPosY = posY + (totalHeight - self.iconOverlay.height) * 0.5\n                self.iconOverlay:setPosition(currentPosX + self.iconOffsetX, iconPosY)\n                self.iconOverlay:render()\n\n                currentPosX = self.iconOverlay.x + self.iconOverlay.width\n\n                local activeColor = HUD.COLOR.ACTIVE\n                setTextColor(activeColor[ 1 ], activeColor[ 2 ], activeColor[ 3 ], activeColor[ 4 ])\n                setTextBold( true )\n                setTextAlignment(RenderText.ALIGN_LEFT)\n\n                renderText(currentPosX + self.textOffsetX, posY + textHeight + self.titleTextOffsetY, self.titleTextSize, title)\n\n                setTextColor( 1 , 1 , 1 , 1 )\n                setTextBold( false )\n                setTextVerticalAlignment(RenderText.VERTICAL_ALIGN_BOTTOM)\n                renderText(currentPosX + self.textOffsetX, posY + self.textOffsetY, self.textSize, text)\n                setTextWrapWidth( 0 )\n                setTextVerticalAlignment(RenderText.VERTICAL_ALIGN_BASELINE)\n            end\n        end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"new",children:"new"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Create a new ContextActionDisplay."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"new(any? customMt)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any?"}),(0,i.jsx)(n.th,{children:"customMt"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any?"}),(0,i.jsx)(n.th,{children:"self"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function ContextActionDisplay.new(customMt)\n    local self = ContextActionDisplay:superClass().new( ContextActionDisplay _mt)\n\n    self.slicesIds = { }\n    self.slicesIds[ ContextActionDisplay.CONTEXT_ICON.ATTACH] = "gui.contextAction_icon_connect"\n    self.slicesIds[ ContextActionDisplay.CONTEXT_ICON.FUEL] = "gui.contextAction_icon_fuel"\n    self.slicesIds[ ContextActionDisplay.CONTEXT_ICON.TIP] = "gui.contextAction_icon_dump"\n    self.slicesIds[ ContextActionDisplay.CONTEXT_ICON.FILL_BOWL] = "gui.contextAction_icon_animalFood"\n\n    self.glyphButtonOverlay = GlyphButtonOverlay.new()\n    self.glyphButtonOverlay:setColor( nil , nil , nil , nil , 0 , 0 , 0 , 0.80 )\n\n    self.keyButtonOverlay = ButtonOverlay.new()\n    self.keyButtonOverlay:setColor( nil , nil , nil , nil , 0 , 0 , 0 , 0.80 )\n\n    local r, g, b, a = unpack(HUD.COLOR.ACTIVE)\n    self.lastSliceId = self.slicesIds[ ContextActionDisplay.CONTEXT_ICON.ATTACH]\n    self.iconOverlay = g_overlayManager:createOverlay( self.lastSliceId, 0 , 0 , 0 , 0 )\n    self.iconOverlay:setColor(r, g, b, a)\n\n    self.controls = nil\n    self.contextPriority = - math.huge\n    self.text = nil\n    self.displayTime = 0\n\n    return self\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"resetcontext",children:"resetContext"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Reset context state after drawing.\nThe context must be set a new on each frame."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"resetContext()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function ContextActionDisplay:resetContext()\n    self.controls = nil\n    self.contextPriority = - math.huge\n    self.text = nil\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"setcontext",children:"setContext"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Sets the current action context.\nThis must be called each frame when a given context is active. The highest priority context is displayed or the one\nwhich was set the latest if two or more contexts have the same priority."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"setContext(string contextAction, string contextIconName, string text, integer? priority, string? actionText)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"string"}),(0,i.jsx)(n.th,{children:"contextAction"}),(0,i.jsx)(n.th,{children:"Input action name of the context action"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"contextIconName"}),(0,i.jsx)(n.td,{children:"Name of the icon to display for the action context, use one of ContextActionDisplay.CONTEXT_ICON"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"text"}),(0,i.jsx)(n.td,{children:"Display text which describes the context action target"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer?"}),(0,i.jsx)(n.td,{children:"priority"}),(0,i.jsx)(n.td,{children:"[optional, default=0] Context priority, a higher number has higher priority."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"string?"}),(0,i.jsx)(n.td,{children:"actionText"}),(0,i.jsx)(n.td,{children:"[optional] Context action description, if different from context action description"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function ContextActionDisplay:setContext(contextAction, contextIconName, text, priority, actionText)\n    if priority = = nil then\n        priority = 0\n    end\n\n    local newSliceId = self.slicesIds[contextIconName]\n    if priority > = self.contextPriority and newSliceId ~ = nil then\n        self.contextAction = contextAction\n        self.text = utf8ToUpper(text)\n        self.actionText = utf8ToUpper(actionText)\n        self.contextPriority = priority\n\n        if newSliceId ~ = self.lastSliceId then\n            self.iconOverlay:setSliceId(newSliceId)\n            self.lastSliceId = newSliceId\n        end\n\n        self:updateControls()\n        self:setVisible( true )\n\n        self.displayTime = ContextActionDisplay.MIN_DISPLAY_DURATION\n    elseif contextAction = = self.contextAction then\n            self.displayTime = ContextActionDisplay.MIN_DISPLAY_DURATION\n        end\n    end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"storescaledvalues",children:"storeScaledValues"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Store scaled positioning, size and offset values."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"storeScaledValues()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function ContextActionDisplay:storeScaledValues()\n    local offsetX, offsetY = self:scalePixelValuesToScreenVector( 0 , 0 )\n    local posX = 0.5 + offsetX\n    local posY = g_hudAnchorBottom + offsetY\n    self:setPosition(posX, posY)\n\n    local iconWidth, iconHeight = self:scalePixelValuesToScreenVector( 64 , 48 )\n    self.iconOverlay:setDimension(iconWidth, iconHeight)\n    self.iconOffsetX, self.iconOffsetY = self:scalePixelValuesToScreenVector( 5 , - 4 )\n\n    self.titleTextSize = self:scalePixelToScreenHeight( 15 )\n    self.titleTextOffsetY = self:scalePixelToScreenHeight( 5 )\n\n    self.textSize = self:scalePixelToScreenHeight( 26 )\n    self.textOffsetX, self.textOffsetY = self:scalePixelValuesToScreenVector( 10 , 1 )\n    self.textMaxWidth = self:scalePixelToScreenWidth( 500 )\n\n    self.buttonOffsetY = self:scalePixelToScreenHeight( 8 )\n    self.buttonHeight = self:scalePixelToScreenHeight( 25 )\n    self.keyButtonOverlay:setMinWidth( self:scalePixelToScreenWidth( 35 ))\n    self.glyphButtonOverlay:setMinWidth( self:scalePixelToScreenWidth( 35 ))\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"update",children:"update"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Update the context action display state."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"update()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"dt"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function ContextActionDisplay:update(dt)\n    ContextActionDisplay:superClass().update( self , dt)\n\n    local isVisible = self:getVisible()\n    if isVisible then\n        self.displayTime = self.displayTime - dt\n\n        if self.displayTime < 0 then\n            self:setVisible( false )\n            self:resetContext()\n        end\n    end\nend\n\n"})})]})}function x(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}}}]);