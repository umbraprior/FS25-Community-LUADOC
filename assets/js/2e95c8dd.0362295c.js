"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[34219],{28453(e,n,t){t.d(n,{R:()=>o,x:()=>r});var s=t(96540);const l={},i=s.createContext(l);function o(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),s.createElement(i.Provider,{value:n},e.children)}},89773(e,n,t){t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"script/Specializations/PlaceableHotspots","title":"PlaceableHotspots","description":"PlaceableHotspots","source":"@site/../docs/script/Specializations/PlaceableHotspots.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/PlaceableHotspots","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableHotspots","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"PlaceableHeapSpawner","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableHeapSpawner"},"next":{"title":"PlaceableHusbandry","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableHusbandry"}}');var l=t(74848),i=t(28453);const o={},r=void 0,a={},c=[{value:"PlaceableHotspots",id:"placeablehotspots",level:2},{value:"getHotspot",id:"gethotspot",level:3},{value:"onDelete",id:"ondelete",level:3},{value:"onLoad",id:"onload",level:3},{value:"onOwnerChanged",id:"onownerchanged",level:3},{value:"onPostFinalizePlacement",id:"onpostfinalizeplacement",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3},{value:"registerFunctions",id:"registerfunctions",level:3},{value:"registerXMLPaths",id:"registerxmlpaths",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"placeablehotspots",children:"PlaceableHotspots"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Specialization for placeables"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Functions"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#gethotspot",children:"getHotspot"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#ondelete",children:"onDelete"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#onownerchanged",children:"onOwnerChanged"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#onpostfinalizeplacement",children:"onPostFinalizePlacement"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#registerxmlpaths",children:"registerXMLPaths"})}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"gethotspot",children:"getHotspot"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getHotspot()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"index"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function PlaceableHotspots:getHotspot(index)\n    local spec = self.spec_hotspots\n    return spec.mapHotspots[index or 1 ]\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"ondelete",children:"onDelete"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"onDelete()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function PlaceableHotspots:onDelete()\n    local spec = self.spec_hotspots\n\n    g_messageCenter:unsubscribeAll( self )\n    if spec.mapHotspots ~ = nil then\n        for _, hotspot in ipairs(spec.mapHotspots) do\n            g_currentMission:removeMapHotspot(hotspot)\n            hotspot:delete()\n        end\n    end\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Called on loading"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"onLoad(table savegame)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"table"}),(0,l.jsx)(n.th,{children:"savegame"}),(0,l.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function PlaceableHotspots:onLoad(savegame)\n    local spec = self.spec_hotspots\n\n    spec.mapHotspots = { }\n    self.xmlFile:iterate( "placeable.hotspots.hotspot" , function (_, key)\n        local hotspot = PlaceableHotspot.new()\n        hotspot:setPlaceable( self )\n\n        local hotspotTypeName = self.xmlFile:getValue(key .. "#type" , "UNLOADING" )\n        local hotspotType = PlaceableHotspot.getTypeByName(hotspotTypeName)\n        if hotspotType = = nil then\n            Logging.xmlWarning( self.xmlFile, "Unknown placeable hotspot type \'%s\'.Falling back to type \'UNLOADING\'\\nAvailable types: %s" , hotspotTypeName, table.concatKeys(PlaceableHotspot.TYPE, " " ))\n            hotspotType = PlaceableHotspot.TYPE.UNLOADING\n        end\n        hotspot:setPlaceableType(hotspotType)\n\n        local linkNode = self.xmlFile:getValue(key .. "#linkNode" , nil , self.components, self.i3dMappings) or self.rootNode\n        if linkNode ~ = nil then\n            local x, _, z = getWorldTranslation(linkNode)\n            hotspot:setWorldPosition(x, z)\n        end\n\n        local teleportNode = self.xmlFile:getValue(key .. "#teleportNode" , nil , self.components, self.i3dMappings)\n        if teleportNode ~ = nil then\n            local x, y, z = getWorldTranslation(teleportNode)\n            hotspot:setTeleportWorldPosition(x, y, z)\n        end\n\n        local worldPositionX, worldPositionZ = self.xmlFile:getValue(key .. "#worldPosition" , nil )\n        if worldPositionX ~ = nil then\n            hotspot:setWorldPosition(worldPositionX, worldPositionZ)\n        end\n\n        local teleportX, teleportY, teleportZ = self.xmlFile:getValue(key .. "#teleportWorldPosition" , nil )\n        if teleportX ~ = nil then\n            if g_currentMission ~ = nil then\n                teleportY = math.max(teleportY, getTerrainHeightAtWorldPos(g_terrainNode, teleportX, 0 , teleportZ))\n            end\n            hotspot:setTeleportWorldPosition(teleportX, teleportY, teleportZ)\n        end\n\n        local text = self.xmlFile:getValue(key .. "#text" , nil )\n        if text ~ = nil then\n            text = g_i18n:convertText(text, self.customEnvironment)\n            hotspot:setName(text)\n        end\n\n        table.insert(spec.mapHotspots, hotspot)\n    end )\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"onownerchanged",children:"onOwnerChanged"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"onOwnerChanged()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function PlaceableHotspots:onOwnerChanged()\n    self:updateHotspots()\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"onpostfinalizeplacement",children:"onPostFinalizePlacement"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"onPostFinalizePlacement()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function PlaceableHotspots:onPostFinalizePlacement()\n    local spec = self.spec_hotspots\n\n    -- Add now so that the hotspot does not show up during placement\n    for _, hotspot in ipairs(spec.mapHotspots) do\n        g_currentMission:addMapHotspot(hotspot)\n    end\n\n    self:updateHotspots()\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Checks if all prerequisite specializations are loaded"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"prerequisitesPresent(table specializations)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"table"}),(0,l.jsx)(n.th,{children:"specializations"}),(0,l.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"table"}),(0,l.jsx)(n.th,{children:"hasPrerequisite"}),(0,l.jsx)(n.th,{children:"true if all prerequisite specializations are loaded"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function PlaceableHotspots.prerequisitesPresent(specializations)\n    return true\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function PlaceableHotspots.registerEventListeners(placeableType)\n    SpecializationUtil.registerEventListener(placeableType, "onLoad" , PlaceableHotspots )\n    SpecializationUtil.registerEventListener(placeableType, "onDelete" , PlaceableHotspots )\n    SpecializationUtil.registerEventListener(placeableType, "onPostFinalizePlacement" , PlaceableHotspots )\n    SpecializationUtil.registerEventListener(placeableType, "onOwnerChanged" , PlaceableHotspots )\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function PlaceableHotspots.registerFunctions(placeableType)\n    SpecializationUtil.registerFunction(placeableType, "getHotspot" , PlaceableHotspots.getHotspot)\n    SpecializationUtil.registerFunction(placeableType, "updateHotspots" , PlaceableHotspots.updateHotspots)\n    SpecializationUtil.registerFunction(placeableType, "setHotspotVisible" , PlaceableHotspots.setHotspotVisible)\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"registerxmlpaths",children:"registerXMLPaths"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"registerXMLPaths()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"schema"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"basePath"})]})})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function PlaceableHotspots.registerXMLPaths(schema, basePath)\n    schema:setXMLSpecializationType( "Hotspots" )\n    schema:register(XMLValueType.NODE_INDEX, basePath .. ".hotspots.hotspot(?)#linkNode" , "Node where hotspot is linked to" )\n    schema:register(XMLValueType.NODE_INDEX, basePath .. ".hotspots.hotspot(?)#teleportNode" , "Node where player is teleported to.Teleporting is only available if this is set" )\n        schema:register(XMLValueType.STRING, basePath .. ".hotspots.hotspot(?)#type" , "Placeable hotspot type" , "UNLOADING" , false , table.toList(PlaceableHotspot.TYPE))\n        schema:register(XMLValueType.VECTOR_ 2 , basePath .. ".hotspots.hotspot(?)#worldPosition" , "Placeable world position" )\n        schema:register(XMLValueType.VECTOR_ 3 , basePath .. ".hotspots.hotspot(?)#teleportWorldPosition" , "Placeable teleport world position" )\n        schema:register(XMLValueType.STRING, basePath .. ".hotspots.hotspot(?)#text" , "Placeable hotspot text" )\n        schema:setXMLSpecializationType()\n    end\n\n'})})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}}}]);