"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[64997],{28453(e,n,i){i.d(n,{R:()=>r,x:()=>c});var l=i(96540);const a={},t=l.createContext(a);function r(e){const n=l.useContext(t);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),l.createElement(t.Provider,{value:n},e.children)}},60809(e,n,i){i.r(n),i.d(n,{assets:()=>s,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>o});const l=JSON.parse('{"id":"script/Specializations/PlaceableChargingStation","title":"PlaceableChargingStation","description":"PlaceableChargingStation","source":"@site/../docs/script/Specializations/PlaceableChargingStation.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/PlaceableChargingStation","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableChargingStation","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"PlaceableCartridgePlayer","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableCartridgePlayer"},"next":{"title":"PlaceableClearAreas","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableClearAreas"}}');var a=i(74848),t=i(28453);const r={},c=void 0,s={},o=[{value:"PlaceableChargingStation",id:"placeablechargingstation",level:2},{value:"getChargeState",id:"getchargestate",level:3},{value:"getIsCharging",id:"getischarging",level:3},{value:"onLoad",id:"onload",level:3},{value:"onUpdate",id:"onupdate",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"registerFunctions",id:"registerfunctions",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"placeablechargingstation",children:"PlaceableChargingStation"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Specialization for placeables"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Functions"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#getchargestate",children:"getChargeState"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#getischarging",children:"getIsCharging"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#onupdate",children:"onUpdate"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"getchargestate",children:"getChargeState"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"getChargeState()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"function PlaceableChargingStation:getChargeState()\n    local spec = self.spec_chargingStation\n    if spec.loadTrigger ~ = nil then\n        local index = next(spec.loadTrigger.fillableObjects)\n        if index ~ = nil then\n            local vehicle = spec.loadTrigger.fillableObjects[index].object\n            if vehicle.getConsumerFillUnitIndex ~ = nil then\n                local fillUnitIndex = vehicle:getConsumerFillUnitIndex(FillType.ELECTRICCHARGE)\n                if fillUnitIndex ~ = nil then\n                    return vehicle:getFillUnitFillLevel(fillUnitIndex), vehicle:getFillUnitCapacity(fillUnitIndex)\n                end\n            end\n        end\n    end\n\n    return 0 , 1\nend\n\n"})}),"\n",(0,a.jsx)(n.h3,{id:"getischarging",children:"getIsCharging"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"getIsCharging()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"function PlaceableChargingStation:getIsCharging()\n    local spec = self.spec_chargingStation\n    if spec.loadTrigger ~ = nil then\n        return spec.loadTrigger.isLoading\n    end\n\n    return false\nend\n\n"})}),"\n",(0,a.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Called on loading"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"onLoad(table savegame)"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(n.table,{children:(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"table"}),(0,a.jsx)(n.th,{children:"savegame"}),(0,a.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'function PlaceableChargingStation:onLoad(savegame)\n    local spec = self.spec_chargingStation\n\n    spec.chargeIndicatorIntensity = self.xmlFile:getValue( "placeable.chargingStation.chargeIndicator#intensity" , 20 )\n    spec.chargeIndicatorBlinkSpeed = self.xmlFile:getValue( "placeable.chargingStation.chargeIndicator#blinkSpeed" , 5 )\n\n    spec.chargeIndicatorNode = self.xmlFile:getValue( "placeable.chargingStation.chargeIndicator#node" , nil , self.components, self.i3dMappings)\n    if spec.chargeIndicatorNode ~ = nil then\n        setShaderParameter(spec.chargeIndicatorNode, "lightControl" , spec.chargeIndicatorIntensity, 0 , 0 , 0 , false )\n        setShaderParameter(spec.chargeIndicatorNode, "emitColor" , 1 , 1 , 0 , 0 , false )\n    end\n\n    spec.chargeIndicatorLight = self.xmlFile:getValue( "placeable.chargingStation.chargeIndicator#light" , nil , self.components, self.i3dMappings)\n    if spec.chargeIndicatorLight then\n        setLightColor(spec.chargeIndicatorLight, 0 , 0 , 0 )\n    end\n\n    spec.chargeIndicatorColorFull = self.xmlFile:getValue( "placeable.chargingStation.chargeIndicator#colorFull" , "0 1 0 1" , true )\n    spec.chargeIndicatorColorEmpty = self.xmlFile:getValue( "placeable.chargingStation.chargeIndicator#colorEmpty" , "1 1 0 1" , true )\n    spec.chargeIndicatorLightColor = spec.chargeIndicatorColorFull\n\n    spec.interactionRadius = self.xmlFile:getValue( "placeable.chargingStation#interactionRadius" , 5 )\n\n    spec.loadTrigger = nil\n\n    spec.buyingStation = self:getBuyingStation()\n    if spec.buyingStation ~ = nil then\n        for j = 1 , #spec.buyingStation.loadTriggers do\n            local loadTrigger = spec.buyingStation.loadTriggers[j]\n\n            spec.loadTrigger = loadTrigger\n\n            spec.fillSample = g_soundManager:loadSampleFromXML( self.xmlFile, "placeable.chargingStation.sounds" , "fill" , self.baseDirectory, self.components, 0 , AudioGroup.ENVIRONMENT, self.i3dMappings, nil )\n            if spec.fillSample ~ = nil then\n                if loadTrigger.samples.load = = nil then\n                    loadTrigger.samples.load = spec.fillSample\n                end\n            end\n        end\n    end\nend\n\n'})}),"\n",(0,a.jsx)(n.h3,{id:"onupdate",children:"onUpdate"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Update"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"onUpdate(float dt)"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(n.table,{children:(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"float"}),(0,a.jsx)(n.th,{children:"dt"}),(0,a.jsx)(n.th,{children:"time since last call in ms"})]})})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'function PlaceableChargingStation:onUpdate(dt)\n    local spec = self.spec_chargingStation\n\n    if spec.loadTrigger ~ = nil then\n        local isActive = next(spec.loadTrigger.fillableObjects) ~ = nil\n\n        if spec.chargeIndicatorNode ~ = nil then\n            if isActive then\n                local color = spec.chargeIndicatorColorEmpty\n                local fillLevel, capacity = self:getChargeState()\n                if fillLevel / capacity > 0.95 then\n                    color = spec.chargeIndicatorColorFull\n                end\n\n                setShaderParameter(spec.chargeIndicatorNode, "colorScale" , color[ 1 ], color[ 2 ], color[ 3 ], color[ 4 ], false )\n                spec.chargeIndicatorLightColor = color\n            end\n\n            local blinkSpeed = spec.loadTrigger.isLoading and spec.chargeIndicatorBlinkSpeed or 0\n            setShaderParameter(spec.chargeIndicatorNode, "blinkSimple" , blinkSpeed, 0 , 0 , 0 , false )\n            setShaderParameter(spec.chargeIndicatorNode, "lightControl" , isActive and spec.chargeIndicatorIntensity or 0 , 0 , 0 , 0 , false )\n\n            if spec.chargeIndicatorLight ~ = nil then\n                local alpha = 0\n                if isActive then\n                    local blinkFrequency, blinkTimeOffset, _, _ = getShaderParameter(spec.chargeIndicatorNode, "blinkSimple" )\n                    alpha = math.clamp( 4 * math.abs( math.fmod(blinkFrequency * getShaderTimeSec() + blinkTimeOffset, 1 ) - 0.5 ) - 0.8 , 0 , 1 )\n                end\n\n                setLightColor(spec.chargeIndicatorLight, spec.chargeIndicatorLightColor[ 1 ] * alpha, spec.chargeIndicatorLightColor[ 2 ] * alpha, spec.chargeIndicatorLightColor[ 3 ] * alpha)\n            end\n        end\n\n        if spec.loadTrigger.isLoading then\n            local allowDisplay = false\n            local localPlayer = g_localPlayer\n            if localPlayer ~ = nil and not localPlayer:getIsInVehicle() then\n                local distance = calcDistanceFrom(localPlayer.rootNode, self.rootNode)\n                if distance < spec.interactionRadius then\n                    allowDisplay = true\n                end\n            else\n                    local playerVehicle = localPlayer:getCurrentVehicle()\n                    if playerVehicle ~ = nil then\n                        for _, object in pairs(spec.loadTrigger.fillableObjects) do\n                            if object.object = = playerVehicle then\n                                allowDisplay = true\n                            end\n                        end\n                    end\n                end\n\n                if allowDisplay then\n                    local fillLevel, capacity = self:getChargeState()\n                    local fillLevelToFill = capacity - fillLevel\n                    local literPerSecond = spec.loadTrigger.fillLitersPerMS * 1000\n\n                    local seconds = fillLevelToFill / literPerSecond\n                    if seconds > = 1 then\n                        local minutes = math.floor(seconds / 60 )\n                        local hours = math.floor(minutes / 60 )\n                        minutes = minutes - (hours * 60 )\n                        local percentage = fillLevel / capacity * 100\n\n                        local chargingInfoText = string.namedFormat(g_i18n:getText( "info_chargeTime" ), "hours" , hours, "minutes" , minutes, "percentage" , percentage)\n\n                        g_currentMission:addExtraPrintText(chargingInfoText)\n                    end\n                end\n            end\n\n            if isActive then\n                self:raiseActive()\n            end\n        end\n    end\n\n'})}),"\n",(0,a.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Checks if all prerequisite specializations are loaded"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"prerequisitesPresent(table specializations)"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(n.table,{children:(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"table"}),(0,a.jsx)(n.th,{children:"specializations"}),(0,a.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(n.table,{children:(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"table"}),(0,a.jsx)(n.th,{children:"hasPrerequisite"}),(0,a.jsx)(n.th,{children:"true if all prerequisite specializations are loaded"})]})})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"function PlaceableChargingStation.prerequisitesPresent(specializations)\n    return SpecializationUtil.hasSpecialization( PlaceableBuyingStation , specializations)\nend\n\n"})}),"\n",(0,a.jsx)(n.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,a.jsx)(n.table,{children:(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'function PlaceableChargingStation.registerFunctions(placeableType)\n    SpecializationUtil.registerFunction(placeableType, "getIsCharging" , PlaceableChargingStation.getIsCharging)\n    SpecializationUtil.registerFunction(placeableType, "getChargeState" , PlaceableChargingStation.getChargeState)\nend\n\n'})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}}}]);