"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[59680],{28453(e,n,i){i.d(n,{R:()=>s,x:()=>t});var a=i(96540);const l={},r=a.createContext(l);function s(e){const n=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),a.createElement(r.Provider,{value:n},e.children)}},93701(e,n,i){i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"script/Specializations/PlaceableFoliageAreas","title":"PlaceableFoliageAreas","description":"PlaceableFoliageAreas","source":"@site/../docs/script/Specializations/PlaceableFoliageAreas.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/PlaceableFoliageAreas","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableFoliageAreas","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"PlaceableFence","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableFence"},"next":{"title":"PlaceableGreenhouse","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableGreenhouse"}}');var l=i(74848),r=i(28453);const s={},t=void 0,o={},c=[{value:"PlaceableFoliageAreas",id:"placeablefoliageareas",level:2},{value:"loadFoliageArea",id:"loadfoliagearea",level:3},{value:"onLoad",id:"onload",level:3},{value:"onPostFinalizePlacement",id:"onpostfinalizeplacement",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3},{value:"registerFunctions",id:"registerfunctions",level:3},{value:"registerXMLPaths",id:"registerxmlpaths",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"placeablefoliageareas",children:"PlaceableFoliageAreas"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Specialization for placeables"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Functions"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#loadfoliagearea",children:"loadFoliageArea"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#onpostfinalizeplacement",children:"onPostFinalizePlacement"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#registerxmlpaths",children:"registerXMLPaths"})}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"loadfoliagearea",children:"loadFoliageArea"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"loadFoliageArea()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"xmlFile"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"key"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"area"})]})]})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function PlaceableFoliageAreas:loadFoliageArea(xmlFile, key, area)\n    local fruitTypeName = xmlFile:getValue(key .. "#fruitType" )\n    local decoFoliage = xmlFile:getValue(key .. "#decoFoliage" )\n\n    if fruitTypeName ~ = nil and decoFoliage ~ = nil then\n        Logging.xmlInfo(xmlFile, "foliage area has both \'fruitType\' and \'decoFoliage\' defined for \'%s\'.Ignoring decoFoliage" , key)\n            decoFoliage = nil\n        end\n\n        local fruitTypeDesc\n        local fruitGrowthState\n        if fruitTypeName ~ = nil then\n            fruitTypeDesc = g_fruitTypeManager:getFruitTypeByName(fruitTypeName)\n            if fruitTypeDesc = = nil then\n                Logging.xmlWarning(xmlFile, "Foliage area fruit type \'%s\' not defined for \'%s\'" , fruitTypeName, key)\n                    return false\n                end\n\n                local growthStateName = xmlFile:getValue(key .. "#growthStateName" )\n                if growthStateName ~ = nil then\n                    fruitGrowthState = fruitTypeDesc:getGrowthStateByName(growthStateName)\n                    if fruitGrowthState = = nil then\n                        Logging.xmlWarning(xmlFile, "Foliage area fruit type growth state name \'%s\' not defined for \'%s\'" , growthStateName, key)\n                        end\n                    end\n\n                    if fruitGrowthState = = nil then\n                        fruitGrowthState = xmlFile:getValue(key .. "#state" , fruitTypeDesc.maxHarvestingGrowthState - 1 )\n                    end\n                end\n\n                if decoFoliage ~ = nil then\n                    if not g_currentMission.foliageSystem:getIsDecoLayerDefined(decoFoliage) then\n                        Logging.xmlInfo(xmlFile, "Foliage area decoFoliage \'%s\' not defined on current map for \'%s\'" , decoFoliage, key)\n                            return false\n                        end\n                    end\n\n                    local start = xmlFile:getValue(key .. "#startNode" , nil , self.components, self.i3dMappings)\n                    if start = = nil then\n                        Logging.xmlWarning(xmlFile, "Foliage area start node not defined for \'%s\'" , key)\n                            return false\n                        end\n\n                        local width = xmlFile:getValue(key .. "#widthNode" , nil , self.components, self.i3dMappings)\n                        if width = = nil then\n                            Logging.xmlWarning(xmlFile, "Foliage area width node not defined for \'%s\'" , key)\n                                return false\n                            end\n\n                            local height = xmlFile:getValue(key .. "#heightNode" , nil , self.components, self.i3dMappings)\n                            if height = = nil then\n                                Logging.xmlWarning(xmlFile, "Foliage area height node not defined for \'%s\'" , key)\n                                    return false\n                                end\n\n                                area.start = start\n                                area.width = width\n                                area.height = height\n                                area.fruitGrowthState = fruitGrowthState\n                                area.fruitTypeDesc = fruitTypeDesc\n                                area.decoFoliage = decoFoliage\n\n                                return true\n                            end\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Called on loading"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"onLoad(table savegame)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"table"}),(0,l.jsx)(n.th,{children:"savegame"}),(0,l.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function PlaceableFoliageAreas:onLoad(savegame)\n    local spec = self.spec_foliageAreas\n\n    spec.areas = { }\n    self.xmlFile:iterate( "placeable.foliageAreas.foliageArea" , function (_, key)\n        local area = { }\n        if self:loadFoliageArea( self.xmlFile, key, area) then\n            table.insert(spec.areas, area)\n        end\n    end )\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"onpostfinalizeplacement",children:"onPostFinalizePlacement"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"onPostFinalizePlacement()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function PlaceableFoliageAreas:onPostFinalizePlacement()\n    if self.isServer then\n        local spec = self.spec_foliageAreas\n\n        for _, area in pairs(spec.areas) do\n            if area.fruitTypeDesc ~ = nil then\n                local fieldArea = DensityMapParallelogram.createFromNodes(area.start, area.width, area.height)\n                local fieldUpdateTask = FieldUpdateTask.new()\n                fieldUpdateTask:setArea(fieldArea)\n                fieldUpdateTask:setFruit(area.fruitTypeDesc.index, area.fruitGrowthState)\n                g_fieldManager:addFieldUpdateTask(fieldUpdateTask)\n            else\n                    local x, _, z = getWorldTranslation(area.start)\n                    local xWidth, _, zWidth = getWorldTranslation(area.width)\n                    local xHeight, _, zHeight = getWorldTranslation(area.height)\n                    g_currentMission.foliageSystem:applyDecoFoliage(area.decoFoliage, x, z, xWidth, zWidth, xHeight, zHeight)\n                end\n            end\n        end\n    end\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Checks if all prerequisite specializations are loaded"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"prerequisitesPresent(table specializations)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"table"}),(0,l.jsx)(n.th,{children:"specializations"}),(0,l.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"table"}),(0,l.jsx)(n.th,{children:"hasPrerequisite"}),(0,l.jsx)(n.th,{children:"true if all prerequisite specializations are loaded"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function PlaceableFoliageAreas.prerequisitesPresent(specializations)\n    return true\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function PlaceableFoliageAreas.registerEventListeners(placeableType)\n    SpecializationUtil.registerEventListener(placeableType, "onLoad" , PlaceableFoliageAreas )\n    SpecializationUtil.registerEventListener(placeableType, "onPostFinalizePlacement" , PlaceableFoliageAreas )\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function PlaceableFoliageAreas.registerFunctions(placeableType)\n    SpecializationUtil.registerFunction(placeableType, "loadFoliageArea" , PlaceableFoliageAreas.loadFoliageArea)\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"registerxmlpaths",children:"registerXMLPaths"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"registerXMLPaths()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"schema"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"basePath"})]})})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function PlaceableFoliageAreas.registerXMLPaths(schema, basePath)\n    schema:setXMLSpecializationType( "FoliageAreas" )\n    schema:register(XMLValueType.NODE_INDEX, basePath .. ".foliageAreas.foliageArea(?)#startNode" , "Start node" )\n    schema:register(XMLValueType.NODE_INDEX, basePath .. ".foliageAreas.foliageArea(?)#widthNode" , "Width node" )\n    schema:register(XMLValueType.NODE_INDEX, basePath .. ".foliageAreas.foliageArea(?)#heightNode" , "Height node" )\n    schema:register(XMLValueType.STRING, basePath .. ".foliageAreas.foliageArea(?)#fruitType" , "Fruit type name" )\n    schema:register(XMLValueType.STRING, basePath .. ".foliageAreas.foliageArea(?)#growthStateName" , "Fruit type growth state name" )\n    schema:register(XMLValueType.STRING, basePath .. ".foliageAreas.foliageArea(?)#decoFoliage" , "Deco foliage name" )\n    schema:register(XMLValueType.INT, basePath .. ".foliageAreas.foliageArea(?)#state" , "Fruit type state" )\n    schema:setXMLSpecializationType()\nend\n\n'})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}}}]);