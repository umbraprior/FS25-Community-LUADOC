"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[62451],{28453(e,n,t){t.d(n,{R:()=>d,x:()=>r});var l=t(96540);const i={},s=l.createContext(i);function d(e){const n=l.useContext(s);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),l.createElement(s.Provider,{value:n},e.children)}},43993(e,n,t){t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>d,metadata:()=>l,toc:()=>c});const l=JSON.parse('{"id":"script/GUI/IndexStateElement","title":"IndexStateElement","description":"IndexStateElement","source":"@site/../docs/script/GUI/IndexStateElement.md","sourceDirName":"script/GUI","slug":"/script/GUI/IndexStateElement","permalink":"/FS25-Community-LUADOC/script/GUI/IndexStateElement","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"IndexChangeSubjectMixin","permalink":"/FS25-Community-LUADOC/script/GUI/IndexChangeSubjectMixin"},"next":{"title":"InfoDialog","permalink":"/FS25-Community-LUADOC/script/GUI/InfoDialog"}}');var i=t(74848),s=t(28453);const d={},r=void 0,a={},c=[{value:"IndexStateElement",id:"indexstateelement",level:2},{value:"copyAttributes",id:"copyattributes",level:3},{value:"loadFromXML",id:"loadfromxml",level:3},{value:"loadProfile",id:"loadprofile",level:3},{value:"locateIndexableElement",id:"locateindexableelement",level:3},{value:"locateStateElementTemplate",id:"locatestateelementtemplate",level:3},{value:"new",id:"new",level:3},{value:"onGuiSetupFinished",id:"onguisetupfinished",level:3},{value:"onIndexChange",id:"onindexchange",level:3},{value:"setPageCount",id:"setpagecount",level:3}];function o(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"indexstateelement",children:"IndexStateElement"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Index state display element.\nDisplays a visual element per screen page to let the player see an indication of their current list, page or multi-\noption selection index. The element points at a UI element which supports indexed access, such as ListElement,\nPageElement or MultiTextOption. For other cases, UI views directly manipulate the states (e.g. cycling hints in the\nloading screen)."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Parent"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"?version=script&category=43&class=459",children:"BoxLayoutElement"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Functions"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#copyattributes",children:"copyAttributes"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#loadfromxml",children:"loadFromXML"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#loadprofile",children:"loadProfile"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#locateindexableelement",children:"locateIndexableElement"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#locatestateelementtemplate",children:"locateStateElementTemplate"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#new",children:"new"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onguisetupfinished",children:"onGuiSetupFinished"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onindexchange",children:"onIndexChange"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#setpagecount",children:"setPageCount"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"copyattributes",children:"copyAttributes"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"copyAttributes()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"src"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function IndexStateElement:copyAttributes(src)\n    IndexStateElement:superClass().copyAttributes( self , src)\n\n    self.stateElementTemplate = src.stateElementTemplate:clone()\n    self.indexableElement = src.indexableElement\n    self.indexableElementId = src.indexableElementId\n    self.reverseElements = src.reverseElements\n    self.indexMinimizeWidth = src.indexMinimizeWidth\n\n    self:locateIndexableElement()\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"loadfromxml",children:"loadFromXML"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"loadFromXML()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"xmlFile"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"key"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function IndexStateElement:loadFromXML(xmlFile, key)\n    IndexStateElement:superClass().loadFromXML( self , xmlFile, key)\n\n    self.stateElementTemplateId = getXMLString(xmlFile, key .. "#stateElementTemplateId" )\n    self.indexableElementId = getXMLString(xmlFile, key .. "#indexableElementId" )\n    self.reverseElements = Utils.getNoNil(getXMLBool(xmlFile, key .. "#reverseElements" ), self.reverseElements)\n    self.indexMinimizeWidth = Utils.getNoNil(getXMLBool(xmlFile, key .. "#indexMinimizeWidth" ), self.indexMinimizeWidth)\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"loadprofile",children:"loadProfile"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"loadProfile()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"profile"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"applyProfile"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function IndexStateElement:loadProfile(profile, applyProfile)\n    IndexStateElement:superClass().loadProfile( self , profile, applyProfile)\n\n    self.reverseElements = profile:getBool( "reverseElements" , self.reverseElements)\n    self.indexMinimizeWidth = profile:getBool( "indexMinimizeWidth" , self.indexMinimizeWidth)\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"locateindexableelement",children:"locateIndexableElement"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Find and store the indexable element which is configured in #indexableElementId.\nThe function first locates the current view root (if possible) and then searches downwards. The search is broader\nthan locateStateElementTemplate() to allow more flexibility in UI design and configuration."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"locateIndexableElement()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function IndexStateElement:locateIndexableElement()\n    if self.indexableElementId then -- locate indexable element if reference is set\n        local root = self.parent\n        local levels = 20\n        while root.parent and levels > 0 do\n            root = root.parent\n            levels = levels - 1\n        end\n\n        self.indexableElement = root:getDescendantById( self.indexableElementId)\n\n        if self.indexableElement then\n            if self.indexableElement:hasIncluded( IndexChangeSubjectMixin ) then\n                self.indexableElement:addIndexChangeObserver( self , self.onIndexChange)\n            else\n                    printWarning( "Warning:Element " .. tostring( self.indexableElement) .. " does not support index change observers and is not valid to be targeted by IndexStateElement " .. tostring( self ) .. ".Check configuration." )\n                end\n            else\n                    printWarning( "Warning:IndexStateElement " .. tostring( self ) .. " could not find valid indexable element with ID [" .. tostring( self.indexableElementId) .. "].Check configuration." )\n                end\n            end -- otherwise assume custom control over this element\n        end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"locatestateelementtemplate",children:"locateStateElementTemplate"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Find and store the state element template which is configured in #stateElementTemplateId.\nThe function searches from this elements parent downwards, so any descendant of this element or its siblings may\ncontain the state element template."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"locateStateElementTemplate()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function IndexStateElement:locateStateElementTemplate()\n    -- get template element from configured ID\n    self.stateElementTemplate = self.parent:getDescendantById( self.stateElementTemplateId)\n    if self.stateElementTemplate then\n        self.stateElementTemplate:setVisible( false )\n        self.stateElementTemplate:setHandleFocus( false ) -- no focus, no highlight\n        self.stateElementTemplate:unlinkElement() -- take out of hierarchy to avoid further updates\n    else\n            printWarning( "Warning:IndexStateElement " .. tostring( self ) .. " could not find state element template with ID [" .. tostring( self.stateElementTemplateId) .. "].Check configuration." )\n        end\n    end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"new",children:"new"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"new()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"target"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"custom_mt"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function IndexStateElement.new(target, custom_mt)\n    if custom_mt = = nil then\n        custom_mt = IndexStateElement _mt\n    end\n\n    local self = BoxLayoutElement.new(target, custom_mt)\n\n    self.pageElements = { }\n    self.currentPageIndex = 1\n    self.indexableElementId = nil\n    self.indexableElement = nil\n    self.stateElementTemplateId = nil\n    self.stateElementTemplate = nil\n    self.reverseElements = false\n    self.indexMinimizeWidth = false\n\n    return self\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"onguisetupfinished",children:"onGuiSetupFinished"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onGuiSetupFinished()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function IndexStateElement:onGuiSetupFinished()\n    IndexStateElement:superClass().onGuiSetupFinished( self )\n\n    if not self.stateElementTemplate then\n        self:locateStateElementTemplate()\n    end\n\n    if not self.indexableElement and self.indexableElementId ~ = nil then\n        self:locateIndexableElement()\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"onindexchange",children:"onIndexChange"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Event handler for index changes."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onIndexChange(integer index, integer count)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"integer"}),(0,i.jsx)(n.th,{children:"index"}),(0,i.jsx)(n.th,{children:"New index"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"count"}),(0,i.jsx)(n.td,{children:"(New) item count"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function IndexStateElement:onIndexChange(index, count)\n    if count ~ = # self.pageElements then\n        self:setPageCount(count, index)\n    end\n\n    self:setPageIndex(index)\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"setpagecount",children:"setPageCount"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Set the page count.\nClears current page elements and rebuilds as many as needed from the configured template."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"setPageCount(integer count, integer? initialIndex)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"integer"}),(0,i.jsx)(n.th,{children:"count"}),(0,i.jsx)(n.th,{children:"Number of page indicators to display"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer?"}),(0,i.jsx)(n.td,{children:"initialIndex"}),(0,i.jsx)(n.td,{children:"[optional] Page index to set after rebuilding"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function IndexStateElement:setPageCount(count, initialIndex)\n    -- locate the state element template if page count has been set before GUI finalization\n        if not self.stateElementTemplate then\n            self:locateStateElementTemplate()\n        end\n\n        if count ~ = # self.pageElements then\n            -- clear pages\n            for _, element in pairs( self.pageElements) do\n                self:removeElement(element)\n                element:delete()\n            end\n            self.pageElements = { }\n\n            -- replicate template\n            for _ = 1 , count do\n                local stateElement = self.stateElementTemplate:clone( self )\n                stateElement:setVisible( true )\n                table.insert( self.pageElements, stateElement)\n            end\n\n            -- rebuild layout\n            self:invalidateLayout()\n            if initialIndex then\n                self:setPageIndex(initialIndex)\n            end\n\n            self:updateSize()\n        end\n    end\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}}}]);