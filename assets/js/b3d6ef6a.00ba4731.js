"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[25682],{28453(n,e,t){t.d(e,{R:()=>l,x:()=>c});var s=t(96540);const r={},o=s.createContext(r);function l(n){const e=s.useContext(o);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:l(n.components),s.createElement(o.Provider,{value:e},n.children)}},92751(n,e,t){t.r(e),t.d(e,{assets:()=>i,contentTitle:()=>c,default:()=>a,frontMatter:()=>l,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"script/Utils/ObjectPool","title":"ObjectPool","description":"ObjectPool","source":"@site/../docs/script/Utils/ObjectPool.md","sourceDirName":"script/Utils","slug":"/script/Utils/ObjectPool","permalink":"/FS25-Community-LUADOC/script/Utils/ObjectPool","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"ObjectChangeUtil","permalink":"/FS25-Community-LUADOC/script/Utils/ObjectChangeUtil"},"next":{"title":"StateMachine","permalink":"/FS25-Community-LUADOC/script/Utils/StateMachine"}}');var r=t(74848),o=t(28453);const l={},c=void 0,i={},h=[{value:"ObjectPool",id:"objectpool",level:2},{value:"clear",id:"clear",level:3},{value:"getLength",id:"getlength",level:3},{value:"getOrCreateNext",id:"getorcreatenext",level:3},{value:"new",id:"new",level:3},{value:"returnToPool",id:"returntopool",level:3}];function d(n){const e={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h2,{id:"objectpool",children:"ObjectPool"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Holds a collection of pooled objects and handles creating new ones when the pool is empty."}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Functions"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#clear",children:"clear"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#getlength",children:"getLength"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#getorcreatenext",children:"getOrCreateNext"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#new",children:"new"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#returntopool",children:"returnToPool"})}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"clear",children:"clear"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Removes all instances from the pool's collections."}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"clear()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function ObjectPool:clear()\n    table.clear( self.poolSet)\n    table.clear( self.pool)\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"getlength",children:"getLength"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Gets the total count of objects in the pool."}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"getLength()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"count"}),(0,r.jsx)(e.th,{children:"The number of items in the pool."})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function ObjectPool:getLength()\n    -- TODO:Replace with __len metafunction in Lua 5.2\n    return # self.pool\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"getorcreatenext",children:"getOrCreateNext"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Gets and returns an instance from the pool, or creates one if the pool is empty."}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"getOrCreateNext()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"instance"}),(0,r.jsx)(e.th,{children:"The pooled or created object."})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function ObjectPool:getOrCreateNext()\n\n    -- Get the next object in the pool.\n    local instance = table.remove( self.pool)\n\n    -- If there was no object in the pool, create a new one.\n    if not instance then\n\n        -- If the constructor is the default empty table, skip the unpacking.\n        if self.objectConstructor = = ObjectPool.EMPTY_TABLE_CONSTRUCTOR then\n            instance = self.objectConstructor()\n            -- Otherwise; unpack the arguments and call the constructor.\n        else\n                instance = self.objectConstructor( table.unpack( self.objectConstructorArguments, 1 , self.objectConstructorArguments.n))\n            end\n            -- Otherwise; also remove the object from the set.\n        else\n                self.poolSet[instance] = nil\n            end\n\n            -- Return the created or gotten object.\n            return instance\n        end\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"new",children:"new"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Creates a new object pool with the given constructor."}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"new(function? objectConstructor, any ...)"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"function?"}),(0,r.jsx)(e.th,{children:"objectConstructor"}),(0,r.jsx)(e.th,{children:"The constructor function to call in order to create new objects when the pool is empty. If this is nil, ObjectPool.EMPTY_TABLE_CONSTRUCTOR will be used."})]})}),(0,r.jsx)(e.tbody,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"..."}),(0,r.jsx)(e.td,{children:"The arguments to pass through to the constructor."})]})})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"instance"}),(0,r.jsx)(e.th,{children:"The created instance."})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:'function ObjectPool.new(objectConstructor, .. .)\n\n    -- Ensure a constructor was given or is nil.\n    --#debug Assert.isNilOrType(objectConstructor, "function", "Object constructor was not a function or nil!")\n\n        -- Create the instance.\n        local self = setmetatable( { } , ObjectPool _mt)\n\n        -- The object constructor and arguments.\n        self.objectConstructor = objectConstructor or ObjectPool.EMPTY_TABLE_CONSTRUCTOR\n        self.objectConstructorArguments = table.pack( .. .)\n\n        -- The pool of objects.\n        self.pool = { }\n\n        -- The set of pooled objects to avoid duplicates.\n        self.poolSet = { }\n\n        -- Return the created instance.\n        return self\n    end\n\n'})}),"\n",(0,r.jsx)(e.h3,{id:"returntopool",children:"returnToPool"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Returns the given instance to the pool."}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"returnToPool(table instance)"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"table"}),(0,r.jsx)(e.th,{children:"instance"}),(0,r.jsx)(e.th,{children:"The instance to return to the pool."})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:'function ObjectPool:returnToPool(instance)\n\n    -- Ensure the given instance exists.\n    if instance = = nil then\n        return false\n    end\n    --#debug Assert.isType(instance, "table", "Given instance was not a table!")\n\n    -- Ensure the object is not already pooled.\n    if self.poolSet[instance] ~ = nil then\n        return false\n    end\n\n    -- If the object constructor is the default empty table, clear the table.\n    if self.objectConstructor = = ObjectPool.EMPTY_TABLE_CONSTRUCTOR then\n        table.clear(instance)\n        -- Otherwise; if the instance has a reset function, call it.\n        elseif instance.reset ~ = nil then\n                instance:reset()\n            end\n\n            -- Add the object to the collections.\n            table.insert( self.pool, instance)\n            self.poolSet[instance] = instance\n\n            -- Return true, as the addition was a success.\n            return true\n        end\n\n'})})]})}function a(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}}}]);