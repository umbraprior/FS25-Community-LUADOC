"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[32477],{7003(e,n,s){s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"script/GUI/HUDPopupMessageMobile","title":"HUDPopupMessageMobile","description":"HUDPopupMessageMobile","source":"@site/../docs/script/GUI/HUDPopupMessageMobile.md","sourceDirName":"script/GUI","slug":"/script/GUI/HUDPopupMessageMobile","permalink":"/FS25-Community-LUADOC/script/GUI/HUDPopupMessageMobile","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"HUDFrameElement","permalink":"/FS25-Community-LUADOC/script/GUI/HUDFrameElement"},"next":{"title":"HUDSliderElement","permalink":"/FS25-Community-LUADOC/script/GUI/HUDSliderElement"}}');var i=s(74848),l=s(28453);const r={},o=void 0,a={},c=[{value:"HUDPopupMessageMobile",id:"hudpopupmessagemobile",level:2},{value:"animateHide",id:"animatehide",level:3},{value:"assignCurrentMessage",id:"assigncurrentmessage",level:3},{value:"createBackground",id:"createbackground",level:3},{value:"createComponents",id:"createcomponents",level:3},{value:"createInputRow",id:"createinputrow",level:3},{value:"draw",id:"draw",level:3},{value:"finishMessage",id:"finishmessage",level:3},{value:"getBackgroundPosition",id:"getbackgroundposition",level:3},{value:"getHidingTranslation",id:"gethidingtranslation",level:3},{value:"getInputRowsHeight",id:"getinputrowsheight",level:3},{value:"getTextHeight",id:"gettextheight",level:3},{value:"getTitleHeight",id:"gettitleheight",level:3},{value:"getVisible",id:"getvisible",level:3},{value:"new",id:"new",level:3},{value:"onConfirmMessage",id:"onconfirmmessage",level:3},{value:"setCurrentMessageHeight",id:"setcurrentmessageheight",level:3},{value:"setDimension",id:"setdimension",level:3},{value:"setInputActive",id:"setinputactive",level:3},{value:"setScale",id:"setscale",level:3},{value:"showMessage",id:"showmessage",level:3},{value:"startMessage",id:"startmessage",level:3},{value:"storeScaledValues",id:"storescaledvalues",level:3},{value:"update",id:"update",level:3},{value:"updateButtonGlyphs",id:"updatebuttonglyphs",level:3},{value:"updateCurrentMessage",id:"updatecurrentmessage",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"hudpopupmessagemobile",children:"HUDPopupMessageMobile"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"HUD popup message.\nDisplays a modal popup message which requires a player input to be accepted / dismissed or expires after a given\ntime. based on the HUDPopupMessage, but repurposed for mobile devices."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Parent"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"?version=script&category=43&class=455",children:"HUDDisplayElement"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Functions"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#animatehide",children:"animateHide"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#assigncurrentmessage",children:"assignCurrentMessage"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#createbackground",children:"createBackground"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#createcomponents",children:"createComponents"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#createinputrow",children:"createInputRow"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#draw",children:"draw"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#finishmessage",children:"finishMessage"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getbackgroundposition",children:"getBackgroundPosition"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#gethidingtranslation",children:"getHidingTranslation"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getinputrowsheight",children:"getInputRowsHeight"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#gettextheight",children:"getTextHeight"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#gettitleheight",children:"getTitleHeight"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getvisible",children:"getVisible"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#new",children:"new"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onconfirmmessage",children:"onConfirmMessage"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#setcurrentmessageheight",children:"setCurrentMessageHeight"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#setdimension",children:"setDimension"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#setinputactive",children:"setInputActive"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#setscale",children:"setScale"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#showmessage",children:"showMessage"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#startmessage",children:"startMessage"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#storescaledvalues",children:"storeScaledValues"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#update",children:"update"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#updatebuttonglyphs",children:"updateButtonGlyphs"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#updatecurrentmessage",children:"updateCurrentMessage"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"animatehide",children:"animateHide"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Animate this element on showing."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"animateHide()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function HUDPopupMessageMobile:animateHide()\n    HUDPopupMessageMobile:superClass().animateHide( self )\n\n    g_depthOfFieldManager:popArea()\n    self.blurAreaActive = false\n    self.animation:addCallback( self.finishMessage) -- call finishMessage when animation has completed\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"assigncurrentmessage",children:"assignCurrentMessage"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Assign a new current message and adjust display state accordingly.\nThis also resizes the message box according to the required space."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"assignCurrentMessage()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"message"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function HUDPopupMessageMobile:assignCurrentMessage(message)\n    self.time = 0\n    self.currentMessage = message\n\n    if g_touchHandler ~ = nil then\n        g_touchHandler:setCustomContext( "guidedTour" , true )\n        g_touchHandler:registerTouchArea( 0 , 0 , 1 , 1 , 0 , 0 , TouchHandler.TRIGGER_UP, self.onConfirmMessage, self )\n    end\n\n    local isTouch = g_inputBinding:getInputHelpMode() = = GS_INPUT_HELP_MODE_TOUCH\n    self.continueGlyph:setVisible( not isTouch)\n\n    self:setCurrentMessageHeight()\n    self:updateButtonGlyphs()\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"createbackground",children:"createBackground"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Create the background overlay."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"createBackground()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"hudAtlasPath"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function HUDPopupMessageMobile.createBackground(hudAtlasPath)\n    local posX, posY = HUDPopupMessageMobile.getBackgroundPosition( 1 )\n    local width, height = getNormalizedScreenValues( unpack( HUDPopupMessageMobile.SIZE.SELF))\n\n    local overlay = Overlay.new(hudAtlasPath, posX - width * 0.5 , posY, width, height)\n    overlay:setUVs( GuiUtils.getUVs( HUDPopupMessageMobile.UV.BACKGROUND))\n    overlay:setColor( unpack( HUDPopupMessageMobile.COLOR.BACKGROUND))\n    return overlay\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"createcomponents",children:"createComponents"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Create required display components."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"createComponents()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"hudAtlasPath"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function HUDPopupMessageMobile:createComponents(hudAtlasPath)\n    local basePosX, basePosY = self:getPosition()\n    local baseWidth = self:getWidth()\n\n    local _, inputRowHeight = self:scalePixelToScreenVector( HUDPopupMessageMobile.SIZE.INPUT_ROW)\n\n    local posY = basePosY + inputRowHeight -- add one row's height as spacing for the continue button\n        for i = 1 , HUDPopupMessageMobile.MAX_INPUT_ROW_COUNT do\n            local buttonRow, inputGlyph\n\n            buttonRow, inputGlyph, posY = self:createInputRow(hudAtlasPath, basePosX, posY)\n            local rowIndex = HUDPopupMessageMobile.MAX_INPUT_ROW_COUNT - i + 1\n            self.inputRows[rowIndex] = buttonRow\n            self.inputGlyphs[rowIndex] = inputGlyph\n            self:addChild(buttonRow)\n        end\n\n        local offX, offY = self:scalePixelToScreenVector( HUDPopupMessageMobile.POSITION.CONTINUE_BUTTON)\n        local glyphWidth, glyphHeight = self:scalePixelToScreenVector( HUDPopupMessageMobile.SIZE.INPUT_GLYPH)\n        local continueGlyph = InputGlyphElement.new(g_inputDisplayManager, glyphWidth, glyphHeight)\n        continueGlyph:setPosition(basePosX + (baseWidth - glyphWidth) * 0.5 + offX, basePosY - offY)\n        continueGlyph:setAction(InputAction.SKIP_MESSAGE_BOX, g_i18n:getText( HUDPopupMessageMobile.L10N_SYMBOL.BUTTON_OK), self.continueTextSize, true , false )\n\n        self.continueGlyph = continueGlyph\n        self:addChild(continueGlyph)\n    end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"createinputrow",children:"createInputRow"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Create components for an input button row."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"createInputRow()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"hudAtlasPath"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"posX"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"posY"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function HUDPopupMessageMobile:createInputRow(hudAtlasPath, posX, posY)\n    local overlay = Overlay.new(hudAtlasPath, posX, posY, self.inputRowWidth, self.inputRowHeight)\n    overlay:setUVs( GuiUtils.getUVs( HUDPopupMessageMobile.UV.BACKGROUND))\n    overlay:setColor( unpack( HUDPopupMessageMobile.COLOR.INPUT_ROW))\n    local buttonPanel = HUDElement.new(overlay)\n\n    local rowHeight = buttonPanel:getHeight()\n\n    local glyphWidth, glyphHeight = self:scalePixelToScreenVector( HUDPopupMessageMobile.SIZE.INPUT_GLYPH)\n    local inputGlyph = InputGlyphElement.new(g_inputDisplayManager, glyphWidth, glyphHeight)\n    local offX, offY = self:scalePixelToScreenVector( HUDPopupMessageMobile.POSITION.INPUT_GLYPH)\n    local glyphX, glyphY = posX + self.borderPaddingX + offX, posY + (rowHeight - glyphHeight) * 0.5 + offY\n    inputGlyph:setPosition(glyphX, glyphY)\n    buttonPanel:addChild(inputGlyph)\n\n    local width, height = self:scalePixelToScreenVector( HUDPopupMessageMobile.SIZE.SEPARATOR)\n    height = math.max(height, HUDPopupMessageMobile.SIZE.SEPARATOR[ 2 ] / g_screenHeight)\n    offX, offY = self:scalePixelToScreenVector( HUDPopupMessageMobile.POSITION.SEPARATOR)\n    overlay = Overlay.new(hudAtlasPath, posX + offX, posY + offY, width, height)\n    overlay:setUVs( GuiUtils.getUVs( GameInfoDisplay.UV.SEPARATOR))\n    overlay:setColor( unpack( GameInfoDisplay.COLOR.SEPARATOR))\n    local separator = HUDElement.new(overlay)\n    buttonPanel:addChild(separator)\n\n    return buttonPanel, inputGlyph, posY + rowHeight\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"draw",children:"draw"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Draw the message."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"draw()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function HUDPopupMessageMobile:draw()\n    if not g_gui:getIsMenuVisible() and self:getVisible() and self.currentMessage ~ = nil then\n        HUDPopupMessageMobile:superClass().draw( self )\n\n        local baseX, baseY = self:getPosition()\n        local width, height = self:getWidth(), self:getHeight()\n\n        -- title\n        setTextColor( unpack( HUDPopupMessageMobile.COLOR.TITLE))\n        setTextBold( true )\n        setTextAlignment(RenderText.ALIGN_CENTER)\n        setTextWrapWidth(width - 2 * self.borderPaddingX)\n        local textPosY = baseY + height - self.borderPaddingY\n\n        if self.currentMessage.title ~ = "" then\n            local title = utf8ToUpper( self.currentMessage.title)\n            textPosY = textPosY - self.titleTextSize\n            renderText(baseX + width * 0.5 , textPosY, self.titleTextSize, title)\n        end\n\n        -- message\n        setTextBold( false )\n        setTextColor( unpack( HUDPopupMessageMobile.COLOR.TEXT))\n        setTextAlignment(RenderText.ALIGN_LEFT)\n        setTextLineHeightScale( HUDPopupMessageMobile.TEXT_LINE_HEIGHT_SCALE)\n        textPosY = textPosY - self.textSize + self.textOffsetY\n        renderText(baseX + self.borderPaddingX, textPosY, self.textSize, self.currentMessage.message)\n        textPosY = textPosY - getTextHeight( self.textSize, self.currentMessage.message)\n\n        -- input rows\n        setTextColor( unpack( HUDPopupMessageMobile.COLOR.CONTINUE_TEXT))\n        setTextAlignment(RenderText.ALIGN_RIGHT)\n        local posX = baseX + width - self.borderPaddingX\n        local posY = textPosY + self.inputRowsOffsetY - self.inputRowHeight - self.textSize\n        for i = 1 , # self.currentMessage.controls do\n            local inputText = self.currentMessage.controls[i].text\n            renderText(posX + self.inputRowTextX, posY + self.inputRowTextY, self.textSize, inputText)\n\n            posY = posY - self.inputRowHeight\n        end\n\n        setTextAlignment(RenderText.ALIGN_CENTER)\n\n        if g_inputBinding:getInputHelpMode() = = GS_INPUT_HELP_MODE_TOUCH then\n            local continueX, continueY = self.continueGlyph:getPosition()\n            continueX = continueX + self.continueGlyph.baseWidth / 2\n            continueY = continueY + self.continueTextSize / 2\n            renderText(continueX, continueY, self.continueTextSize, self.continueText)\n        end\n\n        setTextAlignment(RenderText.ALIGN_LEFT)\n\n        -- reset uncommon text settings:\n        setTextWrapWidth( 0 )\n        setTextLineHeightScale(RenderText.DEFAULT_LINE_HEIGHT_SCALE)\n    end\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"finishmessage",children:"finishMessage"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Finish displaying a message after it has either elapsed or been acknowledged by the player.\nResets display and input state and triggers any provided message callback."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"finishMessage()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function HUDPopupMessageMobile:finishMessage()\n    self.ingameMap:setAllowToggle( true ) -- (re-)enable toggle input on map\n\n    if self.currentMessage ~ = nil and self.currentMessage.callback ~ = nil then\n        if self.currentMessage.target ~ = nil then\n            self.currentMessage.callback( self.currentMessage.target)\n        else\n                self.currentMessage.callback( self )\n            end\n        end\n\n        self.currentMessage = nil\n    end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getbackgroundposition",children:"getBackgroundPosition"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Get this element's base background position."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getBackgroundPosition(float uiScale)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"float"}),(0,i.jsx)(n.th,{children:"uiScale"}),(0,i.jsx)(n.th,{children:"Current UI scale factor"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function HUDPopupMessageMobile.getBackgroundPosition(uiScale)\n    local offX, offY = getNormalizedScreenValues( unpack( HUDPopupMessageMobile.POSITION.SELF))\n    return 0.5 + offX * uiScale, g_safeFrameOffsetY + offY * uiScale -- bottom center plus offset\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"gethidingtranslation",children:"getHidingTranslation"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Get the screen space translation for hiding.\nOverride in sub-classes if a different translation is required."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getHidingTranslation()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"float"}),(0,i.jsx)(n.th,{children:"Screen"}),(0,i.jsx)(n.th,{children:"space X translation"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"float"}),(0,i.jsx)(n.td,{children:"Screen"}),(0,i.jsx)(n.td,{children:"space Y translation"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function HUDPopupMessageMobile:getHidingTranslation()\n    return 0 , - self:getHeight() - g_safeFrameOffsetY - 0.01\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getinputrowsheight",children:"getInputRowsHeight"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Get the display height of the current message's input rows."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getInputRowsHeight()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function HUDPopupMessageMobile:getInputRowsHeight()\n    local height = 0\n    if self.currentMessage ~ = nil then\n        -- add one to row count for the continue button\n            height = (# self.currentMessage.controls + 1 ) * self.inputRowHeight\n        end\n\n        return height\n    end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"gettextheight",children:"getTextHeight"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Get the display height of the current message's text."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getTextHeight()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function HUDPopupMessageMobile:getTextHeight()\n    local height = 0\n    if self.currentMessage ~ = nil then\n        setTextAlignment(RenderText.ALIGN_LEFT)\n        setTextBold( false )\n        setTextWrapWidth( self:getWidth() - 2 * self.borderPaddingX)\n        setTextLineHeightScale( HUDPopupMessageMobile.TEXT_LINE_HEIGHT_SCALE)\n        height = getTextHeight( self.textSize, self.currentMessage.message)\n\n        setTextWrapWidth( 0 )\n        setTextLineHeightScale(RenderText.DEFAULT_LINE_HEIGHT_SCALE)\n    end\n\n    return height\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"gettitleheight",children:"getTitleHeight"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Get the display height of the current message's title."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getTitleHeight()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function HUDPopupMessageMobile:getTitleHeight()\n    local height = 0\n    if self.currentMessage ~ = nil then\n        setTextAlignment(RenderText.ALIGN_CENTER)\n        setTextBold( false )\n        setTextWrapWidth( self:getWidth() - 2 * self.borderPaddingX)\n        local title = utf8ToUpper( self.currentMessage.title)\n        local lineHeight, numTitleRows = getTextHeight( self.titleTextSize, title)\n\n        height = numTitleRows * lineHeight\n\n        setTextWrapWidth( 0 )\n        setTextAlignment(RenderText.ALIGN_LEFT)\n    end\n\n    return height\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getvisible",children:"getVisible"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Get this HUD element's visibility."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getVisible()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function HUDPopupMessageMobile:getVisible()\n    return HUDPopupMessageMobile:superClass().getVisible( self ) and self.currentMessage ~ = nil\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"new",children:"new"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Create a new instance of HUDPopupMessageMobile."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"new(string hudAtlasPath, ingameMap IngameMap)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"string"}),(0,i.jsx)(n.th,{children:"hudAtlasPath"}),(0,i.jsx)(n.th,{children:"Path to the HUD texture atlas"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"ingameMap"}),(0,i.jsx)(n.td,{children:"IngameMap"}),(0,i.jsx)(n.td,{children:"reference used to notify the map when a message is shown"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"ingameMap"}),(0,i.jsx)(n.th,{children:"HUDPopupMessageMobile"}),(0,i.jsx)(n.th,{children:"instance"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function HUDPopupMessageMobile.new(hudAtlasPath, ingameMap)\n    local backgroundOverlay = HUDPopupMessageMobile.createBackground(hudAtlasPath)\n    local self = HUDPopupMessageMobile:superClass().new(backgroundOverlay, nil , HUDPopupMessageMobile _mt)\n\n    self.ingameMap = ingameMap -- in game map reference required to hide the map when showing a message\n\n    self.pendingMessages = { } -- {i = {<message as defined in showMessage()>}}, ordered as a queue\n    self.isCustomInputActive = false -- input state flag\n    self.lastInputMode = g_inputBinding:getInputHelpMode()\n\n    self.inputRows = { } -- {i = HUDElement}\n    self.inputGlyphs = { } -- {i = InputGlyphElement}, synchronous with self.inputRows\n    self.continueGlyph = nil -- InputGlyphElement\n\n    self.time = 0 -- accumulated message display time\n    self.isGamePaused = false -- game paused state\n\n    self.continueText = g_i18n:getText( "introduction_continueTextTouch" )\n\n    self:storeScaledValues()\n    self:createComponents(hudAtlasPath)\n\n    return self\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"onconfirmmessage",children:"onConfirmMessage"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Event function for either InputAction.SKIP_MESSAGE_BOX or InputAction.MENU_ACCEPT."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onConfirmMessage()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"actionName"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"inputValue"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function HUDPopupMessageMobile:onConfirmMessage(actionName, inputValue)\n    if self.animation:getFinished() then -- callbacks are tied to animation, make sure animation is not active\n        if g_touchHandler ~ = nil then\n            g_touchHandler:revertCustomContext()\n        end\n\n        self:setVisible( false , true )\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"setcurrentmessageheight",children:"setCurrentMessageHeight"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Calculates the total display height of the current message, then sets it via setDimensions()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"setCurrentMessageHeight()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function HUDPopupMessageMobile:setCurrentMessageHeight()\n    local reqHeight = self:getTitleHeight() + self:getTextHeight() + self:getInputRowsHeight()\n    reqHeight = reqHeight + self.borderPaddingY * 2 + self.textOffsetY + self.titleTextSize + self.textSize\n    if # self.currentMessage.controls > 0 then\n        reqHeight = reqHeight + self.inputRowsOffsetY\n    end\n\n    reqHeight = reqHeight + self.continueButtonHeight\n\n    self:setDimension( self:getWidth(), math.max( self.minHeight, reqHeight))\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"setdimension",children:"setDimension"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Set this HUD element's width and height."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"setDimension()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"width"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"height"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function HUDPopupMessageMobile:setDimension(width, height)\n    HUDPopupMessageMobile:superClass().setDimension( self , width, height)\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"setinputactive",children:"setInputActive"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Enable / disable input events for message confirmation / continuing."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"setInputActive()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"isActive"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function HUDPopupMessageMobile:setInputActive(isActive)\n    local inputBinding = g_inputBinding\n\n    if not self.isCustomInputActive and isActive then\n        inputBinding:setContext( HUDPopupMessageMobile.INPUT_CONTEXT_NAME, true , false )\n\n        local _, eventId = inputBinding:registerActionEvent(InputAction.MENU_ACCEPT, self , self.onConfirmMessage, false , true , false , true )\n        inputBinding:setActionEventTextVisibility(eventId, false )\n\n        _, eventId = inputBinding:registerActionEvent(InputAction.SKIP_MESSAGE_BOX, self , self.onConfirmMessage, false , true , false , true )\n        inputBinding:setActionEventTextVisibility(eventId, false )\n\n        self.isCustomInputActive = true\n    elseif self.isCustomInputActive and not isActive then\n            inputBinding:removeActionEventsByTarget( self )\n            inputBinding:revertContext( true ) -- revert and clear message context\n            self.isCustomInputActive = false\n        end\n    end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"setscale",children:"setScale"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Set uniform UI scale."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"setScale()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"uiScale"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function HUDPopupMessageMobile:setScale(uiScale)\n    HUDPopupMessageMobile:superClass().setScale( self , uiScale)\n    self:storeScaledValues()\n\n    -- reposition to middle of the screen, because the scale affects the position from bottom left corner\n    local posX, posY = HUDPopupMessageMobile.getBackgroundPosition(uiScale)\n    local width = self:getWidth()\n    self:setPosition(posX - width * 0.5 , posY)\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"showmessage",children:"showMessage"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Show a new message."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"showMessage(string title, string message, integer duration, table? controls, function? callback, table? target)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"string"}),(0,i.jsx)(n.th,{children:"title"}),(0,i.jsx)(n.th,{children:"Title text"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"message"}),(0,i.jsx)(n.td,{children:"Main message text"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"duration"}),(0,i.jsx)(n.td,{children:"Message display duration in milliseconds. If set to 0, will cause the message to be"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"displayed for a duration derived from the message length. If set to <0, will cause the message to be displayed\nfor a very long time. |\n| table? | controls | [optional] Array of InputHelpElement instance for input hint row display |\n| function? | callback | [optional] Function to be called when the message is acknowledged or expires |\n| table? | target | [optional] Callback target which is passed as the first argument to the given callback function |"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function HUDPopupMessageMobile:showMessage(title, text, duration, controls, callback, target)\n    if duration = = 0 then -- if no duration indicated, adjust duration according to message length\n        duration = HUDPopupMessageMobile.MIN_DURATION + string.len(text) * HUDPopupMessageMobile.DURATION_PER_CHARACTER\n    elseif duration < 0 then -- a negative duration is adjusted to five minutes("almost" indefinite)\n            duration = HUDPopupMessageMobile.MAX_DURATION\n        end\n\n        while # self.pendingMessages > HUDPopupMessageMobile.MAX_PENDING_MESSAGE_COUNT do\n            table.remove( self.pendingMessages, 1 )\n        end\n\n        local message = {\n        isDialog = false ,\n        title = title,\n        message = text,\n        duration = duration,\n        controls = Utils.getNoNil(controls, { } ),\n        callback = callback,\n        target = target\n        }\n\n        if #message.controls > HUDPopupMessageMobile.MAX_INPUT_ROW_COUNT then -- truncate\n            for i = #message.controls, HUDPopupMessageMobile.MAX_INPUT_ROW_COUNT + 1 , - 1 do\n                table.remove(message.controls, i)\n            end\n        end\n\n        table.insert( self.pendingMessages, message)\n    end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"startmessage",children:"startMessage"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Start displaying a message dequeued from the currently pending messages.\nSets all required display and input state."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"startMessage()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function HUDPopupMessageMobile:startMessage()\n    self.ingameMap:setAllowToggle( false ) -- disable toggle input on map\n    self.ingameMap:turnSmall() -- force map size to minimap state\n\n    self:assignCurrentMessage( self.pendingMessages[ 1 ])\n    table.remove( self.pendingMessages, 1 )\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"storescaledvalues",children:"storeScaledValues"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Store scaled positioning, size and offset values."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"storeScaledValues()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function HUDPopupMessageMobile:storeScaledValues()\n    self.minWidth, self.minHeight = self:scalePixelToScreenVector( HUDPopupMessageMobile.SIZE.SELF)\n\n    self.textOffsetX, self.textOffsetY = self:scalePixelToScreenVector( HUDPopupMessageMobile.POSITION.MESSAGE_TEXT)\n    self.inputRowsOffsetX, self.inputRowsOffsetY = self:scalePixelToScreenVector( HUDPopupMessageMobile.POSITION.INPUT_ROWS)\n    self.continueButtonOffsetX, self.continueButtonOffsetY = self:scalePixelToScreenVector( HUDPopupMessageMobile.POSITION.CONTINUE_BUTTON)\n    self.continueButtonWidth, self.continueButtonHeight = self:scalePixelToScreenVector( HUDPopupMessageMobile.SIZE.CONTINUE_BUTTON)\n\n    self.inputRowWidth, self.inputRowHeight = self:scalePixelToScreenVector( HUDPopupMessageMobile.SIZE.INPUT_ROW)\n    self.borderPaddingX, self.borderPaddingY = self:scalePixelToScreenVector( HUDPopupMessageMobile.SIZE.BORDER_PADDING)\n\n    self.inputRowTextX, self.inputRowTextY = self:scalePixelToScreenVector( HUDPopupMessageMobile.POSITION.INPUT_TEXT)\n\n    self.titleTextSize = self:scalePixelToScreenHeight( HUDPopupMessageMobile.TEXT_SIZE.TITLE)\n    self.textSize = self:scalePixelToScreenHeight( HUDPopupMessageMobile.TEXT_SIZE.TEXT)\n    self.continueTextSize = self:scalePixelToScreenHeight( HUDPopupMessageMobile.TEXT_SIZE.CONTINUE_TEXT)\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"update",children:"update"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Update this element's state."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"update()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"dt"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function HUDPopupMessageMobile:update(dt)\n    if not g_gui:getIsMenuVisible() then\n        HUDPopupMessageMobile:superClass().update( self , dt)\n\n        if not self.isGamePaused and not g_sleepManager:getIsSleeping() then\n            self.time = self.time + dt\n            self:updateCurrentMessage()\n        end\n\n        if self:getVisible() then\n            local inputMode = g_inputBinding:getInputHelpMode()\n            if inputMode ~ = self.lastInputMode then\n                self.lastInputMode = inputMode\n                self:updateButtonGlyphs()\n\n                local isTouch = inputMode = = GS_INPUT_HELP_MODE_TOUCH\n                self.continueGlyph:setVisible( not isTouch)\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"updatebuttonglyphs",children:"updateButtonGlyphs"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Update button glyphs when the player input mode has changed."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"updateButtonGlyphs()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function HUDPopupMessageMobile:updateButtonGlyphs()\n    if self.continueGlyph ~ = nil then\n        self.continueGlyph:setAction(InputAction.SKIP_MESSAGE_BOX, g_i18n:getText( HUDPopupMessageMobile.L10N_SYMBOL.BUTTON_OK), self.continueTextSize, true , false )\n    end\n\n    if self.currentMessage ~ = nil then\n        local controlIndex = 1\n        for i = 1 , HUDPopupMessageMobile.MAX_INPUT_ROW_COUNT do\n            local rowIndex = HUDPopupMessageMobile.MAX_INPUT_ROW_COUNT - i + 1\n            local inputRowVisible = rowIndex < = # self.currentMessage.controls\n            self.inputRows[i]:setVisible(inputRowVisible)\n\n            if inputRowVisible then\n                local control = self.currentMessage.controls[controlIndex]\n                self.inputGlyphs[i]:setActions(control:getActionNames(), "" , self.textSize, false , false )\n                self.inputGlyphs[i]:setKeyboardGlyphColor( HUDPopupMessageMobile.COLOR.INPUT_GLYPH)\n                controlIndex = controlIndex + 1\n            end\n        end\n    end\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"updatecurrentmessage",children:"updateCurrentMessage"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Update the current message.\nDisables this popup when time runs out and dequeues a pending messages for displaying."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"updateCurrentMessage()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function HUDPopupMessageMobile:updateCurrentMessage()\n    if self.currentMessage ~ = nil then\n        if self.time > self.currentMessage.duration then\n            self.time = - math.huge -- clear time to avoid double triggers\n            self:setVisible( false , true ) -- animate out\n        end\n    elseif # self.pendingMessages > 0 then\n            self:startMessage()\n            self:setVisible( true , true ) -- animate in\n\n            self.animation:addCallback( function ()\n                local x, y = self:getPosition()\n                g_depthOfFieldManager:pushArea(x, y, self:getWidth(), self:getHeight())\n                self.blurAreaActive = true\n            end )\n        end\n    end\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453(e,n,s){s.d(n,{R:()=>r,x:()=>o});var t=s(96540);const i={},l=t.createContext(i);function r(e){const n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);