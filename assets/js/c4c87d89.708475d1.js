"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[70383],{28453(e,n,l){l.d(n,{R:()=>t,x:()=>d});var s=l(96540);const r={},i=s.createContext(r);function t(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(i.Provider,{value:n},e.children)}},39460(e,n,l){l.r(n),l.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>u,frontMatter:()=>t,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"script/Debug/DebugManager","title":"DebugManager","description":"DebugManager","source":"@site/../docs/script/Debug/DebugManager.md","sourceDirName":"script/Debug","slug":"/script/Debug/DebugManager","permalink":"/FS25-Community-LUADOC/script/Debug/DebugManager","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"DebugLine","permalink":"/FS25-Community-LUADOC/script/Debug/DebugLine"},"next":{"title":"DebugPath","permalink":"/FS25-Community-LUADOC/script/Debug/DebugPath"}}');var r=l(74848),i=l(28453);const t={},d=void 0,a={},o=[{value:"DebugManager",id:"debugmanager",level:2},{value:"consoleCommandRemoveElements",id:"consolecommandremoveelements",level:3},{value:"consoleCommandSplineToggleDebug",id:"consolecommandsplinetoggledebug",level:3},{value:"drawPostUI",id:"drawpostui",level:3},{value:"drawPreUI",id:"drawpreui",level:3},{value:"initDataStructures",id:"initdatastructures",level:3},{value:"unloadMapData",id:"unloadmapdata",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"debugmanager",children:"DebugManager"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"This class handles debug element rendering"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parent"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"?version=script&category=21&class=205",children:"AbstractManager"})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Functions"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#consolecommandremoveelements",children:"consoleCommandRemoveElements"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#consolecommandsplinetoggledebug",children:"consoleCommandSplineToggleDebug"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#drawpostui",children:"drawPostUI"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#drawpreui",children:"drawPreUI"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#initdatastructures",children:"initDataStructures"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#unloadmapdata",children:"unloadMapData"})}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"consolecommandremoveelements",children:"consoleCommandRemoveElements"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"consoleCommandRemoveElements()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"status"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function DebugManager:consoleCommandRemoveElements()\n    for element in pairs( self.elementToElementId) do\n        if element.delete ~ = nil then\n            element:delete()\n        end\n    end\n\n    self.elementIdToElement = { }\n    self.elementToElementId = { }\n    self.groupIdToElements = { }\n    self.elementsWithLifetime = { }\n\n    return "Cleared all debug elements"\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"consolecommandsplinetoggledebug",children:"consoleCommandSplineToggleDebug"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"traverses whole scene and toggles debug visualization for all splines"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"consoleCommandSplineToggleDebug(string displayEPsStr)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"string"}),(0,r.jsx)(n.th,{children:"displayEPsStr"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"string"}),(0,r.jsx)(n.th,{children:"status"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function DebugManager:consoleCommandSplineToggleDebug(displayEPsStr)\n    self.splineDebugEnabled = not self.splineDebugEnabled\n\n    if self.splineDebugEnabled then\n        local displayEPs = Utils.stringToBoolean(displayEPsStr)\n\n        local debugMat = self:getDebugMat()\n\n        local numAffectedNodes = 0\n\n        local function checkNode(node)\n            if I3DUtil.getIsSpline(node) then\n\n                DebugUtil.setNodeEffectivelyVisible(node)\n                local color = DebugUtil.getDebugColor(node)\n                local r, g, b = color:unpack()\n                setMaterial(node, debugMat, 0 )\n                setShaderParameter(node, "color" , r, g, b, 0 , false )\n                setShaderParameter(node, "alpha" , 1 , 0 , 0 , 0 , false )\n\n                local debugSpline = DebugSpline.new()\n                debugSpline:createWithNode(node, nil , nil , displayEPs):setColorRGBA(r,g,b):setClipDistance( 500 )\n                g_debugManager:addElement(debugSpline, "splineDebug" )\n\n                numAffectedNodes = numAffectedNodes + 1\n            end\n        end\n\n        I3DUtil.iterateRecursively(getRootNode(), checkNode)\n        return string.format( "Added debug visualization to %d splines" , numAffectedNodes)\n    else\n            g_debugManager:removeGroup( "splineDebug" )\n\n            return string.format( "Removed spline debug elements" )\n        end\n    end\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"drawpostui",children:"drawPostUI"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"drawPostUI()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function DebugManager:drawPostUI()\n    -- draw drawables after UI so they can render things ontop\n    for _, drawable in pairs( self.drawables) do\n        drawable:drawDebug()\n    end\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"drawpreui",children:"drawPreUI"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"drawPreUI()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function DebugManager:drawPreUI()\n    -- draw elements pre UI as they are usually in 3D space\n    for groupId, groupElements in pairs( self.groupIdToElements) do\n        if self.hiddenGroups[groupId] = = nil then\n            for _, element in ipairs(groupElements) do\n                if element.draw ~ = nil and(element.getShouldBeDrawn = = nil or element:getShouldBeDrawn()) then\n                    element:draw()\n                end\n            end\n        end\n    end\n\n    for i = # self.frameElements, 1 , - 1 do\n        self.frameElements[i]:draw()\n        table.remove( self.frameElements, i)\n    end\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"initdatastructures",children:"initDataStructures"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"initDataStructures()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function DebugManager:initDataStructures()\n    self.drawables = { }\n    self.frameElements = { }\n\n    self.elementIdToElement = { }\n    self.elementToElementId = { }\n    self.groupIdToElements = { }\n    self.elementsWithLifetime = { }\n    self.hiddenGroups = { }\n\n    self.debugMaterial = nil\n    if self.debugMaterialNode ~ = nil then\n        delete( self.debugMaterialNode)\n        self.debugMaterialNode = nil\n    end\n\n    self.splineDebugEnabled = false\n    self.splineDebugElements = { }\n    self.occluderDebugEnabled = false\n\n    if not self.initialized then\n        addConsoleCommand( "gsDebugManagerClearElements" , "Removes all permanent elements and functions from DebugManager" , "consoleCommandRemoveElements" , self )\n        addConsoleCommand( "gsDebugManagerGroupsList" , "List all currently used debug element groups with visibility and number of elements" , "consoleCommandGroupsList" , self )\n        addConsoleCommand( "gsDebugManagerGroupVisibilitySet" , "Toggle or set visibility of given group name" , "consoleCommandGroupVisibilitySet" , self , "groupId; [visibility]" )\n        addConsoleCommand( "gsDebugManagerGroupRemove" , "Remove group and its debug elements" , "consoleCommandGroupRemove" , self )\n        addConsoleCommand( "gsSplineDebug" , "Toggles debug visualization for all splines currently in the scene" , "consoleCommandSplineToggleDebug" , self , "[displayEPs]" )\n            addConsoleCommand( "gsTerrainLayerDebug" , "Toggles debug visualization for terrain layers" , "consoleCommandLayerDebug" , self , "visualizeAttributeName" )\n                self.initialized = true\n            end\n        end\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"unloadmapdata",children:"unloadMapData"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"unloadMapData()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function DebugManager:unloadMapData()\n    self.loadedMapData = false\n    self:initDataStructures()\nend\n\n"})})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);