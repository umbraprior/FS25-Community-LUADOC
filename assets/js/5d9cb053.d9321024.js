"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[84906],{28453(e,n,i){i.d(n,{R:()=>t,x:()=>a});var l=i(96540);const r={},s=l.createContext(r);function t(e){const n=l.useContext(s);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),l.createElement(s.Provider,{value:n},e.children)}},67714(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>l,toc:()=>d});const l=JSON.parse('{"id":"script/Specializations/ForageWagon","title":"ForageWagon","description":"ForageWagon","source":"@site/../docs/script/Specializations/ForageWagon.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/ForageWagon","permalink":"/FS25-Community-LUADOC/script/Specializations/ForageWagon","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"FoliageBending","permalink":"/FS25-Community-LUADOC/script/Specializations/FoliageBending"},"next":{"title":"FrontloaderAttacher","permalink":"/FS25-Community-LUADOC/script/Specializations/FrontloaderAttacher"}}');var r=i(74848),s=i(28453);const t={},a=void 0,c={},d=[{value:"ForageWagon",id:"foragewagon",level:2},{value:"doCheckSpeedLimit",id:"docheckspeedlimit",level:3},{value:"fillForageWagon",id:"fillforagewagon",level:3},{value:"getConsumingLoad",id:"getconsumingload",level:3},{value:"getDefaultSpeedLimit",id:"getdefaultspeedlimit",level:3},{value:"getFillVolumeUVScrollSpeed",id:"getfillvolumeuvscrollspeed",level:3},{value:"getIsSpeedRotatingPartActive",id:"getisspeedrotatingpartactive",level:3},{value:"getIsWorkAreaActive",id:"getisworkareaactive",level:3},{value:"initSpecialization",id:"initspecialization",level:3},{value:"loadSpeedRotatingPartFromXML",id:"loadspeedrotatingpartfromxml",level:3},{value:"onDeactivate",id:"ondeactivate",level:3},{value:"onDelete",id:"ondelete",level:3},{value:"onEndWorkAreaProcessing",id:"onendworkareaprocessing",level:3},{value:"onFillUnitFillLevelChanged",id:"onfillunitfilllevelchanged",level:3},{value:"onLoad",id:"onload",level:3},{value:"onReadStream",id:"onreadstream",level:3},{value:"onReadUpdateStream",id:"onreadupdatestream",level:3},{value:"onStartWorkAreaProcessing",id:"onstartworkareaprocessing",level:3},{value:"onTurnedOff",id:"onturnedoff",level:3},{value:"onUpdateTick",id:"onupdatetick",level:3},{value:"onWriteStream",id:"onwritestream",level:3},{value:"onWriteUpdateStream",id:"onwriteupdatestream",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"processForageWagonArea",id:"processforagewagonarea",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3},{value:"registerFunctions",id:"registerfunctions",level:3},{value:"registerOverwrittenFunctions",id:"registeroverwrittenfunctions",level:3},{value:"setFillEffectActive",id:"setfilleffectactive",level:3}];function o(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"foragewagon",children:"ForageWagon"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Specialization for a forage wagon, expands functions of FillUnit, Pickup and WorkArea by adding a fillEffect"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Functions"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#docheckspeedlimit",children:"doCheckSpeedLimit"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#fillforagewagon",children:"fillForageWagon"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getconsumingload",children:"getConsumingLoad"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getdefaultspeedlimit",children:"getDefaultSpeedLimit"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getfillvolumeuvscrollspeed",children:"getFillVolumeUVScrollSpeed"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getisspeedrotatingpartactive",children:"getIsSpeedRotatingPartActive"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getisworkareaactive",children:"getIsWorkAreaActive"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#initspecialization",children:"initSpecialization"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#loadspeedrotatingpartfromxml",children:"loadSpeedRotatingPartFromXML"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#ondeactivate",children:"onDeactivate"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#ondelete",children:"onDelete"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onendworkareaprocessing",children:"onEndWorkAreaProcessing"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onfillunitfilllevelchanged",children:"onFillUnitFillLevelChanged"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onreadstream",children:"onReadStream"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onreadupdatestream",children:"onReadUpdateStream"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onstartworkareaprocessing",children:"onStartWorkAreaProcessing"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onturnedoff",children:"onTurnedOff"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onupdatetick",children:"onUpdateTick"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onwritestream",children:"onWriteStream"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onwriteupdatestream",children:"onWriteUpdateStream"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#processforagewagonarea",children:"processForageWagonArea"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#registeroverwrittenfunctions",children:"registerOverwrittenFunctions"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#setfilleffectactive",children:"setFillEffectActive"})}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"docheckspeedlimit",children:"doCheckSpeedLimit"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"doCheckSpeedLimit()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function ForageWagon:doCheckSpeedLimit(superFunc)\n    return superFunc( self ) or( self:getIsTurnedOn() and self:getIsLowered())\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"fillforagewagon",children:"fillForageWagon"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"fillForageWagon()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function ForageWagon:fillForageWagon()\n    local spec = self.spec_forageWagon\n\n    local loadInfo = self:getFillVolumeLoadInfo(spec.loadInfoIndex)\n    local filledLiters = self:addFillUnitFillLevel( self:getOwnerFarmId(), spec.fillUnitIndex, spec.workAreaParameters.litersToFill, spec.lastFillType, ToolType.UNDEFINED, loadInfo)\n\n    if filledLiters + 0.01 < spec.workAreaParameters.litersToFill then\n        self:setIsTurnedOn( false )\n        self:setPickupState( false )\n    end\n\n    spec.workAreaParameters.litersToFill = spec.workAreaParameters.litersToFill - filledLiters\n    if spec.workAreaParameters.litersToFill < 0.01 then\n        spec.workAreaParameters.litersToFill = 0\n    end\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getconsumingload",children:"getConsumingLoad"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getConsumingLoad()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function ForageWagon:getConsumingLoad(superFunc)\n    local value, count = superFunc( self )\n\n    local spec = self.spec_forageWagon\n    local loadPercentage = spec.pickUpLitersBuffer:get( 1000 ) / spec.maxPickupLitersPerSecond\n\n    return value + loadPercentage, count + 1\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getdefaultspeedlimit",children:"getDefaultSpeedLimit"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getDefaultSpeedLimit()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function ForageWagon.getDefaultSpeedLimit()\n    return 20\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getfillvolumeuvscrollspeed",children:"getFillVolumeUVScrollSpeed"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getFillVolumeUVScrollSpeed()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"superFunc"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"fillVolumeIndex"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function ForageWagon:getFillVolumeUVScrollSpeed(superFunc, fillVolumeIndex)\n    local spec = self.spec_forageWagon\n\n    if spec.isFilling then\n        return spec.loadUVScrollSpeed[ 1 ], spec.loadUVScrollSpeed[ 2 ], spec.loadUVScrollSpeed[ 3 ]\n    end\n\n    if self:getDischargeState() ~ = Dischargeable.DISCHARGE_STATE_OFF then\n        return spec.dischargeUVScrollSpeed[ 1 ], spec.dischargeUVScrollSpeed[ 2 ], spec.dischargeUVScrollSpeed[ 3 ]\n    end\n\n    return superFunc( self , fillVolumeIndex)\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getisspeedrotatingpartactive",children:"getIsSpeedRotatingPartActive"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getIsSpeedRotatingPartActive()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"superFunc"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"speedRotatingPart"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function ForageWagon:getIsSpeedRotatingPartActive(superFunc, speedRotatingPart)\n    local spec = self.spec_forageWagon\n\n    if speedRotatingPart.rotateOnlyIfFillLevelIncreased ~ = nil then\n        if speedRotatingPart.rotateOnlyIfFillLevelIncreased and not spec.isFilling then\n            return false\n        end\n    end\n\n    return superFunc( self , speedRotatingPart)\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getisworkareaactive",children:"getIsWorkAreaActive"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getIsWorkAreaActive()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"superFunc"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"workArea"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function ForageWagon:getIsWorkAreaActive(superFunc, workArea)\n    local spec = self.spec_forageWagon\n\n    local forageWagonArea = self.spec_workArea.workAreas[spec.workAreaIndex]\n    if forageWagonArea ~ = nil and workArea = = forageWagonArea then\n        if not self:getIsTurnedOn() or not self:allowPickingUp() then\n            return false\n        end\n    end\n\n    return superFunc( self , workArea)\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"initspecialization",children:"initSpecialization"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"initSpecialization()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function ForageWagon.initSpecialization()\n    g_workAreaTypeManager:addWorkAreaType( "forageWagon" , false , false , true )\n\n    local schema = Vehicle.xmlSchema\n    schema:setXMLSpecializationType( "ForageWagon" )\n\n    schema:register(XMLValueType.INT, "vehicle.forageWagon#workAreaIndex" , "Work area index" , 1 )\n    schema:register(XMLValueType.INT, "vehicle.forageWagon#fillUnitIndex" , "Fill unit index" , 1 )\n    schema:register(XMLValueType.INT, "vehicle.forageWagon#loadInfoIndex" , "Load info index" , 1 )\n    schema:register(XMLValueType.FLOAT, "vehicle.forageWagon#maxPickupLitersPerSecond" , "Max.pickup liters per second" , 500 )\n\n    schema:register(XMLValueType.INT, "vehicle.forageWagon.additives#fillUnitIndex" , "Additives fill unit index" )\n    schema:register(XMLValueType.FLOAT, "vehicle.forageWagon.additives#usage" , "Usage per picked up liter" , 0.0000275 )\n    schema:register(XMLValueType.STRING, "vehicle.forageWagon.additives#fillTypes" , "Fill types to apply additives" , "GRASS_WINDROW" )\n\n    schema:register(XMLValueType.FLOAT, "vehicle.forageWagon.startFillEffect#fillStartDelay" , "if defined the filling of the fill unit will be delayed until this time has passed" , 0 )\n        schema:register(XMLValueType.FLOAT, "vehicle.forageWagon.startFillEffect#fillStartFadeOff" , "Fade out fill level for start fill effect(fillLevel 0:density 1 | fillLevel at fillStartFadeOff:density 0)" , 0 )\n\n            schema:register(XMLValueType.VECTOR_ 3 , "vehicle.forageWagon.fillVolume#loadScrollSpeed" , "Scroll speed while loading" , "0 0 0" )\n                schema:register(XMLValueType.VECTOR_ 3 , "vehicle.forageWagon.fillVolume#dischargeScrollSpeed" , "Scroll speed while unloading" , "0 0 0" )\n\n                    schema:register(XMLValueType.BOOL, SpeedRotatingParts.SPEED_ROTATING_PART_XML_KEY .. "#rotateOnlyIfFillLevelIncreased" , "Rotate only if fill level increased" , false )\n\n                        EffectManager.registerEffectXMLPaths(schema, "vehicle.forageWagon.fillEffect" )\n                        EffectManager.registerEffectXMLPaths(schema, "vehicle.forageWagon.startFillEffect" )\n\n                        schema:setXMLSpecializationType()\n                    end\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"loadspeedrotatingpartfromxml",children:"loadSpeedRotatingPartFromXML"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"loadSpeedRotatingPartFromXML()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"superFunc"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"speedRotatingPart"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"xmlFile"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"key"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function ForageWagon:loadSpeedRotatingPartFromXML(superFunc, speedRotatingPart, xmlFile, key)\n    if not superFunc( self , speedRotatingPart, xmlFile, key) then\n        return false\n    end\n\n    speedRotatingPart.rotateOnlyIfFillLevelIncreased = xmlFile:getValue(key .. "#rotateOnlyIfFillLevelIncreased" , false )\n\n    return true\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"ondeactivate",children:"onDeactivate"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onDeactivate()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function ForageWagon:onDeactivate()\n    if self.isClient then\n        local spec = self.spec_forageWagon\n        spec.fillTimer = 0\n        self:setFillEffectActive( false )\n    end\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ondelete",children:"onDelete"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onDelete()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function ForageWagon:onDelete()\n    local spec = self.spec_forageWagon\n    g_effectManager:deleteEffects(spec.fillEffects)\n    g_effectManager:deleteEffects(spec.startFillEffect)\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"onendworkareaprocessing",children:"onEndWorkAreaProcessing"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onEndWorkAreaProcessing()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"dt"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"hasProcessed"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function ForageWagon:onEndWorkAreaProcessing(dt, hasProcessed)\n    local spec = self.spec_forageWagon\n\n    if self.isServer then\n        if spec.workAreaParameters.lastPickupLiters > 0 then\n            local allowToFill = true\n            if spec.fillStartEffectTimer > 0 then\n                spec.fillStartEffectTimer = spec.fillStartEffectTimer - dt\n                if spec.fillStartEffectTimer > 0 then\n                    allowToFill = false\n                end\n            end\n\n            if allowToFill then\n                self:fillForageWagon()\n            end\n\n            spec.fillTimer = 500\n        end\n    end\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"onfillunitfilllevelchanged",children:"onFillUnitFillLevelChanged"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onFillUnitFillLevelChanged()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"fillUnitIndex"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"fillLevelDelta"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"fillTypeIndex"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"toolType"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"fillPositionData"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"appliedDelta"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function ForageWagon:onFillUnitFillLevelChanged(fillUnitIndex, fillLevelDelta, fillTypeIndex, toolType, fillPositionData, appliedDelta)\n    if self.isClient then\n        local spec = self.spec_forageWagon\n        local density = 1\n        if spec.fillStartEffectFadeOff > 0 then\n            density = 1 - math.min( self:getFillUnitFillLevel(spec.fillUnitIndex) / spec.fillStartEffectFadeOff, 1 )\n        end\n        g_effectManager:setDensity(spec.startFillEffect, density)\n    end\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onLoad()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function ForageWagon:onLoad(savegame)\n    local spec = self.spec_forageWagon\n\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.forageWagon#turnedOnTipScrollerSpeedFactor" ) -- FS17 to FS19\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.turnedOnRotationNodes.turnedOnRotationNode#type" , "vehicle.turnOnVehicle.rotationNodes.rotationNode" , "forageWagon" ) -- FS17 to FS19\n\n    spec.isFilling = false\n    spec.isFillingSent = false\n    spec.lastFillType = FillType.UNKNOWN\n    spec.lastFillTypeSent = FillType.UNKNOWN\n    spec.fillTimer = 0\n\n    spec.workAreaIndex = self.xmlFile:getValue( "vehicle.forageWagon#workAreaIndex" , 1 )\n    spec.fillUnitIndex = self.xmlFile:getValue( "vehicle.forageWagon#fillUnitIndex" , 1 )\n    spec.loadInfoIndex = self.xmlFile:getValue( "vehicle.forageWagon#loadInfoIndex" , 1 )\n\n    spec.additives = { }\n    spec.additives.fillUnitIndex = self.xmlFile:getValue( "vehicle.forageWagon.additives#fillUnitIndex" )\n    spec.additives.available = self:getFillUnitByIndex(spec.additives.fillUnitIndex) ~ = nil\n    spec.additives.usage = self.xmlFile:getValue( "vehicle.forageWagon.additives#usage" , 0.0000275 )\n    local additivesFillTypeNames = self.xmlFile:getValue( "vehicle.forageWagon.additives#fillTypes" , "GRASS_WINDROW" )\n    spec.additives.fillTypes = g_fillTypeManager:getFillTypesByNames(additivesFillTypeNames, "Warning: \'" .. self.xmlFile:getFilename() .. "\' has invalid fillType \'%s\'." )\n\n    spec.loadUVScrollSpeed = self.xmlFile:getValue( "vehicle.forageWagon.fillVolume#loadScrollSpeed" , "0 0 0" , true )\n    spec.dischargeUVScrollSpeed = self.xmlFile:getValue( "vehicle.forageWagon.fillVolume#dischargeScrollSpeed" , "0 0 0" , true )\n\n    spec.maxPickupLitersPerSecond = self.xmlFile:getValue( "vehicle.forageWagon#maxPickupLitersPerSecond" , 500 )\n\n    if self.isClient then\n        spec.fillEffects = g_effectManager:loadEffect( self.xmlFile, "vehicle.forageWagon.fillEffect" , self.components, self , self.i3dMappings)\n        spec.startFillEffect = g_effectManager:loadEffect( self.xmlFile, "vehicle.forageWagon.startFillEffect" , self.components, self , self.i3dMappings)\n    end\n\n    spec.fillStartEffectDelay = self.xmlFile:getValue( "vehicle.forageWagon.startFillEffect#fillStartDelay" , 0 ) * 0.001\n    spec.fillStartEffectTimer = 0\n    spec.fillStartEffectFadeOff = self.xmlFile:getValue( "vehicle.forageWagon.startFillEffect#fillStartFadeOff" , 0 )\n\n    spec.workAreaParameters = { }\n    spec.workAreaParameters.forcedFillType = FillType.UNKNOWN\n    spec.workAreaParameters.lastPickupLiters = 0\n    spec.workAreaParameters.litersToFill = 0\n\n    spec.pickUpLitersBuffer = ValueBuffer.new( 750 )\n\n    if spec.startFillEffect = = nil or #spec.startFillEffect = = 0 then\n        SpecializationUtil.removeEventListener( self , "onFillUnitFillLevelChanged" , ForageWagon )\n    end\n\n    spec.dirtyFlag = self:getNextDirtyFlag()\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"onreadstream",children:"onReadStream"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onReadStream()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"streamId"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function ForageWagon:onReadStream(streamId, connection)\n    local spec = self.spec_forageWagon\n    spec.isFilling = streamReadBool(streamId)\n    spec.lastFillType = streamReadUIntN(streamId, FillTypeManager.SEND_NUM_BITS)\n    self:setFillEffectActive(spec.isFilling)\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"onreadupdatestream",children:"onReadUpdateStream"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onReadUpdateStream()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"streamId"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"timestamp"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"connection"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function ForageWagon:onReadUpdateStream(streamId, timestamp, connection)\n    if connection:getIsServer() then\n        if streamReadBool(streamId) then\n            local spec = self.spec_forageWagon\n            spec.isFilling = streamReadBool(streamId)\n            spec.lastFillType = streamReadUIntN(streamId, FillTypeManager.SEND_NUM_BITS)\n            self:setFillEffectActive(spec.isFilling)\n        end\n    end\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"onstartworkareaprocessing",children:"onStartWorkAreaProcessing"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onStartWorkAreaProcessing()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"dt"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function ForageWagon:onStartWorkAreaProcessing(dt)\n    local spec = self.spec_forageWagon\n\n    spec.workAreaParameters.forcedFillType = FillType.UNKNOWN\n    local fillLevel = self:getFillUnitFillLevel(spec.fillUnitIndex)\n    if fillLevel > self:getFillTypeChangeThreshold(spec.fillUnitIndex) then\n        spec.workAreaParameters.forcedFillType = self:getFillUnitFillType(spec.fillUnitIndex)\n    end\n\n    if fillLevel = = 0 and spec.fillStartEffectDelay > 0 and spec.fillStartEffectTimer < = 0 then\n        spec.fillStartEffectTimer = spec.fillStartEffectDelay\n    end\n\n    spec.workAreaParameters.lastPickupLiters = 0\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"onturnedoff",children:"onTurnedOff"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onTurnedOff()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function ForageWagon:onTurnedOff()\n    local spec = self.spec_forageWagon\n\n    if self.isClient then\n        spec.fillTimer = 0\n        self:setFillEffectActive( false )\n    end\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"onupdatetick",children:"onUpdateTick"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onUpdateTick()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"dt"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"isActiveForInput"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"isActiveForInputIgnoreSelection"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"isSelected"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function ForageWagon:onUpdateTick(dt, isActiveForInput, isActiveForInputIgnoreSelection, isSelected)\n    local spec = self.spec_forageWagon\n\n    if self.isServer then\n        local isFilling = false\n        if spec.fillTimer > 0 then\n            spec.fillTimer = spec.fillTimer - dt\n            isFilling = true\n        end\n        spec.isFilling = isFilling\n\n        if spec.isFilling ~ = spec.isFillingSent then\n            self:raiseDirtyFlags(spec.dirtyFlag)\n            spec.isFillingSent = spec.isFilling\n            self:setFillEffectActive(spec.isFilling)\n        end\n\n        spec.pickUpLitersBuffer:add(spec.workAreaParameters.lastPickupLiters)\n    end\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"onwritestream",children:"onWriteStream"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onWriteStream()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"streamId"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function ForageWagon:onWriteStream(streamId, connection)\n    local spec = self.spec_forageWagon\n    streamWriteBool(streamId, spec.isFillingSent)\n    streamWriteUIntN(streamId, spec.lastFillType, FillTypeManager.SEND_NUM_BITS)\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"onwriteupdatestream",children:"onWriteUpdateStream"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onWriteUpdateStream()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"streamId"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"connection"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"dirtyMask"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function ForageWagon:onWriteUpdateStream(streamId, connection, dirtyMask)\n    if not connection:getIsServer() then\n        local spec = self.spec_forageWagon\n        if streamWriteBool(streamId, bit32.band(dirtyMask, spec.dirtyFlag) ~ = 0 ) then\n            streamWriteBool(streamId, spec.isFillingSent)\n            streamWriteUIntN(streamId, spec.lastFillType, FillTypeManager.SEND_NUM_BITS)\n        end\n    end\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"prerequisitesPresent()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function ForageWagon.prerequisitesPresent(specializations)\n    return SpecializationUtil.hasSpecialization( FillUnit , specializations) and\n    SpecializationUtil.hasSpecialization( TurnOnVehicle , specializations) and\n    SpecializationUtil.hasSpecialization( Pickup , specializations) and\n    SpecializationUtil.hasSpecialization( WorkArea , specializations)\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"processforagewagonarea",children:"processForageWagonArea"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"processForageWagonArea()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"workArea"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function ForageWagon:processForageWagonArea(workArea)\n    local spec = self.spec_forageWagon\n\n    local radius = 0.5\n    local lsx, lsy, lsz, lex, ley, lez = DensityMapHeightUtil.getLineByArea(workArea.start, workArea.width, workArea.height)\n    local pickupLiters = 0\n\n    if spec.workAreaParameters.forcedFillType ~ = FillType.UNKNOWN then\n        pickupLiters = - DensityMapHeightUtil.tipToGroundAroundLine( self , - math.huge, spec.workAreaParameters.forcedFillType, lsx,lsy,lsz, lex,ley,lez, radius, nil , nil , false , nil )\n\n        if spec.workAreaParameters.forcedFillType = = FillType.GRASS_WINDROW then\n            pickupLiters = pickupLiters - DensityMapHeightUtil.tipToGroundAroundLine( self , - math.huge, FillType.DRYGRASS_WINDROW, lsx,lsy,lsz, lex,ley,lez, radius, nil , nil , false , nil )\n        elseif spec.workAreaParameters.forcedFillType = = FillType.DRYGRASS_WINDROW then\n                pickupLiters = pickupLiters - DensityMapHeightUtil.tipToGroundAroundLine( self , - math.huge, FillType.GRASS_WINDROW, lsx,lsy,lsz, lex,ley,lez, radius, nil , nil , false , nil )\n            end\n        else\n                local supportedFillTypes = self:getFillUnitSupportedFillTypes(spec.fillUnitIndex)\n                if supportedFillTypes ~ = nil then\n                    for fillType,state in pairs(supportedFillTypes) do\n                        if state then\n                            pickupLiters = - DensityMapHeightUtil.tipToGroundAroundLine( self , - math.huge, fillType, lsx,lsy,lsz, lex,ley,lez, radius, nil , nil , false , nil )\n                            if pickupLiters > 0 then\n                                spec.workAreaParameters.forcedFillType = fillType\n                                break\n                            end\n                        end\n                    end\n                end\n            end\n\n            if self.isServer then\n                if spec.additives.available then\n                    local fillTypeSupported = false\n                    for i = 1 , #spec.additives.fillTypes do\n                        if spec.workAreaParameters.forcedFillType = = spec.additives.fillTypes[i] then\n                            fillTypeSupported = true\n                            break\n                        end\n                    end\n\n                    if fillTypeSupported then\n                        local additivesFillLevel = self:getFillUnitFillLevel(spec.additives.fillUnitIndex)\n                        if additivesFillLevel > 0 then\n                            local usage = spec.additives.usage * pickupLiters\n                            if usage > 0 then\n                                local availableUsage = math.min(additivesFillLevel / usage, 1 )\n\n                                pickupLiters = pickupLiters * ( 1 + 0.05 * availableUsage)\n\n                                self:addFillUnitFillLevel( self:getOwnerFarmId(), spec.additives.fillUnitIndex, - usage, self:getFillUnitFillType(spec.additives.fillUnitIndex), ToolType.UNDEFINED)\n                            end\n                        end\n                    end\n                end\n            end\n\n            workArea.lastPickUpLiters = pickupLiters\n            workArea.pickupParticlesActive = pickupLiters > 0\n            spec.workAreaParameters.lastPickupLiters = spec.workAreaParameters.lastPickupLiters + pickupLiters\n            spec.workAreaParameters.litersToFill = spec.workAreaParameters.litersToFill + pickupLiters\n            if spec.workAreaParameters.forcedFillType ~ = FillType.UNKNOWN then\n                spec.lastFillType = spec.workAreaParameters.forcedFillType\n                if spec.lastFillType ~ = spec.lastFillTypeSent then\n                    spec.lastFillTypeSent = spec.lastFillType\n                    self:raiseDirtyFlags(spec.dirtyFlag)\n                end\n            end\n\n            local realArea, area = 0 , 0\n\n            if self.movingDirection = = 1 then\n                local width = MathUtil.vector3Length(lsx - lex, lsy - ley, lsz - lez)\n                area = width * self.lastMovedDistance\n                realArea = area\n            end\n\n            return realArea, area\n        end\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function ForageWagon.registerEventListeners(vehicleType)\n    SpecializationUtil.registerEventListener(vehicleType, "onLoad" , ForageWagon )\n    SpecializationUtil.registerEventListener(vehicleType, "onDelete" , ForageWagon )\n    SpecializationUtil.registerEventListener(vehicleType, "onReadStream" , ForageWagon )\n    SpecializationUtil.registerEventListener(vehicleType, "onWriteStream" , ForageWagon )\n    SpecializationUtil.registerEventListener(vehicleType, "onReadUpdateStream" , ForageWagon )\n    SpecializationUtil.registerEventListener(vehicleType, "onWriteUpdateStream" , ForageWagon )\n    SpecializationUtil.registerEventListener(vehicleType, "onUpdateTick" , ForageWagon )\n    SpecializationUtil.registerEventListener(vehicleType, "onStartWorkAreaProcessing" , ForageWagon )\n    SpecializationUtil.registerEventListener(vehicleType, "onEndWorkAreaProcessing" , ForageWagon )\n    SpecializationUtil.registerEventListener(vehicleType, "onTurnedOff" , ForageWagon )\n    SpecializationUtil.registerEventListener(vehicleType, "onDeactivate" , ForageWagon )\n    SpecializationUtil.registerEventListener(vehicleType, "onFillUnitFillLevelChanged" , ForageWagon )\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function ForageWagon.registerFunctions(vehicleType)\n    SpecializationUtil.registerFunction(vehicleType, "processForageWagonArea" , ForageWagon.processForageWagonArea)\n    SpecializationUtil.registerFunction(vehicleType, "setFillEffectActive" , ForageWagon.setFillEffectActive)\n    SpecializationUtil.registerFunction(vehicleType, "fillForageWagon" , ForageWagon.fillForageWagon)\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"registeroverwrittenfunctions",children:"registerOverwrittenFunctions"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"registerOverwrittenFunctions()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function ForageWagon.registerOverwrittenFunctions(vehicleType)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "loadSpeedRotatingPartFromXML" , ForageWagon.loadSpeedRotatingPartFromXML)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getIsWorkAreaActive" , ForageWagon.getIsWorkAreaActive)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "doCheckSpeedLimit" , ForageWagon.doCheckSpeedLimit)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getConsumingLoad" , ForageWagon.getConsumingLoad)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getIsSpeedRotatingPartActive" , ForageWagon.getIsSpeedRotatingPartActive)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getFillVolumeUVScrollSpeed" , ForageWagon.getFillVolumeUVScrollSpeed)\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"setfilleffectactive",children:"setFillEffectActive"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"setFillEffectActive()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"isActive"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function ForageWagon:setFillEffectActive(isActive)\n    local spec = self.spec_forageWagon\n    if isActive then\n        g_effectManager:setEffectTypeInfo(spec.fillEffects, spec.lastFillType)\n        g_effectManager:setEffectTypeInfo(spec.startFillEffect, spec.lastFillType)\n        g_effectManager:startEffects(spec.fillEffects)\n        g_effectManager:startEffects(spec.startFillEffect)\n    else\n            g_effectManager:stopEffects(spec.fillEffects)\n            g_effectManager:stopEffects(spec.startFillEffect)\n        end\n    end\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}}}]);