"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[36515],{2850(n,e,l){l.r(e),l.d(e,{assets:()=>a,contentTitle:()=>t,default:()=>u,frontMatter:()=>d,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"script/GuidedTour/GuidedTourManager","title":"GuidedTourManager","description":"GuidedTourManager","source":"@site/../docs/script/GuidedTour/GuidedTourManager.md","sourceDirName":"script/GuidedTour","slug":"/script/GuidedTour/GuidedTourManager","permalink":"/FS25-Community-LUADOC/script/GuidedTour/GuidedTourManager","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"HumanSounds","permalink":"/FS25-Community-LUADOC/script/Graphics/HumanSounds"},"next":{"title":"HandTool","permalink":"/FS25-Community-LUADOC/script/Handtools/HandTool"}}');var r=l(74848),s=l(28453);const d={},t=void 0,a={},o=[{value:"GuidedTourManager",id:"guidedtourmanager",level:2},{value:"initDataStructures",id:"initdatastructures",level:3},{value:"loadFromXMLFile",id:"loadfromxmlfile",level:3},{value:"loadGuidedTours",id:"loadguidedtours",level:3},{value:"loadMapData",id:"loadmapdata",level:3},{value:"new",id:"new",level:3},{value:"saveToXMLFile",id:"savetoxmlfile",level:3}];function c(n){const e={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h2,{id:"guidedtourmanager",children:"GuidedTourManager"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"This class handles guided tours"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Parent"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:"?version=script&category=44&class=515",children:"AbstractManager"})}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Functions"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#initdatastructures",children:"initDataStructures"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#loadfromxmlfile",children:"loadFromXMLFile"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#loadguidedtours",children:"loadGuidedTours"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#loadmapdata",children:"loadMapData"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#new",children:"new"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#savetoxmlfile",children:"saveToXMLFile"})}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"initdatastructures",children:"initDataStructures"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Initialize data structures"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"initDataStructures()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function GuidedTourManager:initDataStructures()\n    self.guidedTours = { }\n    self.nameToGuidedTour = { }\n    self.nameToVehicle = { }\n    self.nameToPlaceable = { }\n    self.goalClasses = { }\n    self.actionClasses = { }\n    self.progressClasses = { }\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"loadfromxmlfile",children:"loadFromXMLFile"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Load data from xml savegame file"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"loadFromXMLFile(string xmlFilename)"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"string"}),(0,r.jsx)(e.th,{children:"xmlFilename"}),(0,r.jsx)(e.th,{children:"xml filename"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"string"}),(0,r.jsx)(e.th,{children:"true"}),(0,r.jsx)(e.th,{children:"if loading was successful else false"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:'function GuidedTourManager:loadFromXMLFile(xmlFilename)\n    if xmlFilename = = nil then\n        return false\n    end\n\n    local xmlFile = XMLFile.load( "guidedTourXML" , xmlFilename, GuidedTourManager.xmlSchema)\n    if xmlFile = = nil then\n        return false\n    end\n\n    local tourName = xmlFile:getValue( "guidedTour.tour#name" )\n    local tour = self.nameToGuidedTour[tourName]\n    if tour ~ = nil then\n        if tour:loadFromXMLFile(xmlFile, "guidedTour.tour" ) then\n            self.pendingStartTour = tour\n        else\n                Logging.xmlWarning(xmlFile, "Could not load guided tour from savegame!" )\n            end\n        end\n\n        xmlFile:delete()\n\n        return true\n    end\n\n'})}),"\n",(0,r.jsx)(e.h3,{id:"loadguidedtours",children:"loadGuidedTours"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Load data on map load"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"loadGuidedTours()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"xmlFileHandle"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"missionInfo"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"baseDirectory"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"isBaseType"})]})]})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"true"}),(0,r.jsx)(e.th,{children:"if loading was successful else false"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:'function GuidedTourManager:loadGuidedTours(xmlFileHandle, missionInfo, baseDirectory, isBaseType)\n    -- if g_currentMission.missionDynamicInfo.isMultiplayer then\n        -- return false\n        -- end\n\n        local xmlFile = XMLFile.wrap(xmlFileHandle, Mission00.xmlSchema)\n\n        for _, key in xmlFile:iterator( "map.guidedTours.guidedTour" ) do\n            local xmlFilename = xmlFile:getValue(key .. "#filename" )\n            if xmlFilename = = nil then\n                Logging.xmlWarning(xmlFile, "Missing filename for guidedTour \'%s\'" , key)\n                    continue\n                end\n\n                local name = xmlFile:getValue(key .. "#name" )\n                if name = = nil then\n                    Logging.xmlWarning(xmlFile, "Missing name for guidedTour \'%s\'" , key)\n                        continue\n                    end\n\n                    xmlFilename = Utils.getFilename(xmlFilename, baseDirectory)\n                    local upperName = string.upper(name)\n\n                    if self.nameToGuidedTour[upperName] ~ = nil then\n                        Logging.xmlWarning(xmlFile, "GuidedTour with name \'%s\' already exists for \'%s\'!" , name, key)\n                            continue\n                        end\n\n                        local guidedTour = GuidedTourUtil.createFromXML(xmlFilename)\n                        if guidedTour ~ = nil then\n                            table.insert( self.guidedTours, guidedTour)\n                            self.nameToGuidedTour[upperName] = guidedTour\n\n                            guidedTour.name = upperName\n                            guidedTour.index = # self.guidedTours\n                        end\n                    end\n\n                    g_messageCenter:subscribeOneshot(MessageType.CURRENT_MISSION_START, GuidedTourManager.onMissionStarted, self )\n\n                    xmlFile:delete()\n\n                    return true\n                end\n\n'})}),"\n",(0,r.jsx)(e.h3,{id:"loadmapdata",children:"loadMapData"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Load data on map load"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"loadMapData()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"xmlFile"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"missionInfo"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"baseDirectory"})]})]})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"true"}),(0,r.jsx)(e.th,{children:"if loading was successful else false"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:'function GuidedTourManager:loadMapData(xmlFile, missionInfo, baseDirectory)\n    GuidedTourManager:superClass().loadMapData( self )\n\n    local success = XMLUtil.loadDataFromMapXML(xmlFile, "guidedTours" , baseDirectory, self , self.loadGuidedTours, missionInfo, baseDirectory)\n\n    if success then\n        GuidedTourHelp.init()\n    end\n\n    return success\nend\n\n'})}),"\n",(0,r.jsx)(e.h3,{id:"new",children:"new"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Creating manager"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"new()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"customMt"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"instance"}),(0,r.jsx)(e.th,{children:"instance of object"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function GuidedTourManager.new(customMt)\n    local self = AbstractManager.new(customMt or GuidedTourManager _mt)\n\n    return self\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"savetoxmlfile",children:"saveToXMLFile"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Write data to savegame file"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"saveToXMLFile(string xmlFilename)"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"string"}),(0,r.jsx)(e.th,{children:"xmlFilename"}),(0,r.jsx)(e.th,{children:"file path"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"string"}),(0,r.jsx)(e.th,{children:"true"}),(0,r.jsx)(e.th,{children:"if loading was successful else false"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:'function GuidedTourManager:saveToXMLFile(xmlFilename)\n    local xmlFile = XMLFile.create( "guidedTourXML" , xmlFilename, "guidedTour" , GuidedTourManager.xmlSchema)\n    if xmlFile = = nil then\n        Logging.error( "Failed to create guidedTour xml file" )\n        return false\n    end\n\n    local tour = self.activeTour\n    if tour ~ = nil then\n        xmlFile:setValue( "guidedTour.tour#name" , tour.name)\n        tour:saveToXMLFile(xmlFile, "guidedTour.tour" )\n    end\n\n    xmlFile:save()\n    xmlFile:delete()\n\n    return true\nend\n\n'})})]})}function u(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(c,{...n})}):c(n)}},28453(n,e,l){l.d(e,{R:()=>d,x:()=>t});var i=l(96540);const r={},s=i.createContext(r);function d(n){const e=i.useContext(s);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:d(n.components),i.createElement(s.Provider,{value:e},n.children)}}}]);