"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[13045],{20846(e,n,t){t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>l,default:()=>f,frontMatter:()=>o,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"script/Specializations/PowerTakeOffs","title":"PowerTakeOffs","description":"PowerTakeOffs","source":"@site/../docs/script/Specializations/PowerTakeOffs.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/PowerTakeOffs","permalink":"/FS25-Community-LUADOC/script/Specializations/PowerTakeOffs","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"PowerConsumer","permalink":"/FS25-Community-LUADOC/script/Specializations/PowerConsumer"},"next":{"title":"PrecisionFarmingStatistic","permalink":"/FS25-Community-LUADOC/script/Specializations/PrecisionFarmingStatistic"}}');var i=t(74848),r=t(28453);const o={},l=void 0,s={},d=[{value:"PowerTakeOffs",id:"powertakeoffs",level:2},{value:"attachPowerTakeOff",id:"attachpowertakeoff",level:3},{value:"attachTypedPowerTakeOff",id:"attachtypedpowertakeoff",level:3},{value:"checkPowerTakeOffCollision",id:"checkpowertakeoffcollision",level:3},{value:"consoleCommandDebug",id:"consolecommanddebug",level:3},{value:"consoleCommandTestConnection",id:"consolecommandtestconnection",level:3},{value:"detachPowerTakeOff",id:"detachpowertakeoff",level:3},{value:"detachTypedPowerTakeOff",id:"detachtypedpowertakeoff",level:3},{value:"getInputPowerTakeOffs",id:"getinputpowertakeoffs",level:3},{value:"getInputPowerTakeOffsByJointDescIndexAndName",id:"getinputpowertakeoffsbyjointdescindexandname",level:3},{value:"getIsPowerTakeOffActive",id:"getispowertakeoffactive",level:3},{value:"getOutputPowerTakeOffs",id:"getoutputpowertakeoffs",level:3},{value:"getOutputPowerTakeOffsByJointDescIndex",id:"getoutputpowertakeoffsbyjointdescindex",level:3},{value:"getPowerTakeOffConfigIndex",id:"getpowertakeoffconfigindex",level:3},{value:"initSpecialization",id:"initspecialization",level:3},{value:"loadBasicPowerTakeOff",id:"loadbasicpowertakeoff",level:3},{value:"loadDoubleJointPowerTakeOff",id:"loaddoublejointpowertakeoff",level:3},{value:"loadExtraDependentParts",id:"loadextradependentparts",level:3},{value:"loadInputPowerTakeOff",id:"loadinputpowertakeoff",level:3},{value:"loadLocalPowerTakeOff",id:"loadlocalpowertakeoff",level:3},{value:"loadOutputPowerTakeOff",id:"loadoutputpowertakeoff",level:3},{value:"loadPowerTakeOffFromConfigFile",id:"loadpowertakeofffromconfigfile",level:3},{value:"loadPowerTakeOffsFromXML",id:"loadpowertakeoffsfromxml",level:3},{value:"loadSingleJointPowerTakeOff",id:"loadsinglejointpowertakeoff",level:3},{value:"onDelete",id:"ondelete",level:3},{value:"onLoad",id:"onload",level:3},{value:"onPostAttachImplement",id:"onpostattachimplement",level:3},{value:"onPostLoad",id:"onpostload",level:3},{value:"onPowerTakeOffI3DLoaded",id:"onpowertakeoffi3dloaded",level:3},{value:"onPreAttachImplement",id:"onpreattachimplement",level:3},{value:"onPreDetachImplement",id:"onpredetachimplement",level:3},{value:"onPreLoad",id:"onpreload",level:3},{value:"onUpdateEnd",id:"onupdateend",level:3},{value:"onUpdateInterpolation",id:"onupdateinterpolation",level:3},{value:"parkPowerTakeOff",id:"parkpowertakeoff",level:3},{value:"placeLocalPowerTakeOff",id:"placelocalpowertakeoff",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3},{value:"registerFunctions",id:"registerfunctions",level:3},{value:"registerInputXMLPaths",id:"registerinputxmlpaths",level:3},{value:"registerOutputXMLPaths",id:"registeroutputxmlpaths",level:3},{value:"registerOverwrittenFunctions",id:"registeroverwrittenfunctions",level:3},{value:"registerXMLPaths",id:"registerxmlpaths",level:3},{value:"updateAttachedPowerTakeOffs",id:"updateattachedpowertakeoffs",level:3},{value:"updateDistanceOfTypedPowerTakeOff",id:"updatedistanceoftypedpowertakeoff",level:3},{value:"updateDoubleJointPowerTakeOff",id:"updatedoublejointpowertakeoff",level:3},{value:"updateExtraDependentParts",id:"updateextradependentparts",level:3},{value:"updatePowerTakeOff",id:"updatepowertakeoff",level:3},{value:"updatePowerTakeOffLength",id:"updatepowertakeofflength",level:3},{value:"updateSingleJointPowerTakeOff",id:"updatesinglejointpowertakeoff",level:3},{value:"validatePowerTakeOffAttachment",id:"validatepowertakeoffattachment",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"powertakeoffs",children:"PowerTakeOffs"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Specialization for vehicles with power takeoffs (PTOs), both output (e.g. tractor) and input (e.g. tool) ones"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Functions"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#attachpowertakeoff",children:"attachPowerTakeOff"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#attachtypedpowertakeoff",children:"attachTypedPowerTakeOff"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#checkpowertakeoffcollision",children:"checkPowerTakeOffCollision"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#consolecommanddebug",children:"consoleCommandDebug"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#consolecommandtestconnection",children:"consoleCommandTestConnection"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#detachpowertakeoff",children:"detachPowerTakeOff"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#detachtypedpowertakeoff",children:"detachTypedPowerTakeOff"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getinputpowertakeoffs",children:"getInputPowerTakeOffs"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getinputpowertakeoffsbyjointdescindexandname",children:"getInputPowerTakeOffsByJointDescIndexAndName"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getispowertakeoffactive",children:"getIsPowerTakeOffActive"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getoutputpowertakeoffs",children:"getOutputPowerTakeOffs"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getoutputpowertakeoffsbyjointdescindex",children:"getOutputPowerTakeOffsByJointDescIndex"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getpowertakeoffconfigindex",children:"getPowerTakeOffConfigIndex"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#initspecialization",children:"initSpecialization"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#loadbasicpowertakeoff",children:"loadBasicPowerTakeOff"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#loaddoublejointpowertakeoff",children:"loadDoubleJointPowerTakeOff"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#loadextradependentparts",children:"loadExtraDependentParts"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#loadinputpowertakeoff",children:"loadInputPowerTakeOff"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#loadlocalpowertakeoff",children:"loadLocalPowerTakeOff"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#loadoutputpowertakeoff",children:"loadOutputPowerTakeOff"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#loadpowertakeofffromconfigfile",children:"loadPowerTakeOffFromConfigFile"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#loadpowertakeoffsfromxml",children:"loadPowerTakeOffsFromXML"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#loadsinglejointpowertakeoff",children:"loadSingleJointPowerTakeOff"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#ondelete",children:"onDelete"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onpostattachimplement",children:"onPostAttachImplement"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onpostload",children:"onPostLoad"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onpowertakeoffi3dloaded",children:"onPowerTakeOffI3DLoaded"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onpreattachimplement",children:"onPreAttachImplement"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onpredetachimplement",children:"onPreDetachImplement"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onpreload",children:"onPreLoad"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onupdateend",children:"onUpdateEnd"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onupdateinterpolation",children:"onUpdateInterpolation"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#parkpowertakeoff",children:"parkPowerTakeOff"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#placelocalpowertakeoff",children:"placeLocalPowerTakeOff"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#registerinputxmlpaths",children:"registerInputXMLPaths"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#registeroutputxmlpaths",children:"registerOutputXMLPaths"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#registeroverwrittenfunctions",children:"registerOverwrittenFunctions"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#registerxmlpaths",children:"registerXMLPaths"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#updateattachedpowertakeoffs",children:"updateAttachedPowerTakeOffs"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#updatedistanceoftypedpowertakeoff",children:"updateDistanceOfTypedPowerTakeOff"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#updatedoublejointpowertakeoff",children:"updateDoubleJointPowerTakeOff"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#updateextradependentparts",children:"updateExtraDependentParts"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#updatepowertakeoff",children:"updatePowerTakeOff"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#updatepowertakeofflength",children:"updatePowerTakeOffLength"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#updatesinglejointpowertakeoff",children:"updateSingleJointPowerTakeOff"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#validatepowertakeoffattachment",children:"validatePowerTakeOffAttachment"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"attachpowertakeoff",children:"attachPowerTakeOff"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"attachPowerTakeOff()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"attachableObject"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"inputJointDescIndex"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"jointDescIndex"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function PowerTakeOffs:attachPowerTakeOff(attachableObject, inputJointDescIndex, jointDescIndex)\n    local spec = self.spec_powerTakeOffs\n    local outputs = self:getOutputPowerTakeOffsByJointDescIndex(jointDescIndex)\n\n    for _, output in ipairs(outputs) do\n        if attachableObject.getInputPowerTakeOffsByJointDescIndexAndName ~ = nil then\n            local inputs = attachableObject:getInputPowerTakeOffsByJointDescIndexAndName(inputJointDescIndex, output.ptoName)\n            for _, input in ipairs(inputs) do\n                output.connectedInput = input\n                output.connectedVehicle = attachableObject\n                input.connectedVehicle = self\n                input.connectedOutput = output\n\n                table.insert(spec.delayedPowerTakeOffsMountings, { jointDescIndex = jointDescIndex, input = input , output = output } )\n            end\n        end\n    end\n\n    return true\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"attachtypedpowertakeoff",children:"attachTypedPowerTakeOff"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"attachTypedPowerTakeOff()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"powerTakeOff"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"output"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function PowerTakeOffs:attachTypedPowerTakeOff(powerTakeOff, output )\n    if self:validatePowerTakeOffAttachment(powerTakeOff, output ) then\n        link( output.outputNode, powerTakeOff.linkNode)\n        link(powerTakeOff.inputNode, powerTakeOff.startNode)\n\n        setTranslation(powerTakeOff.linkNode, 0 , 0 , powerTakeOff.zOffset)\n        setTranslation(powerTakeOff.startNode, 0 , 0 , - powerTakeOff.zOffset)\n\n        self:updatePowerTakeOff(powerTakeOff, 0 )\n        self:updatePowerTakeOffLength(powerTakeOff)\n\n        setVisibility(powerTakeOff.linkNode, true )\n        setVisibility(powerTakeOff.startNode, true )\n\n        powerTakeOff.isLinked = true\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"checkpowertakeoffcollision",children:"checkPowerTakeOffCollision"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Check if the power take off colliding with the attacher joint if no trans node is defined -> detach if collision has\nbeen detected"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"checkPowerTakeOffCollision()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"attacherJointNode"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"jointDescIndex"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"isTrailerAttacher"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function PowerTakeOffs:checkPowerTakeOffCollision(attacherJointNode, jointDescIndex, isTrailerAttacher)\n    -- we assume that the pto is only able to collide with the drawbar on trailer attacher joints, not on implement joints etc\n    if isTrailerAttacher then\n        local ptoOutputs = self:getOutputPowerTakeOffsByJointDescIndex(jointDescIndex)\n        if ptoOutputs ~ = nil and #ptoOutputs > 0 then\n            local ptoOutput = ptoOutputs[ 1 ]\n            local ptoInput = ptoOutput.connectedInput\n            if ptoInput ~ = nil then\n                local _, y, _ = localToLocal(ptoOutput.outputNode, attacherJointNode, 0 , 0 , 0 )\n                if (ptoInput.aboveAttacher and y < 0 ) or( not ptoInput.aboveAttacher and y > 0 ) then\n                    self:detachPowerTakeOff( self , nil , jointDescIndex)\n                end\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"consolecommanddebug",children:"consoleCommandDebug"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"consoleCommandDebug()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"_"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function PowerTakeOffs.consoleCommandDebug(_)\n    if PowerTakeOffs.debugRootNode = = nil then\n        PowerTakeOffs.debugRootNode = createTransformGroup( "powerTakeOffsDebugRoot" )\n        link(getRootNode(), PowerTakeOffs.debugRootNode)\n\n        local x, y, z = g_localPlayer:getPosition()\n        local dirX, dirZ = g_localPlayer:getCurrentFacingDirection()\n\n        x, z = x + dirX * 4 , z + dirZ * 4\n        local ry = MathUtil.getYRotationFromDirection(dirX, dirZ)\n\n        setWorldTranslation( PowerTakeOffs.debugRootNode, x, y, z)\n        setWorldRotation( PowerTakeOffs.debugRootNode, 0 , ry, 0 )\n    end\n\n    if PowerTakeOffs.debugPowerTakeOffs ~ = nil then\n        for _, powerTakeOff in ipairs( PowerTakeOffs.debugPowerTakeOffs) do\n            g_currentMission:removeUpdateable(powerTakeOff)\n\n            if powerTakeOff.xmlFile ~ = nil then\n                powerTakeOff.xmlFile:delete()\n            end\n            if powerTakeOff.sharedLoadRequestId ~ = nil then\n                g_i3DManager:releaseSharedI3DFile(powerTakeOff.sharedLoadRequestId)\n                powerTakeOff.sharedLoadRequestId = nil\n            end\n\n            g_animationManager:deleteAnimations(powerTakeOff.animationNodes)\n            g_animationManager:deleteAnimations(powerTakeOff.localAnimationNodes)\n\n            delete(powerTakeOff.inputNode)\n        end\n    end\n    PowerTakeOffs.debugPowerTakeOffs = { }\n\n    local files = Files.getFilesRecursive(getAppBasePath() .. "data/shared/assets/powerTakeOffs" )\n    table.sort(files, function (a, b)\n        return a.path < b.path\n    end )\n\n    local rowIndex = 0\n    local rowPosition = 0\n    local lastBasePath = nil\n    local lastName = nil\n    for _, file in ipairs(files) do\n        if not file.isDirectory then\n            if file.filename:contains( ".xml" ) then\n                local linkNode = createTransformGroup( "linkNode" )\n                link( PowerTakeOffs.debugRootNode, linkNode)\n\n                local name = file.filename\n                name = string.gsub(name, ".xml" , "" )\n\n                local basePath = file.path:split(file.filename)[ 1 ]\n                if basePath ~ = lastBasePath or name ~ = lastName then\n                    rowIndex = rowIndex + 1\n                    rowPosition = 0\n                    lastBasePath = basePath\n                    lastName = name\n\n                    local wx, wy, wz = localToWorld( PowerTakeOffs.debugRootNode, rowIndex * 2 , 1 , - 1 )\n                    local rx, ry, rz = localRotationToWorld( PowerTakeOffs.debugRootNode, - math.pi * 0.5 , math.pi, 0 )\n                    g_debugManager:addElement( DebugText3D.new():createWithWorldPos(wx, wy, wz, rx, ry, rz, name, 0.15 ), nil , nil , math.huge)\n                end\n\n                local x = rowIndex * 2\n                local y = 1\n                local z = rowPosition\n\n                rowPosition = rowPosition + 1\n\n                setTranslation(linkNode, x, y, z)\n                setRotation(linkNode, 0 , 0 , 0 )\n\n                for typeIndex = 1 , 3 do\n                    local dummyVehicle = { }\n                    dummyVehicle.baseDirectory = ""\n\n                    for k, v in pairs( PowerTakeOffs ) do\n                        dummyVehicle[k] = v\n                    end\n\n                    dummyVehicle.onPowerTakeOffI3DLoaded = function (_, i3dNode, failedReason, args)\n                        local nameMain = args.xmlFile:getValue( "powerTakeOff#colorMaterialName" , "powerTakeOff_main_mat" )\n                        local nameDecal = args.xmlFile:getValue( "powerTakeOff#decalColorMaterialName" , "powerTakeOff_decal_mat" )\n\n                        PowerTakeOffs.onPowerTakeOffI3DLoaded(_, i3dNode, failedReason, args)\n                        if i3dNode ~ = 0 then\n                            local powerTakeOff = args.powerTakeOff\n\n                            if typeIndex = = 2 then\n                                powerTakeOff.material = VehicleMaterial.new()\n                                powerTakeOff.material.colorScale = { 0 , 1 , 1 , 1 }\n                                powerTakeOff.material:apply(powerTakeOff.inputNode, nameMain)\n\n                                powerTakeOff.decalMaterial = VehicleMaterial.new()\n                                powerTakeOff.decalMaterial.colorScale = { 1 , 0 , 1 , 1 }\n                                powerTakeOff.decalMaterial:apply(powerTakeOff.inputNode, nameDecal)\n                            elseif typeIndex = = 3 then\n                                    g_animationManager:startAnimations(powerTakeOff.animationNodes)\n\n                                    dummyVehicle.dynamicPowerTakeOff = powerTakeOff\n                                    dummyVehicle.time = 0\n                                    dummyVehicle.update = function (v, dt)\n                                        v.time = (v.time + dt) % 2500\n                                        local alpha = v.time / 2500\n                                        setTranslation(v.dynamicPowerTakeOff.detachNode, alpha * 0.5 , alpha, - 1.5 )\n\n                                        if v.dynamicPowerTakeOff.updateFunc ~ = nil then\n                                            v.dynamicPowerTakeOff.updateFunc( self , v.dynamicPowerTakeOff, dt)\n                                        end\n                                    end\n                                    g_currentMission:addUpdateable(dummyVehicle, powerTakeOff)\n                                end\n\n                                table.insert( PowerTakeOffs.debugPowerTakeOffs, powerTakeOff)\n                            end\n                        end\n                        dummyVehicle.loadSubSharedI3DFile = function (_, filename, callOnCreate, addToPhysics, asyncCallbackFunction, asyncCallbackObject, asyncCallbackArguments)\n                            return g_i3DManager:loadSharedI3DFileAsync(filename, callOnCreate, addToPhysics, asyncCallbackFunction, asyncCallbackObject, asyncCallbackArguments)\n                        end\n\n                        local powerTakeOff = { }\n                        powerTakeOff.inputNode = createTransformGroup( "inputNode" )\n                        link(linkNode, powerTakeOff.inputNode)\n                        setTranslation(powerTakeOff.inputNode, 0 , 0 , typeIndex * 3 )\n                        setRotation(powerTakeOff.inputNode, 0 , math.pi, 0 )\n\n                        powerTakeOff.detachNode = createTransformGroup( "detachNode" )\n                        link(powerTakeOff.inputNode, powerTakeOff.detachNode)\n                        setTranslation(powerTakeOff.detachNode, 0 , 0 , - 1.5 )\n                        setRotation(powerTakeOff.detachNode, 0 , 0 , 0 )\n\n                        local filename = string.gsub(file.path, getAppBasePath(), "" )\n                        PowerTakeOffs.loadPowerTakeOffFromConfigFile(dummyVehicle, powerTakeOff, filename)\n\n                        g_debugManager:addElement( DebugGizmo.new():createWithNode(powerTakeOff.inputNode, "start" , nil , nil , 0.25 ), nil , nil , math.huge)\n                        g_debugManager:addElement( DebugGizmo.new():createWithNode(powerTakeOff.detachNode, "end" , nil , nil , 0.25 ), nil , nil , math.huge)\n                    end\n                end\n            end\n        end\n    end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"consolecommandtestconnection",children:"consoleCommandTestConnection"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"consoleCommandTestConnection()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"vehicle"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"attacherJointIndex"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function PowerTakeOffs.consoleCommandTestConnection(vehicle, attacherJointIndex)\n    local spec = vehicle.spec_powerTakeOffs\n    if spec ~ = nil then\n        local lineColor = Color.new( 0 , 0.5 , 1 )\n\n        for _, output in pairs(spec.outputPowerTakeOffs) do\n            if output.debugLine ~ = nil then\n                g_debugManager:removeElement( output.debugLine)\n                output.debugLine = nil\n            end\n\n            if output.debugText ~ = nil then\n                g_debugManager:removeElement( output.debugText)\n                output.debugText = nil\n            end\n\n            for i = getNumOfChildren( output.outputNode), 1 , - 1 do\n                delete(getChildAt( output.outputNode, i - 1 ))\n            end\n\n            if output.attacherJointIndices[attacherJointIndex] ~ = nil then\n                local node = g_i3DManager:loadI3DFile( "data/shared/assets/powerTakeOffs/walterscheidW.i3d" , false , false )\n                if node ~ = 0 then\n                    link( output.outputNode, node)\n                    setTranslation(node, 0 , 0 , 0.045 )\n                    setRotation(node, 0 , math.pi, 0 )\n\n                    setVisibility(getChildAt(getChildAt(node, 0 ), 0 ), false )\n\n                    local material = VehicleMaterial.new()\n                    material.colorScale = { 1 , 0 , 1 , 1 }\n                    material:apply(node)\n                end\n                ObjectChangeUtil.setObjectChanges( output.objectChanges, true , vehicle, vehicle.setMovingToolDirty)\n\n                local attacherJointDesc = vehicle:getAttacherJointByJointDescIndex(attacherJointIndex)\n                if attacherJointDesc ~ = nil then\n                    output.debugLine = DebugLine.new():createWithStartAndEndNode(attacherJointDesc.jointTransform, output.outputNode, false , true , 100 , true )\n                    output.debugLine:setColors(lineColor, lineColor)\n                    g_debugManager:addElement( output.debugLine, nil , nil , math.huge)\n\n                    output.debugText = DebugText.new():createWithNode( output.outputNode, getName( output.outputNode), 0.01 , true )\n                    g_debugManager:addElement( output.debugText, nil , nil , math.huge)\n                end\n            else\n                    ObjectChangeUtil.setObjectChanges( output.objectChanges, false , vehicle, vehicle.setMovingToolDirty)\n                end\n            end\n        end\n    end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"detachpowertakeoff",children:"detachPowerTakeOff"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"detachPowerTakeOff()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"detachingVehicle"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"implement"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"jointDescIndex"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function PowerTakeOffs:detachPowerTakeOff(detachingVehicle, implement, jointDescIndex)\n    local spec = self.spec_powerTakeOffs\n    -- clear delayed mountings\n    spec.delayedPowerTakeOffsMountings = { }\n\n    local outputs = detachingVehicle:getOutputPowerTakeOffsByJointDescIndex(jointDescIndex or implement.jointDescIndex)\n\n    for _, output in ipairs(outputs) do\n        if output.connectedInput ~ = nil then\n            local input = output.connectedInput\n\n            if input.detachFunc ~ = nil then\n                input.detachFunc( self , input , output )\n            end\n\n            if input.connectedOutput ~ = nil then\n                g_animationManager:stopAnimations( input.connectedOutput.localAnimationNodes)\n                input.connectedOutput.isActive = false\n\n                if input.connectedVehicle.updateDashboardValueType ~ = nil then\n                    input.connectedVehicle:updateDashboardValueType( "powerTakeOffs.state" )\n                end\n            end\n\n            input.connectedVehicle = nil\n            input.connectedOutput = nil\n            output.connectedVehicle = nil\n            output.connectedInput = nil\n\n            ObjectChangeUtil.setObjectChanges( input.objectChanges, false , self , self.setMovingToolDirty)\n            ObjectChangeUtil.setObjectChanges( output.objectChanges, false , self , self.setMovingToolDirty)\n        end\n    end\n\n    return true\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"detachtypedpowertakeoff",children:"detachTypedPowerTakeOff"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"detachTypedPowerTakeOff()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"powerTakeOff"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"output"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function PowerTakeOffs:detachTypedPowerTakeOff(powerTakeOff, output )\n    self:parkPowerTakeOff(powerTakeOff)\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getinputpowertakeoffs",children:"getInputPowerTakeOffs"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getInputPowerTakeOffs()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function PowerTakeOffs:getInputPowerTakeOffs()\n    return self.spec_powerTakeOffs.inputPowerTakeOffs\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getinputpowertakeoffsbyjointdescindexandname",children:"getInputPowerTakeOffsByJointDescIndexAndName"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getInputPowerTakeOffsByJointDescIndexAndName()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"jointDescIndex"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"ptoName"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function PowerTakeOffs:getInputPowerTakeOffsByJointDescIndexAndName(jointDescIndex, ptoName)\n    local retInputs = { }\n\n    local spec = self.spec_powerTakeOffs\n    for _, input in pairs(spec.inputPowerTakeOffs) do\n        if input.inputAttacherJointIndices[jointDescIndex] ~ = nil then\n            if input.ptoName = = ptoName then\n                table.insert(retInputs, input )\n            end\n        end\n    end\n\n    if #retInputs = = 0 then\n        for _, output in pairs(spec.outputPowerTakeOffs) do\n            if output.skipToInputAttacherIndex = = jointDescIndex then\n                for index, _ in pairs( output.attacherJointIndices) do\n                    local implement = self:getImplementFromAttacherJointIndex(index)\n                    if implement ~ = nil then\n                        retInputs = implement.object:getInputPowerTakeOffsByJointDescIndexAndName(implement.inputJointDescIndex, ptoName)\n                    end\n                end\n            end\n        end\n    end\n\n    return retInputs\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getispowertakeoffactive",children:"getIsPowerTakeOffActive"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getIsPowerTakeOffActive()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function PowerTakeOffs:getIsPowerTakeOffActive()\n    return false\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getoutputpowertakeoffs",children:"getOutputPowerTakeOffs"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getOutputPowerTakeOffs()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function PowerTakeOffs:getOutputPowerTakeOffs()\n    return self.spec_powerTakeOffs.outputPowerTakeOffs\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getoutputpowertakeoffsbyjointdescindex",children:"getOutputPowerTakeOffsByJointDescIndex"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getOutputPowerTakeOffsByJointDescIndex()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"jointDescIndex"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function PowerTakeOffs:getOutputPowerTakeOffsByJointDescIndex(jointDescIndex)\n    local retOutputs = { }\n\n    local spec = self.spec_powerTakeOffs\n    for _, output in pairs(spec.outputPowerTakeOffs) do\n        if output.attacherJointIndices[jointDescIndex] ~ = nil then\n            table.insert(retOutputs, output )\n        end\n    end\n\n    if #retOutputs > 0 then\n        for _, output in ipairs(retOutputs) do\n            if output.skipToInputAttacherIndex ~ = nil then\n                local secondAttacherVehicle = self:getAttacherVehicle()\n                if secondAttacherVehicle ~ = nil then\n                    local ownImplement = secondAttacherVehicle:getImplementByObject( self )\n                    retOutputs = secondAttacherVehicle:getOutputPowerTakeOffsByJointDescIndex(ownImplement.jointDescIndex)\n                    break\n                end\n            end\n        end\n    end\n\n    return retOutputs\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getpowertakeoffconfigindex",children:"getPowerTakeOffConfigIndex"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getPowerTakeOffConfigIndex()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function PowerTakeOffs:getPowerTakeOffConfigIndex()\n    return 1\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"initspecialization",children:"initSpecialization"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"initSpecialization()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function PowerTakeOffs.initSpecialization()\n    local schema = Vehicle.xmlSchema\n    schema:setXMLSpecializationType( "PowerTakeOffs" )\n\n    PowerTakeOffs.registerXMLPaths(schema, "vehicle.powerTakeOffs.powerTakeOffConfigurations.powerTakeOffConfiguration(?)" )\n    PowerTakeOffs.registerXMLPaths(schema, "vehicle.powerTakeOffs" )\n\n    schema:addDelayedRegistrationFunc( "Cylindered:movingTool" , function (cSchema, cKey)\n        cSchema:register(XMLValueType.VECTOR_N, cKey .. ".powerTakeOffs#indices" , "PTOs to update" )\n        cSchema:register(XMLValueType.VECTOR_N, cKey .. ".powerTakeOffs#localIndices" , "Local PTOs to update" )\n    end )\n\n    schema:addDelayedRegistrationFunc( "Cylindered:movingPart" , function (cSchema, cKey)\n        cSchema:register(XMLValueType.VECTOR_N, cKey .. ".powerTakeOffs#indices" , "PTOs to update" )\n        cSchema:register(XMLValueType.VECTOR_N, cKey .. ".powerTakeOffs#localIndices" , "Local PTOs to update" )\n    end )\n\n    schema:register(XMLValueType.BOOL, "vehicle.powerTakeOffs#ignoreInvalidJointIndices" , "Do not display warning if attacher joint index could not be found.Can be useful if attacher joints change due to configurations" , false )\n        schema:register(XMLValueType.FLOAT, "vehicle.powerTakeOffs#maxUpdateDistance" , "Max.distance to vehicle root to update power take offs" , PowerTakeOffs.DEFAULT_MAX_UPDATE_DISTANCE)\n\n        Dashboard.addDelayedRegistrationFunc(schema, function (cSchema, cKey)\n            cSchema:register(XMLValueType.INT, cKey .. "#powerTakeOffIndex" , "Index of power take off in xml to use" )\n        end )\n\n        SoundManager.registerSampleXMLPaths(schema, "vehicle.powerTakeOffs.sounds" , "turnedOn(?)" )\n\n        schema:setXMLSpecializationType()\n\n        local powerTakeOffXMLSchema = XMLSchema.new( "powerTakeOff" )\n        PowerTakeOffs.xmlSchema = powerTakeOffXMLSchema\n\n        powerTakeOffXMLSchema:register(XMLValueType.STRING, "powerTakeOff#filename" , "Path to i3d file" )\n        powerTakeOffXMLSchema:register(XMLValueType.NODE_INDEX, "powerTakeOff.startNode#node" , "Start node" )\n        powerTakeOffXMLSchema:register(XMLValueType.NODE_INDEX, "powerTakeOff.linkNode#node" , "Link node" )\n        powerTakeOffXMLSchema:register(XMLValueType.FLOAT, "powerTakeOff#size" , "Height of pto" , 0.19 )\n        powerTakeOffXMLSchema:register(XMLValueType.FLOAT, "powerTakeOff#minLength" , "Minimum length of pto" , 0.6 )\n        powerTakeOffXMLSchema:register(XMLValueType.ANGLE, "powerTakeOff#maxAngle" , "Max.angle between start and end" , 45 )\n        powerTakeOffXMLSchema:register(XMLValueType.FLOAT, "powerTakeOff#zOffset" , "Z axis offset of end node" , 0 )\n        powerTakeOffXMLSchema:register(XMLValueType.STRING, "powerTakeOff#colorMaterialName" , "Color material name" , "powerTakeOff_main_mat" )\n        powerTakeOffXMLSchema:register(XMLValueType.STRING, "powerTakeOff#decalColorMaterialName" , "Decal color material name" , "powerTakeOff_decal_mat" )\n\n        AnimationManager.registerAnimationNodesXMLPaths(powerTakeOffXMLSchema, "powerTakeOff.animationNodes" )\n\n        powerTakeOffXMLSchema:register(XMLValueType.BOOL, "powerTakeOff#isSingleJoint" , "Is single joint PTO" , false )\n        powerTakeOffXMLSchema:register(XMLValueType.BOOL, "powerTakeOff#isDoubleJoint" , "Is double joint PTO" , false )\n\n        powerTakeOffXMLSchema:register(XMLValueType.NODE_INDEX, "powerTakeOff.startJoint#node" , "(Single Joint) Start joint node" )\n        powerTakeOffXMLSchema:register(XMLValueType.NODE_INDEX, "powerTakeOff.endJoint#node" , "(Single Joint) End joint node" )\n\n        powerTakeOffXMLSchema:register(XMLValueType.NODE_INDEX, "powerTakeOff.scalePart#node" , "(Single|Double Joint) Scale part node" )\n        powerTakeOffXMLSchema:register(XMLValueType.NODE_INDEX, "powerTakeOff.scalePart#referenceNode" , "(Single|Double Joint) Scale part reference node" )\n\n        powerTakeOffXMLSchema:register(XMLValueType.NODE_INDEX, "powerTakeOff.translationPart#node" , "(Single|Double Joint) translation part node" )\n        powerTakeOffXMLSchema:register(XMLValueType.NODE_INDEX, "powerTakeOff.translationPart#referenceNode" , "(Single|Double Joint) translation part reference node" )\n        powerTakeOffXMLSchema:register(XMLValueType.FLOAT, "powerTakeOff.translationPart#length" , "(Single|Double Joint) translation part length" , 0.4 )\n\n        powerTakeOffXMLSchema:register(XMLValueType.NODE_INDEX, "powerTakeOff.translationPart.decal#node" , "(Single|Double Joint) translation part decal node" )\n        powerTakeOffXMLSchema:register(XMLValueType.FLOAT, "powerTakeOff.translationPart.decal#size" , "(Single|Double Joint) translation part decal size" , 0.1 )\n        powerTakeOffXMLSchema:register(XMLValueType.FLOAT, "powerTakeOff.translationPart.decal#offset" , "(Single|Double Joint) translation part decal offset" , 0.05 )\n        powerTakeOffXMLSchema:register(XMLValueType.FLOAT, "powerTakeOff.translationPart.decal#minOffset" , "(Single|Double Joint) translation part decal minOffset" , 0.01 )\n\n        powerTakeOffXMLSchema:register(XMLValueType.NODE_INDEX, "powerTakeOff.startJoint1#node" , "(Double Joint) Start joint 1" )\n        powerTakeOffXMLSchema:register(XMLValueType.NODE_INDEX, "powerTakeOff.startJoint2#node" , "(Double Joint) Start joint 2" )\n\n        powerTakeOffXMLSchema:register(XMLValueType.NODE_INDEX, "powerTakeOff.endJoint1#node" , "(Double Joint) End joint 1" )\n        powerTakeOffXMLSchema:register(XMLValueType.NODE_INDEX, "powerTakeOff.endJoint1#referenceNode" , "(Double Joint) End joint 1 reference node" )\n        powerTakeOffXMLSchema:register(XMLValueType.NODE_INDEX, "powerTakeOff.endJoint2#node" , "(Double Joint) End joint 2" )\n\n        I3DUtil.registerI3dMappingXMLPaths(powerTakeOffXMLSchema, "powerTakeOff" )\n    end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"loadbasicpowertakeoff",children:"loadBasicPowerTakeOff"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"loadBasicPowerTakeOff()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"powerTakeOff"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"xmlFile"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"components"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"i3dMappings"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function PowerTakeOffs:loadBasicPowerTakeOff(powerTakeOff, xmlFile, components, i3dMappings)\n    powerTakeOff.startNode = xmlFile:getValue( "powerTakeOff.startNode#node" , nil , components, i3dMappings)\n    powerTakeOff.linkNode = xmlFile:getValue( "powerTakeOff.linkNode#node" , nil , components, i3dMappings)\n\n    powerTakeOff.attachFunc = PowerTakeOffs.attachTypedPowerTakeOff\n    powerTakeOff.detachFunc = PowerTakeOffs.detachTypedPowerTakeOff\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"loaddoublejointpowertakeoff",children:"loadDoubleJointPowerTakeOff"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"loadDoubleJointPowerTakeOff()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"powerTakeOff"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"xmlFile"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"components"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"i3dMappings"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function PowerTakeOffs:loadDoubleJointPowerTakeOff(powerTakeOff, xmlFile, components, i3dMappings)\n    powerTakeOff.startJoint1 = xmlFile:getValue( "powerTakeOff.startJoint1#node" , nil , components, i3dMappings)\n    powerTakeOff.startJoint2 = xmlFile:getValue( "powerTakeOff.startJoint2#node" , nil , components, i3dMappings)\n\n    powerTakeOff.scalePart = xmlFile:getValue( "powerTakeOff.scalePart#node" , nil , components, i3dMappings)\n    powerTakeOff.scalePartRef = xmlFile:getValue( "powerTakeOff.scalePart#referenceNode" , nil , components, i3dMappings)\n    local _, _, dis = localToLocal(powerTakeOff.scalePartRef, powerTakeOff.scalePart, 0 , 0 , 0 )\n    powerTakeOff.scalePartBaseDistance = dis\n\n    powerTakeOff.translationPart = xmlFile:getValue( "powerTakeOff.translationPart#node" , nil , components, i3dMappings)\n    powerTakeOff.translationPartRef = xmlFile:getValue( "powerTakeOff.translationPart#referenceNode" , nil , components, i3dMappings)\n    powerTakeOff.translationPartLength = xmlFile:getValue( "powerTakeOff.translationPart#length" , 0.4 )\n\n    powerTakeOff.decal = xmlFile:getValue( "powerTakeOff.translationPart.decal#node" , nil , components, i3dMappings)\n    powerTakeOff.decalSize = xmlFile:getValue( "powerTakeOff.translationPart.decal#size" , 0.1 )\n    powerTakeOff.decalOffset = xmlFile:getValue( "powerTakeOff.translationPart.decal#offset" , 0.05 )\n    powerTakeOff.decalMinOffset = xmlFile:getValue( "powerTakeOff.translationPart.decal#minOffset" , 0.01 )\n\n    powerTakeOff.endJoint1 = xmlFile:getValue( "powerTakeOff.endJoint1#node" , nil , components, i3dMappings)\n    powerTakeOff.endJoint1Ref = xmlFile:getValue( "powerTakeOff.endJoint1#referenceNode" , nil , components, i3dMappings)\n\n    powerTakeOff.endJoint2 = xmlFile:getValue( "powerTakeOff.endJoint2#node" , nil , components, i3dMappings)\n    powerTakeOff.linkNode = xmlFile:getValue( "powerTakeOff.linkNode#node" , nil , components, i3dMappings)\n\n    local _, _, betweenLength = localToLocal(powerTakeOff.translationPart, powerTakeOff.translationPartRef, 0 , 0 , 0 )\n    local _, _, ptoLength = localToLocal(powerTakeOff.startNode, powerTakeOff.linkNode, 0 , 0 , 0 )\n    powerTakeOff.betweenLength = math.abs(betweenLength)\n    powerTakeOff.connectorLength = math.abs(ptoLength) - math.abs(betweenLength)\n\n    setTranslation(powerTakeOff.linkNode, 0 , 0 , 0 )\n    setRotation(powerTakeOff.linkNode, 0 , 0 , 0 )\n\n    powerTakeOff.updateFunc = PowerTakeOffs.updateDoubleJointPowerTakeOff\n    powerTakeOff.updateDistanceFunc = PowerTakeOffs.updateDistanceOfTypedPowerTakeOff\n    powerTakeOff.attachFunc = PowerTakeOffs.attachTypedPowerTakeOff\n    powerTakeOff.detachFunc = PowerTakeOffs.detachTypedPowerTakeOff\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"loadextradependentparts",children:"loadExtraDependentParts"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"loadExtraDependentParts()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"superFunc"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"xmlFile"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"baseName"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"entry"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function PowerTakeOffs:loadExtraDependentParts(superFunc, xmlFile, baseName, entry)\n    if not superFunc( self , xmlFile, baseName, entry) then\n        return false\n    end\n\n    local indices = xmlFile:getValue(baseName .. ".powerTakeOffs#indices" , nil , true )\n    if indices ~ = nil then\n        entry.powerTakeOffs = { }\n\n        for i = 1 , #indices do\n            table.insert(entry.powerTakeOffs, indices[i])\n        end\n    end\n\n    local localIndices = xmlFile:getValue(baseName .. ".powerTakeOffs#localIndices" , nil , true )\n    if localIndices ~ = nil then\n        entry.localPowerTakeOffs = { }\n\n        for i = 1 , #localIndices do\n            table.insert(entry.localPowerTakeOffs, localIndices[i])\n        end\n    end\n\n    return true\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"loadinputpowertakeoff",children:"loadInputPowerTakeOff"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"loadInputPowerTakeOff()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"xmlFile"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"baseName"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"powerTakeOffInput"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function PowerTakeOffs:loadInputPowerTakeOff(xmlFile, baseName, powerTakeOffInput)\n    XMLUtil.checkDeprecatedXMLElements(xmlFile, baseName .. "#color" , baseName .. "#materialTemplateName" ) -- FS22 to FS25\n    XMLUtil.checkDeprecatedXMLElements(xmlFile, baseName .. "#decalColor" , baseName .. "#decalMaterialTemplateName" ) -- FS22 to FS25\n\n    local inputNode = xmlFile:getValue(baseName .. "#inputNode" , nil , self.components, self.i3dMappings)\n    if inputNode = = nil then\n        Logging.xmlWarning(xmlFile, "Pto input needs to have a valid \'inputNode\' in \'%s\'" , baseName)\n        return false\n    end\n\n    local inputAttacherJointIndices = { }\n    local inputAttacherJointIndicesRaw = xmlFile:getValue(baseName .. "#inputAttacherJointIndices" , nil , true )\n    if inputAttacherJointIndicesRaw ~ = nil then\n        for _, inputAttacherJointIndex in ipairs(inputAttacherJointIndicesRaw) do\n\n            if self:getInputAttacherJointByJointDescIndex(inputAttacherJointIndex) ~ = nil then\n                inputAttacherJointIndices[inputAttacherJointIndex] = true\n            else\n                    if not self.spec_powerTakeOffs.ignoreInvalidJointIndices then\n                        Logging.xmlWarning( self.xmlFile, "The given inputAttacherJointIndex \'%d\' for powerTakeOff can\'t be resolved into a valid attacherJoint in %s" , inputAttacherJointIndex, baseName)\n                        end\n                    end\n                end\n            end\n\n            local inputAttacherJointNodesRaw = xmlFile:getValue(baseName .. "#inputAttacherJointNodes" , nil , self.components, self.i3dMappings, true )\n            if inputAttacherJointNodesRaw ~ = nil then\n                for _, node in ipairs(inputAttacherJointNodesRaw) do\n                    local inputAttacherJointIndex = self:getInputAttacherJointIndexByNode(node)\n                    if inputAttacherJointIndex ~ = nil then\n                        inputAttacherJointIndices[inputAttacherJointIndex] = true\n                    end\n                end\n            end\n\n            if next(inputAttacherJointIndices) = = nil then\n                Logging.xmlWarning(xmlFile, "Pto output needs to have valid \'inputAttacherJointIndices\' or \'inputAttacherJointNodes\' in \'%s\'" , baseName)\n                return false\n            end\n\n            powerTakeOffInput.inputNode = inputNode\n            if Platform.gameplay.hasDetachedPowerTakeOffs then\n                powerTakeOffInput.detachNode = xmlFile:getValue(baseName .. "#detachNode" , nil , self.components, self.i3dMappings)\n            end\n\n            powerTakeOffInput.inputAttacherJointIndices = inputAttacherJointIndices\n\n            powerTakeOffInput.aboveAttacher = xmlFile:getValue(baseName .. "#aboveAttacher" , true )\n\n            powerTakeOffInput.material = xmlFile:getValue(baseName .. "#materialTemplateName" , nil , self.customEnvironment)\n            powerTakeOffInput.decalMaterial = xmlFile:getValue(baseName .. "#decalMaterialTemplateName" , nil , self.customEnvironment)\n\n            powerTakeOffInput.ptoName = xmlFile:getValue(baseName .. "#ptoName" , "DEFAULT_PTO" )\n\n            powerTakeOffInput.localAnimationNodes = g_animationManager:loadAnimations(xmlFile, baseName .. ".animationNodes" , self.components, self , self.i3dMappings)\n\n            powerTakeOffInput.objectChanges = { }\n            ObjectChangeUtil.loadObjectChangeFromXML(xmlFile, baseName, powerTakeOffInput.objectChanges, self.components, self )\n            ObjectChangeUtil.setObjectChanges(powerTakeOffInput.objectChanges, false , self , self.setMovingToolDirty)\n\n            local filename = xmlFile:getValue(baseName .. "#filename" , "$data/shared/assets/powerTakeOffs/walterscheidW.xml" )\n            if filename ~ = nil then\n                self:loadPowerTakeOffFromConfigFile(powerTakeOffInput, filename)\n            end\n\n            return true\n        end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"loadlocalpowertakeoff",children:"loadLocalPowerTakeOff"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"loadLocalPowerTakeOff()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"xmlFile"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"baseName"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"powerTakeOffLocal"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function PowerTakeOffs:loadLocalPowerTakeOff(xmlFile, baseName, powerTakeOffLocal)\n    powerTakeOffLocal.isLocal = true\n\n    powerTakeOffLocal.inputNode = xmlFile:getValue(baseName .. "#startNode" , nil , self.components, self.i3dMappings)\n    if powerTakeOffLocal.inputNode = = nil then\n        Logging.xmlWarning(xmlFile, "Missing startNode for local power take off \'%s\'" , baseName)\n            return false\n        end\n\n        powerTakeOffLocal.endNode = xmlFile:getValue(baseName .. "#endNode" , nil , self.components, self.i3dMappings)\n        if powerTakeOffLocal.endNode = = nil then\n            Logging.xmlWarning(xmlFile, "Missing endNode for local power take off \'%s\'" , baseName)\n                return false\n            end\n\n            powerTakeOffLocal.material = xmlFile:getValue(baseName .. "#materialTemplateName" , nil , self.customEnvironment)\n            powerTakeOffLocal.decalMaterial = xmlFile:getValue(baseName .. "#decalMaterialTemplateName" , nil , self.customEnvironment)\n\n            powerTakeOffLocal.predefinedLength = xmlFile:getValue(baseName .. "#length" )\n\n            local filename = xmlFile:getValue(baseName .. "#filename" , "$data/shared/assets/powerTakeOffs/walterscheidW.xml" )\n            if filename ~ = nil then\n                self:loadPowerTakeOffFromConfigFile(powerTakeOffLocal, filename)\n            end\n\n            return true\n        end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"loadoutputpowertakeoff",children:"loadOutputPowerTakeOff"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"loadOutputPowerTakeOff()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"xmlFile"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"baseName"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"powerTakeOffOutput"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function PowerTakeOffs:loadOutputPowerTakeOff(xmlFile, baseName, powerTakeOffOutput)\n    XMLUtil.checkDeprecatedXMLElements(xmlFile, baseName .. "#linkNode" , baseName .. "#outputNode" ) -- FS19 to FS19\n    XMLUtil.checkDeprecatedXMLElements(xmlFile, baseName .. "#filename" , "pto file is now defined in the pto input node" ) -- FS19 to FS19\n\n    powerTakeOffOutput.skipToInputAttacherIndex = xmlFile:getValue(baseName .. "#skipToInputAttacherIndex" )\n\n    local outputNode = xmlFile:getValue(baseName .. "#outputNode" , nil , self.components, self.i3dMappings)\n    if outputNode = = nil and powerTakeOffOutput.skipToInputAttacherIndex = = nil then\n        Logging.xmlWarning(xmlFile, "Pto output needs to have either a valid \'outputNode\' or a \'skipToInputAttacherIndex\' in \'%s\'" , baseName)\n        return false\n    end\n\n    local attacherJointIndices = { }\n    local attacherJointIndicesRaw = xmlFile:getValue(baseName .. "#attacherJointIndices" , nil , true )\n    if attacherJointIndicesRaw ~ = nil then\n        for _, attacherJointIndex in ipairs(attacherJointIndicesRaw) do\n            if self:getAttacherJointByJointDescIndex(attacherJointIndex) ~ = nil then\n                attacherJointIndices[attacherJointIndex] = true\n            else\n                    if not self.spec_powerTakeOffs.ignoreInvalidJointIndices then\n                        Logging.xmlWarning( self.xmlFile, "The given attacherJointIndex \'%d\' for powerTakeOff can\'t be resolved into a valid attacherJoint in %s" , attacherJointIndex, baseName)\n                        end\n                    end\n                end\n            end\n\n            local attacherJointNodesRaw = xmlFile:getValue(baseName .. "#attacherJointNodes" , nil , self.components, self.i3dMappings, true )\n            if attacherJointNodesRaw ~ = nil then\n                for _, node in ipairs(attacherJointNodesRaw) do\n                    local attacherJointIndex = self:getAttacherJointIndexByNode(node)\n                    if attacherJointIndex ~ = nil then\n                        attacherJointIndices[attacherJointIndex] = true\n                    end\n                end\n            end\n\n            if next(attacherJointIndices) = = nil then\n                return false\n            end\n\n            powerTakeOffOutput.outputNode = outputNode\n            powerTakeOffOutput.attacherJointIndices = attacherJointIndices\n            powerTakeOffOutput.connectedInput = nil\n\n            powerTakeOffOutput.ptoName = xmlFile:getValue(baseName .. "#ptoName" , "DEFAULT_PTO" )\n\n            powerTakeOffOutput.localAnimationNodes = g_animationManager:loadAnimations(xmlFile, baseName .. ".animationNodes" , self.components, self , self.i3dMappings)\n\n            powerTakeOffOutput.objectChanges = { }\n            ObjectChangeUtil.loadObjectChangeFromXML(xmlFile, baseName, powerTakeOffOutput.objectChanges, self.components, self )\n            ObjectChangeUtil.setObjectChanges(powerTakeOffOutput.objectChanges, false , self , self.setMovingToolDirty)\n\n            powerTakeOffOutput.isActive = false\n\n            if self.registerDashboardValueType ~ = nil then\n                local powerTakeOffLoadFunc = function ( self , xmlFile, key, dashboard, isActive)\n                    local powerTakeOffIndex = xmlFile:getValue(key .. "#powerTakeOffIndex" )\n                    if powerTakeOffIndex ~ = nil then\n                        dashboard.powerTakeOffOutput = self.spec_powerTakeOffs.outputPowerTakeOffs[powerTakeOffIndex]\n                    end\n\n                    return true\n                end\n\n                local state = DashboardValueType.new( "powerTakeOffs" , "state" )\n                state:setXMLKey(baseName)\n                state:setValue(powerTakeOffOutput, function (_powerTakeOffOutput, dashboard)\n                    return(dashboard.powerTakeOffOutput or _powerTakeOffOutput).isActive\n                end )\n                state:setAdditionalFunctions(powerTakeOffLoadFunc, nil )\n                state:setPollUpdate( false )\n                self:registerDashboardValueType(state)\n            end\n\n            return true\n        end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"loadpowertakeofffromconfigfile",children:"loadPowerTakeOffFromConfigFile"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"loadPowerTakeOffFromConfigFile()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"powerTakeOff"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"xmlFilename"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function PowerTakeOffs:loadPowerTakeOffFromConfigFile(powerTakeOff, xmlFilename)\n    xmlFilename = Utils.getFilename(xmlFilename, self.baseDirectory)\n    local xmlFile = XMLFile.load( "PtoConfig" , xmlFilename, PowerTakeOffs.xmlSchema)\n    if xmlFile ~ = nil then\n        local i3dFilename = xmlFile:getValue( "powerTakeOff#filename" )\n        if i3dFilename ~ = nil then\n            i3dFilename = Utils.getFilename(i3dFilename, self.baseDirectory)\n            powerTakeOff.xmlFile = xmlFile\n            local arguments = {\n            xmlFile = xmlFile,\n            powerTakeOff = powerTakeOff\n            }\n            powerTakeOff.sharedLoadRequestId = self:loadSubSharedI3DFile(i3dFilename, false , false , self.onPowerTakeOffI3DLoaded, self , arguments)\n        else\n                Logging.xmlWarning( self.xmlFile, "Failed to open powerTakeOff i3d file \'%s\' in \'%s\'" , i3dFilename, xmlFilename)\n                xmlFile:delete()\n            end\n        else\n                Logging.warning( "Failed to open powerTakeOff config file \'%s\'" , xmlFilename)\n            end\n        end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"loadpowertakeoffsfromxml",children:"loadPowerTakeOffsFromXML"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"loadPowerTakeOffsFromXML()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"xmlFile"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"key"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function PowerTakeOffs:loadPowerTakeOffsFromXML(xmlFile, key)\n    local spec = self.spec_powerTakeOffs\n\n    if SpecializationUtil.hasSpecialization( AttacherJoints , self.specializations) then\n        xmlFile:iterate(key .. ".output" , function (_, outputKey)\n            local powerTakeOffOutput = { }\n            if self:loadOutputPowerTakeOff(xmlFile, outputKey, powerTakeOffOutput) then\n                table.insert(spec.outputPowerTakeOffs, powerTakeOffOutput)\n            end\n        end )\n    end\n\n    if SpecializationUtil.hasSpecialization( Attachable , self.specializations) then\n        xmlFile:iterate(key .. ".input" , function (_, inputKey)\n            local powerTakeOffInput = { }\n            if self:loadInputPowerTakeOff(xmlFile, inputKey, powerTakeOffInput) then\n                table.insert(spec.inputPowerTakeOffs, powerTakeOffInput)\n            end\n        end )\n    end\n\n    xmlFile:iterate(key .. ".local" , function (_, localKey)\n        local powerTakeOffLocal = { }\n        if self:loadLocalPowerTakeOff(xmlFile, localKey, powerTakeOffLocal) then\n            table.insert(spec.localPowerTakeOffs, powerTakeOffLocal)\n        end\n    end )\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"loadsinglejointpowertakeoff",children:"loadSingleJointPowerTakeOff"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"loadSingleJointPowerTakeOff()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"powerTakeOff"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"xmlFile"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"components"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"i3dMappings"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function PowerTakeOffs:loadSingleJointPowerTakeOff(powerTakeOff, xmlFile, components, i3dMappings)\n    powerTakeOff.startJoint = xmlFile:getValue( "powerTakeOff.startJoint#node" , nil , components, i3dMappings)\n\n    powerTakeOff.scalePart = xmlFile:getValue( "powerTakeOff.scalePart#node" , nil , components, i3dMappings)\n    powerTakeOff.scalePartRef = xmlFile:getValue( "powerTakeOff.scalePart#referenceNode" , nil , components, i3dMappings)\n    local _, _, dis = localToLocal(powerTakeOff.scalePartRef, powerTakeOff.scalePart, 0 , 0 , 0 )\n    powerTakeOff.scalePartBaseDistance = dis\n\n    powerTakeOff.translationPart = xmlFile:getValue( "powerTakeOff.translationPart#node" , nil , components, i3dMappings)\n    powerTakeOff.translationPartRef = xmlFile:getValue( "powerTakeOff.translationPart#referenceNode" , nil , components, i3dMappings)\n    powerTakeOff.translationPartLength = xmlFile:getValue( "powerTakeOff.translationPart#length" , 0.4 )\n\n    powerTakeOff.decal = xmlFile:getValue( "powerTakeOff.translationPart.decal#node" , nil , components, i3dMappings)\n    powerTakeOff.decalSize = xmlFile:getValue( "powerTakeOff.translationPart.decal#size" , 0.1 )\n    powerTakeOff.decalOffset = xmlFile:getValue( "powerTakeOff.translationPart.decal#offset" , 0.05 )\n    powerTakeOff.decalMinOffset = xmlFile:getValue( "powerTakeOff.translationPart.decal#minOffset" , 0.01 )\n\n    powerTakeOff.endJoint = xmlFile:getValue( "powerTakeOff.endJoint#node" , nil , components, i3dMappings)\n    powerTakeOff.linkNode = xmlFile:getValue( "powerTakeOff.linkNode#node" , nil , components, i3dMappings)\n\n    local _, _, betweenLength = localToLocal(powerTakeOff.translationPart, powerTakeOff.translationPartRef, 0 , 0 , 0 )\n    local _, _, ptoLength = localToLocal(powerTakeOff.startNode, powerTakeOff.linkNode, 0 , 0 , 0 )\n    powerTakeOff.betweenLength = math.abs(betweenLength)\n    powerTakeOff.connectorLength = math.abs(ptoLength) - math.abs(betweenLength)\n\n    setTranslation(powerTakeOff.linkNode, 0 , 0 , 0 )\n    setRotation(powerTakeOff.linkNode, 0 , 0 , 0 )\n\n    powerTakeOff.updateFunc = PowerTakeOffs.updateSingleJointPowerTakeOff\n    powerTakeOff.updateDistanceFunc = PowerTakeOffs.updateDistanceOfTypedPowerTakeOff\n    powerTakeOff.attachFunc = PowerTakeOffs.attachTypedPowerTakeOff\n    powerTakeOff.detachFunc = PowerTakeOffs.detachTypedPowerTakeOff\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"ondelete",children:"onDelete"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onDelete()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function PowerTakeOffs:onDelete()\n    local spec = self.spec_powerTakeOffs\n    if spec.outputPowerTakeOffs ~ = nil then\n        for _, output in pairs(spec.outputPowerTakeOffs) do\n            if output.xmlFile ~ = nil then\n                output.xmlFile:delete()\n                output.xmlFile = nil\n            end\n            if output.sharedLoadRequestId ~ = nil then\n                g_i3DManager:releaseSharedI3DFile( output.sharedLoadRequestId)\n                output.sharedLoadRequestId = nil\n            end\n\n            g_animationManager:deleteAnimations( output.localAnimationNodes)\n\n            if output.rootNode ~ = nil then\n                delete( output.rootNode)\n                delete( output.attachNode)\n            end\n        end\n    end\n\n    if spec.inputPowerTakeOffs ~ = nil then\n        for _, input in pairs(spec.inputPowerTakeOffs) do\n            if input.xmlFile ~ = nil then\n                input.xmlFile:delete()\n                input.xmlFile = nil\n            end\n            if input.sharedLoadRequestId ~ = nil then\n                g_i3DManager:releaseSharedI3DFile( input.sharedLoadRequestId)\n                input.sharedLoadRequestId = nil\n            end\n\n            g_animationManager:deleteAnimations( input.animationNodes)\n            g_animationManager:deleteAnimations( input.localAnimationNodes)\n\n            if input.rootNode ~ = nil then\n                delete( input.rootNode)\n                delete( input.attachNode)\n            end\n        end\n    end\n\n    if spec.localPowerTakeOffs ~ = nil then\n        for _,localPto in pairs(spec.localPowerTakeOffs) do\n            if localPto.xmlFile ~ = nil then\n                localPto.xmlFile:delete()\n                localPto.xmlFile = nil\n            end\n            if localPto.sharedLoadRequestId ~ = nil then\n                g_i3DManager:releaseSharedI3DFile(localPto.sharedLoadRequestId)\n                localPto.sharedLoadRequestId = nil\n            end\n            g_animationManager:deleteAnimations(localPto.animationNodes)\n        end\n    end\n\n    if spec.samples ~ = nil then\n        g_soundManager:deleteSamples(spec.samples.turnedOn)\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onLoad()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function PowerTakeOffs:onLoad(savegame)\n    local spec = self.spec_powerTakeOffs\n\n    spec.outputPowerTakeOffs = { }\n    spec.inputPowerTakeOffs = { }\n    spec.localPowerTakeOffs = { }\n\n    spec.ignoreInvalidJointIndices = self.xmlFile:getValue( "vehicle.powerTakeOffs#ignoreInvalidJointIndices" , false )\n    spec.maxUpdateDistance = self.xmlFile:getValue( "vehicle.powerTakeOffs#maxUpdateDistance" , PowerTakeOffs.DEFAULT_MAX_UPDATE_DISTANCE)\n    spec.delayedPowerTakeOffsMountings = { }\n\n    if not self.isClient then\n        SpecializationUtil.removeEventListener( self , "onUpdateInterpolation" , PowerTakeOffs )\n    else\n            spec.samples = { }\n            spec.samples.turnedOn = g_soundManager:loadSamplesFromXML( self.xmlFile, "vehicle.powerTakeOffs.sounds" , "turnedOn" , self.baseDirectory, self.components, 0 , AudioGroup.VEHICLE, self.i3dMappings, self )\n        end\n    end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"onpostattachimplement",children:"onPostAttachImplement"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onPostAttachImplement()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"attachableObject"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"inputJointDescIndex"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"jointDescIndex"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"loadFromSavegame"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function PowerTakeOffs:onPostAttachImplement(attachableObject, inputJointDescIndex, jointDescIndex, loadFromSavegame)\n    local spec = self.spec_powerTakeOffs\n    for i = #spec.delayedPowerTakeOffsMountings, 1 , - 1 do\n        local delayedMounting = spec.delayedPowerTakeOffsMountings[i]\n        if delayedMounting.jointDescIndex = = jointDescIndex then\n            local input = delayedMounting.input\n            local output = delayedMounting.output\n\n            if input.attachFunc ~ = nil then\n                input.attachFunc( self , input , output )\n            end\n\n            ObjectChangeUtil.setObjectChanges( input.objectChanges, true , self , self.setMovingToolDirty)\n            ObjectChangeUtil.setObjectChanges( output.objectChanges, true , self , self.setMovingToolDirty)\n\n            table.remove(spec.delayedPowerTakeOffsMountings, i)\n        end\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"onpostload",children:"onPostLoad"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onPostLoad()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function PowerTakeOffs:onPostLoad(savegame)\n    local spec = self.spec_powerTakeOffs\n\n    -- load the power take offs after all attacher joints have been loaded\n    self:loadPowerTakeOffsFromXML( self.xmlFile, "vehicle.powerTakeOffs" )\n\n    local configKey = string.format( "vehicle.powerTakeOffs.powerTakeOffConfigurations.powerTakeOffConfiguration(%d)" , spec.configIndex - 1 )\n    if self.xmlFile:hasProperty(configKey) then\n        self:loadPowerTakeOffsFromXML( self.xmlFile, configKey)\n    end\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"onpowertakeoffi3dloaded",children:"onPowerTakeOffI3DLoaded"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onPowerTakeOffI3DLoaded()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"i3dNode"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"failedReason"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"args"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function PowerTakeOffs:onPowerTakeOffI3DLoaded(i3dNode, failedReason, args)\n    local xmlFile = args.xmlFile\n    local powerTakeOff = args.powerTakeOff\n\n    if i3dNode ~ = 0 then\n        powerTakeOff.components = { }\n        powerTakeOff.i3dMappings = { }\n        I3DUtil.loadI3DComponents(i3dNode, powerTakeOff.components)\n        I3DUtil.loadI3DMapping(xmlFile, "powerTakeOff" , powerTakeOff.components, powerTakeOff.i3dMappings)\n\n        powerTakeOff.startNode = xmlFile:getValue( "powerTakeOff.startNode#node" , nil , powerTakeOff.components, powerTakeOff.i3dMappings)\n        if powerTakeOff.startNode ~ = nil then\n            powerTakeOff.size = xmlFile:getValue( "powerTakeOff#size" , 0.19 )\n            powerTakeOff.minLength = xmlFile:getValue( "powerTakeOff#minLength" , 0.6 )\n            powerTakeOff.maxAngle = xmlFile:getValue( "powerTakeOff#maxAngle" , 45 )\n            powerTakeOff.zOffset = xmlFile:getValue( "powerTakeOff#zOffset" , 0 )\n\n            powerTakeOff.animationNodes = g_animationManager:loadAnimations(xmlFile, "powerTakeOff.animationNodes" , powerTakeOff.components, self , powerTakeOff.i3dMappings)\n\n            if powerTakeOff.material ~ = nil then\n                local materialName = xmlFile:getValue( "powerTakeOff#colorMaterialName" , "powerTakeOff_main_mat" )\n                powerTakeOff.material:apply(powerTakeOff.startNode, materialName, true )\n            end\n\n            if powerTakeOff.decalMaterial ~ = nil then\n                local materialName = xmlFile:getValue( "powerTakeOff#decalColorMaterialName" , "powerTakeOff_decal_mat" )\n                powerTakeOff.decalMaterial:apply(powerTakeOff.startNode, materialName, true )\n            end\n\n            if xmlFile:getValue( "powerTakeOff#isSingleJoint" ) then\n                self:loadSingleJointPowerTakeOff(powerTakeOff, xmlFile, powerTakeOff.components, powerTakeOff.i3dMappings)\n            elseif xmlFile:getValue( "powerTakeOff#isDoubleJoint" ) then\n                    self:loadDoubleJointPowerTakeOff(powerTakeOff, xmlFile, powerTakeOff.components, powerTakeOff.i3dMappings)\n                else\n                        self:loadBasicPowerTakeOff(powerTakeOff, xmlFile, powerTakeOff.components, powerTakeOff.i3dMappings)\n                    end\n\n                    link(powerTakeOff.inputNode, powerTakeOff.startNode)\n\n                    powerTakeOff.i3dLoaded = true\n\n                    if powerTakeOff.isLocal then\n                        self:placeLocalPowerTakeOff(powerTakeOff)\n                    else\n                            self:parkPowerTakeOff(powerTakeOff)\n                        end\n\n                        self:updatePowerTakeOff(powerTakeOff, 0 )\n                    else\n                            Logging.xmlWarning(xmlFile, "Failed to find startNode in powerTakeOff file \'%s\'" , xmlFile.filename)\n                        end\n\n                        delete(i3dNode)\n                    else\n                            if not( self.isDeleted or self.isDeleting) then\n                                Logging.xmlWarning( self.xmlFile, "Failed to find powerTakeOff in file \'%s\'" , xmlFile.filename)\n                            end\n                        end\n\n                        xmlFile:delete()\n                        powerTakeOff.xmlFile = nil\n                    end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"onpreattachimplement",children:"onPreAttachImplement"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onPreAttachImplement()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"attachableObject"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"inputJointDescIndex"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"jointDescIndex"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"loadFromSavegame"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function PowerTakeOffs:onPreAttachImplement(attachableObject, inputJointDescIndex, jointDescIndex, loadFromSavegame)\n    self:attachPowerTakeOff(attachableObject, inputJointDescIndex, jointDescIndex)\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"onpredetachimplement",children:"onPreDetachImplement"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onPreDetachImplement()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"implement"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function PowerTakeOffs:onPreDetachImplement(implement)\n    self:detachPowerTakeOff( self , implement)\n\n    if self.isClient then\n        local spec = self.spec_powerTakeOffs\n        g_soundManager:stopSamples(spec.samples.turnedOn)\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"onpreload",children:"onPreLoad"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onPreLoad()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function PowerTakeOffs:onPreLoad(savegame)\n    local spec = self.spec_powerTakeOffs\n    spec.configIndex = self:getPowerTakeOffConfigIndex()\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"onupdateend",children:"onUpdateEnd"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onUpdateEnd()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"dt"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"isActiveForInput"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"isActiveForInputIgnoreSelection"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"isSelected"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function PowerTakeOffs:onUpdateEnd(dt, isActiveForInput, isActiveForInputIgnoreSelection, isSelected)\n    -- final update before the physics sleeps(self.currentUpdateDistance is 0 here)\n    PowerTakeOffs.onUpdateInterpolation( self , dt, isActiveForInput, isActiveForInputIgnoreSelection, isSelected)\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"onupdateinterpolation",children:"onUpdateInterpolation"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Called after position interpolation update"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onUpdateInterpolation(float dt, boolean isActiveForInput, boolean isSelected, )"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"float"}),(0,i.jsx)(n.th,{children:"dt"}),(0,i.jsx)(n.th,{children:"time since last call in ms"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:"isActiveForInput"}),(0,i.jsx)(n.td,{children:"true if vehicle is active for input"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:"isSelected"}),(0,i.jsx)(n.td,{children:"true if vehicle is selected"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"isSelected"}),(0,i.jsx)(n.td,{})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function PowerTakeOffs:onUpdateInterpolation(dt, isActiveForInput, isActiveForInputIgnoreSelection, isSelected)\n    if self.isClient then\n        local spec = self.spec_powerTakeOffs\n        if self.currentUpdateDistance < spec.maxUpdateDistance then\n            for i = 1 , #spec.inputPowerTakeOffs do\n                local input = spec.inputPowerTakeOffs[i]\n                if input.connectedVehicle ~ = nil then\n                    if self.updateLoopIndex = = input.connectedVehicle.updateLoopIndex then\n                        self:updatePowerTakeOff( input , dt)\n                    end\n                end\n            end\n\n            if self.getAttachedImplements ~ = nil then\n                local impements = self:getAttachedImplements()\n                for i = 1 , #impements do\n                    local object = impements[i].object\n                    if object.updateAttachedPowerTakeOffs ~ = nil then\n                        object:updateAttachedPowerTakeOffs(dt, self )\n                    end\n                end\n            end\n\n            local isPowerTakeOffActive = self.isActive and self:getIsPowerTakeOffActive()\n            if spec.lastIsPowerTakeOffActive ~ = isPowerTakeOffActive then\n                for i = 1 , #spec.inputPowerTakeOffs do\n                    local input = spec.inputPowerTakeOffs[i]\n                    if isPowerTakeOffActive and input.connectedVehicle ~ = nil then\n                        g_animationManager:startAnimations( input.animationNodes)\n                        g_animationManager:startAnimations( input.localAnimationNodes)\n                        g_animationManager:startAnimations( input.connectedOutput.localAnimationNodes)\n                        input.connectedOutput.isActive = true\n\n                        if input.connectedVehicle.updateDashboardValueType ~ = nil then\n                            input.connectedVehicle:updateDashboardValueType( "powerTakeOffs.state" )\n                        end\n                    else\n                            g_animationManager:stopAnimations( input.animationNodes)\n                            g_animationManager:stopAnimations( input.localAnimationNodes)\n                            if input.connectedOutput ~ = nil then\n                                g_animationManager:stopAnimations( input.connectedOutput.localAnimationNodes)\n                                input.connectedOutput.isActive = false\n\n                                if input.connectedVehicle.updateDashboardValueType ~ = nil then\n                                    input.connectedVehicle:updateDashboardValueType( "powerTakeOffs.state" )\n                                end\n                            end\n                        end\n                    end\n\n                    for i = 1 , #spec.localPowerTakeOffs do\n                        local localPto = spec.localPowerTakeOffs[i]\n                        if isPowerTakeOffActive then\n                            g_animationManager:startAnimations(localPto.animationNodes)\n                        else\n                                g_animationManager:stopAnimations(localPto.animationNodes)\n                            end\n                        end\n\n                        if isPowerTakeOffActive then\n                            g_soundManager:playSamples(spec.samples.turnedOn)\n                        else\n                                g_soundManager:stopSamples(spec.samples.turnedOn)\n                            end\n\n                            spec.lastIsPowerTakeOffActive = isPowerTakeOffActive\n                        end\n                    end\n                end\n            end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"parkpowertakeoff",children:"parkPowerTakeOff"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"parkPowerTakeOff()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"input"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function PowerTakeOffs:parkPowerTakeOff( input )\n    if input.detachNode ~ = nil then\n        link( input.detachNode, input.linkNode)\n        link( input.inputNode, input.startNode)\n        self:updatePowerTakeOff( input , 0 )\n        self:updatePowerTakeOffLength( input )\n\n        input.isLinked = true\n    else\n            -- keep both inside of the vehicle\n            -- so other specializations can still keep track of them(e.g.washable)\n            link( input.inputNode, input.linkNode)\n            link( input.inputNode, input.startNode)\n\n            setVisibility( input.linkNode, false )\n            setVisibility( input.startNode, false )\n\n            input.isLinked = false\n        end\n\n        setTranslation( input.linkNode, 0 , 0 , input.zOffset)\n        setTranslation( input.startNode, 0 , 0 , - input.zOffset)\n    end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"placelocalpowertakeoff",children:"placeLocalPowerTakeOff"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"placeLocalPowerTakeOff()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"powerTakeOff"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function PowerTakeOffs:placeLocalPowerTakeOff(powerTakeOff)\n    if powerTakeOff.i3dLoaded then\n        if not powerTakeOff.isPlaced then\n            link(powerTakeOff.endNode, powerTakeOff.linkNode)\n\n            setTranslation(powerTakeOff.linkNode, 0 , 0 , powerTakeOff.zOffset)\n            setTranslation(powerTakeOff.startNode, 0 , 0 , - powerTakeOff.zOffset)\n\n            self:updatePowerTakeOffLength(powerTakeOff)\n            powerTakeOff.isPlaced = true\n        end\n\n        self:updatePowerTakeOff(powerTakeOff, 0 )\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"prerequisitesPresent()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function PowerTakeOffs.prerequisitesPresent(specializations)\n    return SpecializationUtil.hasSpecialization( AttacherJoints , specializations)\n    or SpecializationUtil.hasSpecialization( Attachable , specializations)\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function PowerTakeOffs.registerEventListeners(vehicleType)\n    SpecializationUtil.registerEventListener(vehicleType, "onPreLoad" , PowerTakeOffs )\n    SpecializationUtil.registerEventListener(vehicleType, "onLoad" , PowerTakeOffs )\n    SpecializationUtil.registerEventListener(vehicleType, "onPostLoad" , PowerTakeOffs )\n    SpecializationUtil.registerEventListener(vehicleType, "onDelete" , PowerTakeOffs )\n    SpecializationUtil.registerEventListener(vehicleType, "onUpdateInterpolation" , PowerTakeOffs )\n    SpecializationUtil.registerEventListener(vehicleType, "onUpdateEnd" , PowerTakeOffs )\n    SpecializationUtil.registerEventListener(vehicleType, "onPreAttachImplement" , PowerTakeOffs )\n    SpecializationUtil.registerEventListener(vehicleType, "onPostAttachImplement" , PowerTakeOffs )\n    SpecializationUtil.registerEventListener(vehicleType, "onPreDetachImplement" , PowerTakeOffs )\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function PowerTakeOffs.registerFunctions(vehicleType)\n    SpecializationUtil.registerFunction(vehicleType, "getPowerTakeOffConfigIndex" , PowerTakeOffs.getPowerTakeOffConfigIndex)\n    SpecializationUtil.registerFunction(vehicleType, "loadPowerTakeOffsFromXML" , PowerTakeOffs.loadPowerTakeOffsFromXML)\n    SpecializationUtil.registerFunction(vehicleType, "loadOutputPowerTakeOff" , PowerTakeOffs.loadOutputPowerTakeOff)\n    SpecializationUtil.registerFunction(vehicleType, "loadInputPowerTakeOff" , PowerTakeOffs.loadInputPowerTakeOff)\n    SpecializationUtil.registerFunction(vehicleType, "loadLocalPowerTakeOff" , PowerTakeOffs.loadLocalPowerTakeOff)\n    SpecializationUtil.registerFunction(vehicleType, "placeLocalPowerTakeOff" , PowerTakeOffs.placeLocalPowerTakeOff)\n    SpecializationUtil.registerFunction(vehicleType, "updatePowerTakeOff" , PowerTakeOffs.updatePowerTakeOff)\n    SpecializationUtil.registerFunction(vehicleType, "updateAttachedPowerTakeOffs" , PowerTakeOffs.updateAttachedPowerTakeOffs)\n    SpecializationUtil.registerFunction(vehicleType, "updatePowerTakeOffLength" , PowerTakeOffs.updatePowerTakeOffLength)\n    SpecializationUtil.registerFunction(vehicleType, "getOutputPowerTakeOffsByJointDescIndex" , PowerTakeOffs.getOutputPowerTakeOffsByJointDescIndex)\n    SpecializationUtil.registerFunction(vehicleType, "getOutputPowerTakeOffs" , PowerTakeOffs.getOutputPowerTakeOffs)\n    SpecializationUtil.registerFunction(vehicleType, "getInputPowerTakeOffs" , PowerTakeOffs.getInputPowerTakeOffs)\n    SpecializationUtil.registerFunction(vehicleType, "getInputPowerTakeOffsByJointDescIndexAndName" , PowerTakeOffs.getInputPowerTakeOffsByJointDescIndexAndName)\n    SpecializationUtil.registerFunction(vehicleType, "getIsPowerTakeOffActive" , PowerTakeOffs.getIsPowerTakeOffActive)\n    SpecializationUtil.registerFunction(vehicleType, "attachPowerTakeOff" , PowerTakeOffs.attachPowerTakeOff)\n    SpecializationUtil.registerFunction(vehicleType, "detachPowerTakeOff" , PowerTakeOffs.detachPowerTakeOff)\n    SpecializationUtil.registerFunction(vehicleType, "checkPowerTakeOffCollision" , PowerTakeOffs.checkPowerTakeOffCollision)\n    SpecializationUtil.registerFunction(vehicleType, "parkPowerTakeOff" , PowerTakeOffs.parkPowerTakeOff)\n\n    SpecializationUtil.registerFunction(vehicleType, "loadPowerTakeOffFromConfigFile" , PowerTakeOffs.loadPowerTakeOffFromConfigFile)\n    SpecializationUtil.registerFunction(vehicleType, "onPowerTakeOffI3DLoaded" , PowerTakeOffs.onPowerTakeOffI3DLoaded)\n\n    SpecializationUtil.registerFunction(vehicleType, "loadSingleJointPowerTakeOff" , PowerTakeOffs.loadSingleJointPowerTakeOff)\n    SpecializationUtil.registerFunction(vehicleType, "updateSingleJointPowerTakeOff" , PowerTakeOffs.updateSingleJointPowerTakeOff)\n\n    SpecializationUtil.registerFunction(vehicleType, "loadDoubleJointPowerTakeOff" , PowerTakeOffs.loadDoubleJointPowerTakeOff)\n    SpecializationUtil.registerFunction(vehicleType, "updateDoubleJointPowerTakeOff" , PowerTakeOffs.updateDoubleJointPowerTakeOff)\n\n    SpecializationUtil.registerFunction(vehicleType, "loadBasicPowerTakeOff" , PowerTakeOffs.loadBasicPowerTakeOff)\n\n    SpecializationUtil.registerFunction(vehicleType, "attachTypedPowerTakeOff" , PowerTakeOffs.attachTypedPowerTakeOff)\n    SpecializationUtil.registerFunction(vehicleType, "detachTypedPowerTakeOff" , PowerTakeOffs.detachTypedPowerTakeOff)\n\n    SpecializationUtil.registerFunction(vehicleType, "validatePowerTakeOffAttachment" , PowerTakeOffs.validatePowerTakeOffAttachment)\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"registerinputxmlpaths",children:"registerInputXMLPaths"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"registerInputXMLPaths()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"schema"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"basePath"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function PowerTakeOffs.registerInputXMLPaths(schema, basePath)\n    schema:register(XMLValueType.NODE_INDEX, basePath .. "#inputNode" , "Input node" )\n    schema:register(XMLValueType.VECTOR_N, basePath .. "#inputAttacherJointIndices" , "Corresponding Input attacher joint(s) (List of indices)" )\n    schema:register(XMLValueType.NODE_INDICES, basePath .. "#inputAttacherJointNodes" , "Corresponding Input attacher joint(s) (List of attacherJoint nodes)" )\n    schema:register(XMLValueType.NODE_INDEX, basePath .. "#detachNode" , "Detach node" )\n    schema:register(XMLValueType.BOOL, basePath .. "#aboveAttacher" , "Above attacher" , true )\n    schema:register(XMLValueType.VEHICLE_MATERIAL, basePath .. "#materialTemplateName" , "Name of shared material to apply to the main pto" )\n    schema:registerAutoCompletionDataSource(basePath .. "#materialTemplateName" , "$data/shared/brandMaterialTemplates.xml" , "templates.template#name" )\n    schema:register(XMLValueType.VEHICLE_MATERIAL, basePath .. "#decalMaterialTemplateName" , "Name of shared material to apply to the decals" )\n    schema:registerAutoCompletionDataSource(basePath .. "#decalMaterialTemplateName" , "$data/shared/brandMaterialTemplates.xml" , "templates.template#name" )\n    schema:register(XMLValueType.FLOAT, basePath .. "#length" , "Predefined length of the PTO(Otherwise calculated from the distance between startNode and endNode, while loading.Can be useful if the tool is loaded in different states to always get the same length.)" )\n        schema:register(XMLValueType.STRING, basePath .. "#filename" , "Path to pto xml file" , "$data/shared/assets/powerTakeOffs/walterscheidW.xml" )\n        schema:register(XMLValueType.STRING, basePath .. "#ptoName" , "Pto name" , "DEFAULT_PTO" )\n\n        AnimationManager.registerAnimationNodesXMLPaths(schema, basePath .. ".animationNodes" )\n        ObjectChangeUtil.registerObjectChangeXMLPaths(schema, basePath)\n    end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"registeroutputxmlpaths",children:"registerOutputXMLPaths"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"registerOutputXMLPaths()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"schema"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"basePath"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function PowerTakeOffs.registerOutputXMLPaths(schema, basePath)\n    schema:register(XMLValueType.INT, basePath .. "#skipToInputAttacherIndex" , "Skip to input attacher joint index" )\n    schema:register(XMLValueType.NODE_INDEX, basePath .. "#outputNode" , "Output node" )\n    schema:register(XMLValueType.VECTOR_N, basePath .. "#attacherJointIndices" , "Corresponding attacher joint(s) (List of indices)" )\n    schema:register(XMLValueType.NODE_INDICES, basePath .. "#attacherJointNodes" , "Corresponding attacher joint(s) (List of attacherJoint nodes)" )\n    schema:register(XMLValueType.STRING, basePath .. "#ptoName" , "Output name" , "DEFAULT_PTO" )\n\n    AnimationManager.registerAnimationNodesXMLPaths(schema, basePath .. ".animationNodes" )\n    ObjectChangeUtil.registerObjectChangeXMLPaths(schema, basePath)\n    Dashboard.registerDashboardXMLPaths(schema, basePath, { "state" } )\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"registeroverwrittenfunctions",children:"registerOverwrittenFunctions"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"registerOverwrittenFunctions()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function PowerTakeOffs.registerOverwrittenFunctions(vehicleType)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "loadExtraDependentParts" , PowerTakeOffs.loadExtraDependentParts)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "updateExtraDependentParts" , PowerTakeOffs.updateExtraDependentParts)\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"registerxmlpaths",children:"registerXMLPaths"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"registerXMLPaths()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"schema"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"basePath"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function PowerTakeOffs.registerXMLPaths(schema, basePath)\n    PowerTakeOffs.registerOutputXMLPaths(schema, basePath .. ".output(?)" )\n    PowerTakeOffs.registerInputXMLPaths(schema, basePath .. ".input(?)" )\n    PowerTakeOffs.registerLocalXMLPaths(schema, basePath .. ".local(?)" )\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"updateattachedpowertakeoffs",children:"updateAttachedPowerTakeOffs"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"updateAttachedPowerTakeOffs()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"dt"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"attacherVehicle"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function PowerTakeOffs:updateAttachedPowerTakeOffs(dt, attacherVehicle)\n    local spec = self.spec_powerTakeOffs\n    for _, input in pairs(spec.inputPowerTakeOffs) do\n        if input.connectedVehicle ~ = nil then\n            if input.connectedVehicle = = attacherVehicle then\n                if self.updateLoopIndex = = input.connectedVehicle.updateLoopIndex then\n                    self:updatePowerTakeOff( input , dt)\n                end\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"updatedistanceoftypedpowertakeoff",children:"updateDistanceOfTypedPowerTakeOff"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"updateDistanceOfTypedPowerTakeOff()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"powerTakeOff"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function PowerTakeOffs:updateDistanceOfTypedPowerTakeOff(powerTakeOff)\n    local attachLength = powerTakeOff.predefinedLength or calcDistanceFrom(powerTakeOff.linkNode, powerTakeOff.startNode)\n    local transPartScale = math.max(attachLength - powerTakeOff.connectorLength, 0 ) / powerTakeOff.betweenLength\n    setScale(powerTakeOff.translationPart, 1 , 1 , transPartScale)\n\n    if powerTakeOff.decal ~ = nil then\n        local transPartLength = transPartScale * powerTakeOff.translationPartLength\n\n        if transPartLength > powerTakeOff.decalMinOffset * 2 + powerTakeOff.decalSize then\n            local offset = math.min((transPartLength - powerTakeOff.decalSize) / 2 , powerTakeOff.decalOffset)\n            local decalTranslation = offset + powerTakeOff.decalSize * 0.5\n            local x, y, _ = getTranslation(powerTakeOff.decal)\n            setTranslation(powerTakeOff.decal, x, y, - decalTranslation / transPartScale)\n            setScale(powerTakeOff.decal, 1 , 1 , 1 / transPartScale)\n        else\n                setVisibility(powerTakeOff.decal, false )\n            end\n        end\n    end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"updatedoublejointpowertakeoff",children:"updateDoubleJointPowerTakeOff"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"updateDoubleJointPowerTakeOff()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"powerTakeOff"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"dt"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function PowerTakeOffs:updateDoubleJointPowerTakeOff(powerTakeOff, dt)\n    local x, y, z = getWorldTranslation(powerTakeOff.startNode)\n    local dx, dy, dz = worldToLocal(getParent(powerTakeOff.endJoint2), x, y, z)\n    dx, dy, dz = MathUtil.vector3Normalize(dx, dy, dz)\n    I3DUtil.setDirection(powerTakeOff.endJoint2, dx * 0.5 , dy * 0.5 , (dz + 1 ) * 0.5 , 0 , 1 , 0 )\n\n    x, y, z = getWorldTranslation(powerTakeOff.endJoint1Ref)\n    dx, dy, dz = worldToLocal(getParent(powerTakeOff.startJoint1), x, y, z)\n    dx, dy, dz = MathUtil.vector3Normalize(dx, dy, dz)\n    I3DUtil.setDirection(powerTakeOff.startJoint1, dx * 0.5 , dy * 0.5 , (dz + 1 ) * 0.5 , 0 , 1 , 0 )\n\n    x, y, z = getWorldTranslation(powerTakeOff.endJoint1Ref)\n    dx, dy, dz = worldToLocal(getParent(powerTakeOff.startJoint2), x, y, z)\n    dx, dy, dz = MathUtil.vector3Normalize(dx, dy, dz)\n    I3DUtil.setDirection(powerTakeOff.startJoint2, dx, dy, dz, 0 , 1 , 0 )\n\n    dx, dy, dz = worldToLocal(getParent(powerTakeOff.endJoint1), x, y, z)\n    setTranslation(powerTakeOff.endJoint1, 0 , 0 , MathUtil.vector3Length(dx, dy, dz))\n\n    local dist = calcDistanceFrom(powerTakeOff.scalePart, powerTakeOff.scalePartRef)\n    setScale(powerTakeOff.scalePart, 1 , 1 , dist / powerTakeOff.scalePartBaseDistance)\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"updateextradependentparts",children:"updateExtraDependentParts"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"updateExtraDependentParts()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"superFunc"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"part"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"dt"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function PowerTakeOffs:updateExtraDependentParts(superFunc, part, dt)\n    superFunc( self , part, dt)\n\n    if part.powerTakeOffs ~ = nil then\n        local spec = self.spec_powerTakeOffs\n        for i, index in ipairs(part.powerTakeOffs) do\n            if spec.inputPowerTakeOffs[index] = = nil then\n                if self.finishedLoading then\n                    part.powerTakeOffs[i] = nil\n                    Logging.xmlWarning( self.xmlFile, \"Unable to find powerTakeOff index '%d' for movingPart/movingTool '%s'\" , index, getName(part.node))\n                    end\n                else\n                        self:updatePowerTakeOff(spec.inputPowerTakeOffs[index], dt)\n                    end\n                end\n            end\n\n            if part.localPowerTakeOffs ~ = nil then\n                local spec = self.spec_powerTakeOffs\n                for i, index in ipairs(part.localPowerTakeOffs) do\n                    if spec.localPowerTakeOffs[index] = = nil then\n                        if self.finishedLoading then\n                            part.localPowerTakeOffs[i] = nil\n                            Logging.xmlWarning( self.xmlFile, \"Unable to find local powerTakeOff index '%d' for movingPart/movingTool '%s'\" , index, getName(part.node))\n                            end\n                        else\n                                self:placeLocalPowerTakeOff(spec.localPowerTakeOffs[index], dt)\n                            end\n                        end\n                    end\n                end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"updatepowertakeoff",children:"updatePowerTakeOff"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"updatePowerTakeOff()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"input"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"dt"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function PowerTakeOffs:updatePowerTakeOff( input , dt)\n    if input.i3dLoaded and( input.isLinked or input.isPlaced) then\n        if input.updateFunc ~ = nil then\n            input.updateFunc( self , input , dt)\n        end\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"updatepowertakeofflength",children:"updatePowerTakeOffLength"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"updatePowerTakeOffLength()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"input"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function PowerTakeOffs:updatePowerTakeOffLength( input )\n    if input.i3dLoaded then\n        if input.updateDistanceFunc ~ = nil then\n            input.updateDistanceFunc( self , input )\n        end\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"updatesinglejointpowertakeoff",children:"updateSingleJointPowerTakeOff"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"updateSingleJointPowerTakeOff()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"powerTakeOff"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"dt"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function PowerTakeOffs:updateSingleJointPowerTakeOff(powerTakeOff, dt)\n    local x, y, z = getWorldTranslation(powerTakeOff.linkNode)\n\n    local dx, dy, dz = worldToLocal(powerTakeOff.startNode, x, y, z)\n    I3DUtil.setDirection(powerTakeOff.startJoint, dx, dy, dz, 0 , 1 , 0 )\n\n    dx, dy, dz = worldToLocal(getParent(powerTakeOff.endJoint), x, y, z)\n    setTranslation(powerTakeOff.endJoint, 0 , 0 , MathUtil.vector3Length(dx, dy, dz))\n\n    local dist = calcDistanceFrom(powerTakeOff.scalePart, powerTakeOff.scalePartRef)\n    setScale(powerTakeOff.scalePart, 1 , 1 , dist / powerTakeOff.scalePartBaseDistance)\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"validatepowertakeoffattachment",children:"validatePowerTakeOffAttachment"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"validatePowerTakeOffAttachment()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"powerTakeOff"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"output"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function PowerTakeOffs:validatePowerTakeOffAttachment(powerTakeOff, output )\n    if output.outputNode = = nil or powerTakeOff.inputNode = = nil then\n        return false\n    end\n\n    local x1, y1, z1 = getWorldTranslation( output.outputNode)\n    local x2, y2, z2 = getWorldTranslation(powerTakeOff.inputNode)\n\n    local length = MathUtil.vector3Length(x1 - x2, y1 - y2, z1 - z2)\n    if length < powerTakeOff.minLength then\n        return false\n    end\n\n    local length2D = MathUtil.vector2Length(x1 - x2, z1 - z2)\n    local angle = math.acos(length2D / length)\n    if angle > powerTakeOff.maxAngle then\n        return false\n    end\n\n    return true\nend\n\n"})})]})}function f(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453(e,n,t){t.d(n,{R:()=>o,x:()=>l});var a=t(96540);const i={},r=a.createContext(i);function o(e){const n=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);