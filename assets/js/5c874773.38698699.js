"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[60549],{28453(e,n,r){r.d(n,{R:()=>s,x:()=>a});var i=r(96540);const t={},l=i.createContext(t);function s(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),i.createElement(l.Provider,{value:n},e.children)}},38735(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"script/Specializations/PlaceableCartridgePlayer","title":"PlaceableCartridgePlayer","description":"PlaceableCartridgePlayer","source":"@site/../docs/script/Specializations/PlaceableCartridgePlayer.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/PlaceableCartridgePlayer","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableCartridgePlayer","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"PlaceableBuyingStation","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableBuyingStation"},"next":{"title":"PlaceableChargingStation","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableChargingStation"}}');var t=r(74848),l=r(28453);const s={},a=void 0,c={},d=[{value:"PlaceableCartridgePlayer",id:"placeablecartridgeplayer",level:2},{value:"activatePlayer",id:"activateplayer",level:3},{value:"cartridgePlayerTriggerCallback",id:"cartridgeplayertriggercallback",level:3},{value:"onDelete",id:"ondelete",level:3},{value:"onLoad",id:"onload",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3},{value:"registerFunctions",id:"registerfunctions",level:3},{value:"registerXMLPaths",id:"registerxmlpaths",level:3}];function o(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"placeablecartridgeplayer",children:"PlaceableCartridgePlayer"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Specialization for placeables"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Functions"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#activateplayer",children:"activatePlayer"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#cartridgeplayertriggercallback",children:"cartridgePlayerTriggerCallback"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#ondelete",children:"onDelete"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#registerxmlpaths",children:"registerXMLPaths"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"activateplayer",children:"activatePlayer"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"activatePlayer()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function PlaceableCartridgePlayer:activatePlayer()\n    local spec = self.spec_cartridgePlayer\n    if spec.currentItem ~ = 0 then\n        -- Reparent cartrige content to the place\n        link(getChildAt(spec.itemsNode, spec.currentItem - 1 ), getChildAt(spec.connectorNode, 0 ))\n\n        -- Hide monitor\n        setVisibility(spec.monitorLightNode, false )\n        setVisibility(getChildAt(spec.monitorNode, spec.currentItem - 1 ), false )\n    end\n\n    -- Find the next cartridge by searching for visible items only.\n        -- Store first visible item as well in case we need to wrap around\n        local firstVisibleIndex = 0\n        local nextVisibleIndex = 0\n        for i = 1 , getNumOfChildren(spec.itemsNode) do\n            local isVisible = getVisibility(getChildAt(spec.itemsNode, i - 1 ))\n\n            if isVisible then\n                if firstVisibleIndex = = 0 then\n                    firstVisibleIndex = i\n                end\n\n                if nextVisibleIndex = = 0 and i > spec.currentItem then\n                    nextVisibleIndex = i\n                end\n            end\n        end\n\n        local currentVisible = spec.currentItem\n\n        if nextVisibleIndex ~ = 0 then\n            spec.currentItem = nextVisibleIndex\n        elseif firstVisibleIndex ~ = 0 then\n                spec.currentItem = firstVisibleIndex\n            elseif spec.currentItem = = 0 then\n                    -- No change, so no items exist\n                    g_currentMission.hud:showInGameMessage(g_i18n:getText( "ui_gameComputer" ), g_i18n:getText( "ui_gameComputerNoCartridges" ), - 1 )\n                else\n                        spec.currentItem = 0\n                    end\n\n                    if spec.currentItem ~ = 0 then\n                        -- Reparent cartridge content to connector\n                        link(spec.connectorNode, getChildAt(getChildAt(spec.itemsNode, spec.currentItem - 1 ), 0 ))\n\n                        -- Show monitor\n                        setVisibility(spec.monitorLightNode, true )\n                        setVisibility(getChildAt(spec.monitorNode, spec.currentItem - 1 ), true )\n                    end\n\n                    if currentVisible ~ = spec.currentItem and self.isClient then\n                        g_soundManager:playSample(spec.samples.play, 1 )\n                    end\n                end\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"cartridgeplayertriggercallback",children:"cartridgePlayerTriggerCallback"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Callback when entering/leaving the trigger area"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"cartridgePlayerTriggerCallback()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"triggerId"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"otherId"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"onEnter"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"onLeave"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"onStay"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function PlaceableCartridgePlayer:cartridgePlayerTriggerCallback(triggerId, otherId, onEnter, onLeave, onStay)\n    if onEnter or onLeave then\n        if g_localPlayer ~ = nil and otherId = = g_localPlayer.rootNode then\n            local spec = self.spec_cartridgePlayer\n            if onEnter then\n                g_currentMission.activatableObjectsSystem:addActivatable(spec.activatable)\n            else\n                    g_currentMission.activatableObjectsSystem:removeActivatable(spec.activatable)\n                end\n            end\n        end\n    end\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"ondelete",children:"onDelete"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onDelete()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function PlaceableCartridgePlayer:onDelete()\n    local spec = self.spec_cartridgePlayer\n\n    g_currentMission.activatableObjectsSystem:removeActivatable(spec.activatable)\n    if spec.triggerNode ~ = nil then\n        removeTrigger(spec.triggerNode)\n    end\n\n    if self.isClient then\n        g_soundManager:deleteSamples(spec.samples)\n    end\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onLoad()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function PlaceableCartridgePlayer:onLoad(savegame)\n    local spec = self.spec_cartridgePlayer\n\n    local baseKey = "placeable.cartridgePlayer"\n    spec.itemsNode = self.xmlFile:getValue(baseKey .. "#itemsNode" , nil , self.components, self.i3dMappings)\n    spec.monitorNode = self.xmlFile:getValue(baseKey .. "#monitorNode" , nil , self.components, self.i3dMappings)\n    spec.monitorLightNode = self.xmlFile:getValue(baseKey .. "#monitorLightNode" , nil , self.components, self.i3dMappings)\n    spec.connectorNode = self.xmlFile:getValue(baseKey .. "#connectorNode" , nil , self.components, self.i3dMappings)\n    spec.triggerNode = self.xmlFile:getValue(baseKey .. "#triggerNode" , nil , self.components, self.i3dMappings)\n\n    if spec.triggerNode ~ = nil then\n        if not CollisionFlag.getHasMaskFlagSet(spec.triggerNode, CollisionFlag.PLAYER) then\n            Logging.error( "Missing collision mask bit \'%d\'.Please add this bit to computer trigger node \'%s\'" , CollisionFlag.getBit(CollisionFlag.PLAYER), I3DUtil.getNodePath(spec.triggerNode))\n            return nil\n        else\n                addTrigger(spec.triggerNode, "cartridgePlayerTriggerCallback" , self )\n            end\n\n            spec.activatable = PlaceableCartridgePlayerActivatable.new( self )\n        end\n\n        spec.currentItem = 0\n\n        if self.isClient then\n            spec.samples = { }\n            spec.samples.play = g_soundManager:loadSampleFromXML( self.xmlFile, baseKey .. ".sounds" , "play" , self.baseDirectory, self.components, 1 , AudioGroup.ENVIRONMENT, self.i3dMappings, nil )\n        end\n\n        return self\n    end\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Checks if all prerequisite specializations are loaded"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"prerequisitesPresent(table specializations)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"table"}),(0,t.jsx)(n.th,{children:"specializations"}),(0,t.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"table"}),(0,t.jsx)(n.th,{children:"hasPrerequisite"}),(0,t.jsx)(n.th,{children:"true if all prerequisite specializations are loaded"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function PlaceableCartridgePlayer.prerequisitesPresent(specializations)\n    return true\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function PlaceableCartridgePlayer.registerEventListeners(placeableType)\n    SpecializationUtil.registerEventListener(placeableType, "onLoad" , PlaceableCartridgePlayer )\n    SpecializationUtil.registerEventListener(placeableType, "onDelete" , PlaceableCartridgePlayer )\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function PlaceableCartridgePlayer.registerFunctions(placeableType)\n    SpecializationUtil.registerFunction(placeableType, "cartridgePlayerTriggerCallback" , PlaceableCartridgePlayer.cartridgePlayerTriggerCallback)\n    SpecializationUtil.registerFunction(placeableType, "activatePlayer" , PlaceableCartridgePlayer.activatePlayer)\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"registerxmlpaths",children:"registerXMLPaths"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"registerXMLPaths()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"schema"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"basePath"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function PlaceableCartridgePlayer.registerXMLPaths(schema, basePath)\n    schema:setXMLSpecializationType( "CartridgePlayer" )\n    schema:register(XMLValueType.NODE_INDEX, basePath .. ".cartridgePlayer#itemsNode" , "" )\n    schema:register(XMLValueType.NODE_INDEX, basePath .. ".cartridgePlayer#monitorNode" , "" )\n    schema:register(XMLValueType.NODE_INDEX, basePath .. ".cartridgePlayer#monitorLightNode" , "" )\n    schema:register(XMLValueType.NODE_INDEX, basePath .. ".cartridgePlayer#connectorNode" , "" )\n    schema:register(XMLValueType.NODE_INDEX, basePath .. ".cartridgePlayer#triggerNode" , "" )\n\n    SoundManager.registerSampleXMLPaths(schema, basePath .. ".cartridgePlayer.sounds" , "play" )\n\n    schema:setXMLSpecializationType()\nend\n\n'})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}}}]);