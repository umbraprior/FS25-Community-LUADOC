"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[94482],{28453(e,n,r){r.d(n,{R:()=>t,x:()=>d});var i=r(96540);const s={},l=i.createContext(s);function t(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(l.Provider,{value:n},e.children)}},62462(e,n,r){r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>p,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"script/Specializations/Windrower","title":"Windrower","description":"Windrower","source":"@site/../docs/script/Specializations/Windrower.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/Windrower","permalink":"/FS25-Community-LUADOC/script/Specializations/Windrower","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"WindBending","permalink":"/FS25-Community-LUADOC/script/Specializations/WindBending"},"next":{"title":"Wipers","permalink":"/FS25-Community-LUADOC/script/Specializations/Wipers"}}');var s=r(74848),l=r(28453);const t={},d=void 0,o={},c=[{value:"Windrower",id:"windrower",level:2},{value:"doCheckSpeedLimit",id:"docheckspeedlimit",level:3},{value:"getDefaultSpeedLimit",id:"getdefaultspeedlimit",level:3},{value:"getDirtMultiplier",id:"getdirtmultiplier",level:3},{value:"getWearMultiplier",id:"getwearmultiplier",level:3},{value:"initSpecialization",id:"initspecialization",level:3},{value:"loadWorkAreaFromXML",id:"loadworkareafromxml",level:3},{value:"onAIFieldCourseSettingsInitialized",id:"onaifieldcoursesettingsinitialized",level:3},{value:"onDelete",id:"ondelete",level:3},{value:"onEndWorkAreaProcessing",id:"onendworkareaprocessing",level:3},{value:"onLoad",id:"onload",level:3},{value:"onPostLoad",id:"onpostload",level:3},{value:"onReadStream",id:"onreadstream",level:3},{value:"onReadUpdateStream",id:"onreadupdatestream",level:3},{value:"onStartWorkAreaProcessing",id:"onstartworkareaprocessing",level:3},{value:"onTurnedOff",id:"onturnedoff",level:3},{value:"onTurnedOn",id:"onturnedon",level:3},{value:"onUpdateTick",id:"onupdatetick",level:3},{value:"onWriteStream",id:"onwritestream",level:3},{value:"onWriteUpdateStream",id:"onwriteupdatestream",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"processDropArea",id:"processdroparea",level:3},{value:"processWindrowerArea",id:"processwindrowerarea",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3},{value:"registerFunctions",id:"registerfunctions",level:3},{value:"registerOverwrittenFunctions",id:"registeroverwrittenfunctions",level:3}];function a(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"windrower",children:"Windrower"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Specialization for windrowers providing additional animations, effects and drop area functionalities"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Functions"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#docheckspeedlimit",children:"doCheckSpeedLimit"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getdefaultspeedlimit",children:"getDefaultSpeedLimit"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getdirtmultiplier",children:"getDirtMultiplier"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getwearmultiplier",children:"getWearMultiplier"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#initspecialization",children:"initSpecialization"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#loadworkareafromxml",children:"loadWorkAreaFromXML"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onaifieldcoursesettingsinitialized",children:"onAIFieldCourseSettingsInitialized"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#ondelete",children:"onDelete"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onendworkareaprocessing",children:"onEndWorkAreaProcessing"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onpostload",children:"onPostLoad"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onreadstream",children:"onReadStream"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onreadupdatestream",children:"onReadUpdateStream"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onstartworkareaprocessing",children:"onStartWorkAreaProcessing"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onturnedoff",children:"onTurnedOff"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onturnedon",children:"onTurnedOn"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onupdatetick",children:"onUpdateTick"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onwritestream",children:"onWriteStream"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onwriteupdatestream",children:"onWriteUpdateStream"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#processdroparea",children:"processDropArea"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#processwindrowerarea",children:"processWindrowerArea"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registeroverwrittenfunctions",children:"registerOverwrittenFunctions"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"docheckspeedlimit",children:"doCheckSpeedLimit"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"doCheckSpeedLimit()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function Windrower:doCheckSpeedLimit(superFunc)\n    local turnOn = true\n    if self.getIsTurnedOn ~ = nil then\n        turnOn = self:getIsTurnedOn()\n    end\n\n    return superFunc( self ) or( self.getIsImplementChainLowered ~ = nil and self:getIsImplementChainLowered() and turnOn)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getdefaultspeedlimit",children:"getDefaultSpeedLimit"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getDefaultSpeedLimit()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function Windrower.getDefaultSpeedLimit()\n    return 15\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getdirtmultiplier",children:"getDirtMultiplier"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getDirtMultiplier()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function Windrower:getDirtMultiplier(superFunc)\n    local spec = self.spec_windrower\n\n    local multiplier = superFunc( self )\n\n    if spec.isWorking then\n        multiplier = multiplier + self:getWorkDirtMultiplier() * self:getLastSpeed() / self.speedLimit\n    end\n\n    return multiplier\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getwearmultiplier",children:"getWearMultiplier"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getWearMultiplier()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function Windrower:getWearMultiplier(superFunc)\n    local spec = self.spec_windrower\n\n    local multiplier = superFunc( self )\n\n    if spec.isWorking then\n        local stoneMultiplier = 1\n        if spec.stoneLastState ~ = 0 and spec.stoneWearMultiplierData ~ = nil then\n            stoneMultiplier = spec.stoneWearMultiplierData[spec.stoneLastState] or 1\n        end\n\n        multiplier = multiplier + self:getWorkWearMultiplier() * self:getLastSpeed() / self.speedLimit * stoneMultiplier\n    end\n\n    return multiplier\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"initspecialization",children:"initSpecialization"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"initSpecialization()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function Windrower.initSpecialization()\n    g_workAreaTypeManager:addWorkAreaType( "windrower" , false , true , true )\n\n    local schema = Vehicle.xmlSchema\n    schema:setXMLSpecializationType( "Windrower" )\n\n    EffectManager.registerEffectXMLPaths(schema, "vehicle.windrower.effects.effect(?)" )\n    SoundManager.registerSampleXMLPaths(schema, "vehicle.windrower.effects.effect(?).sounds" , "work" )\n    schema:register(XMLValueType.INT, "vehicle.windrower.effects.effect(?)#workAreaIndex" , "Work area index" , 1 )\n    schema:register(XMLValueType.INT, "vehicle.windrower.effects.effect(?)#dropAreaIndex" , "Drop area index(if defined the effect is only active if this drop area is set on workArea)" )\n\n        AnimationManager.registerAnimationNodesXMLPaths(schema, "vehicle.windrower.animationNodes" )\n        SoundManager.registerSampleXMLPaths(schema, "vehicle.windrower.sounds" , "work" )\n\n        schema:register(XMLValueType.BOOL, "vehicle.windrower#limitToLineHeight" , "Limit pickup to work area line height" , false )\n        schema:register(XMLValueType.STRING, "vehicle.windrower#fillTypeCategories" , "Fill type categories" )\n        schema:register(XMLValueType.STRING, "vehicle.windrower#fillTypes" , "List of supported fill types" )\n\n        schema:register(XMLValueType.INT, WorkArea.WORK_AREA_XML_KEY .. ".windrower#particleSystemIndex" , "Particle system index" )\n        schema:register(XMLValueType.INT, WorkArea.WORK_AREA_XML_KEY .. ".windrower#dropWindrowWorkAreaIndex" , "Drop work area index" , 1 )\n\n        schema:register(XMLValueType.INT, WorkArea.WORK_AREA_XML_CONFIG_KEY .. ".windrower#particleSystemIndex" , "Particle system index" )\n        schema:register(XMLValueType.INT, WorkArea.WORK_AREA_XML_CONFIG_KEY .. ".windrower#dropWindrowWorkAreaIndex" , "Drop work area index" , 1 )\n\n        schema:setXMLSpecializationType()\n    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"loadworkareafromxml",children:"loadWorkAreaFromXML"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"loadWorkAreaFromXML()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"workArea"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"xmlFile"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"key"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function Windrower:loadWorkAreaFromXML(superFunc, workArea, xmlFile, key)\n    local retValue = superFunc( self , workArea, xmlFile, key)\n\n    if workArea.type = = WorkAreaType.DEFAULT then\n        workArea.type = WorkAreaType.WINDROWER\n    end\n\n    if workArea.type = = WorkAreaType.WINDROWER then\n        workArea.particleSystemIndex = xmlFile:getValue(key .. ".windrower#particleSystemIndex" )\n        workArea.dropWindrowWorkAreaIndex = xmlFile:getValue(key .. ".windrower#dropWindrowWorkAreaIndex" , 1 )\n\n        workArea.lastValidPickupFillType = FillType.UNKNOWN\n        workArea.lastPickupLiters = 0\n        workArea.lastDroppedLiters = 0\n        workArea.litersToDrop = 0\n\n        local spec = self.spec_windrower\n        if spec.windrowerWorkAreaFillTypes = = nil then\n            spec.windrowerWorkAreaFillTypes = { }\n        end\n        table.insert(spec.windrowerWorkAreaFillTypes, FillType.UNKNOWN)\n        workArea.windrowerWorkAreaIndex = #spec.windrowerWorkAreaFillTypes\n    end\n\n    return retValue\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"onaifieldcoursesettingsinitialized",children:"onAIFieldCourseSettingsInitialized"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onAIFieldCourseSettingsInitialized()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"fieldCourseSettings"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function Windrower:onAIFieldCourseSettingsInitialized(fieldCourseSettings)\n    fieldCourseSettings.headlandsFirst = true\n    fieldCourseSettings.workInitialSegment = true\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"ondelete",children:"onDelete"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onDelete()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function Windrower:onDelete()\n    local spec = self.spec_windrower\n    g_soundManager:deleteSamples(spec.samples)\n    g_animationManager:deleteAnimations(spec.animationNodes)\n\n    if spec.effects ~ = nil then\n        for _, effect in ipairs(spec.effects) do\n            g_effectManager:deleteEffects(effect.effects)\n            g_soundManager:deleteSamples(effect.samples)\n        end\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onendworkareaprocessing",children:"onEndWorkAreaProcessing"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onEndWorkAreaProcessing()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"dt"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"workAreas"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function Windrower:onEndWorkAreaProcessing(dt, workAreas)\n    local spec = self.spec_windrower\n\n    if self.isClient then\n        if self.getIsTurnedOn = = nil then\n            if spec.isWorking then\n                if not g_soundManager:getIsSamplePlaying(spec.samples.work) then\n                    g_soundManager:playSample(spec.samples.work)\n                end\n            else\n                    if g_soundManager:getIsSamplePlaying(spec.samples.work) then\n                        g_soundManager:stopSample(spec.samples.work)\n                    end\n                end\n            end\n        end\n    end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onLoad()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function Windrower:onLoad(savegame)\n    local spec = self.spec_windrower\n\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.animation" , "vehicle.windrowers.windrower" ) --FS13 to FS15\n\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.windrowerParticleSystems" , "vehicle.windrower.effects" ) --FS17 to FS19\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.turnedOnRotationNodes.turnedOnRotationNode#type" , "vehicle.windrower.animationNodes.animationNode" , "windrower" ) --FS17 to FS19\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.windrowerSound" , "vehicle.windrower.sounds.work" ) --FS17 to FS19\n\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.windrower.rakes.rake" , "vehicle.windrower.animationNodes.animationNode with type \'RotationAnimationSpikes\'" ) --FS19 to FS22\n\n    if self.isClient then\n        spec.animationNodes = g_animationManager:loadAnimations( self.xmlFile, "vehicle.windrower.animationNodes" , self.components, self , self.i3dMappings)\n\n        spec.effects = { }\n        spec.workAreaToEffects = { }\n        local i = 0\n        while true do\n            local key = string.format( "vehicle.windrower.effects.effect(%d)" , i)\n            if not self.xmlFile:hasProperty(key) then\n                break\n            end\n            local effects = g_effectManager:loadEffect( self.xmlFile, key, self.components, self , self.i3dMappings)\n            if effects ~ = nil then\n                local effect = { }\n                effect.effects = effects\n                effect.workAreaIndex = self.xmlFile:getValue(key .. "#workAreaIndex" , 1 )\n                effect.dropAreaIndex = self.xmlFile:getValue(key .. "#dropAreaIndex" )\n                effect.activeTime = - 1\n                effect.activeTimeDuration = 250\n                effect.isActive = false\n                effect.isActiveSent = false\n\n                effect.samples = { }\n                effect.samples.work = g_soundManager:loadSampleFromXML( self.xmlFile, key .. ".sounds" , "work" , self.baseDirectory, self.components, 0 , AudioGroup.VEHICLE, self.i3dMappings, self )\n\n                table.insert(spec.effects, effect)\n\n                for j = 1 , #effects do\n                    if effects[j].setWorkAreaIndex ~ = nil then\n                        effects[j]:setWorkAreaIndex(effect.workAreaIndex)\n                    end\n                end\n            end\n            i = i + 1\n        end\n\n        spec.samples = { }\n        spec.samples.work = g_soundManager:loadSampleFromXML( self.xmlFile, "vehicle.windrower.sounds" , "work" , self.baseDirectory, self.components, 0 , AudioGroup.VEHICLE, self.i3dMappings, self )\n    end\n\n    spec.isWorking = false\n    spec.limitToLineHeight = self.xmlFile:getValue( "vehicle.windrower#limitToLineHeight" , false )\n\n    spec.stoneLastState = 0\n    spec.stoneWearMultiplierData = g_currentMission.stoneSystem:getWearMultiplierByType( "WINDROWER" )\n\n    spec.supportedFillTypes = g_fillTypeManager:getFillTypesFromXML( self.xmlFile, "vehicle.windrower#fillTypeCategories" , "vehicle.windrower#fillTypes" , true )\n\n    spec.fillTypesDirtyFlag = self:getNextDirtyFlag()\n    spec.effectDirtyFlag = self:getNextDirtyFlag()\n\n    if self.addAIDensityHeightTypeRequirement ~ = nil then\n        for _, fillTypeIndex in ipairs(spec.supportedFillTypes) do\n            self:addAIDensityHeightTypeRequirement(fillTypeIndex)\n        end\n    end\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"onpostload",children:"onPostLoad"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onPostLoad()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function Windrower:onPostLoad(savegame)\n    local spec = self.spec_windrower\n    for i = #spec.effects, 1 , - 1 do\n        local effect = spec.effects[i]\n        local workArea = self:getWorkAreaByIndex(effect.workAreaIndex)\n        if workArea ~ = nil then\n            effect.windrowerWorkAreaFillTypeIndex = workArea.windrowerWorkAreaIndex\n\n            if spec.workAreaToEffects[workArea.index] = = nil then\n                spec.workAreaToEffects[workArea.index] = { }\n            end\n            table.insert(spec.workAreaToEffects[workArea.index], effect)\n        else\n                Logging.xmlWarning( self.xmlFile, \"Invalid workAreaIndex '%d' for effect 'vehicle.windrower.effects.effect(%d)'!\" , effect.workAreaIndex, i)\n                    table.insert(spec.effects, i)\n                end\n            end\n        end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onreadstream",children:"onReadStream"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onReadStream()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"streamId"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function Windrower:onReadStream(streamId, connection)\n    local spec = self.spec_windrower\n    for index, _ in ipairs(spec.windrowerWorkAreaFillTypes) do\n        local fillType = streamReadUIntN(streamId, FillTypeManager.SEND_NUM_BITS)\n        spec.windrowerWorkAreaFillTypes[index] = fillType\n    end\n    for _, effect in ipairs(spec.effects) do\n        if streamReadBool(streamId) then\n            local fillType = spec.windrowerWorkAreaFillTypes[effect.windrowerWorkAreaFillTypeIndex]\n            g_effectManager:setEffectTypeInfo(effect.effects, fillType)\n            g_effectManager:startEffects(effect.effects)\n\n            if not g_soundManager:getIsSamplePlaying(effect.samples.work) then\n                g_soundManager:playSample(effect.samples.work)\n            end\n        else\n                g_effectManager:stopEffects(effect.effects)\n                g_soundManager:stopSample(effect.samples.work)\n            end\n        end\n    end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onreadupdatestream",children:"onReadUpdateStream"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onReadUpdateStream()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"streamId"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"timestamp"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"connection"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function Windrower:onReadUpdateStream(streamId, timestamp, connection)\n    if connection:getIsServer() then\n        local spec = self.spec_windrower\n\n        if streamReadBool(streamId) then\n            for index, _ in ipairs(spec.windrowerWorkAreaFillTypes) do\n                local fillType = streamReadUIntN(streamId, FillTypeManager.SEND_NUM_BITS)\n                spec.windrowerWorkAreaFillTypes[index] = fillType\n            end\n        end\n\n        if streamReadBool(streamId) then\n            for _, effect in ipairs(spec.effects) do\n                if streamReadBool(streamId) then\n                    local fillType = spec.windrowerWorkAreaFillTypes[effect.windrowerWorkAreaFillTypeIndex]\n                    g_effectManager:setEffectTypeInfo(effect.effects, fillType)\n                    g_effectManager:startEffects(effect.effects)\n\n                    if not g_soundManager:getIsSamplePlaying(effect.samples.work) then\n                        g_soundManager:playSample(effect.samples.work)\n                    end\n                else\n                        g_effectManager:stopEffects(effect.effects)\n                        g_soundManager:stopSample(effect.samples.work)\n                    end\n                end\n            end\n        end\n    end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onstartworkareaprocessing",children:"onStartWorkAreaProcessing"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onStartWorkAreaProcessing()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"dt"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"workAreas"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function Windrower:onStartWorkAreaProcessing(dt, workAreas)\n    local spec = self.spec_windrower\n    for _, workArea in pairs(workAreas) do\n        workArea.lastValidPickupFillType = FillType.UNKNOWN\n        workArea.lastPickupLiters = 0\n        workArea.lastDroppedLiters = 0\n    end\n    spec.isWorking = false\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onturnedoff",children:"onTurnedOff"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onTurnedOff()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function Windrower:onTurnedOff()\n    local spec = self.spec_windrower\n    g_soundManager:stopSamples(spec.samples)\n\n    for _, effect in ipairs(spec.effects) do\n        g_effectManager:stopEffects(effect.effects)\n        g_soundManager:stopSample(effect.samples.work)\n    end\n    g_animationManager:stopAnimations(spec.animationNodes)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onturnedon",children:"onTurnedOn"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onTurnedOn()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function Windrower:onTurnedOn()\n    local spec = self.spec_windrower\n    if self.isClient then\n        g_soundManager:playSample(spec.samples.work)\n        g_animationManager:startAnimations(spec.animationNodes)\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onupdatetick",children:"onUpdateTick"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onUpdateTick()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"dt"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"isActiveForInput"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"isActiveForInputIgnoreSelection"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"isSelected"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function Windrower:onUpdateTick(dt, isActiveForInput, isActiveForInputIgnoreSelection, isSelected)\n    local spec = self.spec_windrower\n\n    if self.isServer then\n        for _, effect in ipairs(spec.effects) do\n            if effect.isActive and g_currentMission.time > effect.activeTime then\n                effect.isActive = false\n                if effect.isActiveSent then\n                    effect.isActiveSent = false\n                    self:raiseDirtyFlags(spec.effectDirtyFlag)\n                end\n                g_effectManager:stopEffects(effect.effects)\n                g_soundManager:stopSample(effect.samples.work)\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onwritestream",children:"onWriteStream"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onWriteStream()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"streamId"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function Windrower:onWriteStream(streamId, connection)\n    local spec = self.spec_windrower\n    for _, fillTypeIndex in ipairs(spec.windrowerWorkAreaFillTypes) do\n        streamWriteUIntN(streamId, fillTypeIndex, FillTypeManager.SEND_NUM_BITS)\n    end\n    for _, effect in ipairs(spec.effects) do\n        streamWriteBool(streamId, effect.isActiveSent)\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onwriteupdatestream",children:"onWriteUpdateStream"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onWriteUpdateStream()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"streamId"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"connection"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"dirtyMask"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function Windrower:onWriteUpdateStream(streamId, connection, dirtyMask)\n    if not connection:getIsServer() then\n        local spec = self.spec_windrower\n\n        if streamWriteBool(streamId, bit32.band(dirtyMask, spec.fillTypesDirtyFlag) ~ = 0 ) then\n            for _, fillTypeIndex in ipairs(spec.windrowerWorkAreaFillTypes) do\n                streamWriteUIntN(streamId, fillTypeIndex, FillTypeManager.SEND_NUM_BITS)\n            end\n        end\n\n        if streamWriteBool(streamId, bit32.band(dirtyMask, spec.effectDirtyFlag) ~ = 0 ) then\n            for _, effect in ipairs(spec.effects) do\n                streamWriteBool(streamId, effect.isActiveSent)\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"prerequisitesPresent()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function Windrower.prerequisitesPresent(specializations)\n    return SpecializationUtil.hasSpecialization( WorkArea , specializations)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"processdroparea",children:"processDropArea"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"processDropArea()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"dropArea"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"litersToDrop"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"fillType"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function Windrower:processDropArea(dropArea, litersToDrop, fillType)\n    local lsx, lsy, lsz, lex, ley, lez, radius = DensityMapHeightUtil.getLineByArea(dropArea.start, dropArea.width, dropArea.height)\n    local dropped, lineOffset = DensityMapHeightUtil.tipToGroundAroundLine( self , litersToDrop, fillType, lsx,lsy,lsz, lex,ley,lez, radius, nil , dropArea.lineOffset, false , nil , false )\n    dropArea.lineOffset = lineOffset\n\n    return dropped\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"processwindrowerarea",children:"processWindrowerArea"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"processWindrowerArea()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"workArea"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"dt"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function Windrower:processWindrowerArea(workArea, dt)\n    local spec = self.spec_windrower\n    local workAreaSpec = self.spec_workArea\n\n    if not self.isServer and self.currentUpdateDistance > Windrower.CLIENT_DM_UPDATE_RADIUS then\n        return 0 , 0\n    end\n\n    spec.isWorking = self:getLastSpeed() > 0.5\n\n    local sx, sy, sz = getWorldTranslation(workArea.start)\n    local wx, wy, wz = getWorldTranslation(workArea.width)\n    local hx, hy, hz = getWorldTranslation(workArea.height)\n\n    if spec.isWorking then\n        spec.stoneLastState = FSDensityMapUtil.getStoneArea(sx, sz, wx, wz, hx, hz)\n    else\n            spec.stoneLastState = 0\n        end\n\n        -- pick up\n        local lsx, lsy, lsz, lex, ley, lez, radius = DensityMapHeightUtil.getLineByAreaDimensions(sx, sy, sz, wx, wy, wz, hx, hy, hz)\n\n        -- loop over all fruitTypes or use only lastValidPickupFillType\n        local pickupLiters = 0\n        local pickupFillType = FillType.UNKNOWN\n\n        if workArea.lastPickupLiters = = 0 and(workArea.lastValidPickupFillType = = FillType.UNKNOWN or workArea.litersToDrop < g_densityMapHeightManager:getMinValidLiterValue(workArea.lastValidPickupFillType)) then\n            for _, fillTypeIndex in ipairs(spec.supportedFillTypes) do\n                pickupLiters = - DensityMapHeightUtil.tipToGroundAroundLine( self , - math.huge, fillTypeIndex, lsx,lsy,lsz, lex,ley,lez, radius, nil , nil , spec.limitToLineHeight, nil )\n                if pickupLiters > 0 then\n                    pickupFillType = fillTypeIndex\n                    break\n                end\n            end\n        else\n                pickupLiters = - DensityMapHeightUtil.tipToGroundAroundLine( self , - math.huge, workArea.lastValidPickupFillType, lsx,lsy,lsz, lex,ley,lez, radius, nil , nil , false , nil )\n\n                if workArea.lastValidPickupFillType = = FillType.GRASS_WINDROW then\n                    pickupLiters = pickupLiters - DensityMapHeightUtil.tipToGroundAroundLine( self , - math.huge, FillType.DRYGRASS_WINDROW, lsx,lsy,lsz, lex,ley,lez, radius, nil , nil , false , nil )\n                elseif workArea.lastValidPickupFillType = = FillType.DRYGRASS_WINDROW then\n                        pickupLiters = pickupLiters - DensityMapHeightUtil.tipToGroundAroundLine( self , - math.huge, FillType.GRASS_WINDROW, lsx,lsy,lsz, lex,ley,lez, radius, nil , nil , false , nil )\n                    end\n\n                    if pickupLiters > 0 then\n                        pickupFillType = workArea.lastValidPickupFillType\n                    end\n                end\n\n                if pickupFillType ~ = FillType.UNKNOWN then\n                    workArea.lastValidPickupFillType = pickupFillType\n\n                    self:setTestAreaRequirements( nil , pickupFillType, nil )\n                end\n                workArea.lastPickupLiters = pickupLiters\n                workArea.litersToDrop = workArea.litersToDrop + pickupLiters\n\n                --calculating area by area width multiplied by last moved distance(not 100% accuracy in corners)\n                local areaWidth = MathUtil.vector3Length(lsx - lex, lsy - ley, lsz - lez)\n                local area = areaWidth * self.lastMovedDistance\n\n                -- drop\n                if workArea.lastPickupLiters > 0 then\n                    local dropArea = workAreaSpec.workAreas[workArea.dropWindrowWorkAreaIndex]\n                    if dropArea ~ = nil then\n                        local dropType = workArea.lastValidPickupFillType\n                        local dropped = self:processDropArea(dropArea, workArea.lastPickupLiters, dropType)\n                        workArea.lastDroppedLiters = dropped\n                        workArea.litersToDrop = workArea.litersToDrop - dropped\n\n                        if self.isServer then\n                            --particles\n                            if self:getLastSpeed( true ) > 0.5 then\n                                if dropped > 0 then\n                                    local changedFillType = false\n                                    if spec.windrowerWorkAreaFillTypes[workArea.windrowerWorkAreaIndex] ~ = dropType then\n                                        spec.windrowerWorkAreaFillTypes[workArea.windrowerWorkAreaIndex] = dropType\n                                        self:raiseDirtyFlags(spec.fillTypesDirtyFlag)\n                                        changedFillType = true\n                                    end\n\n                                    local effects = spec.workAreaToEffects[workArea.index]\n                                    if effects ~ = nil then\n                                        for _, effect in ipairs(effects) do\n                                            if effect.dropAreaIndex = = nil or effect.dropAreaIndex = = workArea.dropWindrowWorkAreaIndex then\n                                                effect.activeTime = g_currentMission.time + effect.activeTimeDuration\n\n                                                -- sync mp\n                                                if not effect.isActiveSent then\n                                                    effect.isActiveSent = true\n                                                    self:raiseDirtyFlags(spec.effectDirtyFlag)\n                                                end\n\n                                                if changedFillType then\n                                                    g_effectManager:setEffectTypeInfo(effect.effects, dropType)\n                                                end\n\n                                                -- enable effect\n                                                if not effect.isActive then\n                                                    g_effectManager:setEffectTypeInfo(effect.effects, dropType)\n                                                    g_effectManager:startEffects(effect.effects)\n\n                                                    g_soundManager:playSample(effect.samples.work)\n                                                end\n\n                                                effect.isActive = true\n                                            end\n                                        end\n                                    end\n                                end\n                            end\n                        end\n                    end\n                end\n\n                return workArea.lastDroppedLiters, area\n            end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function Windrower.registerEventListeners(vehicleType)\n    SpecializationUtil.registerEventListener(vehicleType, "onLoad" , Windrower )\n    SpecializationUtil.registerEventListener(vehicleType, "onPostLoad" , Windrower )\n    SpecializationUtil.registerEventListener(vehicleType, "onDelete" , Windrower )\n    SpecializationUtil.registerEventListener(vehicleType, "onReadStream" , Windrower )\n    SpecializationUtil.registerEventListener(vehicleType, "onWriteStream" , Windrower )\n    SpecializationUtil.registerEventListener(vehicleType, "onReadUpdateStream" , Windrower )\n    SpecializationUtil.registerEventListener(vehicleType, "onWriteUpdateStream" , Windrower )\n    SpecializationUtil.registerEventListener(vehicleType, "onUpdateTick" , Windrower )\n    SpecializationUtil.registerEventListener(vehicleType, "onTurnedOn" , Windrower )\n    SpecializationUtil.registerEventListener(vehicleType, "onTurnedOff" , Windrower )\n    SpecializationUtil.registerEventListener(vehicleType, "onStartWorkAreaProcessing" , Windrower )\n    SpecializationUtil.registerEventListener(vehicleType, "onEndWorkAreaProcessing" , Windrower )\n    SpecializationUtil.registerEventListener(vehicleType, "onAIFieldCourseSettingsInitialized" , Windrower )\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function Windrower.registerFunctions(vehicleType)\n    SpecializationUtil.registerFunction(vehicleType, "processWindrowerArea" , Windrower.processWindrowerArea)\n    SpecializationUtil.registerFunction(vehicleType, "processDropArea" , Windrower.processDropArea)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registeroverwrittenfunctions",children:"registerOverwrittenFunctions"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerOverwrittenFunctions()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function Windrower.registerOverwrittenFunctions(vehicleType)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "doCheckSpeedLimit" , Windrower.doCheckSpeedLimit)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "loadWorkAreaFromXML" , Windrower.loadWorkAreaFromXML)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getDirtMultiplier" , Windrower.getDirtMultiplier)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getWearMultiplier" , Windrower.getWearMultiplier)\nend\n\n'})})]})}function p(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}}}]);