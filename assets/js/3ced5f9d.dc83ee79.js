"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[92244],{28453(e,l,n){n.d(l,{R:()=>r,x:()=>t});var s=n(96540);const a={},i=s.createContext(a);function r(e){const l=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(l):{...l,...e}},[l,e])}function t(e){let l;return l=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),s.createElement(i.Provider,{value:l},e.children)}},88316(e,l,n){n.r(l),n.d(l,{assets:()=>o,contentTitle:()=>t,default:()=>m,frontMatter:()=>r,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"script/FillTypes/FillTypeDesc","title":"FillTypeDesc","description":"FillTypeDesc","source":"@site/../docs/script/FillTypes/FillTypeDesc.md","sourceDirName":"script/FillTypes","slug":"/script/FillTypes/FillTypeDesc","permalink":"/FS25-Community-LUADOC/script/FillTypes/FillTypeDesc","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"StonePickMission","permalink":"/FS25-Community-LUADOC/script/Field/StonePickMission"},"next":{"title":"FillTypeManager","permalink":"/FS25-Community-LUADOC/script/FillTypes/FillTypeManager"}}');var a=n(74848),i=n(28453);const r={},t=void 0,o={},c=[{value:"FillTypeDesc",id:"filltypedesc",level:2},{value:"loadFromXMLFile",id:"loadfromxmlfile",level:3},{value:"new",id:"new",level:3}];function f(e){const l={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.h2,{id:"filltypedesc",children:"FillTypeDesc"}),"\n",(0,a.jsx)(l.p,{children:(0,a.jsx)(l.strong,{children:"Description"})}),"\n",(0,a.jsxs)(l.blockquote,{children:["\n",(0,a.jsx)(l.p,{children:"FillType"}),"\n"]}),"\n",(0,a.jsx)(l.p,{children:(0,a.jsx)(l.strong,{children:"Functions"})}),"\n",(0,a.jsxs)(l.ul,{children:["\n",(0,a.jsx)(l.li,{children:(0,a.jsx)(l.a,{href:"#loadfromxmlfile",children:"loadFromXMLFile"})}),"\n",(0,a.jsx)(l.li,{children:(0,a.jsx)(l.a,{href:"#new",children:"new"})}),"\n"]}),"\n",(0,a.jsx)(l.h3,{id:"loadfromxmlfile",children:"loadFromXMLFile"}),"\n",(0,a.jsx)(l.p,{children:(0,a.jsx)(l.strong,{children:"Description"})}),"\n",(0,a.jsx)(l.p,{children:(0,a.jsx)(l.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(l.blockquote,{children:["\n",(0,a.jsx)(l.p,{children:"loadFromXMLFile()"}),"\n"]}),"\n",(0,a.jsx)(l.p,{children:(0,a.jsx)(l.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(l.table,{children:[(0,a.jsx)(l.thead,{children:(0,a.jsxs)(l.tr,{children:[(0,a.jsx)(l.th,{children:"any"}),(0,a.jsx)(l.th,{children:"xmlFile"})]})}),(0,a.jsxs)(l.tbody,{children:[(0,a.jsxs)(l.tr,{children:[(0,a.jsx)(l.td,{children:"any"}),(0,a.jsx)(l.td,{children:"key"})]}),(0,a.jsxs)(l.tr,{children:[(0,a.jsx)(l.td,{children:"any"}),(0,a.jsx)(l.td,{children:"baseDirectory"})]}),(0,a.jsxs)(l.tr,{children:[(0,a.jsx)(l.td,{children:"any"}),(0,a.jsx)(l.td,{children:"customEnvironment"})]})]})]}),"\n",(0,a.jsx)(l.p,{children:(0,a.jsx)(l.strong,{children:"Code"})}),"\n",(0,a.jsx)(l.pre,{children:(0,a.jsx)(l.code,{className:"language-lua",children:'function FillTypeDesc:loadFromXMLFile(xmlFile, key, baseDirectory, customEnvironment)\n    self.name = xmlFile:getValue(key .. "#name" )\n    if not ClassUtil.getIsValidIndexName( self.name) then\n        Logging.warning( "\'%s\' is not a valid name for a fillType.Ignoring fillType!" , self.name)\n            return false\n        else\n                self.name = string.upper( self.name)\n            end\n\n            self.title = xmlFile:getValue(key .. "#title" , self.title, customEnvironment)\n            self.achievementName = xmlFile:getValue(key .. "#achievementName" , self.achievementName)\n\n            self.showOnPriceTable = xmlFile:getValue(key .. "#showOnPriceTable" , self.showOnPriceTable)\n            self.unitShort = xmlFile:getValue(key .. "#unitShort" , self.unitShort, customEnvironment)\n\n            self.isBulkType = xmlFile:getValue(key .. "#isBulkType" , false )\n            self.isPalletType = xmlFile:getValue(key .. "#isPalletType" , false )\n            self.isBaleType = xmlFile:getValue(key .. "#isBaleType" , false )\n\n            self.massPerLiter = xmlFile:getValue(key .. ".physics#massPerLiter" , self.massPerLiter * 1000 ) * 0.001\n            self.maxPhysicalSurfaceAngle = Utils.getNoNilRad(xmlFile:getValue(key .. ".physics#maxPhysicalSurfaceAngle" ), self.maxPhysicalSurfaceAngle)\n\n            self.hudOverlayFilename = xmlFile:getValue(key .. ".image#hud" , nil , baseDirectory) or self.hudOverlayFilename\n            self.palletFilename = xmlFile:getValue(key .. ".pallet#filename" , nil , baseDirectory) or self.palletFilename\n\n            self.pricePerLiter = xmlFile:getValue(key .. ".economy#pricePerLiter" , self.pricePerLiter)\n\n            local economicCurve = { }\n            xmlFile:iterate(key .. ".economy.factors.factor" , function (_, factorKey)\n                local period = xmlFile:getValue(factorKey .. "#period" )\n                local factor = xmlFile:getValue(factorKey .. "#value" )\n\n                if period ~ = nil and factor ~ = nil then\n                    economicCurve[period] = factor\n                end\n            end )\n\n            for period = SeasonPeriod.EARLY_SPRING, SeasonPeriod.LATE_WINTER do\n                self.economy.factors[period] = economicCurve[period] or self.economy.factors[period] or 1\n                self.economy.history[period] = self.economy.factors[period] * self.pricePerLiter\n            end\n\n            self.layerTextures.diffuseMapFilename = xmlFile:getValue(key .. ".textures#diffuse" , nil , baseDirectory) or self.layerTextures.diffuseMapFilename\n            self.layerTextures.normalMapFilename = xmlFile:getValue(key .. ".textures#normal" , nil , baseDirectory) or self.layerTextures.normalMapFilename\n            self.layerTextures.heightMapFilename = xmlFile:getValue(key .. ".textures#height" , nil , baseDirectory) or self.layerTextures.heightMapFilename\n            self.layerTextures.displacementMapFilename = xmlFile:getValue(key .. ".textures#displacement" , nil , baseDirectory) or self.layerTextures.displacementMapFilename\n            self.layerTextures.distanceFilename = xmlFile:getValue(key .. ".textures#distance" , nil , baseDirectory) or self.layerTextures.distanceFilename\n            self.layerTextures.isValid = self.layerTextures.diffuseMapFilename ~ = nil and self.layerTextures.normalMapFilename ~ = nil and self.layerTextures.heightMapFilename ~ = nil and self.layerTextures.displacementMapFilename ~ = nil\n\n            self.layerParameters.unitSize = xmlFile:getValue(key .. ".textures#unitSize" , self.layerParameters.unitSize)\n            self.layerParameters.displacementMaxHeight = xmlFile:getValue(key .. ".textures#displacementMaxHeight" , self.layerParameters.displacementMaxHeight)\n            self.layerParameters.blendContrast = xmlFile:getValue(key .. ".textures#blendContrast" , self.layerParameters.blendContrast)\n            self.layerParameters.noiseScale = xmlFile:getValue(key .. ".textures#noiseScale" , self.layerParameters.noiseScale)\n            self.layerParameters.fillBlendStart = xmlFile:getValue(key .. ".textures#fillBlendStart" , self.layerParameters.fillBlendStart)\n            self.layerParameters.porosityAtZeroRoughness = xmlFile:getValue(key .. ".textures#porosityAtZeroRoughness" , self.layerParameters.porosityAtZeroRoughness)\n            self.layerParameters.porosityAtFullRoughness = xmlFile:getValue(key .. ".textures#porosityAtFullRoughness" , self.layerParameters.porosityAtFullRoughness)\n            self.layerParameters.firmness = xmlFile:getValue(key .. ".textures#firmness" , self.layerParameters.firmness)\n            self.layerParameters.viscosity = xmlFile:getValue(key .. ".textures#viscosity" , self.layerParameters.viscosity)\n            self.layerParameters.firmnessWet = xmlFile:getValue(key .. ".textures#firmnessWet" , self.layerParameters.firmness) -- use the firmness as the default\n\n            self.prioritizedEffectType = xmlFile:getValue(key .. ".effects#prioritizedEffectType" , self.prioritizedEffectType)\n            self.fillSmokeColor = xmlFile:getValue(key .. ".effects#fillSmokeColor" , self.fillSmokeColor, true )\n            self.fruitSmokeColor = xmlFile:getValue(key .. ".effects#fruitSmokeColor" , self.fruitSmokeColor, true )\n\n            for _, particleKey in xmlFile:iterator(key .. ".effects.particle" ) do\n                local particle = { }\n                particle.particleType = xmlFile:getValue(particleKey .. "#particleType" )\n                if particle.particleType ~ = nil then\n                    particle.filename = xmlFile:getValue(particleKey .. "#filename" , nil , baseDirectory)\n                    if particle.filename ~ = nil then\n                        particle.useFillTexture = xmlFile:getValue(particleKey .. "#useFillTexture" , false )\n                        particle.emitCountScale = xmlFile:getValue(particleKey .. "#emitCountScale" , 1 )\n                        particle.spriteScaleX = xmlFile:getValue(particleKey .. "#spriteScaleX" )\n                        particle.spriteScaleY = xmlFile:getValue(particleKey .. "#spriteScaleY" )\n\n                        self.particles[particle.particleType] = particle\n                    else\n                            Logging.xmlWarning(xmlFile, "Missing filename in \'%s\'" , particleKey)\n                        end\n\n                    else\n                            Logging.xmlWarning(xmlFile, "Missing particleType in \'%s\'" , particleKey)\n                        end\n                    end\n\n                    self.alphaClip = { }\n                    self.alphaClip.value = xmlFile:getValue(key .. ".effects.alphaClip#value" , self.alphaClip.value)\n                    self.alphaClip.sharpness = xmlFile:getValue(key .. ".effects.alphaClip#sharpness" , self.alphaClip.sharpness)\n                    self.alphaClip.gradientScale = xmlFile:getValue(key .. ".effects.alphaClip#gradientScale" , self.alphaClip.gradientScale)\n                    self.alphaClip.alphaScale = xmlFile:getValue(key .. ".effects.alphaClip#alphaScale" , self.alphaClip.alphaScale)\n                    self.alphaClip.beltAlphaScale = xmlFile:getValue(key .. ".effects.alphaClip#beltAlphaScale" , self.alphaClip.beltAlphaScale)\n\n                    --#debug -- store the path to the xml file, so we can reload the data(debugging only)\n                    --#debug if self.xmlFilename = = nil then\n                        --#debug self.xmlFilename = xmlFile.filename\n                        --#debug self.xmlKey = key\n                        --#debug self.xmlBaseDirectory = baseDirectory\n                        --#debug self.xmlCustomEnvironment = customEnvironment\n                        --#debug end\n\n                        return true\n                    end\n\n'})}),"\n",(0,a.jsx)(l.h3,{id:"new",children:"new"}),"\n",(0,a.jsx)(l.p,{children:(0,a.jsx)(l.strong,{children:"Description"})}),"\n",(0,a.jsx)(l.p,{children:(0,a.jsx)(l.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(l.blockquote,{children:["\n",(0,a.jsx)(l.p,{children:"new()"}),"\n"]}),"\n",(0,a.jsx)(l.p,{children:(0,a.jsx)(l.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,a.jsx)(l.table,{children:(0,a.jsx)(l.thead,{children:(0,a.jsxs)(l.tr,{children:[(0,a.jsx)(l.th,{children:"any"}),(0,a.jsx)(l.th,{children:"customMt"})]})})}),"\n",(0,a.jsx)(l.p,{children:(0,a.jsx)(l.strong,{children:"Code"})}),"\n",(0,a.jsx)(l.pre,{children:(0,a.jsx)(l.code,{className:"language-lua",children:'function FillTypeDesc.new(customMt)\n    local self = setmetatable( { } , customMt or FillTypeDesc _mt)\n\n    self.index = nil -- set by FillTypeManager\n\n    self.name = "UNKNOWN"\n    self.title = "Unknown"\n\n    self.unitShort = ""\n\n    self.achievementName = nil\n    self.showOnPriceTable = false\n\n    self.pricePerLiter = 0\n    self.massPerLiter = 0.001\n\n    self.maxPhysicalSurfaceAngle = math.rad( 30 )\n\n    self.hudOverlayFilename = nil\n\n    self.textureArrayIndex = nil\n\n    self.layerTextures = { }\n    self.layerTextures.diffuseMapFilename = nil\n    self.layerTextures.normalMapFilename = nil\n    self.layerTextures.heightMapFilename = nil\n    self.layerTextures.displacementMapFilename = nil\n    self.layerTextures.distanceFilename = nil\n    self.layerTextures.isValid = false\n\n    self.layerParameters = { }\n    self.layerParameters.unitSize = 4\n    self.layerParameters.displacementMaxHeight = 0.2\n    self.layerParameters.blendContrast = 0.5\n    self.layerParameters.noiseScale = 0.5\n    self.layerParameters.fillBlendStart = 1.0\n    self.layerParameters.porosityAtZeroRoughness = 0\n    self.layerParameters.porosityAtFullRoughness = 0\n    self.layerParameters.firmness = 0.5\n    self.layerParameters.viscosity = 0.5\n    self.layerParameters.firmnessWet = 0.5\n\n    self.hudFilename = nil\n    self.palletFilename = nil\n\n    self.previousHourPrice = 0\n    self.startPricePerLiter = 0\n    self.totalAmount = 0\n\n    self.economy = { }\n    self.economy.factors = { }\n    self.economy.history = { }\n    self.economy.sychronizeData = true\n\n    self.prioritizedEffectType = "ShaderPlaneEffect"\n    self.fillSmokeColor = nil\n    self.fruitSmokeColor = nil\n    self.particles = { }\n\n    self.alphaClip = { }\n    self.alphaClip.value = 0.5\n    self.alphaClip.sharpness = 0.5\n    self.alphaClip.gradientScale = 1.0\n    self.alphaClip.alphaScale = 1.0\n    self.alphaClip.beltAlphaScale = 1.0\n\n    self.finalized = false\n\n    return self\nend\n\n'})})]})}function m(e={}){const{wrapper:l}={...(0,i.R)(),...e.components};return l?(0,a.jsx)(l,{...e,children:(0,a.jsx)(f,{...e})}):f(e)}}}]);