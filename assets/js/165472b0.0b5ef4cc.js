"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[28500],{28453(e,n,l){l.d(n,{R:()=>r,x:()=>t});var i=l(96540);const a={},s=i.createContext(a);function r(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),i.createElement(s.Provider,{value:n},e.children)}},71578(e,n,l){l.r(n),l.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>c,frontMatter:()=>r,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"script/Misc/BaleManager","title":"BaleManager","description":"BaleManager","source":"@site/../docs/script/Misc/BaleManager.md","sourceDirName":"script/Misc","slug":"/script/Misc/BaleManager","permalink":"/FS25-Community-LUADOC/script/Misc/BaleManager","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"AbstractManager","permalink":"/FS25-Community-LUADOC/script/Misc/AbstractManager"},"next":{"title":"BezierCurve","permalink":"/FS25-Community-LUADOC/script/Misc/BezierCurve"}}');var a=l(74848),s=l(28453);const r={},t=void 0,d={},h=[{value:"BaleManager",id:"balemanager",level:2},{value:"baleLoaded",id:"baleloaded",level:3},{value:"consoleCommandAddBale",id:"consolecommandaddbale",level:3},{value:"consoleCommandAddBaleAll",id:"consolecommandaddbaleall",level:3},{value:"consoleCommandListBales",id:"consolecommandlistbales",level:3},{value:"getBaleCapacityByBaleIndex",id:"getbalecapacitybybaleindex",level:3},{value:"getBaleIndex",id:"getbaleindex",level:3},{value:"getBaleInfoByXMLFilename",id:"getbaleinfobyxmlfilename",level:3},{value:"getBaleTypeIndexByXMLFilename",id:"getbaletypeindexbyxmlfilename",level:3},{value:"getBaleXMLFilename",id:"getbalexmlfilename",level:3},{value:"getBaleXMLFilenameByIndex",id:"getbalexmlfilenamebyindex",level:3},{value:"getFermentationTime",id:"getfermentationtime",level:3},{value:"getIsBaleMatching",id:"getisbalematching",level:3},{value:"getIsRoundBale",id:"getisroundbale",level:3},{value:"getPossibleCapacitiesForFillType",id:"getpossiblecapacitiesforfilltype",level:3},{value:"initDataStructures",id:"initdatastructures",level:3},{value:"loadBaleDataFromXML",id:"loadbaledatafromxml",level:3},{value:"loadBaleFromXML",id:"loadbalefromxml",level:3},{value:"loadBales",id:"loadbales",level:3},{value:"loadMapData",id:"loadmapdata",level:3},{value:"loadModBaleFromXML",id:"loadmodbalefromxml",level:3},{value:"new",id:"new",level:3},{value:"registerBaleTextureXMLPaths",id:"registerbaletexturexmlpaths",level:3},{value:"registerBaleXMLPaths",id:"registerbalexmlpaths",level:3},{value:"registerFermentation",id:"registerfermentation",level:3},{value:"registerMapBalesXMLPaths",id:"registermapbalesxmlpaths",level:3},{value:"removeFermentation",id:"removefermentation",level:3},{value:"unloadBaleData",id:"unloadbaledata",level:3},{value:"unloadMapData",id:"unloadmapdata",level:3},{value:"update",id:"update",level:3}];function o(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"balemanager",children:"BaleManager"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"This class handles all bales"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Parent"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"?version=script&category=58&class=554",children:"AbstractManager"})}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Functions"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#baleloaded",children:"baleLoaded"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#consolecommandaddbale",children:"consoleCommandAddBale"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#consolecommandaddbaleall",children:"consoleCommandAddBaleAll"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#consolecommandlistbales",children:"consoleCommandListBales"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#getbalecapacitybybaleindex",children:"getBaleCapacityByBaleIndex"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#getbaleindex",children:"getBaleIndex"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#getbaleinfobyxmlfilename",children:"getBaleInfoByXMLFilename"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#getbaletypeindexbyxmlfilename",children:"getBaleTypeIndexByXMLFilename"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#getbalexmlfilename",children:"getBaleXMLFilename"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#getbalexmlfilenamebyindex",children:"getBaleXMLFilenameByIndex"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#getfermentationtime",children:"getFermentationTime"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#getisbalematching",children:"getIsBaleMatching"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#getisroundbale",children:"getIsRoundBale"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#getpossiblecapacitiesforfilltype",children:"getPossibleCapacitiesForFillType"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#initdatastructures",children:"initDataStructures"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#loadbaledatafromxml",children:"loadBaleDataFromXML"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#loadbalefromxml",children:"loadBaleFromXML"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#loadbales",children:"loadBales"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#loadmapdata",children:"loadMapData"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#loadmodbalefromxml",children:"loadModBaleFromXML"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#new",children:"new"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#registerbaletexturexmlpaths",children:"registerBaleTextureXMLPaths"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#registerbalexmlpaths",children:"registerBaleXMLPaths"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#registerfermentation",children:"registerFermentation"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#registermapbalesxmlpaths",children:"registerMapBalesXMLPaths"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#removefermentation",children:"removeFermentation"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#unloadbaledata",children:"unloadBaleData"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#unloadmapdata",children:"unloadMapData"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#update",children:"update"})}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"baleloaded",children:"baleLoaded"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Bale i3d file loaded"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"baleLoaded(entityId i3dNode, integer failedReason, Bale bale)"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"entityId"}),(0,a.jsx)(n.th,{children:"i3dNode"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"integer"}),(0,a.jsx)(n.td,{children:"failedReason"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Bale"}),(0,a.jsx)(n.td,{children:"bale"})]})]})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"function BaleManager:baleLoaded(i3dNode, failedReason, bale)\n    if i3dNode ~ = 0 then\n        bale.sharedRoot = i3dNode\n\n        local collisionPreset = CollisionPreset.BALE\n\n        local baleId = getChildAt(i3dNode, 0 )\n        if getCollisionFilterGroup(baleId) ~ = collisionPreset.group then\n            Logging.error( \"Bale '%s' has wrong collision group mask.Expected: %d, got: %d\" , bale.xmlFilename, collisionPreset.group, getCollisionFilterGroup(baleId))\n        end\n\n        if getCollisionFilterMask(baleId) ~ = collisionPreset.mask then\n            Logging.error( \"Bale '%s' has wrong collision mask.Expected: %d, got: %d\" , bale.xmlFilename, collisionPreset.mask, getCollisionFilterMask(baleId))\n        end\n\n        removeFromPhysics(i3dNode)\n    end\nend\n\n"})}),"\n",(0,a.jsx)(n.h3,{id:"consolecommandaddbale",children:"consoleCommandAddBale"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"consoleCommandAddBale()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"fillTypeName"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"isRoundbale"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"width"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"height"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"length"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"wrapState"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"modName"})]})]})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'function BaleManager:consoleCommandAddBale(fillTypeName, isRoundbale, width, height, length, wrapState, modName)\n    local usage = "gsBaleAdd fillTypeName isRoundBale [width] [height/diameter] [length] [wrapState] [modName]"\n\n    if not g_currentMission:getIsServer() then\n        Logging.error( "Command only allowed on server!" )\n        return\n    end\n\n    fillTypeName = Utils.getNoNil(fillTypeName, "STRAW" )\n    isRoundbale = Utils.stringToBoolean(isRoundbale)\n\n    width = width ~ = nil and tonumber(width) or nil\n    height = height ~ = nil and tonumber(height) or nil\n    length = length ~ = nil and tonumber(length) or nil\n    if wrapState ~ = nil and tonumber(wrapState) = = nil then\n        Logging.error( "Invalid wrapState \'%s\', number expected.\\nUsage: %s" , wrapState, usage)\n        return\n    end\n    wrapState = tonumber(wrapState or 0 )\n\n    local fillTypeIndex = g_fillTypeManager:getFillTypeIndexByName(fillTypeName)\n    if fillTypeIndex = = nil then\n        Logging.error( "Invalid fillTypeName \'%s\' (e.g.STRAW).\\nUsage: %s" , fillTypeName, usage)\n        return\n    end\n\n    local baleXMLFilename, _ = self:getBaleXMLFilename(fillTypeIndex, isRoundbale, width, height, length, height, modName)\n    if baleXMLFilename = = nil then\n        Logging.error( "Could not find bale for given size attributes!\\nUsage: %s" , usage)\n            self:consoleCommandListBales()\n            return\n        end\n\n        local x, y, z = g_localPlayer:getPosition()\n        local dirX, dirZ = g_localPlayer:getCurrentFacingDirection()\n\n        x, z = x + dirX * 4 , z + dirZ * 4\n        y = y + 5\n        local ry = MathUtil.getYRotationFromDirection(dirX, dirZ)\n\n        local farmId = g_currentMission:getFarmId()\n        farmId = ((farmId ~ = FarmManager.SPECTATOR_FARM_ID) and farmId) or 1 -- don\'t spawn bales with spectator farm\n\n        local baleObject = Bale.new(g_currentMission:getIsServer(), g_currentMission:getIsClient())\n        if baleObject:loadFromConfigXML(baleXMLFilename, x, y, z, 0 , ry, 0 ) then\n            baleObject:setFillType(fillTypeIndex, true )\n            baleObject:setWrappingState(wrapState)\n            baleObject:setOwnerFarmId(farmId, true )\n            baleObject:register()\n        end\n\n        return string.format( "Created bale at(%.2f, %.2f, %.2f).For specific bales use: %s" , x, y, z, usage)\n    end\n\n'})}),"\n",(0,a.jsx)(n.h3,{id:"consolecommandaddbaleall",children:"consoleCommandAddBaleAll"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"consoleCommandAddBaleAll()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,a.jsx)(n.table,{children:(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"drawSizeBox"})]})})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'function BaleManager:consoleCommandAddBaleAll(drawSizeBox)\n    if g_server = = nil then\n        Logging.error( "Command only allowed on server!" )\n        return\n    end\n\n    drawSizeBox = string.lower(drawSizeBox or "" ) = = "true"\n\n    local wx, wy, wz\n    local dirX, dirZ\n    if self.debugLoadPosition = = nil then\n        wx, wy, wz = g_localPlayer:getPosition()\n        dirX, dirZ = g_localPlayer:getCurrentFacingDirection()\n        self.debugLoadPosition = { wx, wy, wz, dirX, dirZ }\n    else\n            wx, wy, wz = self.debugLoadPosition[ 1 ], self.debugLoadPosition[ 2 ], self.debugLoadPosition[ 3 ]\n            dirX, dirZ = self.debugLoadPosition[ 4 ], self.debugLoadPosition[ 5 ]\n        end\n\n        if self.debugBales ~ = nil then\n            for _, bale in ipairs( self.debugBales) do\n                bale:delete()\n            end\n        end\n\n        g_debugManager:removeGroup( "baleManager" )\n\n        self.debugBales = { }\n\n        self:unloadBaleData()\n        g_i3DManager:clearEntireSharedI3DFileCache()\n        self.bales = { }\n\n        local xmlFilename = Utils.getFilename( "data/maps/maps_bales.xml" )\n        local balesXMLFile = XMLFile.load( "TempBales" , xmlFilename, BaleManager.mapBalesXMLSchema)\n        if balesXMLFile ~ = nil then\n            self:loadBales(balesXMLFile)\n            balesXMLFile:delete()\n        end\n\n        local function spawnBales()\n            local boxColor = Color.new( 0.2 , 0.2 , 0.2 , 1 )\n\n            wx, wz = wx + dirX * 4 , wz + dirZ * 4\n            local yRot = MathUtil.getYRotationFromDirection(dirX, dirZ)\n\n            local xOffset, zOffset = 0 , 0\n            for baleIndex, bale in ipairs( self.bales) do\n                for _, fillTypeData in ipairs(bale.fillTypes) do\n                    zOffset = (bale.isRoundbale and bale.width or bale.length) * 0.5\n                    for variationIndex, variationData in ipairs(bale.variations) do\n                        local x, z = wx + dirX * zOffset - dirZ * xOffset, wz + dirZ * zOffset + dirX * xOffset\n\n                        local baleHeight = (bale.isRoundbale and bale.diameter or bale.height)\n                        local y = getTerrainHeightAtWorldPos(g_terrainNode, x, 0 , z) + baleHeight * 0.5\n\n                        local baleObject = Bale.new(g_currentMission:getIsServer(), g_currentMission:getIsClient())\n                        if baleObject:loadFromConfigXML(bale.xmlFilename, x, y, z, 0 , yRot, 0 ) then\n                            baleObject:setFillType(fillTypeData.fillTypeIndex, true )\n                            baleObject:setVariationIndex(variationIndex)\n                            baleObject:setOwnerFarmId(g_currentMission:getFarmId(), true )\n                            baleObject:register()\n                            baleObject:removeFromPhysics()\n\n                            local debugString = string.format( "%s(%s - %s)" , Utils.getFilenameFromPath(bale.xmlFilename), g_fillTypeManager:getFillTypeNameByIndex(fillTypeData.fillTypeIndex), variationData.id)\n\n                            local rx, ry, rz = localRotationToWorld(baleObject.nodeId, 0 , math.pi, 0 )\n                            DebugText3D.new():createWithWorldPos(x, y + baleHeight * 0.5 + 0.25 , z, rx, ry, rz, debugString, 0.07 ):addToManager( "baleManager" , nil , math.huge)\n\n                            if drawSizeBox then\n                                local sizeX, sizeY, sizeZ\n                                if bale.isRoundbale then\n                                    sizeX, sizeY, sizeZ = bale.diameter, bale.diameter, bale.width\n                                else\n                                        sizeX, sizeY, sizeZ = bale.width, bale.height, bale.length\n                                    end\n                                    DebugBox.new():createWithWorldPosAndRot(x, y, z, rx, ry, rz, sizeX, sizeY, sizeZ):setColor(boxColor):addToManager( "baleManager" , nil , math.huge)\n                                end\n\n                                table.insert( self.debugBales, baleObject)\n                            end\n\n                            zOffset = zOffset + (bale.isRoundbale and bale.width or bale.length) + 1\n                        end\n\n                        xOffset = xOffset + 2.5\n                    end\n\n                    xOffset = xOffset + 5\n                end\n            end\n\n            local numBalesToLoad = # self.bales\n            local function baleLoaded(_, i3dNode, failedReason, bale)\n                self:baleLoaded(i3dNode, failedReason, bale)\n                numBalesToLoad = numBalesToLoad - 1\n                if numBalesToLoad = = 0 then\n                    spawnBales()\n                end\n            end\n\n            for _, bale in ipairs( self.bales) do\n                bale.sharedLoadRequestId = g_i3DManager:loadSharedI3DFileAsync(bale.i3dFilename, false , true , baleLoaded, self , bale)\n            end\n        end\n\n'})}),"\n",(0,a.jsx)(n.h3,{id:"consolecommandlistbales",children:"consoleCommandListBales"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"consoleCommandListBales()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'function BaleManager:consoleCommandListBales()\n    print( "Available bale types:" )\n    for _, bale in ipairs( self.bales) do\n        local attributes = { bale.xmlFilename }\n        table.insert(attributes, string.format( "isRoundbale = %s" , bale.isRoundbale))\n        for _, sizeProperty in ipairs( { "width" , "height" , "length" , "diameter" } ) do\n            if bale[sizeProperty] ~ = nil and bale[sizeProperty] ~ = 0 then\n                table.insert(attributes, string.format( "%s = %s" , sizeProperty, bale[sizeProperty]))\n            end\n        end\n        log( table.concat(attributes, " " ))\n\n        local fillTypeNames = { }\n        for _, fillTypeData in ipairs(bale.fillTypes) do\n            table.insert(fillTypeNames, g_fillTypeManager:getFillTypeNameByIndex(fillTypeData.fillTypeIndex))\n        end\n        log( " fillTypes: " , table.concat(fillTypeNames, " " ))\n    end\nend\n\n'})}),"\n",(0,a.jsx)(n.h3,{id:"getbalecapacitybybaleindex",children:"getBaleCapacityByBaleIndex"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Returns capacity for specific fill type by given bale index"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"getBaleCapacityByBaleIndex(integer baleIndex, integer fillTypeIndex)"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"integer"}),(0,a.jsx)(n.th,{children:"baleIndex"}),(0,a.jsx)(n.th,{children:"fill type index"})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"integer"}),(0,a.jsx)(n.td,{children:"fillTypeIndex"}),(0,a.jsx)(n.td,{children:"fill type index"})]})})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n",(0,a.jsx)(n.table,{children:(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"integer"}),(0,a.jsx)(n.th,{children:"capacity"})]})})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"function BaleManager:getBaleCapacityByBaleIndex(baleIndex, fillTypeIndex)\n    if baleIndex ~ = nil then\n        local bale = self.bales[baleIndex]\n        if bale ~ = nil then\n            for j = 1 , #bale.fillTypes do\n                if bale.fillTypes[j].fillTypeIndex = = fillTypeIndex then\n                    return bale.fillTypes[j].capacity\n                end\n            end\n        end\n    end\n\n    return 0\nend\n\n"})}),"\n",(0,a.jsx)(n.h3,{id:"getbaleindex",children:"getBaleIndex"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Get index of bale that matches given specs"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"getBaleIndex(integer fillTypeIndex, boolean isRoundbale, float width, float height, float length, float diameter,\nfloat diameter, string customEnvironment)"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"integer"}),(0,a.jsx)(n.th,{children:"fillTypeIndex"}),(0,a.jsx)(n.th,{children:"fill type index"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"boolean"}),(0,a.jsx)(n.td,{children:"isRoundbale"}),(0,a.jsx)(n.td,{children:"is roundbale"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"float"}),(0,a.jsx)(n.td,{children:"width"}),(0,a.jsx)(n.td,{children:"bale width"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"float"}),(0,a.jsx)(n.td,{children:"height"}),(0,a.jsx)(n.td,{children:"bale height"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"float"}),(0,a.jsx)(n.td,{children:"length"}),(0,a.jsx)(n.td,{children:"bale length"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"float"}),(0,a.jsx)(n.td,{children:"diameter"}),(0,a.jsx)(n.td,{children:"bale diameter"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"float"}),(0,a.jsx)(n.td,{children:"diameter"}),(0,a.jsx)(n.td,{children:"bale diameter"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"string"}),(0,a.jsx)(n.td,{children:"customEnvironment"}),(0,a.jsx)(n.td,{children:"seach bales from this custom environment"})]})]})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(n.table,{children:(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"string"}),(0,a.jsx)(n.th,{children:"index"}),(0,a.jsx)(n.th,{children:"index"})]})})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"function BaleManager:getBaleIndex(fillTypeIndex, isRoundbale, width, height, length, diameter, customEnvironment)\n    -- for mods we search first in it's own custom environment for a matching bale\n        if customEnvironment ~ = nil then\n            for baleIndex = 1 , # self.bales do\n                local bale = self.bales[baleIndex]\n                if bale.isAvailable then\n                    if customEnvironment = = bale.customEnvironment then\n                        if self:getIsBaleMatching(bale, fillTypeIndex, isRoundbale, width, height, length, diameter) then\n                            return baleIndex\n                        end\n                    end\n                end\n            end\n        end\n\n        -- now search all bales without custom environment\n        for baleIndex = 1 , # self.bales do\n            local bale = self.bales[baleIndex]\n            if bale.isAvailable then\n                if bale.customEnvironment = = nil then\n                    if self:getIsBaleMatching(bale, fillTypeIndex, isRoundbale, width, height, length, diameter) then\n                        return baleIndex\n                    end\n                end\n            end\n        end\n\n        return nil\n    end\n\n"})}),"\n",(0,a.jsx)(n.h3,{id:"getbaleinfobyxmlfilename",children:"getBaleInfoByXMLFilename"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Returns information about the given bale xml file"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"getBaleInfoByXMLFilename()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"xmlFilename"})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"useVisualInfomation"})]})})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"function BaleManager:getBaleInfoByXMLFilename(xmlFilename, useVisualInfomation)\n    for i = 1 , # self.bales do\n        local bale = self.bales[i]\n        if bale.xmlFilename = = xmlFilename then\n            if useVisualInfomation = = true then\n                return bale.isRoundbale, bale.visualWidth, bale.visualHeight, bale.visualLength, bale.visualDiameter, bale.maxStackHeight\n            else\n                    return bale.isRoundbale, bale.width, bale.height, bale.length, bale.diameter, bale.maxStackHeight\n                end\n            end\n        end\n\n        return false , 0 , 0 , 0 , 0 , 1\n    end\n\n"})}),"\n",(0,a.jsx)(n.h3,{id:"getbaletypeindexbyxmlfilename",children:"getBaleTypeIndexByXMLFilename"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Returns the bale index for the given XML filename"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"getBaleTypeIndexByXMLFilename()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,a.jsx)(n.table,{children:(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"xmlFilename"})]})})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"function BaleManager:getBaleTypeIndexByXMLFilename(xmlFilename)\n    for i = 1 , # self.bales do\n        if self.bales[i].xmlFilename = = xmlFilename then\n            return i\n        end\n    end\n\n    return nil\nend\n\n"})}),"\n",(0,a.jsx)(n.h3,{id:"getbalexmlfilename",children:"getBaleXMLFilename"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Get xml file bale that matches given specs"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"getBaleXMLFilename(integer fillTypeIndex, boolean isRoundbale, float width, float height, float length, float\ndiameter, )"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"integer"}),(0,a.jsx)(n.th,{children:"fillTypeIndex"}),(0,a.jsx)(n.th,{children:"fill type index"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"boolean"}),(0,a.jsx)(n.td,{children:"isRoundbale"}),(0,a.jsx)(n.td,{children:"is roundbale"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"float"}),(0,a.jsx)(n.td,{children:"width"}),(0,a.jsx)(n.td,{children:"bale width"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"float"}),(0,a.jsx)(n.td,{children:"height"}),(0,a.jsx)(n.td,{children:"bale height"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"float"}),(0,a.jsx)(n.td,{children:"length"}),(0,a.jsx)(n.td,{children:"bale length"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"float"}),(0,a.jsx)(n.td,{children:"diameter"}),(0,a.jsx)(n.td,{children:"bale diameter"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"customEnvironment"}),(0,a.jsx)(n.td,{})]})]})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(n.table,{children:(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"index"}),(0,a.jsx)(n.th,{children:"index"})]})})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"function BaleManager:getBaleXMLFilename(fillTypeIndex, isRoundbale, width, height, length, diameter, customEnvironment)\n    local baleIndex = self:getBaleIndex(fillTypeIndex, isRoundbale, width, height, length, diameter, customEnvironment)\n    if baleIndex ~ = nil then\n        return self.bales[baleIndex].xmlFilename, baleIndex\n    end\n\n    return nil\nend\n\n"})}),"\n",(0,a.jsx)(n.h3,{id:"getbalexmlfilenamebyindex",children:"getBaleXMLFilenameByIndex"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Returns the bale xml filename for the given bale index"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"getBaleXMLFilenameByIndex()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,a.jsx)(n.table,{children:(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"baleIndex"})]})})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"function BaleManager:getBaleXMLFilenameByIndex(baleIndex)\n    if baleIndex ~ = nil and self.bales[baleIndex] ~ = nil then\n        return self.bales[baleIndex].xmlFilename\n    end\n\n    return nil\nend\n\n"})}),"\n",(0,a.jsx)(n.h3,{id:"getfermentationtime",children:"getFermentationTime"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Returns fermentation time for given bale"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"getFermentationTime(table bale)"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(n.table,{children:(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"table"}),(0,a.jsx)(n.th,{children:"bale"}),(0,a.jsx)(n.th,{children:"bale object"})]})})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(n.table,{children:(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"table"}),(0,a.jsx)(n.th,{children:"time"}),(0,a.jsx)(n.th,{children:"current fermentation time in ms"})]})})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"function BaleManager:getFermentationTime(bale)\n    for i = 1 , # self.fermentations do\n        if self.fermentations[i].bale = = bale then\n            return self.fermentations[i].time\n        end\n    end\n\n    return 0\nend\n\n"})}),"\n",(0,a.jsx)(n.h3,{id:"getisbalematching",children:"getIsBaleMatching"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"getIsBaleMatching()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"bale"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"fillTypeIndex"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"isRoundbale"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"width"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"height"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"length"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"diameter"})]})]})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"function BaleManager:getIsBaleMatching(bale, fillTypeIndex, isRoundbale, width, height, length, diameter)\n    if bale.isRoundbale = = isRoundbale then\n        local fillTypeMatch = false\n        for j = 1 , #bale.fillTypes do\n            if bale.fillTypes[j].fillTypeIndex = = fillTypeIndex then\n                fillTypeMatch = true\n                break\n            end\n        end\n\n        if fillTypeMatch then\n            local sizeMatch\n            if isRoundbale then\n                sizeMatch = (width = = nil or MathUtil.round(width, 2 ) = = bale.width)\n                and(diameter = = nil or MathUtil.round(diameter, 2 ) = = bale.diameter)\n            else\n                    sizeMatch = (width = = nil or MathUtil.round(width, 2 ) = = bale.width)\n                    and(height = = nil or MathUtil.round(height, 2 ) = = bale.height)\n                    and(length = = nil or MathUtil.round(length, 2 ) = = bale.length)\n                end\n\n                if sizeMatch then\n                    return true\n                end\n            end\n        end\n\n        return false\n    end\n\n"})}),"\n",(0,a.jsx)(n.h3,{id:"getisroundbale",children:"getIsRoundBale"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Returns if the given bale type index is a roundbale"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"getIsRoundBale()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,a.jsx)(n.table,{children:(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"baleIndex"})]})})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"function BaleManager:getIsRoundBale(baleIndex)\n    if baleIndex ~ = nil and self.bales[baleIndex] ~ = nil then\n        return self.bales[baleIndex].isRoundbale\n    end\n\n    return nil\nend\n\n"})}),"\n",(0,a.jsx)(n.h3,{id:"getpossiblecapacitiesforfilltype",children:"getPossibleCapacitiesForFillType"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"getPossibleCapacitiesForFillType()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,a.jsx)(n.table,{children:(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"fillTypeIndex"})]})})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"function BaleManager:getPossibleCapacitiesForFillType(fillTypeIndex)\n    local capacities = { }\n\n    for _, bale in ipairs( self.bales) do\n        for _, fillTypeData in ipairs(bale.fillTypes) do\n            if fillTypeData.fillTypeIndex = = fillTypeIndex then\n                table.insert(capacities, fillTypeData.capacity)\n            end\n        end\n    end\n\n    return capacities\nend\n\n"})}),"\n",(0,a.jsx)(n.h3,{id:"initdatastructures",children:"initDataStructures"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Initialize data structures"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"initDataStructures()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"function BaleManager:initDataStructures()\n    self.bales = { }\n    self.modBalesToLoad = { }\n    self.fermentations = { }\nend\n\n"})}),"\n",(0,a.jsx)(n.h3,{id:"loadbaledatafromxml",children:"loadBaleDataFromXML"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Loads and adds bale type from xml"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"loadBaleDataFromXML(XMLFile xmlFile, float key, )"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"XMLFile"}),(0,a.jsx)(n.th,{children:"xmlFile"}),(0,a.jsx)(n.th,{children:"XMLFile instance"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"float"}),(0,a.jsx)(n.td,{children:"key"}),(0,a.jsx)(n.td,{children:"xmlKey"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"baseDirectory"}),(0,a.jsx)(n.td,{})]})]})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(n.table,{children:(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"baleType"}),(0,a.jsx)(n.th,{children:"baleType object"})]})})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'function BaleManager:loadBaleDataFromXML(bale, xmlFile, baseDirectory)\n    local i3dFilename = xmlFile:getValue( "bale.filename" )\n    if i3dFilename ~ = nil then\n        bale.i3dFilename = Utils.getFilename(i3dFilename, baseDirectory)\n        if not fileExists(bale.i3dFilename) then\n            Logging.xmlError(xmlFile, "Bale i3d file could not be found \'%s\'" , bale.i3dFilename)\n            return false\n        end\n\n        bale.isRoundbale = xmlFile:getValue( "bale.size#isRoundbale" , true )\n        bale.width = MathUtil.round(xmlFile:getValue( "bale.size#width" , 0 ), 2 )\n        bale.height = MathUtil.round(xmlFile:getValue( "bale.size#height" , 0 ), 2 )\n        bale.length = MathUtil.round(xmlFile:getValue( "bale.size#length" , 0 ), 2 )\n        bale.diameter = MathUtil.round(xmlFile:getValue( "bale.size#diameter" , 0 ), 2 )\n        bale.maxStackHeight = xmlFile:getValue( "bale.size#maxStackHeight" , bale.isRoundbale and 2 or 3 )\n        bale.visualWidth = xmlFile:getValue( "bale.size#visualWidth" , bale.width)\n        bale.visualHeight = xmlFile:getValue( "bale.size#visualHeight" , bale.height)\n        bale.visualLength = xmlFile:getValue( "bale.size#visualLength" , bale.length)\n        bale.visualDiameter = xmlFile:getValue( "bale.size#visualDiameter" , bale.diameter)\n\n        if bale.isRoundbale and(bale.diameter = = 0 or bale.width = = 0 ) then\n            Logging.xmlError(xmlFile, "Missing size attributes for round bale.Requires width and diameter." )\n                return false\n            elseif not bale.isRoundbale and(bale.width = = 0 or bale.height = = 0 or bale.length = = 0 ) then\n                    Logging.xmlError(xmlFile, "Missing size attributes for square bale.Requires width, height and length." )\n                        return false\n                    end\n\n                    bale.fillTypes = { }\n                    xmlFile:iterate( "bale.fillTypes.fillType" , function (index, key)\n                        local fillTypeName = xmlFile:getValue(key .. "#name" )\n                        local fillTypeIndex = g_fillTypeManager:getFillTypeIndexByName(fillTypeName)\n                        if fillTypeIndex ~ = nil then\n                            local fillTypeData = { }\n                            fillTypeData.fillTypeIndex = fillTypeIndex\n                            fillTypeData.capacity = xmlFile:getValue(key .. "#capacity" , 0 )\n                            table.insert(bale.fillTypes, fillTypeData)\n                        else\n                                Logging.xmlWarning(xmlFile, "Unknown fill type \'%s\' for bale in \'%s\'" , fillTypeName, key)\n                                end\n                            end )\n\n                            bale.variations = { }\n                            xmlFile:iterate( "bale.variations.variation" , function (index, key)\n                                local id = xmlFile:getValue(key .. "#id" )\n                                if id ~ = nil then\n                                    local variationData = { }\n                                    variationData.id = id\n                                    table.insert(bale.variations, variationData)\n                                end\n                            end )\n\n                            if #bale.variations = = 0 then\n                                table.insert(bale.variations, { id = "DEFAULT" } )\n                            end\n                        else\n                                Logging.xmlError(xmlFile, "No i3D file defined in bale xml." )\n                                return false\n                            end\n\n                            return true\n                        end\n\n'})}),"\n",(0,a.jsx)(n.h3,{id:"loadbalefromxml",children:"loadBaleFromXML"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"loadBaleFromXML()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"xmlFile"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"key"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"baseDirectory"})]})]})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'function BaleManager:loadBaleFromXML(xmlFile, key, baseDirectory)\n    if type(xmlFile) ~ = "table" then\n        xmlFile = XMLFile.wrap(xmlFile)\n    end\n\n    local xmlFilename = xmlFile:getString(key .. "#filename" )\n    if xmlFilename ~ = nil then\n        local bale = { }\n        bale.xmlFilename = Utils.getFilename(xmlFilename, baseDirectory)\n        bale.isAvailable = xmlFile:getBool(key .. "#isAvailable" , true )\n        local baleXmlFile = XMLFile.load( "TempBale" , bale.xmlFilename, BaleManager.baleXMLSchema)\n        if baleXmlFile ~ = nil then\n            local success = self:loadBaleDataFromXML(bale, baleXmlFile, baseDirectory)\n            baleXmlFile:delete()\n            if success then\n                table.insert( self.bales, bale)\n                return true\n            end\n        end\n    end\n\n    Logging.xmlError(xmlFile, "Failed to load bale from xml \'%s\'" , key)\n\n    return false\nend\n\n'})}),"\n",(0,a.jsx)(n.h3,{id:"loadbales",children:"loadBales"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"loadBales()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"xmlFile"})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"baseDirectory"})]})})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'function BaleManager:loadBales(xmlFile, baseDirectory)\n    xmlFile:iterate( "map.bales.bale" , function (index, key)\n        self:loadBaleFromXML(xmlFile, key, baseDirectory)\n    end )\n\n    return true\nend\n\n'})}),"\n",(0,a.jsx)(n.h3,{id:"loadmapdata",children:"loadMapData"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Load data on map load"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"loadMapData()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"xmlFile"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"missionInfo"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"baseDirectory"})]})]})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(n.table,{children:(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"true"}),(0,a.jsx)(n.th,{children:"if loading was successful else false"})]})})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'function BaleManager:loadMapData(xmlFile, missionInfo, baseDirectory)\n    BaleManager:superClass().loadMapData( self )\n\n    local filename = getXMLString(xmlFile, "map.bales#filename" )\n    if filename = = nil then\n        Logging.xmlInfo(xmlFile, "No bales xml defined in map" )\n        return false\n    end\n    local xmlFilename = Utils.getFilename(filename, baseDirectory)\n    local balesXMLFile = XMLFile.load( "TempBales" , xmlFilename, BaleManager.mapBalesXMLSchema)\n    if balesXMLFile ~ = nil then\n        self:loadBales(balesXMLFile, baseDirectory)\n        balesXMLFile:delete()\n    end\n\n    for i = # self.modBalesToLoad, 1 , - 1 do\n        local bale = self.modBalesToLoad[i]\n        local baleXmlFile = XMLFile.load( "TempBale" , bale.xmlFilename, BaleManager.baleXMLSchema)\n        if baleXmlFile ~ = nil then\n            if self:loadBaleDataFromXML(bale, baleXmlFile, bale.baseDirectory) then\n                table.insert( self.bales, bale)\n            end\n            baleXmlFile:delete()\n        end\n        table.remove( self.modBalesToLoad, i)\n    end\n\n    BaleManager.SEND_NUM_BITS = MathUtil.getNumRequiredBits(# self.bales)\n\n    for _, bale in ipairs( self.bales) do\n        bale.sharedLoadRequestId = g_i3DManager:loadSharedI3DFileAsync(bale.i3dFilename, false , true , self.baleLoaded, self , bale)\n    end\n\n    if g_addCheatCommands then\n        addConsoleCommand( "gsBaleAdd" , "Adds a bale" , "consoleCommandAddBale" , self , "[fillTypeName]; [isRoundbale]; [width]; [height]; [length]; [wrapState]; [modName]" )\n        addConsoleCommand( "gsBaleAddAll" , "Adds a bale" , "consoleCommandAddBaleAll" , self , "[drawSizeBox]" )\n        addConsoleCommand( "gsBaleList" , "List available bale types" , "consoleCommandListBales" , self )\n    end\n\n    return true\nend\n\n'})}),"\n",(0,a.jsx)(n.h3,{id:"loadmodbalefromxml",children:"loadModBaleFromXML"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"loadModBaleFromXML()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"xmlFile"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"key"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"baseDirectory"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"customEnvironment"})]})]})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'function BaleManager:loadModBaleFromXML(xmlFile, key, baseDirectory, customEnvironment)\n    if type(xmlFile) ~ = "table" then\n        xmlFile = XMLFile.wrap(xmlFile)\n    end\n\n    local xmlFilename = xmlFile:getString(key .. "#filename" )\n    if xmlFilename ~ = nil then\n        xmlFilename = Utils.getFilename(xmlFilename, baseDirectory)\n\n        local bale = { }\n        bale.xmlFilename = xmlFilename\n        bale.baseDirectory = baseDirectory\n        bale.customEnvironment = customEnvironment\n        bale.isAvailable = xmlFile:getBool(key .. "#isAvailable" , true )\n\n        table.insert( self.modBalesToLoad, bale)\n        return true\n    end\n\n    Logging.xmlError(xmlFile, "Failed to load bale from xml \'%s\'" , key)\n\n    return false\nend\n\n'})}),"\n",(0,a.jsx)(n.h3,{id:"new",children:"new"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Creating manager"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"new()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,a.jsx)(n.table,{children:(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"customMt"})]})})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(n.table,{children:(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"instance"}),(0,a.jsx)(n.th,{children:"instance of object"})]})})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'function BaleManager.new(customMt)\n    local self = AbstractManager.new(customMt or BaleManager _mt)\n\n    BaleManager.baleXMLSchema = XMLSchema.new( "bale" )\n    BaleManager.registerBaleXMLPaths( BaleManager.baleXMLSchema)\n\n    BaleManager.mapBalesXMLSchema = XMLSchema.new( "mapBales" )\n    BaleManager.registerMapBalesXMLPaths( BaleManager.mapBalesXMLSchema)\n\n    return self\nend\n\n'})}),"\n",(0,a.jsx)(n.h3,{id:"registerbaletexturexmlpaths",children:"registerBaleTextureXMLPaths"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"registerBaleTextureXMLPaths()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"schema"})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"basePath"})]})})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'function BaleManager.registerBaleTextureXMLPaths(schema, basePath)\n    schema:register(XMLValueType.FILENAME, basePath .. ".diffuse#filename" , "Diffuse texture to apply to all mesh nodes" )\n    schema:register(XMLValueType.BOOL, basePath .. ".diffuse#useFillTypeArray" , "Use the fill type array texture for diffuse" , false )\n\n        schema:register(XMLValueType.FILENAME, basePath .. ".normal#filename" , "Normal texture to apply to all mesh nodes" )\n        schema:register(XMLValueType.BOOL, basePath .. ".normal#useFillTypeArray" , "Use the fill type array texture for normal" , false )\n\n            schema:register(XMLValueType.FILENAME, basePath .. ".alpha#filename" , "Alpha texture to apply to all mesh nodes" )\n\n            schema:register(XMLValueType.FILENAME, basePath .. ".baleNormal#filename" , "Bale normal texture to apply to all mesh nodes" )\n\n            schema:register(XMLValueType.FILENAME, basePath .. ".netWrapDiffuse#filename" , "Net wrap diffuse texture to apply to all mesh nodes" )\n            schema:register(XMLValueType.FILENAME, basePath .. ".netWrapNormal#filename" , "Net Wrap normal texture to apply to all mesh nodes" )\n        end\n\n'})}),"\n",(0,a.jsx)(n.h3,{id:"registerbalexmlpaths",children:"registerBaleXMLPaths"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"registerBaleXMLPaths()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,a.jsx)(n.table,{children:(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"schema"})]})})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'function BaleManager.registerBaleXMLPaths(schema)\n    schema:register(XMLValueType.STRING, "bale.filename" , "Path to i3d file" )\n\n    schema:register(XMLValueType.BOOL, "bale.size#isRoundbale" , "Bale is a roundbale" , true )\n    schema:register(XMLValueType.FLOAT, "bale.size#width" , "Bale Width" , 0 )\n    schema:register(XMLValueType.FLOAT, "bale.size#height" , "Bale Height" , 0 )\n    schema:register(XMLValueType.FLOAT, "bale.size#length" , "Bale Length" , 0 )\n    schema:register(XMLValueType.FLOAT, "bale.size#diameter" , "Bale Diameter" , 0 )\n    schema:register(XMLValueType.INT, "bale.size#maxStackHeight" , "Max.stack height for automatic spawning of bales" , "2 or round bales and 3 for square bales" )\n        schema:register(XMLValueType.FLOAT, "bale.size#visualWidth" , "Bale Width(Real size of the visuals if different)" , "Same as #width" )\n            schema:register(XMLValueType.FLOAT, "bale.size#visualHeight" , "Bale Height(Real size of the visuals if different)" , "Same as #height" )\n                schema:register(XMLValueType.FLOAT, "bale.size#visualLength" , "Bale Length(Real size of the visuals if different)" , "Same as #length" )\n                    schema:register(XMLValueType.FLOAT, "bale.size#visualDiameter" , "Bale Diameter(Real size of the visuals if different)" , "Same as #diameter" )\n\n                        schema:register(XMLValueType.NODE_INDEX, "bale.mountableObject#triggerNode" , "Trigger node" )\n                        schema:register(XMLValueType.FLOAT, "bale.mountableObject#forceAcceleration" , "Acceleration force" , 4 )\n                        schema:register(XMLValueType.FLOAT, "bale.mountableObject#forceLimitScale" , "Force limit scale" , 1 )\n                        schema:register(XMLValueType.BOOL, "bale.mountableObject#axisFreeY" , "Joint is free in Y direction" , false )\n                        schema:register(XMLValueType.BOOL, "bale.mountableObject#axisFreeX" , "Joint is free in X direction" , false )\n\n                        schema:register(XMLValueType.STRING, "bale.uvId" , "Specify that this bale model has a custom UV.This will result in baleWrapper to replace the bale if the UV is different to the defined one in the baleWrapper.So the baleWrapper will always use a bale with a UV that matches the wrapping texture." , "DEFAULT" )\n\n                            schema:register(XMLValueType.NODE_INDEX, "bale.baleMeshes.baleMesh(?)#node" , "Path to mesh node" )\n                            schema:register(XMLValueType.BOOL, "bale.baleMeshes.baleMesh(?)#supportsWrapping" , "Defines if the mesh is hidden while wrapping or not" )\n                                schema:register(XMLValueType.STRING, "bale.baleMeshes.baleMesh(?)#fillTypes" , "If defined this mesh is only visible if any of this fillTypes is set" )\n                                    schema:register(XMLValueType.BOOL, "bale.baleMeshes.baleMesh(?)#isTensionBeltMesh" , "Defines if this mesh is detected for tension belt calculation" , false )\n                                        schema:register(XMLValueType.BOOL, "bale.baleMeshes.baleMesh(?)#isAlphaMesh" , "Defines if the mesh is a alpha mesh(different material will be applied)" , false )\n\n                                            schema:register(XMLValueType.STRING, "bale.fillTypes.fillType(?)#name" , "Name of fill type" )\n                                            schema:register(XMLValueType.FLOAT, "bale.fillTypes.fillType(?)#capacity" , "Fill level of bale with this fill type" )\n                                            schema:register(XMLValueType.FLOAT, "bale.fillTypes.fillType(?)#mass" , "Mass of bale with this fill type" , 500 )\n                                            schema:register(XMLValueType.FLOAT, "bale.fillTypes.fillType(?)#forceAcceleration" , "Force acceleration value of bale with this fill type" , "bale.mountableObject#forceAcceleration" )\n                                            schema:register(XMLValueType.BOOL, "bale.fillTypes.fillType(?)#supportsWrapping" , "Wrapping is allowed while this type is used" )\n                                                schema:register(XMLValueType.STRING, "bale.fillTypes.fillType(?)#materialName" , "Bale material to use" )\n                                                schema:register(XMLValueType.STRING, "bale.fillTypes.fillType(?)#alphaMaterialName" , "Bale material to use on alpha mesh parts" )\n                                                BaleManager.registerBaleTextureXMLPaths(schema, "bale.fillTypes.fillType(?)" )\n\n                                                schema:register(XMLValueType.STRING, "bale.variations.variation(?)#id" , "Variation identifier" )\n                                                BaleManager.registerBaleTextureXMLPaths(schema, "bale.variations.variation(?)" )\n\n                                                schema:register(XMLValueType.STRING, "bale.fillTypes.fillType(?).fermenting#outputFillType" , "Output fill type after fermenting" )\n                                                schema:register(XMLValueType.BOOL, "bale.fillTypes.fillType(?).fermenting#requiresWrapping" , "Wrapping is required to start fermenting" , true )\n                                                schema:register(XMLValueType.FLOAT, "bale.fillTypes.fillType(?).fermenting#time" , "Fermenting time in ingame days which represent months" , 1 )\n\n                                                -- packed bales\n                                                schema:register(XMLValueType.STRING, "bale.packedBale#singleBale" , "Path to single bale xml filename" )\n                                                schema:register(XMLValueType.NODE_INDEX, "bale.packedBale.singleBale(?)#node" , "Single bale spawn node" )\n                                            end\n\n'})}),"\n",(0,a.jsx)(n.h3,{id:"registerfermentation",children:"registerFermentation"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Register bale fermentation"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"registerFermentation(table bale, float currentTime, float maxTime)"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"table"}),(0,a.jsx)(n.th,{children:"bale"}),(0,a.jsx)(n.th,{children:"bale object"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"float"}),(0,a.jsx)(n.td,{children:"currentTime"}),(0,a.jsx)(n.td,{children:"current fermentation time in ms"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"float"}),(0,a.jsx)(n.td,{children:"maxTime"}),(0,a.jsx)(n.td,{children:"max fermentation time"})]})]})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"function BaleManager:registerFermentation(bale, currentTime, maxTime)\n    if not Platform.gameplay.hasBaleFermentation then\n        maxTime = 0\n    end\n\n    maxTime = maxTime * g_currentMission.missionInfo.economicDifficulty\n\n    local fermentation = { }\n    fermentation.bale = bale\n    fermentation.time = currentTime\n    fermentation.percentageSend = 0\n    fermentation.maxTime = maxTime\n\n    table.insert( self.fermentations, fermentation)\nend\n\n"})}),"\n",(0,a.jsx)(n.h3,{id:"registermapbalesxmlpaths",children:"registerMapBalesXMLPaths"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"registerMapBalesXMLPaths()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,a.jsx)(n.table,{children:(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"schema"})]})})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'function BaleManager.registerMapBalesXMLPaths(schema)\n    schema:register(XMLValueType.STRING, "map.bales.bale(?)#filename" , "Path to bale xml" )\n    schema:register(XMLValueType.STRING, "map.bales.bale(?)#isAvailable" , "Bale is available for all balers to spawn" )\n    end\n\n'})}),"\n",(0,a.jsx)(n.h3,{id:"removefermentation",children:"removeFermentation"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Removed fermentation of given bale"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"removeFermentation(table bale)"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(n.table,{children:(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"table"}),(0,a.jsx)(n.th,{children:"bale"}),(0,a.jsx)(n.th,{children:"bale object"})]})})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"function BaleManager:removeFermentation(bale)\n    for i = # self.fermentations, 1 , - 1 do\n        if self.fermentations[i].bale = = bale then\n            table.remove( self.fermentations, i)\n        end\n    end\nend\n\n"})}),"\n",(0,a.jsx)(n.h3,{id:"unloadbaledata",children:"unloadBaleData"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Unload bale data"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"unloadBaleData()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"function BaleManager:unloadBaleData()\n    for _, bale in ipairs( self.bales) do\n        if bale.sharedLoadRequestId ~ = nil then\n            g_i3DManager:releaseSharedI3DFile(bale.sharedLoadRequestId)\n            bale.sharedLoadRequestId = nil\n        end\n        if bale.sharedRoot ~ = nil then\n            delete(bale.sharedRoot)\n            bale.sharedRoot = nil\n        end\n    end\nend\n\n"})}),"\n",(0,a.jsx)(n.h3,{id:"unloadmapdata",children:"unloadMapData"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Unload data on mission delete"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"unloadMapData()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'function BaleManager:unloadMapData()\n    self:unloadBaleData()\n\n    if g_addCheatCommands then\n        removeConsoleCommand( "gsBaleAdd" )\n        removeConsoleCommand( "gsBaleList" )\n    end\n\n    BaleManager:superClass().unloadMapData( self )\nend\n\n'})}),"\n",(0,a.jsx)(n.h3,{id:"update",children:"update"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Update"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"update(float dt)"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(n.table,{children:(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"float"}),(0,a.jsx)(n.th,{children:"dt"}),(0,a.jsx)(n.th,{children:"time since last call in ms"})]})})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"function BaleManager:update(dt)\n    if g_server ~ = nil then\n        local numFermentations = # self.fermentations\n        if numFermentations > 0 then\n            local timeScale = g_currentMission:getEffectiveTimeScale()\n\n            for i = numFermentations, 1 , - 1 do\n                local fermentation = self.fermentations[i]\n\n                fermentation.time = fermentation.time + dt * timeScale\n                if fermentation.time > = fermentation.maxTime then\n                    fermentation.bale:onFermentationUpdate( 1 )\n                    fermentation.bale:onFermentationEnd()\n                    table.remove( self.fermentations, i)\n                else\n                        local percentage = fermentation.time / fermentation.maxTime\n                        if math.floor(percentage * 100 ) ~ = math.floor(fermentation.percentageSend * 100 ) then\n                            fermentation.bale:onFermentationUpdate(percentage)\n                            fermentation.percentageSend = percentage\n                        end\n                    end\n                end\n            end\n        end\n    end\n\n"})})]})}function c(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}}}]);