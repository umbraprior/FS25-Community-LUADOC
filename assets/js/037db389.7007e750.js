"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[78853],{6394(e,n,l){l.r(n),l.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"script/Specializations/PlaceableRollercoaster","title":"PlaceableRollercoaster","description":"PlaceableRollercoaster","source":"@site/../docs/script/Specializations/PlaceableRollercoaster.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/PlaceableRollercoaster","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableRollercoaster","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"PlaceableRiceFieldActivatable","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableRiceFieldActivatable"},"next":{"title":"PlaceableSellingStation","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableSellingStation"}}');var r=l(74848),s=l(28453);const a={},t=void 0,o={},c=[{value:"PlaceableRollercoaster",id:"placeablerollercoaster",level:2},{value:"loadFromXMLFile",id:"loadfromxmlfile",level:3},{value:"onDelete",id:"ondelete",level:3},{value:"onFinalizePlacement",id:"onfinalizeplacement",level:3},{value:"onLoad",id:"onload",level:3},{value:"onReadStream",id:"onreadstream",level:3},{value:"onSharedAnimationFileLoaded",id:"onsharedanimationfileloaded",level:3},{value:"onWriteStream",id:"onwritestream",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3},{value:"registerFunctions",id:"registerfunctions",level:3},{value:"registerOverwrittenFunctions",id:"registeroverwrittenfunctions",level:3},{value:"registerSavegameXMLPaths",id:"registersavegamexmlpaths",level:3},{value:"registerXMLPaths",id:"registerxmlpaths",level:3},{value:"saveToXMLFile",id:"savetoxmlfile",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"placeablerollercoaster",children:"PlaceableRollercoaster"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Specialization for placeables"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Functions"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#loadfromxmlfile",children:"loadFromXMLFile"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#ondelete",children:"onDelete"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onfinalizeplacement",children:"onFinalizePlacement"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onreadstream",children:"onReadStream"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onsharedanimationfileloaded",children:"onSharedAnimationFileLoaded"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onwritestream",children:"onWriteStream"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#registeroverwrittenfunctions",children:"registerOverwrittenFunctions"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#registersavegamexmlpaths",children:"registerSavegameXMLPaths"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#registerxmlpaths",children:"registerXMLPaths"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#savetoxmlfile",children:"saveToXMLFile"})}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"loadfromxmlfile",children:"loadFromXMLFile"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"loadFromXMLFile()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"xmlFile"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"key"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function PlaceableRollercoaster:loadFromXMLFile(xmlFile, key)\n    local spec = self.spec_rollercoaster\n\n    for _, counterKey in xmlFile:iterator(key .. ".player" ) do\n        local uniqueUserId = xmlFile:getValue(counterKey .. "#uniqueUserId" )\n        local rideCount = xmlFile:getValue(counterKey .. "#rideCount" )\n\n        if uniqueUserId ~ = nil and rideCount ~ = nil then\n            spec.playerRideCounter[uniqueUserId] = rideCount\n        end\n    end\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"ondelete",children:"onDelete"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onDelete()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function PlaceableRollercoaster:onDelete()\n    local spec = self.spec_rollercoaster\n\n    g_messageCenter:unsubscribeAll( self )\n\n    g_currentMission:removeMapHotspot(spec.rollercoasterHotspot)\n\n    spec.rollercoasterHotspot:delete()\n\n    if spec.animation ~ = nil and spec.animation.sharedLoadRequestId ~ = nil then\n        g_i3DManager:releaseSharedI3DFile(spec.animation.sharedLoadRequestId)\n        spec.animation.sharedLoadRequestId = nil\n    end\n\n    for _, seat in ipairs(spec.seats) do\n        if seat.vehicleCharacter ~ = nil then\n            seat.vehicleCharacter:delete()\n        end\n        if seat.camera ~ = nil then\n            seat.camera:delete()\n        end\n    end\n\n    if spec.soundsMoving ~ = nil then\n        for _, sound in ipairs(spec.soundsMoving) do\n            if sound.movingSound ~ = nil then\n                g_currentMission.ambientSoundSystem:removeMovingSound(sound.movingSound)\n                sound.movingSound = nil\n            end\n        end\n    end\n\n    if spec.sounds ~ = nil then\n        g_soundManager:deleteSamples(spec.sounds)\n    end\n\n    if spec.playerTrigger ~ = nil then\n        removeTrigger(spec.playerTrigger)\n        spec.playerTrigger = nil\n    end\n\n    if PlaceableRollercoaster.INSTANCE = = self then\n        PlaceableRollercoaster.INSTANCE = nil\n    end\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"onfinalizeplacement",children:"onFinalizePlacement"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onFinalizePlacement()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function PlaceableRollercoaster:onFinalizePlacement(savegame)\n    local spec = self.spec_rollercoaster\n\n    spec.rollercoasterHotspot:setPlaceable( self )\n    spec.rollercoasterHotspot:setOwnerFarmId( nil )\n\n    local x,y,z, _\n    x,_,z = getWorldTranslation(spec.hotSpotLinkNode)\n    spec.rollercoasterHotspot:setWorldPosition(x, z)\n\n    x,y,z = getWorldTranslation(spec.hotSpotTeleportNode)\n    spec.rollercoasterHotspot:setTeleportWorldPosition(x, y, z)\n\n    g_currentMission:addMapHotspot(spec.rollercoasterHotspot)\n\n    if PlaceableRollercoaster.INSTANCE = = nil then\n        PlaceableRollercoaster.INSTANCE = self\n    end\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Called on loading"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onLoad(table savegame)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"table"}),(0,r.jsx)(n.th,{children:"savegame"}),(0,r.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function PlaceableRollercoaster:onLoad(savegame)\n    local spec = self.spec_rollercoaster\n\n    local key = "placeable.rollercoaster"\n\n    local clipRootNode = self.xmlFile:getValue(key .. ".animation.clip#rootNode" , nil , self.components, self.i3dMappings)\n    local clipName = self.xmlFile:getValue(key .. ".animation.clip#name" )\n\n    local _, baseDirectory = Utils.getModNameAndBaseDirectory( self.xmlFile:getFilename())\n\n    if clipRootNode ~ = nil and clipName ~ = nil then\n        local clipFilename = self.xmlFile:getValue(key .. ".animation.clip#filename" )\n\n        spec.animation = { }\n        spec.animation.clipRootNode = clipRootNode\n        spec.animation.clipName = clipName\n        spec.animation.clipTrack = 0\n        spec.animation.speedScale = self.xmlFile:getValue(key .. ".animation#speedScale" , 1 )\n\n        if clipFilename ~ = nil then\n            clipFilename = Utils.getFilename(clipFilename, baseDirectory)\n\n            local loadingTask = self:createLoadingTask()\n            local arguments = {\n            loadingTask = loadingTask\n            }\n            spec.animation.sharedLoadRequestId = g_i3DManager:loadSharedI3DFileAsync(clipFilename, false , false , self.onSharedAnimationFileLoaded, self , arguments)\n            spec.animation.clipFilename = clipFilename\n        end\n\n        setVisibility(clipRootNode, false )\n\n        spec.animationTimeInterpolator = InterpolationTime.new( 1.3 )\n        spec.animationInterpolator = InterpolatorValue.new( 0 )\n    end\n\n    spec.playerTrigger = self.xmlFile:getValue(key .. ".playerTrigger#node" , nil , self.components, self.i3dMappings)\n    addTrigger(spec.playerTrigger, "playerTriggerCallback" , self )\n    self:setPlayerTriggerState( false )\n    spec.activatable = RollercoasterActivatable.new( self )\n\n    spec.carts = { }\n    spec.seats = { }\n\n    for cartIndex, cartKey in self.xmlFile:iterator(key .. ".carts.cart" ) do\n        local cart = { }\n        cart.node = self.xmlFile:getValue(cartKey .. "#node" , nil , self.components, self.i3dMappings)\n        cart.slope = 0\n        cart.angleChange = 0\n        cart.dirX, cart.dirY, cart.dirZ = localDirectionToWorld(cart.node, 0 , 0 , 1 )\n\n        for _, seatKey in self.xmlFile:iterator(cartKey .. ".seat" ) do\n            local seatEntry = { }\n            seatEntry.cart = cart\n            seatEntry.node = self.xmlFile:getValue(seatKey .. "#node" , nil , self.components, self.i3dMappings)\n            if seatEntry.node ~ = nil then\n                -- TODO:only have one camera per game and switch location dynamically?\n                local camera = VehicleCamera.new( self )\n                if camera:loadFromXML( self.xmlFile, seatKey .. ".camera" , nil , 1 ) then\n                    seatEntry.camera = camera\n                end\n\n                seatEntry.vehicleCharacter = VehicleCharacter.new( self )\n                if seatEntry.vehicleCharacter ~ = nil and not seatEntry.vehicleCharacter:load( self.xmlFile, seatKey .. ".characterNode" ) then\n                    seatEntry.vehicleCharacter = nil\n                end\n            end\n\n            seatEntry.characterSpineLastRotationX, seatEntry.characterSpineLastRotationZ = 0 , 0\n            seatEntry.randomFactor = math.random()\n            seatEntry.smoothingFactor = 1 - ( math.random( 10 , 40 ) / 100 )\n            seatEntry.smoothingFactorInv = 1 - seatEntry.smoothingFactor\n\n            table.insert(spec.seats, seatEntry)\n        end\n\n        table.insert(spec.carts, cart)\n    end\n\n    spec.centerCart = spec.carts[ MathUtil.round(#spec.carts / 2 )] -- center cart used for sound etc\n\n        spec.localSeatIndex = nil\n        spec.numRiders = 0\n        spec.ridersChangedListeners = { }\n\n        spec.exitPoints = { }\n        for _, pointKey in self.xmlFile:iterator(key .. ".exitPoints.exitPoint" ) do\n            local exitPoint = self.xmlFile:getValue(pointKey .. "#node" , nil , self.components, self.i3dMappings)\n            if exitPoint ~ = nil then\n                table.insert(spec.exitPoints, exitPoint)\n            end\n        end\n\n        if #spec.exitPoints < #spec.seats then\n            Logging.xmlWarning( self.xmlFile, "Only %d exitPoints defined for %d seats" , #spec.exitPoints, #spec.seats)\n            end\n\n            spec.rollercoasterHotspot = RollercoasterHotspot.new()\n            spec.hotSpotLinkNode = self.xmlFile:getValue(key .. ".hotspot#linkNode" , nil , self.components, self.i3dMappings)\n            spec.hotSpotTeleportNode = self.xmlFile:getValue(key .. ".hotspot#teleportNode" , nil , self.components, self.i3dMappings)\n\n            if self.isClient then\n                -- spline based sound for lifts\n                    spec.soundsMoving = { }\n                    for index, soundKey in self.xmlFile:iterator(key .. ".movingSounds.sound" ) do\n                        local movingSoundNode = self.xmlFile:getValue(soundKey .. "#node" , nil , self.components, self.i3dMappings)\n                        local soundFilename = Utils.getFilename( self.xmlFile:getValue(soundKey .. "#filename" ), baseDirectory)\n                        local innerRadius = self.xmlFile:getValue(soundKey .. "#innerRadius" )\n                        local radius = self.xmlFile:getValue(soundKey .. "#radius" )\n                        local volume = self.xmlFile:getValue(soundKey .. "#volume" , 1 )\n\n                        local audioSource = createAudioSource( "rollercoaster_" .. tostring(index), soundFilename, radius, innerRadius, volume, 0 )\n                        local sample = getAudioSourceSample(audioSource)\n                        setSampleGroup(sample, AudioGroup.ENVIRONMENT)\n\n                        link(getChildAt(movingSoundNode, 1 ), audioSource) -- link to TG which is moved along spline\n\n                        -- only create sample here, sound is activated on build completion\n                        table.insert(spec.soundsMoving, { node = movingSoundNode, movingSound = nil } )\n                    end\n\n                    -- regular sounds with modifiers\n                    spec.sounds = { }\n                    spec.sounds.driving1 = g_soundManager:loadSampleFromXML( self.xmlFile, key .. ".sounds" , "driving1" , baseDirectory, self.components, 0 , AudioGroup.ENVIRONMENT, self.i3dMappings, self )\n                    spec.sounds.driving2 = g_soundManager:loadSampleFromXML( self.xmlFile, key .. ".sounds" , "driving2" , baseDirectory, self.components, 0 , AudioGroup.ENVIRONMENT, self.i3dMappings, self )\n                    spec.sounds.driving3 = g_soundManager:loadSampleFromXML( self.xmlFile, key .. ".sounds" , "driving3" , baseDirectory, self.components, 0 , AudioGroup.ENVIRONMENT, self.i3dMappings, self )\n                    spec.sounds.driving4 = g_soundManager:loadSampleFromXML( self.xmlFile, key .. ".sounds" , "driving4" , baseDirectory, self.components, 0 , AudioGroup.ENVIRONMENT, self.i3dMappings, self )\n                    spec.sounds.driving5 = g_soundManager:loadSampleFromXML( self.xmlFile, key .. ".sounds" , "driving5" , baseDirectory, self.components, 0 , AudioGroup.ENVIRONMENT, self.i3dMappings, self )\n\n                    -- initilize for sound modifiers\n                        spec.speed = 0\n                        spec.posX, spec.posY, spec.posZ = getWorldTranslation(spec.centerCart.node)\n\n                        self.currentUpdateDistance = math.huge -- needed for VehicleCharacter:update()\n                        end\n\n                        g_messageCenter:subscribe(MessageType.USER_REMOVED, self.onUserRemoved, self )\n                    end\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"onreadstream",children:"onReadStream"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onReadStream()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"streamId"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function PlaceableRollercoaster:onReadStream(streamId, connection)\n    local spec = self.spec_rollercoaster\n\n    -- used seats\n    for seatIndex, seat in ipairs(spec.seats) do\n        if streamReadBool(streamId) then\n            local player = NetworkUtil.readNodeObject(streamId)\n            self:enterRide(seatIndex, player)\n        end\n    end\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"onsharedanimationfileloaded",children:"onSharedAnimationFileLoaded"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onSharedAnimationFileLoaded()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"node"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"failedReason"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"args"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function PlaceableRollercoaster:onSharedAnimationFileLoaded(node, failedReason, args)\n    local spec = self.spec_rollercoaster\n\n    if node ~ = 0 and node ~ = nil then\n        if not self.isDeleted then\n            local animNode = getChildAt(getChildAt(node, 0 ), 0 )\n            if cloneAnimCharacterSet(animNode, spec.animation.clipRootNode) then\n\n                local characterSet = getAnimCharacterSet(spec.animation.clipRootNode)\n                local clipIndex = getAnimClipIndex(characterSet, spec.animation.clipName)\n                if clipIndex ~ = - 1 then\n                    assignAnimTrackClip(characterSet, spec.animation.clipTrack, clipIndex)\n                    setAnimTrackLoopState(characterSet, spec.animation.clipTrack, false )\n\n                    spec.animation.clipDuration = getAnimClipDuration(characterSet, clipIndex)\n                    spec.animation.clipIndex = clipIndex\n                    spec.animation.clipCharacterSet = characterSet\n\n                    setAnimTrackSpeedScale(characterSet, clipIndex, spec.animation.speedScale)\n                else\n                        Logging.error( \"Animation clip with name '%s' does not exist in '%s'\" , spec.animation.clipName, spec.animation.clipFilename or self.xmlFilename)\n                    end\n                end\n            end\n\n            delete(node)\n        end\n\n        spec.playerRideCounter = { }\n\n        for _, state in pairs( self.spec_constructible.stateMachine) do\n            if state.init ~ = nil then\n                state:init()\n            end\n        end\n\n        self:finishLoadingTask(args.loadingTask)\n    end\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"onwritestream",children:"onWriteStream"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onWriteStream()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"streamId"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function PlaceableRollercoaster:onWriteStream(streamId, connection)\n    local spec = self.spec_rollercoaster\n\n    -- used seats\n    for seatIndex, seat in ipairs(spec.seats) do\n        if streamWriteBool(streamId, seat.player ~ = nil ) then\n            NetworkUtil.writeNodeObject(streamId, seat.player)\n        end\n    end\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Checks if all prerequisite specializations are loaded"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"prerequisitesPresent(table specializations)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"table"}),(0,r.jsx)(n.th,{children:"specializations"}),(0,r.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"table"}),(0,r.jsx)(n.th,{children:"hasPrerequisite"}),(0,r.jsx)(n.th,{children:"true if all prerequisite specializations are loaded"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function PlaceableRollercoaster.prerequisitesPresent(specializations)\n    return SpecializationUtil.hasSpecialization( PlaceableConstructible , specializations)\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function PlaceableRollercoaster.registerEventListeners(placeableType)\n    SpecializationUtil.registerEventListener(placeableType, "onLoad" , PlaceableRollercoaster )\n    SpecializationUtil.registerEventListener(placeableType, "onFinalizePlacement" , PlaceableRollercoaster )\n    SpecializationUtil.registerEventListener(placeableType, "onDelete" , PlaceableRollercoaster )\n    SpecializationUtil.registerEventListener(placeableType, "onUpdate" , PlaceableRollercoaster )\n    SpecializationUtil.registerEventListener(placeableType, "onReadStream" , PlaceableRollercoaster )\n    SpecializationUtil.registerEventListener(placeableType, "onWriteStream" , PlaceableRollercoaster )\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function PlaceableRollercoaster.registerFunctions(placeableType)\n    SpecializationUtil.registerFunction(placeableType, "onSharedAnimationFileLoaded" , PlaceableRollercoaster.onSharedAnimationFileLoaded)\n    SpecializationUtil.registerFunction(placeableType, "getCanEnter" , PlaceableRollercoaster.getCanEnter)\n    SpecializationUtil.registerFunction(placeableType, "getFreeSeatIndex" , PlaceableRollercoaster.getFreeSeatIndex)\n    SpecializationUtil.registerFunction(placeableType, "getCanStart" , PlaceableRollercoaster.getCanStart)\n    SpecializationUtil.registerFunction(placeableType, "startRide" , PlaceableRollercoaster.startRide)\n    SpecializationUtil.registerFunction(placeableType, "endRide" , PlaceableRollercoaster.endRide)\n    SpecializationUtil.registerFunction(placeableType, "getAnimation" , PlaceableRollercoaster.getAnimation)\n    SpecializationUtil.registerFunction(placeableType, "setAnimationTime" , PlaceableRollercoaster.setAnimationTime)\n    SpecializationUtil.registerFunction(placeableType, "updateFxModifierValues" , PlaceableRollercoaster.updateFxModifierValues)\n    SpecializationUtil.registerFunction(placeableType, "tryEnterRide" , PlaceableRollercoaster.tryEnterRide)\n    SpecializationUtil.registerFunction(placeableType, "enterRide" , PlaceableRollercoaster.enterRide)\n    SpecializationUtil.registerFunction(placeableType, "exitRide" , PlaceableRollercoaster.exitRide)\n    SpecializationUtil.registerFunction(placeableType, "onUserRemoved" , PlaceableRollercoaster.onUserRemoved)\n    SpecializationUtil.registerFunction(placeableType, "registerRidersChangedListener" , PlaceableRollercoaster.registerRidersChangedListener)\n    SpecializationUtil.registerFunction(placeableType, "unregisterRidersChangedListener" , PlaceableRollercoaster.unregisterRidersChangedListener)\n    SpecializationUtil.registerFunction(placeableType, "getParentComponent" , PlaceableRollercoaster.getParentComponent)\n    SpecializationUtil.registerFunction(placeableType, "passengerCharacterLoaded" , PlaceableRollercoaster.passengerCharacterLoaded)\n    SpecializationUtil.registerFunction(placeableType, "playerTriggerCallback" , PlaceableRollercoaster.playerTriggerCallback)\n    SpecializationUtil.registerFunction(placeableType, "setPlayerTriggerState" , PlaceableRollercoaster.setPlayerTriggerState)\n    SpecializationUtil.registerFunction(placeableType, "getNumRides" , PlaceableRollercoaster.getNumRides)\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"registeroverwrittenfunctions",children:"registerOverwrittenFunctions"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"registerOverwrittenFunctions()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function PlaceableRollercoaster.registerOverwrittenFunctions(placeableType)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "getHotspot" , PlaceableRollercoaster.getHotspot)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "finalizeConstruction" , PlaceableRollercoaster.finalizeConstruction)\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"registersavegamexmlpaths",children:"registerSavegameXMLPaths"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"registerSavegameXMLPaths()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"schema"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"basePath"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function PlaceableRollercoaster.registerSavegameXMLPaths(schema, basePath)\n    schema:register(XMLValueType.INT, basePath .. ".state#index" , "" )\n    schema:register(XMLValueType.FLOAT, basePath .. "#splineTime" , "" )\n    schema:register(XMLValueType.STRING, basePath .. ".player(?)#uniqueUserId" , "" )\n    schema:register(XMLValueType.INT, basePath .. ".player(?)#rideCount" , 0 )\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"registerxmlpaths",children:"registerXMLPaths"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"registerXMLPaths()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"schema"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"basePath"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function PlaceableRollercoaster.registerXMLPaths(schema, basePath)\n    schema:setXMLSpecializationType( "Rollercoaster" )\n\n    schema:register(XMLValueType.NODE_INDEX, basePath .. ".rollercoaster.animation.clip#rootNode" , "Animation root node" )\n    schema:register(XMLValueType.STRING, basePath .. ".rollercoaster.animation.clip#name" , "Animation clip name" )\n    schema:register(XMLValueType.STRING, basePath .. ".rollercoaster.animation.clip#filename" , "Animation filename" )\n    schema:register(XMLValueType.FLOAT, basePath .. ".rollercoaster.animation#speedScale" , "Animation speed scale" )\n\n    schema:register(XMLValueType.NODE_INDEX, basePath .. ".rollercoaster.movingSounds.sound(?)#node" , "" )\n    schema:register(XMLValueType.STRING, basePath .. ".rollercoaster.movingSounds.sound(?)#filename" , "" )\n    schema:register(XMLValueType.FLOAT, basePath .. ".rollercoaster.movingSounds.sound(?)#innerRadius" , "Audio source inner radius" )\n    schema:register(XMLValueType.FLOAT, basePath .. ".rollercoaster.movingSounds.sound(?)#radius" , "Audio source radius" )\n    schema:register(XMLValueType.FLOAT, basePath .. ".rollercoaster.movingSounds.sound(?)#volume" , "Audio source volume" )\n\n    SoundManager.registerSampleXMLPaths(schema, basePath .. ".rollercoaster.sounds" , "driving1" )\n    SoundManager.registerSampleXMLPaths(schema, basePath .. ".rollercoaster.sounds" , "driving2" )\n    SoundManager.registerSampleXMLPaths(schema, basePath .. ".rollercoaster.sounds" , "driving3" )\n    SoundManager.registerSampleXMLPaths(schema, basePath .. ".rollercoaster.sounds" , "driving4" )\n    SoundManager.registerSampleXMLPaths(schema, basePath .. ".rollercoaster.sounds" , "driving5" )\n\n    schema:register(XMLValueType.NODE_INDEX, basePath .. ".rollercoaster.playerTrigger#node" , "Player trigger for entering the ride" )\n\n        schema:register(XMLValueType.NODE_INDEX, basePath .. ".rollercoaster.exitPoints.exitPoint(?)#node" , "Node where players exit the rollercoaster" )\n\n        schema:register(XMLValueType.NODE_INDEX, basePath .. ".rollercoaster.hotspot#linkNode" , "Node where hotspot is linked to" )\n        schema:register(XMLValueType.NODE_INDEX, basePath .. ".rollercoaster.hotspot#teleportNode" , "Node where player is teleported to.Teleporting is only available if this is set" )\n\n            schema:register(XMLValueType.NODE_INDEX, basePath .. ".rollercoaster.carts.cart(?)#node" , "Cart node" )\n            schema:register(XMLValueType.NODE_INDEX, basePath .. ".rollercoaster.carts.cart(?).seat(?)#node" , "Seat reference node to calculate entering distance to" )\n\n            VehicleCamera.registerCameraXMLPaths(schema, basePath .. ".rollercoaster.carts.cart(?).seat(?).camera" )\n            VehicleCharacter.registerCharacterXMLPaths(schema, basePath .. ".rollercoaster.carts.cart(?).seat(?).characterNode" )\n\n            schema:setXMLSpecializationType()\n        end\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"savetoxmlfile",children:"saveToXMLFile"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"saveToXMLFile()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"xmlFile"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"key"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"usedModNames"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function PlaceableRollercoaster:saveToXMLFile(xmlFile, key, usedModNames)\n    local spec = self.spec_rollercoaster\n\n    local i = 0\n    for uniqueUserId, rideCount in pairs(spec.playerRideCounter) do\n        local counterKey = string.format( "%s.player(%d)" , key, i)\n        xmlFile:setValue(counterKey .. "#uniqueUserId" , uniqueUserId)\n        xmlFile:setValue(counterKey .. "#rideCount" , rideCount)\n        i = i + 1\n    end\nend\n\n'})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453(e,n,l){l.d(n,{R:()=>a,x:()=>t});var i=l(96540);const r={},s=i.createContext(r);function a(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);