"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[19348],{28453(n,e,t){t.d(e,{R:()=>l,x:()=>o});var i=t(96540);const s={},r=i.createContext(s);function l(n){const e=i.useContext(r);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:l(n.components),i.createElement(r.Provider,{value:e},n.children)}},97431(n,e,t){t.r(e),t.d(e,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"script/Player/PlayerCamera","title":"PlayerCamera","description":"PlayerCamera","source":"@site/../docs/script/Player/PlayerCamera.md","sourceDirName":"script/Player","slug":"/script/Player/PlayerCamera","permalink":"/FS25-Community-LUADOC/script/Player/PlayerCamera","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"PlayerCCT","permalink":"/FS25-Community-LUADOC/script/Player/PlayerCCT"},"next":{"title":"PlayerInputComponent","permalink":"/FS25-Community-LUADOC/script/Player/PlayerInputComponent"}}');var s=t(74848),r=t(28453);const l={},o=void 0,a={},c=[{value:"PlayerCamera",id:"playercamera",level:2},{value:"calculateLocalDirection",id:"calculatelocaldirection",level:3},{value:"calculateWorldDirection",id:"calculateworlddirection",level:3},{value:"focusOnPlayer",id:"focusonplayer",level:3},{value:"focusOnPosition",id:"focusonposition",level:3},{value:"getCameraPosition",id:"getcameraposition",level:3},{value:"getCurrentZoomDistance",id:"getcurrentzoomdistance",level:3},{value:"getDesiredZoomDistance",id:"getdesiredzoomdistance",level:3},{value:"getFocusPosition",id:"getfocusposition",level:3},{value:"getIsCollisionEnabled",id:"getiscollisionenabled",level:3},{value:"getOffsetY",id:"getoffsety",level:3},{value:"getRotation",id:"getrotation",level:3},{value:"initialise",id:"initialise",level:3},{value:"makeCurrent",id:"makecurrent",level:3},{value:"new",id:"new",level:3},{value:"setCurrentZoomDistance",id:"setcurrentzoomdistance",level:3},{value:"setFocusPosition",id:"setfocusposition",level:3},{value:"setIsCollisionEnabled",id:"setiscollisionenabled",level:3},{value:"setOffsetY",id:"setoffsety",level:3},{value:"setRotation",id:"setrotation",level:3},{value:"toggleThirdPersonMode",id:"togglethirdpersonmode",level:3},{value:"tryApplyViewBobbing",id:"tryapplyviewbobbing",level:3},{value:"updatePosition",id:"updateposition",level:3},{value:"updateRotation",id:"updaterotation",level:3}];function d(n){const e={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h2,{id:"playercamera",children:"PlayerCamera"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Description"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"The interface representing the camera of a player in either third or first person mode."}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Functions"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#calculatelocaldirection",children:"calculateLocalDirection"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#calculateworlddirection",children:"calculateWorldDirection"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#focusonplayer",children:"focusOnPlayer"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#focusonposition",children:"focusOnPosition"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#getcameraposition",children:"getCameraPosition"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#getcurrentzoomdistance",children:"getCurrentZoomDistance"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#getdesiredzoomdistance",children:"getDesiredZoomDistance"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#getfocusposition",children:"getFocusPosition"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#getiscollisionenabled",children:"getIsCollisionEnabled"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#getoffsety",children:"getOffsetY"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#getrotation",children:"getRotation"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#initialise",children:"initialise"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#makecurrent",children:"makeCurrent"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#new",children:"new"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#setcurrentzoomdistance",children:"setCurrentZoomDistance"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#setfocusposition",children:"setFocusPosition"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#setiscollisionenabled",children:"setIsCollisionEnabled"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#setoffsety",children:"setOffsetY"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#setrotation",children:"setRotation"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#togglethirdpersonmode",children:"toggleThirdPersonMode"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#tryapplyviewbobbing",children:"tryApplyViewBobbing"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#updateposition",children:"updatePosition"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#updaterotation",children:"updateRotation"})}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"calculatelocaldirection",children:"calculateLocalDirection"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Description"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"Takes the given world x and z direction and transforms it into local-space around the yaw node."}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"calculateLocalDirection(float directionX, float directionZ)"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"float"}),(0,s.jsx)(e.th,{children:"directionX"}),(0,s.jsx)(e.th,{children:"The x direction."})]})}),(0,s.jsx)(e.tbody,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"float"}),(0,s.jsx)(e.td,{children:"directionZ"}),(0,s.jsx)(e.td,{children:"The z direction."})]})})]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"float"}),(0,s.jsx)(e.th,{children:"localDirectionX"}),(0,s.jsx)(e.th,{children:"The transformed x direction."})]})}),(0,s.jsx)(e.tbody,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"float"}),(0,s.jsx)(e.td,{children:"localDirectionZ"}),(0,s.jsx)(e.td,{children:"The transformed z direction."})]})})]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Code"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-lua",children:"function PlayerCamera:calculateLocalDirection(directionX, directionZ)\n    local localDirectionX, _, localDirectionZ = worldDirectionToLocal( self.yawNode, directionX, 0 , directionZ)\n    return localDirectionX, localDirectionZ\nend\n\n"})}),"\n",(0,s.jsx)(e.h3,{id:"calculateworlddirection",children:"calculateWorldDirection"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Description"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"Takes the given local x and z direction and transforms it into world-space around the yaw node."}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"calculateWorldDirection(float directionX, float directionZ)"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"float"}),(0,s.jsx)(e.th,{children:"directionX"}),(0,s.jsx)(e.th,{children:"The x direction."})]})}),(0,s.jsx)(e.tbody,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"float"}),(0,s.jsx)(e.td,{children:"directionZ"}),(0,s.jsx)(e.td,{children:"The z direction."})]})})]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"float"}),(0,s.jsx)(e.th,{children:"worldDirectionX"}),(0,s.jsx)(e.th,{children:"The transformed x direction."})]})}),(0,s.jsx)(e.tbody,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"float"}),(0,s.jsx)(e.td,{children:"worldDirectionZ"}),(0,s.jsx)(e.td,{children:"The transformed z direction."})]})})]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Code"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-lua",children:"function PlayerCamera:calculateWorldDirection(directionX, directionZ)\n    local worldDirectionX, _, worldDirectionZ = localDirectionToWorld( self.yawNode, directionX, 0 , directionZ)\n    return worldDirectionX, worldDirectionZ\nend\n\n"})}),"\n",(0,s.jsx)(e.h3,{id:"focusonplayer",children:"focusOnPlayer"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Description"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"Focuses the camera on the player, handling the positioning based on if the player is in first person mode or not."}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"focusOnPlayer()"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Code"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-lua",children:"function PlayerCamera:focusOnPlayer()\n\n    -- Get the player's current position.\n    local currentX, currentY, currentZ = self.player:getGraphicalPosition()\n    self:focusOnPosition(currentX, currentY, currentZ)\nend\n\n"})}),"\n",(0,s.jsx)(e.h3,{id:"focusonposition",children:"focusOnPosition"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Description"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"Positions the camera's yaw node to the given position, using the current offsetY."}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"focusOnPosition(float x, float y, float z)"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"float"}),(0,s.jsx)(e.th,{children:"x"}),(0,s.jsx)(e.th,{children:"The x position."})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"float"}),(0,s.jsx)(e.td,{children:"y"}),(0,s.jsx)(e.td,{children:"The y position."})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"float"}),(0,s.jsx)(e.td,{children:"z"}),(0,s.jsx)(e.td,{children:"The z position."})]})]})]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Code"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-lua",children:"function PlayerCamera:focusOnPosition(x, y, z)\n    local baseOffsetY = self:getBaseOffsetY()\n    self:setFocusPosition(x, y + self.offsetY + baseOffsetY, z)\nend\n\n"})}),"\n",(0,s.jsx)(e.h3,{id:"getcameraposition",children:"getCameraPosition"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Description"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"Gets the position of the camera node itself (not the yaw node)."}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"getCameraPosition()"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"float"}),(0,s.jsx)(e.th,{children:"x"}),(0,s.jsx)(e.th,{children:"The x position."})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"float"}),(0,s.jsx)(e.td,{children:"y"}),(0,s.jsx)(e.td,{children:"The y position."})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"float"}),(0,s.jsx)(e.td,{children:"z"}),(0,s.jsx)(e.td,{children:"The z position."})]})]})]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Code"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-lua",children:"function PlayerCamera:getCameraPosition()\n    return getWorldTranslation( self.cameraRootNode)\nend\n\n"})}),"\n",(0,s.jsx)(e.h3,{id:"getcurrentzoomdistance",children:"getCurrentZoomDistance"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Description"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"Gets the current zoom distance of the camera."}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"getCurrentZoomDistance()"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(e.table,{children:(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"float"}),(0,s.jsx)(e.th,{children:"zoomDistance"}),(0,s.jsx)(e.th,{children:"The current zoom distance of the camera."})]})})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Code"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-lua",children:"function PlayerCamera:getCurrentZoomDistance()\n    return self.currentZoomDistance\nend\n\n"})}),"\n",(0,s.jsx)(e.h3,{id:"getdesiredzoomdistance",children:"getDesiredZoomDistance"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Description"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"Gets the current zoom level of the camera. This is 0 if the player is in first person mode."}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"getDesiredZoomDistance()"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(e.table,{children:(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"float"}),(0,s.jsx)(e.th,{children:"desiredZoomDistance"}),(0,s.jsx)(e.th,{children:"The current zoom distance of the camera."})]})})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Code"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-lua",children:"function PlayerCamera:getDesiredZoomDistance()\n    return self.isFirstPerson and 0 or self.desiredZoomDistance\nend\n\n"})}),"\n",(0,s.jsx)(e.h3,{id:"getfocusposition",children:"getFocusPosition"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Description"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"Gets the current position of the camera's yaw node, which is the position the camera is looking at."}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"getFocusPosition()"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"float"}),(0,s.jsx)(e.th,{children:"x"}),(0,s.jsx)(e.th,{children:"The x position."})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"float"}),(0,s.jsx)(e.td,{children:"y"}),(0,s.jsx)(e.td,{children:"The y position."})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"float"}),(0,s.jsx)(e.td,{children:"z"}),(0,s.jsx)(e.td,{children:"The z position."})]})]})]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Code"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-lua",children:"function PlayerCamera:getFocusPosition()\n    return getWorldTranslation( self.yawNode)\nend\n\n"})}),"\n",(0,s.jsx)(e.h3,{id:"getiscollisionenabled",children:"getIsCollisionEnabled"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Description"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"Gets if collision is enabled for this camera. This will be false if the player is in first person mode, even if the\nvariable itself is true."}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"getIsCollisionEnabled()"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(e.table,{children:(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"float"}),(0,s.jsx)(e.th,{children:"isCollisionEnabled"}),(0,s.jsx)(e.th,{children:"True if the camera is in third person and collision is enabled; otherwise false."})]})})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Code"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-lua",children:"function PlayerCamera:getIsCollisionEnabled()\n    return self.isCollisionEnabled\nend\n\n"})}),"\n",(0,s.jsx)(e.h3,{id:"getoffsety",children:"getOffsetY"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Description"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"Returns the current y offset of the camera. This is applied alongside the offset from the ground, to fine-adjust for\nthings like swimming."}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"getOffsetY()"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(e.table,{children:(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"float"}),(0,s.jsx)(e.th,{children:"offsetY"}),(0,s.jsx)(e.th,{children:"The current y offset of the camera."})]})})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Code"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-lua",children:"function PlayerCamera:getOffsetY()\n    return self.offsetY\nend\n\n"})}),"\n",(0,s.jsx)(e.h3,{id:"getrotation",children:"getRotation"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Description"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"Gets the rotation of the camera. This function avoids the flipping issue of the engine."}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"getRotation()"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"float"}),(0,s.jsx)(e.th,{children:"pitch"}),(0,s.jsx)(e.th,{children:"The pitch of the camera."})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"float"}),(0,s.jsx)(e.td,{children:"yaw"}),(0,s.jsx)(e.td,{children:"The yaw of the camera."})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"float"}),(0,s.jsx)(e.td,{children:"roll"}),(0,s.jsx)(e.td,{children:"The roll of the camera."})]})]})]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Code"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-lua",children:"function PlayerCamera:getRotation()\n\n    -- Calculate and return the pitch, yaw, and roll from the camera.\n    local cameraLookX, cameraLookY, cameraLookZ = localDirectionToWorld( self.cameraRootNode, 0 , 0 , - 1 )\n    local pitch, yaw = MathUtil.directionToPitchYaw(cameraLookX, cameraLookY, cameraLookZ)\n    local _, _, roll = getRotation( self.cameraRootNode)\n    return pitch, yaw, roll\nend\n\n"})}),"\n",(0,s.jsx)(e.h3,{id:"initialise",children:"initialise"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Description"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"Fired when the player loads for the first time. Creates and sets up the required nodes in the scene."}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"initialise()"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Code"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-lua",children:"function PlayerCamera:initialise()\n\n    -- Create the camera nodes.\n    self:initialiseCameraNodes()\nend\n\n"})}),"\n",(0,s.jsx)(e.h3,{id:"makecurrent",children:"makeCurrent"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Description"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"Sets this camera as the scene's main camera."}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"makeCurrent()"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Code"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-lua",children:"function PlayerCamera:makeCurrent()\n    if self.isFirstPerson then\n        g_cameraManager:setActiveCamera( self.firstPersonCamera)\n    elseif self.isInConversation then\n            g_cameraManager:setActiveCamera( self.thirdPersonConversationCamera)\n        else\n                g_cameraManager:setActiveCamera( self.thirdPersonCamera)\n            end\n        end\n\n"})}),"\n",(0,s.jsx)(e.h3,{id:"new",children:"new"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Description"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"Creates a new camera for the given player."}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"new(Player player)"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(e.table,{children:(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"Player"}),(0,s.jsx)(e.th,{children:"player"}),(0,s.jsx)(e.th,{children:"The player who owns this camera."})]})})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(e.table,{children:(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"Player"}),(0,s.jsx)(e.th,{children:"instance"}),(0,s.jsx)(e.th,{children:"The created instance."})]})})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Code"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-lua",children:"function PlayerCamera.new(player)\n\n    -- Create the instance.\n    local self = setmetatable( { } , PlayerCamera _mt)\n\n    -- The player who owns this camera.\n    self.player = player\n\n    -- The current mode of the camera.\n    self.isFirstPerson = true\n\n    -- Is true if the player cannot switch between third and first, and can only use the current perspective.\n        self.isSwitchingLocked = false\n\n        -- The collision enabled flag, determining if the camera should be able to clip through objects.\n            self.isCollisionEnabled = true\n\n            -- The collision mask used when the player is in no-clip mode.\n            self.noClipCollisionMask = PlayerCamera.COLLISION_MASK\n\n            -- The distance between the camera and the object behind it, from the raycast.Nil if no object is behind the camera in range.\n                self.lastCollisionDistance = nil\n\n                -- The distance from the collided object that the camera should be.\n                self.lastDistanceOffset = nil\n\n                -- The nodes used for yaw and pitch for the camera.\n                    self.yawNode = nil\n                    self.pitchNode = nil\n\n                    -- The actual camera object.\n                    self.cameraRootNode = nil\n\n                    -- The y offset.\n                    self.offsetY = 0.0\n\n                    -- The transform of the camera when a target override transition is started.\n                    self.startPositionX, self.startPositionY, self.startPositionZ = nil , nil , nil\n                    self.startRotationX, self.startRotationY, self.startRotationZ, self.startRotationW = nil , nil , nil , nil\n\n                    -- The target transform of the override transition.\n                    self.targetPositionX, self.targetPositionY, self.targetPositionZ = nil , nil , nil\n                    self.targetRotationX, self.targetRotationY, self.targetRotationZ, self.targetRotationW = nil , nil , nil , nil\n\n                    -- The start time and duration of the override transition.\n                    self.overrideTransitionStartTime = nil\n                    self.overrideTransitionDuration = nil\n\n                    -- The last bob offsets.\n                    self.lastBobOffsetX = 0.0\n                    self.lastBobOffsetY = 0.0\n\n                    -- The maximum zoom distance that the player would like to have.\n                    self.desiredZoomDistance = PlayerCamera.DEFAULT_ZOOM\n\n                    -- The zoom distance of the camera currently.\n                    self.currentZoomDistance = self.desiredZoomDistance\n\n                    g_messageCenter:subscribe(MessageType.SETTING_CHANGED[GameSettings.SETTING.FOV_Y_PLAYER_FIRST_PERSON], self.onFovySettingChanged, self )\n                    g_messageCenter:subscribe(MessageType.SETTING_CHANGED[GameSettings.SETTING.FOV_Y_PLAYER_THIRD_PERSON], self.onFovySettingChanged, self )\n\n                    -- Create and return the instance.\n                    return self\n                end\n\n"})}),"\n",(0,s.jsx)(e.h3,{id:"setcurrentzoomdistance",children:"setCurrentZoomDistance"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Description"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"Sets the current zoom distance, ensuring it does not go further than the desired distance and positioning the camera."}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"setCurrentZoomDistance(float zoomDistance, boolean? isForced)"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"float"}),(0,s.jsx)(e.th,{children:"zoomDistance"}),(0,s.jsx)(e.th,{children:"The new zoomDistance to use."})]})}),(0,s.jsx)(e.tbody,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"boolean?"}),(0,s.jsx)(e.td,{children:"isForced"}),(0,s.jsx)(e.td,{children:"If true, will not clamp the given value."})]})})]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Code"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-lua",children:"function PlayerCamera:setCurrentZoomDistance(zoomDistance, isForced)\n    self.currentZoomDistance = zoomDistance\n    setTranslation( self.cameraRootNode, 0 , 0 , - self.currentZoomDistance)\nend\n\n"})}),"\n",(0,s.jsx)(e.h3,{id:"setfocusposition",children:"setFocusPosition"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Description"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"Sets the position of the yaw node to the given position."}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"setFocusPosition(float x, float y, float z)"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"float"}),(0,s.jsx)(e.th,{children:"x"}),(0,s.jsx)(e.th,{children:"The x position."})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"float"}),(0,s.jsx)(e.td,{children:"y"}),(0,s.jsx)(e.td,{children:"The y position."})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"float"}),(0,s.jsx)(e.td,{children:"z"}),(0,s.jsx)(e.td,{children:"The z position."})]})]})]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Code"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-lua",children:"function PlayerCamera:setFocusPosition(x, y, z)\n    setWorldTranslation( self.yawNode, x, y, z)\nend\n\n"})}),"\n",(0,s.jsx)(e.h3,{id:"setiscollisionenabled",children:"setIsCollisionEnabled"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Description"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"Sets the collision enabled value to the given value."}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"setIsCollisionEnabled(boolean isCollisionEnabled)"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(e.table,{children:(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"boolean"}),(0,s.jsx)(e.th,{children:"isCollisionEnabled"}),(0,s.jsx)(e.th,{children:"The new value to use."})]})})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Code"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-lua",children:"function PlayerCamera:setIsCollisionEnabled(isCollisionEnabled)\n    self.isCollisionEnabled = isCollisionEnabled\nend\n\n"})}),"\n",(0,s.jsx)(e.h3,{id:"setoffsety",children:"setOffsetY"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Description"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"Sets the current y offset to the given value. Defaults to 0."}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"setOffsetY(float offsetY)"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(e.table,{children:(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"float"}),(0,s.jsx)(e.th,{children:"offsetY"}),(0,s.jsx)(e.th,{children:"The new y offset to use. If this is nil, uses 0 instead."})]})})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Code"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-lua",children:"function PlayerCamera:setOffsetY(offsetY)\n    self.offsetY = offsetY or 0\nend\n\n"})}),"\n",(0,s.jsx)(e.h3,{id:"setrotation",children:"setRotation"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Description"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"Sets the rotation of the camera to the given rotation."}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"setRotation(float pitch, float yaw, float roll)"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"float"}),(0,s.jsx)(e.th,{children:"pitch"}),(0,s.jsx)(e.th,{children:"The pitch of the camera."})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"float"}),(0,s.jsx)(e.td,{children:"yaw"}),(0,s.jsx)(e.td,{children:"The yaw of the camera."})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"float"}),(0,s.jsx)(e.td,{children:"roll"}),(0,s.jsx)(e.td,{children:"The roll of the camera."})]})]})]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Code"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-lua",children:"function PlayerCamera:setRotation(pitch, yaw, roll)\n    setRotation( self.pitchNode, pitch or 0 , 0 , 0 )\n    setRotation( self.yawNode, 0 , yaw or 0 , 0 )\n    setRotation( self.cameraRootNode, 0 , math.pi, roll or 0 )\nend\n\n"})}),"\n",(0,s.jsx)(e.h3,{id:"togglethirdpersonmode",children:"toggleThirdPersonMode"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Description"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"Handles toggling between first person and third person modes, including setting the camera position."}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"toggleThirdPersonMode()"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Code"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-lua",children:"function PlayerCamera:toggleThirdPersonMode()\n    self:switchToPerspective( not self.isFirstPerson)\nend\n\n"})}),"\n",(0,s.jsx)(e.h3,{id:"tryapplyviewbobbing",children:"tryApplyViewBobbing"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Description"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"Applies the view bobbing to the camera position, as long as the player is in first person and their CAMERA_BOBBING\nsetting is on."}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"tryApplyViewBobbing(float dt)"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(e.table,{children:(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"float"}),(0,s.jsx)(e.th,{children:"dt"}),(0,s.jsx)(e.th,{children:"Delta time in ms."})]})})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Code"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-lua",children:"function PlayerCamera:tryApplyViewBobbing(dt)\n\n    -- If the player is in third person or their setting for view bobbing is off, reset the camera position.\n        if not self.isFirstPerson then\n            setTranslation( self.cameraRootNode, 0.0 , 0.0 , - self.currentZoomDistance)\n            return\n        end\n\n        local doCameraBobbing = g_gameSettings:getValue(GameSettings.SETTING.CAMERA_BOBBING)\n        if not doCameraBobbing then\n            setTranslation( self.cameraRootNode, 0.0 , 0.0 , 0.0 )\n            return\n        end\n\n        -- Avoid view bobbing when the player can move very fast.\n        if self.player.mover.currentSpeed > 10 then\n            return\n        end\n\n        -- Set the target bob offset, defaulting to 0.\n        local targetBobOffsetX = 0.0\n        local targetBobOffsetY = 0.0\n\n        -- Set the roll, defaulting to 0.\n        local bobRoll = 0\n\n        -- If the player is moving and is on the ground, calculate the oscillating bob offset.\n        local isMoving = math.abs( self.player.mover.currentSpeed) > = PlayerMover.SMALL_SPEED_THRESHOLD\n        if isMoving and self.player.mover.isGrounded then\n\n            -- Round the speed so it does not cause jitter.\n            local roundedSpeed = MathUtil.round( self.player.mover.currentSpeed)\n\n            -- Create a random number to shift the x oscillation by when calculating the y oscillation.This makes the up/down bobbing a bit more bumpy and natural.\n            local randomOffsetX = math.random( - self.BOBBING_OSCILLATION_RANDOMNESS, self.BOBBING_OSCILLATION_RANDOMNESS)\n\n            -- The x oscillation is simply the sine of the time(in seconds) multiplied by the random speed.\n            local oscillationX = math.sin((g_ time * 0.001 ) * roundedSpeed)\n\n            -- The y oscillation is calculated from the x oscillation, with a 90 degree lead so the bobbing makes an 'n' shape.A random offset is added to make it more natural.\n            local oscillationY = math.sin((oscillationX + randomOffsetX + 0.5 ) * math.pi)\n\n            -- Set the roll based on the x oscillation.\n            bobRoll = oscillationX * PlayerCamera.ROLL_BOBBING\n\n            -- Set the target bob offset.\n            targetBobOffsetX = oscillationX * self.HORIZONTAL_BOBBING\n            targetBobOffsetY = oscillationY * self.VERTICAL_BOBBING\n        end\n\n        -- Create the bob offset for each axis.\n            local bobOffsetX, bobOffsetY\n\n            -- Calculate the maximum possible movements on each axis.\n            local maxBobMovementX = ( self.HORIZONTAL_BOBBING * self.MAXIMUM_BOBBING_OSCILLATION)\n            local maxBobMovementY = ( self.VERTICAL_BOBBING * self.MAXIMUM_BOBBING_OSCILLATION)\n\n            -- Calculate the most amount of bobbing the camera should make in this frame, on the x axis.\n            if self.lastBobOffsetX < targetBobOffsetX then\n                bobOffsetX = math.min( self.lastBobOffsetX + maxBobMovementX, targetBobOffsetX)\n            else\n                    bobOffsetX = math.max( self.lastBobOffsetX - maxBobMovementX, targetBobOffsetX)\n                end\n\n                -- Do the same for the y axis.\n                    if self.lastBobOffsetY < targetBobOffsetY then\n                        bobOffsetY = math.min( self.lastBobOffsetY + maxBobMovementY, targetBobOffsetY)\n                    else\n                            bobOffsetY = math.max( self.lastBobOffsetY - maxBobMovementY, targetBobOffsetY)\n                        end\n\n                        -- Apply the view bobbing to the camera.\n                        setTranslation( self.cameraRootNode, bobOffsetX, bobOffsetY, 0.0 )\n                        local currentPitch, currentYaw = self:getRotation()\n                        self:setRotation(currentPitch, currentYaw, bobRoll)\n\n                        -- Save the old bob offset.\n                        self.lastBobOffsetX = bobOffsetX\n                        self.lastBobOffsetY = bobOffsetY\n                    end\n\n"})}),"\n",(0,s.jsx)(e.h3,{id:"updateposition",children:"updatePosition"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Description"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"Updates the camera's position so that it follows the player, also applying view bobbing if needed."}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"updatePosition(float dt)"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(e.table,{children:(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"float"}),(0,s.jsx)(e.th,{children:"dt"}),(0,s.jsx)(e.th,{children:"Delta time in ms."})]})})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Code"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-lua",children:"function PlayerCamera:updatePosition(dt)\n\n    -- If there's a target override, update for that and do nothing else.\n        if self:getHasOverriddenTarget() then\n            self:updatePositionFromTarget()\n            return\n        end\n\n        -- Move the camera to the player's position.\n        self:focusOnPlayer()\n\n        -- Try apply the view bobbing.\n        self:tryApplyViewBobbing(dt)\n\n        -- Try apply the zoom logic, which includes raycasting to find the best distance.\n        self:applyZoom(dt)\n    end\n\n"})}),"\n",(0,s.jsx)(e.h3,{id:"updaterotation",children:"updateRotation"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Description"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"Updates the rotation of the camera based on player input."}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"updateRotation(float dt)"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(e.table,{children:(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"float"}),(0,s.jsx)(e.th,{children:"dt"}),(0,s.jsx)(e.th,{children:"Delta time in ms."})]})})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Code"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-lua",children:"function PlayerCamera:updateRotation(dt)\n\n    -- If there's a target override, update for that and do nothing else.\n        if self:getHasOverriddenTarget() then\n            self:updateRotationFromTarget()\n            return\n        end\n\n        -- Calculate how much of a rotation to make this frame based on the player's input and the camera sensitivity.\n        local cameraSensitivity = g_gameSettings:getValue(GameSettings.SETTING.CAMERA_SENSITIVITY)\n        local rotationDeltaX = self.player.inputComponent.cameraRotationX * cameraSensitivity\n        local rotationDeltaY = - self.player.inputComponent.cameraRotationY * cameraSensitivity\n\n        -- Get the current rotation of the camera.\n        local cameraPitch, cameraYaw, cameraRoll = self:getRotation()\n\n        -- Add the deltas, ensuring the pitch is limited.\n        cameraPitch = math.clamp(cameraPitch + rotationDeltaX, PlayerCamera.LOWEST_PITCH, PlayerCamera.HIGHEST_PITCH)\n        cameraYaw = MathUtil.getValidLimit(cameraYaw + rotationDeltaY)\n\n        -- Set the rotation of the camera.\n        self:setRotation(cameraPitch, cameraYaw, cameraRoll)\n    end\n\n"})})]})}function h(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}}}]);