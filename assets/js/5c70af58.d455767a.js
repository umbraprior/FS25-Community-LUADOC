"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[22116],{28453(e,n,s){s.d(n,{R:()=>i,x:()=>o});var l=s(96540);const t={},r=l.createContext(t);function i(e){const n=l.useContext(r);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),l.createElement(r.Provider,{value:n},e.children)}},71198(e,n,s){s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>d});const l=JSON.parse('{"id":"script/GUI/IngameMap","title":"IngameMap","description":"IngameMap","source":"@site/../docs/script/GUI/IngameMap.md","sourceDirName":"script/GUI","slug":"/script/GUI/IngameMap","permalink":"/FS25-Community-LUADOC/script/GUI/IngameMap","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"InfoDisplayKeyValueBoxMobile","permalink":"/FS25-Community-LUADOC/script/GUI/InfoDisplayKeyValueBoxMobile"},"next":{"title":"IngameMapElement","permalink":"/FS25-Community-LUADOC/script/GUI/IngameMapElement"}}');var t=s(74848),r=s(28453);const i={},o=void 0,a={},d=[{value:"IngameMap",id:"ingamemap",level:2},{value:"addMapHotspot",id:"addmaphotspot",level:3},{value:"createBackground",id:"createbackground",level:3},{value:"createComponents",id:"createcomponents",level:3},{value:"createToggleMapSizeGlyph",id:"createtogglemapsizeglyph",level:3},{value:"delete",id:"delete",level:3},{value:"drawHotspot",id:"drawhotspot",level:3},{value:"drawLatencyToServer",id:"drawlatencytoserver",level:3},{value:"drawPlayersCoordinates",id:"drawplayerscoordinates",level:3},{value:"getBackgroundPosition",id:"getbackgroundposition",level:3},{value:"loadMap",id:"loadmap",level:3},{value:"new",id:"new",level:3},{value:"removeMapHotspot",id:"removemaphotspot",level:3},{value:"resetSettings",id:"resetsettings",level:3},{value:"setAllowToggle",id:"setallowtoggle",level:3},{value:"setFullscreen",id:"setfullscreen",level:3},{value:"setScale",id:"setscale",level:3},{value:"setSelectedHotspot",id:"setselectedhotspot",level:3},{value:"setWorldSize",id:"setworldsize",level:3},{value:"storeScaledValues",id:"storescaledvalues",level:3},{value:"toggleSize",id:"togglesize",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"ingamemap",children:"IngameMap"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"In-game map display element.\nThis class is used to display the game map both in the HUD as well as in the in-game menu."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parent"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"?version=script&category=43&class=465",children:"HUDElement"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Functions"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#addmaphotspot",children:"addMapHotspot"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#createbackground",children:"createBackground"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#createcomponents",children:"createComponents"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#createtogglemapsizeglyph",children:"createToggleMapSizeGlyph"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#delete",children:"delete"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#drawhotspot",children:"drawHotspot"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#drawlatencytoserver",children:"drawLatencyToServer"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#drawplayerscoordinates",children:"drawPlayersCoordinates"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#getbackgroundposition",children:"getBackgroundPosition"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#loadmap",children:"loadMap"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#new",children:"new"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#removemaphotspot",children:"removeMapHotspot"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#resetsettings",children:"resetSettings"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#setallowtoggle",children:"setAllowToggle"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#setfullscreen",children:"setFullscreen"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#setscale",children:"setScale"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#setselectedhotspot",children:"setSelectedHotspot"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#setworldsize",children:"setWorldSize"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#storescaledvalues",children:"storeScaledValues"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#togglesize",children:"toggleSize"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"addmaphotspot",children:"addMapHotspot"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"addMapHotspot()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"mapHotspot"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function IngameMap:addMapHotspot(mapHotspot)\n    table.addElement( self.hotspots, mapHotspot)\n\n    self:sortHotspots()\n\n    self:resetHotspotSorting()\n\n    mapHotspot:addRenderStateChangedListener( self )\n\n    return mapHotspot\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"createbackground",children:"createBackground"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Create the empty background overlay."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"createBackground()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function IngameMap:createBackground()\n    local width, height = getNormalizedScreenValues( unpack( IngameMap.SIZE.SELF))\n    local posX, posY = self:getBackgroundPosition()\n\n    local overlay = g_overlayManager:createOverlay( IngameMap.SLICE_IDS.BACKGROUND_ROUND, posX, posY, width, height)\n    overlay:setColor( 0 , 0 , 0 , 0.75 )\n\n    return overlay\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"createcomponents",children:"createComponents"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Create required display components."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"createComponents()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function IngameMap:createComponents()\n    local baseX, baseY = self:getPosition()\n    local width, height = self:getWidth(), self:getHeight()\n\n    self:createToggleMapSizeGlyph(baseX, baseY, width, height)\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"createtogglemapsizeglyph",children:"createToggleMapSizeGlyph"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Create the input glyph for map size toggling."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"createToggleMapSizeGlyph()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"baseX"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"baseY"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"baseWidth"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"baseHeight"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function IngameMap:createToggleMapSizeGlyph(baseX, baseY, baseWidth, baseHeight)\n    local width, height = getNormalizedScreenValues( unpack( IngameMap.SIZE.INPUT_ICON))\n    local offX, offY = getNormalizedScreenValues( unpack( IngameMap.POSITION.INPUT_ICON))\n\n    local element = InputGlyphElement.new(g_inputDisplayManager, width, height)\n    local posX, posY = baseX + offX, baseY + offY\n\n    element:setPosition(posX, posY)\n    element:setKeyboardGlyphColor( IngameMap.COLOR.INPUT_ICON)\n    element:setAction(InputAction.TOGGLE_MAP_SIZE)\n\n    self.toggleMapSizeGlyph = element\n    self:addChild(element)\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"delete",children:"delete"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Delete this element and all of its components."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"delete()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function IngameMap:delete()\n    g_inputBinding:removeActionEventsByTarget( self )\n\n    self.mapElement:delete()\n    self:setSelectedHotspot( nil )\n\n    for _, layout in ipairs( self.layouts) do\n        layout:delete()\n    end\n\n    IngameMap:superClass().delete( self )\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"drawhotspot",children:"drawHotspot"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Draw a single hotspot on the map."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"drawHotspot()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"hotspot"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"smallVersion"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"scale"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"doDebug"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function IngameMap:drawHotspot(hotspot, smallVersion, scale, doDebug)\n    if hotspot = = nil then\n        return\n    end\n\n    local layout = self.layout\n    local worldX, worldZ = hotspot:getWorldPosition()\n    local rotation = hotspot:getWorldRotation()\n\n    local objectX = (worldX + self.worldCenterOffsetX) / self.worldSizeX * self.mapExtensionScaleFactor + self.mapExtensionOffsetX\n    local objectZ = (worldZ + self.worldCenterOffsetZ) / self.worldSizeZ * self.mapExtensionScaleFactor + self.mapExtensionOffsetZ\n\n    if hotspot.scale ~ = scale then\n        hotspot:setScale(scale)\n    end\n\n    local width, height = hotspot:getDimension()\n    local x, y, yRot, visible = layout:getMapObjectPosition(objectX, objectZ, width, height, rotation, hotspot:getIsPersistent())\n\n    if not visible then\n        return\n    end\n\n    -- extra clipping for mobile version\n        if self.clipHotspots and self.clipX1 ~ = nil then\n            if x < self.clipX1 or(x + width) > self.clipX2 or y < self.clipY1 or(y + height) > self.clipY2 then\n                return\n            end\n        end\n\n        hotspot.lastScreenPositionX = x\n        hotspot.lastScreenPositionY = y\n        hotspot.lastScreenRotation = yRot\n        hotspot.lastScreenLayout = layout\n\n        hotspot:render(x, y, yRot, smallVersion)\n    end\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"drawlatencytoserver",children:"drawLatencyToServer"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Draw current latency to server as text."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"drawLatencyToServer()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function IngameMap:drawLatencyToServer()\n    local missionDynamicInfo = g_currentMission.missionDynamicInfo\n    if g_client ~ = nil and g_client.currentLatency ~ = nil and missionDynamicInfo.isMultiplayer and missionDynamicInfo.isClient then\n        local color\n        if g_client.currentLatency < = 50 then\n            color = IngameMap.COLOR.LATENCY_GOOD\n        elseif g_client.currentLatency < 100 then\n                color = IngameMap.COLOR.LATENCY_MEDIUM\n            else\n                    color = IngameMap.COLOR.LATENCY_BAD\n                end\n\n                self.layout:drawLatency( string.format( "%dms" , math.max(g_client.currentLatency, 10 )), color)\n            end\n        end\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"drawplayerscoordinates",children:"drawPlayersCoordinates"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Draw the player's current coordinates as text."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"drawPlayersCoordinates()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function IngameMap:drawPlayersCoordinates()\n    local rotation = math.deg( math.abs( self.playerRotation - math.pi))\n    local renderString = string.format( "%.1f\xb0, %d, %d" , rotation, self.normalizedPlayerPosX * self.worldSizeX, self.normalizedPlayerPosZ * self.worldSizeZ)\n\n    self.layout:drawCoordinates(renderString)\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"getbackgroundposition",children:"getBackgroundPosition"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Get the base position of the entire element."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"getBackgroundPosition()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function IngameMap:getBackgroundPosition()\n    return g_safeFrameOffsetX, g_safeFrameOffsetY\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"loadmap",children:"loadMap"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"loadMap()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"filename"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"worldSizeX"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"worldSizeZ"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"fieldColor"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"grassFieldColor"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function IngameMap:loadMap(filename, worldSizeX, worldSizeZ, fieldColor, grassFieldColor)\n    self.mapElement:delete() -- will also delete the wrapped Overlay\n\n    self:setWorldSize(worldSizeX, worldSizeZ)\n\n    self.mapOverlay = Overlay.new(filename, 0 , 0 , 1 , 1 )\n\n    self.mapElement = HUDElement.new( self.mapOverlay)\n    self:addChild( self.mapElement)\n\n    self:setScale( self.uiScale)\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"new",children:"new"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Create a new instance of IngameMap."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"new(table? customMt)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"table?"}),(0,t.jsx)(n.th,{children:"customMt"}),(0,t.jsx)(n.th,{children:"custom meta table"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"table?"}),(0,t.jsx)(n.th,{children:"self"}),(0,t.jsx)(n.th,{children:"IngameMap instance"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function IngameMap.new(customMt)\n    local self = IngameMap:superClass().new( nil , nil , customMt or IngameMap _mt)\n    self.overlay = self:createBackground()\n\n    self.uiScale = 1.0\n\n    self.isVisible = true\n    self.clipHotspots = false\n\n    self.fullScreenLayout = IngameMapLayoutFullscreen.new()\n    self.layouts = {\n    IngameMapLayoutNone.new(),\n    IngameMapLayoutCircle.new(),\n    IngameMapLayoutSquare.new(),\n    IngameMapLayoutSquareLarge.new(),\n    self.fullScreenLayout,\n    }\n    self.state = 1\n    self.numToggleStates = 4\n    self.layout = self.layouts[ self.state]\n\n    self.mapOverlay = Overlay.new( nil , 0 , 0 , 1 , 1 ) -- null-object, obsoletes defensive checks\n    self.mapElement = HUDElement.new( self.mapOverlay) -- null-object\n\n    self:createComponents()\n    for _, layout in ipairs( self.layouts) do\n        layout:createComponents( self )\n    end\n\n    local function setDefaultValue(filter, category)\n        filter[category] = not Utils.isBitSet(g_gameSettings:getValue(GameSettings.SETTING.INGAME_MAP_FILTER), category)\n    end\n\n    self.filter = { }\n    setDefaultValue( self.filter, MapHotspot.CATEGORY_FIELD)\n    setDefaultValue( self.filter, MapHotspot.CATEGORY_ANIMAL)\n    setDefaultValue( self.filter, MapHotspot.CATEGORY_MISSION)\n    setDefaultValue( self.filter, MapHotspot.CATEGORY_TOUR)\n    setDefaultValue( self.filter, MapHotspot.CATEGORY_STEERABLE)\n    setDefaultValue( self.filter, MapHotspot.CATEGORY_COMBINE)\n    setDefaultValue( self.filter, MapHotspot.CATEGORY_TRAILER)\n    setDefaultValue( self.filter, MapHotspot.CATEGORY_TOOL)\n    setDefaultValue( self.filter, MapHotspot.CATEGORY_UNLOADING)\n    setDefaultValue( self.filter, MapHotspot.CATEGORY_LOADING)\n    setDefaultValue( self.filter, MapHotspot.CATEGORY_PRODUCTION)\n    setDefaultValue( self.filter, MapHotspot.CATEGORY_OTHER)\n    setDefaultValue( self.filter, MapHotspot.CATEGORY_SHOP)\n    setDefaultValue( self.filter, MapHotspot.CATEGORY_AI)\n    setDefaultValue( self.filter, MapHotspot.CATEGORY_PLAYER)\n\n    self.currentFilter = self.filter\n\n    self:setWorldSize( 2048 , 2048 )\n\n    self.hotspots = { }\n    self.selectedHotspot = nil\n\n    self.mapExtensionOffsetX = 0.25\n    self.mapExtensionOffsetZ = 0.25\n    self.mapExtensionScaleFactor = 0.5\n\n    self.allowToggle = true\n\n    self.hotspotsDirty = true\n    self.hotspotsRegular = { }\n    self.hotspotsRenderLast = { }\n    self.hotspotsPersistent = { }\n    self.hotspotsPersistentRenderLast = { }\n    self.hotspotsPostUpdate = { }\n\n    self.topDownCamera = nil -- set by screen views which use a top down view, used for map position update\n\n        return self\n    end\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"removemaphotspot",children:"removeMapHotspot"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"removeMapHotspot()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"mapHotspot"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function IngameMap:removeMapHotspot(mapHotspot)\n    if mapHotspot ~ = nil then\n        table.removeElement( self.hotspots, mapHotspot)\n\n        if self.selectedHotspot = = mapHotspot then\n            self:setSelectedHotspot( nil )\n        end\n\n        if g_currentMission ~ = nil then\n            if g_currentMission.currentMapTargetHotspot = = mapHotspot then\n                g_currentMission:setMapTargetHotspot( nil )\n            end\n        end\n\n        mapHotspot:removeRenderStateChangedListener( self )\n\n        self:resetHotspotSorting()\n    end\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"resetsettings",children:"resetSettings"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"resetSettings()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function IngameMap:resetSettings()\n    if self.overlay = = nil then\n        return -- instance has been deleted, ignore reset\n    end\n\n    -- self:setScale(self.uiScale) -- resets scaled values\n\n    -- local baseX, baseY = self:getBackgroundPosition()\n    -- self:setPosition(baseX + self.mapOffsetX, baseY + self.mapOffsetY)\n    -- self:setSize(self.mapWidth, self.mapHeight)\n\n    self:setSelectedHotspot( nil )\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"setallowtoggle",children:"setAllowToggle"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"setAllowToggle()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"isAllowed"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function IngameMap:setAllowToggle(isAllowed)\n    self.allowToggle = isAllowed\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"setfullscreen",children:"setFullscreen"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Set full-screen mode (for map overview) without affecting the mini-map state."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"setFullscreen()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"isFullscreen"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function IngameMap:setFullscreen(isFullscreen)\n    if self.isFullscreen = = isFullscreen then\n        return\n    end\n\n    self.isFullscreen = isFullscreen\n\n    local newLayout = self.layouts[ self.state]\n    if isFullscreen then\n        newLayout = self.fullScreenLayout\n    end\n\n    self:setLayout(newLayout)\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"setscale",children:"setScale"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Set this element's scale."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"setScale(float uiScale)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"float"}),(0,t.jsx)(n.th,{children:"uiScale"}),(0,t.jsx)(n.th,{children:"Current UI scale applied to both width and height of elements"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function IngameMap:setScale(uiScale)\n    IngameMap:superClass().setScale( self , uiScale, uiScale)\n    self.uiScale = uiScale\n\n    self:storeScaledValues(uiScale)\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"setselectedhotspot",children:"setSelectedHotspot"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"setSelectedHotspot()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"hotspot"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function IngameMap:setSelectedHotspot(hotspot)\n    if self.selectedHotspot ~ = nil then\n        self.selectedHotspot:setSelected( false )\n    end\n    self.selectedHotspot = hotspot\n    if self.selectedHotspot ~ = nil then\n        self.selectedHotspot:setSelected( true )\n    end\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"setworldsize",children:"setWorldSize"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"setWorldSize()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"worldSizeX"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"worldSizeZ"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function IngameMap:setWorldSize(worldSizeX, worldSizeZ)\n    self.worldSizeX = worldSizeX\n    self.worldSizeZ = worldSizeZ\n    self.worldCenterOffsetX = self.worldSizeX * 0.5\n    self.worldCenterOffsetZ = self.worldSizeZ * 0.5\n\n    for _, layout in ipairs( self.layouts) do\n        layout:setWorldSize(worldSizeX, worldSizeZ)\n    end\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"storescaledvalues",children:"storeScaledValues"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Store scaled positioning, size and offset values."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"storeScaledValues()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"uiScale"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function IngameMap:storeScaledValues(uiScale)\n    for _, layout in ipairs( self.layouts) do\n        layout:storeScaledValues( self , uiScale)\n    end\n\n    self.helpAnchorOffsetX, self.helpAnchorOffsetY = self:scalePixelValuesToScreenVector( 0 , 15 )\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"togglesize",children:"toggleSize"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"toggleSize()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"state"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"force"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function IngameMap:toggleSize(state, force)\n    --#profile RemoteProfiler.zoneBeginN("IngameMap_toggleSize")\n\n    if state ~ = nil then\n        self.state = math.max( math.min(state, self.numToggleStates), 1 )\n    else\n            self.state = ( self.state % self.numToggleStates) + 1\n        end\n        g_gameSettings:setValue( "ingameMapState" , self.state)\n\n        self:setLayout( self.layouts[ self.state])\n\n        --#profile RemoteProfiler.zoneEnd()\n    end\n\n'})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);