"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[10640],{28453(e,n,t){t.d(n,{R:()=>a,x:()=>r});var i=t(96540);const s={},l=i.createContext(s);function a(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(l.Provider,{value:n},e.children)}},95794(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"script/Specializations/AIDrivable","title":"AIDrivable","description":"AIDrivable","source":"@site/../docs/script/Specializations/AIDrivable.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/AIDrivable","permalink":"/FS25-Community-LUADOC/script/Specializations/AIDrivable","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"AIDischargeable","permalink":"/FS25-Community-LUADOC/script/Specializations/AIDischargeable"},"next":{"title":"AIFieldWorker","permalink":"/FS25-Community-LUADOC/script/Specializations/AIFieldWorker"}}');var s=t(74848),l=t(28453);const a={},r=void 0,c={},o=[{value:"AIDrivable",id:"aidrivable",level:2},{value:"addAIAgentAttachment",id:"addaiagentattachment",level:3},{value:"consoleCommandMove",id:"consolecommandmove",level:3},{value:"consoleCommandSetTurnRadius",id:"consolecommandsetturnradius",level:3},{value:"createAgent",id:"createagent",level:3},{value:"deleteAgent",id:"deleteagent",level:3},{value:"drawDebugAIAgent",id:"drawdebugaiagent",level:3},{value:"getAIAgentMaxBrakeAcceleration",id:"getaiagentmaxbrakeacceleration",level:3},{value:"getAIAgentSize",id:"getaiagentsize",level:3},{value:"getAIAllowsBackwards",id:"getaiallowsbackwards",level:3},{value:"getAIRootNode",id:"getairootnode",level:3},{value:"getAIRootNodeBoundingBox",id:"getairootnodeboundingbox",level:3},{value:"getAIRootNodeMaxZOffset",id:"getairootnodemaxzoffset",level:3},{value:"getAIRootNodeMinZOffset",id:"getairootnodeminzoffset",level:3},{value:"getAITurningRadius",id:"getaiturningradius",level:3},{value:"getCanStartAIVehicle",id:"getcanstartaivehicle",level:3},{value:"getIsAIJobSupported",id:"getisaijobsupported",level:3},{value:"getIsAIPreparingToDrive",id:"getisaipreparingtodrive",level:3},{value:"getIsAIReadyToDrive",id:"getisaireadytodrive",level:3},{value:"initSpecialization",id:"initspecialization",level:3},{value:"loadAgentInfoFromXML",id:"loadagentinfofromxml",level:3},{value:"onCruiseControlSpeedChanged",id:"oncruisecontrolspeedchanged",level:3},{value:"onEnterVehicle",id:"onentervehicle",level:3},{value:"onLeaveVehicle",id:"onleavevehicle",level:3},{value:"onLoad",id:"onload",level:3},{value:"onPostLoad",id:"onpostload",level:3},{value:"onUpdate",id:"onupdate",level:3},{value:"postInitSpecialization",id:"postinitspecialization",level:3},{value:"prepareForAIDriving",id:"prepareforaidriving",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"reachedAITarget",id:"reachedaitarget",level:3},{value:"registerAgentXMLPaths",id:"registeragentxmlpaths",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3},{value:"registerEvents",id:"registerevents",level:3},{value:"registerFunctions",id:"registerfunctions",level:3},{value:"registerOverwrittenFunctions",id:"registeroverwrittenfunctions",level:3},{value:"setAIRootNodeDirty",id:"setairootnodedirty",level:3},{value:"setAITarget",id:"setaitarget",level:3},{value:"startNewAIAgentAttachmentChain",id:"startnewaiagentattachmentchain",level:3},{value:"unsetAITarget",id:"unsetaitarget",level:3},{value:"updateAIAgentAttachmentOffsetData",id:"updateaiagentattachmentoffsetdata",level:3},{value:"updateAIAgentAttachments",id:"updateaiagentattachments",level:3},{value:"updateAIAgentPoseData",id:"updateaiagentposedata",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"aidrivable",children:"AIDrivable"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Specialization for extending vehicles to by used by AI helpers"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Functions"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#addaiagentattachment",children:"addAIAgentAttachment"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#consolecommandmove",children:"consoleCommandMove"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#consolecommandsetturnradius",children:"consoleCommandSetTurnRadius"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#createagent",children:"createAgent"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#deleteagent",children:"deleteAgent"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#drawdebugaiagent",children:"drawDebugAIAgent"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getaiagentmaxbrakeacceleration",children:"getAIAgentMaxBrakeAcceleration"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getaiagentsize",children:"getAIAgentSize"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getaiallowsbackwards",children:"getAIAllowsBackwards"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getairootnode",children:"getAIRootNode"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getairootnodeboundingbox",children:"getAIRootNodeBoundingBox"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getairootnodemaxzoffset",children:"getAIRootNodeMaxZOffset"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getairootnodeminzoffset",children:"getAIRootNodeMinZOffset"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getaiturningradius",children:"getAITurningRadius"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getcanstartaivehicle",children:"getCanStartAIVehicle"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getisaijobsupported",children:"getIsAIJobSupported"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getisaipreparingtodrive",children:"getIsAIPreparingToDrive"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getisaireadytodrive",children:"getIsAIReadyToDrive"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#initspecialization",children:"initSpecialization"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#loadagentinfofromxml",children:"loadAgentInfoFromXML"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#oncruisecontrolspeedchanged",children:"onCruiseControlSpeedChanged"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onentervehicle",children:"onEnterVehicle"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onleavevehicle",children:"onLeaveVehicle"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onpostload",children:"onPostLoad"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onupdate",children:"onUpdate"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#postinitspecialization",children:"postInitSpecialization"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#prepareforaidriving",children:"prepareForAIDriving"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#reachedaitarget",children:"reachedAITarget"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registeragentxmlpaths",children:"registerAgentXMLPaths"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registerevents",children:"registerEvents"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registeroverwrittenfunctions",children:"registerOverwrittenFunctions"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#setairootnodedirty",children:"setAIRootNodeDirty"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#setaitarget",children:"setAITarget"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#startnewaiagentattachmentchain",children:"startNewAIAgentAttachmentChain"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#unsetaitarget",children:"unsetAITarget"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#updateaiagentattachmentoffsetdata",children:"updateAIAgentAttachmentOffsetData"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#updateaiagentattachments",children:"updateAIAgentAttachments"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#updateaiagentposedata",children:"updateAIAgentPoseData"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"addaiagentattachment",children:"addAIAgentAttachment"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"addAIAgentAttachment()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"attachmentData"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"level"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIDrivable:addAIAgentAttachment(attachmentData, level)\n    local spec = self.spec_aiDrivable\n\n    spec.attachmentsMaxWidth = math.max(spec.attachmentsMaxWidth, attachmentData.width)\n    spec.attachmentsMaxHeight = math.max(spec.attachmentsMaxHeight, attachmentData.height)\n\n    attachmentData.level = level\n\n    if spec.attachmentChains[spec.attachmentChainIndex] = = nil then\n        spec.attachmentChains[spec.attachmentChainIndex] = { }\n    end\n\n    table.insert(spec.attachments, attachmentData)\n    table.insert(spec.attachmentChains[spec.attachmentChainIndex], attachmentData)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"consolecommandmove",children:"consoleCommandMove"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"consoleCommandMove()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"distance"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIDrivable:consoleCommandMove(distance)\n    local vehicles = { }\n    local attachedVehicles = self:getChildVehicles()\n    for _, vehicle in ipairs(attachedVehicles) do\n        vehicle:removeFromPhysics()\n        table.insert(vehicles, vehicle)\n    end\n\n    local aiRootNode = self:getAIRootNode()\n    local dirX, dirY, dirZ = localDirectionToWorld(aiRootNode, 1 , 0 , 0 )\n    local moveX, moveY, moveZ = dirX * distance, dirY * distance, dirZ * distance\n    local currentTurnRadius = self:getTurningRadiusByRotTime( self.rotatedTime)\n\n    local gizmo = DebugGizmo.new()\n    local x, y, z = localToWorld(aiRootNode, currentTurnRadius, 0.05 , 0 )\n    gizmo:createWithWorldPosAndDir(x, y, z, 0 , 0 , 1 , 0 , 1 , 0 , "" , false , nil )\n    g_debugManager:addElement(gizmo)\n\n    currentTurnRadius = - currentTurnRadius + distance\n    self.rotatedTime = self:getSteeringRotTimeByCurvature( 1 / currentTurnRadius)\n\n    if self.rotatedTime < 0 then\n        self.spec_wheels.axisSide = self.rotatedTime / - self.maxRotTime / self:getSteeringDirection()\n    else\n            self.spec_wheels.axisSide = self.rotatedTime / self.minRotTime / self:getSteeringDirection()\n        end\n\n        for _, vehicle in ipairs(vehicles) do\n            for _, component in ipairs(vehicle.components) do\n                x, y, z = getWorldTranslation(component.node)\n                setWorldTranslation(component.node, x + moveX, y + moveY, z + moveZ)\n            end\n        end\n\n        for _, vehicle in ipairs(vehicles) do\n            vehicle:addToPhysics()\n        end\n    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"consolecommandsetturnradius",children:"consoleCommandSetTurnRadius"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"consoleCommandSetTurnRadius()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"turnRadius"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIDrivable:consoleCommandSetTurnRadius(turnRadius)\n    turnRadius = tonumber(turnRadius) or 10\n\n    local rotatedTime = self:getSteeringRotTimeByCurvature( 1 / turnRadius)\n\n    local axisSide\n    if rotatedTime > 0 then\n        axisSide = rotatedTime / - self.maxRotTime\n    else\n            axisSide = rotatedTime / self.minRotTime\n        end\n\n        axisSide = self:getSteeringDirection() * axisSide\n\n        self.spec_drivable.axisSide = axisSide\n    end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"createagent",children:"createAgent"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"createAgent()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"helperIndex"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIDrivable:createAgent(helperIndex)\n    if self.isServer then\n        local spec = self.spec_aiDrivable\n\n        spec.cruiseControlLimit = math.huge\n\n        -- first update the ai attachments which may have influence on the agent size\n        self:updateAIAgentAttachments()\n        local trailerData = spec.attachmentsTrailerOffsetData\n\n        local navigationMapId = g_currentMission.aiSystem:getNavigationMap()\n        local agent = spec.agentInfo\n        local width, length, lengthOffset, frontOffset, height = self:getAIAgentSize()\n        local maxBrakeAcceleration = self:getAIAgentMaxBrakeAcceleration()\n        local maxCentripetalAcceleration = agent.maxCentripetalAcceleration\n        local minTurningRadius = self:getAITurningRadius(agent.maxTurningRadius or self.maxTurningRadius)\n        local minLandingTurningRadius = minTurningRadius -- turning radius limit used when approaching the goal\n        local allowBackwards = self:getAIAllowsBackwards()\n\n        spec.agentId = createVehicleNavigationAgent(navigationMapId, minTurningRadius, minLandingTurningRadius, allowBackwards, width, height, length, lengthOffset, frontOffset, maxBrakeAcceleration, maxCentripetalAcceleration, trailerData)\n\n        setName(spec.agentId, string.format( "%s - %s" , getName(spec.agentId), self.configFileNameClean))\n\n        g_currentMission.aiSystem:addAgent(spec.agentId, self )\n\n        self:setAIVehicleObstacleStateDirty()\n\n        if g_currentMission.aiSystem.debugEnabled then\n            if spec.debugVehicle ~ = nil then\n                spec.debugVehicle:delete()\n            end\n            spec.debugVehicle = AIDebugVehicle.new( self , { math.random(), math.random(), math.random() } )\n\n            if spec.debugDump ~ = nil then\n                spec.debugDump:delete()\n            end\n\n            spec.debugDump = AIDebugDump.new( self , spec.agentId)\n            spec.debugDump:startRecording(minTurningRadius, allowBackwards, width, length, lengthOffset, frontOffset, maxBrakeAcceleration, maxCentripetalAcceleration)\n        end\n        if VehicleDebug.state = = VehicleDebug.DEBUG_AI then\n            enableVehicleNavigationAgentDebugRendering(spec.agentId, true )\n        end\n    end\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"deleteagent",children:"deleteAgent"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"deleteAgent()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIDrivable:deleteAgent()\n    local spec = self.spec_aiDrivable\n\n    spec.isRunning = false\n    self:setCruiseControlState( Drivable.CRUISECONTROL_STATE_OFF, true )\n\n    if spec.debugDump ~ = nil then\n        spec.debugDump:delete()\n        spec.debugDump = nil\n    end\n\n    if spec.agentId ~ = nil then\n\n        if g_currentMission ~ = nil and g_currentMission.aiSystem ~ = nil then\n            g_currentMission.aiSystem:removeAgent(spec.agentId)\n        end\n\n        delete(spec.agentId)\n        spec.agentId = nil\n    end\n\n    self:setAIVehicleObstacleStateDirty()\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"drawdebugaiagent",children:"drawDebugAIAgent"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"drawDebugAIAgent()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIDrivable:drawDebugAIAgent()\n    local spec = self.spec_aiDrivable\n    if not spec.agentInfo.isValid then\n        return\n    end\n\n    local aiRootNode = self:getAIRootNode()\n    local groundOffset = 0.15\n\n    local yOffset = 0\n    local storeItem = g_storeManager:getItemByXMLFilename( self.configFileName)\n    if storeItem ~ = nil then\n        if storeItem.shopTranslationOffset ~ = nil then\n            yOffset = storeItem.shopTranslationOffset[ 2 ]\n        end\n    end\n\n    local width, length, lengthOffset, frontOffset, height = self:getAIAgentSize()\n    spec.debugSizeBox:createWithNode(aiRootNode, width, height, length, 0 , height * 0.5 - yOffset, lengthOffset)\n    spec.debugSizeBox:draw()\n\n    local fx, fy, fz = localToWorld(aiRootNode, 0 , 0 , frontOffset)\n    local dirX, dirY, dirZ = localDirectionToWorld(aiRootNode, 0 , 0 , 1 )\n    local upX, upY, upZ = localDirectionToWorld(aiRootNode, 0 , 1 , 0 )\n    if fy > 0 then\n        fy = getTerrainHeightAtWorldPos(g_terrainNode, fx, 0 , fz) + groundOffset\n    end\n    spec.debugFrontMarker:createWithWorldPosAndDir(fx, fy, fz, dirX, dirY, dirZ, upX, upY, upZ, "FrontMarker" , false , nil , 3 )\n    spec.debugFrontMarker:draw()\n\n    local x, y, z = getWorldTranslation(aiRootNode)\n    if spec.isRunning then\n        local text\n        if spec.useManualDriving then\n            text = string.format( "Distance: %.2f" , spec.distanceToTarget)\n        else\n                text = AIDrivable.STATES[spec.lastState]\n            end\n\n            Utils.renderTextAtWorldPosition(x, y + 4 , z, text , 0.015 , 0 , 1 , 1 , 1 , 1 )\n        end\n\n        if spec.debugVehicle ~ = nil then\n            spec.debugVehicle:setForcedY(y + 0.1 )\n            spec.debugVehicle:draw()\n        end\n\n        local sx, _, sz = localToWorld(aiRootNode, 0 , 0.5 , 0 )\n        local sy = getTerrainHeightAtWorldPos(g_terrainNode, sx, 0 , sz) + groundOffset\n\n        local lx, _, lz = localToWorld(aiRootNode, 10 , 0.5 , 0 )\n        local rx, _, rz = localToWorld(aiRootNode, - 10 , 0.5 , 0 )\n\n        drawDebugLine(sx, sy, sz, 1 , 0 , 0 , lx, sy, lz, 1 , 0 , 0 )\n        drawDebugLine(sx, sy, sz, 0 , 1 , 0 , rx, sy, rz, 0 , 1 , 0 )\n\n        local dirX1, dirZ1 = MathUtil.vector2Normalize(lx - sx, lz - sz)\n        local maxTurningRadius = self.maxTurningRadius\n        local currentTurnRadius = self:getTurningRadiusByRotTime( self.rotatedTime)\n        local minRadius = self:getAITurningRadius( self.maxTurningRadius)\n\n        local revTime = self:getSteeringRotTimeByCurvature( 1 / (currentTurnRadius * ( self.rotatedTime > = 0 and 1 or - 1 )))\n\n        local debugString = string.format( "ReferenceRadius: %.3fm\\nMinRadius: %.3fm\\nCalc Radius: %.3f\\nRotatedTime: %.3f\\nRevTime: %.3f" , currentTurnRadius, maxTurningRadius, minRadius, self.rotatedTime, revTime)\n        Utils.renderTextAtWorldPosition(sx, sy + 5 , sz, debugString, getCorrectTextSize( 0.012 ), 0 )\n\n        local wheelSpec = self.spec_wheels\n        for _, wheel in ipairs(wheelSpec.wheels) do\n            if wheel.physics.rotSpeed ~ = 0 or( self.spec_articulatedAxis ~ = nil and self.spec_articulatedAxis.componentJoint ~ = nil ) then\n                local wsx, wsy, wsz = localToWorld(wheel.repr, 0 , 0 , 0 )\n                local wdx, wdy, wdz = localDirectionToWorld(wheel.driveNode, 1 , 0 , 0 )\n                local wlx, _, wlz = wsx + wdx * 10 , wsy + wdy * 10 , wsz + wdz * 10\n                local wrx, _, wrz = wsx + wdx * - 10 , wsy + wdy * - 10 , wsz + wdz * - 10\n                drawDebugLine(wsx, sy, wsz, 1 , 0 , 0 , wlx, sy, wlz, 1 , 0 , 0 )\n                drawDebugLine(wsx, sy, wsz, 0 , 1 , 0 , wrx, sy, wrz, 0 , 1 , 0 )\n            end\n        end\n\n        if wheelSpec.steeringCenterNode ~ = nil then\n            DebugGizmo.renderAtNode(wheelSpec.steeringCenterNode, "SCN" )\n        end\n\n        local sign = math.sign( self.rotatedTime)\n        local cx, cz = sx + sign * dirX1 * currentTurnRadius, sz + sign * dirZ1 * currentTurnRadius\n        DebugGizmo.renderAtPosition(cx, sy, cz, dirX1, 0 , dirZ1, 0 , 1 , 0 , "X" )\n\n        sign = math.sign( self.rotatedTime)\n        cx, cz = sx + sign * dirX1 * minRadius, sz + sign * dirZ1 * minRadius\n        DebugGizmo.renderAtPosition(cx, sy, cz, dirX1, 0 , dirZ1, 0 , 1 , 0 , "M" )\n    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"getaiagentmaxbrakeacceleration",children:"getAIAgentMaxBrakeAcceleration"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getAIAgentMaxBrakeAcceleration()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIDrivable:getAIAgentMaxBrakeAcceleration()\n    local spec = self.spec_aiDrivable\n    local agent = spec.agentInfo\n    return agent.maxBrakeAcceleration\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getaiagentsize",children:"getAIAgentSize"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getAIAgentSize()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIDrivable:getAIAgentSize()\n    local spec = self.spec_aiDrivable\n\n    local agent = spec.agentInfo\n    if not agent.isValid then\n        return nil , nil , nil , nil , nil\n    end\n\n    local width = math.max(agent.width, spec.attachmentsMaxWidth)\n    local height = math.max(agent.height, spec.attachmentsMaxHeight)\n    local length = agent.length\n    local lengthOffset = agent.lengthOffset\n\n    length = length + spec.attachmentsMaxLengthOffsetPos - spec.attachmentsMaxLengthOffsetNeg\n    lengthOffset = lengthOffset + spec.attachmentsMaxLengthOffsetPos * 0.5 + spec.attachmentsMaxLengthOffsetNeg * 0.5\n\n    return width, length, lengthOffset, agent.frontOffset, height\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getaiallowsbackwards",children:"getAIAllowsBackwards"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getAIAllowsBackwards()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIDrivable:getAIAllowsBackwards()\n    return false\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getairootnode",children:"getAIRootNode"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getAIRootNode()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIDrivable:getAIRootNode()\n    return self.components[ 1 ].node\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getairootnodeboundingbox",children:"getAIRootNodeBoundingBox"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getAIRootNodeBoundingBox()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIDrivable:getAIRootNodeBoundingBox()\n    local spec = self.spec_aiDrivable\n    local boundingBox = spec.aiRootNodeBoundingBox\n    local aiRootNode = self:getAIRootNode()\n\n    local sizeX, sizeY, sizeZ = boundingBox[ 2 ] - boundingBox[ 1 ], boundingBox[ 4 ] - boundingBox[ 3 ], boundingBox[ 6 ] - boundingBox[ 5 ]\n    local centerX, centerY, centerZ = boundingBox[ 1 ] + sizeX * 0.5 , boundingBox[ 3 ] + sizeY * 0.5 , boundingBox[ 5 ] + sizeZ * 0.5\n\n    local vx, vy, vz = localToWorld(aiRootNode, centerX, centerY, centerZ)\n    local qx, qy, qz, qw = getWorldQuaternion(aiRootNode)\n\n    return vx, vy, vz, qx, qy, qz, qw, sizeX * 0.5 , sizeY * 0.5 , sizeZ * 0.5\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getairootnodemaxzoffset",children:"getAIRootNodeMaxZOffset"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getAIRootNodeMaxZOffset()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIDrivable:getAIRootNodeMaxZOffset()\n    local spec = self.spec_aiDrivable\n    return spec.aiRootNodeBoundingBox[ 6 ]\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getairootnodeminzoffset",children:"getAIRootNodeMinZOffset"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getAIRootNodeMinZOffset()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIDrivable:getAIRootNodeMinZOffset()\n    local spec = self.spec_aiDrivable\n    return spec.aiRootNodeBoundingBox[ 5 ]\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getaiturningradius",children:"getAITurningRadius"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getAITurningRadius()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"minRadius"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIDrivable:getAITurningRadius(minRadius)\n    return minRadius\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getcanstartaivehicle",children:"getCanStartAIVehicle"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getCanStartAIVehicle()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIDrivable:getCanStartAIVehicle(superFunc)\n    local spec = self.spec_aiDrivable\n    if not spec.agentInfo.isValid then\n        return false\n    end\n\n    return superFunc( self )\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getisaijobsupported",children:"getIsAIJobSupported"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getIsAIJobSupported()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"jobName"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIDrivable:getIsAIJobSupported(superFunc, jobName)\n    local spec = self.spec_aiDrivable\n    if not spec.agentInfo.isValid then\n        return false\n    end\n\n    return superFunc( self , jobName)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getisaipreparingtodrive",children:"getIsAIPreparingToDrive"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getIsAIPreparingToDrive()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIDrivable:getIsAIPreparingToDrive(superFunc)\n    for _, vehicle in ipairs( self.rootVehicle.childVehicles) do\n        if vehicle ~ = self then\n            if vehicle.getIsAIPreparingToDrive ~ = nil then\n                if vehicle:getIsAIPreparingToDrive() then\n                    return true\n                end\n            end\n        end\n    end\n\n    return superFunc( self )\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getisaireadytodrive",children:"getIsAIReadyToDrive"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getIsAIReadyToDrive()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIDrivable:getIsAIReadyToDrive(superFunc)\n    for _, vehicle in ipairs( self.rootVehicle.childVehicles) do\n        if vehicle ~ = self then\n            if vehicle.getIsAIReadyToDrive ~ = nil then\n                if not vehicle:getIsAIReadyToDrive() then\n                    return false , vehicle\n                end\n            end\n        end\n    end\n\n    return superFunc( self )\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"initspecialization",children:"initSpecialization"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"initSpecialization()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIDrivable.initSpecialization()\n    local schema = Vehicle.xmlSchema\n    schema:setXMLSpecializationType( "AI" )\n    AIDrivable.registerAgentXMLPaths(schema, "vehicle.ai.agent" )\n    schema:setXMLSpecializationType()\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"loadagentinfofromxml",children:"loadAgentInfoFromXML"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"loadAgentInfoFromXML()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"xmlFile"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"agent"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIDrivable:loadAgentInfoFromXML(xmlFile, agent)\n    local baseSizeKey = "vehicle.ai.agent"\n    agent.width = xmlFile:getValue(baseSizeKey .. "#width" )\n    agent.length = xmlFile:getValue(baseSizeKey .. "#length" )\n    agent.height = xmlFile:getValue(baseSizeKey .. "#height" )\n    agent.lengthOffset = xmlFile:getValue(baseSizeKey .. "#lengthOffset" , 0 )\n    agent.frontOffset = xmlFile:getValue(baseSizeKey .. "#frontOffset" , 3 )\n    agent.frontWheelIndices = xmlFile:getValue(baseSizeKey .. "#frontWheelIndices" , nil , true )\n    agent.frontWheelNodes = xmlFile:getValue(baseSizeKey .. "#frontWheelNodes" , nil , self.components, self.i3dMappings, true )\n    agent.maxBrakeAcceleration = xmlFile:getValue(baseSizeKey .. "#maxBrakeAcceleration" , 5 )\n    agent.maxCentripetalAcceleration = xmlFile:getValue(baseSizeKey .. "#maxCentripetalAcceleration" , 1 )\n    agent.maxTurningRadius = xmlFile:getValue(baseSizeKey .. "#maxTurningRadius" )\n\n    agent.isDefined = xmlFile:hasProperty(baseSizeKey)\n\n    -- check configurations for changed agent values\n        for name, id in pairs( self.configurations) do\n            local configDesc = g_vehicleConfigurationManager:getConfigurationDescByName(name)\n            local key = string.format( "%s(%d).aiAgent" , configDesc.configurationKey, id - 1 )\n\n            if xmlFile:hasProperty(key) then\n                agent.width = xmlFile:getValue(key .. "#width" , agent.width)\n                agent.length = xmlFile:getValue(key .. "#length" , agent.length)\n                agent.height = xmlFile:getValue(key .. "#height" , agent.height)\n                agent.lengthOffset = xmlFile:getValue(key .. "#lengthOffset" , agent.lengthOffset)\n                agent.frontOffset = xmlFile:getValue(key .. "#frontOffset" , agent.frontOffset)\n\n                agent.frontWheelIndices = xmlFile:getValue(key .. "#frontWheelIndices" , agent.frontWheelIndices, true )\n                agent.frontWheelNodes = xmlFile:getValue(key .. "#frontWheelNodes" , agent.frontWheelNodes, self.components, self.i3dMappings, true )\n\n                agent.maxBrakeAcceleration = math.min(xmlFile:getValue(key .. "#maxBrakeAcceleration" , agent.maxBrakeAcceleration))\n                agent.maxCentripetalAcceleration = math.min(xmlFile:getValue(key .. "#maxCentripetalAcceleration" , agent.maxCentripetalAcceleration))\n                agent.maxTurningRadius = xmlFile:getValue(key .. "#maxTurningRadius" , agent.maxTurningRadius)\n\n                agent.isDefined = true\n            end\n        end\n    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"oncruisecontrolspeedchanged",children:"onCruiseControlSpeedChanged"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onCruiseControlSpeedChanged()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"speed"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"speedReverse"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIDrivable:onCruiseControlSpeedChanged(speed, speedReverse)\n    local spec = self.spec_aiDrivable\n    spec.cruiseControlLimit = speed\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onentervehicle",children:"onEnterVehicle"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onEnterVehicle()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"isControlling"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIDrivable:onEnterVehicle(isControlling)\n    if isControlling and self.isServer then\n        addConsoleCommand( "gsAISetTurnRadius" , "Set Turn radius" , "consoleCommandSetTurnRadius" , self )\n        addConsoleCommand( "gsAIMoveVehicle" , "Moves vehicles" , "consoleCommandMove" , self )\n        addConsoleCommand( "gsAIClearPath" , "Clears debug path" , "consoleCommandClearPath" , self )\n    end\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"onleavevehicle",children:"onLeaveVehicle"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onLeaveVehicle()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"wasEntered"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIDrivable:onLeaveVehicle(wasEntered)\n    if wasEntered then\n        removeConsoleCommand( "gsAISetTurnRadius" )\n        removeConsoleCommand( "gsAIMoveVehicle" )\n        removeConsoleCommand( "gsAIClearPath" )\n    end\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Called on loading"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onLoad(table savegame)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"savegame"}),(0,s.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIDrivable:onLoad(savegame)\n    local spec = self.spec_aiDrivable\n\n    spec.agentInfo = { }\n    spec.agentInfo.isValid = false\n    self:loadAgentInfoFromXML( self.xmlFile, spec.agentInfo)\n\n    spec.maxSpeed = math.huge\n    spec.isRunning = false\n    spec.useManualDriving = false\n    spec.lastState = nil\n    spec.lastIsBlocked = false\n    spec.lastMaxSpeed = 0\n    spec.cruiseControlLimit = math.huge\n    spec.stuckTime = 0\n    spec.agentId = nil\n    spec.targetX, spec.targetY, spec.targetZ = nil , nil , nil\n    spec.targetDirX, spec.targetDirY, spec.targetDirZ = nil , nil , nil\n\n    spec.lastNoSpaceAtStart, spec.lastNoSpaceAtTarget = false , false\n\n    spec.aiRootNodeBoundingBox = { 0 , 1 , 0 , 1 , 0 , 1 }\n\n    spec.attachments = { }\n    spec.attachmentChains = { }\n    spec.attachmentChainIndex = 1\n    spec.attachmentsTrailerOffsetData = { }\n    spec.attachmentsMaxWidth = 0\n    spec.attachmentsMaxHeight = 0\n    spec.attachmentsMaxLengthOffsetPos = 0\n    spec.attachmentsMaxLengthOffsetNeg = 0\n\n    spec.poseData = { }\n\n    spec.debugVehicle = nil\n    spec.debugSizeBox = DebugBox.new()\n    spec.debugSizeBox:setColorRGBA( 0 , 1 , 1 )\n    spec.debugSizeBox:setText( "agentSize" )\n    spec.debugSizeBox:setTextSize( 0.012 )\n\n    spec.debugFrontMarker = DebugGizmo.new()\n    spec.debugDump = nil\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"onpostload",children:"onPostLoad"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onPostLoad()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIDrivable:onPostLoad()\n    local spec = self.spec_aiDrivable\n\n    local aiRootNode = self:getAIRootNode()\n\n    spec.attacherJointOffsets = { }\n    if self.getAttacherJoints ~ = nil then\n        for _, attacherJoint in ipairs( self:getAttacherJoints()) do\n            local node = attacherJoint.jointTransform\n            local xDir, yDir, zDir = localDirectionToLocal(node, aiRootNode, 0 , 0 , 1 )\n            local xUp, yUp, zUp = localDirectionToLocal(node, aiRootNode, 0 , 1 , 0 )\n            local x, y, z = localToLocal(node, aiRootNode, 0 , 0 , 0 )\n\n            table.insert(spec.attacherJointOffsets, { x = x, y = y, z = z, xDir = xDir, yDir = yDir, zDir = zDir, xUp = xUp, yUp = yUp, zUp = zUp } )\n        end\n    end\n\n    -- only auto generate if we have at least a empty entry inside the xml\n        if spec.agentInfo.isDefined then\n            if spec.agentInfo.width = = nil or spec.agentInfo.length = = nil or spec.agentInfo.height = = nil then\n                spec.agentInfo.width = spec.agentInfo.width or self.size.width\n                spec.agentInfo.height = spec.agentInfo.height or self.size.height\n\n                if spec.agentInfo.length = = nil then\n                    spec.agentInfo.length = self.size.length\n                    local _, _, zOffset = localToLocal(aiRootNode, self.rootNode, 0 , 0 , 0 )\n                    spec.agentInfo.lengthOffset = - zOffset + self.size.lengthOffset\n                end\n            end\n\n            if spec.agentInfo.frontWheelIndices ~ = nil or spec.agentInfo.frontWheelNodes ~ = nil then\n                local z, numPositions = 0 , 0\n                if spec.agentInfo.frontWheelNodes ~ = nil and #spec.agentInfo.frontWheelNodes > 0 then\n                    for i, wheelNode in ipairs(spec.agentInfo.frontWheelNodes) do\n                        local wheel = self:getWheelByWheelNode(wheelNode)\n                        if wheel ~ = nil then\n                            local _, _, rz = localToLocal(wheel.repr, aiRootNode, 0 , 0 , 0 )\n                            z = z + rz\n                            numPositions = numPositions + 1\n                        else\n                                Logging.xmlWarning( self.xmlFile, "Node wheel for node \'%s\' found for ai agent definition." , getName(wheelNode))\n                                end\n                            end\n                        elseif spec.agentInfo.frontWheelIndices ~ = nil and #spec.agentInfo.frontWheelIndices > 0 then\n                                for i, wheelIndex in ipairs(spec.agentInfo.frontWheelIndices) do\n                                    local wheel = self:getWheelFromWheelIndex(wheelIndex)\n                                    if wheel ~ = nil then\n                                        local _, _, rz = localToLocal(wheel.repr, aiRootNode, 0 , 0 , 0 )\n                                        z = z + rz\n                                        numPositions = numPositions + 1\n                                    else\n                                            Logging.xmlWarning( self.xmlFile, "Unknown wheel index \'%d\' found for ai agent definition." , wheelIndex)\n                                            end\n                                        end\n                                    end\n\n                                    if numPositions > 0 then\n                                        spec.agentInfo.frontOffset = z / numPositions\n                                    end\n                                end\n                            end\n\n                            spec.agentInfo.isValid = spec.agentInfo.width ~ = nil or spec.agentInfo.length ~ = nil or spec.agentInfo.height ~ = nil\n\n                            spec.debugSizeBox:setText( string.format( "agentSize\\nw:%.2f l:%.2f h:%.2f" , spec.agentInfo.width or 0 , spec.agentInfo.length or 0 , spec.agentInfo.height or 0 ))\n\n                            self:setAIRootNodeDirty()\n                        end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"onupdate",children:"onUpdate"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Called on update"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onUpdate(float dt, boolean isActiveForInput, boolean isSelected, )"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"float"}),(0,s.jsx)(n.th,{children:"dt"}),(0,s.jsx)(n.th,{children:"time since last call in ms"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"boolean"}),(0,s.jsx)(n.td,{children:"isActiveForInput"}),(0,s.jsx)(n.td,{children:"true if vehicle is active for input"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"boolean"}),(0,s.jsx)(n.td,{children:"isSelected"}),(0,s.jsx)(n.td,{children:"true if vehicle is selected"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"isSelected"}),(0,s.jsx)(n.td,{})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIDrivable:onUpdate(dt, isActiveForInput, isActiveForInputIgnoreSelection, isSelected)\n    local spec = self.spec_aiDrivable\n\n    if self.isServer then\n        if spec.isRunning then\n\n            -- if vehicle was blocked in the last frame we want to keep the block state as long as last speed < 4kmh\n                -- to avoid issues with set block or unblock each frame\n                local isStillBlocked = spec.lastIsBlocked and self:getLastSpeed() < 5\n                -- check if vehicle is currently blocked\n                    local isCurrentlyBlocked = math.abs(spec.lastMaxSpeed) > 0 and self:getLastSpeed() < 1\n\n                    if isCurrentlyBlocked or isStillBlocked then\n                        spec.stuckTime = spec.stuckTime + dt\n                    else\n                            spec.stuckTime = 0\n                        end\n\n                        local isBlocked = spec.stuckTime > 5000\n\n                        local aiRootNode = self:getAIRootNode()\n                        local x, y, z = getWorldTranslation(aiRootNode)\n                        spec.distanceToTarget = MathUtil.vector2Length(x - spec.targetX, z - spec.targetZ)\n                        local lastSpeed = self.lastSpeedReal * self.movingDirection * 1000\n\n                        local maxSpeed = math.min(spec.maxSpeed, spec.cruiseControlLimit)\n\n                        if spec.useManualDriving then\n                            local tx, _, tz = worldToLocal(aiRootNode, spec.targetX, spec.targetY, spec.targetZ)\n\n                            AIVehicleUtil.driveToPoint( self , dt, 1 , true , true , tx, tz, maxSpeed, false )\n\n                            spec.lastMaxSpeed = maxSpeed\n\n                            if spec.distanceToTarget < 0.5 then\n                                self:reachedAITarget()\n                            end\n                        else\n                                local dirX, dirY, dirZ = localDirectionToWorld(aiRootNode, 0 , 0 , 1 )\n\n                                self:updateAIAgentPoseData()\n\n                                local curvature, maxSpeedCurvature, status = getVehicleNavigationAgentNextCurvature(spec.agentId, spec.poseData, math.abs(lastSpeed))\n\n                                if spec.debugDump ~ = nil then\n                                    spec.debugDump:addData(dt, x, y, z, dirX, dirY, dirZ, lastSpeed, curvature, maxSpeed, status )\n                                end\n\n                                -- update driving\n                                if status = = AgentState.DRIVING then\n                                    maxSpeed = math.min(maxSpeedCurvature * 3.6 , maxSpeed)\n                                    AIVehicleUtil.driveAlongCurvature( self , dt, curvature, maxSpeed, 1 )\n                                    if maxSpeed = = 0 then\n                                        isBlocked = false\n                                    end\n                                elseif status = = AgentState.PLANNING then\n                                        self:stopAIDriving()\n                                        isBlocked = false\n                                        self:brake( 1 )\n                                    elseif status = = AgentState.BLOCKED then\n                                            self:stopAIDriving()\n                                            isBlocked = true\n                                        elseif status = = AgentState.TARGET_REACHED then\n                                                isBlocked = false\n                                                self:reachedAITarget()\n                                            elseif status = = AgentState.NOT_REACHABLE then\n                                                    isBlocked = false\n                                                    self:stopCurrentAIJob( AIMessageErrorNotReachable.new())\n                                                end\n\n                                                spec.lastState = status\n                                                spec.lastMaxSpeed = maxSpeed\n                                            end\n\n                                            if spec.debugVehicle ~ = nil then\n                                                spec.debugVehicle:update(dt)\n                                            end\n\n                                            -- reset the stuck time if the blocking is for a valid reason(e.g.traffic blockers and planning state)\n                                                if not isBlocked and spec.stuckTime > 5000 then\n                                                    spec.stuckTime = 0\n                                                end\n\n                                                if isBlocked and not spec.lastIsBlocked then\n                                                    g_server:broadcastEvent( AIVehicleIsBlockedEvent.new( self , true ), true , nil , self )\n                                                elseif not isBlocked and spec.lastIsBlocked then\n                                                        g_server:broadcastEvent( AIVehicleIsBlockedEvent.new( self , false ), true , nil , self )\n                                                    end\n\n                                                    spec.lastIsBlocked = isBlocked\n\n                                                    SpecializationUtil.raiseEvent( self , "onAIDriveableActive" )\n                                                end\n                                            end\n                                        end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"postinitspecialization",children:"postInitSpecialization"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"postInitSpecialization()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIDrivable.postInitSpecialization()\n    local schema = Vehicle.xmlSchema\n\n    for name, configDesc in pairs(g_vehicleConfigurationManager:getConfigurations()) do\n        local configurationKey = configDesc.configurationKey .. "(?)"\n        schema:setXMLSharedRegistration( "configAIAgent" , configurationKey)\n        AIDrivable.registerAgentXMLPaths(schema, configurationKey .. ".aiAgent" )\n        schema:resetXMLSharedRegistration( "configAIAgent" , configurationKey)\n    end\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"prepareforaidriving",children:"prepareForAIDriving"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"prepareForAIDriving()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIDrivable:prepareForAIDriving()\n    self:raiseAIEvent( "onAIDrivablePrepare" , "onAIImplementPrepareForTransport" )\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Checks if all prerequisite specializations are loaded"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"prerequisitesPresent(table specializations)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"specializations"}),(0,s.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"hasPrerequisite"}),(0,s.jsx)(n.th,{children:"true if all prerequisite specializations are loaded"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIDrivable.prerequisitesPresent(specializations)\n    return SpecializationUtil.hasSpecialization( AIVehicle , specializations) and\n    SpecializationUtil.hasSpecialization( AIJobVehicle , specializations) and\n    SpecializationUtil.hasSpecialization( Drivable , specializations)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"reachedaitarget",children:"reachedAITarget"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"reachedAITarget()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIDrivable:reachedAITarget()\n    local spec = self.spec_aiDrivable\n    if self.isServer then\n        local lastTask = spec.task\n        if lastTask ~ = nil then\n            lastTask:onTargetReached()\n        end\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"registeragentxmlpaths",children:"registerAgentXMLPaths"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerAgentXMLPaths()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"schema"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"basePath"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIDrivable.registerAgentXMLPaths(schema, basePath)\n    schema:register(XMLValueType.FLOAT, basePath .. "#width" , "AI vehicle width" )\n    schema:register(XMLValueType.FLOAT, basePath .. "#length" , "AI vehicle length" )\n    schema:register(XMLValueType.FLOAT, basePath .. "#lengthOffset" , "AI vehicle length offset" )\n    schema:register(XMLValueType.FLOAT, basePath .. "#height" , "AI vehicle height" )\n    schema:register(XMLValueType.FLOAT, basePath .. "#frontOffset" , "AI vehicle front offset" )\n    schema:register(XMLValueType.VECTOR_N, basePath .. "#frontWheelIndices" , "List of wheels(indices) that are used for steering" )\n        schema:register(XMLValueType.NODE_INDICES, basePath .. "#frontWheelNodes" , "List of wheels(nodes) that are used for steering" )\n            schema:register(XMLValueType.FLOAT, basePath .. "#maxBrakeAcceleration" , "AI vehicle max brake acceleration" )\n            schema:register(XMLValueType.FLOAT, basePath .. "#maxCentripetalAcceleration" , "AI vehicle max centripetal acceleration" )\n            schema:register(XMLValueType.FLOAT, basePath .. "#maxTurningRadius" , "Max.turning radius(overwrites value detected from ackermann steering)" )\n        end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIDrivable.registerEventListeners(vehicleType)\n    SpecializationUtil.registerEventListener(vehicleType, "onLoad" , AIDrivable )\n    SpecializationUtil.registerEventListener(vehicleType, "onPostLoad" , AIDrivable )\n    SpecializationUtil.registerEventListener(vehicleType, "onUpdate" , AIDrivable )\n    SpecializationUtil.registerEventListener(vehicleType, "onEnterVehicle" , AIDrivable )\n    SpecializationUtil.registerEventListener(vehicleType, "onLeaveVehicle" , AIDrivable )\n    SpecializationUtil.registerEventListener(vehicleType, "onCruiseControlSpeedChanged" , AIDrivable )\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registerevents",children:"registerEvents"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerEvents()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIDrivable.registerEvents(vehicleType)\n    SpecializationUtil.registerEvent(vehicleType, "onAIDrivablePrepare" )\n    SpecializationUtil.registerEvent(vehicleType, "onAIDriveableStart" )\n    SpecializationUtil.registerEvent(vehicleType, "onAIDriveableActive" )\n    SpecializationUtil.registerEvent(vehicleType, "onAIDriveableEnd" )\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIDrivable.registerFunctions(vehicleType)\n    SpecializationUtil.registerFunction(vehicleType, "consoleCommandSetTurnRadius" , AIDrivable.consoleCommandSetTurnRadius)\n    SpecializationUtil.registerFunction(vehicleType, "consoleCommandMove" , AIDrivable.consoleCommandMove)\n    SpecializationUtil.registerFunction(vehicleType, "consoleCommandClearPath" , AIDrivable.consoleCommandClearPath)\n    SpecializationUtil.registerFunction(vehicleType, "createAgent" , AIDrivable.createAgent)\n    SpecializationUtil.registerFunction(vehicleType, "deleteAgent" , AIDrivable.deleteAgent)\n    SpecializationUtil.registerFunction(vehicleType, "setAITarget" , AIDrivable.setAITarget)\n    SpecializationUtil.registerFunction(vehicleType, "unsetAITarget" , AIDrivable.unsetAITarget)\n    SpecializationUtil.registerFunction(vehicleType, "stopAIDriving" , AIDrivable.stopAIDriving)\n    SpecializationUtil.registerFunction(vehicleType, "reachedAITarget" , AIDrivable.reachedAITarget)\n    SpecializationUtil.registerFunction(vehicleType, "getAIRootNode" , AIDrivable.getAIRootNode)\n    SpecializationUtil.registerFunction(vehicleType, "setAIRootNodeDirty" , AIDrivable.setAIRootNodeDirty)\n    SpecializationUtil.registerFunction(vehicleType, "getAIRootNodeMinZOffset" , AIDrivable.getAIRootNodeMinZOffset)\n    SpecializationUtil.registerFunction(vehicleType, "getAIRootNodeMaxZOffset" , AIDrivable.getAIRootNodeMaxZOffset)\n    SpecializationUtil.registerFunction(vehicleType, "getAIRootNodeBoundingBox" , AIDrivable.getAIRootNodeBoundingBox)\n    SpecializationUtil.registerFunction(vehicleType, "getAIAllowsBackwards" , AIDrivable.getAIAllowsBackwards)\n    SpecializationUtil.registerFunction(vehicleType, "drawDebugAIAgent" , AIDrivable.drawDebugAIAgent)\n    SpecializationUtil.registerFunction(vehicleType, "debugGetAgentHasSpaceAt" , AIDrivable.debugGetAgentHasSpaceAt)\n    SpecializationUtil.registerFunction(vehicleType, "loadAgentInfoFromXML" , AIDrivable.loadAgentInfoFromXML)\n    SpecializationUtil.registerFunction(vehicleType, "getAIAgentSize" , AIDrivable.getAIAgentSize)\n    SpecializationUtil.registerFunction(vehicleType, "getAIAgentMaxBrakeAcceleration" , AIDrivable.getAIAgentMaxBrakeAcceleration)\n    SpecializationUtil.registerFunction(vehicleType, "updateAIAgentAttachments" , AIDrivable.updateAIAgentAttachments)\n    SpecializationUtil.registerFunction(vehicleType, "addAIAgentAttachment" , AIDrivable.addAIAgentAttachment)\n    SpecializationUtil.registerFunction(vehicleType, "startNewAIAgentAttachmentChain" , AIDrivable.startNewAIAgentAttachmentChain)\n    SpecializationUtil.registerFunction(vehicleType, "updateAIAgentAttachmentOffsetData" , AIDrivable.updateAIAgentAttachmentOffsetData)\n    SpecializationUtil.registerFunction(vehicleType, "updateAIAgentPoseData" , AIDrivable.updateAIAgentPoseData)\n    SpecializationUtil.registerFunction(vehicleType, "prepareForAIDriving" , AIDrivable.prepareForAIDriving)\n    SpecializationUtil.registerFunction(vehicleType, "getAITurningRadius" , AIDrivable.getAITurningRadius)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registeroverwrittenfunctions",children:"registerOverwrittenFunctions"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerOverwrittenFunctions()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIDrivable.registerOverwrittenFunctions(vehicleType)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getCanStartAIVehicle" , AIDrivable.getCanStartAIVehicle)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getIsAIJobSupported" , AIDrivable.getIsAIJobSupported)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getCanHaveAIVehicleObstacle" , AIDrivable.getCanHaveAIVehicleObstacle)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getIsAIReadyToDrive" , AIDrivable.getIsAIReadyToDrive)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getIsAIPreparingToDrive" , AIDrivable.getIsAIPreparingToDrive)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"setairootnodedirty",children:"setAIRootNodeDirty"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"setAIRootNodeDirty()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIDrivable:setAIRootNodeDirty()\n    local spec = self.spec_aiDrivable\n\n    local aiRootNode = self:getAIRootNode()\n\n    local xOffsetPosX, xOffsetPosY, xOffsetPosZ = localToWorld( self.rootNode, self.size.widthOffset + self.size.width * 0.5 , 0 , 0 )\n    local xOffsetNegX, xOffsetNegY, xOffsetNegZ = localToWorld( self.rootNode, self.size.widthOffset - self.size.width * 0.5 , 0 , 0 )\n    local yOffsetPosX, yOffsetPosY, yOffsetPosZ = localToWorld( self.rootNode, 0 , self.size.heightOffset + self.size.height, 0 )\n    local yOffsetNegX, yOffsetNegY, yOffsetNegZ = localToWorld( self.rootNode, 0 , self.size.heightOffset, 0 )\n    local zOffsetPosX, zOffsetPosY, zOffsetPosZ = localToWorld( self.rootNode, 0 , 0 , self.size.lengthOffset + self.size.length * 0.5 )\n    local zOffsetNegX, zOffsetNegY, zOffsetNegZ = localToWorld( self.rootNode, 0 , 0 , self.size.lengthOffset - self.size.length * 0.5 )\n\n    local xOffset1, yOffset1, zOffset1 = worldToLocal(aiRootNode, xOffsetPosX, xOffsetPosY, xOffsetPosZ)\n    local xOffset2, yOffset2, zOffset2 = worldToLocal(aiRootNode, xOffsetNegX, xOffsetNegY, xOffsetNegZ)\n    local xOffset3, yOffset3, zOffset3 = worldToLocal(aiRootNode, yOffsetPosX, yOffsetPosY, yOffsetPosZ)\n    local xOffset4, yOffset4, zOffset4 = worldToLocal(aiRootNode, yOffsetNegX, yOffsetNegY, yOffsetNegZ)\n    local xOffset5, yOffset5, zOffset5 = worldToLocal(aiRootNode, zOffsetPosX, zOffsetPosY, zOffsetPosZ)\n    local xOffset6, yOffset6, zOffset6 = worldToLocal(aiRootNode, zOffsetNegX, zOffsetNegY, zOffsetNegZ)\n\n    local minXOffset = math.min(xOffset1, xOffset2, xOffset3, xOffset4, xOffset5, xOffset6)\n    local maxXOffset = math.max(xOffset1, xOffset2, xOffset3, xOffset4, xOffset5, xOffset6)\n    local minYOffset = math.min(yOffset1, yOffset2, yOffset3, yOffset4, yOffset5, yOffset6)\n    local maxYOffset = math.max(yOffset1, yOffset2, yOffset3, yOffset4, yOffset5, yOffset6)\n    local minZOffset = math.min(zOffset1, zOffset2, zOffset3, zOffset4, zOffset5, zOffset6)\n    local maxZOffset = math.max(zOffset1, zOffset2, zOffset3, zOffset4, zOffset5, zOffset6)\n\n    spec.aiRootNodeBoundingBox[ 1 ] = minXOffset\n    spec.aiRootNodeBoundingBox[ 2 ] = maxXOffset\n    spec.aiRootNodeBoundingBox[ 3 ] = minYOffset\n    spec.aiRootNodeBoundingBox[ 4 ] = maxYOffset\n    spec.aiRootNodeBoundingBox[ 5 ] = minZOffset\n    spec.aiRootNodeBoundingBox[ 6 ] = maxZOffset\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"setaitarget",children:"setAITarget"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"setAITarget()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"task"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"x"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"y"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"z"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"dirX"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"dirY"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"dirZ"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"maxSpeed"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"useManualDriving"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIDrivable:setAITarget(task, x, y, z, dirX, dirY, dirZ, maxSpeed, useManualDriving)\n    local spec = self.spec_aiDrivable\n\n    local aiRootNode = self:getAIRootNode()\n    local cx, cy, cz = getWorldTranslation(aiRootNode)\n    local cDirX, cDirY, cDirZ = localDirectionToWorld(aiRootNode, 0 , 0 , 1 )\n\n    spec.useManualDriving = Utils.getNoNil(useManualDriving, false )\n\n    spec.isRunning = true\n    spec.task = task\n    spec.maxSpeed = maxSpeed or math.huge\n    spec.targetX, spec.targetY, spec.targetZ = x, y, z\n    spec.targetDirX, spec.targetDirY, spec.targetDirZ = dirX or 0 , dirY, dirZ or 0\n    spec.distanceToTarget = MathUtil.vector2Length(cx - x, cz - z)\n\n    spec.lastNoSpaceAtStart, spec.lastNoSpaceAtTarget = false , false\n\n    if not spec.useManualDriving and self.isServer then\n        --#debug -- remove existing elements\n        --#debug g_debugManager:removeGroup("AIAgentHasSpace")\n        --#debug\n        --#debug if not self:debugGetAgentHasSpaceAt(x, y, z, dirX, dirY, dirZ, "target") then\n            --#debug Logging.devWarning("%s No space for AI agent at target location %.2f %.2f %.2f", self.configFileName, x,y,z)\n                --#debug spec.lastNoSpaceAtTarget = true\n                --#debug end\n\n                --#debug local wx,wy,wz = getWorldTranslation(self.components[1].node)\n                --#debug local dx, dy, dz = localDirectionToWorld(self.components[1].node, 0, 0, 1)\n                --#debug if not self:debugGetAgentHasSpaceAt(wx,wy,wz, dx, dy, dz, "start") then\n                    --#debug Logging.devWarning("%s No space for AI agent at start location %.2f %.2f %.2f", self.configFileName, wx,wy,wz)\n                        --#debug spec.lastNoSpaceAtStart = true\n                        --#debug end\n\n                        setVehicleNavigationAgentTarget(spec.agentId, x, y, z, dirX, dirY, dirZ)\n                    end\n\n                    if spec.debugVehicle ~ = nil then\n                        spec.debugVehicle:setTarget(x, y, z, dirX, dirY, dirZ)\n                    end\n\n                    if spec.debugDump ~ = nil then\n                        if not useManualDriving then\n                            spec.debugDump:stopPlanningRecording()\n                            spec.debugDump:startPlanningRecording()\n                        else\n                                spec.debugDump:stopPlanningRecording()\n                            end\n\n                            spec.debugDump:setTarget(x, y, z, dirX, dirY, dirZ, cx, cy, cz, cDirX, cDirY, cDirZ, spec.maxSpeed)\n                        end\n\n                        SpecializationUtil.raiseEvent( self , "onAIDriveableStart" )\n                    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"startnewaiagentattachmentchain",children:"startNewAIAgentAttachmentChain"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"startNewAIAgentAttachmentChain()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIDrivable:startNewAIAgentAttachmentChain()\n    local spec = self.spec_aiDrivable\n    if spec.attachmentChains[spec.attachmentChainIndex] ~ = nil then\n        spec.attachmentChainIndex = spec.attachmentChainIndex + 1\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"unsetaitarget",children:"unsetAITarget"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"unsetAITarget()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIDrivable:unsetAITarget()\n    local spec = self.spec_aiDrivable\n    spec.isRunning = false\n    spec.task = nil\n    spec.useManualDriving = false\n\n    self:stopAIDriving()\n\n    SpecializationUtil.raiseEvent( self , "onAIDriveableEnd" )\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"updateaiagentattachmentoffsetdata",children:"updateAIAgentAttachmentOffsetData"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"updateAIAgentAttachmentOffsetData()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIDrivable:updateAIAgentAttachmentOffsetData()\n    local spec = self.spec_aiDrivable\n\n    if not spec.agentInfo.isValid then\n        return\n    end\n\n    local _, agentLength, _, _ = self:getAIAgentSize()\n    local numTrailers = 0\n    for ci = 1 , #spec.attachmentChains do\n        local chainAttachments = spec.attachmentChains[ci]\n        local isDynamicChain = true\n        local isStaticChain = true\n\n        local parentSteeringCenterNode = self:getAIRootNode()\n        for i = 1 , #chainAttachments do\n            local agentAttachment = chainAttachments[i]\n            if agentAttachment.rotCenterNode ~ = nil and isDynamicChain then\n                if numTrailers < AIDrivable.TRAILER_LIMIT then\n                    local jointNode = agentAttachment.jointNode or agentAttachment.jointNodeDynamic\n                    local attacherVehicleJointNode = agentAttachment.attacherVehicleJointNode or jointNode\n                    if attacherVehicleJointNode ~ = nil and jointNode ~ = nil then\n                        local _, _, tractorHitchOffset = localToLocal(attacherVehicleJointNode, parentSteeringCenterNode, 0 , 0 , 0 )\n\n                        local trailerHitchOffset\n                        if agentAttachment.jointNodeToHitchOffset ~ = nil then\n                            trailerHitchOffset = agentAttachment.jointNodeToHitchOffset[jointNode]\n                        else\n                                trailerHitchOffset = agentAttachment.trailerHitchOffset\n                            end\n\n                            if trailerHitchOffset ~ = nil then\n                                local centerOffset = agentAttachment.lengthOffset + (agentLength * 0.5 ) - (agentAttachment.length * 0.5 )\n                                local hasCollision = agentAttachment.hasCollision and 1 or 0\n\n                                table.insert(spec.attachmentsTrailerOffsetData, tractorHitchOffset)\n                                table.insert(spec.attachmentsTrailerOffsetData, trailerHitchOffset)\n                                table.insert(spec.attachmentsTrailerOffsetData, centerOffset)\n                                table.insert(spec.attachmentsTrailerOffsetData, hasCollision)\n\n                                parentSteeringCenterNode = agentAttachment.rotCenterNode\n                                numTrailers = numTrailers + 1\n                            end\n                        end\n                        isStaticChain = false\n                    end\n                elseif isStaticChain then\n                        if numTrailers > 0 then\n                            isDynamicChain = false\n                        end\n\n                        if agentAttachment.rotCenterNode = = nil then\n                            local aiRootNode = self:getAIRootNode()\n                            local _, _, z1 = localToLocal(agentAttachment.rootNode, aiRootNode, 0 , 0 , agentAttachment.length * 0.5 )\n                            local _, _, z2 = localToLocal(agentAttachment.rootNode, aiRootNode, 0 , 0 , - agentAttachment.length * 0.5 )\n\n                            local minZ = - spec.agentInfo.length * 0.5 + spec.agentInfo.lengthOffset\n                            local maxZ = spec.agentInfo.length * 0.5 + spec.agentInfo.lengthOffset\n                            local zDiffNeg = math.min( 0 , z1 - minZ, z2 - minZ)\n                            local zDiffPos = math.max( 0 , z1 - maxZ, z2 - maxZ)\n\n                            spec.attachmentsMaxLengthOffsetPos = math.max(spec.attachmentsMaxLengthOffsetPos, zDiffPos)\n                            spec.attachmentsMaxLengthOffsetNeg = math.min(spec.attachmentsMaxLengthOffsetNeg, zDiffNeg)\n                        end\n                    end\n                end\n            end\n        end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"updateaiagentattachments",children:"updateAIAgentAttachments"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"updateAIAgentAttachments()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIDrivable:updateAIAgentAttachments()\n    local spec = self.spec_aiDrivable\n\n    spec.attachments = { }\n    spec.attachmentChains = { }\n    spec.attachmentChainIndex = 1\n    spec.attachmentsTrailerOffsetData = { }\n    spec.attachmentsMaxWidth = 0\n    spec.attachmentsMaxHeight = 0\n\n    spec.attachmentsMaxLengthOffsetPos = 0\n    spec.attachmentsMaxLengthOffsetNeg = 0\n\n    self:collectAIAgentAttachments( self )\n    self:updateAIAgentAttachmentOffsetData()\n    self:updateAIAgentPoseData()\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"updateaiagentposedata",children:"updateAIAgentPoseData"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"updateAIAgentPoseData()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIDrivable:updateAIAgentPoseData()\n    local spec = self.spec_aiDrivable\n\n    local aiRootNode = self:getAIRootNode()\n\n    spec.poseData[ 1 ], spec.poseData[ 2 ], spec.poseData[ 3 ] = getWorldTranslation(aiRootNode)\n    spec.poseData[ 4 ], spec.poseData[ 5 ], spec.poseData[ 6 ] = localDirectionToWorld(aiRootNode, 0 , 0 , 1 )\n\n    local numTrailers = 0\n    local currentIndex = 6\n\n    for ci = 1 , #spec.attachmentChains do\n        local chainAttachments = spec.attachmentChains[ci]\n        local isDynamicChain = true\n\n        for i = 1 , #chainAttachments do\n            local agentAttachment = chainAttachments[i]\n            if agentAttachment.rotCenterNode ~ = nil and isDynamicChain then\n                if numTrailers < AIDrivable.TRAILER_LIMIT then\n                    spec.poseData[currentIndex + 1 ], spec.poseData[currentIndex + 2 ], spec.poseData[currentIndex + 3 ] = getWorldTranslation(agentAttachment.rotCenterNode)\n                    spec.poseData[currentIndex + 4 ], spec.poseData[currentIndex + 5 ], spec.poseData[currentIndex + 6 ] = localDirectionToWorld(agentAttachment.rotCenterNode, 0 , 0 , 1 )\n\n                    numTrailers = numTrailers + 1\n                    currentIndex = currentIndex + 6\n                end\n            else\n                    if numTrailers > 0 then\n                        isDynamicChain = false\n                    end\n                end\n            end\n        end\n\n        while #spec.poseData > currentIndex do\n            table.remove(spec.poseData, #spec.poseData)\n        end\n    end\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);