"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[89378],{28453(e,n,i){i.d(n,{R:()=>t,x:()=>d});var s=i(96540);const r={},l=s.createContext(r);function t(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(l.Provider,{value:n},e.children)}},71412(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>o,frontMatter:()=>t,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"script/Placeables/BeehiveSystem","title":"BeehiveSystem","description":"BeehiveSystem","source":"@site/../docs/script/Placeables/BeehiveSystem.md","sourceDirName":"script/Placeables","slug":"/script/Placeables/BeehiveSystem","permalink":"/FS25-Community-LUADOC/script/Placeables/BeehiveSystem","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"AIParameterVehicle","permalink":"/FS25-Community-LUADOC/script/Parameters/AIParameterVehicle"},"next":{"title":"Placeable","permalink":"/FS25-Community-LUADOC/script/Placeables/Placeable"}}');var r=i(74848),l=i(28453);const t={},d=void 0,a={},h=[{value:"BeehiveSystem",id:"beehivesystem",level:2},{value:"addBeehive",id:"addbeehive",level:3},{value:"addBeehivePalletSpawner",id:"addbeehivepalletspawner",level:3},{value:"consoleCommandBeehiveDebug",id:"consolecommandbeehivedebug",level:3},{value:"delete",id:"delete",level:3},{value:"getBeehiveInfluenceFactorAt",id:"getbeehiveinfluencefactorat",level:3},{value:"getBeehives",id:"getbeehives",level:3},{value:"getFarmBeehivePalletSpawner",id:"getfarmbeehivepalletspawner",level:3},{value:"getFarmHasBeehive",id:"getfarmhasbeehive",level:3},{value:"new",id:"new",level:3},{value:"onHourChanged",id:"onhourchanged",level:3},{value:"removeBeehive",id:"removebeehive",level:3},{value:"removeBeehivePalletSpawner",id:"removebeehivepalletspawner",level:3},{value:"showNoSpawnerWarning",id:"shownospawnerwarning",level:3},{value:"update",id:"update",level:3},{value:"updateBeehivesOutput",id:"updatebeehivesoutput",level:3},{value:"updateBeehivesState",id:"updatebeehivesstate",level:3},{value:"updateState",id:"updatestate",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"beehivesystem",children:"BeehiveSystem"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Functions"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#addbeehive",children:"addBeehive"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#addbeehivepalletspawner",children:"addBeehivePalletSpawner"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#consolecommandbeehivedebug",children:"consoleCommandBeehiveDebug"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#delete",children:"delete"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getbeehiveinfluencefactorat",children:"getBeehiveInfluenceFactorAt"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getbeehives",children:"getBeehives"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getfarmbeehivepalletspawner",children:"getFarmBeehivePalletSpawner"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getfarmhasbeehive",children:"getFarmHasBeehive"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#new",children:"new"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onhourchanged",children:"onHourChanged"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#removebeehive",children:"removeBeehive"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#removebeehivepalletspawner",children:"removeBeehivePalletSpawner"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#shownospawnerwarning",children:"showNoSpawnerWarning"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#update",children:"update"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#updatebeehivesoutput",children:"updateBeehivesOutput"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#updatebeehivesstate",children:"updateBeehivesState"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#updatestate",children:"updateState"})}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"addbeehive",children:"addBeehive"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"addBeehive()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"beehiveToAdd"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function BeehiveSystem:addBeehive(beehiveToAdd)\n    if # self.beehivesSortedRadius = = 0 then -- first beehive is added, subscribe to events\n        self:updateState()\n\n        g_messageCenter:subscribe(MessageType.HOUR_CHANGED, self.onHourChanged, self )\n        g_messageCenter:subscribe(MessageType.DAY_NIGHT_CHANGED, self.updateBeehivesState, self )\n    end\n\n    table.insert( self.beehivesSortedRadius, beehiveToAdd)\n\n    if self.mission.isMissionStarted then\n        self:showNoSpawnerWarning(beehiveToAdd)\n    end\n\n    -- make sure beehives with biggest radii are at the start of the list, so that iteration for crop yield bonus exits earlier\n        table.sort( self.beehivesSortedRadius, function (a, b) return a.spec_beehive.actionRadius > b.spec_beehive.actionRadius end )\n    end\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"addbeehivepalletspawner",children:"addBeehivePalletSpawner"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"addBeehivePalletSpawner()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"beehivePalletSpawner"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function BeehiveSystem:addBeehivePalletSpawner(beehivePalletSpawner)\n    table.addElement( self.beehivePalletSpawners, beehivePalletSpawner)\n\n    self:updateBeehivesOutput(beehivePalletSpawner:getOwnerFarmId())\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"consolecommandbeehivedebug",children:"consoleCommandBeehiveDebug"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"consoleCommandBeehiveDebug()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function BeehiveSystem:consoleCommandBeehiveDebug()\n    BeehiveSystem.DEBUG_ENABLED = not BeehiveSystem.DEBUG_ENABLED\n    return "BeehiveSystem.DEBUG_ENABLED = " .. tostring( BeehiveSystem.DEBUG_ENABLED)\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"delete",children:"delete"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"delete()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function BeehiveSystem:delete()\n    removeConsoleCommand( "gsBeehiveDebug" )\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"getbeehiveinfluencefactorat",children:"getBeehiveInfluenceFactorAt"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Returns factor between 0..1 based on presence of beehives relative to given world position\nindependent of farm"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getBeehiveInfluenceFactorAt()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"wx"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"wz"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function BeehiveSystem:getBeehiveInfluenceFactorAt(wx, wz)\n    local beehiveInfluenceFactor = 0\n\n    for i = 1 , # self.beehivesSortedRadius do\n        local beehive = self.beehivesSortedRadius[i]\n\n        -- accumulate influence of all behives\n        beehiveInfluenceFactor = beehiveInfluenceFactor + beehive:getBeehiveInfluenceFactor(wx, wz)\n        if beehiveInfluenceFactor > = 1 then\n            break -- stop if factor reached max of 1\n            end\n        end\n        --#debug if BeehiveSystem.DEBUG_ENABLED then\n            --#debug local wy = getTerrainHeightAtWorldPos(g_terrainNode, wx, 0, wz)\n            --#debug Utils.renderTextAtWorldPosition(wx, wy, wz, string.format("beehiveInfluenceFactor %.3f", math.min(beehiveInfluenceFactor, 1)), getCorrectTextSize(0.016), 0)\n            --#debug end\n            return math.min(beehiveInfluenceFactor, 1 )\n        end\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"getbeehives",children:"getBeehives"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getBeehives()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function BeehiveSystem:getBeehives()\n    return self.beehivesSortedRadius\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getfarmbeehivepalletspawner",children:"getFarmBeehivePalletSpawner"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getFarmBeehivePalletSpawner()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"farmId"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function BeehiveSystem:getFarmBeehivePalletSpawner(farmId)\n    for _, beehivePalletSpawner in ipairs( self.beehivePalletSpawners) do\n        if beehivePalletSpawner:getOwnerFarmId() = = farmId then\n            return beehivePalletSpawner\n        end\n    end\n    return nil\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getfarmhasbeehive",children:"getFarmHasBeehive"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getFarmHasBeehive()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"farmId"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function BeehiveSystem:getFarmHasBeehive(farmId)\n    for _, beehive in ipairs( self.beehivesSortedRadius) do\n        if beehive:getOwnerFarmId() = = farmId then\n            return true\n        end\n    end\n\n    return false\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"new",children:"new"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"new()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"mission"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"customMt"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function BeehiveSystem.new(mission, customMt)\n    local self = setmetatable( { } , customMt or BeehiveSystem _mt)\n\n    self.mission = mission\n\n    self.beehives = { }\n    self.beehivesSortedRadius = { }\n    self.beehivePalletSpawners = { }\n\n    self.isFxActive = false\n    self.isProductionActive = false\n\n    if self.mission:getIsServer() then\n        if g_addTestCommands then\n            addConsoleCommand( "gsBeehiveDebug" , "Toggles beehive debug mode" , "consoleCommandBeehiveDebug" , self )\n        end\n    end\n\n    self.updateCooldown = BeehiveSystem.COOLDOWN_DURATION\n    self.currentSpawnerUpdateIndex = 0\n\n    self.lastTimeNoSpawnerWarningDisplayed = 0\n    return self\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"onhourchanged",children:"onHourChanged"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onHourChanged()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function BeehiveSystem:onHourChanged()\n    self:updateBeehivesOutput()\n    self:updateBeehivesState()\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"removebeehive",children:"removeBeehive"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"removeBeehive()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"beehive"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function BeehiveSystem:removeBeehive(beehive)\n    table.removeElement( self.beehivesSortedRadius, beehive)\n\n    if # self.beehivesSortedRadius = = 0 then\n        -- last beehive was removed, unsubscribe from events\n        g_messageCenter:unsubscribe(MessageType.HOUR_CHANGED, self )\n        g_messageCenter:unsubscribe(MessageType.DAY_NIGHT_CHANGED, self )\n    end\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"removebeehivepalletspawner",children:"removeBeehivePalletSpawner"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"removeBeehivePalletSpawner()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"beehivePalletSpawner"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function BeehiveSystem:removeBeehivePalletSpawner(beehivePalletSpawner)\n    table.removeElement( self.beehivePalletSpawners, beehivePalletSpawner)\n\n    self:showNoSpawnerWarning(beehivePalletSpawner)\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"shownospawnerwarning",children:"showNoSpawnerWarning"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"show notification if no spawner is left for the farm"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"showNoSpawnerWarning()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"placeable"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function BeehiveSystem:showNoSpawnerWarning(placeable)\n    if self.mission:getIsClient() and(g_ time - self.lastTimeNoSpawnerWarningDisplayed) > 5000 then\n        local placeableFarmId = placeable:getOwnerFarmId()\n        local farmId = self.mission:getFarmId()\n        if self:getFarmHasBeehive(farmId) and farmId = = placeableFarmId and self:getFarmBeehivePalletSpawner(farmId) = = nil then\n            local text = g_i18n:getText( "ingameNotification_noPalletLocationAvailable" ) .. string.format( " (%s)" , g_i18n:getText( "category_beeHives" ))\n            self.mission:addIngameNotification(FSBaseMission.INGAME_NOTIFICATION_CRITICAL, text)\n            self.lastTimeNoSpawnerWarningDisplayed = g_ time\n        end\n    end\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"update",children:"update"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"update()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function BeehiveSystem:update()\n    if # self.beehivePalletSpawners = = 0 or not self.mission:getIsServer() then\n        return\n    end\n\n    if self.updateCooldown < = 0 then\n        local beehiveSpawner = self.beehivePalletSpawners[ self.currentSpawnerUpdateIndex]\n        if beehiveSpawner ~ = nil then\n            beehiveSpawner:updatePallets()\n            self.currentSpawnerUpdateIndex = self.currentSpawnerUpdateIndex + 1\n        else\n                self.currentSpawnerUpdateIndex = 1\n                self.updateCooldown = BeehiveSystem.COOLDOWN_DURATION\n            end\n        else\n                self.updateCooldown = self.updateCooldown - 1\n            end\n        end\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"updatebeehivesoutput",children:"updateBeehivesOutput"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"collects honey from all behives and spawns pallets at triggers"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"updateBeehivesOutput(integer? farmId)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"integer?"}),(0,r.jsx)(n.th,{children:"farmId"}),(0,r.jsx)(n.th,{children:"optional filter for farm id"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function BeehiveSystem:updateBeehivesOutput(farmId)\n    if self.mission:getIsServer() then\n        for i = 1 , # self.beehivesSortedRadius do\n            local beehive = self.beehivesSortedRadius[i]\n            local beehiveOwner = beehive:getOwnerFarmId()\n            if farmId = = nil or(farmId = = beehiveOwner) then -- optional filter\n                local palletSpawner = self:getFarmBeehivePalletSpawner(beehiveOwner)\n                if palletSpawner ~ = nil then\n                    local honeyAmount = beehive:getHoneyAmountToSpawn()\n                    if honeyAmount > 0 then\n                        palletSpawner:addFillLevel(honeyAmount) -- accumulate fillLevel of all beehives first, update spawners once at the end\n                    end\n                end\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"updatebeehivesstate",children:"updateBeehivesState"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"updates beehive fx and production state"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"updateBeehivesState()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function BeehiveSystem:updateBeehivesState()\n    self:updateState()\n\n    for i = 1 , # self.beehivesSortedRadius do\n        self.beehivesSortedRadius[i]:updateBeehiveState()\n    end\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"updatestate",children:"updateState"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"updates internal state used by beehives"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"updateState()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function BeehiveSystem:updateState()\n    local environment = g_currentMission.environment\n    self.isFxActive = true\n    self.isProductionActive = environment.currentSeason ~ = Season.WINTER\n\n    if not environment.isSunOn or environment.weather:getIsRaining() or not self.isProductionActive then\n        self.isFxActive = false\n    end\nend\n\n"})})]})}function o(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);