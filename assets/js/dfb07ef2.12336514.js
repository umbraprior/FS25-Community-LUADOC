"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[13527],{28453(e,n,l){l.d(n,{R:()=>r,x:()=>a});var i=l(96540);const s={},t=i.createContext(s);function r(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(t.Provider,{value:n},e.children)}},54148(e,n,l){l.r(n),l.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"script/Handtools/HandTool","title":"HandTool","description":"HandTool","source":"@site/../docs/script/Handtools/HandTool.md","sourceDirName":"script/Handtools","slug":"/script/Handtools/HandTool","permalink":"/FS25-Community-LUADOC/script/Handtools/HandTool","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"GuidedTourManager","permalink":"/FS25-Community-LUADOC/script/GuidedTour/GuidedTourManager"},"next":{"title":"HandToolChainsaw","permalink":"/FS25-Community-LUADOC/script/Handtools/HandToolChainsaw"}}');var s=l(74848),t=l(28453);const r={},a=void 0,d={},o=[{value:"HandTool",id:"handtool",level:2},{value:"attachTool",id:"attachtool",level:3},{value:"attachToolToCamera",id:"attachtooltocamera",level:3},{value:"attachToolToHand",id:"attachtooltohand",level:3},{value:"calculateSellPrice",id:"calculatesellprice",level:3},{value:"clearActionEvents",id:"clearactionevents",level:3},{value:"createLoadingTask",id:"createloadingtask",level:3},{value:"delete",id:"delete",level:3},{value:"detachTool",id:"detachtool",level:3},{value:"finishLoadingTask",id:"finishloadingtask",level:3},{value:"getCarryingPlayer",id:"getcarryingplayer",level:3},{value:"getIsCarried",id:"getiscarried",level:3},{value:"getIsHeld",id:"getisheld",level:3},{value:"getIsSynchronized",id:"getissynchronized",level:3},{value:"getNeedsSaving",id:"getneedssaving",level:3},{value:"getPrice",id:"getprice",level:3},{value:"getSellPrice",id:"getsellprice",level:3},{value:"getUniqueId",id:"getuniqueid",level:3},{value:"i3dFileLoaded",id:"i3dfileloaded",level:3},{value:"init",id:"init",level:3},{value:"loadFinished",id:"loadfinished",level:3},{value:"new",id:"new",level:3},{value:"onFinishedLoading",id:"onfinishedloading",level:3},{value:"periodChanged",id:"periodchanged",level:3},{value:"postInit",id:"postinit",level:3},{value:"postReadStream",id:"postreadstream",level:3},{value:"postWriteStream",id:"postwritestream",level:3},{value:"readStream",id:"readstream",level:3},{value:"readUpdateStream",id:"readupdatestream",level:3},{value:"register",id:"register",level:3},{value:"registerEvents",id:"registerevents",level:3},{value:"registerSavegameXMLPaths",id:"registersavegamexmlpaths",level:3},{value:"registerXMLPaths",id:"registerxmlpaths",level:3},{value:"saveToXMLFile",id:"savetoxmlfile",level:3},{value:"setCarryingPlayer",id:"setcarryingplayer",level:3},{value:"setFilename",id:"setfilename",level:3},{value:"setLoadCallback",id:"setloadcallback",level:3},{value:"setLoadingState",id:"setloadingstate",level:3},{value:"setLoadingStep",id:"setloadingstep",level:3},{value:"setType",id:"settype",level:3},{value:"setUniqueId",id:"setuniqueid",level:3},{value:"startHolding",id:"startholding",level:3},{value:"stopHolding",id:"stopholding",level:3},{value:"update",id:"update",level:3},{value:"writeStream",id:"writestream",level:3},{value:"writeUpdateStream",id:"writeupdatestream",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"handtool",children:"HandTool"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"The hand tool class, representing a hand tool instance."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parent"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"?version=script&category=&class=",children:"Object"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Functions"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#attachtool",children:"attachTool"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#attachtooltocamera",children:"attachToolToCamera"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#attachtooltohand",children:"attachToolToHand"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#calculatesellprice",children:"calculateSellPrice"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#clearactionevents",children:"clearActionEvents"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#createloadingtask",children:"createLoadingTask"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#delete",children:"delete"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#detachtool",children:"detachTool"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#finishloadingtask",children:"finishLoadingTask"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getcarryingplayer",children:"getCarryingPlayer"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getiscarried",children:"getIsCarried"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getisheld",children:"getIsHeld"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getissynchronized",children:"getIsSynchronized"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getneedssaving",children:"getNeedsSaving"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getprice",children:"getPrice"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getsellprice",children:"getSellPrice"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getuniqueid",children:"getUniqueId"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#i3dfileloaded",children:"i3dFileLoaded"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#init",children:"init"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#loadfinished",children:"loadFinished"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#new",children:"new"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onfinishedloading",children:"onFinishedLoading"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#periodchanged",children:"periodChanged"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#postinit",children:"postInit"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#postreadstream",children:"postReadStream"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#postwritestream",children:"postWriteStream"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#readstream",children:"readStream"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#readupdatestream",children:"readUpdateStream"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#register",children:"register"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registerevents",children:"registerEvents"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registersavegamexmlpaths",children:"registerSavegameXMLPaths"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registerxmlpaths",children:"registerXMLPaths"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#savetoxmlfile",children:"saveToXMLFile"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#setcarryingplayer",children:"setCarryingPlayer"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#setfilename",children:"setFilename"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#setloadcallback",children:"setLoadCallback"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#setloadingstate",children:"setLoadingState"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#setloadingstep",children:"setLoadingStep"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#settype",children:"setType"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#setuniqueid",children:"setUniqueId"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#startholding",children:"startHolding"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#stopholding",children:"stopHolding"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#update",children:"update"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#writestream",children:"writeStream"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#writeupdatestream",children:"writeUpdateStream"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"attachtool",children:"attachTool"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Attaches the tool to its carrying player, based on the player's camera perspective."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"attachTool()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function HandTool:attachTool()\n\n    -- Do nothing if the tool is not being held.A player is needed to attach to.\n        if not self:getIsHeld() then\n            return\n        end\n\n        -- Handle attaching the tool to the player or to their camera, based on the perspective.\n        -- Note that only the client player can hold a tool in first person, the tool is always in the hand when viewed from another player's perspective.\n        if self.carryingPlayer:getForceHandToolFirstPerson() and self.carryingPlayer.camera.isFirstPerson then\n            self:attachToolToCamera()\n        else\n                self:attachToolToHand()\n            end\n\n            if self.rootNode ~ = nil then\n                setVisibility( self.rootNode, true )\n            end\n        end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"attachtooltocamera",children:"attachToolToCamera"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Attaches the tool directly to the player's camera, using the first person node as an offset."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"attachToolToCamera()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function HandTool:attachToolToCamera()\n\n    -- If the tool is not held or has no root node, do nothing.\n        if not self:getIsHeld() or self.rootNode = = nil then\n            return\n        end\n\n        -- If there is no first person node, attach the root node directly to the camera with no offset, log a warning, and do nothing more.\n            if self.firstPersonNode = = nil then\n                Logging.warning( "Handtool %s is missing first person node, using no offset!" , self.typeName)\n                link( self:getCarryingPlayer().camera.pitchNode, self.rootNode)\n                setTranslation( self.rootNode, 0 , 0 , 0 )\n                setRotation( self.rootNode, 0 , 0 , 0 )\n                return\n            end\n\n            -- Link the root node to the camera\'s pitch node, so that the first person node is centred on it.\n            HandToolUtil.linkAndTransformRelativeToParent( self.rootNode, self.firstPersonNode, self:getCarryingPlayer().camera.pitchNode)\n        end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"attachtooltohand",children:"attachToolToHand"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Attaches the tool to the player's hand, using the hand node as an offset."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"attachToolToHand()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function HandTool:attachToolToHand()\n\n    -- If the tool is not held, or the graphics of the player are invalid, do nothing.\n        if not self:getIsHeld() or self.carryingPlayer.graphicsComponent = = nil or self.carryingPlayer.graphicsComponent.model = = nil then\n            Logging.error( "Invalid player configuration or tool is not held, cannot equip hand tool" )\n            return false\n        end\n\n        -- If there is no root node, do nothing.\n            if self.rootNode = = nil then\n                return false\n            end\n\n            -- Get the player\'s model.\n            local playerModel = self.carryingPlayer.graphicsComponent.model\n\n            -- If there is no hand node, log a warning, zero the offset, and return.\n            if self.handNode = = nil then\n                Logging.warning( "Handtool %s is missing hand node, using no offset!" , self.typeName)\n                link(playerModel.thirdPersonRightHandNode, self.rootNode)\n                setTranslation( self.rootNode, 0 , 0 , 0 )\n                setRotation( self.rootNode, 0 , 0 , 0 )\n                return false\n            end\n\n            local handNode = playerModel.thirdPersonRightHandNode\n            if self.useLeftHand then\n                handNode = playerModel.thirdPersonLeftHandNode\n            end\n\n            -- Link the tool to the hand and transform it so that the tool\'s hand node matches the transform of the player\'s hand node.\n            HandToolUtil.linkAndTransformRelativeToParent( self.rootNode, self.handNode, handNode)\n\n            return true\n        end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"calculatesellprice",children:"calculateSellPrice"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Calculate price of vehicle given a bunch of parameters"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"calculateSellPrice()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"storeItem"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"age"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"price"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function HandTool.calculateSellPrice(storeItem, age, price)\n    local ageInYears = age / Environment.PERIODS_IN_YEAR\n    local ageFactor = math.min( - 0.1 * math.log(ageInYears) + 0.75 , 0.8 )\n\n    return math.max(price * ageFactor, price * 0.03 )\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"clearactionevents",children:"clearActionEvents"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Unbinds and removes all action events related to this tool."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"clearActionEvents(boolean? clearCarriedActionEvents)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"boolean?"}),(0,s.jsx)(n.th,{children:"clearCarriedActionEvents"}),(0,s.jsx)(n.th,{children:"If this is true, the carried action events will be cleared instead."})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function HandTool:clearActionEvents(clearCarriedActionEvents)\n    g_inputBinding:beginActionEventsModification( PlayerInputComponent.INPUT_CONTEXT_NAME)\n    for inputAction, actionEvent in pairs( self.actionEvents) do\n        g_inputBinding:removeActionEvent(actionEvent.actionEventId)\n        self.actionEvents[inputAction] = nil\n    end\n    g_inputBinding:endActionEventsModification()\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"createloadingtask",children:"createLoadingTask"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Creates a loading task in the loadingTasks table with the given target and returns it."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"createLoadingTask(any target)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"target"}),(0,s.jsx)(n.th,{children:"The id or reference used to track the loading task."})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"task"}),(0,s.jsx)(n.th,{children:"The created loading task."})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function HandTool:createLoadingTask(target)\n    return SpecializationUtil.createLoadingTask( self , target)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"delete",children:"delete"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Cleans up any resources the hand tool uses."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"delete()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function HandTool:delete()\n    if self.isDeleted then\n        return\n    end\n\n    g_currentMission:removeOwnedItem( self )\n\n    g_messageCenter:unsubscribeAll( self )\n\n    local mission = g_currentMission\n    local handToolSystem = mission.handToolSystem\n\n    if self.holder ~ = nil then\n        self:setHolder( nil , true )\n    end\n\n    -- If an i3d file was loaded, release the id.\n    if self.sharedLoadRequestId ~ = nil then\n        g_i3DManager:releaseSharedI3DFile( self.sharedLoadRequestId)\n        self.sharedLoadRequestId = nil\n    end\n\n    SpecializationUtil.raiseEvent( self , "onDelete" )\n\n    if self.rootNode ~ = nil and entityExists( self.rootNode) then\n        delete( self.rootNode)\n        self.rootNode = nil\n    end\n\n    handToolSystem:removeHandTool( self )\n\n    if self.externalSoundsFile ~ = nil then\n        self.externalSoundsFile:delete()\n        self.externalSoundsFile = nil\n    end\n\n    HandTool:superClass().delete( self )\n\n    self.isDeleted = true\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"detachtool",children:"detachTool"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Detaches the tool from its carrying player, leaving it unlinked."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"detachTool()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function HandTool:detachTool()\n    -- If there is no root node to detach, do nothing.\n        if self.rootNode = = nil then\n            return\n        end\n\n        setVisibility( self.rootNode, false )\n\n        -- Unlink the root node completely.\n        unlink( self.rootNode)\n    end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"finishloadingtask",children:"finishLoadingTask"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Marks the given task as done, and calls onFinishedLoading, if readyForFinishLoading is true."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"finishLoadingTask(table task)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"task"}),(0,s.jsx)(n.th,{children:"The task to mark as complete. Should be obtained from createLoadingTask."})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function HandTool:finishLoadingTask(task)\n    SpecializationUtil.finishLoadingTask( self , task)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getcarryingplayer",children:"getCarryingPlayer"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Gets the player who is currently carrying this hand tool."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getCarryingPlayer()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"player"}),(0,s.jsx)(n.th,{children:"The player who has this hand tool in their inventory."})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function HandTool:getCarryingPlayer()\n    return self.carryingPlayer\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getiscarried",children:"getIsCarried"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Gets the value representing if this tool is currently carried by a player."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getIsCarried()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"isCarried"}),(0,s.jsx)(n.th,{children:"True if this tool is in a player's inventory; otherwise false. Note that getIsHeld can also be true; this value is just for if the player has the tool on them."})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function HandTool:getIsCarried()\n    return self.carryingPlayer ~ = nil\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getisheld",children:"getIsHeld"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Gets the value representing if this tool is currently equipped (held) by a player."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getIsHeld()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"isHeld"}),(0,s.jsx)(n.th,{children:"True if this tool is carried and currently used by the player; otherwise false."})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function HandTool:getIsHeld()\n\n    -- If the tool is not carried at all, it cannot be held, so return false.\n    if not self:getIsCarried() then\n        return false\n    end\n\n    return self.isHeld\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getissynchronized",children:"getIsSynchronized"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Gets the value representing the load state of this tool, where true means the tool has fully loaded and synchronised."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getIsSynchronized()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"hasLoaded"}),(0,s.jsx)(n.th,{children:"True if the tool has fully loaded and synchronised; otherwise false."})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function HandTool:getIsSynchronized()\n    return self.loadingStep = = SpecializationLoadStep.SYNCHRONIZED\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getneedssaving",children:"getNeedsSaving"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getNeedsSaving()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function HandTool:getNeedsSaving()\n    return self.canBeSaved\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getprice",children:"getPrice"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Returns price"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getPrice(float price)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"float"}),(0,s.jsx)(n.th,{children:"price"}),(0,s.jsx)(n.th,{children:"price"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function HandTool:getPrice()\n    return self.price\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getsellprice",children:"getSellPrice"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Get sell price"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getSellPrice()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"float"}),(0,s.jsx)(n.th,{children:"sellPrice"}),(0,s.jsx)(n.th,{children:"sell price"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function HandTool:getSellPrice()\n    local storeItem = g_storeManager:getItemByXMLFilename( self.configFileName)\n    return HandTool.calculateSellPrice(storeItem, self.age, self:getPrice())\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getuniqueid",children:"getUniqueId"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Gets this tool's unique id."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getUniqueId()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"float"}),(0,s.jsx)(n.th,{children:"uniqueId"}),(0,s.jsx)(n.th,{children:"This tool's unique id."})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function HandTool:getUniqueId()\n    return self.uniqueId\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"i3dfileloaded",children:"i3dFileLoaded"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"i3dFileLoaded()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"i3dNode"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"failedReason"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"arguments"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"i3dLoadingId"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function HandTool:i3dFileLoaded(i3dNode, failedReason, arguments, i3dLoadingId)\n    if i3dNode = = 0 then\n        self:setLoadingState(HandToolLoadingState.ERROR)\n        Logging.xmlError( self.xmlFile, "Handtool i3d loading failed!" )\n        self:loadCallback()\n        return\n    end\n\n    self.i3dNode = i3dNode\n    setVisibility(i3dNode, false )\n\n    self:loadFinished()\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"init",children:"init"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Initialises the hand tool class."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"init()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function HandTool.init()\n\n    -- Call the init function for all specialisations that have the function.\n        for name, spec in pairs(g_handToolSpecializationManager:getSpecializations()) do\n            local classObj = ClassUtil.getClassObject(spec.className)\n            if classObj = = nil or rawget(classObj, "init" ) = = nil then\n                continue\n            end\n\n            classObj.init()\n        end\n    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"loadfinished",children:"loadFinished"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"loadFinished()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function HandTool:loadFinished()\n    self:setLoadingState(HandToolLoadingState.OK)\n    self:setLoadingStep(SpecializationLoadStep.LOAD)\n\n    self.age = 0\n    self:setOwnerFarmId( self.handToolLoadingData.ownerFarmId, true )\n    self.mass = self.xmlFile:getValue( "handTool.base#mass" , 0 )\n\n    local savegame = self.savegame\n    if savegame ~ = nil then\n        local uniqueId = savegame.xmlFile:getValue(savegame.key .. "#uniqueId" , nil )\n        if uniqueId ~ = nil then\n            self:setUniqueId(uniqueId)\n        end\n\n        -- Load this early:it used by the handtool load functions already\n        local farmId = savegame.xmlFile:getValue(savegame.key .. "#farmId" , AccessHandler.EVERYONE)\n        if g_farmManager.mergedFarms ~ = nil and g_farmManager.mergedFarms[farmId] ~ = nil then\n            farmId = g_farmManager.mergedFarms[farmId]\n        end\n\n        self:setOwnerFarmId(farmId, true )\n    end\n\n    self.price = self.handToolLoadingData.price\n    if self.price = = 0 or self.price = = nil then\n        local storeItem = g_storeManager:getItemByXMLFilename( self.configFileName)\n        self.price = StoreItemUtil.getDefaultPrice(storeItem, self.configurations)\n    end\n\n    self.typeDesc = self.xmlFile:getValue( "handTool.base.typeDesc" , "TypeDescription" , self.customEnvironment, true )\n    self.activateText = self.xmlFile:getValue( "handTool.base.actions#activate" , "Activate" , self.customEnvironment, true )\n\n    if self.i3dNode ~ = nil then\n        self.rootNode = getChildAt( self.i3dNode, 0 )\n\n        self.components = { }\n        I3DUtil.loadI3DComponents( self.i3dNode, self.components)\n\n        self.i3dMappings = { }\n        I3DUtil.loadI3DMapping( self.xmlFile, "handTool" , self.rootLevelNodes, self.i3dMappings)\n\n        for _, component in ipairs( self.components) do\n            link(getRootNode(), component.node)\n            setVisibility(component.node, false )\n        end\n\n        delete( self.i3dNode)\n        self.i3dNode = nil\n\n        self.graphicalNode = self.xmlFile:getValue( "handTool.base.graphics#node" , nil , self.components, self.i3dMappings)\n\n        if self.graphicalNode = = nil then\n            Logging.xmlError( self.xmlFile, "Handtool is missing graphical node! Graphics will not work as intended!" )\n            self:setLoadingState(HandToolLoadingState.ERROR)\n            self:loadCallback()\n            return\n        end\n\n        self.graphicalNodeParent = getParent( self.graphicalNode)\n        self.handNode = self.xmlFile:getValue( "handTool.base.handNode#node" , nil , self.components, self.i3dMappings)\n        self.useLeftHand = self.xmlFile:getValue( "handTool.base.handNode#useLeftHand" , self.useLeftHand)\n        self.firstPersonNode = self.xmlFile:getValue( "handTool.base.firstPersonNode#node" , nil , self.components, self.i3dMappings)\n    end\n\n    self.shouldLockFirstPerson = self.xmlFile:getValue( "handTool.base.graphics#lockFirstPerson" , nil )\n    self.runMultiplier = self.xmlFile:getValue( "handTool.base#runMultiplier" , 1.0 )\n    self.walkMultiplier = self.xmlFile:getValue( "handTool.base#walkMultiplier" , 1.0 )\n    self.jumpMultiplier = math.clamp( self.xmlFile:getValue( "handTool.base#jumpMultiplier" , 1.0 ), 0 , 1.2 )\n    self.canCrouch = self.xmlFile:getValue( "handTool.base#canCrouch" , true )\n    self.mustBeHeld = self.xmlFile:getValue( "handTool.base#mustBeHeld" , false )\n    self.canBeSaved = self.xmlFile:getValue( "handTool.base#canBeSaved" , true )\n    if not self.handToolLoadingData.isSaved then\n        self.canBeSaved = false\n    end\n\n    self.canBeDropped = self.xmlFile:getValue( "handTool.base#canBeDropped" , true )\n    if not self.handToolLoadingData.canBeDropped then\n        self.canBeDropped = false\n    end\n\n    -- Load the sound properties.\n    local soundsXMLFilename = self.xmlFile:getValue( "handTool.base.sounds#filename" , nil )\n    soundsXMLFilename = Utils.getFilename(soundsXMLFilename, self.baseDirectory)\n    self.externalSoundsFile = XMLFile.loadIfExists( "TempExternalSounds" , soundsXMLFilename, HandTool.xmlSchemaSounds)\n\n    SpecializationUtil.raiseEvent( self , "onLoad" , self.xmlFile, self.baseDirectory)\n    if self.loadingState ~ = HandToolLoadingState.OK then\n        Logging.xmlError( self.xmlFile, "HandTool loading failed!" )\n        self:loadCallback()\n        return\n    end\n\n    self:setLoadingStep(SpecializationLoadStep.POST_LOAD)\n\n    SpecializationUtil.raiseEvent( self , "onPostLoad" , self.savegame)\n\n    if self.loadingState ~ = HandToolLoadingState.OK then\n        Logging.xmlError( self.xmlFile, "HandTool post-loading failed!" )\n        self:loadCallback()\n        return\n    end\n\n    if savegame ~ = nil then\n        self.age = savegame.xmlFile:getValue(savegame.key .. "#age" , 0 )\n        self.price = savegame.xmlFile:getValue(savegame.key .. "#price" , self.price)\n    end\n\n    local mission = g_currentMission\n    if mission ~ = nil and mission.environment ~ = nil then\n        g_messageCenter:subscribe(MessageType.PERIOD_CHANGED, self.periodChanged, self )\n    end\n\n    if # self.loadingTasks = = 0 then\n        self:onFinishedLoading()\n    else\n            self.readyForFinishLoading = true\n            self:setLoadingStep(SpecializationLoadStep.AWAIT_SUB_I3D)\n        end\n    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"new",children:"new"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Creates a new hand tool instance."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"new(boolean isServer, boolean isClient, table? customMt)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"boolean"}),(0,s.jsx)(n.th,{children:"isServer"}),(0,s.jsx)(n.th,{children:"True if this instance is being created on the server."})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"boolean"}),(0,s.jsx)(n.td,{children:"isClient"}),(0,s.jsx)(n.td,{children:"True if this instance is being created on the client."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"table?"}),(0,s.jsx)(n.td,{children:"customMt"}),(0,s.jsx)(n.td,{})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table?"}),(0,s.jsx)(n.th,{children:"self"}),(0,s.jsx)(n.th,{children:"The created instance."})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function HandTool.new(isServer, isClient, customMt)\n    local self = Object.new(isServer, isClient, customMt or HandTool _mt)\n\n    self.finishedLoading = false\n    self.isDeleted = false\n    self.updateLoopIndex = - 1\n    self.sharedLoadRequestId = nil\n    self.loadingState = HandToolLoadingState.OK\n    self.loadingStep = SpecializationLoadStep.CREATED\n\n    self.loadingTasks = { }\n    self.readyForFinishLoading = false\n\n    self.uniqueId = nil\n\n    self.rootNode = nil\n    self.graphicalNode = nil\n    self.handNode = nil\n    self.useLeftHand = false\n    self.firstPersonNode = nil\n\n    self.mass = 0\n\n    self.actionEvents = { }\n\n    self.carryingPlayer = nil\n    self.isHeld = false\n\n    self.holder = nil\n\n    return self\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onfinishedloading",children:"onFinishedLoading"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Called after all specializations have finished loading, and handles finalising the load state and cleaning up any\nloading variables."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onFinishedLoading()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function HandTool:onFinishedLoading()\n    self:setLoadingStep(SpecializationLoadStep.FINISHED)\n    SpecializationUtil.raiseEvent( self , "onLoadFinished" , self.savegame)\n\n    -- if we are the server or in single player we don\'t need to be synchronized\n        if self.isServer then\n            self:setLoadingStep(SpecializationLoadStep.SYNCHRONIZED)\n        end\n\n        self.finishedLoading = true\n\n        local mission = g_currentMission\n        local handToolSystem = mission.handToolSystem\n        if not handToolSystem:addHandTool( self ) then\n            Logging.xmlError( self.xmlFile, "Failed to register handTool!" )\n            self:setLoadingState(HandToolLoadingState.ERROR)\n            self:loadCallback()\n            return\n        end\n\n        if self.handToolLoadingData.isRegistered then\n            self:register()\n        end\n\n        local holder = self.handToolLoadingData.holder\n        if holder ~ = nil then\n            if holder:getCanPickupHandTool( self ) then\n                self.pendingHolder = holder\n            end\n        else\n                local savegame = self.savegame\n                if savegame ~ = nil then\n                    self.pendingHolderUniqueId = savegame.xmlFile:getValue(savegame.key .. ".holder#uniqueId" , nil )\n                end\n            end\n\n            g_currentMission:addOwnedItem( self )\n\n            self.savegame = nil\n            self.handToolLoadingData = nil\n\n            self.xmlFile:delete()\n            self.xmlFile = nil\n\n            -- Clean up the sounds file.\n            if self.externalSoundsFile ~ = nil then\n                self.externalSoundsFile:delete()\n                self.externalSoundsFile = nil\n            end\n\n            self:loadCallback()\n        end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"periodchanged",children:"periodChanged"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Called if period changed"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"periodChanged()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function HandTool:periodChanged()\n    self.age = self.age + 1\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"postinit",children:"postInit"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Post-initialises the hand tool class."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"postInit()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function HandTool.postInit()\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"postreadstream",children:"postReadStream"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Called on client side on join when the handTool was fully loaded"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"postReadStream(integer streamId, table connection)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"integer"}),(0,s.jsx)(n.th,{children:"streamId"}),(0,s.jsx)(n.th,{children:"stream ID"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"table"}),(0,s.jsx)(n.td,{children:"connection"}),(0,s.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function HandTool:postReadStream(streamId, connection)\n    if streamReadBool(streamId) then\n        self.pendingHolderObjectId = NetworkUtil.readNodeObjectId(streamId)\n        self.isHoldingPending = streamReadBool(streamId)\n        self:raiseActive()\n    end\n\n    SpecializationUtil.raiseEvent( self , "onReadStream" , streamId, connection)\n\n    self:setLoadingStep(SpecializationLoadStep.SYNCHRONIZED)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"postwritestream",children:"postWriteStream"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Called on server side when handTool is fully loaded on client side"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"postWriteStream(integer streamId, table connection)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"integer"}),(0,s.jsx)(n.th,{children:"streamId"}),(0,s.jsx)(n.th,{children:"stream ID"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"table"}),(0,s.jsx)(n.td,{children:"connection"}),(0,s.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function HandTool:postWriteStream(streamId, connection)\n    local holder = self:getHolder()\n    if streamWriteBool(streamId, holder ~ = nil ) then\n        NetworkUtil.writeNodeObject(streamId, holder)\n        streamWriteBool(streamId, self:getIsHeld())\n    end\n\n    SpecializationUtil.raiseEvent( self , "onWriteStream" , streamId, connection)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"readstream",children:"readStream"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Reads the initial tool state from the server."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"readStream(integer streamId, Connection connection, integer objectId)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"integer"}),(0,s.jsx)(n.th,{children:"streamId"}),(0,s.jsx)(n.th,{children:"The id of the stream from which to read."})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Connection"}),(0,s.jsx)(n.td,{children:"connection"}),(0,s.jsx)(n.td,{children:"The connection to the server."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"integer"}),(0,s.jsx)(n.td,{children:"objectId"}),(0,s.jsx)(n.td,{children:"The id of the tool object."})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function HandTool:readStream(streamId, connection, objectId)\n    HandTool:superClass().readStream( self , streamId, connection, objectId)\n\n    local filename = NetworkUtil.convertFromNetworkFilename(streamReadString(streamId))\n    local canBeDropped = streamReadBool(streamId)\n\n    if self.loadingStep ~ = SpecializationLoadStep.CREATED then\n        Logging.error( "Try to intialize loading of a handtool that is already loading!" )\n        return\n    end\n\n    local data = HandToolLoadingData.new()\n    data:setFilename(filename)\n    data:setOwnerFarmId( self.ownerFarmId)\n    data:setCanBeDropped(canBeDropped)\n\n    local asyncCallbackFunction = function (_, handTool, loadingState)\n        if loadingState = = HandToolLoadingState.OK then\n            g_client:onObjectFinishedAsyncLoading(handTool)\n        else\n                Logging.error( "Failed to load handtool on client" )\n                printCallstack()\n            end\n        end\n\n        data:loadHandToolOnClient( self , asyncCallbackFunction, nil )\n    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"readupdatestream",children:"readUpdateStream"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Called on client side on update"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"readUpdateStream(integer streamId, table connection, )"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"integer"}),(0,s.jsx)(n.th,{children:"streamId"}),(0,s.jsx)(n.th,{children:"stream ID"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"table"}),(0,s.jsx)(n.td,{children:"connection"}),(0,s.jsx)(n.td,{children:"connection"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"connection"}),(0,s.jsx)(n.td,{})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function HandTool:readUpdateStream(streamId, timestamp, connection)\n    SpecializationUtil.raiseEvent( self , "onReadUpdateStream" , streamId, timestamp, connection)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"register",children:"register"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"register()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"alreadySent"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function HandTool:register(alreadySent)\n    HandTool:superClass().register( self , alreadySent)\n\n    SpecializationUtil.raiseEvent( self , "onRegistered" , alreadySent)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registerevents",children:"registerEvents"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Registers all specialization events to the given hand tool type."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerEvents(table handToolType)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"handToolType"}),(0,s.jsx)(n.th,{children:"The specialisation type to which the functions are registered."})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function HandTool.registerEvents(handToolType)\n    SpecializationUtil.registerEvent(handToolType, "onPreLoad" )\n    SpecializationUtil.registerEvent(handToolType, "onLoad" )\n    SpecializationUtil.registerEvent(handToolType, "onPostLoad" )\n    SpecializationUtil.registerEvent(handToolType, "onLoadFinished" )\n    SpecializationUtil.registerEvent(handToolType, "onDelete" )\n    SpecializationUtil.registerEvent(handToolType, "onSave" )\n    SpecializationUtil.registerEvent(handToolType, "onRegistered" )\n    SpecializationUtil.registerEvent(handToolType, "onWriteStream" )\n    SpecializationUtil.registerEvent(handToolType, "onReadStream" )\n    SpecializationUtil.registerEvent(handToolType, "onWriteUpdateStream" )\n    SpecializationUtil.registerEvent(handToolType, "onReadUpdateStream" )\n    SpecializationUtil.registerEvent(handToolType, "onPreUpdate" )\n    SpecializationUtil.registerEvent(handToolType, "onUpdate" )\n    SpecializationUtil.registerEvent(handToolType, "onPostUpdate" )\n    SpecializationUtil.registerEvent(handToolType, "onUpdateTick" )\n    SpecializationUtil.registerEvent(handToolType, "onDraw" )\n\n    SpecializationUtil.registerEvent(handToolType, "onRegisterActionEvents" )\n    SpecializationUtil.registerEvent(handToolType, "onHandToolHolderChanged" )\n    SpecializationUtil.registerEvent(handToolType, "onHeldStart" )\n    SpecializationUtil.registerEvent(handToolType, "onHeldEnd" )\n\n    SpecializationUtil.registerEvent(handToolType, "onCarryingPlayerStyleChanged" )\n    SpecializationUtil.registerEvent(handToolType, "onCarryingPlayerShown" )\n    SpecializationUtil.registerEvent(handToolType, "onCarryingPlayerHidden" )\n    SpecializationUtil.registerEvent(handToolType, "onCarryingPlayerEnteredVehicle" )\n    SpecializationUtil.registerEvent(handToolType, "onCarryingPlayerExitedVehicle" )\n    SpecializationUtil.registerEvent(handToolType, "onCarryingPlayerChanged" )\n    SpecializationUtil.registerEvent(handToolType, "onCarryingPlayerPerspectiveSwitched" )\n\n    SpecializationUtil.registerEvent(handToolType, "onDebugDraw" )\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registersavegamexmlpaths",children:"registerSavegameXMLPaths"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Registers all node paths used for the savegame xml file."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerSavegameXMLPaths(XMLSchema savegameXMLSchema)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"XMLSchema"}),(0,s.jsx)(n.th,{children:"savegameXMLSchema"}),(0,s.jsx)(n.th,{children:"The schema used for the savegame hand tools."})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function HandTool.registerSavegameXMLPaths(savegameXMLSchema)\n    local handToolBaseKey = "handTools.handTool(?)"\n\n    savegameXMLSchema:register(XMLValueType.STRING, handToolBaseKey .. "#filename" , "The filename of the tool xml file" , nil , true )\n    savegameXMLSchema:register(XMLValueType.STRING, handToolBaseKey .. "#modName" , "Name of mod" )\n    savegameXMLSchema:register(XMLValueType.STRING, handToolBaseKey .. "#uniqueId" , "The unique id of the hand tool within the savegame" , nil , true )\n    savegameXMLSchema:register(XMLValueType.INT, handToolBaseKey .. "#farmId" , "The id of the farm owning the tool" , nil , true )\n    savegameXMLSchema:register(XMLValueType.FLOAT, handToolBaseKey .. "#age" , "The age of the hand tool" , nil , true )\n    savegameXMLSchema:register(XMLValueType.FLOAT, handToolBaseKey .. "#price" , "The price of the hand tool" , nil , true )\n    savegameXMLSchema:register(XMLValueType.STRING, handToolBaseKey .. ".holder#uniqueId" , "Last holder" , nil , true )\n\n    -- Register all loaded specialisations.\n    for _, specialisation in pairs(g_handToolSpecializationManager:getSpecializations()) do\n        local specialisationClass = ClassUtil.getClassObject(specialisation.className)\n        if specialisationClass.registerSavegameXMLPaths then\n            specialisationClass.registerSavegameXMLPaths(savegameXMLSchema, handToolBaseKey)\n        end\n    end\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registerxmlpaths",children:"registerXMLPaths"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Registers xml paths within the hand tool schema."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerXMLPaths()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function HandTool.registerXMLPaths()\n\n    -- Create the schema.\n    local xmlSchema = XMLSchema.new( "handTool" )\n    HandTool.xmlSchema = xmlSchema\n\n    g_storeManager:addSpeciesXMLSchema(StoreSpecies.HANDTOOL, HandTool.xmlSchema)\n    g_handToolTypeManager:setXMLSchema( HandTool.xmlSchema)\n\n    HandTool.xmlSchemaSounds = XMLSchema.new( "handTool_sounds" )\n    HandTool.xmlSchemaSounds:setRootNodeName( "sounds" )\n    HandTool.xmlSchema:addSubSchema( HandTool.xmlSchemaSounds, "sounds" )\n\n    -- Register store paths.\n    StoreManager.registerStoreDataXMLPaths(xmlSchema, "handTool" )\n    I3DUtil.registerI3dMappingXMLPaths(xmlSchema, "handTool" )\n\n    xmlSchema:register(XMLValueType.STRING, "handTool.annotation" , "Annotation" , nil , true )\n\n    -- Register base node.\n    xmlSchema:register(XMLValueType.BOOL, "handTool.base#canCrouch" , "If the player can crouch while holding this tool" , true , false )\n        xmlSchema:register(XMLValueType.BOOL, "handTool.base#mustBeHeld" , "True if this tool must be held, and cannot be put away; false otherwise" , false , false )\n            xmlSchema:register(XMLValueType.BOOL, "handTool.base#canBeSaved" , "True if this tool can be saved; false otherwise" , "Defaults to true, so that the tool will be saved" , false )\n                xmlSchema:register(XMLValueType.BOOL, "handTool.base#canBeDropped" , "True if this tool can be dropped to inventory" , "Defaults to true, so that the tool will be dropped" , false )\n                    xmlSchema:register(XMLValueType.FLOAT, "handTool.base#runMultiplier" , "The amount of run speed the player gains while running with this tool" , true , false )\n                        xmlSchema:register(XMLValueType.FLOAT, "handTool.base#walkMultiplier" , "The amount of walk speed the player gains while walking with this tool" , true , false )\n                            xmlSchema:register(XMLValueType.FLOAT, "handTool.base#jumpMultiplier" , "The amount of jump strength the player gains while walking with this tool" , true , false )\n                                xmlSchema:register(XMLValueType.L10N_STRING, "handTool.base.actions#activate" , "The text displayed for activating the tool" , nil , false )\n                                    xmlSchema:register(XMLValueType.STRING, "handTool.base.filename" , "Hand tool i3d file" , nil , false )\n                                    xmlSchema:register(XMLValueType.L10N_STRING, "handTool.base.typeDesc" , "Hand tool name localization string" , nil , false )\n                                    xmlSchema:register(XMLValueType.STRING, "handTool.base.sounds#filename" , "The filename of the xml file defining the sounds of the tool" , nil , false )\n                                    xmlSchema:register(XMLValueType.NODE_INDEX, "handTool.base.graphics#node" , "The node containing all the graphical nodes of the tool" , nil , false )\n                                    xmlSchema:register(XMLValueType.BOOL, "handTool.base.graphics#lockFirstPerson" , "True if first person mode should be forced, false for third person.A lack of this attribute does not lock the perspective at all" , nil , false )\n                                        xmlSchema:register(XMLValueType.NODE_INDEX, "handTool.base.handNode#node" , "The node used to position the hand tool when held in third person" , nil , false )\n                                        xmlSchema:register(XMLValueType.BOOL, "handTool.base.handNode#useLeftHand" , "If the handtool should be attached to player left hand" , nil , false )\n                                        xmlSchema:register(XMLValueType.NODE_INDEX, "handTool.base.firstPersonNode#node" , "The node used to position the hand tool when held in first person" , nil , false )\n                                        xmlSchema:register(XMLValueType.NODE_INDEX, "handTool.base.carried#targetNode" , "The node of the player character that the tool is attached to when not held" , nil , false )\n                                        xmlSchema:register(XMLValueType.NODE_INDEX, "handTool.base.carried#node" , "The node used to position the hand tool when not held" , nil , false )\n                                        xmlSchema:register(XMLValueType.FLOAT, "handTool.base#mass" , "Mass in kilograms" , nil , false )\n\n                                        -- Register root node attributes.\n                                        xmlSchema:register(XMLValueType.STRING, "handTool#type" , "The specialisation type of the hand tool" , nil , true )\n                                        xmlSchema:registerAutoCompletionDataSource( "handTool#type" , "$dataS/handToolTypes.xml" , "handToolTypes.type#name" )\n\n                                        -- Register all loaded specialisations.\n                                        for _, specialisation in pairs(g_handToolSpecializationManager:getSpecializations()) do\n                                            local specialisationClass = ClassUtil.getClassObject(specialisation.className)\n                                            if specialisationClass.registerXMLPaths then\n                                                specialisationClass.registerXMLPaths(xmlSchema)\n                                                xmlSchema:setXMLSpecializationType()\n                                            end\n                                        end\n                                    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"savetoxmlfile",children:"saveToXMLFile"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Saves this hand tool to the given savegame xml file under the given key."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"saveToXMLFile(XMLFile xmlFile, string key, table usedModNames)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"XMLFile"}),(0,s.jsx)(n.th,{children:"xmlFile"}),(0,s.jsx)(n.th,{children:"The savegame xml file to save to (Handtools.xml)."})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"key"}),(0,s.jsx)(n.td,{children:"The base key under which to create the hand tool node."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"table"}),(0,s.jsx)(n.td,{children:"usedModNames"}),(0,s.jsx)(n.td,{children:"The collection of currently used mod names in the current game."})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function HandTool:saveToXMLFile(xmlFile, key, usedModNames)\n    xmlFile:setValue(key .. "#uniqueId" , self.uniqueId)\n    xmlFile:setValue(key .. "#farmId" , self:getOwnerFarmId() or - 1 )\n    xmlFile:setValue(key .. "#age" , self.age)\n\n    if self.holder ~ = nil then\n        xmlFile:setValue(key .. ".holder#uniqueId" , self.holder:getUniqueId())\n    end\n\n    for id, spec in pairs( self.specializations) do\n        local name = self.specializationNames[id]\n\n        if spec.saveToXMLFile ~ = nil then\n            spec.saveToXMLFile( self , xmlFile, key .. "." .. name, usedModNames)\n        end\n    end\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"setcarryingplayer",children:"setCarryingPlayer"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Sets the player who is currently carrying this hand tool."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"setCarryingPlayer(Player player)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Player"}),(0,s.jsx)(n.th,{children:"player"}),(0,s.jsx)(n.th,{children:"the player"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function HandTool:setCarryingPlayer(player)\n    --#debug Logging.devInfo("HandTool:setCarryingPlayer \'%s\' for hand tool %q(%s)", player and player.uniqueUserId or "nil", self.configFileName, self.uniqueId)\n        local lastCarryingPlayer = self.carryingPlayer\n        self.carryingPlayer = player\n\n        SpecializationUtil.raiseEvent( self , "onCarryingPlayerChanged" , player, lastCarryingPlayer)\n\n        self:clearActionEvents()\n        if player ~ = nil and player.isOwner then\n            self:registerActionEvents()\n        end\n    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"setfilename",children:"setFilename"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"setFilename()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"filename"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function HandTool:setFilename(filename)\n    self.configFileName = filename\n    self.configFileNameClean = Utils.getFilenameInfo(filename, true )\n\n    self.customEnvironment, self.baseDirectory = Utils.getModNameAndBaseDirectory(filename)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"setloadcallback",children:"setLoadCallback"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"setLoadCallback()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"loadCallbackFunction"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"loadCallbackFunctionTarget"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"loadCallbackFunctionArguments"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function HandTool:setLoadCallback(loadCallbackFunction, loadCallbackFunctionTarget, loadCallbackFunctionArguments)\n    self.loadCallbackFunction = loadCallbackFunction\n    self.loadCallbackFunctionTarget = loadCallbackFunctionTarget\n    self.loadCallbackFunctionArguments = loadCallbackFunctionArguments\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"setloadingstate",children:"setLoadingState"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"setLoadingState()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"loadingState"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function HandTool:setLoadingState(loadingState)\n    if HandToolLoadingState.getName(loadingState) ~ = nil then\n        self.loadingState = loadingState\n    else\n            printCallstack()\n            Logging.error( \"Invalid loading state '%s'!\" , loadingState)\n        end\n    end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"setloadingstep",children:"setLoadingStep"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Sets the loadingStep value of this handtool, logging an error if the given step is invalid."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"setLoadingStep(SpecializationLoadStep loadingStep)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"SpecializationLoadStep"}),(0,s.jsx)(n.th,{children:"loadingStep"}),(0,s.jsx)(n.th,{children:"The loading step to set."})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function HandTool:setLoadingStep(loadingStep)\n    SpecializationUtil.setLoadingStep( self , loadingStep)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"settype",children:"setType"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"setType()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"typeDef"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function HandTool:setType(typeDef)\n    SpecializationUtil.initSpecializationsIntoTypeClass(g_handToolTypeManager, typeDef, self )\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"setuniqueid",children:"setUniqueId"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Sets this tool's unique id. Note that a hand tool's id should not be changed once it has been first set."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"setUniqueId(string uniqueId)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"string"}),(0,s.jsx)(n.th,{children:"uniqueId"}),(0,s.jsx)(n.th,{children:"The unique id to use."})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function HandTool:setUniqueId(uniqueId)\n    --#debug Assert.isType(uniqueId, "string", "Hand tool unique id must be a string!")\n    --#debug Assert.isNil(self.uniqueId, "Should not change a hand tool\'s unique id!")\n    self.uniqueId = uniqueId\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"startholding",children:"startHolding"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Fired when the player starts holding this hand tool in their hands."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"startHolding()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function HandTool:startHolding()\n    --#debug Logging.devInfo("HandTool:startHolding for hand tool %q(%s)", self.configFileName, self.uniqueId)\n\n        self:raiseActive()\n\n        -- Begin getting the tool out.\n        self.isHoldStarting = true\n\n        local player = self.carryingPlayer\n\n        -- Handle locking the player\'s perspective if needed.\n            if player ~ = nil and player:getForceHandToolFirstPerson() and self.shouldLockFirstPerson ~ = nil then\n                self.wasInFirstPerson = player.camera.isFirstPerson\n                if self.shouldLockFirstPerson then\n                    player.camera:lockFirstPersonMode()\n                else\n                        player.camera:lockThirdPersonMode()\n                    end\n                end\n\n                self.isHeld = true\n\n                -- Attach the tool to the player.\n                self:attachTool()\n\n                -- Raise the held start event.\n                SpecializationUtil.raiseEvent( self , "onHeldStart" , player)\n\n                self:clearActionEvents()\n                if player ~ = nil and player.isOwner then\n                    self:registerActionEvents()\n                end\n\n                -- Finish getting the tool out.\n                self.isHoldStarting = false\n            end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"stopholding",children:"stopHolding"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Fired when the player stops holding this hand tool in their hands."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"stopHolding(Player player)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Player"}),(0,s.jsx)(n.th,{children:"player"}),(0,s.jsx)(n.th,{children:"The player who was holding this tool."})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function HandTool:stopHolding()\n    --#debug Logging.devInfo("HandTool:stopHolding for hand tool %q(%s)", self.configFileName, self.uniqueId)\n\n        -- Begin putting the tool away.\n        self.isHoldEnding = true\n\n        local carryingPlayer = self:getCarryingPlayer()\n\n        -- Handle unlocking and resetting the perspective, if needed.\n            if carryingPlayer ~ = nil and carryingPlayer:getForceHandToolFirstPerson() and self.shouldLockFirstPerson ~ = nil then\n                carryingPlayer.camera:unlockSwitching()\n                carryingPlayer.camera:switchToPerspective( self.wasInFirstPerson)\n            end\n\n            self.isHeld = false\n\n            -- Detach the tool from the player.\n            self:detachTool()\n\n            -- Raise the held end event.\n            SpecializationUtil.raiseEvent( self , "onHeldEnd" )\n\n            -- Unbind any bound controls.\n            self:clearActionEvents()\n            if carryingPlayer ~ = nil and carryingPlayer.isOwner then\n                self:registerActionEvents()\n            end\n\n            -- Stop putting the tool away.\n            self.isHoldEnding = false\n        end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"update",children:"update"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Updates this hand tool as it is being held in the player's hands."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"update(float dt)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"float"}),(0,s.jsx)(n.th,{children:"dt"}),(0,s.jsx)(n.th,{children:"Delta time in ms."})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function HandTool:update(dt)\n    if self.pendingHolder ~ = nil then\n        self:setHolder( self.pendingHolder)\n        self.pendingHolder = nil\n    end\n\n    if self.pendingHolderObjectId ~ = nil then\n        local holder = NetworkUtil.getObject( self.pendingHolderObjectId)\n        if holder ~ = nil then\n            if holder:getCanPickupHandTool( self ) then\n                self:setHolder(holder, true )\n\n                if self.isHoldingPending and self.carryingPlayer ~ = nil then\n                    self.carryingPlayer:setCurrentHandTool( self , true )\n                end\n            end\n            self.pendingHolderObjectId = nil\n            self.isHoldingPending = nil\n        end\n        self:raiseActive()\n    end\n\n    if self.pendingHolderUniqueId ~ = nil then\n        local mission = g_currentMission\n        local holder = mission:getObjectByUniqueId( self.pendingHolderUniqueId)\n        if holder ~ = nil then\n            self:setHolder(holder)\n            self.pendingHolderUniqueId = nil\n        end\n        self:raiseActive()\n    end\n\n    SpecializationUtil.raiseEvent( self , "onPreUpdate" , dt)\n\n    SpecializationUtil.raiseEvent( self , "onUpdate" , dt)\n\n    SpecializationUtil.raiseEvent( self , "onPostUpdate" , dt)\n\n    if self:getIsHeld() then\n        local carryingPlayer = self:getCarryingPlayer()\n        if carryingPlayer ~ = nil and carryingPlayer:getIsControlled() then\n            self:raiseActive()\n        end\n    end\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"writestream",children:"writeStream"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Writes the state of this tool to the network stream."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"writeStream(integer streamId, Connection connection)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"integer"}),(0,s.jsx)(n.th,{children:"streamId"}),(0,s.jsx)(n.th,{children:"The id of the stream to which to write."})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Connection"}),(0,s.jsx)(n.td,{children:"connection"}),(0,s.jsx)(n.td,{children:"The connection to the specific client who will receive this tool data."})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function HandTool:writeStream(streamId, connection)\n    HandTool:superClass().writeStream( self , streamId, connection)\n\n    streamWriteString(streamId, NetworkUtil.convertToNetworkFilename( self.configFileName))\n    streamWriteBool(streamId, self.canBeDropped)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"writeupdatestream",children:"writeUpdateStream"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Called on server side on update"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"writeUpdateStream(integer streamId, table connection, integer dirtyMask)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"integer"}),(0,s.jsx)(n.th,{children:"streamId"}),(0,s.jsx)(n.th,{children:"stream ID"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"table"}),(0,s.jsx)(n.td,{children:"connection"}),(0,s.jsx)(n.td,{children:"connection"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"integer"}),(0,s.jsx)(n.td,{children:"dirtyMask"}),(0,s.jsx)(n.td,{children:"dirty mask"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function HandTool:writeUpdateStream(streamId, connection, dirtyMask)\n    SpecializationUtil.raiseEvent( self , "onWriteUpdateStream" , streamId, connection, dirtyMask)\nend\n\n'})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);