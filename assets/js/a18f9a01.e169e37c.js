"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[24144],{28453(e,n,l){l.d(n,{R:()=>t,x:()=>a});var i=l(96540);const s={},r=i.createContext(s);function t(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(r.Provider,{value:n},e.children)}},47082(e,n,l){l.r(n),l.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"script/Specializations/PlaceableSilo","title":"PlaceableSilo","description":"PlaceableSilo","source":"@site/../docs/script/Specializations/PlaceableSilo.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/PlaceableSilo","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableSilo","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"PlaceableShallowWaterSimulation","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableShallowWaterSimulation"},"next":{"title":"PlaceableSiloExtension","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableSiloExtension"}}');var s=l(74848),r=l(28453);const t={},a=void 0,o={},c=[{value:"PlaceableSilo",id:"placeablesilo",level:2},{value:"canBeSold",id:"canbesold",level:3},{value:"collectPickObjects",id:"collectpickobjects",level:3},{value:"getFillLevels",id:"getfilllevels",level:3},{value:"getSpecValueVolume",id:"getspecvaluevolume",level:3},{value:"initSpecialization",id:"initspecialization",level:3},{value:"loadFromXMLFile",id:"loadfromxmlfile",level:3},{value:"loadSpecValueVolume",id:"loadspecvaluevolume",level:3},{value:"onDelete",id:"ondelete",level:3},{value:"onFinalizePlacement",id:"onfinalizeplacement",level:3},{value:"onLoad",id:"onload",level:3},{value:"onPlayerActionTriggerCallback",id:"onplayeractiontriggercallback",level:3},{value:"onReadStream",id:"onreadstream",level:3},{value:"onSell",id:"onsell",level:3},{value:"onWriteStream",id:"onwritestream",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"refillAmount",id:"refillamount",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3},{value:"registerFunctions",id:"registerfunctions",level:3},{value:"registerOverwrittenFunctions",id:"registeroverwrittenfunctions",level:3},{value:"registerSavegameXMLPaths",id:"registersavegamexmlpaths",level:3},{value:"registerXMLPaths",id:"registerxmlpaths",level:3},{value:"saveToXMLFile",id:"savetoxmlfile",level:3},{value:"setAmount",id:"setamount",level:3},{value:"setOwnerFarmId",id:"setownerfarmid",level:3},{value:"updateInfo",id:"updateinfo",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"placeablesilo",children:"PlaceableSilo"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Specialization for placeables"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Functions"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#canbesold",children:"canBeSold"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#collectpickobjects",children:"collectPickObjects"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getfilllevels",children:"getFillLevels"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getspecvaluevolume",children:"getSpecValueVolume"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#initspecialization",children:"initSpecialization"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#loadfromxmlfile",children:"loadFromXMLFile"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#loadspecvaluevolume",children:"loadSpecValueVolume"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#ondelete",children:"onDelete"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onfinalizeplacement",children:"onFinalizePlacement"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onplayeractiontriggercallback",children:"onPlayerActionTriggerCallback"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onreadstream",children:"onReadStream"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onsell",children:"onSell"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onwritestream",children:"onWriteStream"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#refillamount",children:"refillAmount"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registeroverwrittenfunctions",children:"registerOverwrittenFunctions"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registersavegamexmlpaths",children:"registerSavegameXMLPaths"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registerxmlpaths",children:"registerXMLPaths"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#savetoxmlfile",children:"saveToXMLFile"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#setamount",children:"setAmount"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#setownerfarmid",children:"setOwnerFarmId"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#updateinfo",children:"updateInfo"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"canbesold",children:"canBeSold"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"canBeSold()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableSilo:canBeSold(superFunc)\n    local spec = self.spec_silo\n    -- We do not support selling silos used by more than one farm because of the gameplay complexity. (What do to with contents, when to allow)\n        if spec.storagePerFarm then\n            return false , nil\n        end\n\n        local warning = spec.sellWarningText .. "\\n"\n        local totalFillLevel = 0\n\n        spec.totalFillTypeSellPrice = 0\n        for fillTypeIndex, fillLevel in pairs(spec.storages[ 1 ].fillLevels) do\n            totalFillLevel = totalFillLevel + fillLevel\n\n            if fillLevel > 0 then\n                local lowestSellPrice = math.huge\n\n                for _, unloadingStation in pairs(g_currentMission.storageSystem:getUnloadingStations()) do\n                    if unloadingStation.owningPlaceable ~ = nil\n                        and unloadingStation.isSellingPoint\n                        and unloadingStation.acceptedFillTypes[fillTypeIndex] then\n                        local price = unloadingStation:getEffectiveFillTypePrice(fillTypeIndex)\n\n                        if price > 0 then\n                            lowestSellPrice = math.min(lowestSellPrice, price)\n                        end\n                    end\n                end\n\n                if lowestSellPrice = = math.huge then\n                    lowestSellPrice = 0.5\n                end\n\n                local price = fillLevel * lowestSellPrice * PlaceableSilo.PRICE_SELL_FACTOR\n                local fillType = g_fillTypeManager:getFillTypeByIndex(fillTypeIndex)\n                warning = string.format( "%s%s(%s) - %s: %s\\n" , warning, fillType.title, g_i18n:formatVolume(fillLevel), g_i18n:getText( "ui_sellValue" ), g_i18n:formatMoney(price, 0 , true , true ))\n                spec.totalFillTypeSellPrice = spec.totalFillTypeSellPrice + price\n            end\n        end\n\n        if totalFillLevel > 0 then\n            return true , warning\n        end\n\n        return true , nil\n    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"collectpickobjects",children:"collectPickObjects"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"collectPickObjects()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"node"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableSilo:collectPickObjects(superFunc, node)\n    local spec = self.spec_silo\n\n    local foundNode = false\n    for _, unloadTrigger in ipairs(spec.unloadingStation.unloadTriggers) do\n        if node = = unloadTrigger.exactFillRootNode then\n            foundNode = true\n            break\n        end\n    end\n\n    if not foundNode then\n        for _, loadTrigger in ipairs(spec.loadingStation.loadTriggers) do\n            if node = = loadTrigger.triggerNode then\n                foundNode = true\n                break\n            end\n        end\n    end\n\n    if not foundNode then\n        superFunc( self , node)\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getfilllevels",children:"getFillLevels"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getFillLevels()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableSilo:getFillLevels()\n    local spec = self.spec_silo\n\n    local validFillLevels = { }\n    for _, storage in ipairs(spec.storages) do\n        for fillTypeIndex, fillLevel in pairs(storage:getFillLevels()) do\n            if self.fillTypes = = nil or self.fillTypes[fillTypeIndex] then\n                validFillLevels[fillTypeIndex] = fillLevel\n            end\n        end\n    end\n    return validFillLevels\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getspecvaluevolume",children:"getSpecValueVolume"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getSpecValueVolume()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"storeItem"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"realItem"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableSilo.getSpecValueVolume(storeItem, realItem)\n    if storeItem.specs.siloVolume = = nil then\n        return nil\n    end\n\n    return g_i18n:formatVolume(storeItem.specs.siloVolume)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"initspecialization",children:"initSpecialization"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"initSpecialization()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableSilo.initSpecialization()\n    g_storeManager:addSpecType( "siloVolume" , "shopListAttributeIconCapacity" , PlaceableSilo.loadSpecValueVolume, PlaceableSilo.getSpecValueVolume, StoreSpecies.PLACEABLE)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"loadfromxmlfile",children:"loadFromXMLFile"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"loadFromXMLFile()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"xmlFile"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"key"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableSilo:loadFromXMLFile(xmlFile, key)\n    local spec = self.spec_silo\n\n    xmlFile:iterate(key .. ".storage" , function (_, storageKey)\n        local index = xmlFile:getValue(storageKey .. "#index" )\n\n        if index ~ = nil then\n            if spec.storages[index] ~ = nil then\n                if not spec.storages[index]:loadFromXMLFile(xmlFile, storageKey) then\n                    return false\n                end\n            end\n        end\n        return\n    end )\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"loadspecvaluevolume",children:"loadSpecValueVolume"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"loadSpecValueVolume()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"xmlFile"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"customEnvironment"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"baseDir"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableSilo.loadSpecValueVolume(xmlFile, customEnvironment, baseDir)\n    return xmlFile:getValue( "placeable.silo.storages.storage(0)#capacity" )\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"ondelete",children:"onDelete"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onDelete()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableSilo:onDelete()\n    local spec = self.spec_silo\n\n    local storageSystem = g_currentMission.storageSystem\n    if spec.storages ~ = nil then\n        for _, storage in ipairs(spec.storages) do\n            if spec.unloadingStation ~ = nil then\n                storageSystem:removeStorageFromUnloadingStations(storage, { spec.unloadingStation } )\n            end\n            if spec.loadingStation ~ = nil then\n                storageSystem:removeStorageFromLoadingStations(storage, { spec.loadingStation } )\n            end\n\n            storage:removeFillLevelChangedListeners(spec.storageFilLLevelChangedCallback)\n            storageSystem:removeStorage(storage)\n        end\n\n        -- delete storages later to avoid access to already deleted storages\n        for _, storage in ipairs(spec.storages) do\n            storage:delete()\n        end\n    end\n\n    if spec.unloadingStation ~ = nil then\n        storageSystem:removeUnloadingStation(spec.unloadingStation, self )\n        spec.unloadingStation:delete()\n    end\n\n    if spec.loadingStation ~ = nil then\n        if spec.loadingStation:getIsFillTypeSupported(FillType.LIQUIDMANURE) then\n            g_currentMission:removeLiquidManureLoadingStation(spec.loadingStation)\n        end\n\n        storageSystem:removeLoadingStation(spec.loadingStation, self )\n        spec.loadingStation:delete()\n    end\n\n    g_currentMission.activatableObjectsSystem:removeActivatable(spec.activatable)\n\n    if spec.playerActionTrigger ~ = nil then\n        removeTrigger(spec.playerActionTrigger)\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onfinalizeplacement",children:"onFinalizePlacement"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onFinalizePlacement()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableSilo:onFinalizePlacement()\n    local spec = self.spec_silo\n\n    local storageSystem = g_currentMission.storageSystem\n\n    spec.unloadingStation:register( true )\n    storageSystem:addUnloadingStation(spec.unloadingStation, self )\n\n    if spec.loadingStation ~ = nil then\n        spec.loadingStation:register( true )\n        storageSystem:addLoadingStation(spec.loadingStation, self )\n\n        if spec.loadingStation:getIsFillTypeSupported(FillType.LIQUIDMANURE) then\n            g_currentMission:addLiquidManureLoadingStation(spec.loadingStation)\n        end\n    end\n\n    for _, storage in ipairs(spec.storages) do\n        if not spec.storagePerFarm then\n            storage:setOwnerFarmId( self:getOwnerFarmId(), true )\n        end\n\n        storageSystem:addStorage(storage)\n\n        storage:register( true )\n\n        storageSystem:addStorageToUnloadingStation(storage, spec.unloadingStation)\n        storageSystem:addStorageToLoadingStation(storage, spec.loadingStation)\n    end\n\n    -- now check if there are some storages in range which can also be used\n        local storagesInRange = storageSystem:getStorageExtensionsInRange(spec.unloadingStation, self:getOwnerFarmId())\n        if storagesInRange ~ = nil then\n            for _, storage in ipairs(storagesInRange) do\n                if spec.unloadingStation.targetStorages[storage] = = nil then\n                    storageSystem:addStorageToUnloadingStation(storage, spec.unloadingStation)\n                end\n            end\n        end\n\n        storagesInRange = storageSystem:getStorageExtensionsInRange(spec.loadingStation, self:getOwnerFarmId())\n        if storagesInRange ~ = nil then\n            for _, storage in ipairs(storagesInRange) do\n                if spec.loadingStation.sourceStorages[storage] = = nil then\n                    storageSystem:addStorageToLoadingStation(storage, spec.loadingStation)\n                end\n            end\n        end\n\n        if spec.playerActionTrigger ~ = nil then\n            addTrigger(spec.playerActionTrigger, "onPlayerActionTriggerCallback" , self )\n        end\n    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Called on loading"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onLoad(table savegame)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"savegame"}),(0,s.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableSilo:onLoad(savegame)\n    local spec = self.spec_silo\n    local xmlFile = self.xmlFile\n\n    spec.playerActionTrigger = xmlFile:getValue( "placeable.silo#playerActionTrigger" , nil , self.components, self.i3dMappings)\n\n    if spec.playerActionTrigger ~ = nil then\n        spec.activatable = PlaceableSiloActivatable.new( self )\n    end\n\n    spec.storagePerFarm = xmlFile:getValue( "placeable.silo.storages#perFarm" , false )\n    spec.foreignSilo = xmlFile:getValue( "placeable.silo.storages#foreignSilo" , spec.storagePerFarm) -- Shows as foreign silo in the menu\n\n    spec.unloadingStation = UnloadingStation.new( self.isServer, self.isClient)\n    spec.unloadingStation:load( self.components, xmlFile, "placeable.silo.unloadingStation" , self.customEnvironment, self.i3dMappings, self.components[ 1 ].node)\n    spec.unloadingStation.owningPlaceable = self\n    spec.unloadingStation.hasStoragePerFarm = spec.storagePerFarm\n\n    spec.loadingStation = LoadingStation.new( self.isServer, self.isClient)\n    spec.loadingStation:load( self.components, xmlFile, "placeable.silo.loadingStation" , self.customEnvironment, self.i3dMappings, self.components[ 1 ].node)\n    spec.loadingStation.owningPlaceable = self\n    spec.loadingStation.hasStoragePerFarm = spec.storagePerFarm\n\n    spec.fillTypesAndLevelsAuxiliary = { }\n    spec.fillTypeToFillTypeStorageTable = { }\n    spec.infoTriggerFillTypesAndLevels = { }\n\n    local numStorageSets = spec.storagePerFarm and FarmManager.MAX_NUM_FARMS or 1\n    if not g_currentMission.missionDynamicInfo.isMultiplayer then\n        numStorageSets = 1\n    end\n\n    spec.storages = { }\n    local i = 0\n    while true do\n        local storageKey = string.format( "placeable.silo.storages.storage(%d)" , i)\n        if not xmlFile:hasProperty(storageKey) then\n            break\n        end\n\n        for j = 1 , numStorageSets do\n            local storage = Storage.new( self.isServer, self.isClient)\n            if storage:load( self.components, xmlFile, storageKey, self.i3dMappings, self.baseDirectory) then\n                storage.ownerFarmId = j\n                storage.foreignSilo = spec.foreignSilo -- Pass along for usage by prices menu\n                    table.insert(spec.storages, storage)\n                end\n            end\n\n            i = i + 1\n        end\n\n        spec.sellWarningText = g_i18n:convertText(xmlFile:getValue( "placeable.silo#sellWarningText" , "$l10n_info_siloExtensionNotEmpty" ))\n    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"onplayeractiontriggercallback",children:"onPlayerActionTriggerCallback"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onPlayerActionTriggerCallback()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"triggerId"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"otherId"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"onEnter"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"onLeave"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"onStay"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableSilo:onPlayerActionTriggerCallback(triggerId, otherId, onEnter, onLeave, onStay)\n    local spec = self.spec_silo\n    if self:getOwnerFarmId() = = g_currentMission:getFarmId() then\n        if g_localPlayer ~ = nil and otherId = = g_localPlayer.rootNode then\n            if onEnter then\n                g_currentMission.activatableObjectsSystem:addActivatable(spec.activatable)\n            else\n                    g_currentMission.activatableObjectsSystem:removeActivatable(spec.activatable)\n                end\n            end\n        end\n    end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onreadstream",children:"onReadStream"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onReadStream()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"streamId"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableSilo:onReadStream(streamId, connection)\n    local spec = self.spec_silo\n\n    local unloadingStationId = NetworkUtil.readNodeObjectId(streamId)\n    spec.unloadingStation:readStream(streamId, connection)\n    g_client:finishRegisterObject(spec.unloadingStation, unloadingStationId)\n\n    local loadingStationId = NetworkUtil.readNodeObjectId(streamId)\n    spec.loadingStation:readStream(streamId, connection)\n    g_client:finishRegisterObject(spec.loadingStation, loadingStationId)\n\n    for _, storage in ipairs(spec.storages) do\n        local storageId = NetworkUtil.readNodeObjectId(streamId)\n        storage:readStream(streamId, connection)\n        g_client:finishRegisterObject(storage, storageId)\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onsell",children:"onSell"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onSell()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableSilo:onSell()\n    local spec = self.spec_silo\n\n    if self.isServer then\n        if spec.totalFillTypeSellPrice > 0 then\n            g_currentMission:addMoney(spec.totalFillTypeSellPrice, self:getOwnerFarmId(), MoneyType.HARVEST_INCOME, true , true )\n        end\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onwritestream",children:"onWriteStream"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onWriteStream()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"streamId"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableSilo:onWriteStream(streamId, connection)\n    local spec = self.spec_silo\n\n    NetworkUtil.writeNodeObjectId(streamId, NetworkUtil.getObjectId(spec.unloadingStation))\n    spec.unloadingStation:writeStream(streamId, connection)\n    g_server:registerObjectInStream(connection, spec.unloadingStation)\n\n    NetworkUtil.writeNodeObjectId(streamId, NetworkUtil.getObjectId(spec.loadingStation))\n    spec.loadingStation:writeStream(streamId, connection)\n    g_server:registerObjectInStream(connection, spec.loadingStation)\n\n    for _, storage in ipairs(spec.storages) do\n        NetworkUtil.writeNodeObjectId(streamId, NetworkUtil.getObjectId(storage))\n        storage:writeStream(streamId, connection)\n        g_server:registerObjectInStream(connection, storage)\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Checks if all prerequisite specializations are loaded"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"prerequisitesPresent(table specializations)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"specializations"}),(0,s.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"hasPrerequisite"}),(0,s.jsx)(n.th,{children:"true if all prerequisite specializations are loaded"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableSilo.prerequisitesPresent(specializations)\n    return true\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"refillamount",children:"refillAmount"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"refillAmount()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"fillTypeIndex"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"amount"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"price"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableSilo:refillAmount(fillTypeIndex, amount, price)\n    if fillTypeIndex = = nil or amount = = nil or price = = nil then\n        return\n    end\n\n    if not self.isServer then\n        g_client:getServerConnection():sendEvent(PlaceableSiloRefillEvent.new( self , fillTypeIndex, amount, price))\n        return\n    end\n\n    local spec = self.spec_silo\n    for _, storage in ipairs(spec.storages) do\n        local freeCapacity = storage:getFreeCapacity(fillTypeIndex)\n        if freeCapacity > 0 then\n            local moved = math.min(amount, freeCapacity)\n            local fillLevel = storage:getFillLevel(fillTypeIndex)\n            storage:setFillLevel(fillLevel + moved, fillTypeIndex)\n\n            amount = amount - moved\n        end\n\n        if amount < = 0.001 then\n            break\n        end\n    end\n\n    if self.isServer then\n        g_currentMission:addMoney( - price, self:getOwnerFarmId(), MoneyType.BOUGHT_MATERIALS, true )\n    end\n    g_currentMission:showMoneyChange(MoneyType.BOUGHT_MATERIALS)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableSilo.registerEventListeners(placeableType)\n    SpecializationUtil.registerEventListener(placeableType, "onLoad" , PlaceableSilo )\n    SpecializationUtil.registerEventListener(placeableType, "onDelete" , PlaceableSilo )\n    SpecializationUtil.registerEventListener(placeableType, "onFinalizePlacement" , PlaceableSilo )\n    SpecializationUtil.registerEventListener(placeableType, "onReadStream" , PlaceableSilo )\n    SpecializationUtil.registerEventListener(placeableType, "onWriteStream" , PlaceableSilo )\n    SpecializationUtil.registerEventListener(placeableType, "onSell" , PlaceableSilo )\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableSilo.registerFunctions(placeableType)\n    SpecializationUtil.registerFunction(placeableType, "setAmount" , PlaceableSilo.setAmount)\n    SpecializationUtil.registerFunction(placeableType, "refillAmount" , PlaceableSilo.refillAmount)\n    SpecializationUtil.registerFunction(placeableType, "getFillLevels" , PlaceableSilo.getFillLevels)\n    SpecializationUtil.registerFunction(placeableType, "onPlayerActionTriggerCallback" , PlaceableSilo.onPlayerActionTriggerCallback)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registeroverwrittenfunctions",children:"registerOverwrittenFunctions"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerOverwrittenFunctions()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableSilo.registerOverwrittenFunctions(placeableType)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "collectPickObjects" , PlaceableSilo.collectPickObjects)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "setOwnerFarmId" , PlaceableSilo.setOwnerFarmId)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "canBeSold" , PlaceableSilo.canBeSold)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "updateInfo" , PlaceableSilo.updateInfo)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registersavegamexmlpaths",children:"registerSavegameXMLPaths"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerSavegameXMLPaths()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"schema"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"basePath"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableSilo.registerSavegameXMLPaths(schema, basePath)\n    schema:setXMLSpecializationType( "Silo" )\n    schema:register(XMLValueType.INT, basePath .. ".storage(?)#index" , "Storage index" )\n    Storage.registerSavegameXMLPaths(schema, basePath .. ".storage(?)" )\n    schema:setXMLSpecializationType()\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registerxmlpaths",children:"registerXMLPaths"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerXMLPaths()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"schema"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"basePath"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableSilo.registerXMLPaths(schema, basePath)\n    schema:setXMLSpecializationType( "Silo" )\n    schema:register(XMLValueType.STRING, basePath .. ".silo#sellWarningText" , "Sell warning text" )\n    schema:register(XMLValueType.NODE_INDEX, basePath .. ".silo#playerActionTrigger" , "Trigger for player interaction" )\n        schema:register(XMLValueType.BOOL, basePath .. ".silo.storages#perFarm" , "Silo is per farm" , false )\n        schema:register(XMLValueType.BOOL, basePath .. ".silo.storages#foreignSilo" , "Shows as foreign silo in the menu" , false )\n        UnloadingStation.registerXMLPaths(schema, basePath .. ".silo.unloadingStation" )\n        LoadingStation.registerXMLPaths(schema, basePath .. ".silo.loadingStation" )\n        schema:register(XMLValueType.NODE_INDEX, basePath .. ".silo.storages.storage(?)#node" , "Storage node" )\n        Storage.registerXMLPaths(schema, basePath .. ".silo.storages.storage(?)" )\n        schema:setXMLSpecializationType()\n    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"savetoxmlfile",children:"saveToXMLFile"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"saveToXMLFile()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"xmlFile"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"key"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"usedModNames"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableSilo:saveToXMLFile(xmlFile, key, usedModNames)\n    local spec = self.spec_silo\n\n    for k, storage in ipairs(spec.storages) do\n        local storageKey = string.format( "%s.storage(%d)" , key, k - 1 )\n        xmlFile:setValue(storageKey .. "#index" , k)\n        storage:saveToXMLFile(xmlFile, storageKey, usedModNames)\n    end\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"setamount",children:"setAmount"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"setAmount()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"fillType"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"amount"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableSilo:setAmount(fillType, amount)\n    local spec = self.spec_silo\n\n    for _, storage in ipairs(spec.storages) do\n        local capacity = storage:getFreeCapacity(fillType)\n        if capacity > 0 then\n            local moved = math.min(amount, capacity)\n            storage:setFillLevel(moved, fillType)\n\n            amount = amount - moved\n        end\n\n        if amount < = 0.001 then\n            break\n        end\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"setownerfarmid",children:"setOwnerFarmId"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"setOwnerFarmId()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"farmId"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"noEventSend"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableSilo:setOwnerFarmId(superFunc, farmId, noEventSend)\n    local spec = self.spec_silo\n\n    superFunc( self , farmId, noEventSend)\n\n    if self.isServer and not spec.storagePerFarm then\n        if spec.storages ~ = nil then\n            for _, storage in ipairs(spec.storages) do\n                storage:setOwnerFarmId(farmId, true )\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"updateinfo",children:"updateInfo"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"updateInfo()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"infoTable"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableSilo:updateInfo(superFunc, infoTable)\n    superFunc( self , infoTable)\n    local spec = self.spec_silo\n\n    -- collect all fillTypes and levels from storage\n\n    local farmId = g_currentMission:getFarmId()\n    for fillType, fillLevel in pairs(spec.loadingStation:getAllFillLevels(farmId)) do\n        spec.fillTypesAndLevelsAuxiliary[fillType] = (spec.fillTypesAndLevelsAuxiliary[fillType] or 0 ) + fillLevel\n    end\n\n    -- filter empty fillType, merge to index table for sorting\n        table.clear(spec.infoTriggerFillTypesAndLevels)\n        for fillType, fillLevel in pairs(spec.fillTypesAndLevelsAuxiliary) do\n            if fillLevel > 0.1 then\n                spec.fillTypeToFillTypeStorageTable[fillType] = spec.fillTypeToFillTypeStorageTable[fillType] or { fillType = fillType, fillLevel = fillLevel }\n                spec.fillTypeToFillTypeStorageTable[fillType].fillLevel = fillLevel\n                table.insert(spec.infoTriggerFillTypesAndLevels, spec.fillTypeToFillTypeStorageTable[fillType])\n            end\n        end\n\n        table.clear(spec.fillTypesAndLevelsAuxiliary)\n\n        table.sort(spec.infoTriggerFillTypesAndLevels, function (a, b) return a.fillLevel > b.fillLevel end )\n\n        local numEntries = math.min(#spec.infoTriggerFillTypesAndLevels, PlaceableSilo.INFO_TRIGGER_NUM_DISPLAYED_FILLTYPES)\n        if numEntries > 0 then\n            for i = 1 , numEntries do\n                local fillTypeAndLevel = spec.infoTriggerFillTypesAndLevels[i]\n                table.insert(infoTable, { title = g_fillTypeManager:getFillTypeTitleByIndex(fillTypeAndLevel.fillType), text = g_i18n:formatVolume(fillTypeAndLevel.fillLevel, 0 ) } )\n            end\n        else\n                table.insert(infoTable, { title = "" , text = g_i18n:getText( "infohud_siloEmpty" ) } )\n            end\n        end\n\n'})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);