"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[80958],{28453(e,n,t){t.d(n,{R:()=>a,x:()=>l});var s=t(96540);const i={},r=s.createContext(i);function a(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:n},e.children)}},40458(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>o,frontMatter:()=>a,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"script/Utils/StateMachine","title":"StateMachine","description":"StateMachine","source":"@site/../docs/script/Utils/StateMachine.md","sourceDirName":"script/Utils","slug":"/script/Utils/StateMachine","permalink":"/FS25-Community-LUADOC/script/Utils/StateMachine","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"ObjectPool","permalink":"/FS25-Community-LUADOC/script/Utils/ObjectPool"},"next":{"title":"StoreItemUtil","permalink":"/FS25-Community-LUADOC/script/Utils/StoreItemUtil"}}');var i=t(74848),r=t(28453);const a={},l=void 0,c={},h=[{value:"StateMachine",id:"statemachine",level:2},{value:"callStateFunction",id:"callstatefunction",level:3},{value:"changeState",id:"changestate",level:3},{value:"determineState",id:"determinestate",level:3},{value:"getCurrentStateIndex",id:"getcurrentstateindex",level:3},{value:"getCurrentStateName",id:"getcurrentstatename",level:3},{value:"getIndexOfState",id:"getindexofstate",level:3},{value:"getIsPassive",id:"getispassive",level:3},{value:"getNameOfState",id:"getnameofstate",level:3},{value:"getStateByIndex",id:"getstatebyindex",level:3},{value:"implementStateInterface",id:"implementstateinterface",level:3},{value:"initialiseStateTransitions",id:"initialisestatetransitions",level:3},{value:"new",id:"new",level:3},{value:"resolveCurrentState",id:"resolvecurrentstate",level:3},{value:"setIsPassive",id:"setispassive",level:3},{value:"update",id:"update",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"statemachine",children:"StateMachine"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"A base, abstract state machine."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Functions"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#callstatefunction",children:"callStateFunction"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#changestate",children:"changeState"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#determinestate",children:"determineState"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getcurrentstateindex",children:"getCurrentStateIndex"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getcurrentstatename",children:"getCurrentStateName"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getindexofstate",children:"getIndexOfState"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getispassive",children:"getIsPassive"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getnameofstate",children:"getNameOfState"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getstatebyindex",children:"getStateByIndex"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#implementstateinterface",children:"implementStateInterface"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#initialisestatetransitions",children:"initialiseStateTransitions"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#new",children:"new"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#resolvecurrentstate",children:"resolveCurrentState"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#setispassive",children:"setIsPassive"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#update",children:"update"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"callstatefunction",children:"callStateFunction"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Calls a function with the given name on every state."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"callStateFunction(string functionName, any ...)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"string"}),(0,i.jsx)(n.th,{children:"functionName"}),(0,i.jsx)(n.th,{children:"The name of the function to call."})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"..."}),(0,i.jsx)(n.td,{children:"The parameters to pass along."})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function StateMachine:callStateFunction(functionName, .. .)\n\n    -- Push the call forwards to all states with the function.\n        for _, state in pairs( self.states) do\n            if state[functionName] ~ = nil then\n                state[functionName](state, .. .)\n            end\n        end\n    end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"changestate",children:"changeState"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Changes the current state of the machine to the given state."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"changeState(BaseStateMachineState newState, any ...)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"BaseStateMachineState"}),(0,i.jsx)(n.th,{children:"newState"}),(0,i.jsx)(n.th,{children:"The state to switch to."})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"..."}),(0,i.jsx)(n.td,{children:"The arguments passed into the onStateEntered function of the given state."})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function StateMachine:changeState(newState, .. .)\n    -- log("State change", self:getNameOfState(self.currentState), "to", self:getNameOfState(newState))\n\n    -- Keep track of the old state.\n    local previousState = self.currentState\n\n    -- Switch the state and alert the states of the change.\n    self.currentState = newState\n    previousState:onStateExited(newState)\n    newState:onStateEntered(previousState, .. .)\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"determinestate",children:"determineState"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Determines the best state to switch to based on the states' calculateIfValidEntryState function. Switches to the first\nstate that returns true, defaulting to self.defaultState."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"determineState()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function StateMachine:determineState()\n\n    -- Go over each state, the first one to be valid is the new state.\n    for _, state in pairs( self.states) do\n        if state:calculateIfValidEntryState() then\n            self:changeState(state)\n            return\n        end\n    end\n\n    -- Since no state was chosen, use the default state.\n    self:changeState( self.defaultState)\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getcurrentstateindex",children:"getCurrentStateIndex"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Gets the index of the current state. Internally calls self:getIndexOfState(self.currentState)."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getCurrentStateIndex()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"index"}),(0,i.jsx)(n.th,{children:"The index of the current state."})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function StateMachine:getCurrentStateIndex()\n    return self:getIndexOfState( self.currentState)\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getcurrentstatename",children:"getCurrentStateName"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Gets the name of the current state. Internally calls self:getNameOfState(self.currentState)."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getCurrentStateName()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"name"}),(0,i.jsx)(n.th,{children:"The name of the current state."})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function StateMachine:getCurrentStateName()\n    return self:getNameOfState( self.currentState)\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getindexofstate",children:"getIndexOfState"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Gets the index of the given state."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getIndexOfState(BaseStateMachineState state)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"BaseStateMachineState"}),(0,i.jsx)(n.th,{children:"state"}),(0,i.jsx)(n.th,{children:"The state whose index should be returned."})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"BaseStateMachineState"}),(0,i.jsx)(n.th,{children:"index"}),(0,i.jsx)(n.th,{children:"The index of the state, or nil if the state is not in the machine."})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function StateMachine:getIndexOfState(state)\n\n    --#debug Assert.isType(state, "table")\n\n    -- If mappings have not yet been created, do so.\n        if not self:getHasMappings() then\n            self:createStateIndexNameMapping()\n        end\n\n        for i, otherState in ipairs( self.sortedStates) do\n            if otherState = = state then\n                return i\n            end\n        end\n\n        return nil\n    end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"getispassive",children:"getIsPassive"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Gets the passive value for the state machine. Passive state machines do not change states during an update, and must\nbe explicitly told when to change state."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getIsPassive()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"BaseStateMachineState"}),(0,i.jsx)(n.th,{children:"isPassive"}),(0,i.jsx)(n.th,{children:"True if this state machine is passive; otherwise false."})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function StateMachine:getIsPassive()\n    return self.isPassive\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getnameofstate",children:"getNameOfState"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Gets the name of the given state."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getNameOfState(BaseStateMachineState state)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"BaseStateMachineState"}),(0,i.jsx)(n.th,{children:"state"}),(0,i.jsx)(n.th,{children:"The state whose name should be returned."})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"BaseStateMachineState"}),(0,i.jsx)(n.th,{children:"name"}),(0,i.jsx)(n.th,{children:"The name of the state, or nil if the state is not in the machine."})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function StateMachine:getNameOfState(state)\n\n    if state = = nil then\n        return "No state"\n    end\n\n    -- If the state is missing a name, initialise the state names.\n    if string.isNilOrWhitespace(state.name) then\n        self:initialiseStateNames()\n    end\n\n    -- Return the state\'s name,\n    return state.name\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"getstatebyindex",children:"getStateByIndex"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Gets the state associated with the given index."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getStateByIndex(integer index)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"integer"}),(0,i.jsx)(n.th,{children:"index"}),(0,i.jsx)(n.th,{children:"The index of the state to get."})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"integer"}),(0,i.jsx)(n.th,{children:"state"}),(0,i.jsx)(n.th,{children:"The state with the associated index, or nil if none exists."})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function StateMachine:getStateByIndex(index)\n\n    --#debug Assert.isType(index, "number")\n\n    -- If mappings have not yet been created, do so.\n        if not self:getHasMappings() then\n            self:createStateIndexNameMapping()\n        end\n\n        local state = self.sortedStates[index]\n        return state\n    end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"implementstateinterface",children:"implementStateInterface"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Copies all members from the BaseStateMachineState class into the class table used to call this function. Call this on\nthe class table just after the Class() call to allow a state machine to also act as a state."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"implementStateInterface()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function StateMachine:implementStateInterface()\n\n    -- Copy each value over from the base state class table over to this one.Don't overwrite anything.\n    for name, value in pairs( BaseStateMachineState ) do\n        if not self [name] then\n            self [name] = value\n        end\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"initialisestatetransitions",children:"initialiseStateTransitions"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Goes over each state and calls the BaseStateMachineState.createTransitions function. This is not called by the base\nclass by default."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"initialiseStateTransitions(any ...)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"..."}),(0,i.jsx)(n.th,{children:"The arguments passed into the createTransitions function of the given state."})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function StateMachine:initialiseStateTransitions( .. .)\n    for _, state in pairs( self.states) do\n        state:createTransitions( .. .)\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"new",children:"new"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Creates a base state machine. This should only be done within a derived class, as this is an abstract class."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"new(table custom_mt)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"table"}),(0,i.jsx)(n.th,{children:"custom_mt"}),(0,i.jsx)(n.th,{children:"The derived metatable to use."})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"table"}),(0,i.jsx)(n.th,{children:"instance"}),(0,i.jsx)(n.th,{children:"The created instance."})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function StateMachine.new(custom_mt)\n\n    -- Create the instance.\n    local self = setmetatable( { } , custom_mt or StateMachine _mt)\n\n    -- Start with no state and no default state.\n    self.currentState = nil\n    self.defaultState = nil\n\n    -- The passive value.If a state machine is passive, it never transitions between states during updates, it must be explicitly driven.\n    self.isPassive = false\n\n    -- The states table.\n    self.states = { }\n\n    -- The array of states by index, sorted by state name alphabetically.\n    self.sortedStates = nil\n\n    -- Return the created instance.\n    return self\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"resolvecurrentstate",children:"resolveCurrentState"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Resolves the current state of this state machine. If this.currentState has a resolveCurrentState function, its result\nis returned; otherwise the state itself is returned."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"resolveCurrentState()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"table"}),(0,i.jsx)(n.th,{children:"currentState"}),(0,i.jsx)(n.th,{children:"The fully resolved current state."})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function StateMachine:resolveCurrentState()\n\n    -- If the current state has a function to resolve the current state(e.g.if it is a state machine), return the result of the function call; otherwise return the current state.\n        return self.currentState.resolveCurrentState ~ = nil and self.currentState:resolveCurrentState() or self.currentState\n    end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"setispassive",children:"setIsPassive"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Sets the passive value for the state machine."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"setIsPassive(boolean isPassive)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"boolean"}),(0,i.jsx)(n.th,{children:"isPassive"}),(0,i.jsx)(n.th,{children:"If this state machine should be passive."})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function StateMachine:setIsPassive(isPassive)\n    self.isPassive = isPassive = = true\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"update",children:"update"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"The update function which updates each state."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"update(float dt)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"float"}),(0,i.jsx)(n.th,{children:"dt"}),(0,i.jsx)(n.th,{children:"Delta time in ms."})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function StateMachine:update(dt)\n    --#profile RemoteProfiler.zoneBeginN("StateMachine-update")\n    -- Check to see if any state wants to be forced, if the state machine is not passive.\n        if not self:getIsPassive() then\n            for _, state in pairs( self.states) do\n\n                -- If the state should be forced, switch to it and skip the other states.\n                if state:calculateIfShouldBeForced() then\n                    if state ~ = self.currentState then\n                        --#profile RemoteProfiler.zoneBeginN("StateMachine-stateChange: " .. (state.name or state.__CLASSNAME or ""))\n                        self:changeState(state)\n                        --#profile RemoteProfiler.zoneEnd()\n                        break\n                    end\n                end\n            end\n        end\n\n        -- Update the states based on if they\'re current or not.\n            for _, state in pairs( self.states) do\n                --#profile RemoteProfiler.zoneBeginN("StateMachine-stateUpdate: " .. (state.name or state.__CLASSNAME or ""))\n                if state ~ = self.currentState then\n                    state:updateAsInactive(dt)\n                else\n                        state:updateAsCurrent(dt)\n                    end\n                    --#profile RemoteProfiler.zoneEnd()\n                end\n                --#profile RemoteProfiler.zoneEnd()\n            end\n\n'})})]})}function o(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);