"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[23203],{28453(e,n,i){i.d(n,{R:()=>s,x:()=>a});var t=i(96540);const r={},l=t.createContext(r);function s(e){const n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(l.Provider,{value:n},e.children)}},56221(e,n,i){i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"script/Utils/BitmapUtil","title":"BitmapUtil","description":"BitmapUtil","source":"@site/../docs/script/Utils/BitmapUtil.md","sourceDirName":"script/Utils","slug":"/script/Utils/BitmapUtil","permalink":"/FS25-Community-LUADOC/script/Utils/BitmapUtil","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"BaseStateMachineState","permalink":"/FS25-Community-LUADOC/script/Utils/BaseStateMachineState"},"next":{"title":"BlurUtil","permalink":"/FS25-Community-LUADOC/script/Utils/BlurUtil"}}');var r=i(74848),l=i(28453);const s={},a=void 0,o={},c=[{value:"BitmapUtil",id:"bitmaputil",level:2},{value:"writeBitmapToFile",id:"writebitmaptofile",level:3},{value:"writeBitmapToFileFromIterator",id:"writebitmaptofilefromiterator",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"bitmaputil",children:"BitmapUtil"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Util for bitmap operations"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Functions"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#writebitmaptofile",children:"writeBitmapToFile"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#writebitmaptofilefromiterator",children:"writeBitmapToFileFromIterator"})}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"writebitmaptofile",children:"writeBitmapToFile"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Saves a table of pixels into a portable anymap (pnm)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"writeBitmapToFile(table pixels, integer width, integer height, string filepath, integer imageFormat)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"table"}),(0,r.jsx)(n.th,{children:"pixels"}),(0,r.jsx)(n.th,{children:"table of pixels, each pixel is a table"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:"width"}),(0,r.jsx)(n.td,{children:"image width in pixels"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:"height"}),(0,r.jsx)(n.td,{children:"image height in pixels"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"filepath"}),(0,r.jsx)(n.td,{children:"filepath for pnm"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:"imageFormat"}),(0,r.jsx)(n.td,{children:"image format, one of BitmapUtil.FORMAT"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"integer"}),(0,r.jsx)(n.th,{children:"success"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function BitmapUtil.writeBitmapToFile(pixels, width, height, filepath, imageFormat)\n    local maxBrightness = 255\n\n    local pnmFormat = BitmapUtil.FORMAT_TO_PNM[imageFormat]\n\n    if pnmFormat = = nil then\n        Logging.error( "Invalid image format \'%s\'.Use one of BitmapUtil.FORMAT" , imageFormat)\n        return false\n    end\n\n    filepath = string.format( "%s.%s" , filepath, pnmFormat.extension or "pnm" )\n    local file = createFile(filepath, FileAccess.WRITE)\n    if file = = 0 then\n        Logging.error( "BitmapUtil.writeBitmapToFile():Unable to create file \'%s\'" , filepath)\n        return false\n    end\n\n    -- Portable Anymap(PNM) Header\n    fileWrite(file, pnmFormat.getHeader(width, height, maxBrightness))\n\n    local pixelsToWrite = { }\n    local concatFunc, clearFunc = table.concat , table.clear\n\n    for pixelIndex = 1 , #pixels do\n        pixelsToWrite[#pixelsToWrite + 1 ] = pnmFormat.getPixel(pixels[pixelIndex])\n        if pixelIndex % 1025 = = 0 then\n            fileWrite(file, concatFunc(pixelsToWrite))\n            clearFunc(pixelsToWrite)\n        end\n    end\n\n    if #pixelsToWrite > 0 then\n        fileWrite(file, concatFunc(pixelsToWrite))\n    end\n\n    delete(file)\n\n    Logging.info( "Wrote bitmap(width = %d, height = %d) to \'%s\'" , width, height, filepath)\n    return true\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"writebitmaptofilefromiterator",children:"writeBitmapToFileFromIterator"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Saves pixels into a portable anymap (pnm)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"writeBitmapToFileFromIterator(function iterator, integer width, integer height, string filepath, integer imageFormat)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"function"}),(0,r.jsx)(n.th,{children:"iterator"}),(0,r.jsx)(n.th,{children:"iterator function returning the next pixel"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:"width"}),(0,r.jsx)(n.td,{children:"image width in pixels"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:"height"}),(0,r.jsx)(n.td,{children:"image height in pixels"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"filepath"}),(0,r.jsx)(n.td,{children:"filepath for pnm"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:"imageFormat"}),(0,r.jsx)(n.td,{children:"image format, one of BitmapUtil.FORMAT"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"integer"}),(0,r.jsx)(n.th,{children:"success"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function BitmapUtil.writeBitmapToFileFromIterator(iterator, width, height, filepath, imageFormat)\n    local pnmFormat = BitmapUtil.FORMAT_TO_PNM[imageFormat]\n\n    if pnmFormat = = nil then\n        Logging.error( "Invalid image format \'%s\'.Use one of BitmapUtil.FORMAT" , imageFormat)\n        return false\n    end\n\n    filepath = string.format( "%s.%s" , filepath, pnmFormat.extension or "pnm" )\n    local file = createFile(filepath, FileAccess.WRITE)\n    if file = = 0 then\n        Logging.error( "BitmapUtil.writeBitmapToFileFromIterator():Unable to create file \'%s\'" , filepath)\n        return false\n    end\n\n    -- Portable Anymap(PNM) Header\n    local maxBrightness = 255\n    fileWrite(file, pnmFormat.getHeader(width, height, maxBrightness))\n\n    local pixelsToWrite = { }\n    local pixelIndex = 1\n    local concatFunc, clearFunc = table.concat , table.clear\n\n    for pixel in iterator() do\n        pixelsToWrite[#pixelsToWrite + 1 ] = pnmFormat.getPixel(pixel)\n\n        if pixelIndex % 1025 = = 0 then -- only write to file every 1024 pixels\n            fileWrite(file, concatFunc(pixelsToWrite))\n            clearFunc(pixelsToWrite)\n        end\n\n        pixelIndex = pixelIndex + 1\n    end\n\n    if #pixelsToWrite > 0 then\n        fileWrite(file, concatFunc(pixelsToWrite))\n    end\n\n    delete(file)\n\n    Logging.info( "Wrote bitmap(width = %d, height = %d) to \'%s\'" , width, height, filepath)\n    return true\nend\n\n'})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);