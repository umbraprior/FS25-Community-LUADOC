"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[30223],{28453(e,n,s){s.d(n,{R:()=>r,x:()=>d});var i=s(96540);const l={},t=i.createContext(l);function r(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),i.createElement(t.Provider,{value:n},e.children)}},81807(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"script/Missions/AbstractMission","title":"AbstractMission","description":"AbstractMission","source":"@site/../docs/script/Missions/AbstractMission.md","sourceDirName":"script/Missions","slug":"/script/Missions/AbstractMission","permalink":"/FS25-Community-LUADOC/script/Missions/AbstractMission","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"TreePlantManager","permalink":"/FS25-Community-LUADOC/script/Misc/TreePlantManager"},"next":{"title":"MissionManager","permalink":"/FS25-Community-LUADOC/script/Missions/MissionManager"}}');var l=s(74848),t=s(28453);const r={},d=void 0,c={},a=[{value:"AbstractMission",id:"abstractmission",level:2},{value:"calculateReimbursement",id:"calculatereimbursement",level:3},{value:"calculateStealingCost",id:"calculatestealingcost",level:3},{value:"canRun",id:"canrun",level:3},{value:"delete",id:"delete",level:3},{value:"dismiss",id:"dismiss",level:3},{value:"farmDestroyed",id:"farmdestroyed",level:3},{value:"finish",id:"finish",level:3},{value:"finishedPreparing",id:"finishedpreparing",level:3},{value:"getActualReward",id:"getactualreward",level:3},{value:"getActualStealingCosts",id:"getactualstealingcosts",level:3},{value:"getActualVehicleCosts",id:"getactualvehiclecosts",level:3},{value:"getCompletion",id:"getcompletion",level:3},{value:"getDescription",id:"getdescription",level:3},{value:"getDetails",id:"getdetails",level:3},{value:"getExtraProgressText",id:"getextraprogresstext",level:3},{value:"getFinishedDetails",id:"getfinisheddetails",level:3},{value:"getInfo",id:"getinfo",level:3},{value:"getIsFinished",id:"getisfinished",level:3},{value:"getIsInProgress",id:"getisinprogress",level:3},{value:"getIsPrepared",id:"getisprepared",level:3},{value:"getIsReadyToStart",id:"getisreadytostart",level:3},{value:"getIsRunning",id:"getisrunning",level:3},{value:"getIsWorkAllowed",id:"getisworkallowed",level:3},{value:"getLocation",id:"getlocation",level:3},{value:"getMapHotspots",id:"getmaphotspots",level:3},{value:"getMinutesLeft",id:"getminutesleft",level:3},{value:"getMissionTypeName",id:"getmissiontypename",level:3},{value:"getNPC",id:"getnpc",level:3},{value:"getReimbursement",id:"getreimbursement",level:3},{value:"getReward",id:"getreward",level:3},{value:"getStealingCosts",id:"getstealingcosts",level:3},{value:"getTitle",id:"gettitle",level:3},{value:"getTotalReward",id:"gettotalreward",level:3},{value:"getUniqueId",id:"getuniqueid",level:3},{value:"getVariant",id:"getvariant",level:3},{value:"getVehicleCosts",id:"getvehiclecosts",level:3},{value:"getVehicleGroup",id:"getvehiclegroup",level:3},{value:"getVehicleGroupFromIdentifier",id:"getvehiclegroupfromidentifier",level:3},{value:"getVehicleSize",id:"getvehiclesize",level:3},{value:"getVehicleVariant",id:"getvehiclevariant",level:3},{value:"getWasRunning",id:"getwasrunning",level:3},{value:"getWasStarted",id:"getwasstarted",level:3},{value:"getWorldPosition",id:"getworldposition",level:3},{value:"hasLeasableVehicles",id:"hasleasablevehicles",level:3},{value:"init",id:"init",level:3},{value:"isSpawnSpaceAvailable",id:"isspawnspaceavailable",level:3},{value:"isTimedOut",id:"istimedout",level:3},{value:"loadFromXMLFile",id:"loadfromxmlfile",level:3},{value:"loadMapData",id:"loadmapdata",level:3},{value:"new",id:"new",level:3},{value:"onSavegameLoaded",id:"onsavegameloaded",level:3},{value:"onSpawnedVehicle",id:"onspawnedvehicle",level:3},{value:"onVehicleReset",id:"onvehiclereset",level:3},{value:"prepare",id:"prepare",level:3},{value:"reactivate",id:"reactivate",level:3},{value:"readStream",id:"readstream",level:3},{value:"readUpdateStream",id:"readupdatestream",level:3},{value:"removeAccess",id:"removeaccess",level:3},{value:"saveToXMLFile",id:"savetoxmlfile",level:3},{value:"setDefaultEndDate",id:"setdefaultenddate",level:3},{value:"setEndDate",id:"setenddate",level:3},{value:"setEndDateByOffset",id:"setenddatebyoffset",level:3},{value:"setUniqueId",id:"setuniqueid",level:3},{value:"spawnVehicle",id:"spawnvehicle",level:3},{value:"spawnVehicles",id:"spawnvehicles",level:3},{value:"start",id:"start",level:3},{value:"started",id:"started",level:3},{value:"tryGenerateMission",id:"trygeneratemission",level:3},{value:"unloadMapData",id:"unloadmapdata",level:3},{value:"update",id:"update",level:3},{value:"updateTick",id:"updatetick",level:3},{value:"validate",id:"validate",level:3},{value:"writeStream",id:"writestream",level:3},{value:"writeUpdateStream",id:"writeupdatestream",level:3}];function o(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"abstractmission",children:"AbstractMission"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Parent"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"?version=script&category=&class=",children:"Object"})}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Functions"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#calculatereimbursement",children:"calculateReimbursement"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#calculatestealingcost",children:"calculateStealingCost"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#canrun",children:"canRun"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#delete",children:"delete"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#dismiss",children:"dismiss"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#farmdestroyed",children:"farmDestroyed"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#finish",children:"finish"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#finishedpreparing",children:"finishedPreparing"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getactualreward",children:"getActualReward"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getactualstealingcosts",children:"getActualStealingCosts"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getactualvehiclecosts",children:"getActualVehicleCosts"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getcompletion",children:"getCompletion"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getdescription",children:"getDescription"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getdetails",children:"getDetails"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getextraprogresstext",children:"getExtraProgressText"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getfinisheddetails",children:"getFinishedDetails"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getinfo",children:"getInfo"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getisfinished",children:"getIsFinished"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getisinprogress",children:"getIsInProgress"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getisprepared",children:"getIsPrepared"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getisreadytostart",children:"getIsReadyToStart"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getisrunning",children:"getIsRunning"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getisworkallowed",children:"getIsWorkAllowed"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getlocation",children:"getLocation"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getmaphotspots",children:"getMapHotspots"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getminutesleft",children:"getMinutesLeft"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getmissiontypename",children:"getMissionTypeName"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getnpc",children:"getNPC"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getreimbursement",children:"getReimbursement"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getreward",children:"getReward"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getstealingcosts",children:"getStealingCosts"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#gettitle",children:"getTitle"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#gettotalreward",children:"getTotalReward"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getuniqueid",children:"getUniqueId"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getvariant",children:"getVariant"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getvehiclecosts",children:"getVehicleCosts"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getvehiclegroup",children:"getVehicleGroup"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getvehiclegroupfromidentifier",children:"getVehicleGroupFromIdentifier"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getvehiclesize",children:"getVehicleSize"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getvehiclevariant",children:"getVehicleVariant"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getwasrunning",children:"getWasRunning"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getwasstarted",children:"getWasStarted"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getworldposition",children:"getWorldPosition"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#hasleasablevehicles",children:"hasLeasableVehicles"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#init",children:"init"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#isspawnspaceavailable",children:"isSpawnSpaceAvailable"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#istimedout",children:"isTimedOut"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#loadfromxmlfile",children:"loadFromXMLFile"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#loadmapdata",children:"loadMapData"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#new",children:"new"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#onsavegameloaded",children:"onSavegameLoaded"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#onspawnedvehicle",children:"onSpawnedVehicle"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#onvehiclereset",children:"onVehicleReset"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#prepare",children:"prepare"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#reactivate",children:"reactivate"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#readstream",children:"readStream"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#readupdatestream",children:"readUpdateStream"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#removeaccess",children:"removeAccess"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#savetoxmlfile",children:"saveToXMLFile"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#setdefaultenddate",children:"setDefaultEndDate"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#setenddate",children:"setEndDate"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#setenddatebyoffset",children:"setEndDateByOffset"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#setuniqueid",children:"setUniqueId"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#spawnvehicle",children:"spawnVehicle"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#spawnvehicles",children:"spawnVehicles"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#start",children:"start"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#started",children:"started"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#trygeneratemission",children:"tryGenerateMission"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#unloadmapdata",children:"unloadMapData"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#update",children:"update"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#updatetick",children:"updateTick"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#validate",children:"validate"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#writestream",children:"writeStream"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#writeupdatestream",children:"writeUpdateStream"})}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"calculatereimbursement",children:"calculateReimbursement"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"calculateReimbursement()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:calculateReimbursement()\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"calculatestealingcost",children:"calculateStealingCost"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Calculate the cost of 'stealing' (a penalty after completion of the mission)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"calculateStealingCost()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:calculateStealingCost()\n    return 0\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"canrun",children:"canRun"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"canRun()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission.canRun()\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"delete",children:"delete"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Delete the mission"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"delete()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:delete()\n    AbstractMission:superClass().delete( self )\n\n    self:removeAccess()\n\n    g_messageCenter:unsubscribeAll( self )\n\n    g_missionManager:removeMission( self )\n    g_messageCenter:publish(MessageType.MISSION_DELETED, self )\n\n    local data = g_missionManager:getMissionTypeDataByName( self:getMissionTypeName())\n    -- data can be nil at game shutdown\n    if data ~ = nil then\n        data.numInstances = math.max(data.numInstances - 1 , 0 )\n    end\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"dismiss",children:"dismiss"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Dismiss mission from board. Called when mission moves from FINISH to deleted."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"dismiss()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:dismiss()\n    if self.status ~ = MissionStatus.DISMISSED then\n        self:setStatus(MissionStatus.DISMISSED)\n\n        if self.finishState = = MissionFinishState.SUCCESS then\n            self:removeAccess()\n        end\n\n        if self.isServer then\n            local change = self:getTotalReward()\n\n            if change ~ = 0 then\n                local mission = g_currentMission\n                mission:addMoney(change, self.farmId, MoneyType.MISSIONS, true , true )\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"farmdestroyed",children:"farmDestroyed"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Event when a farm got destroyed (mission will cancel)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"farmDestroyed()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"farmId"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:farmDestroyed(farmId)\n    if farmId = = self.farmId then\n        g_missionManager:markMissionForDeletion( self )\n    end\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"finish",children:"finish"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Finish mission (state to finished) with given finishState"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"finish()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"finishState"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:finish(finishState)\n    self:setStatus(MissionStatus.FINISHED)\n    self.finishState = finishState\n\n    if finishState ~ = MissionFinishState.SUCCESS then\n        self:removeAccess()\n    end\n\n    local mission = g_currentMission\n    if mission:getIsServer() then\n        if finishState = = MissionFinishState.SUCCESS then\n            g_farmManager:getFarmById( self.farmId).stats:updateMissionDone()\n        end\n\n        self.stealingCost = self:calculateStealingCost()\n        g_server:broadcastEvent(MissionFinishedEvent.new( self , finishState, self.stealingCost))\n    end\n\n    mission.hud:removeSideNotificationProgressBar( self.progressBar)\n\n    g_messageCenter:publish(MissionFinishedEvent, self , finishState)\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"finishedpreparing",children:"finishedPreparing"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"finishedPreparing()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:finishedPreparing()\n    self:setStatus(MissionStatus.RUNNING)\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getactualreward",children:"getActualReward"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getActualReward()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:getActualReward()\n    if self.finishState = = MissionFinishState.SUCCESS then\n        return self:getReward()\n    end\n\n    return 0\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getactualstealingcosts",children:"getActualStealingCosts"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getActualStealingCosts()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:getActualStealingCosts()\n    return self:getStealingCosts()\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getactualvehiclecosts",children:"getActualVehicleCosts"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getActualVehicleCosts()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:getActualVehicleCosts()\n    if self.spawnedVehicles then\n        return self:getVehicleCosts()\n    end\n\n    return 0\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getcompletion",children:"getCompletion"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Get the completion percentage. When 1.0, mission succeeds and finishes."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getCompletion()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:getCompletion()\n    return 0.0\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getdescription",children:"getDescription"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getDescription()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:getDescription()\n    return self.description\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getdetails",children:"getDetails"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getDetails()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function AbstractMission:getDetails()\n    local details = { }\n\n    if not self:getWasStarted() or self.spawnedVehicles then\n        table.insert(details, { title = g_i18n:getText( "contract_vehicleCosts" ), value = g_i18n:formatMoney( self:getVehicleCosts(), 0 , true , true ) } )\n    end\n\n    return details\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"getextraprogresstext",children:"getExtraProgressText"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Get an extra text shown with the progress bar"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getExtraProgressText()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function AbstractMission:getExtraProgressText()\n    return ""\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"getfinisheddetails",children:"getFinishedDetails"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getFinishedDetails()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function AbstractMission:getFinishedDetails()\n    local details = { }\n    table.insert(details, { title = g_i18n:getText( "contract_reward" ), value = g_i18n:formatMoney( self:getActualReward(), 0 , true , true ) } )\n    table.insert(details, { title = g_i18n:getText( "contract_reimbursement" ), value = g_i18n:formatMoney( self:getReimbursement(), 0 , true , true ) } )\n    table.insert(details, { title = g_i18n:getText( "contract_vehicleCosts" ), value = g_i18n:formatMoney( - self:getActualVehicleCosts(), 0 , true , true ) } )\n    table.insert(details, { title = g_i18n:getText( "contract_stealing" ), value = g_i18n:formatMoney( - self:getActualStealingCosts(), 0 , true , true ) } )\n\n    return details\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"getinfo",children:"getInfo"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getInfo()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:getInfo()\n    return self.info\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getisfinished",children:"getIsFinished"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getIsFinished()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:getIsFinished()\n    return self.status = = MissionStatus.FINISHED\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getisinprogress",children:"getIsInProgress"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getIsInProgress()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:getIsInProgress()\n    return self.status = = MissionStatus.PREPARING or self.status = = MissionStatus.RUNNING\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getisprepared",children:"getIsPrepared"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getIsPrepared()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:getIsPrepared()\n    if not self.spawnedVehicles then\n        return true\n    end\n\n    return # self.vehiclesToLoad = = # self.vehicles\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getisreadytostart",children:"getIsReadyToStart"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getIsReadyToStart()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:getIsReadyToStart()\n    return self.status = = MissionStatus.CREATED\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getisrunning",children:"getIsRunning"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getIsRunning()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:getIsRunning()\n    return self.status = = MissionStatus.RUNNING\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getisworkallowed",children:"getIsWorkAllowed"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getIsWorkAllowed()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"farmId"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"x"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"z"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"workAreaType"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"vehicle"})]})]})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:getIsWorkAllowed(farmId, x, z, workAreaType, vehicle)\n    return true\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getlocation",children:"getLocation"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getLocation()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function AbstractMission:getLocation()\n    return ""\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"getmaphotspots",children:"getMapHotspots"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getMapHotspots()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:getMapHotspots()\n    return nil\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getminutesleft",children:"getMinutesLeft"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getMinutesLeft()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:getMinutesLeft()\n    local endDate = self.endDate\n    if endDate = = nil then\n        return nil\n    end\n\n    local mission = g_currentMission\n    local environment = mission.environment\n    local currentMonotonicDay = environment.currentMonotonicDay\n    local dayTime = environment.dayTime\n    local totalDayTime = 24 * 60 * 60 * 1000\n\n    local endDay = endDate.endDay\n    local endDayTime = endDate.endDayTime\n\n    local dayTimeDelta = 0\n    if endDayTime > dayTime then\n        dayTimeDelta = endDayTime - dayTime\n    elseif currentMonotonicDay < endDay then\n            dayTimeDelta = dayTime + (totalDayTime - endDayTime)\n            currentMonotonicDay = currentMonotonicDay + 1\n        end\n\n        dayTimeDelta = dayTimeDelta + (endDay - currentMonotonicDay) * totalDayTime\n\n        local minutesLeft = dayTimeDelta / ( 1000 * 60 )\n\n        return minutesLeft\n    end\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getmissiontypename",children:"getMissionTypeName"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getMissionTypeName()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:getMissionTypeName()\n    return nil\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getnpc",children:"getNPC"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Get the NPC for the mission"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getNPC()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:getNPC()\n    return nil\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getreimbursement",children:"getReimbursement"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getReimbursement()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:getReimbursement()\n    return self.reimbursement\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getreward",children:"getReward"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getReward()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:getReward()\n    return 0\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getstealingcosts",children:"getStealingCosts"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getStealingCosts()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:getStealingCosts()\n    return 0\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"gettitle",children:"getTitle"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getTitle()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:getTitle()\n    return self.title\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"gettotalreward",children:"getTotalReward"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getTotalReward()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:getTotalReward()\n    local reward = self:getActualReward()\n    local vehicleCosts = self:getActualVehicleCosts()\n    local stealingCosts = self:getActualStealingCosts()\n    local reimbursement = self:getReimbursement()\n\n    return reward - vehicleCosts - stealingCosts + reimbursement\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getuniqueid",children:"getUniqueId"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Gets this mission's unique id."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getUniqueId()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"uniqueId"}),(0,l.jsx)(n.th,{children:"This mission's unique id."})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:getUniqueId()\n    return self.uniqueId\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getvariant",children:"getVariant"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getVariant()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:getVariant()\n    return nil\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getvehiclecosts",children:"getVehicleCosts"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getVehicleCosts()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:getVehicleCosts()\n    if self.vehiclesToLoad = = nil then\n        return 0\n    end\n\n    local numVehicles = # self.vehiclesToLoad\n    local mission = g_currentMission\n    local difficultyMultiplier = 0.7 + 0.3 * mission.missionInfo.economicDifficulty\n    local vehicleCosts = numVehicles * AbstractMission.VEHICLE_USE_COST\n\n    return vehicleCosts * difficultyMultiplier\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getvehiclegroup",children:"getVehicleGroup"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Get a list of vehicles"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getVehicleGroup()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"vehicles"}),(0,l.jsx)(n.th,{children:"List of vehicles. Each element is a vehicle xml path. Or nil"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"vehicleGroupIdentifier"}),(0,l.jsx)(n.td,{})]})})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:getVehicleGroup()\n    return g_missionManager:getRandomVehicleGroup( self:getMissionTypeName(), self:getVehicleSize(), self:getVehicleVariant())\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getvehiclegroupfromidentifier",children:"getVehicleGroupFromIdentifier"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Get a group of borred vehicles given the group identifier."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getVehicleGroupFromIdentifier()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"identifier"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:getVehicleGroupFromIdentifier(identifier)\n    return g_missionManager:getVehicleGroupFromIdentifier( self.type.name, self:getVehicleSize(), identifier)\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getvehiclesize",children:"getVehicleSize"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getVehicleSize()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function AbstractMission:getVehicleSize()\n    return "small"\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"getvehiclevariant",children:"getVehicleVariant"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Get variant of the vehicle needed."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getVehicleVariant(string? variant)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"string?"}),(0,l.jsx)(n.th,{children:"variant"}),(0,l.jsx)(n.th,{children:"variant name or nil for no filter"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:getVehicleVariant()\n    return nil\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getwasrunning",children:"getWasRunning"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getWasRunning()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:getWasRunning()\n    return self.status = = MissionStatus.RUNNING or self.status = = MissionStatus.FINISHED or self.status = = MissionStatus.DISMISSED\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getwasstarted",children:"getWasStarted"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getWasStarted()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:getWasStarted()\n    return self.status ~ = MissionStatus.CREATED\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getworldposition",children:"getWorldPosition"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getWorldPosition()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:getWorldPosition()\n    return 0 , 0\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"hasleasablevehicles",children:"hasLeasableVehicles"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Whether the missions upports borrowed vehicles"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"hasLeasableVehicles()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:hasLeasableVehicles()\n    return self.vehiclesToLoad ~ = nil\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"init",children:"init"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Initialize the mission. Subclass to add mission-based tasks."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"init()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:init()\n\n    self.vehiclesToLoad, self.vehicleGroupIdentifier = self:getVehicleGroup()\n\n    return true\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"isspawnspaceavailable",children:"isSpawnSpaceAvailable"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Check if enough space is available at spawn to spawn all vehicles"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"isSpawnSpaceAvailable()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function AbstractMission:isSpawnSpaceAvailable()\n    local result = true\n\n    local mission = g_currentMission\n    local places = mission.storeSpawnPlaces\n    local usedPlaces = mission.usedStorePlaces\n\n    local placesFilled = { }\n\n    for _, v in ipairs( self.vehiclesToLoad) do\n        local storeItem = g_storeManager:getItemByXMLFilename(v.filename)\n        local size = StoreItemUtil.getSizeValues(v.filename, "vehicle" , storeItem.rotation, v.configurations)\n\n        size.width = math.max(size.width, VehicleLoadingData.MIN_SPAWN_PLACE_WIDTH)\n        size.length = math.max(size.length, VehicleLoadingData.MIN_SPAWN_PLACE_LENGTH)\n        size.height = math.max(size.height, VehicleLoadingData.MIN_SPAWN_PLACE_HEIGHT)\n\n        size.width = size.width + VehicleLoadingData.SPAWN_WIDTH_OFFSET\n\n        local x, _, _, place, width, _ = PlacementUtil.getPlace(places, size, usedPlaces)\n\n        if x = = nil then\n            result = false\n            break\n        end\n\n        PlacementUtil.markPlaceUsed(usedPlaces, place, width)\n        table.insert(placesFilled, place)\n    end\n\n    for _, place in ipairs(placesFilled) do\n        PlacementUtil.unmarkPlaceUsed(usedPlaces, place)\n    end\n\n    return result\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"istimedout",children:"isTimedOut"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"isTimedOut()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:isTimedOut()\n    local minutesLeft = self:getMinutesLeft()\n    if minutesLeft = = nil then\n        return false\n    end\n\n    return minutesLeft < = 0\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"loadfromxmlfile",children:"loadFromXMLFile"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Load a mission from the savegame. Subclass to add custom properties."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"loadFromXMLFile()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"xmlFile"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"key"})]})})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function AbstractMission:loadFromXMLFile(xmlFile, key)\n    self.activeMissionId = xmlFile:getValue(key .. "#activeId" ) -- can be nil\n\n    self.status = MissionStatus.loadFromXMLFile(xmlFile, key .. "#status" )\n    if self.status = = nil then\n        Logging.xmlError(xmlFile, "Invalid mission status for \'%s\'" , key)\n            return false\n        end\n\n        self.finishState = MissionFinishState.loadFromXMLFile(xmlFile, key .. "#finishState" ) or MissionFinishState.NONE\n\n        local uniqueId = xmlFile:getValue(key .. "#uniqueId" , nil )\n        if uniqueId ~ = nil then\n            self:setUniqueId(uniqueId)\n        end\n\n        self.farmId = xmlFile:getValue(key .. "#farmId" )\n        self.reward = xmlFile:getValue(key .. ".info#reward" ) or self.reward\n        self.reimbursement = xmlFile:getValue(key .. ".info#reimbursement" ) or self.reimbursement\n        self.completion = xmlFile:getValue(key .. ".info#completion" ) or self.completion\n        self.stealingCost = xmlFile:getValue(key .. ".info#stealingCost" )\n\n        local endDay = xmlFile:getValue(key .. ".endDate#endDay" )\n        local endDayTime = xmlFile:getValue(key .. ".endDate#endDayTime" )\n        if endDay ~ = nil and endDayTime ~ = nil then\n            self:setEndDate(endDay, endDayTime)\n        end\n\n        local vehicleGroup, _\n        self.spawnedVehicles = xmlFile:getValue(key .. ".vehicles#spawned" , self.spawnedVehicles)\n        self.vehicleGroupIdentifier = xmlFile:getValue(key .. ".vehicles#group" )\n        self.vehiclesToLoad, _, _, vehicleGroup = self:getVehicleGroupFromIdentifier( self.vehicleGroupIdentifier)\n\n        local vehicleVariant = self:getVehicleVariant()\n        if vehicleVariant ~ = nil and vehicleGroup ~ = nil and vehicleGroup.variant ~ = vehicleVariant then\n            Logging.xmlWarning(xmlFile, "Loading vehicle group identifier does not match mission variant anymore.Skipping mission \'%s\'" , key)\n            return false\n        end\n\n        if self.vehiclesToLoad = = nil then\n            self.vehiclesToLoad, self.vehicleGroupIdentifier = self:getVehicleGroup()\n\n            if self.vehiclesToLoad = = nil then\n                Logging.xmlWarning(xmlFile, "Loading vehicle group failed.Skipping mission \'%s\'" , key)\n                return false\n            end\n        end\n\n        if self.spawnedVehicles and self.status ~ = MissionStatus.FINISHED and self.status ~ = MissionStatus.DISMISSED then\n            self.tryToAddMissingVehicles = true\n        end\n\n        for _, vehicleKey in xmlFile:iterator(key .. ".vehicles.vehicle" ) do\n            local vehicleUniqueId = xmlFile:getValue(vehicleKey .. "#uniqueId" )\n            if self.pendingVehicleUniqueIds = = nil then\n                self.pendingVehicleUniqueIds = { }\n            end\n            table.insert( self.pendingVehicleUniqueIds, vehicleUniqueId)\n        end\n\n        return true\n    end\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"loadmapdata",children:"loadMapData"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"loadMapData()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"xmlFile"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"baseDirectory"})]})})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission.loadMapData(xmlFile, baseDirectory)\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"new",children:"new"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Create a new mission"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"new()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"isServer"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"isClient"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"title"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"description"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"customMt"})]})]})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission.new(isServer, isClient, title, description, customMt)\n    local self = Object.new(isServer, isClient, customMt or AbstractMission _mt)\n\n    self.title = title\n    self.progressTitle = title\n    self.description = description\n    self.status = MissionStatus.CREATED\n    self.finishState = MissionFinishState.NONE\n    self.reward = 0\n    self.reimbursement = 0\n    self.completion = 0\n    self.vehicles = { }\n    self.info = { }\n    self.pendingVehicleLoadingData = { }\n    self.spawnedVehicles = false\n\n    -- The unique id of mission used to reference it from elsewhere.\n    self.uniqueId = nil\n\n    self.missionDirtyFlag = self:getNextDirtyFlag()\n\n    g_messageCenter:subscribe(MessageType.FARM_DELETED, self.farmDestroyed, self )\n    g_messageCenter:subscribe(MessageType.SAVEGAME_LOADED, self.onSavegameLoaded, self , nil , false )\n\n    local data = g_missionManager:getMissionTypeDataByName( self:getMissionTypeName())\n    data.numInstances = data.numInstances + 1\n\n    return self\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"onsavegameloaded",children:"onSavegameLoaded"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"onSavegameLoaded()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:onSavegameLoaded()\n    if self:getWasStarted() then\n        self:reactivate()\n    end\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"onspawnedvehicle",children:"onSpawnedVehicle"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"onSpawnedVehicle()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"vehicles"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"vehicleLoadState"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"loadingInfo"})]})]})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:onSpawnedVehicle(vehicles, vehicleLoadState, loadingInfo)\n    table.removeElement( self.pendingVehicleLoadingData, loadingInfo.loadingData)\n\n    if self.failedToLoadVehicles then\n        for _, vehicle in ipairs(vehicles) do\n            vehicle:delete()\n        end\n\n        return\n    end\n\n    if vehicleLoadState = = VehicleLoadingState.OK then\n        for _, vehicle in ipairs(vehicles) do\n            -- Vehicles are borrowed.Make them look used.\n            vehicle:addWearAmount( math.random() * 0.3 + 0.1 )\n            vehicle:setOperatingTime( 1000 * 60 * 60 * ( math.random() * 40 + 30 ))\n\n            table.insert( self.vehicles, vehicle)\n        end\n    else\n            -- mark mission as failed because of vehicles\n            self.failedToLoadVehicles = true\n\n            for _, vehicle in ipairs(vehicles) do\n                vehicle:delete()\n            end\n\n            -- cancel all pending loadings\n            for _, loadingData in ipairs( self.pendingVehicleLoadingData) do\n                loadingData:cancelLoading()\n            end\n            table.clear( self.pendingVehicleLoadingData)\n\n            -- remove the vehicle from mission vehicles\n            table.clear( self.vehiclesToLoad)\n\n            self.spawnedVehicles = false\n\n            -- remove all already loaded vehicles\n            for _, vehicle in ipairs( self.vehicles) do\n                vehicle:delete()\n            end\n            table.clear( self.vehicles)\n        end\n    end\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"onvehiclereset",children:"onVehicleReset"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"onVehicleReset()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"oldVehicle"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"newVehicle"})]})})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:onVehicleReset(oldVehicle, newVehicle)\n    if self.isServer then\n        local wasMissionVehicle = table.removeElement( self.vehicles, oldVehicle)\n        if wasMissionVehicle then\n            table.addElement( self.vehicles, newVehicle)\n        end\n    end\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"prepare",children:"prepare"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"prepare()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"spawnVehicles"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:prepare(spawnVehicles)\n    self:setStatus(MissionStatus.PREPARING)\n\n    if self.isServer and spawnVehicles and self.vehiclesToLoad ~ = nil then\n        self:spawnVehicles()\n        g_messageCenter:subscribe(MessageType.VEHICLE_RESET, self.onVehicleReset, self )\n    end\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"reactivate",children:"reactivate"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"reactivate()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:reactivate()\n    if self.spawnedVehicles then\n        g_messageCenter:subscribe(MessageType.VEHICLE_RESET, self.onVehicleReset, self )\n    end\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"readstream",children:"readStream"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Read the mission from a stream"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"readStream()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"streamId"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:readStream(streamId, connection)\n    AbstractMission:superClass().readStream( self , streamId, connection)\n\n    self.type = g_missionManager:getMissionTypeById(streamReadUInt8(streamId))\n    self.reward = streamReadFloat32(streamId)\n    self.reimbursement = streamReadFloat32(streamId)\n    self.status = MissionStatus.readStream(streamId)\n    self.spawnedVehicles = streamReadBool(streamId)\n\n    self.vehicleGroupIdentifier = streamReadInt32(streamId)\n    self.vehiclesToLoad = self:getVehicleGroupFromIdentifier( self.vehicleGroupIdentifier)\n\n    if self:getWasStarted() then\n        self.farmId = streamReadUIntN(streamId, FarmManager.FARM_ID_SEND_NUM_BITS)\n    end\n\n    if self.status = = MissionStatus.RUNNING or self.status = = MissionStatus.PREPARING then\n        self.activeMissionId = streamReadInt32(streamId)\n    elseif self.status = = MissionStatus.FINISHED then\n            self.stealingCost = streamReadFloat32(streamId)\n            self.finishState = MissionFinishState.readStream(streamId)\n        end\n\n        if streamReadBool(streamId) then\n            local endDay = streamReadInt32(streamId)\n            local endDayTime = streamReadFloat32(streamId)\n            self:setEndDate(endDay, endDayTime)\n        end\n\n        g_missionManager:assignGenerationTime( self )\n        table.insert(g_missionManager.missions, self )\n\n        -- Publish in next frame, so the overrides are handled too\n        g_messageCenter:publishDelayed(MessageType.MISSION_GENERATED, self )\n    end\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"readupdatestream",children:"readUpdateStream"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Read live updates."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"readUpdateStream()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"streamId"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"timestamp"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"connection"})]})]})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:readUpdateStream(streamId, timestamp, connection)\n    local status = MissionStatus.readStream(streamId)\n    self:setStatus( status )\n\n    self.completion = streamReadFloat32(streamId)\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"removeaccess",children:"removeAccess"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Remove access from the vehicles"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"removeAccess()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:removeAccess()\n    if self.isServer then\n        self:calculateReimbursement()\n\n        for _, vehicle in ipairs( self.vehicles) do\n            if not vehicle:getIsBeingDeleted() then\n                vehicle:delete()\n            end\n        end\n        self.vehicles = { }\n    end\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"savetoxmlfile",children:"saveToXMLFile"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Save the mission to the savegame. Subclass to add custom properties."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"saveToXMLFile()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"xmlFile"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"key"})]})})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function AbstractMission:saveToXMLFile(xmlFile, key)\n\n    xmlFile:setValue(key .. "#uniqueId" , self.uniqueId)\n    MissionStatus.saveToXMLFile(xmlFile, key .. "#status" , self.status )\n    MissionFinishState.saveToXMLFile(xmlFile, key .. "#finishState" , self.finishState)\n    if self.farmId ~ = nil then\n        xmlFile:setValue(key .. "#farmId" , self.farmId)\n    end\n    if self.activeMissionId ~ = nil then\n        xmlFile:setValue(key .. "#activeId" , self.activeMissionId)\n    end\n\n    xmlFile:setValue(key .. ".info#reward" , self.reward)\n    xmlFile:setValue(key .. ".info#reimbursement" , self.reimbursement)\n    xmlFile:setValue(key .. ".info#completion" , self.completion)\n\n    if self.stealingCost ~ = nil then\n        xmlFile:setValue(key .. ".info#stealingCost" , self.stealingCost)\n    end\n\n    xmlFile:setValue(key .. ".vehicles#spawned" , self.spawnedVehicles)\n    xmlFile:setValue(key .. ".vehicles#group" , self.vehicleGroupIdentifier)\n    for k, vehicle in ipairs( self.vehicles) do\n        xmlFile:setValue( string.format(key .. ".vehicles.vehicle(%d)#uniqueId" , k - 1 ), vehicle.uniqueId)\n    end\n\n    if self.endDate ~ = nil then\n        xmlFile:setValue(key .. ".endDate#endDay" , self.endDate.endDay)\n        xmlFile:setValue(key .. ".endDate#endDayTime" , self.endDate.endDayTime)\n    end\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"setdefaultenddate",children:"setDefaultEndDate"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"setDefaultEndDate()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:setDefaultEndDate()\n    local mission = g_currentMission\n    local environment = mission.environment\n    local currentMonotonicDay = environment.currentMonotonicDay\n    local daysPerPeriod = environment.daysPerPeriod\n    local dayInPeriod = environment:getDayInPeriodFromDay(currentMonotonicDay)\n\n    local endDay = currentMonotonicDay + (daysPerPeriod - dayInPeriod)\n    local endDayTime = 24 * 60 * 60 * 1000 - 1\n\n    self:setEndDate(endDay, endDayTime)\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"setenddate",children:"setEndDate"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"setEndDate()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"endDay"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"endDayTime"})]})})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:setEndDate(endDay, endDayTime)\n    self.endDate = {\nendDay = endDay,\nendDayTime = endDayTime\n}\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"setenddatebyoffset",children:"setEndDateByOffset"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"setEndDateByOffset()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"dayTimeOffset"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:setEndDateByOffset(dayTimeOffset)\n    local mission = g_currentMission\n    local environment = mission.environment\n    local currentMonotonicDay = environment.currentMonotonicDay\n    local endDay, endDayTime = environment:getDayAndDayTime(dayTimeOffset, currentMonotonicDay)\n\n    self:setEndDate(endDay, endDayTime)\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"setuniqueid",children:"setUniqueId"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Sets this mission's unique id. Note that a mission's id should not be changed once it has been first set."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"setUniqueId(string uniqueId)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"string"}),(0,l.jsx)(n.th,{children:"uniqueId"}),(0,l.jsx)(n.th,{children:"The unique id to use."})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function AbstractMission:setUniqueId(uniqueId)\n    --#debug Assert.isType(uniqueId, "string", "Mission unique id must be a string!")\n    --#debug Assert.isNil(self.uniqueId, "Should not change a missions\'s unique id!")\n    self.uniqueId = uniqueId\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"spawnvehicle",children:"spawnVehicle"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"spawnVehicle()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"info"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:spawnVehicle(info)\n    local data = VehicleLoadingData.new()\n    data:setFilename(info.filename)\n    if data.isValid then\n        if info.configurations ~ = nil then\n            data:setConfigurations(info.configurations)\n        end\n\n        local mission = g_currentMission\n        data:setLoadingPlace(mission.storeSpawnPlaces, mission.usedStorePlaces)\n        data:setPropertyState(VehiclePropertyState.MISSION)\n        data:setOwnerFarmId( self.farmId)\n\n        table.insert( self.pendingVehicleLoadingData, data)\n\n        local loadingInfo = { loadingData = data, vehicleInfo = info }\n        data:load( self.onSpawnedVehicle, self , loadingInfo)\n    end\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"spawnvehicles",children:"spawnVehicles"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"spawnVehicles()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:spawnVehicles()\n    for _, info in ipairs( self.vehiclesToLoad) do\n        self:spawnVehicle(info)\n    end\n\n    self.spawnedVehicles = # self.vehiclesToLoad > 0\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"start",children:"start"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Start mission (state to started, active)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"start()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"spawnVehicles"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:start(spawnVehicles)\n    self:prepare(spawnVehicles)\n\n    -- Start being active\n    self:raiseActive()\n\n    g_server:broadcastEvent(MissionStartedEvent.new( self ))\n\n    return true\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"started",children:"started"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Mission has started"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"started()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:started()\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"trygeneratemission",children:"tryGenerateMission"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"tryGenerateMission()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission.tryGenerateMission()\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"unloadmapdata",children:"unloadMapData"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"unloadMapData()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission.unloadMapData()\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"update",children:"update"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Update"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"update()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"dt"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function AbstractMission:update(dt)\n    local mission = g_currentMission\n    if self.pendingVehicleUniqueIds ~ = nil then\n        for i = # self.pendingVehicleUniqueIds, 1 , - 1 do\n            local uniqueId = self.pendingVehicleUniqueIds[i]\n            local vehicle = mission.vehicleSystem:getVehicleByUniqueId(uniqueId)\n            if vehicle ~ = nil then\n                table.remove( self.pendingVehicleUniqueIds, i)\n                table.insert( self.vehicles, vehicle)\n            end\n        end\n\n        if # self.pendingVehicleUniqueIds = = 0 then\n            self.pendingVehicleUniqueIds = nil\n        end\n    end\n\n    -- wait until readding is done\n    if self.tryToAddMissingVehicles and self.pendingVehicleUniqueIds = = nil then\n        if # self.vehicles ~ = # self.vehiclesToLoad then\n            for _, info in ipairs( self.vehiclesToLoad) do\n                local found = false\n                for _, vehicle in ipairs( self.vehicles) do\n                    if info.filename = = vehicle.configFileName then\n                        found = true\n                        break\n                    end\n                end\n\n                if not found then\n                    self:spawnVehicle(info)\n                end\n            end\n        end\n\n        self.tryToAddMissingVehicles = false\n    end\n\n    if self.isServer then\n        if self.status = = MissionStatus.PREPARING then\n            if self:getIsPrepared() then\n                self:finishedPreparing()\n            end\n\n            if self.failedToLoadVehicles and # self.pendingVehicleLoadingData = = 0 then\n                self:finish(MissionFinishState.FAILED)\n            end\n        end\n    end\n\n    if self.status = = MissionStatus.RUNNING then\n        if self.isServer then\n            if self:isTimedOut() then\n                self:finish(MissionFinishState.TIMED_OUT)\n            elseif not self:validate() then\n                    self:finish(MissionFinishState.FAILED)\n                end\n            end\n        end\n\n        if self.status = = MissionStatus.RUNNING or self.status = = MissionStatus.FINISHED then\n            if g_localPlayer ~ = nil and g_localPlayer.farmId = = self.farmId then\n                if self.progressBar = = nil then\n                    self.progressBar = mission.hud:addSideNotificationProgressBar(g_i18n:getText( "contract_title" ), self.progressTitle, self.completion)\n                end\n\n                self.progressBar.progress = self.completion\n\n                mission.hud:markSideNotificationProgressBarForDrawing( self.progressBar)\n            end\n        end\n\n        if self.status = = MissionStatus.RUNNING or self.status = = MissionStatus.PREPARING then\n            self:raiseActive()\n        end\n    end\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"updatetick",children:"updateTick"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Update tick"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"updateTick()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"dt"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:updateTick(dt)\n    if self.isServer and self.status = = MissionStatus.RUNNING then\n        local mission = g_currentMission\n        if self.lastCompletion = = nil then\n            self.lastCompletion = mission.time\n        elseif self.lastCompletion < mission.time - 2500 then\n                self.completion = self:getCompletion()\n\n                -- 99.5% is displayed as 100%.Adds another margin of error.If it shows 100% it should complete always because of proper user feedback\n                if self.completion > = 0.995 then\n                    self:finish(MissionFinishState.SUCCESS)\n                end\n            end\n\n            if self.lastCompletion ~ = self.completion then\n                self:raiseDirtyFlags( self.missionDirtyFlag)\n            end\n        end\n    end\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"validate",children:"validate"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Validate that the mission is still able to run. If false, it is deleted by the mission manager"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"validate()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"event"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:validate(event)\n    local isTimedOut = self:isTimedOut()\n    return not isTimedOut\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"writestream",children:"writeStream"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Write the mission to a stream"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"writeStream()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"streamId"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:writeStream(streamId, connection)\n    AbstractMission:superClass().writeStream( self , streamId, connection)\n\n    streamWriteUInt8(streamId, self.type.typeId)\n    streamWriteFloat32(streamId, self.reward)\n    streamWriteFloat32(streamId, self.reimbursement)\n    MissionStatus.writeStream(streamId, self.status )\n    streamWriteBool(streamId, self.spawnedVehicles)\n    streamWriteInt32(streamId, self.vehicleGroupIdentifier)\n\n    if self:getWasStarted() then\n        streamWriteUIntN(streamId, self.farmId, FarmManager.FARM_ID_SEND_NUM_BITS)\n    end\n\n    -- if self.isRegistered then\n        if self.status = = MissionStatus.RUNNING or self.status = = MissionStatus.PREPARING then\n            -- is an active mission\n            streamWriteInt32(streamId, self.activeMissionId)\n        elseif self.status = = MissionStatus.FINISHED then\n                streamWriteFloat32(streamId, self.stealingCost or 0 )\n                MissionFinishState.writeStream(streamId, self.finishState)\n            end\n\n            if streamWriteBool(streamId, self.endDate ~ = nil ) then\n                streamWriteInt32(streamId, self.endDate.endDay)\n                streamWriteFloat32(streamId, self.endDate.endDayTime)\n            end\n        end\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"writeupdatestream",children:"writeUpdateStream"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Write live updates. THis includes the mission status and completion"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"writeUpdateStream()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"streamId"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"connection"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"dirtyMask"})]})]})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AbstractMission:writeUpdateStream(streamId, connection, dirtyMask)\n    MissionStatus.writeStream(streamId, self.status )\n    streamWriteFloat32(streamId, self.completion)\nend\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}}}]);