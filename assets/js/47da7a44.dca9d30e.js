"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[39245],{28453(e,n,t){t.d(n,{R:()=>a,x:()=>s});var i=t(96540);const r={},l=i.createContext(r);function a(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(l.Provider,{value:n},e.children)}},72849(e,n,t){t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"script/Materials/MaterialUtil","title":"MaterialUtil","description":"MaterialUtil","source":"@site/../docs/script/Materials/MaterialUtil.md","sourceDirName":"script/Materials","slug":"/script/Materials/MaterialUtil","permalink":"/FS25-Community-LUADOC/script/Materials/MaterialUtil","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"MaterialManager","permalink":"/FS25-Community-LUADOC/script/Materials/MaterialManager"},"next":{"title":"MotionPathEffectManager","permalink":"/FS25-Community-LUADOC/script/Materials/MotionPathEffectManager"}}');var r=t(74848),l=t(28453);const a={},s=void 0,d={},c=[{value:"MaterialUtil",id:"materialutil",level:2},{value:"getMaterialBySlotName",id:"getmaterialbyslotname",level:3},{value:"onCreateBaseMaterial",id:"oncreatebasematerial",level:3},{value:"onCreateMaterial",id:"oncreatematerial",level:3},{value:"onCreateParticleMaterial",id:"oncreateparticlematerial",level:3},{value:"onCreateParticleSystem",id:"oncreateparticlesystem",level:3},{value:"validateMaterialAttributes",id:"validatematerialattributes",level:3}];function o(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"materialutil",children:"MaterialUtil"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Util for materials"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Functions"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getmaterialbyslotname",children:"getMaterialBySlotName"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#oncreatebasematerial",children:"onCreateBaseMaterial"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#oncreatematerial",children:"onCreateMaterial"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#oncreateparticlematerial",children:"onCreateParticleMaterial"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#oncreateparticlesystem",children:"onCreateParticleSystem"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#validatematerialattributes",children:"validateMaterialAttributes"})}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"getmaterialbyslotname",children:"getMaterialBySlotName"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getMaterialBySlotName()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"node"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"materialName"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function MaterialUtil.getMaterialBySlotName(node, materialName)\n    if getHasClassId(node, ClassIds.SHAPE) then\n        local numMaterials = getNumOfMaterials(node)\n        for i = 1 , numMaterials do\n            if getMaterialSlotName(node, i - 1 ) = = materialName then\n                return getMaterial(node, i - 1 )\n            end\n        end\n    end\n\n    local numChildren = getNumOfChildren(node)\n    for i = 1 , numChildren do\n        local child = getChildAt(node, i - 1 )\n        local materialId = MaterialUtil.getMaterialBySlotName(child, materialName)\n        if materialId ~ = nil then\n            return materialId\n        end\n    end\n\n    return nil\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"oncreatebasematerial",children:"onCreateBaseMaterial"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Called by material holder to create material"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onCreateBaseMaterial(any unused, integer id)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"unused"}),(0,r.jsx)(n.th,{children:"unused"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:"id"}),(0,r.jsx)(n.td,{children:"id"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function MaterialUtil.onCreateBaseMaterial(_, id)\n    local materialNameStr = getUserAttribute(id, "materialName" )\n    if materialNameStr = = nil then\n        Logging.i3dWarning(id, "Missing \'materialName\' user attribute for MaterialUtil.onCreateBaseMaterial" )\n            return\n        end\n\n        g_materialManager:addBaseMaterial(materialNameStr, getMaterial(id, 0 ))\n    end\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"oncreatematerial",children:"onCreateMaterial"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Called by material holder to create material"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onCreateMaterial(any unused, integer id)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"unused"}),(0,r.jsx)(n.th,{children:"unused"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:"id"}),(0,r.jsx)(n.td,{children:"id"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function MaterialUtil.onCreateMaterial(_, id)\n    local isValid, fillTypeIndex, materialType, materialIndex = MaterialUtil.validateMaterialAttributes(id, "MaterialUtil.onCreateMaterial" )\n    if isValid then\n        g_materialManager:addMaterial(fillTypeIndex, materialType, materialIndex, getMaterial(id, 0 ))\n    end\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"oncreateparticlematerial",children:"onCreateParticleMaterial"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Called by material holder to create particle material"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onCreateParticleMaterial(any unused, integer id)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"unused"}),(0,r.jsx)(n.th,{children:"unused"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:"id"}),(0,r.jsx)(n.td,{children:"id"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function MaterialUtil.onCreateParticleMaterial(_, id)\n    local isValid, fillTypeIndex, materialType, materialIndex = MaterialUtil.validateMaterialAttributes(id, "MaterialUtil.onCreateParticleMaterial" )\n    if isValid then\n        g_materialManager:addParticleMaterial(fillTypeIndex, materialType, materialIndex, getMaterial(id, 0 ))\n    end\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"oncreateparticlesystem",children:"onCreateParticleSystem"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Called by particle holder to create particle system"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onCreateParticleSystem(any unused, integer id)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"unused"}),(0,r.jsx)(n.th,{children:"unused"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:"id"}),(0,r.jsx)(n.td,{children:"id"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function MaterialUtil.onCreateParticleSystem(_, id)\n    local particleTypeName = getUserAttribute(id, "particleType" )\n    if particleTypeName = = nil then\n        Logging.i3dWarning(id, "Missing \'particleType\' user attribute for MaterialUtil.onCreateParticleSystem" )\n            return\n        end\n\n        local particleType = g_particleSystemManager:getParticleSystemTypeByName(particleTypeName)\n        if particleType = = nil then\n            Logging.i3dWarning(id, "Unknown particleType \'%s\' given in \'particleType\' user attribute for MaterialUtil.onCreateParticleSystem" , particleTypeName)\n                print( string.format( "Available types: %s" , table.concat(g_particleSystemManager.particleTypes, " " )))\n                return\n            end\n\n            local defaultEmittingState = Utils.getNoNil(getUserAttribute(id, "defaultEmittingState" ), false )\n            local worldSpace = Utils.getNoNil(getUserAttribute(id, "worldSpace" ), true )\n            local forceFullLifespan = Utils.getNoNil(getUserAttribute(id, "forceFullLifespan" ), false )\n\n            local particleSystem = { }\n\n            ParticleUtil.loadParticleSystemFromNode(id, particleSystem, defaultEmittingState, worldSpace, forceFullLifespan)\n\n            g_particleSystemManager:addParticleSystem(particleType, particleSystem)\n        end\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"validatematerialattributes",children:"validateMaterialAttributes"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Called by material holder to create material"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"validateMaterialAttributes(entityId node, string sourceFuncName)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"entityId"}),(0,r.jsx)(n.th,{children:"node"}),(0,r.jsx)(n.th,{children:"id"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"sourceFuncName"}),(0,r.jsx)(n.td,{children:"used for logging"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"string"}),(0,r.jsx)(n.th,{children:"success"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"fillTypeIndex"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"materialType"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"materialIndex"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function MaterialUtil.validateMaterialAttributes(node, sourceFuncName)\n    local fillTypeStr = getUserAttribute(node, "fillType" )\n    if fillTypeStr = = nil then\n        Logging.i3dWarning(node, "Missing \'fillType\' user attribute for %q" , sourceFuncName)\n            return false\n        end\n\n        local fillTypeIndex = g_fillTypeManager:getFillTypeIndexByName(fillTypeStr)\n        if fillTypeIndex = = nil then\n            Logging.i3dWarning(node, "Unknown fillType %q in user attribute \'fillType\' for %q" , fillTypeStr, sourceFuncName)\n                return false\n            end\n\n            local materialTypeName = getUserAttribute(node, "materialType" )\n            if materialTypeName = = nil then\n                Logging.i3dWarning(node, "Missing \'materialType\' user attribute for %q" , sourceFuncName)\n                    return false\n                end\n\n                local materialType = g_materialManager:getMaterialTypeByName(materialTypeName)\n                if materialType = = nil then\n                    Logging.i3dWarning(node, "Unknown materialType %q for %q" , materialTypeName, sourceFuncName)\n                        return false\n                    end\n\n                    local matIdStr = Utils.getNoNil(getUserAttribute(node, "materialIndex" ), 1 )\n                    local materialIndex = tonumber(matIdStr)\n                    if materialIndex = = nil then\n                        Logging.i3dWarning(node, "Invalid materialIndex %q for %q" , matIdStr, sourceFuncName)\n                            return false\n                        end\n\n                        return true , fillTypeIndex, materialType, materialIndex\n                    end\n\n'})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}}}]);