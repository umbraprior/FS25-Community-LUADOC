"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[79020],{28453(n,e,i){i.d(e,{R:()=>t,x:()=>o});var s=i(96540);const r={},l=s.createContext(r);function t(n){const e=s.useContext(l);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:t(n.components),s.createElement(l.Provider,{value:e},n.children)}},61027(n,e,i){i.r(e),i.d(e,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"script/Missions/MissionManager","title":"MissionManager","description":"MissionManager","source":"@site/../docs/script/Missions/MissionManager.md","sourceDirName":"script/Missions","slug":"/script/Missions/MissionManager","permalink":"/FS25-Community-LUADOC/script/Missions/MissionManager","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"AbstractMission","permalink":"/FS25-Community-LUADOC/script/Missions/AbstractMission"},"next":{"title":"PlayerLocalNetworkComponent","permalink":"/FS25-Community-LUADOC/script/Networking/PlayerLocalNetworkComponent"}}');var r=i(74848),l=i(28453);const t={},o=void 0,d={},a=[{value:"MissionManager",id:"missionmanager",level:2},{value:"addMission",id:"addmission",level:3},{value:"addPendingMissionVehiclesFile",id:"addpendingmissionvehiclesfile",level:3},{value:"assignGenerationTime",id:"assigngenerationtime",level:3},{value:"cancelMission",id:"cancelmission",level:3},{value:"createMissionMap",id:"createmissionmap",level:3},{value:"delete",id:"delete",level:3},{value:"destroyMissionMap",id:"destroymissionmap",level:3},{value:"dismissMission",id:"dismissmission",level:3},{value:"finishMissionGeneration",id:"finishmissiongeneration",level:3},{value:"generateMission",id:"generatemission",level:3},{value:"getCanStartNewMissionGeneration",id:"getcanstartnewmissiongeneration",level:3},{value:"getFreeActiveMissionId",id:"getfreeactivemissionid",level:3},{value:"getIsMissionDestructible",id:"getismissiondestructible",level:3},{value:"getIsMissionRunningOnFarmland",id:"getismissionrunningonfarmland",level:3},{value:"getIsMissionWorkAllowed",id:"getismissionworkallowed",level:3},{value:"getIsShapeCutAllowed",id:"getisshapecutallowed",level:3},{value:"getMissionAtWorldPosition",id:"getmissionatworldposition",level:3},{value:"getMissionByActiveMissionId",id:"getmissionbyactivemissionid",level:3},{value:"getMissionBySplitShape",id:"getmissionbysplitshape",level:3},{value:"getMissionByUniqueId",id:"getmissionbyuniqueid",level:3},{value:"getMissionMapActiveMissionIdAtWorldPosition",id:"getmissionmapactivemissionidatworldposition",level:3},{value:"getMissions",id:"getmissions",level:3},{value:"getMissionsByFarmId",id:"getmissionsbyfarmid",level:3},{value:"getMissionsByType",id:"getmissionsbytype",level:3},{value:"getMissionType",id:"getmissiontype",level:3},{value:"getMissionTypeById",id:"getmissiontypebyid",level:3},{value:"getMissionTypeDataByName",id:"getmissiontypedatabyname",level:3},{value:"getRandomVehicleGroup",id:"getrandomvehiclegroup",level:3},{value:"getVehicleGroupFromIdentifier",id:"getvehiclegroupfromidentifier",level:3},{value:"hasFarmReachedMissionLimit",id:"hasfarmreachedmissionlimit",level:3},{value:"initDataStructures",id:"initdatastructures",level:3},{value:"loadFromXMLFile",id:"loadfromxmlfile",level:3},{value:"loadMapData",id:"loadmapdata",level:3},{value:"loadVehicleGroups",id:"loadvehiclegroups",level:3},{value:"markMissionForDeletion",id:"markmissionfordeletion",level:3},{value:"new",id:"new",level:3},{value:"registerMission",id:"registermission",level:3},{value:"registerMissionType",id:"registermissiontype",level:3},{value:"removeMission",id:"removemission",level:3},{value:"saveToXMLFile",id:"savetoxmlfile",level:3},{value:"setMissionMapActiveMissionId",id:"setmissionmapactivemissionid",level:3},{value:"startMission",id:"startmission",level:3},{value:"startMissionGeneration",id:"startmissiongeneration",level:3},{value:"unloadMapData",id:"unloadmapdata",level:3},{value:"unregisterMissionType",id:"unregistermissiontype",level:3},{value:"update",id:"update",level:3},{value:"updateMissions",id:"updatemissions",level:3}];function c(n){const e={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h2,{id:"missionmanager",children:"MissionManager"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Parent"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:"?version=script&category=59&class=567",children:"AbstractManager"})}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Functions"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#addmission",children:"addMission"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#addpendingmissionvehiclesfile",children:"addPendingMissionVehiclesFile"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#assigngenerationtime",children:"assignGenerationTime"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#cancelmission",children:"cancelMission"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#createmissionmap",children:"createMissionMap"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#delete",children:"delete"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#destroymissionmap",children:"destroyMissionMap"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#dismissmission",children:"dismissMission"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#finishmissiongeneration",children:"finishMissionGeneration"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#generatemission",children:"generateMission"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#getcanstartnewmissiongeneration",children:"getCanStartNewMissionGeneration"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#getfreeactivemissionid",children:"getFreeActiveMissionId"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#getismissiondestructible",children:"getIsMissionDestructible"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#getismissionrunningonfarmland",children:"getIsMissionRunningOnFarmland"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#getismissionworkallowed",children:"getIsMissionWorkAllowed"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#getisshapecutallowed",children:"getIsShapeCutAllowed"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#getmissionatworldposition",children:"getMissionAtWorldPosition"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#getmissionbyactivemissionid",children:"getMissionByActiveMissionId"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#getmissionbysplitshape",children:"getMissionBySplitShape"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#getmissionbyuniqueid",children:"getMissionByUniqueId"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#getmissionmapactivemissionidatworldposition",children:"getMissionMapActiveMissionIdAtWorldPosition"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#getmissions",children:"getMissions"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#getmissionsbyfarmid",children:"getMissionsByFarmId"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#getmissionsbytype",children:"getMissionsByType"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#getmissiontype",children:"getMissionType"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#getmissiontypebyid",children:"getMissionTypeById"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#getmissiontypedatabyname",children:"getMissionTypeDataByName"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#getrandomvehiclegroup",children:"getRandomVehicleGroup"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#getvehiclegroupfromidentifier",children:"getVehicleGroupFromIdentifier"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#hasfarmreachedmissionlimit",children:"hasFarmReachedMissionLimit"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#initdatastructures",children:"initDataStructures"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#loadfromxmlfile",children:"loadFromXMLFile"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#loadmapdata",children:"loadMapData"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#loadvehiclegroups",children:"loadVehicleGroups"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#markmissionfordeletion",children:"markMissionForDeletion"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#new",children:"new"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#registermission",children:"registerMission"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#registermissiontype",children:"registerMissionType"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#removemission",children:"removeMission"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#savetoxmlfile",children:"saveToXMLFile"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#setmissionmapactivemissionid",children:"setMissionMapActiveMissionId"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#startmission",children:"startMission"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#startmissiongeneration",children:"startMissionGeneration"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#unloadmapdata",children:"unloadMapData"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#unregistermissiontype",children:"unregisterMissionType"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#update",children:"update"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#updatemissions",children:"updateMissions"})}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"addmission",children:"addMission"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"addMission()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"mission"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:'function MissionManager:addMission(mission)\n    -- Ensure the mission has not already been added.\n    if mission:getUniqueId() ~ = nil and self.missionByUniqueId[mission:getUniqueId()] ~ = nil then\n        Logging.warning( "Tried to add existing mission with unique id of %s! Existing: %s, new: %s" , mission:getUniqueId(), tostring( self.missionByUniqueId[mission:getUniqueId()]), tostring(mission))\n        return\n    end\n\n    -- If the mission has no unique id, give it one.\n    if mission:getUniqueId() = = nil then\n        mission:setUniqueId( Utils.getUniqueId(mission, self.missionByUniqueId, MissionManager.UNIQUE_ID_PREFIX))\n    end\n    self.missionByUniqueId[mission:getUniqueId()] = mission\n\n    table.addElement( self.missions, mission)\nend\n\n'})}),"\n",(0,r.jsx)(e.h3,{id:"addpendingmissionvehiclesfile",children:"addPendingMissionVehiclesFile"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"addPendingMissionVehiclesFile()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"filename"})]})}),(0,r.jsx)(e.tbody,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"baseDirectory"})]})})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:addPendingMissionVehiclesFile(filename, baseDirectory)\n    table.insert( self.pendingMissionVehicleFiles, { filename, baseDirectory } )\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"assigngenerationtime",children:"assignGenerationTime"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Generation time is used for reliably sorting"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"assignGenerationTime()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"mission"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:assignGenerationTime(mission)\n    mission.generationTime = self.nextGeneratedMissionId\n    self.nextGeneratedMissionId = self.nextGeneratedMissionId + 1\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"cancelmission",children:"cancelMission"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Cancel mission: sets it to finished without success"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"cancelMission()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"mission"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:'function MissionManager:cancelMission(mission)\n    local currentMission = g_currentMission\n    assert(currentMission:getIsServer(), "MissionManager:cancelMission is a server-only function" )\n\n        if mission ~ = nil and mission.status ~ = MissionStatus.FINISHED then\n            mission:finish(MissionFinishState.CANCELED)\n            return true\n        end\n\n        return false\n    end\n\n'})}),"\n",(0,r.jsx)(e.h3,{id:"createmissionmap",children:"createMissionMap"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"createMissionMap()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:'function MissionManager:createMissionMap()\n    self.missionMap = InfoLayer.new( "MissionAccessMap" )\n    self.missionMap:create( self.defaultMissionMapWidth, self.defaultMissionMapHeight, self.missionMapNumChannels, false )\n\n    local currentMission = g_currentMission\n    -- disable the growth in the mission field\n    if currentMission:getIsServer() then\n        currentMission.growthSystem:setGrowthMask( self.missionMap:getId(), 0 , self.missionMapNumChannels)\n    end\n\n    if MissionManager.DEBUG_ENABLED then\n        local cellsize = currentMission.terrainSize / self.defaultMissionMapWidth\n        self.debugBitVectorMap = DebugBitVectorMap.newSimple( 20 , cellsize, false , 0.2 )\n        self.debugBitVectorMap:createWithCustomFunc( function (instance, startWorldX, startWorldZ, widthWorldX, widthWorldZ, heightWorldX, heightWorldZ)\n            local centerX = (startWorldX + widthWorldX + heightWorldX) / 3\n            local centerZ = (startWorldZ + widthWorldZ + heightWorldZ) / 3\n\n            local value = self.missionMap:getValueAtWorldPos(centerX, centerZ)\n            -- local text = string.format("%d %d: %f", startWorldX / 10, startWorldZ / 10, value)\n            -- Utils.renderTextAtWorldPosition(startWorldX / 10, 0, startWorldZ / 10, text)\n            return value\n        end )\n        g_debugManager:addElement( self.debugBitVectorMap)\n    end\nend\n\n'})}),"\n",(0,r.jsx)(e.h3,{id:"delete",children:"delete"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Deletes field mission manager"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"delete()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:delete()\n    if self.debugBitVectorMap ~ = nil then\n        g_debugManager:removeElement( self.debugBitVectorMap)\n    end\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"destroymissionmap",children:"destroyMissionMap"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"destroyMissionMap()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:destroyMissionMap()\n    local currentMission = g_currentMission\n    -- remove the access density map from the growth updaters\n    if currentMission:getIsServer() then\n        currentMission.growthSystem:resetGrowthMask()\n    end\n\n    if self.missionMap ~ = nil then\n        self.missionMap:delete()\n        self.missionMap = nil\n    end\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"dismissmission",children:"dismissMission"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Dismiss a (finished or cancelled) mission. Deletes it completely. Calls dismiss on the mission to handle money\nexchange to farm.\nOn a client it sends an event instead"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"dismissMission()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"mission"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:'function MissionManager:dismissMission(mission)\n    local currentMission = g_currentMission\n    assert(currentMission:getIsServer(), "MissionManager:dismissMission is a server-only function" )\n\n        mission:dismiss()\n        mission:delete()\n\n        return true\n    end\n\n'})}),"\n",(0,r.jsx)(e.h3,{id:"finishmissiongeneration",children:"finishMissionGeneration"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"finishMissionGeneration()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:finishMissionGeneration()\n    g_messageCenter:publish(MessageType.MISSION_GENERATION_END)\n    self.generationTimer = MissionManager.MISSION_GENERATION_INTERVAL\n    self.missionGenerationInProgress = false\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"generatemission",children:"generateMission"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"generateMission()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:generateMission()\n    local missionType = self.missionTypes[ self.currentMissionTypeIndex]\n    if missionType = = nil then\n        self:finishMissionGeneration()\n        return\n    end\n\n    local success = false\n    local classObject = missionType.classObject\n    if classObject.tryGenerateMission ~ = nil then\n        local mission = classObject.tryGenerateMission()\n        if mission ~ = nil then\n            self:registerMission(mission, missionType)\n            success = true\n        end\n    end\n\n    self.currentMissionTypeIndex = self.currentMissionTypeIndex + 1\n    if self.currentMissionTypeIndex > # self.missionTypes then\n        self.currentMissionTypeIndex = 1\n    end\n\n    if self.currentMissionTypeIndex = = self.startMissionTypeIndex then\n        self:finishMissionGeneration()\n        return\n    end\n\n    if success then\n        self:finishMissionGeneration()\n        return\n    end\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"getcanstartnewmissiongeneration",children:"getCanStartNewMissionGeneration"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"getCanStartNewMissionGeneration()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:getCanStartNewMissionGeneration()\n    return not self.missionGenerationInProgress and # self.missions < MissionManager.MAX_MISSIONS and self.generationTimer < 0\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"getfreeactivemissionid",children:"getFreeActiveMissionId"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Get a free activeMissionId, used for active missions only."}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"getFreeActiveMissionId()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:getFreeActiveMissionId()\n    for i = 1 , MissionManager.MAX_MISSIONS do\n        if self:getMissionByActiveMissionId(i) = = nil then\n            return i\n        end\n    end\n\n    return 0\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"getismissiondestructible",children:"getIsMissionDestructible"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"getIsMissionDestructible()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"farmId"})]})}),(0,r.jsx)(e.tbody,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"nodeId"})]})})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:getIsMissionDestructible(farmId, nodeId)\n    for _, mission in ipairs( self.missions) do\n        if mission.getDestructibleIsInMissionArea ~ = nil then\n            if mission:getDestructibleIsInMissionArea(nodeId, farmId) then\n                return true\n            end\n        end\n    end\n\n    return false\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"getismissionrunningonfarmland",children:"getIsMissionRunningOnFarmland"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"getIsMissionRunningOnFarmland()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"farmland"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:getIsMissionRunningOnFarmland(farmland)\n    if farmland = = nil then\n        return false\n    end\n\n    local farmlandId = farmland:getId()\n    for _, mission in ipairs( self.missions) do\n        if mission.getFarmlandId ~ = nil and mission:getFarmlandId() = = farmlandId then\n            if mission:getIsInProgress() then\n                return true\n            end\n        end\n    end\n\n    return false\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"getismissionworkallowed",children:"getIsMissionWorkAllowed"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Check whether the player is allowed to work the farm at given location for mission purposes"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"getIsMissionWorkAllowed()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"farmId"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"x"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"z"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"workAreaType"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"vehicle"})]})]})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:getIsMissionWorkAllowed(farmId, x, z, workAreaType, vehicle)\n    local mission = self:getMissionAtWorldPosition(x, z)\n\n    if mission ~ = nil then\n        if mission.farmId = = farmId and mission:getIsWorkAllowed(farmId, x, z, workAreaType, vehicle) then\n            return true\n        end\n    end\n\n    return false\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"getisshapecutallowed",children:"getIsShapeCutAllowed"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"getIsShapeCutAllowed()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"shape"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"x"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"z"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"farmId"})]})]})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:getIsShapeCutAllowed(shape, x, z, farmId)\n    for _, mission in ipairs( self.missions) do\n        if mission.getIsShapeCutAllowed ~ = nil then\n            local isAllowed = mission:getIsShapeCutAllowed(shape, x, z, farmId)\n            if isAllowed ~ = nil then\n                return isAllowed\n            end\n        end\n    end\n\n    return nil\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"getmissionatworldposition",children:"getMissionAtWorldPosition"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Get the mission at given position"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"getMissionAtWorldPosition()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"worldX"})]})}),(0,r.jsx)(e.tbody,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"worldZ"})]})})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"or"}),(0,r.jsx)(e.th,{children:"nil if no mission"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:getMissionAtWorldPosition(worldX, worldZ)\n    local missionId = self:getMissionMapActiveMissionIdAtWorldPosition(worldX, worldZ)\n\n    if missionId > 0 then\n        return self:getMissionByActiveMissionId(missionId)\n    end\n\n    return nil\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"getmissionbyactivemissionid",children:"getMissionByActiveMissionId"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Get the mission associated with the activeMissionId"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"getMissionByActiveMissionId()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"activeMissionId"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:getMissionByActiveMissionId(activeMissionId)\n    for _, mission in ipairs( self.missions) do\n        if mission.activeMissionId = = activeMissionId then\n            return mission\n        end\n    end\n\n    return nil\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"getmissionbysplitshape",children:"getMissionBySplitShape"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"getMissionBySplitShape()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"shape"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:getMissionBySplitShape(shape)\n    if shape = = nil or shape = = 0 then\n        return nil\n    end\n\n    for _, mission in ipairs( self.missions) do\n        if mission.getIsMissionSplitShape ~ = nil then\n            if mission:getIsMissionSplitShape(shape) then\n                return mission\n            end\n        end\n    end\n\n    return nil\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"getmissionbyuniqueid",children:"getMissionByUniqueId"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"getMissionByUniqueId()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"uniqueId"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:getMissionByUniqueId(uniqueId)\n    return self.missionByUniqueId[uniqueId]\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"getmissionmapactivemissionidatworldposition",children:"getMissionMapActiveMissionIdAtWorldPosition"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"getMissionMapActiveMissionIdAtWorldPosition()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"worldX"})]})}),(0,r.jsx)(e.tbody,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"worldZ"})]})})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:getMissionMapActiveMissionIdAtWorldPosition(worldX, worldZ)\n    if self.missionMap = = nil then\n        return 0\n    end\n\n    return self.missionMap:getValueAtWorldPos(worldX, worldZ, nil , nil )\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"getmissions",children:"getMissions"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"getMissions()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:getMissions()\n    return self.missions\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"getmissionsbyfarmid",children:"getMissionsByFarmId"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Get a missions list. Used in the game menu."}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"getMissionsByFarmId()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"farmId"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:getMissionsByFarmId(farmId)\n    return table.ifilter( self.missions, function (mission)\n        -- All missions, but only for active it needs to match the farm\n            return mission.farmId = = nil or mission.farmId = = farmId\n        end )\n    end\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"getmissionsbytype",children:"getMissionsByType"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"getMissionsByType()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"typeIndex"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:getMissionsByType(typeIndex)\n    local missionType = self.missionTypes[typeIndex]\n    if missionType = = nil then\n        return nil\n    end\n\n    return table.ifilter( self.missions, function (mission)\n        return mission:isa(missionType.classObject)\n    end )\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"getmissiontype",children:"getMissionType"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Get a mission type with given name"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"getMissionType()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"name"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:getMissionType(name)\n    return self.nameToMissionType[ string.upper(name)]\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"getmissiontypebyid",children:"getMissionTypeById"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Get a mission type with given id"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"getMissionTypeById()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"id"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:getMissionTypeById(id)\n    return self.missionTypes[id]\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"getmissiontypedatabyname",children:"getMissionTypeDataByName"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"getMissionTypeDataByName()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"name"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:'function MissionManager:getMissionTypeDataByName(name)\n    if name = = nil then\n        Logging.devError( "MissionManager.getMissionTypeDataByName:no mission type name defined" )\n        if g_isDevelopmentVersion then\n            printCallstack()\n        end\n\n        return nil\n    end\n\n    local missionType = self.nameToMissionType[ string.upper(name)]\n    if missionType ~ = nil then\n        return missionType.data\n    end\n\n    return nil\nend\n\n'})}),"\n",(0,r.jsx)(e.h3,{id:"getrandomvehiclegroup",children:"getRandomVehicleGroup"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Get a randomly chosen group of vehicles fitting for given mission type and field size"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"getRandomVehicleGroup(string missionType, string size, string variant)"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"string"}),(0,r.jsx)(e.th,{children:"missionType"}),(0,r.jsx)(e.th,{children:"type of mission (string)"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"string"}),(0,r.jsx)(e.td,{children:"size"}),(0,r.jsx)(e.td,{children:"size of field: 'small', 'medium', 'large'"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"string"}),(0,r.jsx)(e.td,{children:"variant"}),(0,r.jsx)(e.td,{children:"variant identifier"})]})]})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"string"}),(0,r.jsx)(e.th,{children:"vehicles"}),(0,r.jsx)(e.th,{children:"each element is a table with filaname and configuration properties."})]})}),(0,r.jsx)(e.tbody,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"string"}),(0,r.jsx)(e.td,{children:"group"}),(0,r.jsx)(e.td,{children:"identifier"})]})})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:getRandomVehicleGroup(missionType, size, variant)\n    local groups = self.missionVehicles[missionType]\n    if groups = = nil then\n        return nil , 1\n    end\n\n    local sized = groups[size]\n    if sized = = nil then\n        return nil , 1\n    end\n\n    local variantGroups = table.ifilter(sized, function (group)\n        return variant = = nil or group.variant = = variant\n    end )\n\n    local group = table.getRandomElement(variantGroups)\n    if group = = nil then\n        return nil , 1\n    end\n\n    return group.vehicles, group.identifier\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"getvehiclegroupfromidentifier",children:"getVehicleGroupFromIdentifier"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Used on the client. Make sure it never crashes on nil (patches)"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"getVehicleGroupFromIdentifier(string missionType, string fieldSize, integer identifier)"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"string"}),(0,r.jsx)(e.th,{children:"missionType"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"string"}),(0,r.jsx)(e.td,{children:"fieldSize"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"integer"}),(0,r.jsx)(e.td,{children:"identifier"})]})]})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"integer"}),(0,r.jsx)(e.th,{children:"vehicles"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"integer"}),(0,r.jsx)(e.td,{children:"rewardScale"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"integer"}),(0,r.jsx)(e.td,{children:"errorMessage"})]})]})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:'function MissionManager:getVehicleGroupFromIdentifier(missionType, fieldSize, identifier)\n    local groups = self.missionVehicles[missionType]\n    if groups = = nil then\n        return nil , 1.0 , "No vehicles for missionType"\n        end\n\n        local sized = groups[fieldSize]\n        if sized = = nil then\n            return nil , 1.0 , "No vehicles for fieldSize"\n            end\n\n            local group = sized[identifier]\n            if group = = nil then\n                return nil , 1.0 , "No vehicles for index/indetifier"\n                end\n\n                return group.vehicles, group.rewardScale, "" , group\n            end\n\n'})}),"\n",(0,r.jsx)(e.h3,{id:"hasfarmreachedmissionlimit",children:"hasFarmReachedMissionLimit"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Get whether given farm has an active mission"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"hasFarmReachedMissionLimit()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"farmId"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:hasFarmReachedMissionLimit(farmId)\n    local total = 0\n\n    for _, mission in ipairs( self.missions) do\n        if mission.farmId = = farmId and mission:getWasStarted() then\n            total = total + 1\n        end\n    end\n\n    return total > = MissionManager.MAX_MISSIONS_PER_FARM\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"initdatastructures",children:"initDataStructures"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"initDataStructures()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:initDataStructures()\n    self.missions = { }\n    self.missionsToDelete = { }\n    self.missionTypes = { }\n    self.nameToMissionType = { }\n    self.missionByUniqueId = { }\n\n    self.missionMap = nil\n    self.currentMissionTypeIndex = 0\n    self.startMissionTypeIndex = 0\n\n    self.pendingMissionVehicleFiles = { }\n    self.missionVehicles = { }\n\n    -- Id used within a game-run.Not saved.To keep the items in order of generation\n    -- On both server and client.\n    self.nextGeneratedMissionId = 1\n    self.generationTimer = 0\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"loadfromxmlfile",children:"loadFromXMLFile"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Load fieldjob data from xml savegame file"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"loadFromXMLFile(string xmlFilename)"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"string"}),(0,r.jsx)(e.th,{children:"xmlFilename"}),(0,r.jsx)(e.th,{children:"xml filename"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:'function MissionManager:loadFromXMLFile(xmlFilename)\n    if xmlFilename = = nil then\n        return false\n    end\n\n    local xmlFile = XMLFile.load( "missionsXML" , xmlFilename, MissionManager.xmlSchemaSavegame)\n    if xmlFile = = nil then\n        return false\n    end\n\n    local version = xmlFile:getValue( "missions#version" )\n    if version ~ = MissionManager.VERSION then\n        Logging.xmlWarning(xmlFile, "Missions version does not match current mission manager version" )\n        xmlFile:delete()\n        return true\n    end\n\n    for _, missionType in ipairs( self.missionTypes) do\n        local classObject = missionType.classObject\n        local key = string.format( "missions.meta.%s" , missionType.name)\n        if classObject.loadMetaDataFromXMLFile ~ = nil then\n            classObject.loadMetaDataFromXMLFile(xmlFile, key)\n        end\n    end\n\n    local numElements = { }\n    for _, key in xmlFile:iterator( "missions.*" ) do\n        local missionTypeName = xmlFile:getElementName(key)\n        numElements[missionTypeName] = (numElements[missionTypeName] or 0 ) + 1\n        local missionTypeKey = string.format( "missions.%s(%d)" , missionTypeName, numElements[missionTypeName] - 1 )\n\n        if missionTypeName ~ = "meta" then\n            local missionType = self:getMissionType(missionTypeName)\n            if missionType ~ = nil then\n                local mission = missionType.classObject.new( true , g_client ~ = nil )\n                mission.type = missionType\n\n                self:assignGenerationTime(mission)\n\n                if mission:loadFromXMLFile(xmlFile, missionTypeKey) then\n                    local hasValidFarm = mission.farmId = = nil or g_farmManager:getFarmById(mission.farmId) ~ = nil\n                    if hasValidFarm then\n                        mission:register()\n                        self:addMission(mission)\n                    else\n                            table.insert( self.missionsToDelete, mission)\n                        end\n                    else\n                            if mission.failedToLoadFromXMLFile ~ = nil then\n                                mission:failedToLoadFromXMLFile()\n                            end\n                            table.insert( self.missionsToDelete, mission)\n                        end\n                    else\n                            Logging.xmlWarning(xmlFile, "Mission type \'%s\' not found for \'%s!" , missionTypeName, missionTypeKey)\n                            end\n                        end\n                    end\n\n                    xmlFile:delete()\n\n                    return true\n                end\n\n'})}),"\n",(0,r.jsx)(e.h3,{id:"loadmapdata",children:"loadMapData"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Load data on map load"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"loadMapData()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"xmlFile"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"true"}),(0,r.jsx)(e.th,{children:"if loading was successful else false"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:'function MissionManager:loadMapData(xmlFile)\n    MissionManager:superClass().loadMapData( self )\n\n    local isEnabled = Utils.getNoNil(getXMLBool(xmlFile, "map.missions#enabled" ), true )\n    if not isEnabled then\n        Logging.xmlInfo(xmlFile, "MissionManager:Disabled missions according to configuration" )\n        return\n    end\n\n    self:createMissionMap()\n    local currentMission = g_currentMission\n\n    local xmlFileObj = XMLFile.wrap(xmlFile, Mission00.xmlSchema)\n    for _, missionType in ipairs( self.missionTypes) do\n        local classObject = missionType.classObject\n\n        local key = string.format( "map.missions.%s" , missionType.name)\n        local data = missionType.data\n        data.maxNumInstances = xmlFileObj:getInt(key .. "#maxNumInstances" ) or data.maxNumInstances\n\n        if classObject.loadMapData ~ = nil then\n            classObject.loadMapData(xmlFileObj, key, currentMission.baseDirectory)\n        end\n    end\n    xmlFileObj:delete()\n\n    if currentMission:getIsServer() then\n        currentMission:addUpdateable( self )\n    end\n\n    local missionVehicleXmlFilename = getXMLString(xmlFile, "map.missions#vehicleFilename" )\n    if missionVehicleXmlFilename ~ = nil then\n        local path = Utils.getFilename(missionVehicleXmlFilename, currentMission.baseDirectory)\n        if path ~ = nil then\n            self:loadVehicleGroups(path, currentMission.baseDirectory)\n        end\n    else\n            Logging.xmlDevWarning(xmlFile, "MissionManager:No vehicleFilename defined for mission vehicles" )\n            end\n\n            -- From mods and dlcs\n            for _, info in ipairs( self.pendingMissionVehicleFiles) do\n                self:loadVehicleGroups(info[ 1 ], info[ 2 ])\n            end\n\n            if g_addTestCommands and g_server ~ = nil then\n                addConsoleCommand( "gsMissionGenerate" , "Force generating a new mission for given farmland" , "consoleGenerateMission" , self , "farmlandId; missionType" )\n                    addConsoleCommand( "gsMissionLoadVehicleSet" , "Loads a specific vehicle set" , "consoleLoadVehicleSet" , self , "missionType; [size(small|medium|large)]; [groupIndex]" )\n                    addConsoleCommand( "gsMissionLoadVehiclesAll" , "Loads all mission vehicles" , "consoleLoadAllVehicleSets" , self , "" )\n                end\n            end\n\n'})}),"\n",(0,r.jsx)(e.h3,{id:"loadvehiclegroups",children:"loadVehicleGroups"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Load vehicles for use with field missions"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"loadVehicleGroups()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"xmlFilename"})]})}),(0,r.jsx)(e.tbody,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"baseDirectory"})]})})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:'function MissionManager:loadVehicleGroups(xmlFilename, baseDirectory)\n    local xmlFile = XMLFile.load( "MissionVehicles" , xmlFilename, MissionManager.xmlSchema)\n    if xmlFile = = nil then\n        return false\n    end\n\n    for _, missionKey in xmlFile:iterator( "missionVehicles.mission" ) do\n        local missionTypeName = xmlFile:getValue(missionKey .. "#type" )\n        if missionTypeName = = nil then\n            Logging.xmlError(xmlFile, "Property type must exist on each mission - \'%s\'" , missionKey)\n            continue\n        end\n\n        local missionType = self:getMissionType(missionTypeName)\n        if missionType = = nil then\n            Logging.xmlError(xmlFile, "Mission type \'%s\' is not defined - \'%s\'" , missionTypeName, missionKey)\n            continue\n        end\n\n        if self.missionVehicles[missionTypeName] = = nil then\n            self.missionVehicles[missionTypeName] = { }\n        end\n        local groups = self.missionVehicles[missionTypeName]\n\n        for _, groupKey in xmlFile:iterator(missionKey .. ".group" ) do\n            local size = xmlFile:getValue(groupKey .. "#size" , "medium" )\n            local rewardScale = xmlFile:getValue(groupKey .. "#rewardScale" , 1.0 )\n            local success = true\n            local vehicles = { }\n            local group = {\n            rewardScale = rewardScale,\n            vehicles = vehicles,\n            variant = xmlFile:getValue(groupKey .. "#variant" ),\n            }\n\n            for _, vehicleKey in xmlFile:iterator(groupKey .. ".vehicle" ) do\n                local vehicleXMLFilename = Utils.getFilename(xmlFile:getValue(vehicleKey .. "#filename" ), baseDirectory)\n                if vehicleXMLFilename = = nil then\n                    success = false\n                    Logging.xmlError(xmlFile, "Missing \'filename\' attribute for vehicle %q" , vehicleKey)\n                        break\n                    end\n\n                    local storeItem = g_storeManager:getItemByXMLFilename(vehicleXMLFilename)\n                    if storeItem = = nil then\n                        success = false\n                        Logging.xmlError(xmlFile, "Unable to load store item for xml filename \'%q at %q" , vehicleXMLFilename, vehicleKey)\n                            break\n                        end\n\n                        -- Read configurations\n                        local configurations\n                        for _, configKey in xmlFile:iterator(vehicleKey .. ".configuration" ) do\n                            local name = xmlFile:getValue(configKey .. "#name" )\n                            local id = xmlFile:getValue(configKey .. "#id" )\n\n                            if name = = nil then\n                                Logging.xmlError(xmlFile, "Missing \'name\' attribute for configuration at %q" , configKey)\n                                    continue\n                                end\n                                if id = = nil then\n                                    Logging.xmlError(xmlFile, "Missing \'id\' attribute for configuration %q at %q" , name, configKey)\n                                        continue\n                                    end\n                                    --#debug if ConfigurationUtil.getConfigItemByConfigId(vehicleXMLFilename, name, id) = = nil then\n                                        --#debug Logging.xmlError(xmlFile, "Config id %q for config %q in vehicle %q at %q does not exist", id, name, vehicleXMLFilename, configKey)\n                                            --#debug continue\n                                            --#debug end\n                                            configurations = configurations or { }\n                                            configurations[name] = id\n                                        end\n\n                                        table.insert(vehicles, {\n                                        filename = vehicleXMLFilename,\n                                        configurations = configurations\n                                        } )\n                                    end\n\n                                    if success then\n                                        if groups[size] = = nil then\n                                            groups[size] = { }\n                                        end\n\n                                        table.insert(groups[size], group)\n                                        group.identifier = #groups[size]\n                                    end\n                                end\n                            end\n\n                            xmlFile:delete()\n\n                            return true\n                        end\n\n'})}),"\n",(0,r.jsx)(e.h3,{id:"markmissionfordeletion",children:"markMissionForDeletion"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"markMissionForDeletion()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"mission"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:markMissionForDeletion(mission)\n    table.addElement( self.missionsToDelete, mission)\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"new",children:"new"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Creating manager"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"new()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"customMt"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"instance"}),(0,r.jsx)(e.th,{children:"instance of object"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager.new(customMt)\n    local self = AbstractManager.new(customMt or MissionManager _mt)\n\n    self.defaultMissionMapWidth = 512\n    self.defaultMissionMapHeight = 512\n    self.missionMapNumChannels = 4\n\n    return self\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"registermission",children:"registerMission"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"registerMission()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"mission"})]})}),(0,r.jsx)(e.tbody,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"missionType"})]})})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:registerMission(mission, missionType)\n    mission.type = missionType\n    mission:register()\n    self:addMission(mission)\n    g_messageCenter:publish(MessageType.MISSION_GENERATED, mission)\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"registermissiontype",children:"registerMissionType"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Register a new mission type"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"registerMissionType()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"classObject"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"name"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"defaultMaxNumInstances"})]})]})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:registerMissionType(classObject, name, defaultMaxNumInstances)\n    if classObject ~ = nil and name ~ = nil then\n        local missionType = {\n        name = name,\n        classObject = classObject,\n        typeId = # self.missionTypes + 1 ,\n        data = {\n        numInstances = 0 ,\n        maxNumInstances = defaultMaxNumInstances or 2\n        }\n        }\n\n        table.insert( self.missionTypes, missionType)\n        self.nameToMissionType[ string.upper(name)] = missionType\n    end\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"removemission",children:"removeMission"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"removeMission()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"mission"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:removeMission(mission)\n    table.removeElement( self.missions, mission)\n\n    local uniqueId = mission:getUniqueId()\n    if uniqueId ~ = nil then\n        self.missionByUniqueId[uniqueId] = nil\n    end\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"savetoxmlfile",children:"saveToXMLFile"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Write mission data to savegame file"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"saveToXMLFile(string xmlFilename)"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"string"}),(0,r.jsx)(e.th,{children:"xmlFilename"}),(0,r.jsx)(e.th,{children:"file path"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"string"}),(0,r.jsx)(e.th,{children:"true"}),(0,r.jsx)(e.th,{children:"if loading was successful else false"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:'function MissionManager:saveToXMLFile(xmlFilename)\n    local xmlFile = XMLFile.create( "missionXML" , xmlFilename, "missions" , MissionManager.xmlSchemaSavegame)\n\n    if xmlFile ~ = nil then\n        for _, missionType in ipairs( self.missionTypes) do\n            local classObject = missionType.classObject\n            local key = string.format( "missions.meta.%s" , missionType.name)\n            if classObject.saveMetaDataToXMLFile ~ = nil then\n                classObject.saveMetaDataToXMLFile(xmlFile, key)\n            end\n        end\n\n        local counts = { }\n        xmlFile:setValue( "missions#version" , MissionManager.VERSION)\n        for k, mission in ipairs( self.missions) do\n            counts[mission.type.name] = (counts[mission.type.name] or 0 ) + 1\n\n            local missionKey = string.format( "missions.%s(%d)" , mission.type.name, counts[mission.type.name] - 1 )\n            mission:saveToXMLFile(xmlFile, missionKey)\n        end\n\n        xmlFile:save()\n        xmlFile:delete()\n    end\n\n    return false\nend\n\n'})}),"\n",(0,r.jsx)(e.h3,{id:"setmissionmapactivemissionid",children:"setMissionMapActiveMissionId"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"setMissionMapActiveMissionId()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"area"})]})}),(0,r.jsx)(e.tbody,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"missionId"})]})})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:setMissionMapActiveMissionId(area, missionId)\n    if self.missionMap ~ = nil then\n        self.missionMap:setValueAtArea(area, missionId)\n    end\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"startmission",children:"startMission"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Start given mission for a farm."}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"startMission()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"mission"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"farmId"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"spawnVehicles"})]})]})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:'function MissionManager:startMission(mission, farmId, spawnVehicles)\n    local currentMission = g_currentMission\n    assert(currentMission:getIsServer(), "MissionManager:startMission is a server-only function" )\n\n        if farmId = = FarmManager.SPECTATOR_FARM_ID then\n            return MissionStartState.NO_ACCESS\n        end\n\n        -- Allow only one mission per farm\n        if self:hasFarmReachedMissionLimit(farmId) then\n            return MissionStartState.LIMIT_REACHED\n        end\n\n        -- Mission already started\n        if mission.activeMissionId then\n            return MissionStartState.ALREADY_STARTED\n        end\n\n        for _, activeMission in ipairs( self.missions) do\n            if activeMission.status = = MissionStatus.PREPARING then\n                return MissionStartState.PENDING_MISSION\n            end\n        end\n\n        if not mission:validate() then\n            mission:delete()\n            return MissionStartState.NOT_AVAILABLE_ANYMORE\n        end\n\n        mission.activeMissionId = self:getFreeActiveMissionId()\n        if mission.activeMissionId = = 0 then\n            return MissionStartState.CANNOT_BE_STARTED_NOW\n        end\n\n        mission.farmId = farmId\n\n        if not mission:start(spawnVehicles) then\n            mission:delete()\n            return MissionStartState.CANNOT_BE_STARTED_NOW\n        end\n\n        g_messageCenter:publish(MissionStartedEvent, mission)\n\n        return MissionStartState.OK\n    end\n\n'})}),"\n",(0,r.jsx)(e.h3,{id:"startmissiongeneration",children:"startMissionGeneration"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"startMissionGeneration()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:startMissionGeneration()\n    g_messageCenter:publish(MessageType.MISSION_GENERATION_START)\n    self.currentMissionTypeIndex = math.random( 1 , # self.missionTypes)\n    self.startMissionTypeIndex = self.currentMissionTypeIndex\n    self.missionGenerationInProgress = true\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"unloadmapdata",children:"unloadMapData"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Unload data on mission delete"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"unloadMapData()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:'function MissionManager:unloadMapData()\n    g_messageCenter:unsubscribeAll( self )\n\n    local currentMission = g_currentMission\n    currentMission:removeUpdateable( self )\n\n    for _, missionType in ipairs( self.missionTypes) do\n        local classObject = missionType.classObject\n        if classObject.unloadMapData ~ = nil then\n            classObject.unloadMapData(missionType.data)\n        end\n    end\n\n    self:destroyMissionMap()\n\n    removeConsoleCommand( "gsMissionGenerate" )\n    removeConsoleCommand( "gsMissionLoadVehicleSet" )\n    removeConsoleCommand( "gsMissionLoadVehiclesAll" )\n\n    MissionManager:superClass().unloadMapData( self )\nend\n\n'})}),"\n",(0,r.jsx)(e.h3,{id:"unregistermissiontype",children:"unregisterMissionType"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Unregister a mission type"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"unregisterMissionType()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"name"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:unregisterMissionType(name)\n    if name ~ = nil then\n        for i, type in ipairs( self.missionTypes) do\n            if type.name = = name then\n                table.remove( self.missionType, i)\n                break\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"update",children:"update"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Updates field mission ownership data from xml savegame file"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"update(string filename)"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"string"}),(0,r.jsx)(e.th,{children:"filename"}),(0,r.jsx)(e.th,{children:"xml filename"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:'function MissionManager:update(dt)\n    local currentMission = g_currentMission\n    if currentMission:getIsServer() and Platform.gameplay.hasMissions then\n        self.generationTimer = self.generationTimer - currentMission:getEffectiveTimeScale() * dt\n\n        --#profile RemoteProfiler.zoneBeginN("MissionManager-UpdateMissions")\n        self:updateMissions(dt)\n        --#profile RemoteProfiler.zoneEnd()\n\n        --#profile RemoteProfiler.zoneBeginN("MissionManager-MissionGeneration")\n        if self:getCanStartNewMissionGeneration() then\n            self:startMissionGeneration()\n        elseif self.missionGenerationInProgress then\n                self:generateMission()\n            end\n            --#profile RemoteProfiler.zoneEnd()\n        end\n    end\n\n'})}),"\n",(0,r.jsx)(e.h3,{id:"updatemissions",children:"updateMissions"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Update mission timeouts"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"updateMissions()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(e.table,{children:(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"dt"})]})})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function MissionManager:updateMissions(dt)\n    for _, mission in ipairs( self.missions) do\n        if mission.status = = MissionStatus.CREATED then\n            if not mission:validate() then\n                table.insert( self.missionsToDelete, mission)\n            end\n        end\n    end\n\n    for i = # self.missionsToDelete, 1 , - 1 do\n        local mission = table.remove( self.missionsToDelete, i)\n        mission:delete()\n    end\nend\n\n"})})]})}function h(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(c,{...n})}):c(n)}}}]);