"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[99046],{27284(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"script/Specializations/Cutter","title":"Cutter","description":"Cutter","source":"@site/../docs/script/Specializations/Cutter.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/Cutter","permalink":"/FS25-Community-LUADOC/script/Specializations/Cutter","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Cultivator","permalink":"/FS25-Community-LUADOC/script/Specializations/Cultivator"},"next":{"title":"Cylindered","permalink":"/FS25-Community-LUADOC/script/Specializations/Cylindered"}}');var i=t(74848),l=t(28453);const s={},a=void 0,c={},d=[{value:"Cutter",id:"cutter",level:2},{value:"doCheckSpeedLimit",id:"docheckspeedlimit",level:3},{value:"getAllowCutterAIFruitRequirements",id:"getallowcutteraifruitrequirements",level:3},{value:"getCombine",id:"getcombine",level:3},{value:"getConsumingLoad",id:"getconsumingload",level:3},{value:"getCutterLoad",id:"getcutterload",level:3},{value:"getCutterStoneMultiplier",id:"getcutterstonemultiplier",level:3},{value:"getCutterTiltDelta",id:"getcuttertiltdelta",level:3},{value:"getCutterTiltIsActive",id:"getcuttertiltisactive",level:3},{value:"getCutterTiltIsAvailable",id:"getcuttertiltisavailable",level:3},{value:"getDefaultAllowComponentMassReduction",id:"getdefaultallowcomponentmassreduction",level:3},{value:"getDefaultSpeedLimit",id:"getdefaultspeedlimit",level:3},{value:"getDirtMultiplier",id:"getdirtmultiplier",level:3},{value:"getFruitExtraObjectTypeData",id:"getfruitextraobjecttypedata",level:3},{value:"getIsGroundReferenceNodeThreshold",id:"getisgroundreferencenodethreshold",level:3},{value:"getIsRandomlyMovingPartActive",id:"getisrandomlymovingpartactive",level:3},{value:"getIsSpeedRotatingPartActive",id:"getisspeedrotatingpartactive",level:3},{value:"getIsWorkAreaActive",id:"getisworkareaactive",level:3},{value:"getWearMultiplier",id:"getwearmultiplier",level:3},{value:"initSpecialization",id:"initspecialization",level:3},{value:"isAttachAllowed",id:"isattachallowed",level:3},{value:"loadCutterTiltFromXML",id:"loadcuttertiltfromxml",level:3},{value:"loadInputAttacherJoint",id:"loadinputattacherjoint",level:3},{value:"loadRandomlyMovingPartFromXML",id:"loadrandomlymovingpartfromxml",level:3},{value:"loadSpeedRotatingPartFromXML",id:"loadspeedrotatingpartfromxml",level:3},{value:"loadWorkAreaFromXML",id:"loadworkareafromxml",level:3},{value:"onAIFieldCourseSettingsInitialized",id:"onaifieldcoursesettingsinitialized",level:3},{value:"onAIImplementStart",id:"onaiimplementstart",level:3},{value:"onDelete",id:"ondelete",level:3},{value:"onEndWorkAreaProcessing",id:"onendworkareaprocessing",level:3},{value:"onLoad",id:"onload",level:3},{value:"onPostLoad",id:"onpostload",level:3},{value:"onReadStream",id:"onreadstream",level:3},{value:"onReadUpdateStream",id:"onreadupdatestream",level:3},{value:"onStartWorkAreaProcessing",id:"onstartworkareaprocessing",level:3},{value:"onTurnedOff",id:"onturnedoff",level:3},{value:"onTurnedOn",id:"onturnedon",level:3},{value:"onUpdate",id:"onupdate",level:3},{value:"onUpdateTick",id:"onupdatetick",level:3},{value:"onWriteStream",id:"onwritestream",level:3},{value:"onWriteUpdateStream",id:"onwriteupdatestream",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"processCutterArea",id:"processcutterarea",level:3},{value:"processHaulmDropArea",id:"processhaulmdroparea",level:3},{value:"processPickupCutterArea",id:"processpickupcutterarea",level:3},{value:"readCutterFromStream",id:"readcutterfromstream",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3},{value:"registerFunctions",id:"registerfunctions",level:3},{value:"registerOverwrittenFunctions",id:"registeroverwrittenfunctions",level:3},{value:"saveToXMLFile",id:"savetoxmlfile",level:3},{value:"setCutterCutHeight",id:"setcuttercutheight",level:3},{value:"tiltRaycastDetectionCallbackLeft",id:"tiltraycastdetectioncallbackleft",level:3},{value:"tiltRaycastDetectionCallbackRight",id:"tiltraycastdetectioncallbackright",level:3},{value:"updateDebugValues",id:"updatedebugvalues",level:3},{value:"writeCutterToStream",id:"writecuttertostream",level:3}];function o(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"cutter",children:"Cutter"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Specialization for cutters providing cutter effects; requires WorkArea specialization"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Functions"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#docheckspeedlimit",children:"doCheckSpeedLimit"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getallowcutteraifruitrequirements",children:"getAllowCutterAIFruitRequirements"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getcombine",children:"getCombine"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getconsumingload",children:"getConsumingLoad"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getcutterload",children:"getCutterLoad"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getcutterstonemultiplier",children:"getCutterStoneMultiplier"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getcuttertiltdelta",children:"getCutterTiltDelta"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getcuttertiltisactive",children:"getCutterTiltIsActive"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getcuttertiltisavailable",children:"getCutterTiltIsAvailable"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getdefaultallowcomponentmassreduction",children:"getDefaultAllowComponentMassReduction"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getdefaultspeedlimit",children:"getDefaultSpeedLimit"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getdirtmultiplier",children:"getDirtMultiplier"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getfruitextraobjecttypedata",children:"getFruitExtraObjectTypeData"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getisgroundreferencenodethreshold",children:"getIsGroundReferenceNodeThreshold"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getisrandomlymovingpartactive",children:"getIsRandomlyMovingPartActive"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getisspeedrotatingpartactive",children:"getIsSpeedRotatingPartActive"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getisworkareaactive",children:"getIsWorkAreaActive"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getwearmultiplier",children:"getWearMultiplier"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#initspecialization",children:"initSpecialization"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#isattachallowed",children:"isAttachAllowed"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#loadcuttertiltfromxml",children:"loadCutterTiltFromXML"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#loadinputattacherjoint",children:"loadInputAttacherJoint"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#loadrandomlymovingpartfromxml",children:"loadRandomlyMovingPartFromXML"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#loadspeedrotatingpartfromxml",children:"loadSpeedRotatingPartFromXML"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#loadworkareafromxml",children:"loadWorkAreaFromXML"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onaifieldcoursesettingsinitialized",children:"onAIFieldCourseSettingsInitialized"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onaiimplementstart",children:"onAIImplementStart"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#ondelete",children:"onDelete"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onendworkareaprocessing",children:"onEndWorkAreaProcessing"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onpostload",children:"onPostLoad"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onreadstream",children:"onReadStream"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onreadupdatestream",children:"onReadUpdateStream"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onstartworkareaprocessing",children:"onStartWorkAreaProcessing"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onturnedoff",children:"onTurnedOff"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onturnedon",children:"onTurnedOn"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onupdate",children:"onUpdate"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onupdatetick",children:"onUpdateTick"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onwritestream",children:"onWriteStream"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onwriteupdatestream",children:"onWriteUpdateStream"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#processcutterarea",children:"processCutterArea"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#processhaulmdroparea",children:"processHaulmDropArea"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#processpickupcutterarea",children:"processPickupCutterArea"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#readcutterfromstream",children:"readCutterFromStream"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#registeroverwrittenfunctions",children:"registerOverwrittenFunctions"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#savetoxmlfile",children:"saveToXMLFile"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#setcuttercutheight",children:"setCutterCutHeight"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#tiltraycastdetectioncallbackleft",children:"tiltRaycastDetectionCallbackLeft"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#tiltraycastdetectioncallbackright",children:"tiltRaycastDetectionCallbackRight"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#updatedebugvalues",children:"updateDebugValues"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#writecuttertostream",children:"writeCutterToStream"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"docheckspeedlimit",children:"doCheckSpeedLimit"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"doCheckSpeedLimit()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:doCheckSpeedLimit(superFunc)\n    return superFunc( self ) or( self:getIsTurnedOn() and( self.getIsLowered = = nil or self:getIsLowered()))\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getallowcutteraifruitrequirements",children:"getAllowCutterAIFruitRequirements"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getAllowCutterAIFruitRequirements()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:getAllowCutterAIFruitRequirements()\n    return true\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getcombine",children:"getCombine"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getCombine()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"fruitTypeIndex"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"outputFillTypeIndex"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:getCombine(fruitTypeIndex, outputFillTypeIndex)\n    local spec = self.spec_cutter\n\n    if self.verifyCombine ~ = nil then\n        return self:verifyCombine(fruitTypeIndex or spec.currentInputFruitType, outputFillTypeIndex or spec.currentOutputFillType)\n    else\n            if self.getAttacherVehicle ~ = nil then\n                local attacherVehicle = self:getAttacherVehicle()\n                if attacherVehicle ~ = nil then\n                    if attacherVehicle.verifyCombine ~ = nil then\n                        return attacherVehicle:verifyCombine(fruitTypeIndex or spec.currentInputFruitType, outputFillTypeIndex or spec.currentOutputFillType)\n                    end\n                end\n            end\n        end\n\n        return nil\n    end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getconsumingload",children:"getConsumingLoad"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getConsumingLoad()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:getConsumingLoad(superFunc)\n    local value, count = superFunc( self )\n\n    local loadPercentage = self:getCutterLoad()\n\n    return value + loadPercentage, count + 1\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getcutterload",children:"getCutterLoad"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getCutterLoad()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:getCutterLoad()\n    local speedLimitFactor = math.clamp( self:getLastSpeed() / self.speedLimit, 0 , 1 ) * 0.75 + 0.25\n    return self.spec_cutter.cutterLoad * speedLimitFactor\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getcutterstonemultiplier",children:"getCutterStoneMultiplier"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getCutterStoneMultiplier()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:getCutterStoneMultiplier()\n    local spec = self.spec_cutter\n\n    if spec.stoneLastState ~ = 0 and spec.stoneWearMultiplierData ~ = nil then\n        return spec.stoneWearMultiplierData[spec.stoneLastState] or 1\n    end\n\n    return 1\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getcuttertiltdelta",children:"getCutterTiltDelta"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Returns current cutter tilt delta and active state"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getCutterTiltDelta()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"delta"}),(0,i.jsx)(n.th,{children:"tilt delta in deg"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"isActive"}),(0,i.jsx)(n.td,{children:"cutter tilt is active"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"doReset"}),(0,i.jsx)(n.td,{children:"reset header tilt to initial position"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:getCutterTiltDelta()\n    local spec = self.spec_cutter\n    local isActive, doReset = self:getCutterTiltIsActive(spec.automaticTilt)\n    return isActive and spec.automaticTilt.currentDelta or 0 , isActive, doReset\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getcuttertiltisactive",children:"getCutterTiltIsActive"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Returns if cutter tilt is active"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getCutterTiltIsActive()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"automaticTilt"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"isActive"}),(0,i.jsx)(n.th,{children:"cutter tilt is active"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"doReset"}),(0,i.jsx)(n.td,{children:"reset header tilt to initial position"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:getCutterTiltIsActive(automaticTilt)\n    if not automaticTilt.isAvailable or not self.isActive then\n        return false , false\n    end\n\n    if not self:getIsLowered( true ) or not( self.getAttacherVehicle = = nil or self:getAttacherVehicle() ~ = nil ) then\n        return false , true\n    end\n\n    return true , false\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getcuttertiltisavailable",children:"getCutterTiltIsAvailable"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Returns if cutter tilt is available"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getCutterTiltIsAvailable()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"isAvailable"}),(0,i.jsx)(n.th,{children:"cutter tilt is available"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:getCutterTiltIsAvailable()\n    return self.spec_cutter.automaticTilt.isAvailable\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getdefaultallowcomponentmassreduction",children:"getDefaultAllowComponentMassReduction"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getDefaultAllowComponentMassReduction()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:getDefaultAllowComponentMassReduction()\n    return true\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getdefaultspeedlimit",children:"getDefaultSpeedLimit"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getDefaultSpeedLimit()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter.getDefaultSpeedLimit()\n    return 10\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getdirtmultiplier",children:"getDirtMultiplier"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getDirtMultiplier()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:getDirtMultiplier(superFunc)\n    local spec = self.spec_cutter\n\n    if spec.isWorking then\n        return superFunc( self ) + self:getWorkDirtMultiplier() * self:getLastSpeed() / self.speedLimit\n    end\n\n    return superFunc( self )\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getfruitextraobjecttypedata",children:"getFruitExtraObjectTypeData"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getFruitExtraObjectTypeData()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:getFruitExtraObjectTypeData(superFunc)\n    return self.spec_cutter.lastValidInputFruitType, nil\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getisgroundreferencenodethreshold",children:"getIsGroundReferenceNodeThreshold"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getIsGroundReferenceNodeThreshold()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"superFunc"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"groundReferenceNode"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:getIsGroundReferenceNodeThreshold(superFunc, groundReferenceNode)\n    local threshold = superFunc( self , groundReferenceNode)\n\n    threshold = threshold + self.spec_cutter.currentCutHeight\n\n    return threshold\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getisrandomlymovingpartactive",children:"getIsRandomlyMovingPartActive"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getIsRandomlyMovingPartActive()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"superFunc"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"part"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:getIsRandomlyMovingPartActive(superFunc, part)\n    local retValue = superFunc( self , part)\n\n    if part.moveOnlyIfCut then\n        retValue = retValue and( self.spec_cutter.lastAreaBiggerZeroTime > = (g_currentMission.time - 150 ))\n    end\n\n    return retValue\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getisspeedrotatingpartactive",children:"getIsSpeedRotatingPartActive"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getIsSpeedRotatingPartActive()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"superFunc"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"speedRotatingPart"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:getIsSpeedRotatingPartActive(superFunc, speedRotatingPart)\n    if speedRotatingPart.rotateIfTurnedOn and not self:getIsTurnedOn() then\n        return false\n    end\n\n    return superFunc( self , speedRotatingPart)\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getisworkareaactive",children:"getIsWorkAreaActive"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getIsWorkAreaActive()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"superFunc"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"workArea"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:getIsWorkAreaActive(superFunc, workArea)\n    if workArea.type = = WorkAreaType.CUTTER then\n        local spec = self.spec_cutter\n        if self.getAllowsLowering = = nil or self:getAllowsLowering() then\n            if not spec.allowCuttingWhileRaised and not self:getIsLowered( true ) then\n                return false\n            end\n        end\n    end\n\n    return superFunc( self , workArea)\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getwearmultiplier",children:"getWearMultiplier"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getWearMultiplier()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:getWearMultiplier(superFunc)\n    local spec = self.spec_cutter\n\n    if spec.isWorking then\n        local stoneMultiplier = 1\n        if spec.stoneLastState ~ = 0 and spec.stoneWearMultiplierData ~ = nil then\n            stoneMultiplier = spec.stoneWearMultiplierData[spec.stoneLastState] or 1\n        end\n\n        return superFunc( self ) + self:getWorkWearMultiplier() * self:getLastSpeed() / self.speedLimit * stoneMultiplier\n    end\n\n    return superFunc( self )\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"initspecialization",children:"initSpecialization"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"initSpecialization()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Cutter.initSpecialization()\n    g_workAreaTypeManager:addWorkAreaType( "cutter" , false , true , true )\n    g_workAreaTypeManager:addWorkAreaType( "haulmDrop" , false , false , false )\n\n    local schema = Vehicle.xmlSchema\n    schema:setXMLSpecializationType( "Cutter" )\n\n    schema:register(XMLValueType.STRING, "vehicle.cutter#fruitTypes" , "List with supported fruit types" )\n    schema:register(XMLValueType.STRING, "vehicle.cutter#fruitTypeCategories" , "List with supported fruit types categories" )\n    schema:register(XMLValueType.STRING, "vehicle.cutter#fruitTypeConverter" , "Name of fruit type converter" )\n    schema:register(XMLValueType.STRING, "vehicle.cutter#fillTypeConverter" , "Name of fill type converter(defines the supported fill types for pickup headers)" )\n        schema:register(XMLValueType.BOOL, "vehicle.cutter#supportsPickupAI" , "AI works for pickup from the ground as well" , false )\n\n            AnimationManager.registerAnimationNodesXMLPaths(schema, "vehicle.cutter.animationNodes" )\n\n            EffectManager.registerEffectXMLPaths(schema, "vehicle.cutter.effect" )\n            EffectManager.registerEffectXMLPaths(schema, "vehicle.cutter.fillEffect" )\n\n            schema:register(XMLValueType.NODE_INDEX, Cutter.CUTTER_TILT_XML_KEY .. ".automaticTiltNode(?)#node" , "Automatic tilt node" )\n            schema:register(XMLValueType.ANGLE, Cutter.CUTTER_TILT_XML_KEY .. ".automaticTiltNode(?)#minAngle" , "Min.angle" , - 5 )\n            schema:register(XMLValueType.ANGLE, Cutter.CUTTER_TILT_XML_KEY .. ".automaticTiltNode(?)#maxAngle" , "Max.angle" , 5 )\n            schema:register(XMLValueType.ANGLE, Cutter.CUTTER_TILT_XML_KEY .. ".automaticTiltNode(?)#maxSpeed" , "Max.angle change per second" , 1 )\n            schema:register(XMLValueType.NODE_INDEX, Cutter.CUTTER_TILT_XML_KEY .. "#raycastNode1" , "Raycast node 1" )\n            schema:register(XMLValueType.NODE_INDEX, Cutter.CUTTER_TILT_XML_KEY .. "#raycastNode2" , "Raycast node 2" )\n\n            schema:register(XMLValueType.BOOL, "vehicle.cutter#allowsForageGrowthState" , "Allows forage growth state" , false )\n            schema:register(XMLValueType.BOOL, "vehicle.cutter#allowCuttingWhileRaised" , "Allow cutting while raised" , false )\n                schema:register(XMLValueType.INT, "vehicle.cutter#movingDirection" , "Moving direction" , 1 )\n                schema:register(XMLValueType.FLOAT, "vehicle.cutter#strawRatio" , "Straw ratio" , 1 )\n                schema:register(XMLValueType.TIME, "vehicle.cutter.haulmDrop#delay" , "Delay between pickup and haulm drop" , 0 )\n\n                schema:register(XMLValueType.NODE_INDEX, "vehicle.cutter.spikedDrums.spikedDrum(?)#node" , "Spiked drum node(Needs to rotate on X axis)" )\n                schema:register(XMLValueType.NODE_INDEX, "vehicle.cutter.spikedDrums.spikedDrum(?)#spline" , "Reference spline" )\n                schema:register(XMLValueType.NODE_INDEX, "vehicle.cutter.spikedDrums.spikedDrum(?).spike(?)#node" , "Spike that is translated on Y axis depending on spline" )\n\n                SoundManager.registerSampleXMLPaths(schema, "vehicle.cutter.sounds" , "cut" )\n\n                schema:register(XMLValueType.INT, WorkArea.WORK_AREA_XML_KEY .. ".chopperArea#index" , "Chopper area index" )\n                schema:register(XMLValueType.INT, WorkArea.WORK_AREA_XML_CONFIG_KEY .. ".chopperArea#index" , "Chopper area index" )\n                schema:register(XMLValueType.BOOL, RandomlyMovingParts.RANDOMLY_MOVING_PART_XML_KEY .. "#moveOnlyIfCut" , "Move only if cutters cuts something" , false )\n                    schema:register(XMLValueType.BOOL, SpeedRotatingParts.SPEED_ROTATING_PART_XML_KEY .. "#rotateIfTurnedOn" , "Rotate only if turned on" , false )\n\n                        schema:register(XMLValueType.BOOL, Attachable.INPUT_ATTACHERJOINT_XML_KEY .. "#useFruitCutHeight" , "The lower distance to ground is used from the cutHeight defined in the current fruit type" , true )\n                        schema:register(XMLValueType.BOOL, Attachable.INPUT_ATTACHERJOINT_CONFIG_XML_KEY .. "#useFruitCutHeight" , "The lower distance to ground is used from the cutHeight defined in the current fruit type" , true )\n\n                        schema:setXMLSpecializationType()\n\n                        local schemaSavegame = Vehicle.xmlSchemaSavegame\n                        schemaSavegame:register(XMLValueType.FLOAT, "vehicles.vehicle(?).cutter#cutHeight" , "Last used cut height" )\n                    end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"isattachallowed",children:"isAttachAllowed"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Returns true if attaching the vehicle is allowed"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"isAttachAllowed(integer farmId, table attacherVehicle, )"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"integer"}),(0,i.jsx)(n.th,{children:"farmId"}),(0,i.jsx)(n.th,{children:"farmId of attacher vehicle"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"table"}),(0,i.jsx)(n.td,{children:"attacherVehicle"}),(0,i.jsx)(n.td,{children:"attacher vehicle"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"attacherVehicle"}),(0,i.jsx)(n.td,{})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"detachAllowed"}),(0,i.jsx)(n.th,{children:"detach is allowed"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"warning"}),(0,i.jsx)(n.td,{children:"[optional] warning text to display"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Cutter:isAttachAllowed(superFunc, farmId, attacherVehicle)\n    local spec = self.spec_cutter\n\n    if attacherVehicle.spec_combine ~ = nil then\n        if not attacherVehicle:getIsCutterCompatible(spec.outputFillTypes) then\n            return false , g_i18n:getText( "warning_cutterNotCompatible" )\n        end\n    end\n\n    return superFunc( self , farmId, attacherVehicle)\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"loadcuttertiltfromxml",children:"loadCutterTiltFromXML"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Loads header tilt from xml file"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"loadCutterTiltFromXML(table xmlFile, string key, )"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"table"}),(0,i.jsx)(n.th,{children:"xmlFile"}),(0,i.jsx)(n.th,{children:"xml file object"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"key"}),(0,i.jsx)(n.td,{children:"key to load from"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"target"}),(0,i.jsx)(n.td,{})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"success"}),(0,i.jsx)(n.th,{children:"successfully loaded"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Cutter:loadCutterTiltFromXML(xmlFile, key, target)\n    target.nodes = { }\n    xmlFile:iterate(key .. ".automaticTiltNode" , function (index, nodeKey)\n        local entry = { }\n        entry.node = xmlFile:getValue(nodeKey .. "#node" , nil , self.components, self.i3dMappings)\n        if entry.node ~ = nil then\n            entry.minAngle = xmlFile:getValue(nodeKey .. "#minAngle" , - 5 )\n            entry.maxAngle = xmlFile:getValue(nodeKey .. "#maxAngle" , 5 )\n\n            entry.maxSpeed = xmlFile:getValue(nodeKey .. "#maxSpeed" , 2 ) / 1000\n\n            table.insert(target.nodes, entry)\n        end\n    end )\n\n    target.raycastNode1 = xmlFile:getValue(key .. "#raycastNode1" , nil , self.components, self.i3dMappings)\n    target.raycastNode2 = xmlFile:getValue(key .. "#raycastNode2" , nil , self.components, self.i3dMappings)\n    if target.raycastNode1 ~ = nil and target.raycastNode2 ~ = nil then\n        local x1, _, _ = localToLocal(target.raycastNode1, self.rootNode, 0 , 0 , 0 )\n        local x2, _, _ = localToLocal(target.raycastNode2, self.rootNode, 0 , 0 , 0 )\n        if x1 < x2 then\n            local raycastNode1 = target.raycastNode1\n            target.raycastNode1 = target.raycastNode2\n            target.raycastNode2 = raycastNode1\n        end\n    else\n            return false\n        end\n\n        return true\n    end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"loadinputattacherjoint",children:"loadInputAttacherJoint"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Called on loading"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"loadInputAttacherJoint(table savegame, , , , )"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"table"}),(0,i.jsx)(n.th,{children:"savegame"}),(0,i.jsx)(n.th,{children:"savegame"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"xmlFile"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"key"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"inputAttacherJoint"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"i"}),(0,i.jsx)(n.td,{})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Cutter:loadInputAttacherJoint(superFunc, xmlFile, key, inputAttacherJoint, i)\n    if not superFunc( self , xmlFile, key, inputAttacherJoint, i) then\n        return false\n    end\n\n    inputAttacherJoint.useFruitCutHeight = xmlFile:getValue(key .. "#useFruitCutHeight" , true )\n\n    return true\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"loadrandomlymovingpartfromxml",children:"loadRandomlyMovingPartFromXML"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"loadRandomlyMovingPartFromXML()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"superFunc"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"part"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"xmlFile"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"key"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Cutter:loadRandomlyMovingPartFromXML(superFunc, part, xmlFile, key)\n    local retValue = superFunc( self , part, xmlFile, key)\n\n    part.moveOnlyIfCut = xmlFile:getValue(key .. "#moveOnlyIfCut" , false )\n\n    return retValue\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"loadspeedrotatingpartfromxml",children:"loadSpeedRotatingPartFromXML"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"loadSpeedRotatingPartFromXML()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"superFunc"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"speedRotatingPart"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"xmlFile"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"key"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Cutter:loadSpeedRotatingPartFromXML(superFunc, speedRotatingPart, xmlFile, key)\n    if not superFunc( self , speedRotatingPart, xmlFile, key) then\n        return false\n    end\n\n    speedRotatingPart.rotateIfTurnedOn = xmlFile:getValue(key .. "#rotateIfTurnedOn" , false )\n\n    return true\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"loadworkareafromxml",children:"loadWorkAreaFromXML"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"loadWorkAreaFromXML()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"superFunc"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"workArea"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"xmlFile"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"key"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Cutter:loadWorkAreaFromXML(superFunc, workArea, xmlFile, key)\n    local retValue = superFunc( self , workArea, xmlFile, key)\n\n    workArea.chopperAreaIndex = xmlFile:getValue(key .. ".chopperArea#index" )\n\n    return retValue\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"onaifieldcoursesettingsinitialized",children:"onAIFieldCourseSettingsInitialized"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onAIFieldCourseSettingsInitialized()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"fieldCourseSettings"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:onAIFieldCourseSettingsInitialized(fieldCourseSettings)\n    fieldCourseSettings.headlandsFirst = true\n    fieldCourseSettings.workInitialSegment = true\n    fieldCourseSettings.cornerCutOutSupported = true\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"onaiimplementstart",children:"onAIImplementStart"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onAIImplementStart()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:onAIImplementStart()\n    -- clear ai fruit requirements on start of ai vehicle to get the newest fruit type in front of the cutter\n    if self:getAllowCutterAIFruitRequirements() then\n        self:clearAIFruitRequirements()\n\n        -- default require all fruit types the cutter can handle so we don't get other fruit types\n        local spec = self.spec_cutter\n        for _, fruitTypeIndex in ipairs(spec.fruitTypeIndices) do\n            local fruitType = g_fruitTypeManager:getFruitTypeByIndex(fruitTypeIndex)\n            if fruitType ~ = nil then\n                local outputFillType = g_fruitTypeManager:getFillTypeIndexByFruitTypeIndex(fruitTypeIndex)\n                if spec.fruitTypeConverters[fruitTypeIndex] ~ = nil then\n                    outputFillType = spec.fruitTypeConverters[fruitTypeIndex].fillTypeIndex\n                end\n\n                -- combine might have a different fill type already loaded, so we only allow this one\n                if self:getCombine(fruitTypeIndex, outputFillType) ~ = nil then\n                    local minState = spec.allowsForageGrowthState and fruitType.minForageGrowthState or fruitType.minHarvestingGrowthState\n                    self:addAIFruitRequirement(fruitType.index, minState, fruitType.maxHarvestingGrowthState)\n                end\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"ondelete",children:"onDelete"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onDelete()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:onDelete()\n    local spec = self.spec_cutter\n    g_effectManager:deleteEffects(spec.cutterEffects)\n    g_effectManager:deleteEffects(spec.fillEffects)\n    g_animationManager:deleteAnimations(spec.animationNodes)\n    g_soundManager:deleteSamples(spec.samples)\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"onendworkareaprocessing",children:"onEndWorkAreaProcessing"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onEndWorkAreaProcessing()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"dt"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"hasProcessed"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Cutter:onEndWorkAreaProcessing(dt, hasProcessed)\n    if self.isServer then\n        local spec = self.spec_cutter\n\n        local lastArea = spec.workAreaParameters.lastArea\n        local lastLiters = spec.workAreaParameters.lastLiters\n\n        spec.lastAreaBiggerZero = false\n\n        if lastArea > 0 or lastLiters > 0 then\n            if spec.workAreaParameters.combineVehicle ~ = nil then\n                local inputFruitType = spec.workAreaParameters.lastFruitType\n\n                -- always use the same input fruit type while the ai is active to prevent situations where the combine is unable to unload a different fruit type\n                    if self:getIsAIActive() then\n                        local requirements = self:getAIFruitRequirements()\n                        -- Assume there is only 1 requirement, because we can\'t quickly test if all requirements have the same fruit type\n                            -- and having more than 1 fruit type makes it uncertain which fruit we should be using here.\n                            local requirement = requirements[ 1 ]\n                            if #requirements = = 1 and requirement ~ = nil and requirement.fruitType ~ = FruitType.UNKNOWN then\n                                inputFruitType = requirement.fruitType\n                            end\n                        end\n\n                        local liters = g_fruitTypeManager:getFruitTypeAreaLiters(inputFruitType, spec.workAreaParameters.lastMultiplierArea, false )\n                        liters = liters + lastLiters\n\n                        -- take fill type conversion into consideration\n                        local outputFillType = spec.currentOutputFillType\n\n                        local targetOutputFillType = outputFillType\n\n                        if spec.lastOutputFillTypes[outputFillType] = = nil then\n                            spec.lastOutputFillTypes[outputFillType] = lastArea\n                        else\n                                spec.lastOutputFillTypes[outputFillType] = spec.lastOutputFillTypes[outputFillType] + lastArea\n                            end\n\n                            if spec.lastPrioritizedOutputType ~ = FillType.UNKNOWN then\n                                outputFillType = spec.lastPrioritizedOutputType\n                            end\n\n                            local conversionFactor = (spec.currentConversionFactor or 1 )\n\n                            liters = liters * conversionFactor\n\n                            local farmId = self:getLastTouchedFarmlandFarmId()\n                            local appliedDelta = spec.workAreaParameters.combineVehicle:addCutterArea(lastArea, liters, inputFruitType, outputFillType, spec.strawRatio * ( 1 / conversionFactor), farmId, self:getCutterLoad())\n                            if appliedDelta > 0 and outputFillType = = targetOutputFillType then\n                                spec.lastValidInputFruitType = inputFruitType\n                            end\n                        end\n\n                        local ha = MathUtil.areaToHa(lastArea, g_currentMission:getFruitPixelsToSqm()) -- 4096px are mapped to 2048m\n                        g_farmManager:updateFarmStats( self:getLastTouchedFarmlandFarmId(), "threshedHectares" , ha)\n                        self:updateLastWorkedArea(lastArea)\n\n                        spec.lastAreaBiggerZero = lastArea > 0 or lastLiters > 0\n\n                        if spec.currentInputFruitType ~ = spec.currentInputFruitTypeSent then\n                            self:raiseDirtyFlags(spec.effectDirtyFlag)\n                            spec.currentInputFruitTypeSent = spec.currentInputFruitType\n                        end\n\n                        if spec.currentInputFillType ~ = spec.currentInputFillTypeSent then\n                            self:raiseDirtyFlags(spec.effectDirtyFlag)\n                            spec.currentInputFillTypeSent = spec.currentInputFillType\n                        end\n\n                        if self:getAllowCutterAIFruitRequirements() then\n                            if self.setAIFruitRequirements ~ = nil then\n                                if not spec.useWindrow then\n                                    -- we do not allow changes of the required type while working, just on ai start(if the cutter has more than one requirement or no requirement -> only one requirement allowed at the time)\n                                        -- prevents fruit type changes on field borders\n                                        local requirements = self:getAIFruitRequirements()\n                                        local requirement = requirements[ 1 ]\n                                        if #requirements > 1 or requirement = = nil or requirement.fruitType = = FruitType.UNKNOWN then\n                                            local fruitType = g_fruitTypeManager:getFruitTypeByIndex(spec.currentInputFruitTypeAI)\n                                            if fruitType ~ = nil then\n                                                local minState = spec.allowsForageGrowthState and fruitType.minForageGrowthState or fruitType.minHarvestingGrowthState\n                                                self:setAIFruitRequirements(spec.currentInputFruitTypeAI, minState, fruitType.maxHarvestingGrowthState)\n                                            end\n                                        end\n                                    end\n                                end\n                            end\n                        end\n\n                        if spec.lastAreaBiggerZero then\n                            spec.lastAreaBiggerZeroTime = g_currentMission.time\n                        end\n                        if spec.lastAreaBiggerZero ~ = spec.lastAreaBiggerZeroSent then\n                            self:raiseDirtyFlags(spec.dirtyFlag)\n                            spec.lastAreaBiggerZeroSent = spec.lastAreaBiggerZero\n                        end\n                    end\n                end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onLoad()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Cutter:onLoad(savegame)\n    local spec = self.spec_cutter\n\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.turnedOnRotationNodes.turnedOnRotationNode#type" , "vehicle.cutter.animationNodes.animationNode" , "cutter" ) --FS17 to FS19\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.turnedOnScrollers" , "vehicle.cutter.animationNodes.animationNode" ) --FS17 to FS19\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.cutter.turnedOnScrollers" , "vehicle.cutter.animationNodes.animationNode" ) --FS17 to FS19\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.cutter.reelspikes" , "vehicle.cutter.rotationNodes.rotationNode or vehicle.turnOnVehicle.turnedOnAnimation" ) --FS17 to FS19\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.cutter.threshingParticleSystems.threshingParticleSystem" , "vehicle.cutter.fillEffect.effectNode" ) --FS17 to FS19\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.cutter.threshingParticleSystems.emitterShape" , "vehicle.cutter.fillEffect.effectNode" ) --FS17 to FS19\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.cutter#convertedFillTypeCategories" , "vehicle.cutter#fruitTypeConverter" ) --FS17 to FS19\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.cutter#startAnimationName" , "vehicle.turnOnVehicle.turnOnAnimation#name" ) --FS17 to FS19\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.cutter.testAreas" , "vehicle.workAreas.workArea.testAreas" ) --FS19 to FS22\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.cutter#useWindrowed" , "Windrows are now picked up if a fillTypeConverter is defined and the work area uses \'processPickupCutterArea\'" ) --FS19 to FS22\n\n        -- load fruitTypes\n        local fruitTypeIndices = nil\n        local fruitTypeNames = self.xmlFile:getValue( "vehicle.cutter#fruitTypes" )\n        local fruitTypeCategories = self.xmlFile:getValue( "vehicle.cutter#fruitTypeCategories" )\n        if fruitTypeCategories ~ = nil and fruitTypeNames = = nil then\n            fruitTypeIndices = g_fruitTypeManager:getFruitTypeIndicesByCategoryNames(fruitTypeCategories, "Warning:Cutter has invalid fruitTypeCategory \'%s\' in \'" .. self.configFileName .. "\'" )\n        elseif fruitTypeCategories = = nil and fruitTypeNames ~ = nil then\n                fruitTypeIndices = g_fruitTypeManager:getFruitTypeIndicesByNames(fruitTypeNames, "Warning:Cutter has invalid fruitType \'%s\' in \'" .. self.configFileName .. "\'" )\n            end\n\n            spec.currentCutHeight = 0\n\n            spec.outputFillTypes = { }\n\n            spec.fruitTypeConverters = { }\n            local category = self.xmlFile:getValue( "vehicle.cutter#fruitTypeConverter" )\n            if category ~ = nil then\n                local data = g_fruitTypeManager:getConverterDataByName(category)\n                if data ~ = nil then\n                    for input , converter in pairs(data) do\n                        spec.fruitTypeConverters[ input ] = converter\n                    end\n                else\n                        Logging.xmlWarning( self.xmlFile, "Cutter has invalid fruitTypeConverter \'%s\'" , category)\n                    end\n                end\n\n                if fruitTypeIndices ~ = nil then\n                    spec.fruitTypeIndices = { }\n                    for _, fruitTypeIndex in pairs(fruitTypeIndices) do\n                        table.insert(spec.fruitTypeIndices, fruitTypeIndex)\n\n                        if #spec.fruitTypeIndices = = 1 then\n                            local cutHeight = g_fruitTypeManager:getCutHeightByFruitTypeIndex(fruitTypeIndex, spec.allowsForageGrowthState)\n                            self:setCutterCutHeight(cutHeight)\n                        end\n                    end\n\n                    for _, fruitTypeIndex in ipairs(spec.fruitTypeIndices) do\n                        if spec.fruitTypeConverters[fruitTypeIndex] ~ = nil then\n                            table.insert(spec.outputFillTypes, spec.fruitTypeConverters[fruitTypeIndex].fillTypeIndex)\n                        else\n                                local fillTypeIndex = g_fruitTypeManager:getFillTypeIndexByFruitTypeIndex(fruitTypeIndex)\n                                if fillTypeIndex ~ = nil then\n                                    table.insert(spec.outputFillTypes, fillTypeIndex)\n                                end\n                            end\n                        end\n                    end\n\n                    spec.fillTypeConverter = nil\n                    local fillTypeConverterName = self.xmlFile:getValue( "vehicle.cutter#fillTypeConverter" )\n                    if fillTypeConverterName ~ = nil then\n                        local fillTypeConverter = g_fillTypeManager:getConverterDataByName(fillTypeConverterName)\n                        if fillTypeConverter ~ = nil then\n                            spec.fillTypeConverter = fillTypeConverter\n\n                            for _, outputData in pairs(fillTypeConverter) do\n                                table.insert(spec.outputFillTypes, outputData.targetFillTypeIndex)\n                            end\n                        else\n                                Logging.xmlWarning( self.xmlFile, "Cutter has invalid fillTypeConverter \'%s\'" , fillTypeConverterName)\n                            end\n                        end\n\n                        if #spec.outputFillTypes = = 0 then\n                            Logging.xmlWarning( self.xmlFile, "Cutter has no valid fruit/fill type definition(requires either fruitTypes/fruitTypeCategories or fillTypeConverter attribute)" )\n                        end\n\n                        if self.isClient then\n                            spec.animationNodes = g_animationManager:loadAnimations( self.xmlFile, "vehicle.cutter.animationNodes" , self.components, self , self.i3dMappings)\n\n                            spec.spikedDrums = { }\n                            self.xmlFile:iterate( "vehicle.cutter.spikedDrums.spikedDrum" , function (index, key)\n                                local entry = { }\n                                entry.node = self.xmlFile:getValue(key .. "#node" , nil , self.components, self.i3dMappings)\n                                if entry.node ~ = nil then\n                                    entry.spline = self.xmlFile:getValue(key .. "#spline" , nil , self.components, self.i3dMappings)\n                                    if entry.spline ~ = nil then\n                                        setVisibility(entry.spline, false )\n\n                                        entry.spikes = { }\n                                        self.xmlFile:iterate(key .. ".spike" , function (_, spikeKey)\n                                            local spike = { }\n                                            spike.node = self.xmlFile:getValue(spikeKey .. "#node" , nil , self.components, self.i3dMappings)\n                                            if spike.node ~ = nil then\n                                                local parent = createTransformGroup(getName(spike.node) .. "Parent" )\n                                                link(getParent(spike.node), parent, getChildIndex(spike.node))\n                                                setTranslation(parent, getTranslation(spike.node))\n                                                setRotation(parent, getRotation(spike.node))\n                                                link(parent, spike.node)\n                                                setTranslation(spike.node, 0 , 0 , 0 )\n                                                setRotation(spike.node, 0 , 0 , 0 )\n\n                                                local _, y, z = localToLocal(spike.node, entry.node, 0 , 0 , 0 )\n                                                local angle = - MathUtil.getYRotationFromDirection(y, z)\n                                                local initalTime = angle / ( 2 * math.pi)\n                                                if initalTime < 0 then\n                                                    initalTime = initalTime + 1\n                                                end\n\n                                                spike.initalTime = initalTime\n                                                table.insert(entry.spikes, spike)\n                                            end\n                                        end )\n\n                                        local splineTimes = { }\n                                        for t = 0 , 1 , 0.01 do\n                                            local x, y, z = getSplinePosition(entry.spline, t)\n                                            local _\n                                            _, y, z = worldToLocal(entry.node, x, y, z)\n                                            local angle = - MathUtil.getYRotationFromDirection(y, z)\n\n                                            local alpha = angle / ( 2 * math.pi)\n                                            if alpha < 0 then\n                                                alpha = alpha + 1\n                                            end\n                                            table.insert(splineTimes, { alpha = alpha, time = t } )\n                                        end\n\n                                        table.insert(splineTimes, { alpha = splineTimes[ 1 ].alpha - 0.000001 , time = 1 } )\n\n                                        table.sort(splineTimes, function (a, b)\n                                            return a.alpha < b.alpha\n                                        end )\n\n                                        entry.splineCurve = AnimCurve.new(linearInterpolator1)\n                                        for j = 1 , #splineTimes do\n                                            entry.splineCurve:addKeyframe( { splineTimes[j].time , time = splineTimes[j].alpha } )\n                                        end\n\n                                        for j = 1 , #spec.animationNodes do\n                                            local animationNode = spec.animationNodes[j]\n                                            if animationNode.rootNode = = entry.node then\n                                                entry.animationNode = animationNode\n                                            end\n                                        end\n\n                                        if entry.animationNode ~ = nil then\n                                            table.insert(spec.spikedDrums, entry)\n                                        else\n                                                Logging.xmlWarning( self.xmlFile, "Could not find animation node for spikedDrum \'%s\'" , getName(entry.node))\n                                                end\n                                            else\n                                                    Logging.xmlWarning( self.xmlFile, "No spline defined for spiked drum \'%s\'" , key)\n                                                    end\n                                                else\n                                                        Logging.xmlWarning( self.xmlFile, "No drum node defined for spiked drum \'%s\'" , key)\n                                                        end\n                                                    end )\n\n                                                    spec.cutterEffects = g_effectManager:loadEffect( self.xmlFile, "vehicle.cutter.effect" , self.components, self , self.i3dMappings)\n                                                    spec.fillEffects = g_effectManager:loadEffect( self.xmlFile, "vehicle.cutter.fillEffect" , self.components, self , self.i3dMappings)\n\n                                                    spec.samples = { }\n                                                    spec.samples.cut = g_soundManager:loadSampleFromXML( self.xmlFile, "vehicle.cutter.sounds" , "cut" , self.baseDirectory, self.components, 0 , AudioGroup.VEHICLE, self.i3dMappings, self )\n                                                end\n\n                                                spec.lastAutomaticTiltRaycastPosition = { 0 , 0 , 0 }\n\n                                                spec.automaticTilt = { }\n                                                spec.automaticTilt.isAvailable = false\n                                                spec.automaticTilt.hasNodes = false\n                                                if self:loadCutterTiltFromXML( self.xmlFile, Cutter.CUTTER_TILT_XML_KEY, spec.automaticTilt) then\n                                                    spec.automaticTilt.currentDelta = 0\n                                                    spec.automaticTilt.lastHit1 = { 0 , 0 , 0 }\n                                                    spec.automaticTilt.lastHit2 = { 0 , 0 , 0 }\n                                                    spec.automaticTilt.raycastHit = true\n                                                    spec.automaticTilt.isAvailable = true\n                                                    spec.automaticTilt.hasNodes = #spec.automaticTilt.nodes > 0\n                                                end\n\n                                                if not Platform.gameplay.allowAutomaticHeaderTilt then\n                                                    if spec.automaticTilt.hasNodes then\n                                                        Logging.xmlWarning( self.xmlFile, "Automatic header tilt is not allowed on this platform!" )\n                                                        spec.automaticTilt.hasNodes = false\n                                                    end\n                                                end\n\n                                                spec.allowsForageGrowthState = self.xmlFile:getValue( "vehicle.cutter#allowsForageGrowthState" , false )\n                                                spec.allowCuttingWhileRaised = self.xmlFile:getValue( "vehicle.cutter#allowCuttingWhileRaised" , false )\n                                                spec.movingDirection = math.sign( self.xmlFile:getValue( "vehicle.cutter#movingDirection" , 1 ))\n                                                spec.strawRatio = self.xmlFile:getValue( "vehicle.cutter#strawRatio" , 1 )\n\n                                                spec.delay = self.xmlFile:getValue( "vehicle.cutter.haulmDrop#delay" , 0 )\n                                                if spec.delay ~ = 0 then\n                                                    spec.valueDelay = ValueDelay.new(spec.delay)\n                                                end\n\n                                                spec.useWindrow = false\n                                                spec.currentInputFillType = FillType.UNKNOWN\n                                                spec.currentInputFillTypeSent = FillType.UNKNOWN\n                                                spec.currentInputFruitType = FruitType.UNKNOWN\n                                                spec.currentInputFruitTypeAI = FruitType.UNKNOWN\n                                                spec.lastValidInputFruitType = FruitType.UNKNOWN\n                                                spec.currentInputFruitTypeSent = FruitType.UNKNOWN\n                                                spec.currentOutputFillType = FillType.UNKNOWN\n                                                spec.currentConversionFactor = 1\n                                                spec.currentGrowthStateTime = 0\n                                                spec.currentGrowthStateTimer = 0\n                                                spec.currentGrowthState = 0\n\n                                                spec.lastAreaBiggerZero = false\n                                                spec.lastAreaBiggerZeroSent = false\n                                                spec.lastAreaBiggerZeroTime = - 1\n\n                                                spec.workAreaParameters = { }\n                                                spec.workAreaParameters.lastLiters = 0 -- additional liters that we harvested(e.g.pickup header)\n                                                spec.workAreaParameters.lastArea = 0 -- area in px where we harvested something(only for regular headers, not pickup headers)\n                                                    spec.workAreaParameters.lastMultiplierArea = 0 -- area in px where we harvested something multiplied by the harvest multiplier(only for regular headers, not pickup headers)\n\n                                                        spec.workAreaParameters.fruitTypeIndicesToUse = { }\n                                                        spec.workAreaParameters.lastFruitTypeToUse = { }\n                                                        spec.workAreaParameters.lastOutputFillType = nil\n\n                                                        spec.lastOutputFillTypes = { }\n                                                        spec.lastPrioritizedOutputType = FillType.UNKNOWN\n                                                        spec.lastOutputTime = 0\n\n                                                        spec.cutterLoad = 0\n                                                        spec.isWorking = false\n\n                                                        spec.stoneLastState = 0\n                                                        spec.stoneWearMultiplierData = g_currentMission.stoneSystem:getWearMultiplierByType( "CUTTER" )\n\n                                                        spec.workAreaParameters.countArea = true\n\n                                                        if self.xmlFile:getValue( "vehicle.cutter#supportsPickupAI" , false ) then\n                                                            if self.addAIDensityHeightTypeRequirement ~ = nil then\n                                                                for inputFillTypeIndex, _ in pairs(spec.fillTypeConverter) do\n                                                                    self:addAIDensityHeightTypeRequirement(inputFillTypeIndex)\n                                                                end\n                                                            end\n                                                        end\n\n                                                        if savegame ~ = nil and not savegame.resetVehicles then\n                                                            spec.currentCutHeight = savegame.xmlFile:getValue(savegame.key .. ".cutter#cutHeight" , spec.currentCutHeight)\n                                                        end\n\n                                                        spec.dirtyFlag = self:getNextDirtyFlag()\n                                                        spec.effectDirtyFlag = self:getNextDirtyFlag()\n                                                    end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"onpostload",children:"onPostLoad"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onPostLoad()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:onPostLoad(savegame)\n    if self.addCutterToCombine ~ = nil then\n        self:addCutterToCombine( self )\n    end\n\n    self:setCutterCutHeight( self.spec_cutter.currentCutHeight)\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"onreadstream",children:"onReadStream"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onReadStream()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"streamId"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:onReadStream(streamId, connection)\n    self:readCutterFromStream(streamId, connection)\n\n    local spec = self.spec_cutter\n    spec.lastAreaBiggerZero = streamReadBool(streamId)\n    if spec.lastAreaBiggerZero then\n        spec.lastAreaBiggerZeroTime = g_currentMission.time\n    end\n\n    self:setTestAreaRequirements(spec.currentInputFruitType, nil , spec.allowsForageGrowthState)\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"onreadupdatestream",children:"onReadUpdateStream"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onReadUpdateStream()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"streamId"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"timestamp"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"connection"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:onReadUpdateStream(streamId, timestamp, connection)\n    if connection:getIsServer() then\n        local spec = self.spec_cutter\n\n        if streamReadBool(streamId) then\n            self:readCutterFromStream(streamId, connection)\n        end\n\n        spec.lastAreaBiggerZero = streamReadBool(streamId)\n        if spec.lastAreaBiggerZero then\n            spec.lastAreaBiggerZeroTime = g_currentMission.time\n        end\n\n        self:setTestAreaRequirements(spec.currentInputFruitType, nil , spec.allowsForageGrowthState)\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"onstartworkareaprocessing",children:"onStartWorkAreaProcessing"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onStartWorkAreaProcessing()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"dt"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:onStartWorkAreaProcessing(dt)\n    local spec = self.spec_cutter\n\n    local combineVehicle, alternativeCombine, requiredFillType = self:getCombine()\n\n    if combineVehicle = = nil and requiredFillType ~ = nil then\n        combineVehicle = alternativeCombine\n    end\n\n    spec.workAreaParameters.combineVehicle = combineVehicle\n\n    spec.workAreaParameters.lastLiters = 0\n    spec.workAreaParameters.lastArea = 0\n    spec.workAreaParameters.lastMultiplierArea = 0\n\n    if spec.workAreaParameters.lastFruitType = = nil then\n        spec.workAreaParameters.fruitTypeIndicesToUse = spec.fruitTypeIndices\n    else\n            for i = 1 , #spec.workAreaParameters.lastFruitTypeToUse do\n                spec.workAreaParameters.lastFruitTypeToUse[i] = nil\n            end\n\n            spec.workAreaParameters.lastFruitTypeToUse[ 1 ] = spec.workAreaParameters.lastFruitType\n            spec.workAreaParameters.fruitTypeIndicesToUse = spec.workAreaParameters.lastFruitTypeToUse\n        end\n\n        -- if the combine could not be found cause a different fruit type is loaded then the last picked up fruit type,\n            -- we use all fruit types that can result in the fill type the combine has loaded\n            if requiredFillType ~ = nil then\n                for i = 1 , #spec.workAreaParameters.lastFruitTypeToUse do\n                    spec.workAreaParameters.lastFruitTypeToUse[i] = nil\n                end\n\n                local fruitType = g_fruitTypeManager:getFruitTypeIndexByFillTypeIndex(requiredFillType)\n\n                for inputFruitType, fruitTypeConverter in pairs(spec.fruitTypeConverters) do\n                    if fruitTypeConverter.fillTypeIndex = = requiredFillType then\n                        table.insert(spec.workAreaParameters.lastFruitTypeToUse, inputFruitType)\n                        fruitType = nil\n                    end\n                end\n\n                if fruitType ~ = nil then\n                    table.insert(spec.workAreaParameters.lastFruitTypeToUse, fruitType)\n                end\n\n                spec.workAreaParameters.fruitTypeIndicesToUse = spec.workAreaParameters.lastFruitTypeToUse\n            end\n\n            spec.workAreaParameters.lastFruitType = nil\n            spec.isWorking = false\n        end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"onturnedoff",children:"onTurnedOff"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onTurnedOff()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:onTurnedOff()\n    local spec = self.spec_cutter\n    if self.isClient then\n        g_animationManager:stopAnimations(spec.animationNodes)\n    end\n\n    spec.currentInputFruitType = FruitType.UNKNOWN\n    spec.currentInputFruitTypeSent = FruitType.UNKNOWN\n    spec.currentInputFruitTypeAI = FruitType.UNKNOWN\n    spec.currentInputFillType = FillType.UNKNOWN\n    spec.currentOutputFillType = FillType.UNKNOWN\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"onturnedon",children:"onTurnedOn"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onTurnedOn()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:onTurnedOn()\n    if self.isClient then\n        local spec = self.spec_cutter\n        g_animationManager:startAnimations(spec.animationNodes)\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"onupdate",children:"onUpdate"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onUpdate()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"dt"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"isActiveForInput"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"isActiveForInputIgnoreSelection"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"isSelected"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:onUpdate(dt, isActiveForInput, isActiveForInputIgnoreSelection, isSelected)\n    local spec = self.spec_cutter\n    if spec.automaticTilt.hasNodes then\n        local currentDelta, isActive, doReset = self:getCutterTiltDelta()\n        currentDelta = - currentDelta -- inverted on cutter side since we rotate the cutter itself\n\n        if self.isActive then\n            for i = 1 , #spec.automaticTilt.nodes do\n                local automaticTiltNode = spec.automaticTilt.nodes[i]\n\n                local _, _, curZ = getRotation(automaticTiltNode.node)\n                if not isActive and doReset then\n                    currentDelta = - curZ -- return to idle is not active\n                end\n\n                if math.abs(currentDelta) > 0.00001 then\n                    local speedScale = math.min( math.pow( math.abs(currentDelta) / 0.01745 , 2 ), 1 ) * math.sign(currentDelta)\n                    local rotSpeed = speedScale * automaticTiltNode.maxSpeed * dt\n\n                    local newRotZ = math.clamp(curZ + rotSpeed, automaticTiltNode.minAngle, automaticTiltNode.maxAngle)\n                    setRotation(automaticTiltNode.node, 0 , 0 , newRotZ)\n\n                    if self.setMovingToolDirty ~ = nil then\n                        self:setMovingToolDirty(automaticTiltNode.node)\n                    end\n                end\n            end\n        end\n    end\n\n    if self.isClient then\n        for i = 1 , #spec.spikedDrums do\n            local spikedDrum = spec.spikedDrums[i]\n            if spikedDrum.animationNode.state ~ = RotationAnimation.STATE_OFF then\n                local rot, _, _ = getRotation(spikedDrum.node)\n                if rot < 0 then\n                    rot = rot + 2 * math.pi\n                end\n                local alpha = rot / ( 2 * math.pi)\n\n                local numSpikes = #spikedDrum.spikes\n                for j = 1 , numSpikes do\n                    local spike = spikedDrum.spikes[j]\n                    local splineTime = spikedDrum.splineCurve:get((alpha + spike.initalTime) % 1 )\n\n                    local x, y, z = getSplinePosition(spikedDrum.spline, splineTime)\n                    local _, spikeY, _ = worldToLocal(getParent(spike.node), x, y, z)\n                    setTranslation(spike.node, 0 , spikeY, 0 )\n                end\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"onupdatetick",children:"onUpdateTick"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onUpdateTick()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"dt"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"isActiveForInput"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"isActiveForInputIgnoreSelection"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"isSelected"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Cutter:onUpdateTick(dt, isActiveForInput, isActiveForInputIgnoreSelection, isSelected)\n    local spec = self.spec_cutter\n    local isTurnedOn = self:getIsTurnedOn()\n\n    local isEffectActive = isTurnedOn\n    and self.movingDirection = = spec.movingDirection\n    and self:getLastSpeed() > 0.5\n    and(spec.allowCuttingWhileRaised or self:getIsLowered( true ))\n    and spec.workAreaParameters.combineVehicle ~ = nil\n\n    if isEffectActive then\n        local currentTestAreaMinX, currentTestAreaMaxX, testAreaMinX, testAreaMaxX, isValid = self:getTestAreaWidthByWorkAreaIndex( 1 )\n        local testAreaCharge = self:getTestAreaChargeByWorkAreaIndex( 1 )\n\n        if not spec.useWindrow then\n            spec.cutterLoad = spec.cutterLoad * 0.95 + testAreaCharge * 0.05\n        end\n\n        local reset = false\n        if currentTestAreaMinX = = - math.huge and currentTestAreaMaxX = = math.huge then\n            currentTestAreaMinX = 0\n            currentTestAreaMaxX = 0\n            reset = true\n        else\n                if not isValid then\n                    if spec.lastAreaBiggerZeroTime + 300 < g_currentMission.time then\n                        currentTestAreaMinX = 0\n                        currentTestAreaMaxX = 0\n                        reset = true\n                    end\n                end\n            end\n\n            if spec.movingDirection > 0 then\n                currentTestAreaMinX = currentTestAreaMinX * - 1\n                currentTestAreaMaxX = currentTestAreaMaxX * - 1\n                if currentTestAreaMaxX < currentTestAreaMinX then\n                    local t = currentTestAreaMinX\n                    currentTestAreaMinX = currentTestAreaMaxX\n                    currentTestAreaMaxX = t\n                end\n            end\n\n            local testAreaMinAlpha = 0\n            if testAreaMinX ~ = 0 then\n                testAreaMinAlpha = currentTestAreaMinX / testAreaMinX\n            end\n\n            local testAreaMaxAlpha = 0\n            if testAreaMaxX ~ = 0 then\n                testAreaMaxAlpha = currentTestAreaMaxX / testAreaMaxX\n            end\n\n            local inputFruitType = spec.currentInputFruitType\n            if inputFruitType ~ = spec.lastValidInputFruitType then\n                -- if we pickup a different fruit type than we are able to proceed to the combine we won\'t display the effect\n                    inputFruitType = nil\n                end\n\n                if inputFruitType ~ = nil then\n                    self:updateFruitExtraObjects()\n                end\n\n                local isCollecting = spec.lastAreaBiggerZeroTime + 300 > g_currentMission.time\n                local fillType = spec.currentInputFillType\n\n                if spec.useWindrow then\n                    if isCollecting then\n                        spec.cutterLoad = spec.cutterLoad * 0.95 + 0.05\n                    else\n                            spec.cutterLoad = spec.cutterLoad * 0.9\n                        end\n                    end\n\n                    if self.isClient then\n                        local cutSoundActive = false\n                        if fillType ~ = nil and fillType ~ = FillType.UNKNOWN and isCollecting then\n                            g_effectManager:setEffectTypeInfo(spec.fillEffects, fillType)\n                            g_effectManager:setMinMaxWidth(spec.fillEffects, currentTestAreaMinX, currentTestAreaMaxX, testAreaMinAlpha, testAreaMaxAlpha, reset)\n                            g_effectManager:startEffects(spec.fillEffects)\n\n                            cutSoundActive = true\n                        else\n                                g_effectManager:stopEffects(spec.fillEffects)\n                            end\n\n                            if inputFruitType ~ = nil and inputFruitType ~ = FruitType.UNKNOWN and not reset then\n                                g_effectManager:setEffectTypeInfo(spec.cutterEffects, fillType, inputFruitType, spec.currentGrowthState)\n                                g_effectManager:setMinMaxWidth(spec.cutterEffects, currentTestAreaMinX, currentTestAreaMaxX, testAreaMinAlpha, testAreaMaxAlpha, reset)\n                                g_effectManager:startEffects(spec.cutterEffects)\n\n                                cutSoundActive = true\n                            else\n                                    g_effectManager:stopEffects(spec.cutterEffects)\n                                end\n\n                                if cutSoundActive then\n                                    if not g_soundManager:getIsSamplePlaying(spec.samples.cut) then\n                                        g_soundManager:playSample(spec.samples.cut)\n                                    end\n                                else\n                                        if g_soundManager:getIsSamplePlaying(spec.samples.cut) then\n                                            g_soundManager:stopSample(spec.samples.cut)\n                                        end\n                                    end\n                                end\n                            else\n                                    if self.isClient then\n                                        g_effectManager:stopEffects(spec.cutterEffects)\n                                        g_effectManager:stopEffects(spec.fillEffects)\n                                        g_soundManager:stopSample(spec.samples.cut)\n                                    end\n\n                                    spec.cutterLoad = spec.cutterLoad * 0.9\n                                end\n\n                                -- lastPrioritizedOutputType is always the fill type that was the most significant fill type of the last 500ms\n                                -- this fill type is transfered to the combine to avoid quick changes of the fill type if we harvester 2 different fruit types at the same time\n                                    -- e.g.on field borders if can happen that a bit of grass if collected from the cutter\n                                        spec.lastOutputTime = spec.lastOutputTime + dt\n                                        if spec.lastOutputTime > 500 then\n                                            spec.lastPrioritizedOutputType = FillType.UNKNOWN\n\n                                            local max = 0\n                                            for i, _ in pairs(spec.lastOutputFillTypes) do\n                                                if spec.lastOutputFillTypes[i] > max then\n                                                    spec.lastPrioritizedOutputType = i\n                                                    max = spec.lastOutputFillTypes[i]\n                                                end\n\n                                                spec.lastOutputFillTypes[i] = 0\n                                            end\n\n                                            spec.lastOutputTime = 0\n                                        end\n\n                                        local automaticTilt = spec.automaticTilt\n                                        local isActive, _ = self:getCutterTiltIsActive(automaticTilt)\n                                        if isActive then\n                                            if automaticTilt ~ = nil and automaticTilt.raycastNode1 ~ = nil and automaticTilt.raycastNode2 ~ = nil then\n                                                automaticTilt.currentDelta = 0\n\n                                                automaticTilt.lastHit1[ 1 ], automaticTilt.lastHit1[ 2 ], automaticTilt.lastHit1[ 3 ] = localToWorld(automaticTilt.raycastNode1, 0 , - 1 , 0 )\n                                                automaticTilt.lastHit2[ 1 ], automaticTilt.lastHit2[ 2 ], automaticTilt.lastHit2[ 3 ] = localToWorld(automaticTilt.raycastNode2, 0 , - 1 , 0 )\n\n                                                -- raycast 1\n                                                local rx, ry, rz = localToWorld(automaticTilt.raycastNode1, 0 , 1 , 0 )\n                                                local rDirX, rDirY, rDirZ = localDirectionToWorld(automaticTilt.raycastNode1, 0 , - 1 , 0 )\n                                                raycastAllAsync(rx, ry, rz, rDirX, rDirY, rDirZ, 2 , "tiltRaycastDetectionCallbackLeft" , self , Cutter.AUTO_TILT_COLLISION_MASK)\n\n                                                --raycast 2\n                                                rx, ry, rz = localToWorld(automaticTilt.raycastNode2, 0 , 1 , 0 )\n                                                rDirX, rDirY, rDirZ = localDirectionToWorld(automaticTilt.raycastNode2, 0 , - 1 , 0 )\n                                                raycastAllAsync(rx, ry, rz, rDirX, rDirY, rDirZ, 2 , "tiltRaycastDetectionCallbackRight" , self , Cutter.AUTO_TILT_COLLISION_MASK)\n                                            end\n                                        end\n                                    end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"onwritestream",children:"onWriteStream"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onWriteStream()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"streamId"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:onWriteStream(streamId, connection)\n    self:writeCutterToStream(streamId, connection)\n\n    local spec = self.spec_cutter\n    streamWriteBool(streamId, spec.lastAreaBiggerZeroSent)\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"onwriteupdatestream",children:"onWriteUpdateStream"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onWriteUpdateStream()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"streamId"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"connection"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"dirtyMask"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:onWriteUpdateStream(streamId, connection, dirtyMask)\n    if not connection:getIsServer() then\n        local spec = self.spec_cutter\n\n        if streamWriteBool(streamId, bit32.band(dirtyMask, spec.effectDirtyFlag) ~ = 0 ) then\n            self:writeCutterToStream(streamId, connection)\n        end\n\n        streamWriteBool(streamId, spec.lastAreaBiggerZeroSent)\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"prerequisitesPresent()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter.prerequisitesPresent(specializations)\n    return SpecializationUtil.hasSpecialization( WorkArea , specializations) and SpecializationUtil.hasSpecialization( TestAreas , specializations) and SpecializationUtil.hasSpecialization(FruitExtraObjects, specializations)\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"processcutterarea",children:"processCutterArea"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"processCutterArea()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"workArea"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"dt"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:processCutterArea(workArea, dt)\n    local spec = self.spec_cutter\n\n    if not self.isServer and self.currentUpdateDistance > Cutter.CLIENT_DM_UPDATE_RADIUS then\n        return 0 , 0\n    end\n\n    if spec.workAreaParameters.combineVehicle ~ = nil then\n        local fieldGroundSystem = g_currentMission.fieldGroundSystem\n\n        local xs, _, zs = getWorldTranslation(workArea.start)\n        local xw, _, zw = getWorldTranslation(workArea.width)\n        local xh, _, zh = getWorldTranslation(workArea.height)\n\n        local lastArea = 0\n        local lastMultiplierArea = 0\n        local lastTotalArea = 0\n\n        for _, fruitTypeIndex in ipairs(spec.workAreaParameters.fruitTypeIndicesToUse) do\n            local fruitTypeDesc = g_fruitTypeManager:getFruitTypeByIndex(fruitTypeIndex)\n            local excludedSprayType = fieldGroundSystem:getChopperTypeValue(fruitTypeDesc.chopperType)\n            local area, totalArea, sprayFactor, plowFactor, limeFactor, weedFactor, stubbleFactor, rollerFactor, beeYieldBonusPerc, growthState, _, terrainDetailPixelsSum = FSDensityMapUtil.cutFruitArea(fruitTypeIndex, xs,zs, xw,zw, xh,zh, true , spec.allowsForageGrowthState, excludedSprayType)\n\n            if area > 0 then\n                lastTotalArea = lastTotalArea + totalArea\n\n                if self.isServer then\n                    if growthState ~ = spec.currentGrowthState then\n                        spec.currentGrowthStateTimer = spec.currentGrowthStateTimer + dt\n                        if spec.currentGrowthStateTimer > 500 or spec.currentGrowthStateTime + 1000 < g_ time then\n                            spec.currentGrowthState = growthState\n                            spec.currentGrowthStateTimer = 0\n                        end\n                    else\n                            spec.currentGrowthStateTimer = 0\n                            spec.currentGrowthStateTime = g_ time\n                        end\n\n                        if fruitTypeIndex ~ = spec.currentInputFruitType then\n                            spec.currentInputFruitType = fruitTypeIndex\n                            spec.currentGrowthState = growthState\n\n                            spec.currentOutputFillType = g_fruitTypeManager:getFillTypeIndexByFruitTypeIndex(spec.currentInputFruitType)\n                            if spec.fruitTypeConverters[spec.currentInputFruitType] ~ = nil then\n                                spec.currentOutputFillType = spec.fruitTypeConverters[spec.currentInputFruitType].fillTypeIndex\n                                spec.currentConversionFactor = spec.fruitTypeConverters[spec.currentInputFruitType].conversionFactor\n                            end\n\n                            local cutHeight = g_fruitTypeManager:getCutHeightByFruitTypeIndex(fruitTypeIndex, spec.allowsForageGrowthState)\n                            self:setCutterCutHeight(cutHeight)\n                        end\n\n                        self:setTestAreaRequirements(fruitTypeIndex, nil , spec.allowsForageGrowthState)\n\n                        -- ai only works on terrain detail, so we do not allow the ai to require fruits that are out of a field\n                            if terrainDetailPixelsSum > 0 then\n                                spec.currentInputFruitTypeAI = fruitTypeIndex\n                            end\n                            spec.currentInputFillType = g_fruitTypeManager:getFillTypeIndexByFruitTypeIndex(fruitTypeIndex)\n                            spec.useWindrow = false\n                        end\n\n                        local multiplier = g_currentMission:getHarvestScaleMultiplier(fruitTypeIndex, sprayFactor, plowFactor, limeFactor, weedFactor, stubbleFactor, rollerFactor, beeYieldBonusPerc)\n\n                        lastArea = area\n                        lastMultiplierArea = area * multiplier\n\n                        spec.workAreaParameters.lastFruitType = fruitTypeIndex\n                        break\n                    end\n                end\n\n                if lastArea > 0 then\n                    if workArea.chopperAreaIndex ~ = nil and spec.workAreaParameters.lastFruitType ~ = nil then\n                        local chopperWorkArea = self:getWorkAreaByIndex(workArea.chopperAreaIndex)\n                        if chopperWorkArea ~ = nil then\n                            xs, _, zs = getWorldTranslation(chopperWorkArea.start)\n                            xw, _, zw = getWorldTranslation(chopperWorkArea.width)\n                            xh, _, zh = getWorldTranslation(chopperWorkArea.height)\n\n                            local fruitTypeDesc = g_fruitTypeManager:getFruitTypeByIndex(spec.workAreaParameters.lastFruitType)\n                            if fruitTypeDesc.chopperType ~ = nil then\n                                local strawGroundType = FieldChopperType.getValueByType(fruitTypeDesc.chopperType)\n                                if strawGroundType ~ = nil then\n                                    FSDensityMapUtil.setGroundTypeLayerArea(xs, zs, xw, zw, xh, zh, strawGroundType)\n                                end\n                            elseif fruitTypeDesc.chopperUseHaulm then\n                                    local area = FSDensityMapUtil.updateFruitHaulmArea(spec.workAreaParameters.lastFruitType, xs, zs, xw, zw, xh, zh)\n\n                                    if area > 0 then\n                                        -- remove tireTracks since the haulm drops on top of it\n                                        FSDensityMapUtil.eraseTireTrack(xs, zs, xw, zw, xh, zh)\n                                    end\n                                end\n                            else\n                                    Logging.xmlWarning( self.xmlFile, \"Invalid chopperAreaIndex '%d' for workArea '%d'!\" , workArea.chopperAreaIndex, workArea.index)\n                                        workArea.chopperAreaIndex = nil\n                                    end\n                                end\n\n                                spec.stoneLastState = FSDensityMapUtil.getStoneArea(xs, zs, xw, zw, xh, zh)\n                                spec.isWorking = true\n                            end\n\n                            spec.workAreaParameters.lastArea = spec.workAreaParameters.lastArea + lastArea\n                            spec.workAreaParameters.lastMultiplierArea = spec.workAreaParameters.lastMultiplierArea + lastMultiplierArea\n\n                            return spec.workAreaParameters.lastArea, lastTotalArea\n                        end\n\n                        return 0 , 0\n                    end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"processhaulmdroparea",children:"processHaulmDropArea"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"processHaulmDropArea()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"workArea"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"dt"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:processHaulmDropArea(workArea, dt)\n    local spec = self.spec_cutter\n\n    if not self.isServer and self.currentUpdateDistance > Cutter.CLIENT_DM_UPDATE_RADIUS then\n        return 0 , 0\n    end\n\n    if spec.valueDelay ~ = nil then\n        local isCutting = spec.lastAreaBiggerZeroTime > = (g_currentMission.time - 150 )\n        local value = spec.valueDelay:add(isCutting and 1 or 0 , dt)\n        if value = = 0 then\n            return 0 , 0\n        end\n    end\n\n    local fruitType = spec.currentInputFruitType\n    if fruitType ~ = nil and fruitType ~ = FruitType.UNKNOWN then\n        local sx, _, sz = getWorldTranslation(workArea.start)\n        local wx, _, wz = getWorldTranslation(workArea.width)\n        local hx, _, hz = getWorldTranslation(workArea.height)\n\n        local area = FSDensityMapUtil.updateFruitHaulmArea(fruitType, sx, sz, wx, wz, hx, hz)\n\n        if area > 0 then\n            -- remove tireTracks since the haulm drops on top of it\n            FSDensityMapUtil.eraseTireTrack(sx, sz, wx, wz, hx, hz)\n        end\n\n        return area, area\n    end\n\n    return 0 , 0\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"processpickupcutterarea",children:"processPickupCutterArea"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"processPickupCutterArea()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"workArea"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"dt"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:processPickupCutterArea(workArea, dt)\n    local spec = self.spec_cutter\n\n    if not self.isServer and self.currentUpdateDistance > Cutter.CLIENT_DM_UPDATE_RADIUS then\n        return 0 , 0\n    end\n\n    if spec.workAreaParameters.combineVehicle ~ = nil then\n        local hasPickedUp = false\n\n        local sx, sy, sz = getWorldTranslation(workArea.start)\n        local wx, wy, wz = getWorldTranslation(workArea.width)\n        local hx, hy, hz = getWorldTranslation(workArea.height)\n\n        local lsx, lsy, lsz, lex, ley, lez, lineRadius = DensityMapHeightUtil.getLineByAreaDimensions(sx, sy, sz, wx, wy, wz, hx, hy, hz)\n\n        for inputFillTypeIndex, outputData in pairs(spec.fillTypeConverter) do\n            if spec.workAreaParameters.lastOutputFillType = = nil or outputData.targetFillTypeIndex = = spec.workAreaParameters.lastOutputFillType then\n\n                local pickedUpLiters = - DensityMapHeightUtil.tipToGroundAroundLine( self , - math.huge, inputFillTypeIndex, lsx, lsy, lsz, lex, ley, lez, lineRadius, nil , nil , false , nil )\n\n                if self.isServer then\n                    if pickedUpLiters > 0 then\n                        spec.currentOutputFillType = outputData.targetFillTypeIndex\n                        spec.currentConversionFactor = outputData.conversionFactor\n\n                        spec.useWindrow = true\n                        spec.currentInputFillType = inputFillTypeIndex\n\n                        pickedUpLiters = g_fruitTypeManager:getCutWindrowHarvestFillLevel(inputFillTypeIndex, pickedUpLiters)\n\n                        spec.workAreaParameters.lastLiters = pickedUpLiters\n                        spec.workAreaParameters.lastOutputFillType = outputData.targetFillTypeIndex\n\n                        spec.stoneLastState = FSDensityMapUtil.getStoneArea(sx, sz, wx, wz, hx, hz)\n                        spec.isWorking = true\n\n                        self:setTestAreaRequirements( nil , inputFillTypeIndex, nil )\n\n                        hasPickedUp = true\n                        break\n                    end\n                end\n            end\n        end\n\n        if not self.isServer then\n            if spec.lastAreaBiggerZeroTime + 300 > g_currentMission.time then\n                hasPickedUp = true\n            end\n        end\n\n        -- next frame we check all fill types again\n        if not hasPickedUp then\n            spec.workAreaParameters.lastOutputFillType = nil\n        else\n                -- as we are picking up on a line, we dont really have a pixel area\n                return 1 , 1\n            end\n        end\n\n        return 0 , 0\n    end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"readcutterfromstream",children:"readCutterFromStream"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"readCutterFromStream()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"streamId"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:readCutterFromStream(streamId, connection)\n    local spec = self.spec_cutter\n\n    spec.currentGrowthState = streamReadUIntN(streamId, 4 )\n\n    spec.currentInputFruitType = streamReadUIntN(streamId, FruitTypeManager.SEND_NUM_BITS)\n    if streamReadBool(streamId) then\n        spec.lastValidInputFruitType = spec.currentInputFruitType\n    else\n            spec.currentInputFruitType = FruitType.UNKNOWN\n        end\n\n        spec.currentOutputFillType = g_fruitTypeManager:getFillTypeIndexByFruitTypeIndex(spec.currentInputFruitType)\n        if spec.fruitTypeConverters[spec.currentInputFruitType] ~ = nil then\n            spec.currentOutputFillType = spec.fruitTypeConverters[spec.currentInputFruitType].fillTypeIndex\n            spec.currentConversionFactor = spec.fruitTypeConverters[spec.currentInputFruitType].conversionFactor\n        end\n\n        spec.useWindrow = streamReadBool(streamId)\n        if spec.useWindrow then\n            spec.currentInputFillType = streamReadUIntN(streamId, FillTypeManager.SEND_NUM_BITS)\n        else\n                spec.currentInputFillType = g_fruitTypeManager:getFillTypeIndexByFruitTypeIndex(spec.currentInputFruitType)\n            end\n        end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Cutter.registerEventListeners(vehicleType)\n    SpecializationUtil.registerEventListener(vehicleType, "onLoad" , Cutter )\n    SpecializationUtil.registerEventListener(vehicleType, "onPostLoad" , Cutter )\n    SpecializationUtil.registerEventListener(vehicleType, "onDelete" , Cutter )\n    SpecializationUtil.registerEventListener(vehicleType, "onReadStream" , Cutter )\n    SpecializationUtil.registerEventListener(vehicleType, "onWriteStream" , Cutter )\n    SpecializationUtil.registerEventListener(vehicleType, "onReadUpdateStream" , Cutter )\n    SpecializationUtil.registerEventListener(vehicleType, "onWriteUpdateStream" , Cutter )\n    SpecializationUtil.registerEventListener(vehicleType, "onUpdate" , Cutter )\n    SpecializationUtil.registerEventListener(vehicleType, "onUpdateTick" , Cutter )\n    SpecializationUtil.registerEventListener(vehicleType, "onStartWorkAreaProcessing" , Cutter )\n    SpecializationUtil.registerEventListener(vehicleType, "onEndWorkAreaProcessing" , Cutter )\n    SpecializationUtil.registerEventListener(vehicleType, "onTurnedOn" , Cutter )\n    SpecializationUtil.registerEventListener(vehicleType, "onTurnedOff" , Cutter )\n    SpecializationUtil.registerEventListener(vehicleType, "onAIImplementStart" , Cutter )\n    SpecializationUtil.registerEventListener(vehicleType, "onAIFieldCourseSettingsInitialized" , Cutter )\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Cutter.registerFunctions(vehicleType)\n    SpecializationUtil.registerFunction(vehicleType, "readCutterFromStream" , Cutter.readCutterFromStream)\n    SpecializationUtil.registerFunction(vehicleType, "writeCutterToStream" , Cutter.writeCutterToStream)\n    SpecializationUtil.registerFunction(vehicleType, "getCombine" , Cutter.getCombine)\n    SpecializationUtil.registerFunction(vehicleType, "getAllowCutterAIFruitRequirements" , Cutter.getAllowCutterAIFruitRequirements)\n    SpecializationUtil.registerFunction(vehicleType, "processCutterArea" , Cutter.processCutterArea)\n    SpecializationUtil.registerFunction(vehicleType, "processPickupCutterArea" , Cutter.processPickupCutterArea)\n    SpecializationUtil.registerFunction(vehicleType, "processHaulmDropArea" , Cutter.processHaulmDropArea)\n    SpecializationUtil.registerFunction(vehicleType, "getCutterLoad" , Cutter.getCutterLoad)\n    SpecializationUtil.registerFunction(vehicleType, "getCutterStoneMultiplier" , Cutter.getCutterStoneMultiplier)\n    SpecializationUtil.registerFunction(vehicleType, "loadCutterTiltFromXML" , Cutter.loadCutterTiltFromXML)\n    SpecializationUtil.registerFunction(vehicleType, "getCutterTiltIsAvailable" , Cutter.getCutterTiltIsAvailable)\n    SpecializationUtil.registerFunction(vehicleType, "getCutterTiltIsActive" , Cutter.getCutterTiltIsActive)\n    SpecializationUtil.registerFunction(vehicleType, "getCutterTiltDelta" , Cutter.getCutterTiltDelta)\n    SpecializationUtil.registerFunction(vehicleType, "tiltRaycastDetectionCallbackLeft" , Cutter.tiltRaycastDetectionCallbackLeft)\n    SpecializationUtil.registerFunction(vehicleType, "tiltRaycastDetectionCallbackRight" , Cutter.tiltRaycastDetectionCallbackRight)\n    SpecializationUtil.registerFunction(vehicleType, "setCutterCutHeight" , Cutter.setCutterCutHeight)\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"registeroverwrittenfunctions",children:"registerOverwrittenFunctions"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"registerOverwrittenFunctions()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Cutter.registerOverwrittenFunctions(vehicleType)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "loadSpeedRotatingPartFromXML" , Cutter.loadSpeedRotatingPartFromXML)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getIsSpeedRotatingPartActive" , Cutter.getIsSpeedRotatingPartActive)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "loadRandomlyMovingPartFromXML" , Cutter.loadRandomlyMovingPartFromXML)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getIsRandomlyMovingPartActive" , Cutter.getIsRandomlyMovingPartActive)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getIsWorkAreaActive" , Cutter.getIsWorkAreaActive)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "doCheckSpeedLimit" , Cutter.doCheckSpeedLimit)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "loadWorkAreaFromXML" , Cutter.loadWorkAreaFromXML)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getDirtMultiplier" , Cutter.getDirtMultiplier)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getWearMultiplier" , Cutter.getWearMultiplier)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "isAttachAllowed" , Cutter.isAttachAllowed)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getConsumingLoad" , Cutter.getConsumingLoad)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getIsGroundReferenceNodeThreshold" , Cutter.getIsGroundReferenceNodeThreshold)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getDefaultAllowComponentMassReduction" , Cutter.getDefaultAllowComponentMassReduction)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "loadInputAttacherJoint" , Cutter.loadInputAttacherJoint)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getFruitExtraObjectTypeData" , Cutter.getFruitExtraObjectTypeData)\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"savetoxmlfile",children:"saveToXMLFile"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"saveToXMLFile()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"xmlFile"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"key"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"usedModNames"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Cutter:saveToXMLFile(xmlFile, key, usedModNames)\n    local spec = self.spec_cutter\n    xmlFile:setValue(key .. "#cutHeight" , spec.currentCutHeight)\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"setcuttercutheight",children:"setCutterCutHeight"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Sets cutter cut height"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"setCutterCutHeight()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"cutHeight"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"height"}),(0,i.jsx)(n.th,{children:"cut height"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:setCutterCutHeight(cutHeight)\n    if cutHeight ~ = nil then\n        self.spec_cutter.currentCutHeight = cutHeight\n\n        if self.spec_attachable ~ = nil then\n            local inputAttacherJoint = self:getActiveInputAttacherJoint()\n            if inputAttacherJoint ~ = nil and inputAttacherJoint.useFruitCutHeight then\n                if inputAttacherJoint.jointType = = AttacherJoints.JOINTTYPE_CUTTER\n                    or inputAttacherJoint.jointType = = AttacherJoints.JOINTTYPE_CUTTERHARVESTER then\n                    inputAttacherJoint.lowerDistanceToGround = cutHeight\n                end\n            else\n                    local inputAttacherJoints = self:getInputAttacherJoints()\n                    for i = 1 , #inputAttacherJoints do\n                        inputAttacherJoint = inputAttacherJoints[i]\n                        if inputAttacherJoint.useFruitCutHeight then\n                            if inputAttacherJoint.jointType = = AttacherJoints.JOINTTYPE_CUTTER\n                                or inputAttacherJoint.jointType = = AttacherJoints.JOINTTYPE_CUTTERHARVESTER then\n                                inputAttacherJoint.lowerDistanceToGround = cutHeight\n                            end\n                        end\n                    end\n                end\n            end\n        end\n    end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"tiltraycastdetectioncallbackleft",children:"tiltRaycastDetectionCallbackLeft"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"tiltRaycastDetectionCallbackLeft()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"hitObjectId"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"x"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"y"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"z"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"distance"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"nx"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"ny"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"nz"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"subShapeIndex"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"hitShapeId"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"isLast"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:tiltRaycastDetectionCallbackLeft(hitObjectId, x, y, z, distance, nx, ny, nz, subShapeIndex, hitShapeId, isLast)\n    if hitObjectId ~ = 0 and getRigidBodyType(hitObjectId) = = RigidBodyType.STATIC then\n        local automaticTilt = self.spec_cutter.automaticTilt\n        automaticTilt.lastHit1[ 1 ] = x\n        automaticTilt.lastHit1[ 2 ] = y\n        automaticTilt.lastHit1[ 3 ] = z\n\n        return false\n    end\n\n    return true\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"tiltraycastdetectioncallbackright",children:"tiltRaycastDetectionCallbackRight"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"tiltRaycastDetectionCallbackRight()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"hitObjectId"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"x"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"y"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"z"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"distance"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"nx"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"ny"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"nz"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"subShapeIndex"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"hitShapeId"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"isLast"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Cutter:tiltRaycastDetectionCallbackRight(hitObjectId, x, y, z, distance, nx, ny, nz, subShapeIndex, hitShapeId, isLast)\n    if self.isDeleted or self.isDeleting then\n        return\n    end\n\n    local automaticTilt = self.spec_cutter.automaticTilt\n\n    if hitObjectId ~ = 0 and getRigidBodyType(hitObjectId) = = RigidBodyType.STATIC then\n        automaticTilt.lastHit2[ 1 ] = x\n        automaticTilt.lastHit2[ 2 ] = y\n        automaticTilt.lastHit2[ 3 ] = z\n    end\n\n    if isLast then\n        local rDirX, rDirY, rDirZ = localDirectionToWorld(automaticTilt.raycastNode1, 0 , - 1 , 0 )\n\n        local hit1X, hit1Y, hit1Z = automaticTilt.lastHit1[ 1 ], automaticTilt.lastHit1[ 2 ], automaticTilt.lastHit1[ 3 ]\n        local node1X, node1Y, node1Z = getWorldTranslation(automaticTilt.raycastNode1)\n\n        local hit2X, hit2Y, hit2Z = automaticTilt.lastHit2[ 1 ], automaticTilt.lastHit2[ 2 ], automaticTilt.lastHit2[ 3 ]\n        local node2X, node2Y, node2Z = getWorldTranslation(automaticTilt.raycastNode2)\n\n        -- calaculate ground angle\n        local gHeight = hit1Y - hit2Y\n        local gRefX, gRefY, gRefZ = hit2X + rDirX * gHeight, hit2Y + rDirY * gHeight, hit2Z + rDirZ * gHeight\n        local gDistance = MathUtil.vector3Length(hit1X - gRefX, hit1Y - gRefY, hit1Z - gRefZ)\n        local gDirection = (hit2Y > hit1Y and - 1 or 1 )\n        local gAngle = math.atan( math.abs(gHeight) / gDistance) * gDirection\n\n        -- calculate current cutter angle\n        local cHeight = node2Y - node1Y\n        --#debug local cRefX, cRefY, cRefZ = node2X + rDirX * cHeight, node2Y + rDirY * cHeight, node2Z + rDirZ * cHeight\n        local cDistance = MathUtil.vector3Length(node1X - node2X, node1Y - node2Y, node1Z - node2Z)\n        local cDirection = (node2Y > node1Y and - 1 or 1 )\n        local cAngle = math.atan( math.abs(cHeight) / cDistance) * cDirection\n\n        --#debug if VehicleDebug.state = = VehicleDebug.DEBUG then\n            --#debug DebugGizmo.renderAtPositionSimple(hit1X, hit1Y, hit1Z, "r1")\n            --#debug DebugGizmo.renderAtPositionSimple(hit2X, hit2Y, hit2Z, "r2")\n            --#debug drawDebugLine(hit1X, hit1Y, hit1Z, 0, 1, 0, gRefX, gRefY, gRefZ, 0, 1, 0)\n            --#debug drawDebugLine(hit1X, hit1Y, hit1Z, 1, 1, 0, hit2X, hit2Y, hit2Z, 1, 1, 0)\n            --#debug drawDebugLine(node1X, node1Y, node1Z, 0, 1, 0, cRefX, cRefY, cRefZ, 0, 1, 0)\n            --#debug drawDebugLine(node1X, node1Y, node1Z, 1, 1, 0, node2X, node2Y, node2Z, 1, 1, 0)\n            --#debug end\n\n            if not MathUtil.isNan(gAngle) and not MathUtil.isNan(cAngle) then\n                automaticTilt.currentDelta = gAngle - cAngle\n            end\n        end\n    end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"updatedebugvalues",children:"updateDebugValues"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"updateDebugValues()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"values"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Cutter:updateDebugValues(values)\n    local spec = self.spec_cutter\n    table.insert(values, { name = "lastPrioritizedOutputType" , value = string.format( "%s" , g_fillTypeManager:getFillTypeNameByIndex(spec.lastPrioritizedOutputType)) } )\n    table.insert(values, { name = "currentCutHeight" , value = string.format( "%.2f" , spec.currentCutHeight) } )\n\n    local sum = 0\n    for fillType, value in pairs(spec.lastOutputFillTypes) do\n        sum = sum + value\n    end\n\n    for fillType, value in pairs(spec.lastOutputFillTypes) do\n        table.insert(values, { name = string.format( "buffer(%s)" , g_fillTypeManager:getFillTypeNameByIndex(fillType)), value = string.format( "%.0f%%" , value / math.max(sum, 0.01 ) * 100 ) } )\n    end\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"writecuttertostream",children:"writeCutterToStream"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"writeCutterToStream()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"streamId"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Cutter:writeCutterToStream(streamId, connection)\n    local spec = self.spec_cutter\n\n    streamWriteUIntN(streamId, spec.currentGrowthState, 4 )\n    streamWriteUIntN(streamId, spec.currentInputFruitType, FruitTypeManager.SEND_NUM_BITS)\n    streamWriteBool(streamId, spec.currentInputFruitType = = spec.lastValidInputFruitType)\n\n    if streamWriteBool(streamId, spec.useWindrow) then\n        streamWriteUIntN(streamId, spec.currentInputFillType, FillTypeManager.SEND_NUM_BITS)\n    end\nend\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},28453(e,n,t){t.d(n,{R:()=>s,x:()=>a});var r=t(96540);const i={},l=r.createContext(i);function s(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);