"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[81360],{24543(e,n,i){i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>d,frontMatter:()=>r,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"script/Specializations/AIJobVehicle","title":"AIJobVehicle","description":"AIJobVehicle","source":"@site/../docs/script/Specializations/AIJobVehicle.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/AIJobVehicle","permalink":"/FS25-Community-LUADOC/script/Specializations/AIJobVehicle","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"AIImplement","permalink":"/FS25-Community-LUADOC/script/Specializations/AIImplement"},"next":{"title":"AIModeSelection","permalink":"/FS25-Community-LUADOC/script/Specializations/AIModeSelection"}}');var s=i(74848),l=i(28453);const r={},c=void 0,o={},a=[{value:"AIJobVehicle",id:"aijobvehicle",level:2},{value:"getCanStartAIVehicle",id:"getcanstartaivehicle",level:3},{value:"getCanToggleAIVehicle",id:"getcantoggleaivehicle",level:3},{value:"getDeactivateLightsOnLeave",id:"getdeactivatelightsonleave",level:3},{value:"getIsActive",id:"getisactive",level:3},{value:"getIsAIActive",id:"getisaiactive",level:3},{value:"getIsAIJobSupported",id:"getisaijobsupported",level:3},{value:"getIsInUse",id:"getisinuse",level:3},{value:"getShowAIToggleActionEvent",id:"getshowaitoggleactionevent",level:3},{value:"initSpecialization",id:"initspecialization",level:3},{value:"onAIModeChanged",id:"onaimodechanged",level:3},{value:"onLoad",id:"onload",level:3},{value:"onReadStream",id:"onreadstream",level:3},{value:"onWriteStream",id:"onwritestream",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3},{value:"registerEvents",id:"registerevents",level:3},{value:"registerFunctions",id:"registerfunctions",level:3},{value:"registerOverwrittenFunctions",id:"registeroverwrittenfunctions",level:3},{value:"toggleAIVehicle",id:"toggleaivehicle",level:3}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"aijobvehicle",children:"AIJobVehicle"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Specialization for extending vehicles to by used by AI helpers"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Functions"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getcanstartaivehicle",children:"getCanStartAIVehicle"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getcantoggleaivehicle",children:"getCanToggleAIVehicle"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getdeactivatelightsonleave",children:"getDeactivateLightsOnLeave"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getisactive",children:"getIsActive"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getisaiactive",children:"getIsAIActive"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getisaijobsupported",children:"getIsAIJobSupported"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getisinuse",children:"getIsInUse"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getshowaitoggleactionevent",children:"getShowAIToggleActionEvent"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#initspecialization",children:"initSpecialization"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onaimodechanged",children:"onAIModeChanged"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onreadstream",children:"onReadStream"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onwritestream",children:"onWriteStream"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registerevents",children:"registerEvents"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registeroverwrittenfunctions",children:"registerOverwrittenFunctions"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#toggleaivehicle",children:"toggleAIVehicle"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"getcanstartaivehicle",children:"getCanStartAIVehicle"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Returns true if ai can start"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getCanStartAIVehicle()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"canStart"}),(0,s.jsx)(n.th,{children:"can start ai"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIJobVehicle:getCanStartAIVehicle()\n    if g_currentMission.disableAIVehicle then\n        return false\n    end\n\n    if self:getOwnerFarmId() = = AccessHandler.EVERYONE then\n        return false\n    end\n\n    local spec = self.spec_aiJobVehicle\n    if not spec.supportsAIJobs then\n        return false\n    end\n\n    if not spec.isAIStartAllowed then\n        return false\n    end\n\n    if self:getAIDirectionNode() = = nil then\n        return false\n    end\n\n    if g_currentMission.aiSystem:getAILimitedReached() then\n        return false\n    end\n\n    if self:getIsAIActive() then\n        return false\n    end\n\n    if self.isBroken then\n        return false\n    end\n\n    return true\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getcantoggleaivehicle",children:"getCanToggleAIVehicle"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Returns if ai can be toggled"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getCanToggleAIVehicle()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"canBeToggled"}),(0,s.jsx)(n.th,{children:"can be toggled"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIJobVehicle:getCanToggleAIVehicle()\n    if self:getIsAIActive() then\n        return self:getCanStopAIVehicle()\n    end\n\n    return self:getCanStartAIVehicle()\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getdeactivatelightsonleave",children:"getDeactivateLightsOnLeave"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Returns if vehicle deactivates lights on leave"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getDeactivateLightsOnLeave()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"deactivate"}),(0,s.jsx)(n.th,{children:"vehicle deactivates on leave"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIJobVehicle:getDeactivateLightsOnLeave(superFunc)\n    return superFunc( self ) and not self:getIsAIActive()\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getisactive",children:"getIsActive"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getIsActive()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIJobVehicle:getIsActive(superFunc)\n    if self:getIsAIActive() then\n        return true\n    end\n\n    return superFunc( self )\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getisaiactive",children:"getIsAIActive"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getIsAIActive()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIJobVehicle:getIsAIActive(superFunc)\n    return superFunc( self ) or self.spec_aiJobVehicle.job ~ = nil\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getisaijobsupported",children:"getIsAIJobSupported"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Returns true if the given AI job is supported"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getIsAIJobSupported()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"aiJobName"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"canStart"}),(0,s.jsx)(n.th,{children:"can start ai"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIJobVehicle:getIsAIJobSupported(aiJobName)\n    local spec = self.spec_aiJobVehicle\n    if spec.supportedJobTypes = = nil then\n        return true\n    end\n\n    for _, supportedJobName in ipairs(spec.supportedJobTypes) do\n        if string.lower(supportedJobName) = = string.lower(aiJobName) then\n            return true\n        end\n    end\n\n    return false\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getisinuse",children:"getIsInUse"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getIsInUse()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIJobVehicle:getIsInUse(superFunc, connection)\n    if self:getIsAIActive() then\n        return true\n    end\n\n    return superFunc( self , connection)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getshowaitoggleactionevent",children:"getShowAIToggleActionEvent"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Returns true if ai action event should be displayed"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getShowAIToggleActionEvent()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"active"}),(0,s.jsx)(n.th,{children:"active"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIJobVehicle:getShowAIToggleActionEvent()\n    if self:getAIDirectionNode() = = nil then\n        return false\n    end\n\n    if g_currentMission.disableAIVehicle then\n        return false\n    end\n\n    if not g_currentMission:getHasPlayerPermission( "hireAssistant" ) then\n        return false\n    end\n\n    if not self:getIsAIActive() and g_currentMission.aiSystem:getAILimitedReached() then\n        return false\n    end\n\n    -- if g_guidedTourManager:getIsTourRunning() then\n        -- if not g_currentMission.guidedTour:getCanStartAI(self) then\n            -- return false\n            -- end\n            -- end\n\n            return true\n        end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"initspecialization",children:"initSpecialization"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"initSpecialization()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIJobVehicle.initSpecialization()\n    local schema = Vehicle.xmlSchema\n    schema:setXMLSpecializationType( "AIJobVehicle" )\n    schema:register(XMLValueType.NODE_INDEX, "vehicle.ai.steeringNode#node" , "Steering node" )\n    schema:register(XMLValueType.NODE_INDEX, "vehicle.ai.reverserNode#node" , "Reverser node" )\n    schema:register(XMLValueType.FLOAT, "vehicle.ai.steeringSpeed" , "Speed of steering" , 1 )\n    schema:register(XMLValueType.BOOL, "vehicle.ai#supportsAIJobs" , "If true vehicle supports ai jobs" , true )\n    schema:register(XMLValueType.STRING_LIST, "vehicle.ai#supportedJobTypes" , "List of job names that are supported(AIJobConveyor, AIJobDeliver, AIJobGoTo, AIJobLoadAndDeliver, AIJobFieldWork)" , "all jobs if no names are given" )\n        schema:setXMLSpecializationType()\n\n        local schemaSavegame = Vehicle.xmlSchemaSavegame\n        schemaSavegame:register(XMLValueType.BOOL, "vehicles.vehicle(?).aiJobVehicle#isAIStartAllowed" , "If ai start is allowed" , true )\n        schemaSavegame:register(XMLValueType.BOOL, "vehicles.vehicle(?).aiJobVehicle#isAIStopAllowed" , "If ai stop is allowed" , true )\n        schemaSavegame:register(XMLValueType.STRING, "vehicles.vehicle(?).aiJobVehicle.lastJob#type" , "Last job name" , nil )\n    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"onaimodechanged",children:"onAIModeChanged"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onAIModeChanged()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"aiMode"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIJobVehicle:onAIModeChanged(aiMode)\n    if aiMode ~ = AIModeSelection.MODE.WORKER then\n        local spec = self.spec_aiJobVehicle\n        if spec.job ~ = nil then\n            self:stopCurrentAIJob( AIMessageSuccessStoppedByUser.new())\n        end\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Called on loading"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onLoad(table savegame)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"savegame"}),(0,s.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIJobVehicle:onLoad(savegame)\n    local spec = self.spec_aiJobVehicle\n\n    spec.actionEvents = { }\n    spec.job = nil\n    spec.lastJob = nil\n    spec.startedFarmId = nil\n\n    spec.aiSteeringSpeed = self.xmlFile:getValue( "vehicle.ai.steeringSpeed" , 1 ) * 0.001\n    spec.steeringNode = self.xmlFile:getValue( "vehicle.ai.steeringNode#node" , nil , self.components, self.i3dMappings)\n    spec.reverserNode = self.xmlFile:getValue( "vehicle.ai.reverserNode#node" , nil , self.components, self.i3dMappings)\n    spec.supportsAIJobs = self.xmlFile:getValue( "vehicle.ai#supportsAIJobs" , true )\n    spec.supportedJobTypes = self.xmlFile:getValue( "vehicle.ai#supportedJobTypes" , nil )\n    spec.isAIStartAllowed = true\n    spec.isAIStopAllowed = true\n\n    spec.texts = { }\n    spec.texts.dismissEmployee = g_i18n:getText( "action_dismissEmployee" )\n    spec.texts.openHelperMenu = g_i18n:getText( "action_openHelperMenu" )\n    spec.texts.hireEmployee = g_i18n:getText( "action_hireEmployee" )\n\n    if savegame ~ = nil then\n        local aiJobTypeManager = g_currentMission.aiJobTypeManager\n        local savegameKey = savegame.key .. ".aiJobVehicle"\n        local jobKey = savegameKey .. ".lastJob"\n        local jobTypeName = savegame.xmlFile:getString(jobKey .. "#type" )\n\n        local jobTypeIndex = aiJobTypeManager:getJobTypeIndexByName(jobTypeName)\n        if jobTypeIndex ~ = nil then\n            local job = aiJobTypeManager:createJob(jobTypeIndex)\n            if job ~ = nil and job.loadFromXMLFile ~ = nil then\n                job:loadFromXMLFile(savegame.xmlFile, jobKey)\n                spec.lastJob = job\n            end\n        end\n\n        spec.isAIStartAllowed = savegame.xmlFile:getValue(savegameKey .. "#isAIStartAllowed" , spec.isAIStartAllowed)\n        spec.isAIStopAllowed = savegame.xmlFile:getValue(savegameKey .. "#isAIStopAllowed" , spec.isAIStopAllowed)\n    end\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"onreadstream",children:"onReadStream"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Called on client side on join"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onReadStream(integer streamId, Connection connection)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"integer"}),(0,s.jsx)(n.th,{children:"streamId"}),(0,s.jsx)(n.th,{children:"streamId"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Connection"}),(0,s.jsx)(n.td,{children:"connection"}),(0,s.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIJobVehicle:onReadStream(streamId, connection)\n\n    -- we only need to sync lastjob if no active job is running\n\n        local hasJob = streamReadBool(streamId)\n        if hasJob then\n            local jobId = streamReadInt32(streamId)\n            local startedFarmId = streamReadUIntN(streamId, FarmManager.FARM_ID_SEND_NUM_BITS)\n            local helperIndex = streamReadUInt8(streamId)\n            local job = g_currentMission.aiSystem:getJobById(jobId)\n\n            self:aiJobStarted(job, helperIndex, startedFarmId)\n        end\n\n        local hasLastJob = streamReadBool(streamId)\n        if hasLastJob then\n            local jobTypeIndex = streamReadInt32(streamId)\n            local spec = self.spec_aiJobVehicle\n            spec.lastJob = g_currentMission.aiJobTypeManager:createJob(jobTypeIndex)\n            spec.lastJob:readStream(streamId, connection)\n        end\n    end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onwritestream",children:"onWriteStream"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Called on server side on join"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onWriteStream(integer streamId, Connection connection)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"integer"}),(0,s.jsx)(n.th,{children:"streamId"}),(0,s.jsx)(n.th,{children:"streamId"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Connection"}),(0,s.jsx)(n.td,{children:"connection"}),(0,s.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIJobVehicle:onWriteStream(streamId, connection)\n    local spec = self.spec_aiJobVehicle\n\n    -- we only need to sync lastjob if no active job is running\n        if streamWriteBool(streamId, spec.job ~ = nil ) then\n            streamWriteInt32(streamId, spec.job.jobId)\n            streamWriteUIntN(streamId, spec.startedFarmId, FarmManager.FARM_ID_SEND_NUM_BITS)\n            streamWriteUInt8(streamId, spec.currentHelper.index)\n        end\n\n        if streamWriteBool(streamId, spec.lastJob ~ = nil ) then\n            local jobTypeIndex = g_currentMission.aiJobTypeManager:getJobTypeIndex(spec.lastJob)\n            streamWriteInt32(streamId, jobTypeIndex)\n            spec.lastJob:writeStream(streamId, connection)\n        end\n    end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Checks if all prerequisite specializations are loaded"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"prerequisitesPresent(table specializations)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"specializations"}),(0,s.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"hasPrerequisite"}),(0,s.jsx)(n.th,{children:"true if all prerequisite specializations are loaded"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIJobVehicle.prerequisitesPresent(specializations)\n    return SpecializationUtil.hasSpecialization( AIVehicle , specializations)\n    and SpecializationUtil.hasSpecialization( Drivable , specializations)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIJobVehicle.registerEventListeners(vehicleType)\n    SpecializationUtil.registerEventListener(vehicleType, "onLoad" , AIJobVehicle )\n    SpecializationUtil.registerEventListener(vehicleType, "onDelete" , AIJobVehicle )\n    SpecializationUtil.registerEventListener(vehicleType, "onUpdate" , AIJobVehicle )\n    SpecializationUtil.registerEventListener(vehicleType, "onSetBroken" , AIJobVehicle )\n    SpecializationUtil.registerEventListener(vehicleType, "onReadStream" , AIJobVehicle )\n    SpecializationUtil.registerEventListener(vehicleType, "onWriteStream" , AIJobVehicle )\n    SpecializationUtil.registerEventListener(vehicleType, "onAIModeChanged" , AIJobVehicle )\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registerevents",children:"registerEvents"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerEvents()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIJobVehicle.registerEvents(vehicleType)\n    SpecializationUtil.registerEvent(vehicleType, "onAIJobStarted" )\n    SpecializationUtil.registerEvent(vehicleType, "onAIJobFinished" )\n    SpecializationUtil.registerEvent(vehicleType, "onAIJobVehicleBlock" )\n    SpecializationUtil.registerEvent(vehicleType, "onAIJobVehicleContinue" )\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIJobVehicle.registerFunctions(vehicleType)\n    SpecializationUtil.registerFunction(vehicleType, "getShowAIToggleActionEvent" , AIJobVehicle.getShowAIToggleActionEvent)\n    SpecializationUtil.registerFunction(vehicleType, "stopCurrentAIJob" , AIJobVehicle.stopCurrentAIJob)\n    SpecializationUtil.registerFunction(vehicleType, "skipCurrentTask" , AIJobVehicle.skipCurrentTask)\n    SpecializationUtil.registerFunction(vehicleType, "aiJobStarted" , AIJobVehicle.aiJobStarted)\n    SpecializationUtil.registerFunction(vehicleType, "aiJobFinished" , AIJobVehicle.aiJobFinished)\n    SpecializationUtil.registerFunction(vehicleType, "toggleAIVehicle" , AIJobVehicle.toggleAIVehicle)\n    SpecializationUtil.registerFunction(vehicleType, "getCanToggleAIVehicle" , AIJobVehicle.getCanToggleAIVehicle)\n    SpecializationUtil.registerFunction(vehicleType, "getCanStartAIVehicle" , AIJobVehicle.getCanStartAIVehicle)\n    SpecializationUtil.registerFunction(vehicleType, "getCanStopAIVehicle" , AIJobVehicle.getCanStopAIVehicle)\n    SpecializationUtil.registerFunction(vehicleType, "getIsAIJobSupported" , AIJobVehicle.getIsAIJobSupported)\n    SpecializationUtil.registerFunction(vehicleType, "setAIMapHotspotBlinking" , AIJobVehicle.setAIMapHotspotBlinking)\n    SpecializationUtil.registerFunction(vehicleType, "getCurrentHelper" , AIJobVehicle.getCurrentHelper)\n    SpecializationUtil.registerFunction(vehicleType, "aiBlock" , AIJobVehicle.aiBlock)\n    SpecializationUtil.registerFunction(vehicleType, "aiContinue" , AIJobVehicle.aiContinue)\n    SpecializationUtil.registerFunction(vehicleType, "getAIDirectionNode" , AIJobVehicle.getAIDirectionNode)\n    SpecializationUtil.registerFunction(vehicleType, "getAISteeringNode" , AIJobVehicle.getAISteeringNode)\n    SpecializationUtil.registerFunction(vehicleType, "getAIReverserNode" , AIJobVehicle.getAIReverserNode)\n    SpecializationUtil.registerFunction(vehicleType, "getAISteeringSpeed" , AIJobVehicle.getAISteeringSpeed)\n    SpecializationUtil.registerFunction(vehicleType, "getAIJobFarmId" , AIJobVehicle.getAIJobFarmId)\n    SpecializationUtil.registerFunction(vehicleType, "getStartableAIJob" , AIJobVehicle.getStartableAIJob)\n    SpecializationUtil.registerFunction(vehicleType, "getHasStartableAIJob" , AIJobVehicle.getHasStartableAIJob)\n    SpecializationUtil.registerFunction(vehicleType, "getStartAIJobText" , AIJobVehicle.getStartAIJobText)\n    SpecializationUtil.registerFunction(vehicleType, "getJob" , AIJobVehicle.getJob)\n    SpecializationUtil.registerFunction(vehicleType, "getLastJob" , AIJobVehicle.getLastJob)\n    SpecializationUtil.registerFunction(vehicleType, "setIsAIStartAllowed" , AIJobVehicle.setIsAIStartAllowed)\n    SpecializationUtil.registerFunction(vehicleType, "setIsAIStopAllowed" , AIJobVehicle.setIsAIStopAllowed)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registeroverwrittenfunctions",children:"registerOverwrittenFunctions"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerOverwrittenFunctions()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIJobVehicle.registerOverwrittenFunctions(vehicleType)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getIsVehicleControlledByPlayer" , AIJobVehicle.getIsVehicleControlledByPlayer)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getIsActive" , AIJobVehicle.getIsActive)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getIsAIActive" , AIJobVehicle.getIsAIActive)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getAllowTireTracks" , AIJobVehicle.getAllowTireTracks)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getDeactivateOnLeave" , AIJobVehicle.getDeactivateOnLeave)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getStopMotorOnLeave" , AIJobVehicle.getStopMotorOnLeave)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getDisableVehicleCharacterOnLeave" , AIJobVehicle.getDisableVehicleCharacterOnLeave)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getFullName" , AIJobVehicle.getFullName)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getActiveFarm" , AIJobVehicle.getActiveFarm)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getIsMapHotspotVisible" , AIJobVehicle.getIsMapHotspotVisible)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getMapHotspot" , AIJobVehicle.getMapHotspot)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getDeactivateLightsOnLeave" , AIJobVehicle.getDeactivateLightsOnLeave)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"toggleaivehicle",children:"toggleAIVehicle"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"toggleAIVehicle()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIJobVehicle:toggleAIVehicle()\n    if self:getIsAIActive() then\n        self:stopCurrentAIJob( AIMessageSuccessStoppedByUser.new())\n    else\n            local startableJob = self:getStartableAIJob()\n            if startableJob ~ = nil then\n                g_client:getServerConnection():sendEvent( AIJobStartRequestEvent.new(startableJob, self:getOwnerFarmId()))\n                return\n            end\n\n            -- do not open menu while tour is running\n                if g_guidedTourManager:getIsTourRunning() then\n                    return\n                end\n\n                if Platform.isMobile then\n                    g_gui:changeScreen( nil , InGameMenu )\n                    g_messageCenter:publish(MessageType.GUI_INGAME_OPEN_AI_SCREEN, self )\n\n                    --we look for the hotspot corresponding to the vehicle the player is in, and select it on the map\n                        local inGameMap = g_currentMission.hud:getIngameMap()\n                        inGameMap:updateHotspotSorting()\n                        local playerHotspot = g_inGameMenu.pageMapMobile.inGameMap:getPlayerHotspot(inGameMap.hotspotsSorted[ true ])\n\n                        g_inGameMenu.pageMapMobile:onClickHotspot( nil , playerHotspot)\n                        g_inGameMenu.pageMapMobile:onClickPagingAI()\n\n                        return\n                    else\n                            g_gui:showGui( "InGameMenu" )\n                        end\n\n                        g_messageCenter:publish(MessageType.GUI_INGAME_OPEN_AI_SCREEN, self )\n                    end\n                end\n\n'})})]})}function d(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},28453(e,n,i){i.d(n,{R:()=>r,x:()=>c});var t=i(96540);const s={},l=t.createContext(s);function r(e){const n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);