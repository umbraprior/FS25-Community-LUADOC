"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[77385],{28453(e,n,t){t.d(n,{R:()=>r,x:()=>l});var i=t(96540);const s={},a=i.createContext(s);function r(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(a.Provider,{value:n},e.children)}},95e3(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>o,frontMatter:()=>r,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"script/Specializations/AIVehicle","title":"AIVehicle","description":"AIVehicle","source":"@site/../docs/script/Specializations/AIVehicle.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/AIVehicle","permalink":"/FS25-Community-LUADOC/script/Specializations/AIVehicle","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"AIModeSelection","permalink":"/FS25-Community-LUADOC/script/Specializations/AIModeSelection"},"next":{"title":"AIVehicleObstacle","permalink":"/FS25-Community-LUADOC/script/Specializations/AIVehicleObstacle"}}');var s=t(74848),a=t(28453);const r={},l=void 0,c={},h=[{value:"AIVehicle",id:"aivehicle",level:2},{value:"collectAIAgentAttachments",id:"collectaiagentattachments",level:3},{value:"drawAIAgentAttachments",id:"drawaiagentattachments",level:3},{value:"getIsAIPreparingToDrive",id:"getisaipreparingtodrive",level:3},{value:"getIsAIReadyToDrive",id:"getisaireadytodrive",level:3},{value:"initSpecialization",id:"initspecialization",level:3},{value:"loadAIAgentAttachmentsFromXML",id:"loadaiagentattachmentsfromxml",level:3},{value:"onLoad",id:"onload",level:3},{value:"onPostLoad",id:"onpostload",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"raiseAIEvent",id:"raiseaievent",level:3},{value:"registerAgentAttachmentPaths",id:"registeragentattachmentpaths",level:3},{value:"registerAIAgentAttachment",id:"registeraiagentattachment",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3},{value:"registerEvents",id:"registerevents",level:3},{value:"registerFunctions",id:"registerfunctions",level:3},{value:"registerOverwrittenFunctions",id:"registeroverwrittenfunctions",level:3},{value:"safeRaiseAIEvent",id:"saferaiseaievent",level:3},{value:"validateAIAgentAttachments",id:"validateaiagentattachments",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"aivehicle",children:"AIVehicle"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Specialization for AI basics which are used on all vehicles"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Functions"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#collectaiagentattachments",children:"collectAIAgentAttachments"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#drawaiagentattachments",children:"drawAIAgentAttachments"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getisaipreparingtodrive",children:"getIsAIPreparingToDrive"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getisaireadytodrive",children:"getIsAIReadyToDrive"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#initspecialization",children:"initSpecialization"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#loadaiagentattachmentsfromxml",children:"loadAIAgentAttachmentsFromXML"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onpostload",children:"onPostLoad"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#raiseaievent",children:"raiseAIEvent"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registeragentattachmentpaths",children:"registerAgentAttachmentPaths"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registeraiagentattachment",children:"registerAIAgentAttachment"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registerevents",children:"registerEvents"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registeroverwrittenfunctions",children:"registerOverwrittenFunctions"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#saferaiseaievent",children:"safeRaiseAIEvent"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#validateaiagentattachments",children:"validateAIAgentAttachments"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"collectaiagentattachments",children:"collectAIAgentAttachments"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"collectAIAgentAttachments()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"aiDrivableVehicle"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIVehicle:collectAIAgentAttachments(aiDrivableVehicle)\n    local spec = self.spec_aiVehicle\n\n    if #spec.agentAttachments > 0 then\n        local inputAttacherJointDesc = self:getActiveInputAttacherJoint()\n        if inputAttacherJointDesc ~ = nil then\n            local jointDesc = self:getAttacherVehicle():getAttacherJointDescFromObject( self )\n\n            local usedExplicitAttachment = false\n            for i = 1 , #spec.agentAttachments do\n                local agentAttachment = spec.agentAttachments[i]\n                if agentAttachment.jointNode = = inputAttacherJointDesc.node then\n                    agentAttachment.attacherVehicleJointNode = jointDesc.jointTransform\n                    self:registerAIAgentAttachment(aiDrivableVehicle, agentAttachment)\n                    usedExplicitAttachment = true\n                end\n            end\n\n            if not usedExplicitAttachment then\n                for i = 1 , #spec.agentAttachments do\n                    local agentAttachment = spec.agentAttachments[i]\n                    if agentAttachment.isDirectAttachment then\n                        agentAttachment.attacherVehicleJointNode = jointDesc.jointTransform\n                        agentAttachment.jointNodeDynamic = inputAttacherJointDesc.node\n                        self:registerAIAgentAttachment(aiDrivableVehicle, agentAttachment)\n                        break\n                    end\n                end\n            end\n\n            for i = 1 , #spec.agentAttachments do\n                local agentAttachment = spec.agentAttachments[i]\n                if not agentAttachment.isDirectAttachment then\n                    self:registerAIAgentAttachment(aiDrivableVehicle, agentAttachment)\n                end\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"drawaiagentattachments",children:"drawAIAgentAttachments"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"drawAIAgentAttachments()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"agentAttachments"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIVehicle:drawAIAgentAttachments(agentAttachments)\n    local spec = self.spec_aiVehicle\n    agentAttachments = agentAttachments or spec.agentAttachments\n    for i = 1 , #agentAttachments do\n        local agentAttachment = agentAttachments[i]\n        if agentAttachment.rotCenterNode ~ = nil then\n            spec.debugSizeBox:setColorRGBA( 0 , 1 , 0.25 )\n            spec.debugSizeBox:createWithNode(agentAttachment.rotCenterNode, agentAttachment.width, agentAttachment.height, agentAttachment.length, 0 , agentAttachment.height * 0.5 + agentAttachment.heightOffset, agentAttachment.lengthOffset)\n            spec.debugSizeBox:draw()\n        else\n                spec.debugSizeBox:setColorRGBA( 0 , 0.15 , 1 )\n                spec.debugSizeBox:createWithNode(agentAttachment.rootNode, agentAttachment.width, agentAttachment.height, agentAttachment.length, 0 , agentAttachment.height * 0.5 + agentAttachment.heightOffset, agentAttachment.lengthOffset)\n                spec.debugSizeBox:draw()\n            end\n\n            self:drawAIAgentAttachments(agentAttachment.agentAttachments)\n        end\n    end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getisaipreparingtodrive",children:"getIsAIPreparingToDrive"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getIsAIPreparingToDrive()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIVehicle:getIsAIPreparingToDrive()\n    return false\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getisaireadytodrive",children:"getIsAIReadyToDrive"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getIsAIReadyToDrive()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIVehicle:getIsAIReadyToDrive()\n    return true\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"initspecialization",children:"initSpecialization"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"initSpecialization()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIVehicle.initSpecialization()\n    local schema = Vehicle.xmlSchema\n    schema:setXMLSpecializationType( "AIVehicle" )\n\n    AIVehicle.registerAgentAttachmentPaths(schema, "vehicle.ai" , true )\n\n    schema:setXMLSpecializationType()\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"loadaiagentattachmentsfromxml",children:"loadAIAgentAttachmentsFromXML"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"loadAIAgentAttachmentsFromXML()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"xmlFile"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"baseKey"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"agentAttachments"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"loadSubAttachments"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"requiresJointNode"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIVehicle:loadAIAgentAttachmentsFromXML(xmlFile, baseKey, agentAttachments, loadSubAttachments, requiresJointNode)\n    xmlFile:iterate(baseKey, function (index, key)\n        local agentAttachment = { }\n        agentAttachment.jointNode = xmlFile:getValue(key .. "#jointNode" , nil , self.components, self.i3dMappings)\n        agentAttachment.jointNodeDynamic = nil\n\n        agentAttachment.rotCenterNode = xmlFile:getValue(key .. "#rotCenterNode" , nil , self.components, self.i3dMappings)\n        agentAttachment.rotCenterWheelIndices = xmlFile:getValue(key .. "#rotCenterWheelIndices" , nil , true )\n        agentAttachment.rotCenterPosition = xmlFile:getValue(key .. "#rotCenterPosition" , nil , true )\n\n        agentAttachment.useSize = xmlFile:getValue(key .. "#useSize" , false )\n\n        if agentAttachment.useSize then\n            agentAttachment.width = self.size.width\n            agentAttachment.height = self.size.height\n            agentAttachment.heightOffset = self.size.heightOffset\n            agentAttachment.length = self.size.length\n            agentAttachment.lengthOffset = self.size.lengthOffset\n        else\n                agentAttachment.width = 3\n                agentAttachment.height = 3\n                agentAttachment.heightOffset = 0\n                agentAttachment.length = 3\n                agentAttachment.lengthOffset = 0\n            end\n\n            agentAttachment.width = xmlFile:getValue(key .. "#width" , agentAttachment.width)\n            agentAttachment.height = xmlFile:getValue(key .. "#height" , agentAttachment.height)\n            agentAttachment.heightOffset = xmlFile:getValue(key .. "#heightOffset" , agentAttachment.heightOffset)\n            agentAttachment.length = xmlFile:getValue(key .. "#length" , agentAttachment.length)\n            agentAttachment.lengthOffset = xmlFile:getValue(key .. "#lengthOffset" , agentAttachment.lengthOffset)\n\n            agentAttachment.hasCollision = xmlFile:getValue(key .. "#hasCollision" , true )\n\n            agentAttachment.isDirectAttachment = false -- direct attachments are directly bound to the input attacher joint - non direct is e.g.another component with open Y rot limit\n\n            agentAttachment.agentAttachments = { }\n            if loadSubAttachments ~ = false then\n                self:loadAIAgentAttachmentsFromXML(xmlFile, key .. ".agentAttachment" , agentAttachment.agentAttachments, false , true )\n            end\n\n            if requiresJointNode = = true then\n                if agentAttachment.jointNode = = nil then\n                    Logging.xmlWarning(xmlFile, "No joint node defined for ai agent sub attachable \'%s\'!" , key)\n                        return\n                    end\n                end\n\n                table.insert(agentAttachments, agentAttachment)\n            end )\n\n            if loadSubAttachments = = nil and #agentAttachments = = 0 then\n                Logging.xmlWarning(xmlFile, "Missing ai agent attachment definition for attachable vehicle" )\n                end\n            end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Called on loading"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onLoad(table savegame)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"savegame"}),(0,s.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIVehicle:onLoad(savegame)\n    local spec = self.spec_aiVehicle\n\n    local baseName = "vehicle.ai"\n\n    spec.agentAttachments = { }\n    if self.getInputAttacherJoints ~ = nil then\n        self:loadAIAgentAttachmentsFromXML( self.xmlFile, baseName .. ".agentAttachment" , spec.agentAttachments)\n    end\n\n    spec.debugSizeBox = DebugBox.new()\n    spec.debugSizeBox:setColorRGBA( 0 , 1 , 1 )\n    spec.debugSizeBox:setText( "aiAgentAttachment" )\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"onpostload",children:"onPostLoad"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Called on after loading"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onPostLoad(table savegame)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"savegame"}),(0,s.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIVehicle:onPostLoad(savegame)\n    local spec = self.spec_aiVehicle\n    if #spec.agentAttachments > 0 then\n        local inputAttacherJoints = self:getInputAttacherJoints()\n        self:validateAIAgentAttachments(spec.agentAttachments, inputAttacherJoints)\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Checks if all prerequisite specializations are loaded"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"prerequisitesPresent(table specializations)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"specializations"}),(0,s.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"hasPrerequisite"}),(0,s.jsx)(n.th,{children:"true if all prerequisite specializations are loaded"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIVehicle.prerequisitesPresent(specializations)\n    return true\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"raiseaievent",children:"raiseAIEvent"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"raiseAIEvent()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"eventName"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"implementName"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"..."})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIVehicle:raiseAIEvent(eventName, implementName, .. .)\n    local actionController = self.rootVehicle.actionController\n    for _, vehicle in ipairs( self.rootVehicle.childVehicles) do\n        if vehicle ~ = self then\n            self:safeRaiseAIEvent(vehicle, implementName, .. .)\n\n            if actionController ~ = nil then\n                actionController:onAIEvent(vehicle, implementName)\n            end\n        end\n    end\n\n    self:safeRaiseAIEvent( self , implementName, .. .)\n    if actionController ~ = nil then\n        actionController:onAIEvent( self , implementName)\n    end\n\n    self:safeRaiseAIEvent( self , eventName, .. .)\n    if actionController ~ = nil then\n        actionController:onAIEvent( self , eventName)\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"registeragentattachmentpaths",children:"registerAgentAttachmentPaths"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerAgentAttachmentPaths()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"schema"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"basePath"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"includeSubAttachments"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIVehicle.registerAgentAttachmentPaths(schema, basePath, includeSubAttachments)\n    schema:register(XMLValueType.NODE_INDEX, basePath .. ".agentAttachment(?)#jointNode" , "Custom joint node(if not defined the current attacher joint is used)" )\n\n        schema:register(XMLValueType.VECTOR_N, basePath .. ".agentAttachment(?)#rotCenterWheelIndices" , "The center of these wheel indices define the steering center" )\n        schema:register(XMLValueType.NODE_INDEX, basePath .. ".agentAttachment(?)#rotCenterNode" , "Custom node to define the steering center" )\n        schema:register(XMLValueType.VECTOR_ 2 , basePath .. ".agentAttachment(?)#rotCenterPosition" , "Offset from root component that defines the steering center" )\n\n        schema:register(XMLValueType.FLOAT, basePath .. ".agentAttachment(?)#width" , "Agent attachable width" , 3 )\n        schema:register(XMLValueType.FLOAT, basePath .. ".agentAttachment(?)#height" , "Agent attachable height" , 3 )\n        schema:register(XMLValueType.FLOAT, basePath .. ".agentAttachment(?)#heightOffset" , "Agent attachable height offset(only for visual debug)" , 0 )\n            schema:register(XMLValueType.FLOAT, basePath .. ".agentAttachment(?)#length" , "Agent attachable length" , 3 )\n            schema:register(XMLValueType.FLOAT, basePath .. ".agentAttachment(?)#lengthOffset" , "Agent attachable length offset from rot center" , 0 )\n\n            schema:register(XMLValueType.BOOL, basePath .. ".agentAttachment(?)#hasCollision" , "Agent attachable is doing collision checks" , true )\n\n            schema:register(XMLValueType.BOOL, basePath .. ".agentAttachment(?)#useSize" , "Use the vehicle size definition for the agentAttachment size as well(for static tools)" , false )\n\n                if includeSubAttachments then\n                    AIVehicle.registerAgentAttachmentPaths(schema, basePath .. ".agentAttachment(?)" , false )\n                end\n            end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registeraiagentattachment",children:"registerAIAgentAttachment"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerAIAgentAttachment()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"aiDrivableVehicle"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"agentAttachment"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIVehicle:registerAIAgentAttachment(aiDrivableVehicle, agentAttachment)\n    aiDrivableVehicle:addAIAgentAttachment(agentAttachment)\n\n    for i = 1 , #agentAttachment.agentAttachments do\n        local subAgentAttachment = agentAttachment.agentAttachments[i]\n        aiDrivableVehicle:addAIAgentAttachment(subAgentAttachment)\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIVehicle.registerEventListeners(vehicleType)\n    SpecializationUtil.registerEventListener(vehicleType, "onLoad" , AIVehicle )\n    SpecializationUtil.registerEventListener(vehicleType, "onPostLoad" , AIVehicle )\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registerevents",children:"registerEvents"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerEvents()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIVehicle.registerEvents(vehicleType)\n    SpecializationUtil.registerEvent(vehicleType, "onAIFieldCourseSettingsInitialized" )\n    SpecializationUtil.registerEvent(vehicleType, "onPostAIFieldCourseSettingsInitialized" )\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIVehicle.registerFunctions(vehicleType)\n    SpecializationUtil.registerFunction(vehicleType, "collectAIAgentAttachments" , AIVehicle.collectAIAgentAttachments)\n    SpecializationUtil.registerFunction(vehicleType, "registerAIAgentAttachment" , AIVehicle.registerAIAgentAttachment)\n    SpecializationUtil.registerFunction(vehicleType, "loadAIAgentAttachmentsFromXML" , AIVehicle.loadAIAgentAttachmentsFromXML)\n    SpecializationUtil.registerFunction(vehicleType, "validateAIAgentAttachments" , AIVehicle.validateAIAgentAttachments)\n    SpecializationUtil.registerFunction(vehicleType, "drawAIAgentAttachments" , AIVehicle.drawAIAgentAttachments)\n\n    SpecializationUtil.registerFunction(vehicleType, "raiseAIEvent" , AIVehicle.raiseAIEvent)\n    SpecializationUtil.registerFunction(vehicleType, "safeRaiseAIEvent" , AIVehicle.safeRaiseAIEvent)\n    SpecializationUtil.registerFunction(vehicleType, "getIsAIReadyToDrive" , AIVehicle.getIsAIReadyToDrive)\n    SpecializationUtil.registerFunction(vehicleType, "getIsAIPreparingToDrive" , AIVehicle.getIsAIPreparingToDrive)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registeroverwrittenfunctions",children:"registerOverwrittenFunctions"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerOverwrittenFunctions()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIVehicle.registerOverwrittenFunctions(vehicleType)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"saferaiseaievent",children:"safeRaiseAIEvent"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"safeRaiseAIEvent()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"vehicle"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"eventName"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"..."})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AIVehicle:safeRaiseAIEvent(vehicle, eventName, .. .)\n    if vehicle.eventListeners[eventName] ~ = nil then\n        SpecializationUtil.raiseEvent(vehicle, eventName, .. .)\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"validateaiagentattachments",children:"validateAIAgentAttachments"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"validateAIAgentAttachments()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"agentAttachments"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"inputAttacherJoints"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AIVehicle:validateAIAgentAttachments(agentAttachments, inputAttacherJoints)\n    for i = 1 , #agentAttachments do\n        local agentAttachment = agentAttachments[i]\n\n        for j = 1 , #inputAttacherJoints do\n            if agentAttachment.jointNode = = nil or agentAttachment.jointNode = = inputAttacherJoints[j].node then\n                agentAttachment.isDirectAttachment = true\n            end\n        end\n\n        if agentAttachment.rotCenterNode = = nil then\n            if agentAttachment.rotCenterPosition ~ = nil and #agentAttachment.rotCenterPosition = = 2 then\n                local rotCenterNode = createTransformGroup( "aiAgentAttachmentRotCenter" .. i)\n                link( self.components[ 1 ].node, rotCenterNode)\n                setTranslation(rotCenterNode, agentAttachment.rotCenterPosition[ 1 ], 0 , agentAttachment.rotCenterPosition[ 2 ])\n                agentAttachment.rotCenterNode = rotCenterNode\n            elseif agentAttachment.rotCenterWheelIndices ~ = nil and #agentAttachment.rotCenterWheelIndices > 0 then\n                    if self.getWheels ~ = nil then\n                        local wheels = self:getWheels()\n                        local x, y, z = 0 , 0 , 0\n                        local dirX, dirY, dirZ = 0 , 0 , 0\n                        local numWheels = 0\n                        local component = nil\n                        for j = 1 , #agentAttachment.rotCenterWheelIndices do\n                            local wheelIndex = agentAttachment.rotCenterWheelIndices[j]\n                            local wheel = wheels[wheelIndex]\n                            if wheel ~ = nil then\n                                component = component or wheel.node\n                                local wx, wy, wz = localToLocal(wheel.repr, component, 0 , - wheel.physics.radius, 0 )\n                                local dx, dy, dz = localDirectionToLocal(wheel.driveNode, component, 0 , 0 , 1 )\n                                x, y, z = x + wx, y + wy, z + wz\n                                dirX, dirY, dirZ = dirX + dx, dirY + dy, dirZ + dz\n                                numWheels = numWheels + 1\n                            else\n                                    Logging.xmlWarning( self.xmlFile, "Unknown wheel index \'%d\' ground in ai agent attachment entry \'vehicle.ai.agentAttachment(%d)\'!" , wheelIndex, i - 1 )\n                                end\n                            end\n\n                            if numWheels > 0 then\n                                x, y, z = x / numWheels, y / numWheels, z / numWheels\n                                dirX, dirY, dirZ = dirX / numWheels, dirY / numWheels, dirZ / numWheels\n                            end\n                            dirX, dirY, dirZ = MathUtil.vector3Normalize(dirX, dirY, dirZ)\n\n                            if agentAttachment.useSize then\n                                agentAttachment.lengthOffset = self.size.lengthOffset - z\n                            end\n\n                            local rotCenterNode = createTransformGroup( "aiAgentAttachmentRotCenter" .. i)\n                            link(component, rotCenterNode)\n                            setTranslation(rotCenterNode, x, y, z)\n                            agentAttachment.rotCenterNode = rotCenterNode\n\n                            if numWheels > 0 and MathUtil.vector3Length(dirX, dirY, dirZ) > 0 then\n                                setDirection(rotCenterNode, dirX, dirY, dirZ, 0 , 1 , 0 )\n                            end\n                        end\n                    end\n                end\n\n                if agentAttachment.rotCenterNode = = nil then\n                    agentAttachment.rootNode = self.rootNode\n                end\n\n                if agentAttachment.rotCenterNode ~ = nil then\n                    if agentAttachment.jointNode = = nil then\n                        agentAttachment.jointNodeToHitchOffset = { }\n                        for j = 1 , #inputAttacherJoints do\n                            local _, _, z = localToLocal(inputAttacherJoints[j].node, agentAttachment.rotCenterNode, 0 , 0 , 0 )\n                            agentAttachment.jointNodeToHitchOffset[inputAttacherJoints[j].node] = z\n                        end\n                    else\n                            local _\n                            _, _, agentAttachment.trailerHitchOffset = localToLocal(agentAttachment.jointNode, agentAttachment.rotCenterNode, 0 , 0 , 0 )\n                        end\n                    end\n\n                    self:validateAIAgentAttachments(agentAttachment.agentAttachments, inputAttacherJoints)\n                end\n            end\n\n'})})]})}function o(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);