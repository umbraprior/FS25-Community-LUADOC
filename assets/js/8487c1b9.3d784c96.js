"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[56227],{28453(e,n,l){l.d(n,{R:()=>a,x:()=>c});var s=l(96540);const t={},i=s.createContext(t);function a(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(i.Provider,{value:n},e.children)}},70756(e,n,l){l.r(n),l.d(n,{assets:()=>r,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"script/Specializations/LicensePlates","title":"LicensePlates","description":"LicensePlates","source":"@site/../docs/script/Specializations/LicensePlates.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/LicensePlates","permalink":"/FS25-Community-LUADOC/script/Specializations/LicensePlates","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Leveler","permalink":"/FS25-Community-LUADOC/script/Specializations/Leveler"},"next":{"title":"Lights","permalink":"/FS25-Community-LUADOC/script/Specializations/Lights"}}');var t=l(74848),i=l(28453);const a={},c=void 0,r={},d=[{value:"LicensePlates",id:"licenseplates",level:2},{value:"getHasLicensePlates",id:"gethaslicenseplates",level:3},{value:"getLicensePlateDialogSettings",id:"getlicenseplatedialogsettings",level:3},{value:"getLicensePlatesData",id:"getlicenseplatesdata",level:3},{value:"getLicensePlatesDataIsEqual",id:"getlicenseplatesdataisequal",level:3},{value:"getSpecValuePlateText",id:"getspecvalueplatetext",level:3},{value:"initSpecialization",id:"initspecialization",level:3},{value:"loadSpecValuePlateText",id:"loadspecvalueplatetext",level:3},{value:"onDelete",id:"ondelete",level:3},{value:"onLoad",id:"onload",level:3},{value:"onPostLoad",id:"onpostload",level:3},{value:"onReadStream",id:"onreadstream",level:3},{value:"onWriteStream",id:"onwritestream",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3},{value:"registerFunctions",id:"registerfunctions",level:3},{value:"saveToXMLFile",id:"savetoxmlfile",level:3},{value:"setLicensePlatesData",id:"setlicenseplatesdata",level:3}];function o(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"licenseplates",children:"LicensePlates"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Specialization for placing license plates to vehicles"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Functions"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#gethaslicenseplates",children:"getHasLicensePlates"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#getlicenseplatedialogsettings",children:"getLicensePlateDialogSettings"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#getlicenseplatesdata",children:"getLicensePlatesData"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#getlicenseplatesdataisequal",children:"getLicensePlatesDataIsEqual"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#getspecvalueplatetext",children:"getSpecValuePlateText"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#initspecialization",children:"initSpecialization"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#loadspecvalueplatetext",children:"loadSpecValuePlateText"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#ondelete",children:"onDelete"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onpostload",children:"onPostLoad"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onreadstream",children:"onReadStream"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onwritestream",children:"onWriteStream"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#savetoxmlfile",children:"saveToXMLFile"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#setlicenseplatesdata",children:"setLicensePlatesData"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"gethaslicenseplates",children:"getHasLicensePlates"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Returns if vehicle has license plates"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"getHasLicensePlates()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"hasLicensePlates"}),(0,t.jsx)(n.th,{children:"has license plates"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function LicensePlates:getHasLicensePlates()\n    return # self.spec_licensePlates.licensePlates > 0\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"getlicenseplatedialogsettings",children:"getLicensePlateDialogSettings"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Returns license plate settings for dialog"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"getLicensePlateDialogSettings()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"defaultPlacementIndex"}),(0,t.jsx)(n.th,{children:"default placement"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"hasFrontPlate"}),(0,t.jsx)(n.td,{children:"has front license plate"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function LicensePlates:getLicensePlateDialogSettings()\n    local spec = self.spec_licensePlates\n    local hasFrontPlate = false\n    for i = 1 , #spec.licensePlates do\n        local licensePlate = spec.licensePlates[i]\n        if licensePlate.position = = LicensePlateManager.PLATE_POSITION.FRONT then\n            hasFrontPlate = true\n            break\n        end\n    end\n\n    return spec.defaultPlacementIndex, hasFrontPlate\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"getlicenseplatesdata",children:"getLicensePlatesData"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"getLicensePlatesData()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function LicensePlates:getLicensePlatesData()\n    return self.spec_licensePlates.licensePlateData\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"getlicenseplatesdataisequal",children:"getLicensePlatesDataIsEqual"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"getLicensePlatesDataIsEqual()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"data"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function LicensePlates:getLicensePlatesDataIsEqual(data)\n    if data = = nil or self.spec_licensePlates.licensePlateData = = nil then\n        return true\n    end\n\n    local ownData = self.spec_licensePlates.licensePlateData\n\n    if data.variation ~ = ownData.variation or data.colorIndex ~ = ownData.colorIndex or data.placementIndex ~ = ownData.placementIndex then\n        return false\n    end\n\n    if data.characters ~ = nil and ownData.characters ~ = nil then\n        if #data.characters ~ = #ownData.characters then\n            return false\n        end\n\n        for i = 1 , #data.characters do\n            if data.characters[i] ~ = ownData.characters[i] then\n                return false\n            end\n        end\n    end\n\n    return true\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"getspecvalueplatetext",children:"getSpecValuePlateText"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"getSpecValuePlateText()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"storeItem"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"realItem"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function LicensePlates.getSpecValuePlateText(storeItem, realItem)\n    if realItem = = nil then\n        return nil\n    end\n\n    if realItem.getHasLicensePlates = = nil or not realItem:getHasLicensePlates() then\n        return nil\n    end\n\n    local spec = realItem.spec_licensePlates\n    for i = 1 , #spec.licensePlates do\n        local licensePlate = spec.licensePlates[i]\n        if licensePlate.position = = LicensePlateManager.PLATE_POSITION.BACK or i = = #spec.licensePlates then\n            return licensePlate.data:getFormattedString()\n        end\n    end\n\n    return nil\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"initspecialization",children:"initSpecialization"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"initSpecialization()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function LicensePlates.initSpecialization()\n    g_storeManager:addSpecType( "licensePlate" , "shopListAttributeIconLicensePlate" , LicensePlates.loadSpecValuePlateText, LicensePlates.getSpecValuePlateText, StoreSpecies.VEHICLE)\n\n    local schema = Vehicle.xmlSchema\n    schema:setXMLSpecializationType( "LicensePlates" )\n\n    schema:register(XMLValueType.STRING, "vehicle.licensePlates#defaultPlacement" , "Defines the default placement index independent of map setting(NONE|BOTH|BACK_ONLY)" , false )\n    schema:register(XMLValueType.NODE_INDEX, "vehicle.licensePlates.licensePlate(?)#node" , "License plate node" )\n    schema:register(XMLValueType.STRING, "vehicle.licensePlates.licensePlate(?)#preferedType" , "Prefered license plate type to be placed if available" )\n        schema:register(XMLValueType.STRING, "vehicle.licensePlates.licensePlate(?)#placementArea" , "Defines the available area around the node(top, right, bottom, left) (\'-\' means unlimited)" )\n        schema:register(XMLValueType.STRING, "vehicle.licensePlates.licensePlate(?)#position" , "Position of license plate(\'FRONT\' or \'BACK\')" , "ANY" )\n        schema:register(XMLValueType.BOOL, "vehicle.licensePlates.licensePlate(?)#frame" , "License plate with frame of without frame" , true )\n\n        ObjectChangeUtil.registerObjectChangeXMLPaths(schema, "vehicle.licensePlates.licensePlate(?)" )\n\n        schema:setXMLSpecializationType()\n\n        local schemaSavegame = Vehicle.xmlSchemaSavegame\n        schemaSavegame:register(XMLValueType.INT, "vehicles.vehicle(?).licensePlates#variation" , "License plate variation" , 1 )\n        schemaSavegame:register(XMLValueType.STRING, "vehicles.vehicle(?).licensePlates#characters" , "Characters string" )\n        schemaSavegame:register(XMLValueType.INT, "vehicles.vehicle(?).licensePlates#colorIndex" , "Selected color index" , 1 )\n        schemaSavegame:register(XMLValueType.INT, "vehicles.vehicle(?).licensePlates#placementIndex" , "Selected placement index" , 1 )\n    end\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"loadspecvalueplatetext",children:"loadSpecValuePlateText"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"loadSpecValuePlateText()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"xmlFile"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"customEnvironment"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"baseDir"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function LicensePlates.loadSpecValuePlateText(xmlFile, customEnvironment, baseDir)\n    -- No data to load as this spec is only for existing items\n        return nil\n    end\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"ondelete",children:"onDelete"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onDelete()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function LicensePlates:onDelete(savegame)\n    local spec = self.spec_licensePlates\n\n    spec.licensePlates = { }\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on loading"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onLoad(table savegame)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"table"}),(0,t.jsx)(n.th,{children:"savegame"}),(0,t.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function LicensePlates:onLoad(savegame)\n    local spec = self.spec_licensePlates\n\n    spec.licensePlates = { }\n    local defaultPlacementName = self.xmlFile:getValue( "vehicle.licensePlates#defaultPlacement" )\n    if defaultPlacementName ~ = nil then\n        spec.defaultPlacementIndex = LicensePlateManager.PLACEMENT_OPTION[ string.upper(defaultPlacementName)]\n        if spec.defaultPlacementIndex = = nil then\n            Logging.xmlWarning( self.xmlFile, "Unknown defaultPlacement \'%s\' in \'vehicle.licensePlates#defaultPlacement" , defaultPlacementName)\n        end\n    end\n\n    if g_licensePlateManager:getAreLicensePlatesAvailable() then\n        local i = 0\n        while true do\n            local plateKey = string.format( "vehicle.licensePlates.licensePlate(%d)" , i)\n            if not self.xmlFile:hasProperty(plateKey) then\n                break\n            end\n\n            local licensePlate = { }\n\n            licensePlate.node = self.xmlFile:getValue(plateKey .. "#node" , nil , self.components, self.i3dMappings)\n            if licensePlate.node ~ = nil then\n                local preferedTypeStr = self.xmlFile:getValue(plateKey .. "#preferedType" , "ELONGATED" )\n                licensePlate.preferedType = LicensePlateManager.PLATE_TYPE[preferedTypeStr]\n                if licensePlate.preferedType ~ = nil then\n                    licensePlate.placementArea = { 1 , 1 , 1 , 1 }\n                    local placementAreaString = self.xmlFile:getString(plateKey .. "#placementArea" )\n                    if placementAreaString ~ = nil then\n                        local placementArea = string.split(placementAreaString, " " )\n                        if #placementArea = = 4 then\n                            for j = 1 , 4 do\n                                if placementArea[j] ~ = "-" then\n                                    local numberValue = tonumber(placementArea[j])\n                                    if numberValue = = nil then\n                                        Logging.xmlWarning( self.xmlFile, "Invalid 4-vector \'%s\' for \'%s\'. \'%s\' is not a number!" , placementAreaString, plateKey .. "#placementArea" , placementArea[j])\n                                        else\n                                                licensePlate.placementArea[j] = numberValue\n                                            end\n                                        end\n                                    end\n                                else\n                                        Logging.xmlWarning( self.xmlFile, "Invalid 4-vector \'%s\' for \'%s\' " , placementAreaString, plateKey .. "#placementArea" )\n                                        end\n                                    end\n\n                                    local positionStr = self.xmlFile:getValue(plateKey .. "#position" , "ANY" )\n                                    licensePlate.position = LicensePlateManager.PLATE_POSITION[positionStr] or LicensePlateManager.PLATE_POSITION.ANY\n\n                                    local includeFrame = self.xmlFile:getValue(plateKey .. "#frame" , true )\n\n                                    licensePlate.data = g_licensePlateManager:getLicensePlate(licensePlate.preferedType, includeFrame)\n                                    if licensePlate.data ~ = nil then\n                                        link(licensePlate.node, licensePlate.data.node)\n                                        setTranslation(licensePlate.data.node, 0 , 0 , 0 )\n                                        setRotation(licensePlate.data.node, 0 , 0 , 0 )\n                                        setVisibility(licensePlate.data.node, false )\n\n                                        local widthPos = licensePlate.data.rawWidth * 0.5 + licensePlate.data.widthOffsetLeft\n                                        local widthNeg = licensePlate.data.rawWidth * 0.5 + licensePlate.data.widthOffsetRight\n                                        local heightPos = licensePlate.data.rawHeight * 0.5 + licensePlate.data.heightOffsetTop\n                                        local heightNeg = licensePlate.data.rawHeight * 0.5 + licensePlate.data.heightOffsetBot\n\n                                        local scaleFactorWidth = (licensePlate.placementArea[ 2 ] + licensePlate.placementArea[ 4 ]) / (widthPos + widthNeg)\n                                        local scaleFactorHeight = (licensePlate.placementArea[ 1 ] + licensePlate.placementArea[ 3 ]) / (heightPos + heightNeg)\n                                        local minFactor = math.clamp( math.min(scaleFactorWidth, scaleFactorHeight), 0 , 1 )\n                                        if minFactor < 1 then\n                                            setScale(licensePlate.data.node, minFactor, minFactor, minFactor)\n\n                                            widthPos = widthPos * minFactor\n                                            widthNeg = widthNeg * minFactor\n                                            heightPos = heightPos * minFactor\n                                            heightNeg = heightNeg * minFactor\n                                        end\n\n                                        local moveX, moveY = 0 , 0\n                                        moveX = moveX - math.max(widthPos - licensePlate.placementArea[ 2 ], 0 )\n                                        moveX = moveX + math.max(widthNeg - licensePlate.placementArea[ 4 ], 0 )\n                                        moveY = moveY - math.max(heightPos - licensePlate.placementArea[ 1 ], 0 )\n                                        moveY = moveY + math.max(heightNeg - licensePlate.placementArea[ 3 ], 0 )\n                                        setTranslation(licensePlate.data.node, moveX, moveY, 0 )\n\n                                        licensePlate.changeObjects = { }\n                                        ObjectChangeUtil.loadObjectChangeFromXML( self.xmlFile, plateKey, licensePlate.changeObjects, self.components, self )\n\n                                        table.insert(spec.licensePlates, licensePlate)\n                                    end\n                                else\n                                        Logging.xmlError( self.xmlFile, "Unknown preferedType \'%s\' for license plate \'%s\'" , preferedTypeStr, plateKey)\n                                        end\n                                    end\n\n                                    i = i + 1\n                                end\n\n                                if self:getHasLicensePlates() then\n                                    spec.licensePlateData = { variation = 1 , characters = nil , colorIndex = nil }\n                                end\n                            else\n                                    ObjectChangeUtil.updateObjectChanges( self.xmlFile, "vehicle.licensePlates.licensePlate" , - 1 , self.components, self )\n                                end\n                            end\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"onpostload",children:"onPostLoad"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onPostLoad()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function LicensePlates:onPostLoad(savegame)\n    local spec = self.spec_licensePlates\n\n    -- disable all object changes by default - will be enabled again if plate data is available\n        for i = 1 , #spec.licensePlates do\n            ObjectChangeUtil.setObjectChanges(spec.licensePlates[i].changeObjects, false , self , self.setMovingToolDirty)\n        end\n\n        if savegame ~ = nil and self:getHasLicensePlates() then\n            local variation = savegame.xmlFile:getValue(savegame.key .. ".licensePlates#variation" , 1 )\n            local characters = savegame.xmlFile:getValue(savegame.key .. ".licensePlates#characters" )\n            local colorIndex = savegame.xmlFile:getValue(savegame.key .. ".licensePlates#colorIndex" , 1 )\n            local placementIndex = savegame.xmlFile:getValue(savegame.key .. ".licensePlates#placementIndex" , 1 )\n\n            if variation ~ = nil and characters ~ = nil and colorIndex ~ = nil and placementIndex ~ = nil then\n                local characterTbl = { }\n                local characterLength = characters:len() -- TODO:not utf8 compatible\n                for i = 1 , characterLength do\n                    table.insert(characterTbl, characters:sub(i, i)) -- TODO:not utf8 compatible\n                end\n\n                spec.licensePlateData = { variation = variation, characters = characterTbl, colorIndex = colorIndex, placementIndex = placementIndex }\n                self:setLicensePlatesData(spec.licensePlateData)\n            end\n        end\n    end\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"onreadstream",children:"onReadStream"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on client side on join"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onReadStream(integer streamId, Connection connection)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"integer"}),(0,t.jsx)(n.th,{children:"streamId"}),(0,t.jsx)(n.th,{children:"streamId"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Connection"}),(0,t.jsx)(n.td,{children:"connection"}),(0,t.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function LicensePlates:onReadStream(streamId, connection)\n    local spec = self.spec_licensePlates\n    spec.licensePlateData = LicensePlateManager.readLicensePlateData(streamId, connection)\n    self:setLicensePlatesData(spec.licensePlateData)\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"onwritestream",children:"onWriteStream"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on server side on join"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onWriteStream(integer streamId, Connection connection)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"integer"}),(0,t.jsx)(n.th,{children:"streamId"}),(0,t.jsx)(n.th,{children:"streamId"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Connection"}),(0,t.jsx)(n.td,{children:"connection"}),(0,t.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function LicensePlates:onWriteStream(streamId, connection)\n    local spec = self.spec_licensePlates\n    LicensePlateManager.writeLicensePlateData(streamId, connection, spec.licensePlateData)\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Checks if all prerequisite specializations are loaded"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"prerequisitesPresent(table specializations)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"table"}),(0,t.jsx)(n.th,{children:"specializations"}),(0,t.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"table"}),(0,t.jsx)(n.th,{children:"hasPrerequisite"}),(0,t.jsx)(n.th,{children:"true if all prerequisite specializations are loaded"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function LicensePlates.prerequisitesPresent(specializations)\n    return true\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function LicensePlates.registerEventListeners(vehicleType)\n    SpecializationUtil.registerEventListener(vehicleType, "onLoad" , LicensePlates )\n    SpecializationUtil.registerEventListener(vehicleType, "onDelete" , LicensePlates )\n    SpecializationUtil.registerEventListener(vehicleType, "onPostLoad" , LicensePlates )\n    SpecializationUtil.registerEventListener(vehicleType, "onReadStream" , LicensePlates )\n    SpecializationUtil.registerEventListener(vehicleType, "onWriteStream" , LicensePlates )\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function LicensePlates.registerFunctions(vehicleType)\n    SpecializationUtil.registerFunction(vehicleType, "setLicensePlatesData" , LicensePlates.setLicensePlatesData)\n    SpecializationUtil.registerFunction(vehicleType, "getLicensePlatesData" , LicensePlates.getLicensePlatesData)\n    SpecializationUtil.registerFunction(vehicleType, "getLicensePlatesDataIsEqual" , LicensePlates.getLicensePlatesDataIsEqual)\n    SpecializationUtil.registerFunction(vehicleType, "getHasLicensePlates" , LicensePlates.getHasLicensePlates)\n    SpecializationUtil.registerFunction(vehicleType, "getLicensePlateDialogSettings" , LicensePlates.getLicensePlateDialogSettings)\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"savetoxmlfile",children:"saveToXMLFile"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"saveToXMLFile()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"xmlFile"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"key"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"usedModNames"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function LicensePlates:saveToXMLFile(xmlFile, key, usedModNames)\n    local spec = self.spec_licensePlates\n\n    if self:getHasLicensePlates() and spec.licensePlateData then\n        if spec.licensePlateData.placementIndex ~ = LicensePlateManager.PLACEMENT_OPTION.NONE then\n            if spec.licensePlateData.variation ~ = nil\n                and spec.licensePlateData.characters ~ = nil\n                and spec.licensePlateData.colorIndex ~ = nil then\n                xmlFile:setValue(key .. "#variation" , spec.licensePlateData.variation)\n                xmlFile:setValue(key .. "#characters" , table.concat(spec.licensePlateData.characters, "" ))\n                xmlFile:setValue(key .. "#colorIndex" , spec.licensePlateData.colorIndex)\n                xmlFile:setValue(key .. "#placementIndex" , spec.licensePlateData.placementIndex)\n            end\n        end\n    end\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"setlicenseplatesdata",children:"setLicensePlatesData"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"setLicensePlatesData()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"licensePlateData"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function LicensePlates:setLicensePlatesData(licensePlateData)\n    local spec = self.spec_licensePlates\n    if licensePlateData ~ = nil and licensePlateData.variation ~ = nil and licensePlateData.characters ~ = nil and licensePlateData.colorIndex ~ = nil and licensePlateData.placementIndex ~ = nil then\n        for i = 1 , #spec.licensePlates do\n            local licensePlate = spec.licensePlates[i]\n\n            local allowLicensePlate = true\n            if licensePlateData.placementIndex = = LicensePlateManager.PLACEMENT_OPTION.NONE then\n                allowLicensePlate = false\n            elseif licensePlateData.placementIndex = = LicensePlateManager.PLACEMENT_OPTION.BACK_ONLY then\n                    if licensePlate.position = = LicensePlateManager.PLATE_POSITION.FRONT then\n                        allowLicensePlate = false\n                    end\n                end\n\n                if allowLicensePlate then\n                    licensePlate.data:updateData(licensePlateData.variation, licensePlate.position, table.concat(licensePlateData.characters, "" ), true )\n                    licensePlate.data:setColorIndex(licensePlateData.colorIndex)\n\n                    setVisibility(licensePlate.data.node, true )\n                else\n                        setVisibility(licensePlate.data.node, false )\n                    end\n\n                    ObjectChangeUtil.setObjectChanges(licensePlate.changeObjects, allowLicensePlate, self , self.setMovingToolDirty)\n                end\n\n                spec.licensePlateData = licensePlateData\n            else\n                    for i = 1 , #spec.licensePlates do\n                        setVisibility(spec.licensePlates[i].data.node, false )\n                    end\n                end\n            end\n\n'})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}}}]);