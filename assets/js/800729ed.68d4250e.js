"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[91412],{28453(e,n,s){s.d(n,{R:()=>o,x:()=>r});var i=s(96540);const t={},l=i.createContext(t);function o(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(l.Provider,{value:n},e.children)}},44273(e,n,s){s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"script/Misc/ConnectionHoseManager","title":"ConnectionHoseManager","description":"ConnectionHoseManager","source":"@site/../docs/script/Misc/ConnectionHoseManager.md","sourceDirName":"script/Misc","slug":"/script/Misc/ConnectionHoseManager","permalink":"/FS25-Community-LUADOC/script/Misc/ConnectionHoseManager","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Color","permalink":"/FS25-Community-LUADOC/script/Misc/Color"},"next":{"title":"ConsumableManager","permalink":"/FS25-Community-LUADOC/script/Misc/ConsumableManager"}}');var t=s(74848),l=s(28453);const o={},r=void 0,a={},d=[{value:"ConnectionHoseManager",id:"connectionhosemanager",level:2},{value:"adapterI3DFileLoaded",id:"adapteri3dfileloaded",level:3},{value:"addModConnectionHoses",id:"addmodconnectionhoses",level:3},{value:"basicHoseI3DFileLoaded",id:"basichosei3dfileloaded",level:3},{value:"closeSocket",id:"closesocket",level:3},{value:"getClonedAdapterNode",id:"getclonedadapternode",level:3},{value:"getClonedBasicHose",id:"getclonedbasichose",level:3},{value:"getClonedHoseNode",id:"getclonedhosenode",level:3},{value:"getHoseAdapterByName",id:"gethoseadapterbyname",level:3},{value:"getHoseMaterialByName",id:"gethosematerialbyname",level:3},{value:"getHoseTypeByName",id:"gethosetypebyname",level:3},{value:"getSocketByName",id:"getsocketbyname",level:3},{value:"getSocketTarget",id:"getsockettarget",level:3},{value:"initDataStructures",id:"initdatastructures",level:3},{value:"linkSocketToNode",id:"linksockettonode",level:3},{value:"loadConnectionHosesFromXML",id:"loadconnectionhosesfromxml",level:3},{value:"loadMapData",id:"loadmapdata",level:3},{value:"materialI3DFileLoaded",id:"materiali3dfileloaded",level:3},{value:"new",id:"new",level:3},{value:"openSocket",id:"opensocket",level:3},{value:"registerXMLPaths",id:"registerxmlpaths",level:3},{value:"socketI3DFileLoaded",id:"socketi3dfileloaded",level:3},{value:"unloadMapData",id:"unloadmapdata",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"connectionhosemanager",children:"ConnectionHoseManager"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"This class handles all connection hoses"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parent"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"?version=script&category=58&class=557",children:"AbstractManager"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Functions"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#adapteri3dfileloaded",children:"adapterI3DFileLoaded"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#addmodconnectionhoses",children:"addModConnectionHoses"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#basichosei3dfileloaded",children:"basicHoseI3DFileLoaded"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#closesocket",children:"closeSocket"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#getclonedadapternode",children:"getClonedAdapterNode"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#getclonedbasichose",children:"getClonedBasicHose"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#getclonedhosenode",children:"getClonedHoseNode"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#gethoseadapterbyname",children:"getHoseAdapterByName"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#gethosematerialbyname",children:"getHoseMaterialByName"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#gethosetypebyname",children:"getHoseTypeByName"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#getsocketbyname",children:"getSocketByName"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#getsockettarget",children:"getSocketTarget"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#initdatastructures",children:"initDataStructures"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#linksockettonode",children:"linkSocketToNode"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#loadconnectionhosesfromxml",children:"loadConnectionHosesFromXML"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#loadmapdata",children:"loadMapData"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#materiali3dfileloaded",children:"materialI3DFileLoaded"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#new",children:"new"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#opensocket",children:"openSocket"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#registerxmlpaths",children:"registerXMLPaths"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#socketi3dfileloaded",children:"socketI3DFileLoaded"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#unloadmapdata",children:"unloadMapData"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"adapteri3dfileloaded",children:"adapterI3DFileLoaded"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called when adapter i3d file was loaded"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"adapterI3DFileLoaded(string name, , )"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"string"}),(0,t.jsx)(n.th,{children:"name"}),(0,t.jsx)(n.th,{children:"connectionHoseType index name"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"failedReason"}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"args"}),(0,t.jsx)(n.td,{})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function ConnectionHoseManager:adapterI3DFileLoaded(i3dNode, failedReason, args)\n    local hoseType = args.hoseType\n    local adapterName = args.adapterName\n    local xmlFile = args.xmlFile\n    local adapterKey = args.adapterKey\n\n    if i3dNode ~ = nil and i3dNode ~ = 0 then\n        local node = xmlFile:getValue(adapterKey .. "#node" , nil , i3dNode)\n        local hoseReferenceNode = getChildAt(node, 0 )\n        unlink(node)\n\n        local detachedNode = xmlFile:getValue(adapterKey .. "#detachedNode" , nil , i3dNode)\n        if detachedNode ~ = nil then\n            unlink(detachedNode)\n        end\n\n        if hoseReferenceNode ~ = 0 then\n            local entry = { }\n            entry.node = node\n            entry.detachedNode = detachedNode\n            entry.hoseReferenceNode = hoseReferenceNode\n            hoseType.adapters[ string.upper(adapterName)] = entry\n        else\n                printWarning( string.format( "Warning:Missing hose reference node as child from adapter \'%s\' in connection type \'%s\'" , adapterName, hoseType.name))\n            end\n\n            delete(i3dNode)\n        end\n\n        xmlFile.references = xmlFile.references - 1\n        if xmlFile.references = = 0 then\n            self.xmlFiles[xmlFile] = nil\n            xmlFile:delete()\n        end\n    end\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"addmodconnectionhoses",children:"addModConnectionHoses"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Add mod connection hose xml to load"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"addModConnectionHoses(string xmlFilename, string customEnvironment, string baseDirectory)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"string"}),(0,t.jsx)(n.th,{children:"xmlFilename"}),(0,t.jsx)(n.th,{children:"path to connection hose xml file"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"customEnvironment"}),(0,t.jsx)(n.td,{children:"custom environment"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"baseDirectory"}),(0,t.jsx)(n.td,{children:"base rirectory"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function ConnectionHoseManager:addModConnectionHoses(xmlFilename, customEnvironment, baseDirectory)\n    table.insert( self.modConnectionHosesToLoad, { xmlFilename = xmlFilename,\n    customEnvironment = customEnvironment,\n    baseDirectory = baseDirectory } )\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"basichosei3dfileloaded",children:"basicHoseI3DFileLoaded"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called when basic hose i3d file was loaded"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"basicHoseI3DFileLoaded(string name, , )"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"string"}),(0,t.jsx)(n.th,{children:"name"}),(0,t.jsx)(n.th,{children:"connectionHoseType index name"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"failedReason"}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"args"}),(0,t.jsx)(n.td,{})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function ConnectionHoseManager:basicHoseI3DFileLoaded(i3dNode, failedReason, args)\n    local xmlFile = args.xmlFile\n    local hoseKey = args.hoseKey\n\n    if i3dNode ~ = nil and i3dNode ~ = 0 then\n        local node = xmlFile:getValue(hoseKey .. "#node" , nil , i3dNode)\n        if node ~ = nil then\n            unlink(node)\n            local entry = { }\n            entry.node = node\n            entry.startStraightening = xmlFile:getValue(hoseKey .. "#startStraightening" , 2 )\n            entry.endStraightening = xmlFile:getValue(hoseKey .. "#endStraightening" , 2 )\n            entry.minCenterPointAngle = xmlFile:getValue(hoseKey .. "#minCenterPointAngle" , 90 )\n\n            local length = xmlFile:getValue(hoseKey .. "#length" )\n            if length = = nil then\n                printWarning( string.format( "Warning:Missing length attribute in \'%s\'" , hoseKey))\n            end\n\n            local realLength = xmlFile:getValue(hoseKey .. "#realLength" )\n            if realLength = = nil then\n                printWarning( string.format( "Warning:Missing realLength attribute in \'%s\'" , hoseKey))\n            end\n\n            local diameter = xmlFile:getValue(hoseKey .. "#diameter" )\n            if diameter = = nil then\n                printWarning( string.format( "Warning:Missing diameter attribute in \'%s\'" , hoseKey))\n            end\n\n            if length ~ = nil and realLength ~ = nil and diameter ~ = nil then\n                entry.length = length\n                entry.realLength = realLength\n                entry.diameter = diameter\n                table.insert( self.basicHoses, entry)\n            end\n        end\n\n        delete(i3dNode)\n    end\n\n    xmlFile.references = xmlFile.references - 1\n    if xmlFile.references = = 0 then\n        self.xmlFiles[xmlFile] = nil\n        xmlFile:delete()\n    end\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"closesocket",children:"closeSocket"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"closeSocket()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"socket"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function ConnectionHoseManager:closeSocket(socket)\n    if socket ~ = nil then\n        if #socket.caps > 0 then\n            for _, cap in ipairs(socket.caps) do\n                if cap.openedRotation ~ = nil then\n                    setRotation(cap.node, unpack(cap.closedRotation))\n                end\n                setVisibility(cap.node, cap.closedVisibility)\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"getclonedadapternode",children:"getClonedAdapterNode"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"getClonedAdapterNode()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"typeName"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"adapterName"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"customEnvironment"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"detached"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function ConnectionHoseManager:getClonedAdapterNode(typeName, adapterName, customEnvironment, detached)\n    local hoseType = self:getHoseTypeByName(typeName, customEnvironment)\n    if hoseType ~ = nil then\n        local adapter = self:getHoseAdapterByName(hoseType, adapterName, customEnvironment)\n        if adapter ~ = nil then\n            if not detached then\n                local adapterNodeClone = clone(adapter.node, true )\n                setTranslation(adapterNodeClone, 0 , 0 , 0 )\n                setRotation(adapterNodeClone, 0 , 0 , 0 )\n\n                local hoseReferenceNodeClone = getChildAt(adapterNodeClone, 0 )\n\n                return adapterNodeClone, hoseReferenceNodeClone\n            elseif adapter.detachedNode ~ = nil then\n                    local detachedNodeClone = clone(adapter.detachedNode, true )\n                    setTranslation(detachedNodeClone, 0 , 0 , 0 )\n                    setRotation(detachedNodeClone, 0 , 0 , 0 )\n\n                    return detachedNodeClone\n                end\n            end\n        end\n\n        return nil\n    end\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"getclonedbasichose",children:"getClonedBasicHose"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"getClonedBasicHose()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"length"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"diameter"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function ConnectionHoseManager:getClonedBasicHose(length, diameter)\n    -- look for the most exact diameter we can get\n        local minDiameterDiff = math.huge\n        local closestDiameter = math.huge\n        for _, hose in pairs( self.basicHoses) do\n            local diff = math.abs(hose.diameter - diameter)\n            if minDiameterDiff > diff then\n                minDiameterDiff = diff\n                closestDiameter = hose.diameter\n            end\n        end\n\n        -- get all hoses with that diameter\n        local foundHoses = { }\n        for _, hose in pairs( self.basicHoses) do\n            local diff = math.abs(hose.diameter - closestDiameter)\n            if diff < = 0.0001 then\n                table.insert(foundHoses, hose)\n            end\n        end\n\n        --look for the hose with the most exact length\n            local minLengthDiff = math.huge\n            local foundHose\n            for _, hose in pairs(foundHoses) do\n                local diff = math.abs(hose.length - length)\n                if minLengthDiff > diff then\n                    minLengthDiff = diff\n                    foundHose = hose\n                end\n            end\n\n            if foundHose ~ = nil then\n                return clone(foundHose.node, true ), foundHose.realLength, foundHose.startStraightening, foundHose.endStraightening, foundHose.minCenterPointAngle, closestDiameter\n            end\n\n            return nil\n        end\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"getclonedhosenode",children:"getClonedHoseNode"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"getClonedHoseNode()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"typeName"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"hoseName"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"length"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"diameter"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"vehicleMaterial"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"customEnvironment"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function ConnectionHoseManager:getClonedHoseNode(typeName, hoseName, length, diameter, vehicleMaterial, customEnvironment)\n    local hoseType = self:getHoseTypeByName(typeName, customEnvironment)\n    if hoseType ~ = nil then\n        local material = self:getHoseMaterialByName(hoseType, hoseName, customEnvironment)\n        if material ~ = nil then\n            local hoseNodeClone, realLength, startStraightening, endStraightening, minCenterPointAngle, closestDiameter = self:getClonedBasicHose(length, diameter)\n            if hoseNodeClone ~ = nil then\n                local mat = getMaterial(material.materialNode, 0 )\n                setMaterial(hoseNodeClone, mat, 0 )\n\n                if material.materialTemplate ~ = nil then\n                    material.materialTemplate:apply(hoseNodeClone)\n                end\n\n                if vehicleMaterial ~ = nil then\n                    -- clear the diffuse map so we multiply with a pure white diffuse\n                    local newMat = setMaterialDiffuseMapFromFile(mat, "data/shared/detailLibrary/metallic/clear_diffuse.dds" , true , true , false )\n                    setMaterial(hoseNodeClone, newMat, 0 )\n\n                    vehicleMaterial:apply(hoseNodeClone)\n                end\n\n                setShaderParameter(hoseNodeClone, "lengthAndDiameter" , realLength, diameter / closestDiameter, nil , nil , false )\n\n                if material.uvMinMax ~ = nil then\n                    local scale = material.uvMinMax[ 2 ] - material.uvMinMax[ 1 ]\n                    setShaderParameter(hoseNodeClone, "uvScale" , (length / realLength) * material.uvLengthScale, scale, nil , nil , false )\n\n                    local xOffset, yOffset = material.uvRandomOffset[ 1 ], material.uvRandomOffset[ 2 ]\n                    if xOffset ~ = 0 then\n                        xOffset = math.random() * xOffset\n                    end\n                    if yOffset ~ = 0 then\n                        yOffset = math.random() * yOffset\n                    end\n                    setShaderParameter(hoseNodeClone, "offsetUV" , xOffset, material.uvMinMax[ 1 ] + yOffset, nil , nil , false )\n                end\n\n                return hoseNodeClone, startStraightening, endStraightening, minCenterPointAngle\n            end\n        end\n    end\n\n    return nil , nil , nil , nil\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"gethoseadapterbyname",children:"getHoseAdapterByName"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"getHoseAdapterByName()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"hoseType"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"adapterName"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"customEnvironment"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function ConnectionHoseManager:getHoseAdapterByName(hoseType, adapterName, customEnvironment)\n    if hoseType = = nil or adapterName = = nil then\n        return nil\n    end\n\n    if customEnvironment ~ = nil then\n        local customTypeName = string.upper(customEnvironment .. "." .. adapterName)\n        if hoseType.adapters[customTypeName] ~ = nil then\n            return hoseType.adapters[customTypeName]\n        end\n    end\n\n    return hoseType.adapters[ string.upper(adapterName)]\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"gethosematerialbyname",children:"getHoseMaterialByName"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"getHoseMaterialByName()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"hoseType"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"materialName"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"customEnvironment"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function ConnectionHoseManager:getHoseMaterialByName(hoseType, materialName, customEnvironment)\n    if hoseType = = nil or materialName = = nil then\n        return nil\n    end\n\n    if customEnvironment ~ = nil then\n        local customTypeName = string.upper(customEnvironment .. "." .. materialName)\n        if hoseType.hoses[customTypeName] ~ = nil then\n            return hoseType.hoses[customTypeName]\n        end\n    end\n\n    return hoseType.hoses[ string.upper(materialName)]\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"gethosetypebyname",children:"getHoseTypeByName"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"getHoseTypeByName()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"typeName"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"customEnvironment"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function ConnectionHoseManager:getHoseTypeByName(typeName, customEnvironment)\n    if typeName = = nil then\n        return nil\n    end\n\n    if customEnvironment ~ = nil then\n        local customTypeName = string.upper(customEnvironment .. "." .. typeName)\n        if self.typeByName[customTypeName] ~ = nil then\n            return self.typeByName[customTypeName]\n        end\n    end\n\n    return self.typeByName[ string.upper(typeName)]\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"getsocketbyname",children:"getSocketByName"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"getSocketByName()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"socketName"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"customEnvironment"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function ConnectionHoseManager:getSocketByName(socketName, customEnvironment)\n    if socketName = = nil then\n        return nil\n    end\n\n    if customEnvironment ~ = nil then\n        local customTypeName = string.upper(customEnvironment .. "." .. socketName)\n        if self.sockets[customTypeName] ~ = nil then\n            return self.sockets[customTypeName]\n        end\n    end\n\n    return self.sockets[ string.upper(socketName)]\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"getsockettarget",children:"getSocketTarget"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"getSocketTarget()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"socket"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"defaultTarget"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function ConnectionHoseManager:getSocketTarget(socket, defaultTarget)\n    if socket ~ = nil then\n        if socket.referenceNode ~ = nil then\n            return socket.referenceNode\n        end\n    end\n\n    return defaultTarget\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"initdatastructures",children:"initDataStructures"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Initialize data structures"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"initDataStructures()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function ConnectionHoseManager:initDataStructures()\n    self.xmlFiles = { }\n    self.typeByName = { }\n    ConnectionHoseType = self.typeByName\n    self.basicHoses = { }\n    self.sockets = { }\n    self.sharedLoadRequestIds = { }\n    self.modConnectionHosesToLoad = { }\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"linksockettonode",children:"linkSocketToNode"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"linkSocketToNode()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"socketName"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"node"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"customEnvironment"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"socketMaterial"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function ConnectionHoseManager:linkSocketToNode(socketName, node, customEnvironment, socketMaterial)\n    local socket = self:getSocketByName(socketName, customEnvironment)\n    if socket ~ = nil and node ~ = nil then\n        local linkedSocket = { }\n        linkedSocket.node = clone(socket.node, true )\n        setTranslation(linkedSocket.node, 0 , 0 , 0 )\n        setRotation(linkedSocket.node, 0 , 0 , 0 )\n\n        linkedSocket.referenceNode = I3DUtil.indexToObject(linkedSocket.node, socket.referenceNode)\n\n        linkedSocket.caps = { }\n        for _, cap in ipairs(socket.caps) do\n            local clonedCap = { }\n            for i, v in pairs(cap) do\n                clonedCap[i] = v\n            end\n\n            clonedCap.node = I3DUtil.indexToObject(linkedSocket.node, clonedCap.node)\n            table.insert(linkedSocket.caps, clonedCap)\n        end\n\n        if socketMaterial ~ = nil then\n            socketMaterial:apply(linkedSocket.node, "connector_color_mat" )\n        end\n\n        link(node, linkedSocket.node)\n        self:closeSocket(linkedSocket)\n\n        return linkedSocket\n    end\n\n    return nil\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"loadconnectionhosesfromxml",children:"loadConnectionHosesFromXML"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Loads Connection hoses"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"loadConnectionHosesFromXML(string xmlFilename, string customEnvironment, string baseDirectory)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"string"}),(0,t.jsx)(n.th,{children:"xmlFilename"}),(0,t.jsx)(n.th,{children:"path to connection hose xml file"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"customEnvironment"}),(0,t.jsx)(n.td,{children:"custom environment"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"baseDirectory"}),(0,t.jsx)(n.td,{children:"base rirectory"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function ConnectionHoseManager:loadConnectionHosesFromXML(xmlFilename, customEnvironment, baseDirectory)\n    Logging.info( "Loading ConnectionHoses from \'%s\'" , xmlFilename)\n\n    local xmlFile = XMLFile.load( "TempHoses" , xmlFilename, ConnectionHoseManager.xmlSchema)\n    if xmlFile ~ = nil then\n        self.xmlFiles[xmlFile] = true\n        xmlFile.references = 1\n        --load basic hoses\n        local i = 0\n        while true do\n            local hoseKey = string.format( "connectionHoses.basicHoses.basicHose(%d)" , i)\n            if not xmlFile:hasProperty(hoseKey) then\n                break\n            end\n\n            local filename = xmlFile:getValue(hoseKey .. "#filename" )\n            if filename ~ = nil then\n                xmlFile.references = xmlFile.references + 1\n                filename = Utils.getFilename(filename, baseDirectory)\n\n                local arguments = {\n                xmlFile = xmlFile,\n                hoseKey = hoseKey\n                }\n                local sharedLoadRequestId = g_i3DManager:loadSharedI3DFileAsync(filename, false , false , self.basicHoseI3DFileLoaded, self , arguments)\n                table.insert( self.sharedLoadRequestIds, sharedLoadRequestId)\n            end\n\n            i = i + 1\n        end\n\n        --load hose types\n        i = 0\n        while true do\n            local key = string.format( "connectionHoses.connectionHoseTypes.connectionHoseType(%d)" , i)\n            if not xmlFile:hasProperty(key) then\n                break\n            end\n\n            local name = xmlFile:getValue(key .. "#name" )\n            if name ~ = nil then\n                local hoseType\n                if self.typeByName[ string.upper(name)] ~ = nil then\n                    hoseType = self.typeByName[ string.upper(name)]\n                else\n                        if customEnvironment ~ = nil then\n                            name = customEnvironment .. "." .. name\n                        end\n\n                        hoseType = { }\n                        hoseType.name = name\n                        hoseType.adapters = { }\n                        hoseType.hoses = { }\n\n                        self.typeByName[ string.upper(name)] = hoseType\n                    end\n\n                    local j = 0\n                    while true do\n                        local adapterKey = string.format( "%s.adapter(%d)" , key, j)\n                        if not xmlFile:hasProperty(adapterKey) then\n                            break\n                        end\n\n                        local adapterName = xmlFile:getValue(adapterKey .. "#name" , "DEFAULT" )\n                        if customEnvironment ~ = nil then\n                            adapterName = customEnvironment .. "." .. adapterName\n                        end\n\n                        local filename = xmlFile:getValue(adapterKey .. "#filename" )\n                        if filename ~ = nil then\n                            xmlFile.references = xmlFile.references + 1\n                            filename = Utils.getFilename(filename, baseDirectory)\n\n                            local arguments = {\n                            hoseType = hoseType,\n                            adapterName = adapterName,\n                            xmlFile = xmlFile,\n                            adapterKey = adapterKey\n                            }\n                            local sharedLoadRequestId = g_i3DManager:loadSharedI3DFileAsync(filename, false , false , self.adapterI3DFileLoaded, self , arguments)\n                            table.insert( self.sharedLoadRequestIds, sharedLoadRequestId)\n                        end\n                        j = j + 1\n                    end\n\n                    j = 0\n                    while true do\n                        local hoseKey = string.format( "%s.material(%d)" , key, j)\n                        if not xmlFile:hasProperty(hoseKey) then\n                            break\n                        end\n\n                        local hoseName = xmlFile:getValue(hoseKey .. "#name" , "DEFAULT" )\n                        if customEnvironment ~ = nil then\n                            hoseName = customEnvironment .. "." .. hoseName\n                        end\n\n                        local filename = xmlFile:getValue(hoseKey .. "#filename" )\n                        if filename ~ = nil then\n                            xmlFile.references = xmlFile.references + 1\n                            filename = Utils.getFilename(filename, baseDirectory)\n\n                            local arguments = {\n                            hoseType = hoseType,\n                            hoseName = hoseName,\n                            xmlFile = xmlFile,\n                            hoseKey = hoseKey\n                            }\n                            local sharedLoadRequestId = g_i3DManager:loadSharedI3DFileAsync(filename, false , false , self.materialI3DFileLoaded, self , arguments)\n                            table.insert( self.sharedLoadRequestIds, sharedLoadRequestId)\n                        end\n                        j = j + 1\n                    end\n                end\n\n                i = i + 1\n            end\n\n            --load basic hoses\n            i = 0\n            while true do\n                local socketKey = string.format( "connectionHoses.sockets.socket(%d)" , i)\n                if not xmlFile:hasProperty(socketKey) then\n                    break\n                end\n\n                local name = xmlFile:getValue(socketKey .. "#name" )\n                if customEnvironment ~ = nil then\n                    name = customEnvironment .. "." .. name\n                end\n\n                local filename = xmlFile:getValue(socketKey .. "#filename" )\n                if name ~ = nil and filename ~ = nil then\n                    xmlFile.references = xmlFile.references + 1\n                    filename = Utils.getFilename(filename, baseDirectory)\n\n                    local arguments = {\n                    name = name,\n                    xmlFile = xmlFile,\n                    socketKey = socketKey\n                    }\n                    local sharedLoadRequestId = g_i3DManager:loadSharedI3DFileAsync(filename, false , false , self.socketI3DFileLoaded, self , arguments)\n                    table.insert( self.sharedLoadRequestIds, sharedLoadRequestId)\n                end\n                i = i + 1\n            end\n\n            xmlFile.references = xmlFile.references - 1\n            if xmlFile.references = = 0 then\n                self.xmlFiles[xmlFile] = nil\n                xmlFile:delete()\n            end\n        end\n    end\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"loadmapdata",children:"loadMapData"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Load data on map load"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"loadMapData()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"xmlFile"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"missionInfo"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"baseDirectory"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"true"}),(0,t.jsx)(n.th,{children:"if loading was successful else false"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function ConnectionHoseManager:loadMapData(xmlFile, missionInfo, baseDirectory)\n    ConnectionHoseManager:superClass().loadMapData( self )\n    self.baseDirectory = baseDirectory\n    self:loadConnectionHosesFromXML( ConnectionHoseManager.DEFAULT_HOSES_FILENAME, nil , self.baseDirectory)\n\n    for i = # self.modConnectionHosesToLoad, 1 , - 1 do\n        local modConnectionHoseToLoad = self.modConnectionHosesToLoad[i]\n        self:loadConnectionHosesFromXML(modConnectionHoseToLoad.xmlFilename, modConnectionHoseToLoad.customEnvironment, modConnectionHoseToLoad.baseDirectory)\n        self.modConnectionHosesToLoad[i] = nil\n    end\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"materiali3dfileloaded",children:"materialI3DFileLoaded"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called when material i3d file was loaded"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"materialI3DFileLoaded(string name, , )"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"string"}),(0,t.jsx)(n.th,{children:"name"}),(0,t.jsx)(n.th,{children:"connectionHoseType index name"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"failedReason"}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"args"}),(0,t.jsx)(n.td,{})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function ConnectionHoseManager:materialI3DFileLoaded(i3dNode, failedReason, args)\n    local hoseType = args.hoseType\n    local hoseName = args.hoseName\n    local xmlFile = args.xmlFile\n    local hoseKey = args.hoseKey\n\n    if i3dNode ~ = nil and i3dNode ~ = 0 then\n        local materialNode = xmlFile:getValue(hoseKey .. "#materialNode" , nil , i3dNode)\n        unlink(materialNode)\n        if materialNode ~ = nil then\n            local entry = { }\n            entry.materialNode = materialNode\n            entry.uvMinMax = xmlFile:getValue(hoseKey .. "#uvMinMax" , nil , true )\n            entry.uvLengthScale = xmlFile:getValue(hoseKey .. "#uvLengthScale" , 1 )\n            entry.uvRandomOffset = xmlFile:getValue(hoseKey .. "#uvRandomOffset" , "0 0" , true )\n\n            entry.materialTemplate = xmlFile:getValue(hoseKey .. "#materialTemplateName" )\n\n            hoseType.hoses[ string.upper(hoseName)] = entry\n        end\n\n        delete(i3dNode)\n    end\n\n    xmlFile.references = xmlFile.references - 1\n    if xmlFile.references = = 0 then\n        self.xmlFiles[xmlFile] = nil\n        xmlFile:delete()\n    end\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"new",children:"new"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Creating manager"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"new()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"customMt"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"instance"}),(0,t.jsx)(n.th,{children:"instance of object"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function ConnectionHoseManager.new(customMt)\n    local self = AbstractManager.new(customMt or ConnectionHoseManager _mt)\n\n    self:initDataStructures()\n\n    ConnectionHoseManager.xmlSchema = XMLSchema.new( "connectionHoses" )\n    ConnectionHoseManager:registerXMLPaths( ConnectionHoseManager.xmlSchema)\n\n    return self\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"opensocket",children:"openSocket"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"openSocket()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"socket"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function ConnectionHoseManager:openSocket(socket)\n    if socket ~ = nil then\n        if #socket.caps > 0 then\n            for _, cap in ipairs(socket.caps) do\n                if cap.openedRotation ~ = nil then\n                    setRotation(cap.node, unpack(cap.openedRotation))\n                end\n                setVisibility(cap.node, cap.openedVisibility)\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"registerxmlpaths",children:"registerXMLPaths"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"registerXMLPaths()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"schema"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function ConnectionHoseManager:registerXMLPaths(schema)\n    schema:register(XMLValueType.STRING, "connectionHoses.basicHoses.basicHose(?)#filename" , "I3d filename" )\n    schema:register(XMLValueType.NODE_INDEX, "connectionHoses.basicHoses.basicHose(?)#node" , "Path to hose node" )\n    schema:register(XMLValueType.FLOAT, "connectionHoses.basicHoses.basicHose(?)#startStraightening" , "Straightening factor on start side" , 2 )\n    schema:register(XMLValueType.FLOAT, "connectionHoses.basicHoses.basicHose(?)#endStraightening" , "Straightening factor on end side" , 2 )\n    schema:register(XMLValueType.ANGLE, "connectionHoses.basicHoses.basicHose(?)#minCenterPointAngle" , "Min.bending angle at the center of the hose" , 90 )\n    schema:register(XMLValueType.FLOAT, "connectionHoses.basicHoses.basicHose(?)#length" , "Reference length of hose" )\n    schema:register(XMLValueType.FLOAT, "connectionHoses.basicHoses.basicHose(?)#realLength" , "Real length of hose in i3d" )\n    schema:register(XMLValueType.FLOAT, "connectionHoses.basicHoses.basicHose(?)#diameter" , "Diameter of hose" )\n\n    schema:register(XMLValueType.STRING, "connectionHoses.connectionHoseTypes.connectionHoseType(?)#name" , "Name of type" )\n    schema:register(XMLValueType.STRING, "connectionHoses.connectionHoseTypes.connectionHoseType(?).adapter(?)#name" , "Name of adapter" )\n    schema:register(XMLValueType.STRING, "connectionHoses.connectionHoseTypes.connectionHoseType(?).adapter(?)#filename" , "Path to i3d file" )\n    schema:register(XMLValueType.NODE_INDEX, "connectionHoses.connectionHoseTypes.connectionHoseType(?).adapter(?)#node" , "Adapter node in i3d file" )\n    schema:register(XMLValueType.NODE_INDEX, "connectionHoses.connectionHoseTypes.connectionHoseType(?).adapter(?)#detachedNode" , "Detached adapter node in i3d file" )\n\n    schema:register(XMLValueType.STRING, "connectionHoses.connectionHoseTypes.connectionHoseType(?).material(?)#name" , "Name of material" )\n    schema:register(XMLValueType.STRING, "connectionHoses.connectionHoseTypes.connectionHoseType(?).material(?)#filename" , "Path to i3d file" )\n    schema:register(XMLValueType.NODE_INDEX, "connectionHoses.connectionHoseTypes.connectionHoseType(?).material(?)#materialNode" , "Material node in i3d file" )\n    schema:register(XMLValueType.VECTOR_ 2 , "connectionHoses.connectionHoseTypes.connectionHoseType(?).material(?)#uvMinMax" , "Min.and max.range of uv\'s in Y" )\n    schema:register(XMLValueType.FLOAT, "connectionHoses.connectionHoseTypes.connectionHoseType(?).material(?)#uvLengthScale" , "Scale factor of the UV in X axis" , 1 )\n    schema:register(XMLValueType.VECTOR_ 2 , "connectionHoses.connectionHoseTypes.connectionHoseType(?).material(?)#uvRandomOffset" , "Random offset range on x and y axis" , "0 0" )\n    schema:register(XMLValueType.VEHICLE_MATERIAL, "connectionHoses.connectionHoseTypes.connectionHoseType(?).material(?)#materialTemplateName" , "Material template to be applied by default" )\n\n    schema:register(XMLValueType.STRING, "connectionHoses.sockets.socket(?)#name" , "Socket name" )\n    schema:register(XMLValueType.STRING, "connectionHoses.sockets.socket(?)#filename" , "Path to i3d file" )\n    schema:register(XMLValueType.NODE_INDEX, "connectionHoses.sockets.socket(?)#node" , "Socket node in i3d" )\n    schema:register(XMLValueType.STRING, "connectionHoses.sockets.socket(?)#referenceNode" , "Index of reference node inside socket" )\n    schema:register(XMLValueType.STRING, "connectionHoses.sockets.socket(?).cap(?)#node" , "Index of cap node inside socket" )\n    schema:register(XMLValueType.VECTOR_ROT, "connectionHoses.sockets.socket(?).cap(?)#openedRotation" , "Opened rotation" )\n    schema:register(XMLValueType.VECTOR_ROT, "connectionHoses.sockets.socket(?).cap(?)#closedRotation" , "Closed rotation" )\n    schema:register(XMLValueType.BOOL, "connectionHoses.sockets.socket(?).cap(?)#openedVisibility" , "Opened visibility" , true )\n    schema:register(XMLValueType.BOOL, "connectionHoses.sockets.socket(?).cap(?)#closedVisibility" , "Closed visibility" , true )\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"socketi3dfileloaded",children:"socketI3DFileLoaded"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called when socket i3d file was loaded"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"socketI3DFileLoaded(string name, , )"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"string"}),(0,t.jsx)(n.th,{children:"name"}),(0,t.jsx)(n.th,{children:"connectionHoseType index name"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"failedReason"}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"args"}),(0,t.jsx)(n.td,{})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function ConnectionHoseManager:socketI3DFileLoaded(i3dNode, failedReason, args)\n    local name = args.name\n    local xmlFile = args.xmlFile\n    local socketKey = args.socketKey\n\n    if i3dNode ~ = nil and i3dNode ~ = 0 then\n        local node = xmlFile:getValue(socketKey .. "#node" , nil , i3dNode)\n\n        if node ~ = nil then\n            unlink(node)\n            local entry = { }\n            entry.node = node\n\n            entry.referenceNode = xmlFile:getValue(socketKey .. "#referenceNode" )\n\n            entry.caps = { }\n\n            local j = 0\n            while true do\n                local capKey = string.format(socketKey .. ".cap(%d)" , j)\n                if not xmlFile:hasProperty(capKey) then\n                    break\n                end\n\n                local cap = { }\n                cap.node = xmlFile:getValue(capKey .. "#node" )\n                if cap.node ~ = nil then\n                    cap.openedRotation = xmlFile:getValue(capKey .. "#openedRotation" , nil , true )\n                    cap.closedRotation = xmlFile:getValue(capKey .. "#closedRotation" , nil , true )\n                    cap.openedVisibility = xmlFile:getValue(capKey .. "#openedVisibility" , true )\n                    cap.closedVisibility = xmlFile:getValue(capKey .. "#closedVisibility" , true )\n\n                    table.insert(entry.caps, cap)\n                end\n\n                j = j + 1\n            end\n\n            if self.sockets[ string.upper(name)] = = nil then\n                self.sockets[ string.upper(name)] = entry\n            else\n                    Logging.xmlError(xmlFile, "Socket \'%s\' already exists" , name)\n                end\n            end\n\n            delete(i3dNode)\n        end\n\n        xmlFile.references = xmlFile.references - 1\n        if xmlFile.references = = 0 then\n            self.xmlFiles[xmlFile] = nil\n            xmlFile:delete()\n        end\n    end\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"unloadmapdata",children:"unloadMapData"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Load data on map load"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"unloadMapData()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"true"}),(0,t.jsx)(n.th,{children:"if loading was successful else false"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function ConnectionHoseManager:unloadMapData()\n    for _, entry in ipairs( self.basicHoses) do\n        delete(entry.node)\n    end\n    for _, hoseType in pairs( self.typeByName) do\n        for _, adapter in pairs(hoseType.adapters) do\n            delete(adapter.node)\n            delete(adapter.detachedNode)\n        end\n        for _, hose in pairs(hoseType.hoses) do\n            delete(hose.materialNode)\n        end\n    end\n    for _, entry in pairs( self.sockets) do\n        delete(entry.node)\n    end\n\n    for i = 1 , # self.sharedLoadRequestIds do\n        local sharedLoadRequestId = self.sharedLoadRequestIds[i]\n        g_i3DManager:releaseSharedI3DFile(sharedLoadRequestId)\n    end\n\n    for xmlFile, _ in pairs( self.xmlFiles) do\n        self.xmlFiles[xmlFile] = nil\n        xmlFile:delete()\n    end\n\n    ConnectionHoseManager:superClass().unloadMapData( self )\nend\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);