"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[58837],{1823(e,n,r){r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"script/Specializations/Ropes","title":"Ropes","description":"Ropes","source":"@site/../docs/script/Specializations/Ropes.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/Ropes","permalink":"/FS25-Community-LUADOC/script/Specializations/Ropes","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Roller","permalink":"/FS25-Community-LUADOC/script/Specializations/Roller"},"next":{"title":"SaltSpreader","permalink":"/FS25-Community-LUADOC/script/Specializations/SaltSpreader"}}');var t=r(74848),i=r(28453);const a={},l=void 0,d={},o=[{value:"Ropes",id:"ropes",level:2},{value:"initSpecialization",id:"initspecialization",level:3},{value:"loadAdjusterNode",id:"loadadjusternode",level:3},{value:"onLoad",id:"onload",level:3},{value:"onLoadFinished",id:"onloadfinished",level:3},{value:"onPostUpdate",id:"onpostupdate",level:3},{value:"onUpdate",id:"onupdate",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3},{value:"registerFunctions",id:"registerfunctions",level:3},{value:"updateAdjusterNodes",id:"updateadjusternodes",level:3},{value:"updateRopes",id:"updateropes",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"ropes",children:"Ropes"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Specialization for vehicles with animated ropes"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Functions"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#initspecialization",children:"initSpecialization"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#loadadjusternode",children:"loadAdjusterNode"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onloadfinished",children:"onLoadFinished"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onpostupdate",children:"onPostUpdate"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onupdate",children:"onUpdate"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#updateadjusternodes",children:"updateAdjusterNodes"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#updateropes",children:"updateRopes"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"initspecialization",children:"initSpecialization"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"initSpecialization()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function Ropes.initSpecialization()\n    local schema = Vehicle.xmlSchema\n    schema:setXMLSpecializationType( "Ropes" )\n\n    schema:register(XMLValueType.NODE_INDEX, "vehicle.ropes.rope(?)#baseNode" , "Base node" )\n    schema:register(XMLValueType.NODE_INDEX, "vehicle.ropes.rope(?)#targetNode" , "Target node" )\n    schema:register(XMLValueType.VECTOR_ 4 , "vehicle.ropes.rope(?)#baseParameters" , "Base parameters" )\n    schema:register(XMLValueType.VECTOR_ 4 , "vehicle.ropes.rope(?)#targetParameters" , "Target parameters" )\n\n    schema:register(XMLValueType.NODE_INDEX, "vehicle.ropes.rope(?).baseParameterAdjuster(?)#node" , "Adjuster node" )\n    schema:register(XMLValueType.INT, "vehicle.ropes.rope(?).baseParameterAdjuster(?)#rotationAxis" , "Rotation axis" )\n    schema:register(XMLValueType.VECTOR_ROT_ 2 , "vehicle.ropes.rope(?).baseParameterAdjuster(?)#rotationRange" , "Rotation range" )\n    schema:register(XMLValueType.INT, "vehicle.ropes.rope(?).baseParameterAdjuster(?)#translationAxis" , "Translation axis" )\n    schema:register(XMLValueType.VECTOR_ 2 , "vehicle.ropes.rope(?).baseParameterAdjuster(?)#translationRange" , "Translation range" )\n    schema:register(XMLValueType.VECTOR_ 4 , "vehicle.ropes.rope(?).baseParameterAdjuster(?)#minTargetParameters" , "Min.target parameters" )\n    schema:register(XMLValueType.VECTOR_ 4 , "vehicle.ropes.rope(?).baseParameterAdjuster(?)#maxTargetParameters" , "Max.target parameters" )\n\n    schema:register(XMLValueType.NODE_INDEX, "vehicle.ropes.rope(?).targetParameterAdjuster(?)#node" , "Adjuster node" )\n    schema:register(XMLValueType.INT, "vehicle.ropes.rope(?).targetParameterAdjuster(?)#rotationAxis" , "Rotation axis" )\n    schema:register(XMLValueType.VECTOR_ROT_ 2 , "vehicle.ropes.rope(?).targetParameterAdjuster(?)#rotationRange" , "Rotation range" )\n    schema:register(XMLValueType.INT, "vehicle.ropes.rope(?).targetParameterAdjuster(?)#translationAxis" , "Translation axis" )\n    schema:register(XMLValueType.VECTOR_ 2 , "vehicle.ropes.rope(?).targetParameterAdjuster(?)#translationRange" , "Translation range" )\n    schema:register(XMLValueType.VECTOR_ 4 , "vehicle.ropes.rope(?).targetParameterAdjuster(?)#minTargetParameters" , "Min.target parameters" )\n    schema:register(XMLValueType.VECTOR_ 4 , "vehicle.ropes.rope(?).targetParameterAdjuster(?)#maxTargetParameters" , "Max.target parameters" )\n\n    schema:setXMLSpecializationType()\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"loadadjusternode",children:"loadAdjusterNode"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"loadAdjusterNode()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"adjusterNode"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"xmlFile"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"key"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function Ropes:loadAdjusterNode(adjusterNode, xmlFile, key)\n    XMLUtil.checkDeprecatedXMLElements(xmlFile, key .. "#index" , key .. "#node" ) --FS17 to FS19\n\n    local node = xmlFile:getValue(key .. "#node" , nil , self.components, self.i3dMappings)\n    if node ~ = nil then\n        adjusterNode.node = node\n\n        adjusterNode.rotationAxis = xmlFile:getValue(key .. "#rotationAxis" , 1 )\n        adjusterNode.rotationRange = xmlFile:getValue(key .. "#rotationRange" , nil , true )\n\n        adjusterNode.translationAxis = xmlFile:getValue(key .. "#translationAxis" , 1 )\n        adjusterNode.translationRange = xmlFile:getValue(key .. "#translationRange" , nil , true )\n\n        adjusterNode.minTargetParameters = xmlFile:getValue(key .. "#minTargetParameters" , nil , true )\n        if adjusterNode.minTargetParameters = = nil then\n            Logging.xmlWarning( self.xmlFile, "Missing minTargetParameters attribute in \'%s\'" , key)\n            return false\n        end\n\n        adjusterNode.maxTargetParameters = xmlFile:getValue(key .. "#maxTargetParameters" , nil , true )\n        if adjusterNode.maxTargetParameters = = nil then\n            Logging.xmlWarning( self.xmlFile, "Missing maxTargetParameters attribute in \'%s\'" , key)\n            return false\n        end\n\n        return true\n    else\n            Logging.xmlWarning( self.xmlFile, "Missing node attribute in \'%s\'" , key)\n        end\n\n        return false\n    end\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on loading"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onLoad(table savegame)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"table"}),(0,t.jsx)(n.th,{children:"savegame"}),(0,t.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function Ropes:onLoad(savegame)\n    local spec = self.spec_ropes\n\n    if self.isClient then\n        spec.ropes = { }\n\n        for _ropeIndex, ropeKey in self.xmlFile:iterator( "vehicle.ropes.rope" ) do\n            local entry = { }\n\n            entry.baseNode = self.xmlFile:getValue(ropeKey .. "#baseNode" , nil , self.components, self.i3dMappings)\n            entry.targetNode = self.xmlFile:getValue(ropeKey .. "#targetNode" , nil , self.components, self.i3dMappings)\n            entry.baseParameters = self.xmlFile:getValue(ropeKey .. "#baseParameters" , nil , true )\n            if entry.baseParameters = = nil then\n                Logging.xmlWarning( self.xmlFile, "Missing values for \'%s\'" , ropeKey .. "#baseParameters" )\n                    continue\n                end\n                entry.targetParameters = self.xmlFile:getValue(ropeKey .. "#targetParameters" , nil , true )\n                if entry.targetParameters = = nil then\n                    Logging.xmlWarning( self.xmlFile, "Missing values for \'%s\'" , ropeKey .. "#targetParameters" )\n                        continue\n                    end\n\n                    setShaderParameter(entry.baseNode, "cv0" , entry.baseParameters[ 1 ], entry.baseParameters[ 2 ], entry.baseParameters[ 3 ], entry.baseParameters[ 4 ], false )\n                    setShaderParameter(entry.baseNode, "cv1" , 0 , 0 , 0 , 0 , false )\n                    local x,y,z = localToLocal(entry.targetNode, entry.baseNode, entry.targetParameters[ 1 ], entry.targetParameters[ 2 ], entry.targetParameters[ 3 ])\n                    setShaderParameter(entry.baseNode, "cv3" , x, y, z, 0 , false )\n\n                    entry.baseParameterAdjusters = { }\n\n                    for _, adjusterKey in self.xmlFile:iterator(ropeKey .. "baseParameterAdjuster" ) do\n                        local adjusterNode = { }\n                        if self:loadAdjusterNode(adjusterNode, self.xmlFile, adjusterKey) then\n                            table.insert(entry.baseParameterAdjusters, adjusterNode)\n                        end\n                    end\n\n                    entry.targetParameterAdjusters = { }\n                    for _, adjusterKey in self.xmlFile:iterator(ropeKey .. "targetParameterAdjuster" ) do\n                        local adjusterNode = { }\n                        if self:loadAdjusterNode(adjusterNode, self.xmlFile, adjusterKey) then\n                            table.insert(entry.targetParameterAdjusters, adjusterNode)\n                        end\n                    end\n\n                    table.insert(spec.ropes, entry)\n                end\n            end\n\n            if not self.isClient or #spec.ropes = = 0 then\n                SpecializationUtil.removeEventListener( self , "onLoadFinished" , Ropes )\n                SpecializationUtil.removeEventListener( self , "onPostUpdate" , Ropes )\n            end\n        end\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"onloadfinished",children:"onLoadFinished"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on load finished"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onLoadFinished(table savegame)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"table"}),(0,t.jsx)(n.th,{children:"savegame"}),(0,t.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function Ropes:onLoadFinished(savegame)\n    self:updateRopes( 9999 )\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"onpostupdate",children:"onPostUpdate"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on post update"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onPostUpdate(float dt, boolean isActiveForInput, boolean isSelected, )"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"float"}),(0,t.jsx)(n.th,{children:"dt"}),(0,t.jsx)(n.th,{children:"time since last call in ms"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"boolean"}),(0,t.jsx)(n.td,{children:"isActiveForInput"}),(0,t.jsx)(n.td,{children:"true if vehicle is active for input"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"boolean"}),(0,t.jsx)(n.td,{children:"isSelected"}),(0,t.jsx)(n.td,{children:"true if vehicle is selected"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"isSelected"}),(0,t.jsx)(n.td,{})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function Ropes:onPostUpdate(dt, isActiveForInput, isActiveForInputIgnoreSelection, isSelected)\n    self:updateRopes(dt)\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"onupdate",children:"onUpdate"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on update"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onUpdate(float dt, boolean isActiveForInput, boolean isSelected, )"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"float"}),(0,t.jsx)(n.th,{children:"dt"}),(0,t.jsx)(n.th,{children:"time since last call in ms"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"boolean"}),(0,t.jsx)(n.td,{children:"isActiveForInput"}),(0,t.jsx)(n.td,{children:"true if vehicle is active for input"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"boolean"}),(0,t.jsx)(n.td,{children:"isSelected"}),(0,t.jsx)(n.td,{children:"true if vehicle is selected"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"isSelected"}),(0,t.jsx)(n.td,{})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function Ropes:onUpdate(dt, isActiveForInput, isActiveForInputIgnoreSelection, isSelected)\n    -- old function for backwards compatibility\n        Ropes.onPostUpdate( self , dt, isActiveForInput, isActiveForInputIgnoreSelection, isSelected)\n    end\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Checks if all prerequisite specializations are loaded"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"prerequisitesPresent(table specializations)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"table"}),(0,t.jsx)(n.th,{children:"specializations"}),(0,t.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"table"}),(0,t.jsx)(n.th,{children:"hasPrerequisite"}),(0,t.jsx)(n.th,{children:"true if all prerequisite specializations are loaded"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function Ropes.prerequisitesPresent(specializations)\n    return true\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function Ropes.registerEventListeners(vehicleType)\n    SpecializationUtil.registerEventListener(vehicleType, "onLoad" , Ropes )\n    SpecializationUtil.registerEventListener(vehicleType, "onLoadFinished" , Ropes )\n    SpecializationUtil.registerEventListener(vehicleType, "onPostUpdate" , Ropes )\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function Ropes.registerFunctions(vehicleType)\n    SpecializationUtil.registerFunction(vehicleType, "loadAdjusterNode" , Ropes.loadAdjusterNode)\n    SpecializationUtil.registerFunction(vehicleType, "updateRopes" , Ropes.updateRopes)\n    SpecializationUtil.registerFunction(vehicleType, "updateAdjusterNodes" , Ropes.updateAdjusterNodes)\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"updateadjusternodes",children:"updateAdjusterNodes"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"updateAdjusterNodes()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"adjusterNodes"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function Ropes:updateAdjusterNodes(adjusterNodes)\n    local xRet, yRet, zRet = 0 , 0 , 0\n    for _, adjusterNode in pairs(adjusterNodes) do\n        if adjusterNode.rotationAxis ~ = nil and adjusterNode.rotationRange ~ = nil then\n            local rotations = { getRotation(adjusterNode.node) }\n            local rot = rotations[adjusterNode.rotationAxis]\n            local alpha = math.max( 0 , math.min( 1 , (rot - adjusterNode.rotationRange[ 1 ]) / (adjusterNode.rotationRange[ 2 ] - adjusterNode.rotationRange[ 1 ]) ))\n            local x, y, z = MathUtil.vector3ArrayLerp(adjusterNode.minTargetParameters, adjusterNode.maxTargetParameters, alpha)\n            xRet, yRet, zRet = xRet + x, yRet + y, zRet + z\n        elseif adjusterNode.translationAxis ~ = nil and adjusterNode.translationRange ~ = nil then\n                local translations = { getTranslation(adjusterNode.node) }\n                local trans = translations[adjusterNode.translationAxis]\n                local alpha = math.max( 0 , math.min( 1 , (trans - adjusterNode.translationRange[ 1 ]) / (adjusterNode.translationRange[ 2 ] - adjusterNode.translationRange[ 1 ]) ))\n                local x, y, z = MathUtil.vector3ArrayLerp(adjusterNode.minTargetParameters, adjusterNode.maxTargetParameters, alpha)\n                xRet, yRet, zRet = xRet + x, yRet + y, zRet + z\n            end\n        end\n\n        return xRet, yRet, zRet\n    end\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"updateropes",children:"updateRopes"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"updateRopes()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"dt"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function Ropes:updateRopes(dt)\n    local spec = self.spec_ropes\n    for _, rope in pairs(spec.ropes) do\n        local x, y, z = self:updateAdjusterNodes(rope.baseParameterAdjusters)\n        setShaderParameter(rope.baseNode, "cv0" , rope.baseParameters[ 1 ] + x, rope.baseParameters[ 2 ] + y, rope.baseParameters[ 3 ] + z, 0 , false )\n\n        x, y, z = localToLocal(rope.targetNode, rope.baseNode, 0 , 0 , 0 )\n        setShaderParameter(rope.baseNode, "cv2" , 0 , 0 , 0 , 0 , false )\n        setShaderParameter(rope.baseNode, "cv3" , x, y, z, 0 , false )\n\n        x, y, z = self:updateAdjusterNodes(rope.targetParameterAdjusters)\n        x, y, z = localToLocal(rope.targetNode, rope.baseNode, rope.targetParameters[ 1 ] + x, rope.targetParameters[ 2 ] + y, rope.targetParameters[ 3 ] + z)\n        setShaderParameter(rope.baseNode, "cv4" , x,y,z, 0 , false )\n    end\nend\n\n'})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},28453(e,n,r){r.d(n,{R:()=>a,x:()=>l});var s=r(96540);const t={},i=s.createContext(t);function a(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);