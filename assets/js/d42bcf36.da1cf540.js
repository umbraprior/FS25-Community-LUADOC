"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[60643],{7235(e,n,l){l.r(n),l.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>r});const s=JSON.parse('{"id":"script/Graphics/HumanModel","title":"HumanModel","description":"HumanModel","source":"@site/../docs/script/Graphics/HumanModel.md","sourceDirName":"script/Graphics","slug":"/script/Graphics/HumanModel","permalink":"/FS25-Community-LUADOC/script/Graphics/HumanModel","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"HumanGraphicsComponentState","permalink":"/FS25-Community-LUADOC/script/Graphics/HumanGraphicsComponentState"},"next":{"title":"HumanSounds","permalink":"/FS25-Community-LUADOC/script/Graphics/HumanSounds"}}');var i=l(74848),t=l(28453);const o={},a=void 0,d={},r=[{value:"HumanModel",id:"humanmodel",level:2},{value:"debugDraw",id:"debugdraw",level:3},{value:"getVisibility",id:"getvisibility",level:3},{value:"load",id:"load",level:3},{value:"loadFileFinished",id:"loadfilefinished",level:3},{value:"loadFromXMLFileAsync",id:"loadfromxmlfileasync",level:3},{value:"new",id:"new",level:3},{value:"onAllModelPartsLoaded",id:"onallmodelpartsloaded",level:3},{value:"registerXMLPaths",id:"registerxmlpaths",level:3},{value:"setVisibility",id:"setvisibility",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"humanmodel",children:"HumanModel"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"A player model with sounds"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Functions"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#debugdraw",children:"debugDraw"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getvisibility",children:"getVisibility"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#load",children:"load"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#loadfilefinished",children:"loadFileFinished"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#loadfromxmlfileasync",children:"loadFromXMLFileAsync"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#new",children:"new"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onallmodelpartsloaded",children:"onAllModelPartsLoaded"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#registerxmlpaths",children:"registerXMLPaths"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#setvisibility",children:"setVisibility"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"debugdraw",children:"debugDraw"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Displays the debug information."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"debugDraw(float x, float y, float textSize)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"float"}),(0,i.jsx)(n.th,{children:"x"}),(0,i.jsx)(n.th,{children:"The x position on the screen to begin drawing the values."})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"float"}),(0,i.jsx)(n.td,{children:"y"}),(0,i.jsx)(n.td,{children:"The y position on the screen to begin drawing the values."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"float"}),(0,i.jsx)(n.td,{children:"textSize"}),(0,i.jsx)(n.td,{children:"The height of the text."})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"float"}),(0,i.jsx)(n.th,{children:"y"}),(0,i.jsx)(n.th,{children:"The y position on the screen after the entire debug info was drawn."})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function HumanModel:debugDraw(x, y, textSize)\n\n    local function drawBones(boneNode, parentX, parentY, parentZ)\n\n        -- local boneName = getName(boneNode)\n        -- DebugUtil.drawDebugNode(boneNode, boneName, false, nil)\n        local boneX, boneY, boneZ = getWorldTranslation(boneNode)\n        drawDebugLine(parentX, parentY, parentZ, 0 , 0 , 0 , boneX, boneY, boneZ, 1 , 0 , 0 , false )\n\n        for i = 0 , getNumOfChildren(boneNode) - 1 do\n            drawBones(getChildAt(boneNode, i), boneX, boneY, boneZ)\n        end\n    end\n\n    if self.skeleton ~ = nil then\n        local boneX, boneY, boneZ = getWorldTranslation(getChildAt( self.skeleton, 0 ))\n        drawBones(getChildAt( self.skeleton, 0 ), boneX, boneY, boneZ)\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getvisibility",children:"getVisibility"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Gets the visibility of the model."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getVisibility()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"float"}),(0,i.jsx)(n.th,{children:"isVisible"}),(0,i.jsx)(n.th,{children:"True if the model is visible; otherwise false."})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function HumanModel:getVisibility()\n    return getVisibility( self.rootNode)\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"load",children:"load"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Load player model, async."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"load(string xmlFilename, boolean isRealPlayer, boolean isOwner, boolean isAnimated, function asyncCallbackFunction,\ntable asyncCallbackObject, table asyncCallbackArguments)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"string"}),(0,i.jsx)(n.th,{children:"xmlFilename"}),(0,i.jsx)(n.th,{children:"XML filename"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:"isRealPlayer"}),(0,i.jsx)(n.td,{children:"false if player is in a vehicle"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:"isOwner"}),(0,i.jsx)(n.td,{children:"true if this is a client that owns the player"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:"isAnimated"}),(0,i.jsx)(n.td,{children:"true if animations should be loaded"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"function"}),(0,i.jsx)(n.td,{children:"asyncCallbackFunction"}),(0,i.jsx)(n.td,{children:"function to call after loading success of failure. Arguments: object, result true/false, arguments"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"table"}),(0,i.jsx)(n.td,{children:"asyncCallbackObject"}),(0,i.jsx)(n.td,{children:"call receiver"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"table"}),(0,i.jsx)(n.td,{children:"asyncCallbackArguments"}),(0,i.jsx)(n.td,{children:"Arguments passed to the callback"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function HumanModel:load(xmlFilename, isRealPlayer, isOwner, isAnimated, asyncCallbackFunction, asyncCallbackObject, asyncCallbackArguments)\n\n    self.xmlFile = XMLFile.loadIfExists( "playerXML" , xmlFilename, PlayerSystem.xmlSchema)\n    if self.xmlFile = = nil then\n        asyncCallbackFunction(asyncCallbackObject, false , asyncCallbackArguments)\n        return\n    end\n\n    local function onModelLoadedCallback(_, loadingState)\n        if self.xmlFile ~ = nil then\n            self.xmlFile:delete()\n            self.xmlFile = nil\n        end\n        self:updateVisibility()\n\n        if asyncCallbackFunction ~ = nil then\n            asyncCallbackFunction(asyncCallbackObject, loadingState, asyncCallbackArguments)\n        end\n    end\n    self:loadFromXMLFileAsync( self.xmlFile, isRealPlayer, isOwner, isAnimated, onModelLoadedCallback)\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"loadfilefinished",children:"loadFileFinished"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Async result of i3d loading"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"loadFileFinished()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"rootNode"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"failedReason"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"arguments"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function HumanModel:loadFileFinished(rootNode, failedReason, arguments)\n\n    -- If no root node exists, it means the file failed to load, so log the error and call the callback.\n    if rootNode = = 0 then\n        Logging.error( "Unable to load player model %q" , self.i3dFilename)\n        self.asyncLoadCallbackFunction( self.asyncLoadCallbackObject, HumanModelLoadingState.FAILED, self.asyncLoadCallbackArguments)\n        return\n    end\n\n    -- Load the player xml file.\n    local xmlFile = arguments.xmlFile\n    if xmlFile = = nil or g_xmlManager:getFileByHandle(xmlFile:getHandle()) = = nil then\n        Logging.error( "Unable to load player xml %q" , self.xmlFilename)\n        self.asyncLoadCallbackFunction( self.asyncLoadCallbackObject, HumanModelLoadingState.FAILED, self.asyncLoadCallbackArguments)\n        return\n    end\n\n    --#profile RemoteProfiler.zoneBeginN("HumanModel:loadFileFinished")\n\n    self:reset()\n\n    -- Load the components and mappings.\n    I3DUtil.loadI3DComponents(rootNode, self.components)\n    I3DUtil.loadI3DMapping(xmlFile, "player" , self.components, self.i3dMappings)\n\n    self.rootNode = rootNode\n\n    -- Load the animation clips.\n    local animationFilename = xmlFile:getValue( "player.animation#filename" )\n    if animationFilename ~ = nil then\n        self.animationFilename = Utils.getFilename(animationFilename, self.baseDirectory)\n    else\n            Logging.xmlWarning(xmlFile, "No animation filename defined at %q" , "player.animation#filename" )\n        end\n\n        -- Load the animation clips.\n        local soundFilename = xmlFile:getValue( "player.sounds#filename" )\n        if soundFilename ~ = nil then\n            self.soundFilename = Utils.getFilename(soundFilename, self.baseDirectory)\n        else\n                Logging.xmlWarning(xmlFile, "No sounds filename defined at %q" , "player.sound#filename" )\n            end\n\n            -- Load the skeleton and mesh nodes.\n            self.skeleton = xmlFile:getValue( "player.model.skeleton#node" , nil , self.components, self.i3dMappings)\n            if self.skeleton = = nil then\n                Logging.devError( "Failed to find skeleton root node in \'%s\'" , self.i3dFilename)\n            end\n\n            self.mesh = xmlFile:getValue( "player.model.mesh#node" , nil , self.components, self.i3dMappings)\n            if self.mesh = = nil then\n                Logging.devError( "Failed to find player mesh in \'%s\'" , self.i3dFilename)\n            end\n\n            -- Load the nodes needed for linking things together.\n                self.thirdPersonHipsNode = xmlFile:getValue( "player.model.hips#node" , nil , self.components, self.i3dMappings)\n                self.thirdPersonSpineNode = xmlFile:getValue( "player.model.spine#node" , nil , self.components, self.i3dMappings)\n                self.thirdPersonSpineNodeOffset = xmlFile:getValue( "player.model.spine#offset" , nil , true )\n                self.thirdPersonSuspensionNode = xmlFile:getValue( "player.model.suspension#node" , nil , self.components, self.i3dMappings)\n                self.thirdPersonLeftHandNode = xmlFile:getValue( "player.model.leftHand#node" , nil , self.components, self.i3dMappings)\n                self.thirdPersonRightHandNode = xmlFile:getValue( "player.model.rightHand#node" , nil , self.components, self.i3dMappings)\n                self.thirdPersonLeftFootNode = xmlFile:getValue( "player.model.leftFoot#node" , nil , self.components, self.i3dMappings)\n                self.thirdPersonRightFootNode = xmlFile:getValue( "player.model.rightFoot#node" , nil , self.components, self.i3dMappings)\n                self.thirdPersonHeadNode = xmlFile:getValue( "player.model.head#node" , nil , self.components, self.i3dMappings)\n\n                -- Relink only after the lights and cameras are loaded:indexing changes\n                if self.mesh ~ = nil then\n                    -- link(self.rootNode, self.mesh)\n                    setClipDistance( self.mesh, 200 )\n                end\n\n                -- IK Chains\n                if self.initIKChains then\n                    self:loadIKChains(xmlFile, rootNode, arguments.isRealPlayer)\n                end\n\n                if arguments.isRealPlayer then\n\n                    -- Load the animation root node.\n                    self.animRootThirdPerson = xmlFile:getValue( "player.model.animationRoot#node" , nil , self.components, self.i3dMappings)\n                    if self.animRootThirdPerson = = nil then\n                        Logging.devError( "Failed to find animation root node in \'%s\'" , self.i3dFilename)\n                        self.asyncLoadCallbackFunction( self.asyncLoadCallbackObject, HumanModelLoadingState.INVALID_CONTENT, self.asyncLoadCallbackArguments)\n                        --#profile RemoteProfiler.zoneEnd()\n                        return\n                    end\n\n                    self.skeletonRootNode = createTransformGroup( "player_skeletonRootNode" )\n\n                    link(getRootNode(), self.rootNode)\n                    link( self.rootNode, self.skeletonRootNode)\n\n                    if self.animRootThirdPerson ~ = nil then\n                        link( self.skeletonRootNode, self.animRootThirdPerson)\n                        if self.skeleton ~ = nil then\n                            link( self.animRootThirdPerson, self.skeleton)\n                        end\n                    end\n\n                    -- Fx\n                    self.particleSystemsInformation.systems = {\n                    swim = { } ,\n                    plunge = { }\n                    }\n\n                    self.particleSystemsInformation.swimNode = createTransformGroup( "swimFXNode" )\n                    self.particleSystemsInformation.plungeNode = createTransformGroup( "plungeFXNode" )\n                    link(getRootNode(), self.particleSystemsInformation.swimNode)\n                    link(getRootNode(), self.particleSystemsInformation.plungeNode)\n\n                    ParticleUtil.loadParticleSystem(xmlFile:getHandle(), self.particleSystemsInformation.systems.swim, "player.particleSystems.swim" , self.particleSystemsInformation.swimNode, false , nil , self.baseDirectory)\n                    ParticleUtil.loadParticleSystem(xmlFile:getHandle(), self.particleSystemsInformation.systems.plunge, "player.particleSystems.plunge" , self.particleSystemsInformation.plungeNode, false , nil , self.baseDirectory)\n                else\n                        -- Will be re-linked in linkTo:\n                        if not arguments.isAnimated then\n                            local linkNode = createTransformGroup( "characterLinkNode" )\n                            link( self.rootNode, linkNode)\n                            link(linkNode, self.skeleton)\n\n                            local ox, oy, oz = 0 , 0 , 0\n                            if self.thirdPersonSpineNodeOffset ~ = nil then\n                                ox, oy, oz = - self.thirdPersonSpineNodeOffset[ 1 ], - self.thirdPersonSpineNodeOffset[ 2 ], - self.thirdPersonSpineNodeOffset[ 3 ]\n                            end\n\n                            local x, y, z = localToLocal( self.thirdPersonSpineNode, self.skeleton, ox, oy, oz)\n                            setTranslation(linkNode, - x, - y, - z)\n                        else\n                                link( self.rootNode, self.skeleton)\n                            end\n                        end\n\n                        self.faceFocusNode = createTransformGroup( "player_faceFocusNode" )\n                        setTranslation( self.faceFocusNode, 0 , 1.8 , 0 )\n                        link( self.rootNode, self.faceFocusNode)\n\n                        self.isLoaded = true\n                        self.isBaseFullyLoaded = true\n                        self:updateVisibility()\n\n                        self.asyncLoadCallbackFunction( self.asyncLoadCallbackObject, HumanModelLoadingState.OK, self.asyncLoadCallbackArguments)\n\n                        --#profile RemoteProfiler.zoneEnd()\n                    end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"loadfromxmlfileasync",children:"loadFromXMLFileAsync"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Asynchronously loads the player model from the given pre-opened xml file. Does not handle file closure."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"loadFromXMLFileAsync(XMLFile xmlFile, boolean isRealPlayer, boolean isOwner, boolean isAnimated, function\nasyncCallbackFunction, table asyncCallbackObject, table asyncCallbackArguments)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"XMLFile"}),(0,i.jsx)(n.th,{children:"xmlFile"}),(0,i.jsx)(n.th,{children:"The XML file to load from."})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:"isRealPlayer"}),(0,i.jsx)(n.td,{children:"false if player is in a vehicle"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:"isOwner"}),(0,i.jsx)(n.td,{children:"true if this is a client that owns the player"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:"isAnimated"}),(0,i.jsx)(n.td,{children:"true if animations should be loaded"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"function"}),(0,i.jsx)(n.td,{children:"asyncCallbackFunction"}),(0,i.jsx)(n.td,{children:"function to call after loading success or failure. Arguments: object, result true/false, arguments"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"table"}),(0,i.jsx)(n.td,{children:"asyncCallbackObject"}),(0,i.jsx)(n.td,{children:"call receiver"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"table"}),(0,i.jsx)(n.td,{children:"asyncCallbackArguments"}),(0,i.jsx)(n.td,{children:"Arguments passed to the callback"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function HumanModel:loadFromXMLFileAsync(xmlFile, isRealPlayer, isOwner, isAnimated, asyncCallbackFunction, asyncCallbackObject, asyncCallbackArguments)\n\n    self.xmlFilename = xmlFile:getFilename()\n    self.customEnvironment, self.baseDirectory = Utils.getModNameAndBaseDirectory( self.xmlFilename)\n\n    -- Find the filename of the player\n    local i3dFilename = xmlFile:getValue( "player.filename" , nil )\n    self.i3dFilename = Utils.getFilename(i3dFilename, self.baseDirectory)\n\n    self.isRealPlayer = isRealPlayer\n\n    self.isStyleFullyLoaded = false\n    self.isBaseFullyLoaded = false\n    self:updateVisibility()\n\n    -- Load the player i3d\n    self.asyncLoadCallbackFunction, self.asyncLoadCallbackObject, self.asyncLoadCallbackArguments = asyncCallbackFunction, asyncCallbackObject, asyncCallbackArguments\n\n    local oldSharedLoadRequestId = self.sharedLoadRequestId\n\n    for _, sharedLoadRequestId in pairs( self.sharedLoadRequestIds) do\n        g_i3DManager:releaseSharedI3DFile(sharedLoadRequestId)\n    end\n    table.clear( self.sharedLoadRequestIds)\n\n    self.sharedLoadRequestId = g_i3DManager:loadSharedI3DFileAsync( self.i3dFilename, false , false , self.loadFileFinished, self , { xmlFile = xmlFile, isRealPlayer = isRealPlayer, isOwner = isOwner, isAnimated = isAnimated } )\n\n    if oldSharedLoadRequestId ~ = nil then\n        g_i3DManager:releaseSharedI3DFile(oldSharedLoadRequestId)\n    end\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"new",children:"new"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Creating manager"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"new()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"customMt"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"instance"}),(0,i.jsx)(n.th,{children:"instance of object"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function HumanModel.new(customMt)\n    local self = setmetatable( { } , customMt or HumanModel _mt)\n\n    -- Is true after this model has been deleted.\n    self.isDeleted = false\n\n    self.isLoaded = false\n    self.sharedLoadRequestIds = { }\n\n    -- The table of model part node ids keyed by filename.This is only used for async loading, and is otherwise empty.\n        self.modelParts = { }\n\n        self.rootNode = nil\n\n        self.skeleton = nil\n\n        self.initIKChains = true\n\n        self.mesh = nil\n\n        self.isParentVisible = true\n        self.isBaseFullyLoaded = false\n        self.isStyleFullyLoaded = false\n        self.isVisible = true\n\n        self.thirdPersonHeadNode = nil\n        self.thirdPersonHipsNode = nil\n        self.thirdPersonSpineNode = nil\n        self.thirdPersonLeftHandNode = nil\n        self.thirdPersonRightHandNode = nil\n        self.thirdPersonLeftFootNode = nil\n        self.thirdPersonRightFootNode = nil\n        self.thirdPersonSuspensionNode = nil\n\n        -- The nodes for any style models.\n            self.faceNode = nil\n            self.hairNode = nil\n            self.headgearNode = nil\n            self.glassesNode = nil\n            self.facegearNode = nil\n            self.beardNode = nil\n            self.topNode = nil\n            self.glovesNode = nil\n            self.bottomNode = nil\n            self.footwearNode = nil\n            self.onepieceNode = nil\n\n            -- The mappings of animation clip names to source clip names.\n            self.animationClipMappings = { }\n\n            self.ikChains = { }\n\n            self.i3dFilename = nil\n\n            -- The i3d mappings into the root node.\n            self.i3dMappings = { }\n\n            -- The components of the node.\n            self.components = { }\n\n            -- PARTICLES\n            self.particleSystemsInformation = {\n            systems = {\n            swim = { } ,\n            plunge = { }\n            } ,\n            swimNode = nil ,\n            plungeNode = nil\n            }\n\n            return self\n        end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"onallmodelpartsloaded",children:"onAllModelPartsLoaded"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Called from setStyleAsync and onModelPartLoaded when all model parts have been loaded."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onAllModelPartsLoaded()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"playerStyle"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function HumanModel:onAllModelPartsLoaded(playerStyle)\n\n    -- The load is only successful if the model was not deleted in the meantime.\n        local loadSuccess = not self.isDeleted\n\n        -- Apply the style to the model.\n        if loadSuccess then\n            self:applyFromStyle(playerStyle, false )\n            self.isStyleFullyLoaded = true\n            self:updateVisibility()\n        end\n\n        -- Delete the model parts, since the style makes copies of anything it needs.\n        for filename, node in pairs( self.modelParts) do\n            if node ~ = 0 then\n                delete(node)\n            end\n            self.modelParts[filename] = nil\n        end\n\n        -- If there is a callback for the style setting, call it.\n            if self.setStyleFinishCallback ~ = nil then\n                local callbackTarget = self.setStyleFinishCallbackTarget\n                local callback = self.setStyleFinishCallback\n                local callbackArguments = self.setStyleFinishCallbackArguments\n\n                self.setStyleFinishCallbackTarget = nil\n                self.setStyleFinishCallback = nil\n                self.setStyleFinishCallbackArguments = nil\n\n                callback(callbackTarget, loadSuccess and HumanModelLoadingState.OK or HumanModelLoadingState.FAILED, callbackArguments)\n            end\n\n            self:updateVisibility()\n        end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"registerxmlpaths",children:"registerXMLPaths"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Registers xml paths within the given schema."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"registerXMLPaths(XMLSchema xmlSchema, string modelKey)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"XMLSchema"}),(0,i.jsx)(n.th,{children:"xmlSchema"}),(0,i.jsx)(n.th,{children:"The schema file to use."})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"modelKey"}),(0,i.jsx)(n.td,{children:"The root key of the data within the XML file."})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function HumanModel.registerXMLPaths(xmlSchema, baseKey)\n\n    -- Register i3d mappings node.\n    I3DUtil.registerI3dMappingXMLPaths(xmlSchema, baseKey)\n\n    xmlSchema:register(XMLValueType.NODE_INDEX, baseKey .. ".model.mesh#node" , "The index of the mesh node" , nil , true )\n    xmlSchema:register(XMLValueType.NODE_INDEX, baseKey .. ".model.skeleton#node" , "The index of the skeleton root node" , nil , true )\n    xmlSchema:register(XMLValueType.NODE_INDEX, baseKey .. ".model.animationRoot#node" , "The index of the animation root node" , nil , true )\n    xmlSchema:register(XMLValueType.NODE_INDEX, baseKey .. ".model.hips#node" , "The index of the hips node" , nil , true )\n    xmlSchema:register(XMLValueType.NODE_INDEX, baseKey .. ".model.suspension#node" , "The index of the suspension node" , nil , true )\n    xmlSchema:register(XMLValueType.NODE_INDEX, baseKey .. ".model.leftHand#node" , "The index of the left hand node" , nil , true )\n    xmlSchema:register(XMLValueType.NODE_INDEX, baseKey .. ".model.rightHand#node" , "The index of the right hand node" , nil , true )\n    xmlSchema:register(XMLValueType.NODE_INDEX, baseKey .. ".model.leftFoot#node" , "The index of the left foot node" , nil , true )\n    xmlSchema:register(XMLValueType.NODE_INDEX, baseKey .. ".model.rightFoot#node" , "The index of the right foot node" , nil , true )\n    xmlSchema:register(XMLValueType.NODE_INDEX, baseKey .. ".model.head#node" , "The index of the head node" , nil , true )\n    xmlSchema:register(XMLValueType.NODE_INDEX, baseKey .. ".model.spine#node" , "The index of the spine node" , nil , true )\n    xmlSchema:register(XMLValueType.VECTOR_TRANS, baseKey .. ".model.spine#offset" , "The offset of the spine to the link node while loaded in a vehicle" , "0 0 0" )\n\n        xmlSchema:register(XMLValueType.STRING, baseKey .. ".sounds#filename" , "The path of the xml file for the sounds" , nil , true )\n            xmlSchema:register(XMLValueType.STRING, baseKey .. ".animation#filename" , "The path of the xml file for the animation" , nil , true )\n            end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"setvisibility",children:"setVisibility"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Sets whether or not the model should be visible."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"setVisibility(boolean isVisible)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"boolean"}),(0,i.jsx)(n.th,{children:"isVisible"}),(0,i.jsx)(n.th,{children:"True if the model should be visible; otherwise false."})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function HumanModel:setVisibility(isVisible)\n    self.isVisible = isVisible\n    self:updateVisibility()\nend\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453(e,n,l){l.d(n,{R:()=>o,x:()=>a});var s=l(96540);const i={},t=s.createContext(i);function o(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);