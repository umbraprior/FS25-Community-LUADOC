"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[41111],{28453(n,e,l){l.d(e,{R:()=>i,x:()=>c});var d=l(96540);const r={},s=d.createContext(r);function i(n){const e=d.useContext(s);return d.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:i(n.components),d.createElement(s.Provider,{value:e},n.children)}},44687(n,e,l){l.r(e),l.d(e,{assets:()=>t,contentTitle:()=>c,default:()=>x,frontMatter:()=>i,metadata:()=>d,toc:()=>a});const d=JSON.parse('{"id":"script/Placement/PlacementGrid2D","title":"PlacementGrid2D","description":"PlacementGrid2D","source":"@site/../docs/script/Placement/PlacementGrid2D.md","sourceDirName":"script/Placement","slug":"/script/Placement/PlacementGrid2D","permalink":"/FS25-Community-LUADOC/script/Placement/PlacementGrid2D","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"PalletSpawner","permalink":"/FS25-Community-LUADOC/script/Placement/PalletSpawner"},"next":{"title":"Player","permalink":"/FS25-Community-LUADOC/script/Player/"}}');var r=l(74848),s=l(28453);const i={},c=void 0,t={},a=[{value:"PlacementGrid2D",id:"placementgrid2d",level:2},{value:"blockAreaByBoundingBox",id:"blockareabyboundingbox",level:3},{value:"blockAreaLocal",id:"blockarealocal",level:3},{value:"delete",id:"delete",level:3},{value:"drawDebug",id:"drawdebug",level:3},{value:"new",id:"new",level:3},{value:"reset",id:"reset",level:3},{value:"updateBlockedArea",id:"updateblockedarea",level:3}];function o(n){const e={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h2,{id:"placementgrid2d",children:"PlacementGrid2D"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Creates a 2d grid based on a node, width (X-axis) and length (Z-axis)\nCreates vertical lines for blocked areas with the given spacing\nThese lines a have a minX and maxX value to define the extend of the blocked area\nTo get a free position we loop over the whole area in z-axis. The spacing defines the stepsize\nWe now check in each iteration if there is a blocking line. If so we check upper and lower side if there's enough\nspace\nIf there is enough space we mark the current point as available for placing. If not we reset the point\n____________________\n| |\n| ##### |\n| ##### | width\n| ##### |\n|____________________|\nlength\nModes:\nSIDES (Places the objects at the edges)\n____________________\n|##### ##### ##### |\n|##### ##### ##### |\n| |\n| |\n|##### ##### |\n|##### #####_________|\nFILL (Places the objects top down)\n____________________\n|##### ##### ##### |\n|##### ##### ##### |\n| |\n|##### ##### |\n|##### ##### |\n|____________________|"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Functions"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#blockareabyboundingbox",children:"blockAreaByBoundingBox"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#blockarealocal",children:"blockAreaLocal"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#delete",children:"delete"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#drawdebug",children:"drawDebug"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#new",children:"new"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#reset",children:"reset"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"#updateblockedarea",children:"updateBlockedArea"})}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"blockareabyboundingbox",children:"blockAreaByBoundingBox"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"blockAreaByBoundingBox()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"x"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"y"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"z"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"dirX"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"dirY"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"dirZ"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"upX"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"upY"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"upZ"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"extendX"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"extendY"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"extendZ"})]})]})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function PlacementGrid2D:blockAreaByBoundingBox(x, y, z, dirX, dirY, dirZ, upX, upY, upZ, extendX, extendY, extendZ)\n    local x1, _, z1 = worldToLocal( self.node, MathUtil.transform(x, y, z, dirX, dirY, dirZ, upX, upY, upZ, - extendX, - extendY, - extendZ))\n    local x2, _, z2 = worldToLocal( self.node, MathUtil.transform(x, y, z, dirX, dirY, dirZ, upX, upY, upZ, extendX, - extendY, - extendZ))\n    local x3, _, z3 = worldToLocal( self.node, MathUtil.transform(x, y, z, dirX, dirY, dirZ, upX, upY, upZ, extendX, - extendY, extendZ))\n    local x4, _, z4 = worldToLocal( self.node, MathUtil.transform(x, y, z, dirX, dirY, dirZ, upX, upY, upZ, - extendX, - extendY, extendZ))\n    local x5, _, z5 = worldToLocal( self.node, MathUtil.transform(x, y, z, dirX, dirY, dirZ, upX, upY, upZ, - extendX, extendY, - extendZ))\n    local x6, _, z6 = worldToLocal( self.node, MathUtil.transform(x, y, z, dirX, dirY, dirZ, upX, upY, upZ, extendX, extendY, - extendZ))\n    local x7, _, z7 = worldToLocal( self.node, MathUtil.transform(x, y, z, dirX, dirY, dirZ, upX, upY, upZ, extendX, extendY, extendZ))\n    local x8, _, z8 = worldToLocal( self.node, MathUtil.transform(x, y, z, dirX, dirY, dirZ, upX, upY, upZ, - extendX, extendY, extendZ))\n\n    local minX = math.max( 0 , math.min(x1, x2, x3, x4, x5, x6, x7, x8))\n    local maxX = math.min( self.width, math.max(x1, x2, x3, x4, x5, x6, x7, x8))\n    local minZ = math.max( 0 , math.min(z1, z2, z3, z4, z5, z6, z7, z8))\n    local maxZ = math.min( self.length, math.max(z1, z2, z3, z4, z5, z6, z7, z8))\n\n    self:updateBlockedArea(minX, maxX, minZ, maxZ)\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"blockarealocal",children:"blockAreaLocal"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"blockAreaLocal()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"x"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"z"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"width"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"length"})]})]})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function PlacementGrid2D:blockAreaLocal(x, z, width, length)\n    local minX = x\n    local maxX = x + width\n    local minZ = z\n    local maxZ = z + length\n\n    self:updateBlockedArea(minX, maxX, minZ, maxZ)\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"delete",children:"delete"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"delete()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function PlacementGrid2D:delete()\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"drawdebug",children:"drawDebug"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"drawDebug()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function PlacementGrid2D:drawDebug()\n    local x1, y1, z1 = localToWorld( self.node, 0 , 0 , 0 )\n    local x2, y2, z2 = localToWorld( self.node, self.width, 0 , 0 )\n    local x3, y3, z3 = localToWorld( self.node, self.width, 0 , self.length)\n    local x4, y4, z4 = localToWorld( self.node, 0 , 0 , self.length)\n\n    drawDebugLine(x1, y1, z1, 1 , 1 , 1 , x2, y2, z2, 1 , 1 , 1 )\n    drawDebugLine(x2, y2, z2, 1 , 1 , 1 , x3, y3, z3, 1 , 1 , 1 )\n    drawDebugLine(x3, y3, z3, 1 , 1 , 1 , x4, y4, z4, 1 , 1 , 1 )\n    drawDebugLine(x4, y4, z4, 1 , 1 , 1 , x1, y1, z1, 1 , 1 , 1 )\n\n    for _, blockedArea in pairs( self.blockedAreas) do\n        local sx1, sy1, sz1 = localToWorld( self.node, blockedArea.minX, 0 , blockedArea.offsetZ)\n        local sx2, sy2, sz2 = localToWorld( self.node, blockedArea.maxX, 0 , blockedArea.offsetZ)\n        if blockedArea.maxX > blockedArea.minX then\n            local csx1, csy1, csz1 = localToWorld( self.node, blockedArea.minX, 0 , blockedArea.zStart)\n            local csx2, csy2, csz2 = localToWorld( self.node, blockedArea.maxX, 0 , blockedArea.zStart)\n            drawDebugLine(csx1, csy1, csz1, 1 , 1 , 1 , csx2, csy2, csz2, 1 , 1 , 1 )\n            local cex1, cey1, cez1 = localToWorld( self.node, blockedArea.minX, 0 , blockedArea.zEnd)\n            local cex2, cey2, cez2 = localToWorld( self.node, blockedArea.maxX, 0 , blockedArea.zEnd)\n            drawDebugLine(cex1, cey1, cez1, 1 , 1 , 1 , cex2, cey2, cez2, 1 , 1 , 1 )\n\n            drawDebugLine(sx1, sy1, sz1, 1 , 0 , 0 , sx2, sy2, sz2, 1 , 0 , 0 )\n        end\n    end\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"new",children:"new"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"new()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"node"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"width"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"length"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"spacing"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"mode"})]})]})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function PlacementGrid2D.new(node, width, length, spacing, mode)\n    local self = setmetatable( { } , PlacementGrid2D _mt)\n\n    self.node = node\n    self.width = width\n    self.length = length\n    self.spacing = spacing\n\n    self.placementMode = mode or PlacementGrid2D.MODE_SIDES\n\n    self.blockedAreas = { }\n\n    self.lowerPos = { x = 0 , z = 0 , isValid = false }\n    self.upperPos = { x = 0 , z = 0 , isValid = false }\n\n    return self\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"reset",children:"reset"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"reset()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function PlacementGrid2D:reset()\n    self.blockedAreas = { }\nend\n\n"})}),"\n",(0,r.jsx)(e.h3,{id:"updateblockedarea",children:"updateBlockedArea"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Description"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"updateBlockedArea()"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"any"}),(0,r.jsx)(e.th,{children:"minX"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"maxX"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"minZ"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"any"}),(0,r.jsx)(e.td,{children:"maxZ"})]})]})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Code"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-lua",children:"function PlacementGrid2D:updateBlockedArea(minX, maxX, minZ, maxZ)\n    local startIndex = math.max( 1 , math.ceil(minZ / self.spacing))\n    local endIndex = math.max( 0 , math.ceil(maxZ / self.spacing))\n\n    for i = startIndex, endIndex do\n        local blockedArea = self.blockedAreas[i]\n        if blockedArea = = nil then\n            local zStart = (i - 1 ) * self.spacing\n            local zEnd = i * self.spacing\n            local offsetZ = (zStart + zEnd) * 0.5\n\n            blockedArea = {\n            minX = self.width,\n            maxX = 0 ,\n            zStart = zStart,\n            zEnd = zEnd,\n            offsetZ = offsetZ\n            }\n\n            self.blockedAreas[i] = blockedArea\n        end\n\n        blockedArea.minX = math.min(blockedArea.minX, minX)\n        blockedArea.maxX = math.max(blockedArea.maxX, maxX)\n    end\nend\n\n"})})]})}function x(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(o,{...n})}):o(n)}}}]);