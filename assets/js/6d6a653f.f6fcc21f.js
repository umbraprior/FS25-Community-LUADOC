"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[14578],{28453(e,n,l){l.d(n,{R:()=>t,x:()=>r});var s=l(96540);const i={},a=s.createContext(i);function t(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(a.Provider,{value:n},e.children)}},46955(e,n,l){l.r(n),l.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"script/Specializations/AutoLoaderBales","title":"AutoLoaderBales","description":"AutoLoaderBales","source":"@site/../docs/script/Specializations/AutoLoaderBales.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/AutoLoaderBales","permalink":"/FS25-Community-LUADOC/script/Specializations/AutoLoaderBales","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"AutoLoader","permalink":"/FS25-Community-LUADOC/script/Specializations/AutoLoader"},"next":{"title":"BaleGrab","permalink":"/FS25-Community-LUADOC/script/Specializations/BaleGrab"}}');var i=l(74848),a=l(28453);const t={},r=void 0,o={},d=[{value:"AutoLoaderBales",id:"autoloaderbales",level:2},{value:"autoLoaderBalesTriggerCallback",id:"autoloaderbalestriggercallback",level:3},{value:"doAutoLoadBale",id:"doautoloadbale",level:3},{value:"getAutoLoadBaleTypeFromBale",id:"getautoloadbaletypefrombale",level:3},{value:"getIsBaleAutoLoadable",id:"getisbaleautoloadable",level:3},{value:"initSpecialization",id:"initspecialization",level:3},{value:"onBaleDeleted",id:"onbaledeleted",level:3},{value:"onDelete",id:"ondelete",level:3},{value:"onDeleteAutoLoaderBalesObject",id:"ondeleteautoloaderbalesobject",level:3},{value:"onLoad",id:"onload",level:3},{value:"onLoadFinished",id:"onloadfinished",level:3},{value:"onUpdate",id:"onupdate",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3},{value:"registerFunctions",id:"registerfunctions",level:3},{value:"registerOverwrittenFunctions",id:"registeroverwrittenfunctions",level:3},{value:"saveToXMLFile",id:"savetoxmlfile",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"autoloaderbales",children:"AutoLoaderBales"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Specialization to automatically load bales into a tool\nUse for straw blowers and mixer wagons on Platforms with automatic loading enabled"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Functions"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#autoloaderbalestriggercallback",children:"autoLoaderBalesTriggerCallback"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#doautoloadbale",children:"doAutoLoadBale"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getautoloadbaletypefrombale",children:"getAutoLoadBaleTypeFromBale"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getisbaleautoloadable",children:"getIsBaleAutoLoadable"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#initspecialization",children:"initSpecialization"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onbaledeleted",children:"onBaleDeleted"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#ondelete",children:"onDelete"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#ondeleteautoloaderbalesobject",children:"onDeleteAutoLoaderBalesObject"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onloadfinished",children:"onLoadFinished"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onupdate",children:"onUpdate"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#registeroverwrittenfunctions",children:"registerOverwrittenFunctions"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#savetoxmlfile",children:"saveToXMLFile"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"autoloaderbalestriggercallback",children:"autoLoaderBalesTriggerCallback"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Trigger callback"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"autoLoaderBalesTriggerCallback(integer triggerId, integer otherActorId, boolean onEnter, boolean onLeave, boolean\nonStay, integer otherShapeId)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"integer"}),(0,i.jsx)(n.th,{children:"triggerId"}),(0,i.jsx)(n.th,{children:"id of trigger"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"otherActorId"}),(0,i.jsx)(n.td,{children:"id of other actor"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:"onEnter"}),(0,i.jsx)(n.td,{children:"on enter"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:"onLeave"}),(0,i.jsx)(n.td,{children:"on leave"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:"onStay"}),(0,i.jsx)(n.td,{children:"on stay"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"otherShapeId"}),(0,i.jsx)(n.td,{children:"id of other shape"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function AutoLoaderBales:autoLoaderBalesTriggerCallback(triggerId, otherActorId, onEnter, onLeave, onStay, otherShapeId)\n    if otherActorId = = 0 then\n        return\n    end\n\n    local object = g_currentMission:getNodeObject(otherActorId)\n    if object = = nil then\n        return\n    end\n\n    if not object:isa( Bale ) or not g_currentMission.accessHandler:canFarmAccess( self:getActiveFarm(), object) or not object:getAllowPickup() then\n        return\n    end\n\n    local spec = self.spec_autoLoaderBales\n    if onEnter then\n        spec.balesInTrigger[object] = (spec.balesInTrigger[object] or 0 ) + 1\n        if spec.balesInTrigger[object] = = 1 then\n            object:addDeleteListener( self , AutoLoaderBales.onBaleDeleted)\n        end\n    else\n            spec.balesInTrigger[object] = (spec.balesInTrigger[object] or 0 ) - 1\n            if spec.balesInTrigger[object] < = 0 then\n                spec.balesInTrigger[object] = nil\n                object:removeDeleteListener( self , AutoLoaderBales.onBaleDeleted)\n            end\n        end\n    end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"doautoloadbale",children:"doAutoLoadBale"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"doAutoLoadBale()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"baleType"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"bale"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function AutoLoaderBales:doAutoLoadBale(baleType, bale)\n    local spec = self.spec_autoLoaderBales\n\n    if baleType.mountBale then\n        local x, y, z\n        if bale.isRoundbale then\n            x, y, z = baleType.offsetDirection[ 1 ] * spec.numMountedBales * bale.diameter, baleType.offsetDirection[ 2 ] * spec.numMountedBales * bale.diameter, baleType.offsetDirection[ 3 ] * spec.numMountedBales * bale.width\n        else\n                x, y, z = baleType.offsetDirection[ 1 ] * spec.numMountedBales * bale.width, baleType.offsetDirection[ 2 ] * spec.numMountedBales * bale.height, baleType.offsetDirection[ 3 ] * spec.numMountedBales * bale.length\n            end\n\n            bale:mountKinematic( self , baleType.spawnNode, x, y, z, 0 , 0 , 0 )\n            bale:setNeedsSaving( false )\n            spec.mountedBales[bale] = true\n            bale:addDeleteListener( self , AutoLoaderBales.onDeleteAutoLoaderBalesObject)\n\n            spec.loadedBaleType = baleType\n            spec.numMountedBales = spec.numMountedBales + 1\n        else\n                removeFromPhysics(bale.nodeId)\n\n                setTranslation(bale.nodeId, getWorldTranslation(baleType.spawnNode))\n                setWorldRotation(bale.nodeId, getWorldRotation(baleType.spawnNode))\n\n                addToPhysics(bale.nodeId)\n\n                local vx, vy, vz = getLinearVelocity( self:getParentComponent(baleType.spawnNode))\n                setLinearVelocity(bale.nodeId, vx, vy, vz)\n            end\n        end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getautoloadbaletypefrombale",children:"getAutoLoadBaleTypeFromBale"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getAutoLoadBaleTypeFromBale()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"bale"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function AutoLoaderBales:getAutoLoadBaleTypeFromBale(bale)\n    local spec = self.spec_autoLoaderBales\n    local baleFillType = bale:getFillType()\n\n    for i = 1 , #spec.baleTypes do\n        local baleType = spec.baleTypes[i]\n        if spec.loadedBaleType = = nil or baleType = = spec.loadedBaleType then\n            local fillTypeAllowed = #baleType.fillTypes = = 0\n            for j = 1 , #baleType.fillTypes do\n                if baleType.fillTypes[j] = = baleFillType then\n                    fillTypeAllowed = true\n                    break\n                end\n            end\n\n            if fillTypeAllowed then\n                if bale:getBaleMatchesSize(baleType.diameter, baleType.width, baleType.height, baleType.length) then\n                    return baleType\n                end\n            end\n        end\n    end\n\n    return nil\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getisbaleautoloadable",children:"getIsBaleAutoLoadable"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getIsBaleAutoLoadable()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"bale"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function AutoLoaderBales:getIsBaleAutoLoadable(bale)\n    if bale.mountObject ~ = nil then\n        return false\n    end\n\n    return true\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"initspecialization",children:"initSpecialization"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"initSpecialization()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function AutoLoaderBales.initSpecialization()\n    local schema = Vehicle.xmlSchema\n    schema:setXMLSpecializationType( "AutoLoaderBales" )\n\n    schema:register(XMLValueType.NODE_INDEX, "vehicle.autoLoaderBales.trigger#node" , "Bale pickup trigger node" )\n\n    schema:register(XMLValueType.STRING, "vehicle.autoLoaderBales.baleTypes.baleType(?)#fillTypes" , "List of supported fill types(if empty, all fill types are allowed)" )\n\n        schema:register(XMLValueType.FLOAT, "vehicle.autoLoaderBales.baleTypes.baleType(?)#diameter" , "Bale diameter" , 0 )\n        schema:register(XMLValueType.FLOAT, "vehicle.autoLoaderBales.baleTypes.baleType(?)#width" , "Bale width" , 0 )\n        schema:register(XMLValueType.FLOAT, "vehicle.autoLoaderBales.baleTypes.baleType(?)#height" , "Bale height" , 0 )\n        schema:register(XMLValueType.FLOAT, "vehicle.autoLoaderBales.baleTypes.baleType(?)#length" , "Bale length" , 0 )\n\n        schema:register(XMLValueType.NODE_INDEX, "vehicle.autoLoaderBales.baleTypes.baleType(?).spawnPlace#node" , "Node to spawn the bale" )\n        schema:register(XMLValueType.INT, "vehicle.autoLoaderBales.baleTypes.baleType(?).spawnPlace#numBales" , "Number of bales that can be loaded" , 1 )\n        schema:register(XMLValueType.VECTOR_ 3 , "vehicle.autoLoaderBales.baleTypes.baleType(?).spawnPlace#offsetDirection" , "Defines the axis in which the additional bales are moved" , "0 1 0" )\n        schema:register(XMLValueType.BOOL, "vehicle.autoLoaderBales.baleTypes.baleType(?).spawnPlace#mountBale" , "Defines if the bale is mounted or just moved to the position of the spawn node" , true )\n\n            schema:setXMLSpecializationType()\n\n            local schemaSavegame = Vehicle.xmlSchemaSavegame\n            Bale.registerSavegameXMLPaths(schemaSavegame, "vehicles.vehicle(?).autoLoaderBales.bale(?)" )\n        end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"onbaledeleted",children:"onBaleDeleted"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onBaleDeleted()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"self"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"object"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function AutoLoaderBales.onBaleDeleted( self , object)\n    local spec = self.spec_autoLoaderBales\n    spec.balesInTrigger[object] = nil\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"ondelete",children:"onDelete"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Called on deleting"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onDelete()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function AutoLoaderBales:onDelete()\n    local spec = self.spec_autoLoaderBales\n    if spec.triggerId ~ = nil then\n        removeTrigger(spec.triggerId)\n    end\n\n    if spec.balesInTrigger ~ = nil then\n        for bale, _ in pairs(spec.balesInTrigger) do\n            if bale.removeDeleteListener ~ = nil then\n                bale:removeDeleteListener( self , AutoLoaderBales.onBaleDeleted)\n            end\n        end\n        table.clear(spec.balesInTrigger)\n    end\n\n    if spec.mountedBales ~ = nil then\n        for bale, _ in pairs(spec.mountedBales) do\n            if bale.removeDeleteListener ~ = nil then\n                bale:removeDeleteListener( self , AutoLoaderBales.onDeleteAutoLoaderBalesObject)\n            end\n            bale:unmountKinematic()\n            bale:setNeedsSaving( true )\n        end\n        table.clear(spec.mountedBales)\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"ondeleteautoloaderbalesobject",children:"onDeleteAutoLoaderBalesObject"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onDeleteAutoLoaderBalesObject()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"self"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"object"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function AutoLoaderBales.onDeleteAutoLoaderBalesObject( self , object)\n    local spec = self.spec_autoLoaderBales\n    if spec.mountedBales[object] ~ = nil then\n        spec.mountedBales[object] = nil\n        spec.numMountedBales = spec.numMountedBales - 1\n    end\n\n    spec.balesInTrigger[object] = nil\n\n    if next(spec.mountedBales) = = nil then\n        spec.loadedBaleType = nil\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Called on loading"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onLoad(table savegame)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"table"}),(0,i.jsx)(n.th,{children:"savegame"}),(0,i.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function AutoLoaderBales:onLoad(savegame)\n    local spec = self.spec_autoLoaderBales\n\n    spec.balesInTrigger = { }\n    spec.balePickupDelay = 0\n\n    spec.mountedBales = { }\n    spec.numMountedBales = 0\n    spec.loadedBaleType = nil\n\n    if self.isServer then\n        spec.triggerId = self.xmlFile:getValue( "vehicle.autoLoaderBales.trigger#node" , nil , self.components, self.i3dMappings)\n        if spec.triggerId ~ = nil then\n            addTrigger(spec.triggerId, "autoLoaderBalesTriggerCallback" , self )\n        end\n\n        spec.baleTypes = { }\n        self.xmlFile:iterate( "vehicle.autoLoaderBales.baleTypes.baleType" , function (index, baleTypeKey)\n            local baleType = { }\n            baleType.spawnNode = self.xmlFile:getValue(baleTypeKey .. ".spawnPlace#node" , nil , self.components, self.i3dMappings)\n            if baleType.spawnNode ~ = nil then\n                baleType.numBales = self.xmlFile:getValue(baleTypeKey .. ".spawnPlace#numBales" , 1 )\n                baleType.offsetDirection = self.xmlFile:getValue(baleTypeKey .. ".spawnPlace#offsetDirection" , "0 1 0" , true )\n                baleType.mountBale = self.xmlFile:getValue(baleTypeKey .. ".spawnPlace#mountBale" , true )\n\n                baleType.diameter = MathUtil.round( self.xmlFile:getValue(baleTypeKey .. "#diameter" , 0 ), 2 )\n                baleType.width = MathUtil.round( self.xmlFile:getValue(baleTypeKey .. "#width" , 0 ), 2 )\n                baleType.height = MathUtil.round( self.xmlFile:getValue(baleTypeKey .. "#height" , 0 ), 2 )\n                baleType.length = MathUtil.round( self.xmlFile:getValue(baleTypeKey .. "#length" , 0 ), 2 )\n\n                local fillTypeNames = self.xmlFile:getValue(baleTypeKey .. "#fillTypes" )\n                baleType.fillTypes = g_fillTypeManager:getFillTypesByNames(fillTypeNames, "Warning: \'" .. self.xmlFile:getFilename() .. "\' has invalid fillType \'%s\'." )\n\n                if (baleType.diameter ~ = 0 and baleType.width ~ = 0 )\n                    or(baleType.width ~ = 0 and baleType.height ~ = 0 and baleType.length ~ = 0 ) then\n                    table.insert(spec.baleTypes, baleType)\n                else\n                        Logging.xmlWarning( self.xmlFile, "Incomplete bale size defintion in \'%s\'" , baleTypeKey)\n                    end\n                else\n                        Logging.xmlWarning( self.xmlFile, "Missing spawn place node in \'%s\'" , baleTypeKey)\n                    end\n                end )\n            end\n        end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"onloadfinished",children:"onLoadFinished"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Called after loading"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onLoadFinished(table savegame)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"table"}),(0,i.jsx)(n.th,{children:"savegame"}),(0,i.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function AutoLoaderBales:onLoadFinished(savegame)\n    if savegame ~ = nil then\n        if not savegame.resetVehicles then\n            savegame.xmlFile:iterate(savegame.key .. ".autoLoaderBales.bale" , function (index, baleKey)\n                local attributes = { }\n                Bale.loadBaleAttributesFromXMLFile(attributes, savegame.xmlFile, baleKey, savegame.resetVehicles)\n\n                local bale = Bale.new( self.isServer, self.isClient)\n                if bale:loadFromConfigXML(attributes.xmlFilename, 0 , 0 , 0 , 0 , 0 , 0 , attributes.uniqueId) then\n                    bale:applyBaleAttributes(attributes)\n                    local baleType = self:getAutoLoadBaleTypeFromBale(bale)\n                    if baleType ~ = nil then\n                        self:doAutoLoadBale(baleType, bale)\n                    else\n                            bale:delete()\n                        end\n                    end\n                end )\n            end\n\n        end\n    end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"onupdate",children:"onUpdate"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Called on update"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onUpdate(float dt, boolean isActiveForInput, boolean isSelected, )"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"float"}),(0,i.jsx)(n.th,{children:"dt"}),(0,i.jsx)(n.th,{children:"time since last call in ms"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:"isActiveForInput"}),(0,i.jsx)(n.td,{children:"true if vehicle is active for input"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:"isSelected"}),(0,i.jsx)(n.td,{children:"true if vehicle is selected"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"isSelected"}),(0,i.jsx)(n.td,{})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function AutoLoaderBales:onUpdate(dt, isActiveForInput, isActiveForInputIgnoreSelection, isSelected)\n    local spec = self.spec_autoLoaderBales\n\n    spec.balePickupDelay = math.max(spec.balePickupDelay - 1 , 0 )\n    if spec.balePickupDelay = = 0 then\n        local baleMaxHeight = 0\n        local baleToLoad, baleTypeToLoad\n        for object, num in pairs(spec.balesInTrigger) do\n            if num > 0 then\n                if self:getIsBaleAutoLoadable(object) then\n                    local baleType = self:getAutoLoadBaleTypeFromBale(object)\n                    if baleType ~ = nil then\n                        if spec.numMountedBales < baleType.numBales then\n                            local _, y, _ = getWorldTranslation(object.nodeId)\n                            if y > baleMaxHeight then\n                                baleMaxHeight = y\n                                baleToLoad, baleTypeToLoad = object, baleType\n                            end\n                        end\n                    end\n                end\n            end\n        end\n\n        if baleToLoad ~ = nil then\n            self:doAutoLoadBale(baleTypeToLoad, baleToLoad)\n            spec.balesInTrigger[baleToLoad] = nil\n            spec.balePickupDelay = 10\n        end\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Checks if all prerequisite specializations are loaded"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"prerequisitesPresent(table specializations)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"table"}),(0,i.jsx)(n.th,{children:"specializations"}),(0,i.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"table"}),(0,i.jsx)(n.th,{children:"hasPrerequisite"}),(0,i.jsx)(n.th,{children:"true if all prerequisite specializations are loaded"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function AutoLoaderBales.prerequisitesPresent(specializations)\n    return true\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function AutoLoaderBales.registerEventListeners(vehicleType)\n    SpecializationUtil.registerEventListener(vehicleType, "onLoad" , AutoLoaderBales )\n    SpecializationUtil.registerEventListener(vehicleType, "onLoadFinished" , AutoLoaderBales )\n    SpecializationUtil.registerEventListener(vehicleType, "onDelete" , AutoLoaderBales )\n    SpecializationUtil.registerEventListener(vehicleType, "onUpdate" , AutoLoaderBales )\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function AutoLoaderBales.registerFunctions(vehicleType)\n    SpecializationUtil.registerFunction(vehicleType, "autoLoaderBalesTriggerCallback" , AutoLoaderBales.autoLoaderBalesTriggerCallback)\n    SpecializationUtil.registerFunction(vehicleType, "getAutoLoadBaleTypeFromBale" , AutoLoaderBales.getAutoLoadBaleTypeFromBale)\n    SpecializationUtil.registerFunction(vehicleType, "doAutoLoadBale" , AutoLoaderBales.doAutoLoadBale)\n    SpecializationUtil.registerFunction(vehicleType, "getIsBaleAutoLoadable" , AutoLoaderBales.getIsBaleAutoLoadable)\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"registeroverwrittenfunctions",children:"registerOverwrittenFunctions"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"registerOverwrittenFunctions()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function AutoLoaderBales.registerOverwrittenFunctions(vehicleType)\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"savetoxmlfile",children:"saveToXMLFile"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"saveToXMLFile()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"xmlFile"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"key"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"usedModNames"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function AutoLoaderBales:saveToXMLFile(xmlFile, key, usedModNames)\n    local spec = self.spec_autoLoaderBales\n\n    local index = 0\n    for bale, _ in pairs(spec.mountedBales) do\n        local baleKey = string.format( "%s.bale(%d)" , key, index)\n        bale:saveToXMLFile(xmlFile, baleKey)\n        index = index + 1\n    end\nend\n\n'})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);