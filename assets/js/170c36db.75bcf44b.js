"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[97489],{14466(e,n,t){t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>p});const i=JSON.parse('{"id":"script/Misc/SplitShapeManager","title":"SplitShapeManager","description":"SplitShapeManager","source":"@site/../docs/script/Misc/SplitShapeManager.md","sourceDirName":"script/Misc","slug":"/script/Misc/SplitShapeManager","permalink":"/FS25-Community-LUADOC/script/Misc/SplitShapeManager","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"ProductionChainManager","permalink":"/FS25-Community-LUADOC/script/Misc/ProductionChainManager"},"next":{"title":"SprayTypeManager","permalink":"/FS25-Community-LUADOC/script/Misc/SprayTypeManager"}}');var l=t(74848),s=t(28453);const r={},d=void 0,a={},p=[{value:"SplitShapeManager",id:"splitshapemanager",level:2},{value:"addSplitType",id:"addsplittype",level:3},{value:"getSplitTypeByIndex",id:"getsplittypebyindex",level:3},{value:"getSplitTypeNameByIndex",id:"getsplittypenamebyindex",level:3},{value:"initDataStructures",id:"initdatastructures",level:3},{value:"loadMapData",id:"loadmapdata",level:3},{value:"new",id:"new",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"splitshapemanager",children:"SplitShapeManager"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"This class handles all stuff related to split shapes (split types, split shape access)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Parent"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"?version=script&category=58&class=561",children:"AbstractManager"})}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Functions"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#addsplittype",children:"addSplitType"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getsplittypebyindex",children:"getSplitTypeByIndex"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getsplittypenamebyindex",children:"getSplitTypeNameByIndex"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#initdatastructures",children:"initDataStructures"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#loadmapdata",children:"loadMapData"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#new",children:"new"})}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"addsplittype",children:"addSplitType"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Adds a new splitType"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"addSplitType(string name, string l10nKey, integer splitTypeIndex, float pricePerLiter, float woodChipsPerLiter,\nboolean allowsWoodHarvester, string? customEnvironment, float? volumeToLiter, )"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"string"}),(0,l.jsx)(n.th,{children:"name"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"string"}),(0,l.jsx)(n.td,{children:"l10nKey"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"integer"}),(0,l.jsx)(n.td,{children:"splitTypeIndex"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"float"}),(0,l.jsx)(n.td,{children:"pricePerLiter"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"float"}),(0,l.jsx)(n.td,{children:"woodChipsPerLiter"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"boolean"}),(0,l.jsx)(n.td,{children:"allowsWoodHarvester"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"string?"}),(0,l.jsx)(n.td,{children:"customEnvironment"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"float?"}),(0,l.jsx)(n.td,{children:"volumeToLiter"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"woodHarvesterAreaThreshold"})]})]})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function SplitShapeManager:addSplitType(name, l10nKey, splitTypeIndex, pricePerLiter, woodChipsPerLiter, allowsWoodHarvester, customEnvironment, volumeToLiter, woodHarvesterAreaThreshold)\n    if self.typesByIndex[splitTypeIndex] ~ = nil then\n        Logging.error( \"SplitShapeManager:addSplitType():SplitTypeIndex '%d' is already in use for '%s'\" , splitTypeIndex, name)\n            return\n        end\n\n        name = string.upper(name)\n        if self.typesByName[name] ~ = nil then\n            Logging.error( \"SplitShapeManager:addSplitType():SplitType name '%s' is already in use\" , name)\n            return\n        end\n\n        if type(woodHarvesterAreaThreshold) ~ = \"number\" then\n            woodHarvesterAreaThreshold = nil\n        end\n\n        local desc = { }\n        desc.name = name\n        desc.title = g_i18n:getText(l10nKey, customEnvironment)\n        desc.splitTypeIndex = splitTypeIndex\n        desc.pricePerLiter = pricePerLiter\n        desc.woodChipsPerLiter = woodChipsPerLiter\n        desc.allowsWoodHarvester = allowsWoodHarvester\n        desc.woodHarvesterAreaThreshold = woodHarvesterAreaThreshold or 4.5\n        desc.volumeToLiter = volumeToLiter or 1000\n\n        self.typesByIndex[splitTypeIndex] = desc\n        self.typesByName[name] = desc\n    end\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getsplittypebyindex",children:"getSplitTypeByIndex"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Returns split type table by given split type index provided by getSplitType()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getSplitTypeByIndex(integer index)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"integer"}),(0,l.jsx)(n.th,{children:"index"}),(0,l.jsx)(n.th,{children:"splitTypeIndex returned by getSplitType()"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"integer"}),(0,l.jsx)(n.th,{children:"splitTypeTable"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function SplitShapeManager:getSplitTypeByIndex(index)\n    -- check each split type index has a registered split type\n    --#debug if index ~ = 0 and self.typesByIndex[index] = = nil then\n        --#debug Logging.warning(\"split type index '%d' has no split type registered\", index)\n        --#debug end\n\n        return self.typesByIndex[index]\n    end\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"getsplittypenamebyindex",children:"getSplitTypeNameByIndex"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Returns split type name by given split type index provided by getSplitType()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getSplitTypeNameByIndex(integer index)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"integer"}),(0,l.jsx)(n.th,{children:"index"}),(0,l.jsx)(n.th,{children:"splitTypeIndex returned by getSplitType()"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"integer"}),(0,l.jsx)(n.th,{children:"split"}),(0,l.jsx)(n.th,{children:"type name"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function SplitShapeManager:getSplitTypeNameByIndex(index)\n    -- check each split type index has a registered split type\n    --#debug if index ~ = nil and index ~ = 0 and self.typesByIndex[index] = = nil then\n        --#debug Logging.warning("split type index \'%d\' has no split type registered", index)\n        --#debug end\n        local splitTypeData = self.typesByIndex[index]\n        if splitTypeData ~ = nil then\n            return splitTypeData.name\n        end\n\n        return "<NO_SPLIT_TYPE>"\n    end\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"initdatastructures",children:"initDataStructures"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Initialize data structures"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"initDataStructures()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function SplitShapeManager:initDataStructures()\n    self.typesByIndex = { }\n    self.typesByName = { }\n\n    self.activeYarders = { }\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"loadmapdata",children:"loadMapData"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Loads initial manager"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"loadMapData()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"integer"}),(0,l.jsx)(n.th,{children:"true"}),(0,l.jsx)(n.th,{children:"if loading was successful else false"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function SplitShapeManager:loadMapData()\n    SplitShapeManager:superClass().loadMapData( self )\n\n    self:addSplitType( "SPRUCE" , "treeType_spruce" , 1 , 0.7 , 3.0 , true , nil , 1000 , 6 ) -- density 0.47\n    self:addSplitType( "PINE" , "treeType_pine" , 2 , 0.7 , 3.0 , true , nil , 1000 ) -- density 0.52\n    self:addSplitType( "LARCH" , "treeType_larch" , 3 , 0.7 , 3.0 , true , nil , 1000 ) -- density 0.59\n    self:addSplitType( "BIRCH" , "treeType_birch" , 4 , 0.85 , 3.2 , true , nil , 1000 ) -- density 0.65\n    self:addSplitType( "BEECH" , "treeType_beech" , 5 , 0.9 , 3.4 , true , nil , 1000 ) -- density 0.69\n    self:addSplitType( "MAPLE" , "treeType_maple" , 6 , 0.9 , 3.4 , true , nil , 1000 ) -- density 0.65\n    self:addSplitType( "OAK" , "treeType_oak" , 7 , 0.9 , 3.4 , true , nil , 1000 ) -- density 0.67\n    self:addSplitType( "ASH" , "treeType_ash" , 8 , 0.9 , 3.4 , true , nil , 1000 ) -- density 0.69\n    self:addSplitType( "LOCUST" , "treeType_locust" , 9 , 1.0 , 3.8 , true , nil , 1000 ) -- density 0.73\n    self:addSplitType( "MAHOGANY" , "treeType_mahogany" , 10 , 1.1 , 3.0 , true , nil , 1000 ) -- density 0.80\n    self:addSplitType( "POPLAR" , "treeType_poplar" , 11 , 0.7 , 7.5 , true , nil , 1000 ) -- density 0.48\n    self:addSplitType( "AMERICANELM" , "treeType_americanElm" , 12 , 0.7 , 3.5 , true , nil , 1000 ) -- density 0.57\n    self:addSplitType( "CYPRESS" , "treeType_cypress" , 13 , 0.7 , 3.5 , true , nil , 1000 ) -- density 0.51\n    self:addSplitType( "DOWNYSERVICEBERRY" , "treeType_downyServiceberry" , 14 , 0.7 , 3.5 , false , nil , 1000 ) -- density 0.63\n    self:addSplitType( "PAGODADOGWOOD" , "treeType_pagodaDogwood" , 15 , 0.7 , 3.5 , true , nil , 1000 ) -- density 0.76\n    self:addSplitType( "SHAGBARKHICKORY" , "treeType_shagbarkHickory" , 16 , 0.7 , 3.5 , true , nil , 1000 ) -- density 0.75\n    self:addSplitType( "STONEPINE" , "treeType_stonePine" , 17 , 0.7 , 3.5 , true , nil , 1000 ) -- density 0.51\n    self:addSplitType( "WILLOW" , "treeType_willow" , 18 , 0.7 , 3.5 , true , nil , 1000 ) -- density 0.50\n    self:addSplitType( "OLIVETREE" , "treeType_oliveTree" , 19 , 0.6 , 3.5 , true , nil , 1000 ) -- density 0.45\n    self:addSplitType( "GIANTSEQUOIA" , "treeType_giantSequoia" , 20 , 0.3 , 0.3 , true , nil , 1000 )\n    self:addSplitType( "LODGEPOLEPINE" , "treeType_lodgepolePine" , 21 , 1.0 , 3.7 , true , nil , 1000 )\n    self:addSplitType( "PONDEROSAPINE" , "treeType_ponderosaPine" , 22 , 1.0 , 3.7 , true , nil , 1000 )\n    self:addSplitType( "DEADWOOD" , "treeType_deadwood" , 23 , 0.1 , 0.5 , true , nil , 1000 )\n    self:addSplitType( "TRANSPORT" , "treeType_transport" , 24 , 0.1 , 0.3 , true , nil , 10 )\n    self:addSplitType( "ASPEN" , "treeType_aspen" , 25 , 1.2 , 3.3 , true , nil , 1000 )\n    self:addSplitType( "APPLE" , "treeType_apple" , 26 , 0.8 , 1.2 , false , nil , 1000 )\n    self:addSplitType( "BETULAERMANII" , "treeType_betulaErmanii" , 27 , 0.6 , 3.5 , true , nil , 1000 )\n    self:addSplitType( "BOXELDER" , "treeType_boxelder" , 28 , 0.9 , 3.4 , true , nil , 1000 )\n    self:addSplitType( "CHERRY" , "treeType_cherry" , 29 , 1.0 , 3.8 , false , nil , 1000 )\n    self:addSplitType( "CHINESEELM" , "treeType_chineseElm" , 30 , 0.7 , 3.5 , false , nil , 1000 )\n    self:addSplitType( "GOLDENRAIN" , "treeType_goldenRain" , 31 , 0.6 , 3.5 , true , nil , 1000 )\n    self:addSplitType( "JAPANESEZELKOVA" , "treeType_japaneseZelkova" , 32 , 0.7 , 3.5 , true , nil , 1000 )\n    self:addSplitType( "NORTHERNCATALPA" , "treeType_northernCatalpa" , 33 , 0.7 , 3.0 , false , nil , 1000 )\n    self:addSplitType( "TILIAAMURENSIS" , "treeType_tiliaAmurensis" , 34 , 0.9 , 3.4 , false , nil , 1000 )\n    self:addSplitType( "RAVAGED" , "treeType_ravaged" , 35 , 0.4 , 3.0 , true , nil , 1000 )\n    self:addSplitType( "PINUSTABULIFORMIS" , "treeType_pinusTabuliformis" , 36 , 0.9 , 3.5 , true , nil , 1000 )\n    self:addSplitType( "PINUSSYLVESTRIS" , "treeType_pinusSylvestris" , 37 , 0.8 , 3.3 , true , nil , 1000 )\n    self:addSplitType( "CHESTNUT" , "treeType_chestnut" , 38 , 0.85 , 3.3 , true , nil , 1000 )\n\n    if g_isDevelopmentVersion then\n        addConsoleCommand( "gsSplitTypesExport" , "Exports registered split types to xml files" , "exportToXML" , self )\n    end\n\n    return true\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"new",children:"new"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Creating manager"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"new(table? customMt)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"table?"}),(0,l.jsx)(n.th,{children:"customMt"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"table?"}),(0,l.jsx)(n.th,{children:"self"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function SplitShapeManager.new(customMt)\n    local self = AbstractManager.new(customMt or SplitShapeManager _mt)\n\n    return self\nend\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},28453(e,n,t){t.d(n,{R:()=>r,x:()=>d});var i=t(96540);const l={},s=i.createContext(l);function r(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);