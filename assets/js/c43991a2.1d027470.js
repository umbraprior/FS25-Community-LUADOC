"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[90509],{11648(e,n,t){t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>a,frontMatter:()=>i,metadata:()=>l,toc:()=>c});const l=JSON.parse('{"id":"script/GUI/ButtonOverlay","title":"ButtonOverlay","description":"ButtonOverlay","source":"@site/../docs/script/GUI/ButtonOverlay.md","sourceDirName":"script/GUI","slug":"/script/GUI/ButtonOverlay","permalink":"/FS25-Community-LUADOC/script/GUI/ButtonOverlay","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"ButtonElement","permalink":"/FS25-Community-LUADOC/script/GUI/ButtonElement"},"next":{"title":"CheckedOptionElement","permalink":"/FS25-Community-LUADOC/script/GUI/CheckedOptionElement"}}');var s=t(74848),r=t(28453);const i={},d=void 0,o={},c=[{value:"ButtonOverlay",id:"buttonoverlay",level:2},{value:"delete",id:"delete",level:3},{value:"getButtonWidth",id:"getbuttonwidth",level:3},{value:"new",id:"new",level:3},{value:"renderButton",id:"renderbutton",level:3},{value:"setColor",id:"setcolor",level:3}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"buttonoverlay",children:"ButtonOverlay"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Keyboard button display overlay.\nOverlay type which displays a keyboard key button symbol."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Functions"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#delete",children:"delete"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getbuttonwidth",children:"getButtonWidth"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#new",children:"new"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#renderbutton",children:"renderButton"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#setcolor",children:"setColor"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"delete",children:"delete"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Delete this button overlay."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"delete()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function ButtonOverlay:delete()\n    if self.buttonScaleOverlay ~ = nil then\n        self.buttonScaleOverlay:delete()\n        self.buttonScaleOverlay = nil\n    end\n    if self.buttonLeftOverlay ~ = nil then\n        self.buttonLeftOverlay:delete()\n        self.buttonLeftOverlay = nil\n    end\n    if self.buttonRightOverlay ~ = nil then\n        self.buttonRightOverlay:delete()\n        self.buttonRightOverlay = nil\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getbuttonwidth",children:"getButtonWidth"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Get the total display width of this button overlay for a given button text and height"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getButtonWidth()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"buttonText"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"height"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"customOffsetLeft"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"customButtonInputText"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function ButtonOverlay:getButtonWidth(buttonText, height, customOffsetLeft, customButtonInputText)\n    customOffsetLeft = customOffsetLeft or 0\n    local textSize = height * self.textSizeFactor\n\n    setTextBold( true )\n    buttonText = utf8ToUpper( tostring(buttonText))\n    local textWidth = getTextWidth(textSize, buttonText)\n    local textWidthCustom = 0\n    if customButtonInputText ~ = nil then\n        textWidthCustom = getTextWidth(textSize, customButtonInputText)\n    end\n    setTextBold( false )\n\n    local leftRightPadding = (height * self.leftRightPaddingHeightRatio) / g_screenAspectRatio\n\n    local widthNoOffset = textWidth + 2 * leftRightPadding\n    local width = widthNoOffset + customOffsetLeft + textWidthCustom\n\n    if self.minWidth ~ = nil then\n        width = math.max(width, self.minWidth)\n        widthNoOffset = math.max(widthNoOffset, self.minWidth)\n    end\n\n    return width, widthNoOffset\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"new",children:"new"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"new()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"customMt"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function ButtonOverlay.new(customMt)\n    local self = setmetatable( { } , customMt or ButtonOverlay _mt)\n\n    self.textSizeFactor = 0.55 -- ratio of text size to button height\n    self.textYOffsetFactor = 0.17 -- compensates base line offset for size factor 0.5 TODO:get proper vertical alignment from engine in renderText()\n\n        self.buttonScaleOverlay = g_overlayManager:createOverlay( "gui.button_middle" , 0 , 0 , 0 , 0 )\n        self.buttonLeftOverlay = g_overlayManager:createOverlay( "gui.button_left" , 0 , 0 , 0 , 0 )\n        self.buttonRightOverlay = g_overlayManager:createOverlay( "gui.button_right" , 0 , 0 , 0 , 0 )\n        self.buttonLeftWidthToHeightRatio = 6 / 25 -- 6px width, 25px height\n        self.leftRightPaddingHeightRatio = 12 / 25\n\n        self:setColor( 1 , 1 , 1 , 1 )\n\n        self.minWidth = nil\n\n        self.debugEnabled = nil\n\n        return self\n    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"renderbutton",children:"renderButton"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Render this overlay with the given parameters."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"renderButton(buttonText Text, posX Screen, posY Screen, height Button, , , , , , , )"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"buttonText"}),(0,s.jsx)(n.th,{children:"Text"}),(0,s.jsx)(n.th,{children:'to display as the key value, e.g. "A", "Space", "Ctrl", etc.'})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"posX"}),(0,s.jsx)(n.td,{children:"Screen"}),(0,s.jsx)(n.td,{children:"x position"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"posY"}),(0,s.jsx)(n.td,{children:"Screen"}),(0,s.jsx)(n.td,{children:"y position"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"height"}),(0,s.jsx)(n.td,{children:"Button"}),(0,s.jsx)(n.td,{children:"display height"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"colorText"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"clipX1"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"clipY1"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"clipX2"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"clipY2"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"customOffsetLeft"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"customButtonInputText"}),(0,s.jsx)(n.td,{})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function ButtonOverlay:renderButton(buttonText, posX, posY, height, colorText, clipX1, clipY1, clipX2, clipY2, customOffsetLeft, customButtonInputText)\n    customOffsetLeft = customOffsetLeft or 0\n    buttonText = utf8ToUpper( tostring(buttonText))\n\n    local width, widthNoOffset = self:getButtonWidth(buttonText, height, customOffsetLeft, customButtonInputText)\n    self:renderBackground(posX, posY, width, height, clipX1, clipY1, clipX2, clipY2)\n\n    local textSize = height * self.textSizeFactor\n    setTextBold( true )\n    setTextAlignment(RenderText.ALIGN_CENTER)\n    setTextVerticalAlignment(RenderText.VERTICAL_ALIGN_MIDDLE)\n    if clipX1 ~ = nil then\n        setTextClipArea(clipX1, clipY1, clipX2, clipY2)\n    end\n\n    if colorText then\n        setTextColor( self.r, self.g, self.b, self.a)\n    else\n            setTextColor( 1 , 1 , 1 , self.a)\n        end\n\n        local textPosX = self.buttonRightOverlay.x + self.buttonRightOverlay.width - widthNoOffset * 0.5 -- + customOffsetLeft\n        local textPosY = posY + height * 0.5 + textSize * self.textYOffsetFactor\n        renderText(textPosX, textPosY, textSize, buttonText) -- + textSize * self.textYOffsetFactor\n\n        setTextAlignment(RenderText.ALIGN_LEFT)\n        if customButtonInputText ~ = nil then\n            setTextColor( 0.5 , 0.5 , 0.5 , 1 )\n            renderText( self.buttonScaleOverlay.x, textPosY, textSize, customButtonInputText)\n        end\n\n        if clipX1 ~ = nil then\n            setTextClipArea( 0 , 0 , 1 , 1 )\n        end\n        setTextBold( false )\n        setTextColor( 1 , 1 , 1 , 1 )\n        setTextVerticalAlignment(RenderText.VERTICAL_ALIGN_BASELINE)\n\n        local totalWidth = self.buttonRightOverlay.x + self.buttonRightOverlay.width - self.buttonLeftOverlay.x\n\n        if self.debugEnabled or g_uiDebugEnabled then\n            setOverlayColor( GuiElement.debugOverlay, 1 , 0 , 1 , 0.5 )\n\n            renderOverlay( GuiElement.debugOverlay, posX - g_pixelSizeX, posY - g_pixelSizeY, totalWidth + 2 * g_pixelSizeX, g_pixelSizeY)\n            renderOverlay( GuiElement.debugOverlay, posX - g_pixelSizeX, posY + height, totalWidth + 2 * g_pixelSizeX, g_pixelSizeY)\n            renderOverlay( GuiElement.debugOverlay, posX - g_pixelSizeX, posY, g_pixelSizeX, height)\n            renderOverlay( GuiElement.debugOverlay, posX + totalWidth, posY, g_pixelSizeX, height)\n        end\n\n        return totalWidth\n    end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"setcolor",children:"setColor"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Set this overlay's background color."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"setColor(float? r, float? g, float? b, float? a, float? r2, float? g2, float? b2, float? a2)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"float?"}),(0,s.jsx)(n.th,{children:"r"}),(0,s.jsx)(n.th,{children:"Red channel for text [0, 1]"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"float?"}),(0,s.jsx)(n.td,{children:"g"}),(0,s.jsx)(n.td,{children:"Green channel for text [0, 1]"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"float?"}),(0,s.jsx)(n.td,{children:"b"}),(0,s.jsx)(n.td,{children:"Blue channel for text [0, 1]"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"float?"}),(0,s.jsx)(n.td,{children:"a"}),(0,s.jsx)(n.td,{children:"Alpha (transparency) channel for text [0, 1], 0 is fully transparent, 1 is opaque"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"float?"}),(0,s.jsx)(n.td,{children:"r2"}),(0,s.jsx)(n.td,{children:'Red channel for background [0, 1], if nil "r" will be used'})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"float?"}),(0,s.jsx)(n.td,{children:"g2"}),(0,s.jsx)(n.td,{children:'Green channel for background [0, 1], if nil "g" will be used'})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"float?"}),(0,s.jsx)(n.td,{children:"b2"}),(0,s.jsx)(n.td,{children:'Blue channel for background [0, 1], if nil "b" will be used'})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"float?"}),(0,s.jsx)(n.td,{children:"a2"}),(0,s.jsx)(n.td,{children:'Alpha (transparency) channel for background [0, 1], 0 is fully transparent, 1 is opaque, if nil "a" will be used'})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function ButtonOverlay:setColor(r, g, b, a, r2, g2, b2, a2)\n    self.r = r or self.r\n    self.g = g or self.g\n    self.b = b or self.b\n    self.a = a or self.a\n\n    self.r2 = r2 or self.r2 or r\n    self.g2 = g2 or self.g2 or g\n    self.b2 = b2 or self.b2 or b\n    self.a2 = a2 or self.a2 or a\n\n    if self.buttonScaleOverlay ~ = nil then\n        self.buttonScaleOverlay:setColor( self.r2, self.g2, self.b2, self.a2)\n    end\n    if self.buttonLeftOverlay ~ = nil then\n        self.buttonLeftOverlay:setColor( self.r2, self.g2, self.b2, self.a2)\n    end\n    if self.buttonRightOverlay ~ = nil then\n        self.buttonRightOverlay:setColor( self.r2, self.g2, self.b2, self.a2)\n    end\nend\n\n"})})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},28453(e,n,t){t.d(n,{R:()=>i,x:()=>d});var l=t(96540);const s={},r=l.createContext(s);function i(e){const n=l.useContext(r);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),l.createElement(r.Provider,{value:n},e.children)}}}]);