"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[39653],{28453(e,n,t){t.d(n,{R:()=>r,x:()=>c});var s=t(96540);const l={},i=s.createContext(l);function r(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),s.createElement(i.Provider,{value:n},e.children)}},69836(e,n,t){t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"script/GUI/AnimalScreen","title":"AnimalScreen","description":"AnimalScreen","source":"@site/../docs/script/GUI/AnimalScreen.md","sourceDirName":"script/GUI","slug":"/script/GUI/AnimalScreen","permalink":"/FS25-Community-LUADOC/script/GUI/AnimalScreen","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Gui","permalink":"/FS25-Community-LUADOC/script/GUI/"},"next":{"title":"AnimationElement","permalink":"/FS25-Community-LUADOC/script/GUI/AnimationElement"}}');var l=t(74848),i=t(28453);const r={},c=void 0,o={},a=[{value:"AnimalScreen",id:"animalscreen",level:2},{value:"delete",id:"delete",level:3},{value:"new",id:"new",level:3},{value:"onClickBack",id:"onclickback",level:3},{value:"onClickSelect",id:"onclickselect",level:3},{value:"onClose",id:"onclose",level:3},{value:"onOpen",id:"onopen",level:3},{value:"removeActionEvents",id:"removeactionevents",level:3},{value:"setSelectionState",id:"setselectionstate",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"animalscreen",children:"AnimalScreen"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Animal Buying Screen."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Parent"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"?version=script&category=43&class=424",children:"ScreenElement"})}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Functions"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#delete",children:"delete"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#new",children:"new"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#onclickback",children:"onClickBack"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#onclickselect",children:"onClickSelect"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#onclose",children:"onClose"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#onopen",children:"onOpen"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#removeactionevents",children:"removeActionEvents"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#setselectionstate",children:"setSelectionState"})}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"delete",children:"delete"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"delete()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AnimalScreen:delete()\n    for k, clone in pairs( self.sourceDotBox.elements) do\n        clone:delete()\n        self.sourceDotBox.elements[k] = nil\n    end\n\n    self.sourceDotTemplate:delete()\n\n    AnimalScreen:superClass().delete( self )\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"new",children:"new"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Constructor"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"new(table custom_mt)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"table"}),(0,l.jsx)(n.th,{children:"custom_mt"}),(0,l.jsx)(n.th,{children:"metatable"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"table"}),(0,l.jsx)(n.th,{children:"self"}),(0,l.jsx)(n.th,{children:"instance"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AnimalScreen.new(custom_mt)\n    local self = ScreenElement.new( nil , custom_mt or AnimalScreen _mt)\n\n    self.isBuyMode = true\n    self.isSourceSelected = true\n\n    self.isOpen = false\n    self.lastBalance = 0\n    self.numAnimals = 0\n\n    self.selectionState = nil\n    self.sourceSelectorStateToAnimalType = { }\n\n    return self\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"onclickback",children:"onClickBack"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Callback on click back"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"onClickBack()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AnimalScreen:onClickBack()\n    AnimalScreen:superClass().onClickBack( self )\n\n    if Platform.isMobile or self.selectionState < = AnimalScreen.SELECTION_SOURCE then\n        self:changeScreen( nil )\n    else\n            if self.isBuyMode then\n                self:setSelectionState( self.selectionState - 1 )\n            else\n                    self:setSelectionState( self.selectionState - 2 )\n                end\n            end\n        end\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"onclickselect",children:"onClickSelect"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Callback on click cancel"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"onClickSelect()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AnimalScreen:onClickSelect()\n    if self.selectionState < AnimalScreen.SELECTION_AMOUNT then\n        if self.isBuyMode then\n            self:setSelectionState( self.selectionState + 1 )\n        else\n                self:setSelectionState( self.selectionState + 2 )\n            end\n        end\n\n        return true\n    end\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"onclose",children:"onClose"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Callback on close"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"onClose(table element)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"table"}),(0,l.jsx)(n.th,{children:"element"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AnimalScreen:onClose(element)\n    AnimalScreen:superClass().onClose( self )\n    self.controller:reset()\n\n    self:removeActionEvents()\n    self:toggleCustomInputContext( false , AnimalScreen.INPUT_CONTEXT)\n\n    g_currentMission:resetGameState()\n\n    g_currentMission:showMoneyChange(MoneyType.NEW_ANIMALS_COST)\n    g_currentMission:showMoneyChange(MoneyType.SOLD_ANIMALS)\n\n    g_messageCenter:unsubscribeAll( self )\n    g_inputBinding:removeActionEventsByTarget( self )\n\n    self.isOpen = false\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"onopen",children:"onOpen"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Callback on open"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"onOpen()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function AnimalScreen:onOpen()\n    AnimalScreen:superClass().onOpen( self )\n    self.isOpen = true\n\n    g_gameStateManager:setGameState(GameState.MENU_ANIMAL_SHOP)\n\n    self:onClickBuyMode( true )\n\n    if self.sourceList:getItemCount() = = 0 then\n        self:onClickSellMode( true )\n\n        if self.sourceList:getItemCount() = = 0 then\n            g_gui:changeScreen( nil )\n            InfoDialog.show(g_i18n:getText( "ui_noAnimalsToSell" ))\n            return\n        end\n    end\n\n    self:onMoneyChange()\n    g_messageCenter:subscribe(MessageType.MONEY_CHANGED, self.onMoneyChange, self )\n\n    self:toggleCustomInputContext( true , AnimalScreen.INPUT_CONTEXT)\n    self:registerActionEvents()\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"removeactionevents",children:"removeActionEvents"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Remove non-GUI input action events."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"removeActionEvents()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AnimalScreen:removeActionEvents()\n    g_inputBinding:removeActionEventsByTarget( self )\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"setselectionstate",children:"setSelectionState"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"setSelectionState()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"state"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"forceUpdate"})]})})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function AnimalScreen:setSelectionState(state, forceUpdate)\n    if state = = AnimalScreen.SELECTION_TARGET and # self.targetSelector.texts = = 0 then\n        --if no husbanry is available for the currently selected animal, we cant change selection state\n            return false\n        elseif state = = AnimalScreen.SELECTION_TARGET and # self.targetSelector.texts = = 1 and not self.targetSlider.needsSlider then\n                --if there is only exactly one available husbandry, and its list can not be scrolled, so we skip the selection\n                    if self.selectionState = = AnimalScreen.SELECTION_SOURCE then\n                        self:setSelectionState( AnimalScreen.SELECTION_AMOUNT)\n                    else\n                            self:setSelectionState( AnimalScreen.SELECTION_SOURCE)\n                        end\n\n                        return\n                    elseif state = = AnimalScreen.SELECTION_AMOUNT and not self.numAnimalsBox:getIsVisible() then\n                            -- if the current husbandry is full, we cant change state\n                                if # self.targetSelector.texts = = 1 and not self.targetSlider.needsSlider then\n                                    self:setSelectionState( AnimalScreen.SELECTION_SOURCE)\n                                else\n                                        self:setSelectionState( AnimalScreen.SELECTION_TARGET)\n                                    end\n\n                                    return\n                                end\n\n                                self.sourceBoxBg:setSelected(state = = AnimalScreen.SELECTION_SOURCE, true )\n                                self.sourceBoxArrow:setSelected(state = = AnimalScreen.SELECTION_SOURCE, true )\n                                self.targetBoxBg:setSelected(state = = AnimalScreen.SELECTION_TARGET)\n                                self.numAnimalsBoxBg:setSelected(state = = AnimalScreen.SELECTION_AMOUNT)\n\n                                self.isAutoUpdatingList = true\n                                if state = = AnimalScreen.SELECTION_SOURCE then\n                                    if self.selectionState ~ = state then\n                                        if self.sourceList:getItemCount() > 0 then\n                                            FocusManager:setFocus( self.sourceList)\n                                        else\n                                                FocusManager:setFocus( self.sourceSelector)\n                                            end\n                                        end\n                                    elseif state = = AnimalScreen.SELECTION_TARGET then\n                                            if self.targetSlider.needsSlider then\n                                                FocusManager:setFocus( self.targetSlider)\n\n                                                FocusManager:linkElements( self.targetSlider, FocusManager.RIGHT, self.numAnimalsElement)\n                                                FocusManager:linkElements( self.targetSlider, FocusManager.TOP, self.targetSelector)\n                                                FocusManager:linkElements( self.targetSelector, FocusManager.BOTTOM, self.targetSlider)\n\n                                                if # self.targetSelector.texts > 1 then\n                                                    FocusManager:linkElements( self.targetSlider, FocusManager.LEFT, self.targetSelector)\n                                                elseif self.sourceList:getItemCount() > 0 then\n                                                        FocusManager:linkElements( self.targetSlider, FocusManager.LEFT, self.sourceList)\n                                                    else\n                                                            FocusManager:linkElements( self.targetSlider, FocusManager.TOP, self.sourceSelector)\n                                                        end\n\n                                                        if self.sourceList:getItemCount() > 0 then\n                                                            FocusManager:linkElements( self.targetSelector, FocusManager.TOP, self.sourceList)\n                                                        else\n                                                                FocusManager:linkElements( self.targetSelector, FocusManager.TOP, self.sourceSelector)\n                                                            end\n                                                        else\n                                                                FocusManager:setFocus( self.targetSelector)\n\n                                                                FocusManager:linkElements( self.targetSelector, FocusManager.BOTTOM, self.numAnimalsElement)\n\n                                                                if self.sourceList:getItemCount() > 0 then\n                                                                    FocusManager:linkElements( self.targetSelector, FocusManager.TOP, self.sourceList)\n                                                                else\n                                                                        FocusManager:linkElements( self.targetSelector, FocusManager.TOP, self.sourceSelector)\n                                                                    end\n                                                                end\n                                                                else --state = = AnimalScreen.SELECTION_AMOUNT\n                                                                    FocusManager:setFocus( self.numAnimalsElement)\n\n                                                                    if self.targetSlider.needsSlider then\n                                                                        FocusManager:linkElements( self.numAnimalsElement, FocusManager.TOP, self.targetSlider)\n                                                                        FocusManager:linkElements( self.numAnimalsElement, FocusManager.BOTTOM, self.targetSlider)\n                                                                    elseif # self.targetSelector.texts > 1 then\n                                                                            FocusManager:linkElements( self.numAnimalsElement, FocusManager.TOP, self.targetSelector)\n                                                                            FocusManager:linkElements( self.numAnimalsElement, FocusManager.BOTTOM, self.targetSelector)\n                                                                        else\n                                                                                FocusManager:linkElements( self.numAnimalsElement, FocusManager.TOP, self.sourceList)\n                                                                                FocusManager:linkElements( self.numAnimalsElement, FocusManager.BOTTOM, self.sourceList)\n                                                                            end\n                                                                        end\n                                                                        self.isAutoUpdatingList = false\n\n                                                                        self.selectionState = state\n\n                                                                        if self.isBuyMode then\n                                                                            if self.buttonApply ~ = nil then\n                                                                                self.buttonApply:setText( self.controller:getSourceActionText())\n                                                                            elseif self.buttonBuy ~ = nil then\n                                                                                    self.buttonBuy:setText( self.controller:getSourceActionText())\n                                                                                end\n                                                                            else\n                                                                                    if self.buttonApply ~ = nil then\n                                                                                        self.buttonApply:setText( self.controller:getTargetActionText())\n                                                                                    elseif self.buttonSell ~ = nil then\n                                                                                            self.buttonSell:setText( self.controller:getTargetActionText())\n                                                                                        end\n                                                                                    end\n\n                                                                                    self.noHusbandriesTextBox:setVisible(# self.targetSelector.texts = = 0 and self.isBuyMode)\n                                                                                    self.targetListEmptyText:setVisible(# self.targetSelector.texts > 0 and self.targetList:getItemCount() = = 0 )\n                                                                                    self.targetIcon:setVisible(# self.targetSelector.texts > 0 )\n                                                                                    self.targetSelector:setVisible(# self.targetSelector.texts > 0 )\n                                                                                    self.targetText:setVisible(# self.targetSelector.texts > 0 )\n                                                                                    self.targetListContainer:setVisible( self.isBuyMode and( self.controller.husbandry = = nil or self.controller.trailer = = nil ))\n\n                                                                                    self.buttonBuy:setVisible(state = = AnimalScreen.SELECTION_AMOUNT and self.isBuyMode)\n                                                                                    self.buttonSell:setVisible(state = = AnimalScreen.SELECTION_AMOUNT and not self.isBuyMode)\n                                                                                    self.buttonSelect:setVisible(state < AnimalScreen.SELECTION_AMOUNT and self.sourceList:getItemCount() > 0 and( self.targetContainer:getIsVisible() or not self.isBuyMode) and self.numAnimalsElement:getIsVisible())\n                                                                                    self.buttonsPanel:invalidateLayout()\n\n                                                                                    return true\n                                                                                end\n\n"})})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}}}]);