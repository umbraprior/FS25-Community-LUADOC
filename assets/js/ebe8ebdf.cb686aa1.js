"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[23626],{3808(e,n,t){t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"script/Utils/BlurUtil","title":"BlurUtil","description":"BlurUtil","source":"@site/../docs/script/Utils/BlurUtil.md","sourceDirName":"script/Utils","slug":"/script/Utils/BlurUtil","permalink":"/FS25-Community-LUADOC/script/Utils/BlurUtil","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"BitmapUtil","permalink":"/FS25-Community-LUADOC/script/Utils/BitmapUtil"},"next":{"title":"DataGrid","permalink":"/FS25-Community-LUADOC/script/Utils/DataGrid"}}');var i=t(74848),s=t(28453);const l={},d=void 0,u={},a=[{value:"BlurUtil",id:"blurutil",level:2},{value:"iterateStackBlur",id:"iteratestackblur",level:3},{value:"recalculateBlurQueueAndSums",id:"recalculateblurqueueandsums",level:3},{value:"stackBlurAsync",id:"stackblurasync",level:3},{value:"stackBlurColumn",id:"stackblurcolumn",level:3},{value:"stackBlurHorizontal",id:"stackblurhorizontal",level:3},{value:"stackBlurRow",id:"stackblurrow",level:3},{value:"stackBlurVertical",id:"stackblurvertical",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"blurutil",children:"BlurUtil"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Helper functions for efficiently blurring data.\nBased off the StackBlur algorithm from Mario Klingemann:\n",(0,i.jsx)(n.a,{href:"https://underdestruction.com/2004/02/25/stackblur-2004/",children:"https://underdestruction.com/2004/02/25/stackblur-2004/"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Functions"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#iteratestackblur",children:"iterateStackBlur"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#recalculateblurqueueandsums",children:"recalculateBlurQueueAndSums"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#stackblurasync",children:"stackBlurAsync"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#stackblurcolumn",children:"stackBlurColumn"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#stackblurhorizontal",children:"stackBlurHorizontal"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#stackblurrow",children:"stackBlurRow"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#stackblurvertical",children:"stackBlurVertical"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"iteratestackblur",children:"iterateStackBlur"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Handles a single datum (pixel) of the data, whether vertical or horizontal. This should not be used outside of this\nclass."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"iterateStackBlur(function dataGetter, function dataSetter, table queue, integer kernelSize, integer stackSize, integer\nradius, float sum, float inSum, float outSum, integer queueCounter, integer x, integer y)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"function"}),(0,i.jsx)(n.th,{children:"dataGetter"}),(0,i.jsx)(n.th,{children:"The getter function to use to query the data. function(x, y)"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"function"}),(0,i.jsx)(n.td,{children:"dataSetter"}),(0,i.jsx)(n.td,{children:"The setter function to use to set the data. function(x, y, value)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"table"}),(0,i.jsx)(n.td,{children:"queue"}),(0,i.jsx)(n.td,{children:"The current queue. This function modifies this table."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"kernelSize"}),(0,i.jsx)(n.td,{children:"The size of the kernel. (radius * 2) + 1"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"stackSize"}),(0,i.jsx)(n.td,{children:"The size of the stack. radius * (radius + 2) + 1"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"radius"}),(0,i.jsx)(n.td,{children:"The radius of the blur."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"float"}),(0,i.jsx)(n.td,{children:"sum"}),(0,i.jsx)(n.td,{children:"The current sum."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"float"}),(0,i.jsx)(n.td,{children:"inSum"}),(0,i.jsx)(n.td,{children:"The current incoming sum."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"float"}),(0,i.jsx)(n.td,{children:"outSum"}),(0,i.jsx)(n.td,{children:"The current outgoing sum."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"queueCounter"}),(0,i.jsx)(n.td,{children:"the current queueCounter."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"x"}),(0,i.jsx)(n.td,{children:"The x position."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"y"}),(0,i.jsx)(n.td,{children:"The y position."})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"integer"}),(0,i.jsx)(n.th,{children:"sum"}),(0,i.jsx)(n.th,{children:"The new sum."})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"inSum"}),(0,i.jsx)(n.td,{children:"The new incoming sum."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"outSum"}),(0,i.jsx)(n.td,{children:"The new outgoing sum."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"queueCounter"}),(0,i.jsx)(n.td,{children:"The new queue counter."})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function BlurUtil.iterateStackBlur(dataGetter, dataSetter, queue, kernelSize, stackSize, radius, sum, inSum, outSum, queueCounter, x, y)\n\n    -- Divide the sum by the stack size to get the average of the sum.\n    local averagedValue = sum / stackSize\n\n    -- Set the data at this position to the averaged value.\n    dataSetter(x, y, averagedValue)\n\n    -- Set the queue position to use.This is based off the current queue counter and is wrapped to fit into the queue.\n    local queuePosition = queueCounter + kernelSize - radius\n    if queuePosition > = kernelSize then\n        queuePosition = queuePosition - kernelSize\n    end\n\n    -- Remove the outgoing sum from the main sum, and remove the soon to be removed queue element from the outgoing sum.\n    sum = sum - outSum\n    outSum = outSum - queue[queuePosition + 1 ]\n\n    -- Get the data at the current position.\n    local currentDatum = dataGetter(x, y)\n\n    -- Add the current datum to the queue and incoming sum, then add the incoming sum to the main sum.\n    queue[queuePosition + 1 ] = currentDatum\n    inSum = inSum + currentDatum\n    sum = sum + inSum\n\n    -- Increment the queue counter, wrapping around to 0.\n    queueCounter = queueCounter + 1\n    if queueCounter > = kernelSize then\n        queueCounter = 0\n    end\n\n    -- Remove the element in the queue at the current queue position from the incoming sum, and add it to the outgoing sum.\n    outSum = outSum + queue[queueCounter + 1 ]\n    inSum = inSum - queue[queueCounter + 1 ]\n\n    -- Return the iteration variables.\n    return sum, inSum, outSum, queueCounter\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"recalculateblurqueueandsums",children:"recalculateBlurQueueAndSums"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Recalculates and returns the sum, incoming sum, and outgoing sum. Also handles initialising the given queue."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"recalculateBlurQueueAndSums(table queue, integer kernelSize, integer radius, float edgeValue)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"table"}),(0,i.jsx)(n.th,{children:"queue"}),(0,i.jsx)(n.th,{children:"The current queue. This function modifies this table."})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"kernelSize"}),(0,i.jsx)(n.td,{children:"The size of the kernel. (radius * 2) + 1"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"radius"}),(0,i.jsx)(n.td,{children:"The radius of the blur."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"float"}),(0,i.jsx)(n.td,{children:"edgeValue"}),(0,i.jsx)(n.td,{children:"The value on the very edge of the data."})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"float"}),(0,i.jsx)(n.th,{children:"sum"}),(0,i.jsx)(n.th,{children:"The calculated sum."})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"float"}),(0,i.jsx)(n.td,{children:"inSum"}),(0,i.jsx)(n.td,{children:"The calculated incoming sum."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"float"}),(0,i.jsx)(n.td,{children:"outSum"}),(0,i.jsx)(n.td,{children:"The calculated outgoing sum."})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function BlurUtil.recalculateBlurQueueAndSums(queue, kernelSize, radius, edgeValue)\n\n    -- Create the sums.\n    local sum = 0\n    local inSum = 0\n    local outSum = 0\n\n    -- Go over each item in the queue.\n    for i = 1 , kernelSize do\n\n        -- The sum is a pyramid shape based on the queue.This means that the element in the middle of the queue is the tallest.\n        -- Essentially, the multiplier for the edge value based on the index of the queue(i) looks like this, for a radius of 2:\n            -- 1 2 3 2 1\n            -- Also add the value to the out/in sum.\n            if i < = radius + 1 then\n                sum = sum + (edgeValue * i)\n                outSum = outSum + edgeValue\n            else\n                    sum = sum + (edgeValue * ((kernelSize - i) + 1 ))\n                    inSum = inSum + edgeValue\n                end\n\n                -- Add the value to the queue.\n                queue[i] = edgeValue\n            end\n\n            -- Return the calculated values.\n            return sum, inSum, outSum\n        end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"stackblurasync",children:"stackBlurAsync"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Asynchronously blurs the data defined by the given getter and setter. Each row and column are created as separate\ntasks, allowing for the data to be granularly blurred."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"stackBlurAsync(function dataGetter, function dataSetter, integer width, integer height, integer radius,\nAsyncTaskManager? asyncManager, function callback)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"function"}),(0,i.jsx)(n.th,{children:"dataGetter"}),(0,i.jsx)(n.th,{children:"The getter function to use to query the data. function(x, y)"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"function"}),(0,i.jsx)(n.td,{children:"dataSetter"}),(0,i.jsx)(n.td,{children:"The setter function to use to set the data. function(x, y, value)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"width"}),(0,i.jsx)(n.td,{children:"The width of the data."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"height"}),(0,i.jsx)(n.td,{children:"The height of the data."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"radius"}),(0,i.jsx)(n.td,{children:"The radius of the blur."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"AsyncTaskManager?"}),(0,i.jsx)(n.td,{children:"asyncManager"}),(0,i.jsx)(n.td,{children:"The async manager to use, defaulting to g_asyncTaskManager if nil."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"function"}),(0,i.jsx)(n.td,{children:"callback"}),(0,i.jsx)(n.td,{children:"The callback function that fires once the data has been fully blurred."})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function BlurUtil.stackBlurAsync(dataGetter, dataSetter, width, height, radius, asyncManager, callback)\n\n    -- Resolve the task manager.\n    asyncManager = asyncManager or g_asyncTaskManager\n\n    -- Add tasks for each row, then each column.\n        for y = 1 , height do\n            asyncManager:addTask( function ()\n\n                -- Blur the row.\n                BlurUtil.stackBlurRow(dataGetter, dataSetter, width, radius, y)\n            end )\n        end\n\n        for x = 1 , width do\n            asyncManager:addTask( function ()\n\n                -- Blur the column.\n                BlurUtil.stackBlurColumn(dataGetter, dataSetter, height, radius, x)\n\n                -- If this is the very last column, call the callback function.\n                    if x = = width then\n                        callback()\n                    end\n                end )\n            end\n        end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"stackblurcolumn",children:"stackBlurColumn"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Blurs a column at the given x position."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"stackBlurColumn(function dataGetter, function dataSetter, integer height, integer radius, integer x, table queue)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"function"}),(0,i.jsx)(n.th,{children:"dataGetter"}),(0,i.jsx)(n.th,{children:"The getter function to use to query the data. function(x, y)"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"function"}),(0,i.jsx)(n.td,{children:"dataSetter"}),(0,i.jsx)(n.td,{children:"The setter function to use to set the data. function(x, y, value)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"height"}),(0,i.jsx)(n.td,{children:"The height of the data."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"radius"}),(0,i.jsx)(n.td,{children:"The radius of the blur."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"x"}),(0,i.jsx)(n.td,{children:"The x position."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"table"}),(0,i.jsx)(n.td,{children:"queue"}),(0,i.jsx)(n.td,{children:"The current queue. If this is nil, one is created."})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function BlurUtil.stackBlurColumn(dataGetter, dataSetter, height, radius, x, queue)\n\n    -- Calculate the size of the kernel.This is essentially the 2D diameter.\n    local kernelSize = (radius * 2 ) + 1\n\n    -- Calculate the stack size.The stack is a pyramid-shaped sum based on the radius.For example, a radius of 2 has a stack size of 9.\n    local stackSize = radius * (radius + 2 ) + 1\n\n    -- Resolve the queue, reusing any that was given.\n    queue = queue or { }\n\n    -- Recalculate the queue and sums.\n    local edgeValue = dataGetter(x, 1 )\n    local sum, inSum, outSum = BlurUtil.recalculateBlurQueueAndSums(queue, kernelSize, radius, edgeValue)\n\n    -- Start the queue counter in the centre of the kernel.\n    local queueCounter = radius\n\n    -- Define the getter that clamps the y with the radius.\n    local safeGetter = function (x, y)\n        return dataGetter(x, math.min(y + radius, height))\n    end\n\n    -- Go along the height and average the data.\n    for y = 1 , height do\n        sum, inSum, outSum, queueCounter = BlurUtil.iterateStackBlur(safeGetter, dataSetter, queue, kernelSize, stackSize, radius, sum, inSum, outSum, queueCounter, x, y)\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"stackblurhorizontal",children:"stackBlurHorizontal"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Blurs the data horizontally."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"stackBlurHorizontal(function dataGetter, function dataSetter, integer width, integer height, integer radius)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"function"}),(0,i.jsx)(n.th,{children:"dataGetter"}),(0,i.jsx)(n.th,{children:"The getter function to use to query the data. function(x, y)"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"function"}),(0,i.jsx)(n.td,{children:"dataSetter"}),(0,i.jsx)(n.td,{children:"The setter function to use to set the data. function(x, y, value)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"width"}),(0,i.jsx)(n.td,{children:"The width of the data."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"height"}),(0,i.jsx)(n.td,{children:"The height of the data."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"radius"}),(0,i.jsx)(n.td,{children:"The radius of the blur."})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function BlurUtil.stackBlurHorizontal(dataGetter, dataSetter, width, height, radius)\n\n    -- Create the queue once.\n    local queue = { }\n\n    -- Horizontally blur the data.\n    for y = 1 , height do\n        BlurUtil.stackBlurRow(dataGetter, dataSetter, width, radius, y, queue)\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"stackblurrow",children:"stackBlurRow"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Blurs a row at the given y position."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"stackBlurRow(function dataGetter, function dataSetter, integer width, integer radius, integer y, table queue)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"function"}),(0,i.jsx)(n.th,{children:"dataGetter"}),(0,i.jsx)(n.th,{children:"The getter function to use to query the data. function(x, y)"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"function"}),(0,i.jsx)(n.td,{children:"dataSetter"}),(0,i.jsx)(n.td,{children:"The setter function to use to set the data. function(x, y, value)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"width"}),(0,i.jsx)(n.td,{children:"The width of the data."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"radius"}),(0,i.jsx)(n.td,{children:"The radius of the blur."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"y"}),(0,i.jsx)(n.td,{children:"The y position."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"table"}),(0,i.jsx)(n.td,{children:"queue"}),(0,i.jsx)(n.td,{children:"The current queue. If this is nil, one is created."})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function BlurUtil.stackBlurRow(dataGetter, dataSetter, width, radius, y, queue)\n\n    -- Calculate the size of the kernel.This is essentially the 2D diameter.\n    local kernelSize = (radius * 2 ) + 1\n\n    -- Calculate the stack size.The stack is a pyramid-shaped sum based on the radius.For example, a radius of 2 has a stack size of 9.\n    local stackSize = radius * (radius + 2 ) + 1\n\n    -- Resolve the queue, reusing any that was given.\n    queue = queue or { }\n\n    -- Recalculate the queue and sums.\n    local edgeValue = dataGetter( 1 , y)\n    local sum, inSum, outSum = BlurUtil.recalculateBlurQueueAndSums(queue, kernelSize, radius, edgeValue)\n\n    -- Start the queue counter in the centre of the kernel.\n    local queueCounter = radius\n\n    -- Define the getter that clamps the x with the radius.\n    local safeGetter = function (x, y)\n        return dataGetter( math.min(x + radius, width), y)\n    end\n\n    -- Go along the width and average the data.\n    for x = 1 , width do\n        sum, inSum, outSum, queueCounter = BlurUtil.iterateStackBlur(safeGetter, dataSetter, queue, kernelSize, stackSize, radius, sum, inSum, outSum, queueCounter, x, y)\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"stackblurvertical",children:"stackBlurVertical"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Blurs the data vertically."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"stackBlurVertical(function dataGetter, function dataSetter, integer width, integer height, integer radius)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"function"}),(0,i.jsx)(n.th,{children:"dataGetter"}),(0,i.jsx)(n.th,{children:"The getter function to use to query the data. function(x, y)"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"function"}),(0,i.jsx)(n.td,{children:"dataSetter"}),(0,i.jsx)(n.td,{children:"The setter function to use to set the data. function(x, y, value)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"width"}),(0,i.jsx)(n.td,{children:"The width of the data."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"height"}),(0,i.jsx)(n.td,{children:"The height of the data."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"radius"}),(0,i.jsx)(n.td,{children:"The radius of the blur."})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function BlurUtil.stackBlurVertical(dataGetter, dataSetter, width, height, radius)\n\n    -- Create the queue once.\n    local queue = { }\n\n    -- Vertically blur the data.\n    for x = 1 , width do\n        BlurUtil.stackBlurColumn(dataGetter, dataSetter, height, radius, x, queue)\n    end\nend\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453(e,n,t){t.d(n,{R:()=>l,x:()=>d});var r=t(96540);const i={},s=r.createContext(i);function l(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);