"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[28727],{23628(e,n,t){t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"script/Hud/ExtendedCombineHUDExtension","title":"ExtendedCombineHUDExtension","description":"ExtendedCombineHUDExtension","source":"@site/../docs/script/Hud/ExtendedCombineHUDExtension.md","sourceDirName":"script/Hud","slug":"/script/Hud/ExtendedCombineHUDExtension","permalink":"/FS25-Community-LUADOC/script/Hud/ExtendedCombineHUDExtension","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"ContextActionDisplay","permalink":"/FS25-Community-LUADOC/script/Hud/ContextActionDisplay"},"next":{"title":"ExtendedSowingMachineHUDExtension","permalink":"/FS25-Community-LUADOC/script/Hud/ExtendedSowingMachineHUDExtension"}}');var l=t(74848),i=t(28453);const r={},o=void 0,d={},a=[{value:"ExtendedCombineHUDExtension",id:"extendedcombinehudextension",level:2},{value:"delete",id:"delete",level:3},{value:"draw",id:"draw",level:3},{value:"getHeight",id:"getheight",level:3},{value:"new",id:"new",level:3},{value:"setColorBlindMode",id:"setcolorblindmode",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"extendedcombinehudextension",children:"ExtendedCombineHUDExtension"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Custom HUD drawing extension for combine data\nDisplays the current yield and worked area"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Functions"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#delete",children:"delete"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#draw",children:"draw"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getheight",children:"getHeight"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#new",children:"new"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#setcolorblindmode",children:"setColorBlindMode"})}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"delete",children:"delete"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Delete this instance and clean up resources."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"delete()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function ExtendedCombineHUDExtension:delete()\n    self.backgroundTop:delete()\n    self.backgroundMiddle:delete()\n    self.backgroundBottom:delete()\n\n    self.separatorVertical:delete()\n    self.yieldPercentageBar:delete()\n    self.currentYieldOverlay:delete()\n    self.workAreaOverlay:delete()\n    self.workAreaOverlayTotal:delete()\n\n    g_messageCenter:unsubscribeAll( self )\n\n    self.vehicle = nil\n    self.combine = nil\n    self.extendedCombine = nil\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"draw",children:"draw"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Draw mixing ratio information for a mixing wagon when it is active."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"draw()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"inputHelpDisplay"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"posX"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"posY"})]})]})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function ExtendedCombineHUDExtension:draw(inputHelpDisplay, posX, posY)\n    if self.extendedCombine = = nil then\n        return posY\n    end\n\n    local yield = self.extendedCombine.lastYieldWeight\n    local yieldPct = self.extendedCombine.lastYieldPercentage\n    local yieldPotential = self.extendedCombine.lastYieldPotential\n    local yieldRatingPct = (yieldPct - 50 ) / (yieldPotential - 50 )\n    local workedHectars = self.combine.workedHectars - self.combine.workedHectarsInitial\n    local workedHectarsTotal = self.combine.workedHectars\n\n    local areaUnit = g_i18n:getText( "unit_haShort" )\n    local yieldUnit = g_i18n:getText( "unit_tonsShort" ) .. " / " .. areaUnit\n\n    self.backgroundTop:setPosition(posX, posY - self.backgroundTop.height)\n    self.backgroundMiddle:setPosition(posX, posY - self.backgroundTop.height - self.backgroundMiddle.height)\n    self.backgroundBottom:setPosition(posX, posY - self.backgroundTop.height - self.backgroundMiddle.height - self.backgroundBottom.height)\n    self.backgroundTop:render()\n    self.backgroundMiddle:render()\n    self.backgroundBottom:render()\n\n    setTextAlignment(RenderText.ALIGN_CENTER)\n    setTextVerticalAlignment(RenderText.VERTICAL_ALIGN_MIDDLE)\n\n    local contentOffset = ( self.displayWidth - self.contentWidth) * 0.5\n\n    posX = posX + contentOffset\n\n    self.currentYieldOverlay:setPosition(posX, posY - self.displayHeight * 0.5 - self.currentYieldOverlay.height * 0.5 )\n    self.currentYieldOverlay:render()\n\n    posX = posX + self.iconX + self.spacingX\n\n    setTextBold( true )\n    renderLimitedText(posX + self.textWidth * 0.5 , posY - self.displayHeight * 0.3 , inputHelpDisplay.textSize * 1.25 , string.format( "%.1f" , yield ), self.textWidth)\n\n    setTextBold( false )\n    renderLimitedText(posX + self.textWidth * 0.5 , posY - self.displayHeight * 0.7 , inputHelpDisplay.textSize, yieldUnit, self.textWidth)\n\n    posX = posX + self.textWidth + self.spacingX\n\n    self.separatorVertical:setPosition(posX, posY - self.displayHeight * 0.5 - self.separatorVertical.height * 0.5 )\n    self.separatorVertical:render()\n\n    posX = posX + self.spacingX\n\n    setTextBold( true )\n    renderLimitedText(posX + self.textWidth * 0.5 , posY - self.displayHeight * 0.3 , inputHelpDisplay.textSize * 1.25 , string.format( "%d" , yieldPct), self.textWidth)\n\n    setTextBold( false )\n    renderLimitedText(posX + self.textWidth * 0.5 , posY - self.displayHeight * 0.65 , inputHelpDisplay.textSize, "%" , self.textWidth)\n\n    self.yieldPercentageBar:setPosition(posX + self.textWidth * 0.5 - self.yieldPercentageBar.width * 0.5 , posY - self.displayHeight * 0.92 )\n\n    local gradient = ExtendedCombineHUDExtension.GRADIENT[ self.isColorBlindMode]\n    local r, g, b = gradient:get(yieldRatingPct)\n    self.yieldPercentageBar:setColor(r, g, b, 1 )\n    self.yieldPercentageBar:render()\n\n    posX = posX + self.textWidth + self.spacingX\n\n    self.separatorVertical:setPosition(posX, posY - self.displayHeight * 0.5 - self.separatorVertical.height * 0.5 )\n    self.separatorVertical:render()\n\n    posX = posX + self.spacingX\n\n    self.workAreaOverlay:setPosition(posX, posY - self.displayHeight * 0.5 - self.workAreaOverlay.height * 0.5 )\n    self.workAreaOverlay:render()\n\n    posX = posX + self.iconX + self.spacingX\n\n    setTextBold( true )\n    renderLimitedText(posX + self.textWidth * 0.5 , posY - self.displayHeight * 0.3 , inputHelpDisplay.textSize * 1.25 , string.format( "%.1f" , workedHectars), self.textWidth)\n\n    setTextBold( false )\n    renderLimitedText(posX + self.textWidth * 0.5 , posY - self.displayHeight * 0.7 , inputHelpDisplay.textSize, areaUnit, self.textWidth)\n\n    posX = posX + self.textWidth + self.spacingX\n\n    self.separatorVertical:setPosition(posX, posY - self.displayHeight * 0.5 - self.separatorVertical.height * 0.5 )\n    self.separatorVertical:render()\n\n    posX = posX + self.spacingX\n\n    self.workAreaOverlayTotal:setPosition(posX, posY - self.displayHeight * 0.5 - self.workAreaOverlayTotal.height * 0.5 )\n    self.workAreaOverlayTotal:render()\n\n    posX = posX + self.iconX + self.spacingX\n\n    setTextBold( true )\n    renderLimitedText(posX + self.textWidth * 0.5 , posY - self.displayHeight * 0.3 , inputHelpDisplay.textSize * 1.25 , string.format( "%.1f" , workedHectarsTotal), self.textWidth)\n\n    setTextBold( false )\n    renderLimitedText(posX + self.textWidth * 0.5 , posY - self.displayHeight * 0.7 , inputHelpDisplay.textSize, areaUnit, self.textWidth)\n\n    setTextVerticalAlignment(RenderText.VERTICAL_ALIGN_BASELINE)\n    setTextAlignment(RenderText.ALIGN_LEFT)\n\n    return posY - self.displayHeight\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"getheight",children:"getHeight"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Get this HUD extension's display height."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getHeight()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"Display"}),(0,l.jsx)(n.th,{children:"height in screen space"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function ExtendedCombineHUDExtension:getHeight()\n    return self.displayHeight or 0\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"new",children:"new"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Create a new instance of ExtendedCombineHUDExtension."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"new(table vehicle, )"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"table"}),(0,l.jsx)(n.th,{children:"vehicle"}),(0,l.jsx)(n.th,{children:"Vehicle which has the specialization required by a sub-class"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"customMt"}),(0,l.jsx)(n.td,{})]})})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function ExtendedCombineHUDExtension.new(vehicle, customMt)\n    local self = setmetatable( { } , customMt or ExtendedCombineHUDExtension _mt)\n\n    self.priority = GS_PRIO_LOW\n\n    self.vehicle = vehicle\n    self.combine = vehicle.spec_combine\n    self.extendedCombine = vehicle[ ExtendedCombine.SPEC_TABLE_NAME]\n\n    self.backgroundTop = g_overlayManager:createOverlay( "precisionFarming.shortcutBox_top" , 0 , 0 , 0 , 0 )\n    self.backgroundMiddle = g_overlayManager:createOverlay( "precisionFarming.shortcutBox_middle" , 0 , 0 , 0 , 0 )\n    self.backgroundBottom = g_overlayManager:createOverlay( "precisionFarming.shortcutBox_bottom" , 0 , 0 , 0 , 0 )\n\n    local r, g, b, a = unpack(HUD.COLOR.BACKGROUND)\n    self.backgroundTop:setColor(r, g, b, a)\n    self.backgroundMiddle:setColor(r, g, b, a)\n    self.backgroundBottom:setColor(r, g, b, a)\n\n    self.separatorVertical = g_overlayManager:createOverlay(g_plainColorSliceId, 0 , 0 , 0 , 0 )\n    self.separatorVertical:setColor( 1 , 1 , 1 , 0.25 )\n\n    self.yieldPercentageBar = g_overlayManager:createOverlay(g_plainColorSliceId, 0 , 0 , 0 , 0 )\n    self.yieldPercentageBar:setColor( 1 , 1 , 1 , 1 )\n\n    self.currentYieldOverlay = g_overlayManager:createOverlay( "precisionFarming.currentYield" , 0 , 0 , 0 , 0 )\n    self.currentYieldOverlay:setColor( 1 , 1 , 1 , 1 )\n\n    self.workAreaOverlay = g_overlayManager:createOverlay( "precisionFarming.workedArea" , 0 , 0 , 0 , 0 )\n    self.workAreaOverlay:setColor( 1 , 1 , 1 , 1 )\n\n    self.workAreaOverlayTotal = g_overlayManager:createOverlay( "precisionFarming.workedAreaTotal" , 0 , 0 , 0 , 0 )\n    self.workAreaOverlayTotal:setColor( 1 , 1 , 1 , 1 )\n\n    self.isColorBlindMode = g_gameSettings:getValue(GameSettings.SETTING.USE_COLORBLIND_MODE) or false\n\n    g_messageCenter:subscribe(MessageType.SETTING_CHANGED[GameSettings.SETTING.USE_COLORBLIND_MODE], self.setColorBlindMode, self )\n    g_messageCenter:subscribe(MessageType.SETTING_CHANGED[GameSettings.SETTING.UI_SCALE], self.storeScaledValues, self )\n\n    self:storeScaledValues()\n\n    return self\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"setcolorblindmode",children:"setColorBlindMode"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Determine if the HUD extension should be drawn."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"setColorBlindMode()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"isActive"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function ExtendedCombineHUDExtension:setColorBlindMode(isActive)\n    if isActive ~ = self.isColorBlindMode then\n        self.isColorBlindMode = isActive\n    end\nend\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},28453(e,n,t){t.d(n,{R:()=>r,x:()=>o});var s=t(96540);const l={},i=s.createContext(l);function r(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);