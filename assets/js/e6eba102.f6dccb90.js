"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[95375],{28453(e,n,t){t.d(n,{R:()=>r,x:()=>c});var i=t(96540);const s={},l=i.createContext(s);function r(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(l.Provider,{value:n},e.children)}},35738(e,n,t){t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>d,frontMatter:()=>r,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"script/Specializations/SupportVehicle","title":"SupportVehicle","description":"SupportVehicle","source":"@site/../docs/script/Specializations/SupportVehicle.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/SupportVehicle","permalink":"/FS25-Community-LUADOC/script/Specializations/SupportVehicle","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"StumpCutter","permalink":"/FS25-Community-LUADOC/script/Specializations/StumpCutter"},"next":{"title":"Suspensions","permalink":"/FS25-Community-LUADOC/script/Specializations/Suspensions"}}');var s=t(74848),l=t(28453);const r={},c=void 0,o={},h=[{value:"SupportVehicle",id:"supportvehicle",level:2},{value:"addSupportVehicle",id:"addsupportvehicle",level:3},{value:"enableSupportVehicle",id:"enablesupportvehicle",level:3},{value:"getAllowMultipleAttachments",id:"getallowmultipleattachments",level:3},{value:"getIsReadyToFinishDetachProcess",id:"getisreadytofinishdetachprocess",level:3},{value:"getShowAttachableMapHotspot",id:"getshowattachablemaphotspot",level:3},{value:"initSpecialization",id:"initspecialization",level:3},{value:"onDelete",id:"ondelete",level:3},{value:"onLoad",id:"onload",level:3},{value:"onPostDetach",id:"onpostdetach",level:3},{value:"onUpdate",id:"onupdate",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3},{value:"registerFunctions",id:"registerfunctions",level:3},{value:"registerOverwrittenFunctions",id:"registeroverwrittenfunctions",level:3},{value:"removeSupportVehicle",id:"removesupportvehicle",level:3},{value:"resolveMultipleAttachments",id:"resolvemultipleattachments",level:3},{value:"startDetachProcess",id:"startdetachprocess",level:3},{value:"supportVehicleLoaded",id:"supportvehicleloaded",level:3}];function a(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"supportvehicle",children:"SupportVehicle"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Specialization for spawning a support vehicle while detaching and removing it again on attach"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Functions"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#addsupportvehicle",children:"addSupportVehicle"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#enablesupportvehicle",children:"enableSupportVehicle"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getallowmultipleattachments",children:"getAllowMultipleAttachments"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getisreadytofinishdetachprocess",children:"getIsReadyToFinishDetachProcess"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getshowattachablemaphotspot",children:"getShowAttachableMapHotspot"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#initspecialization",children:"initSpecialization"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#ondelete",children:"onDelete"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onpostdetach",children:"onPostDetach"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onupdate",children:"onUpdate"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registeroverwrittenfunctions",children:"registerOverwrittenFunctions"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#removesupportvehicle",children:"removeSupportVehicle"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#resolvemultipleattachments",children:"resolveMultipleAttachments"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#startdetachprocess",children:"startDetachProcess"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#supportvehicleloaded",children:"supportVehicleLoaded"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"addsupportvehicle",children:"addSupportVehicle"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"addSupportVehicle()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"isDetach"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function SupportVehicle:addSupportVehicle(isDetach)\n    local spec = self.spec_supportVehicle\n    if spec.storeItem ~ = nil and spec.supportVehicle = = nil and not spec.isLoadingSupportVehicle and spec.loadedSupportVehicle = = nil then\n        local inputAttacherJoint = self:getInputAttacherJointByJointDescIndex(spec.inputAttacherJointIndex)\n        if inputAttacherJoint ~ = nil then\n            local x, y, z = getWorldTranslation(inputAttacherJoint.node)\n            if isDetach = = true then\n                local dirX, _, dirZ = localDirectionToWorld(inputAttacherJoint.node, 1 , 0 , 0 )\n                x, y, z = x + dirX * spec.spawnOffset, y, z + dirZ * spec.spawnOffset\n            end\n\n            y = getTerrainHeightAtWorldPos(g_terrainNode, x, 0 , z) + spec.terrainOffset\n\n            local xRot, yRot, zRot = localRotationToWorld(inputAttacherJoint.node, - math.pi, 0 , - math.pi)\n\n            spec.isLoadingSupportVehicle = true\n\n            local data = VehicleLoadingData.new()\n            data:setStoreItem(spec.storeItem)\n            data:setPosition(x, y, z)\n            data:setRotation(xRot, yRot, zRot)\n            data:setPropertyState(VehiclePropertyState.NONE)\n            data:setOwnerFarmId( self:getActiveFarm())\n            data:setConfigurations(spec.configurations)\n\n            data:load( SupportVehicle.supportVehicleLoaded, self , { isDetach = isDetach } )\n        end\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"enablesupportvehicle",children:"enableSupportVehicle"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"enableSupportVehicle()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function SupportVehicle:enableSupportVehicle()\n    local spec = self.spec_supportVehicle\n    if spec.loadedSupportVehicle ~ = nil then\n        local vehicle = spec.loadedSupportVehicle\n        spec.loadedSupportVehicle = nil\n\n        vehicle:setIsSupportVehicle()\n\n        self:setReducedComponentMass( true )\n\n        local inputAttacherJoint = self:getInputAttacherJointByJointDescIndex(spec.inputAttacherJointIndex)\n        if inputAttacherJoint ~ = nil then\n            local offset = inputAttacherJoint.jointOrigOffsetComponent\n            local rotOffset = inputAttacherJoint.jointOrigRotOffsetComponent\n\n            if vehicle.getAttacherJointByJointDescIndex ~ = nil then\n                local attacherJoint = vehicle:getAttacherJointByJointDescIndex(spec.attacherJointIndex)\n                if attacherJoint ~ = nil then\n                    -- move the support vehicle by the inverted offset from the attacher joint to the root node\n                    -- like this ourself is still placed with the same X offset to the attacherJoint were it was mounted before\n                    local x, y, z = getWorldTranslation(vehicle.rootNode)\n                    local rx, ry, rz = getWorldRotation(vehicle.rootNode)\n\n                    local ox, oy, oz = localDirectionToWorld(vehicle.rootNode, attacherJoint.jointOrigOffsetComponent[ 1 ], 0 , attacherJoint.jointOrigOffsetComponent[ 3 ])\n                    x, y, z = x - ox, y - oy, z - oz\n                    y = math.max(getTerrainHeightAtWorldPos(g_terrainNode, x, 0 , z) + spec.terrainOffset, y)\n\n                    vehicle:removeFromPhysics()\n                    vehicle:setAbsolutePosition(x, y, z, rx, ry, rz)\n                    vehicle:addToPhysics()\n\n                    -- now move ourself to the exact attaching position in the support vehicle\n                    x, y, z = localToWorld(attacherJoint.jointTransform, unpack(offset))\n                    rx, ry, rz = localRotationToWorld(attacherJoint.jointTransform, unpack(rotOffset))\n\n                    self:removeFromPhysics()\n                    self:setAbsolutePosition(x, y, z, rx, ry, rz)\n                    self:addToPhysics()\n\n                    vehicle:attachImplement( self , spec.inputAttacherJointIndex, spec.attacherJointIndex, true , nil , nil , true )\n\n                    self.rootVehicle:updateSelectableObjects()\n                    self.rootVehicle:setSelectedVehicle( self )\n\n                    --#debug if vehicle.spec_dynamicMountAttacher ~ = nil and vehicle.spec_dynamicMountAttacher.dynamicMountAttacherTrigger ~ = nil then\n                        --#debug Logging.warning(\"DynamicMountAttacher is not allowed for support vehicle '%s'\", vehicle.configFileName)\n                            --#debug end\n\n                            spec.supportVehicle = vehicle\n                            return\n                        end\n                    end\n                end\n\n                vehicle:delete()\n            end\n        end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getallowmultipleattachments",children:"getAllowMultipleAttachments"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Function to allow showing the attachment dialog even if the attachable is already attached"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getAllowMultipleAttachments()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function SupportVehicle:getAllowMultipleAttachments(superFunc)\n    return self.spec_supportVehicle.filename ~ = nil\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getisreadytofinishdetachprocess",children:"getIsReadyToFinishDetachProcess"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getIsReadyToFinishDetachProcess()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function SupportVehicle:getIsReadyToFinishDetachProcess(superFunc)\n    local spec = self.spec_supportVehicle\n    return superFunc( self ) and( not spec.isLoadingSupportVehicle or spec.loadedSupportVehicle ~ = nil )\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getshowattachablemaphotspot",children:"getShowAttachableMapHotspot"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getShowAttachableMapHotspot()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function SupportVehicle:getShowAttachableMapHotspot(superFunc)\n    if self.spec_supportVehicle.supportVehicle ~ = nil then\n        return self.spec_supportVehicle.supportVehicle:getAttacherVehicle() = = nil\n    end\n\n    return superFunc( self )\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"initspecialization",children:"initSpecialization"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"initSpecialization()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function SupportVehicle.initSpecialization()\n    local schema = Vehicle.xmlSchema\n    schema:setXMLSpecializationType( "SupportVehicle" )\n\n    schema:register(XMLValueType.STRING, "vehicle.supportVehicle#filename" , "Path to support vehicle xml" )\n    schema:register(XMLValueType.INT, "vehicle.supportVehicle#attacherJointIndex" , "Attacher joint index on support vehicle" , 1 )\n    schema:register(XMLValueType.INT, "vehicle.supportVehicle#inputAttacherJointIndex" , "Input attacher joint index on own vehicle" , 1 )\n    schema:register(XMLValueType.FLOAT, "vehicle.supportVehicle#terrainOffset" , "Spawn Offset from terrain for the support vehicle" , 0.2 )\n        schema:register(XMLValueType.FLOAT, "vehicle.supportVehicle#spawnOffset" , "Tool will be moved this distance away in X direction of the attacher joint" , 0.75 )\n\n        schema:register(XMLValueType.STRING, "vehicle.supportVehicle.configuration(?)#name" , "Configuration name" )\n        schema:register(XMLValueType.INT, "vehicle.supportVehicle.configuration(?)#id" , "Configuration id" )\n\n        schema:setXMLSpecializationType()\n    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"ondelete",children:"onDelete"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Called on delete"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onDelete()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function SupportVehicle:onDelete()\n    if not self.isReconfigurating then\n        self:removeSupportVehicle()\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onLoad()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function SupportVehicle:onLoad(savegame)\n    local spec = self.spec_supportVehicle\n\n    local baseKey = "vehicle.supportVehicle"\n\n    spec.attacherJointIndex = self.xmlFile:getValue(baseKey .. "#attacherJointIndex" , 1 )\n    spec.inputAttacherJointIndex = self.xmlFile:getValue(baseKey .. "#inputAttacherJointIndex" , 1 )\n\n    spec.terrainOffset = self.xmlFile:getValue(baseKey .. "#terrainOffset" , 0.2 )\n    spec.spawnOffset = self.xmlFile:getValue(baseKey .. "#spawnOffset" , 0.75 )\n\n    spec.heightChecks = { }\n\n    local filename = self.xmlFile:getValue(baseKey .. "#filename" )\n    if filename ~ = nil then\n        spec.filename = Utils.getFilename(filename, self.customEnvironment)\n\n        local storeItem = g_storeManager:getItemByXMLFilename(spec.filename)\n        if storeItem ~ = nil then\n            spec.storeItem = storeItem\n\n            local size = StoreItemUtil.getSizeValues(storeItem.xmlFilename, "vehicle" , storeItem.rotation)\n            table.insert(spec.heightChecks, { size.width / 2 + size.widthOffset, size.length / 2 + size.lengthOffset } )\n            table.insert(spec.heightChecks, { - size.width / 2 + size.widthOffset, size.length / 2 + size.lengthOffset } )\n            table.insert(spec.heightChecks, { size.width / 2 + size.widthOffset, - size.length / 2 + size.lengthOffset } )\n            table.insert(spec.heightChecks, { - size.width / 2 + size.widthOffset, - size.length / 2 + size.lengthOffset } )\n        else\n                Logging.xmlWarning( self.xmlFile, "Unable to find support vehicle \'%s\'." , filename)\n                spec.filename = nil\n            end\n        end\n\n        spec.configurations = { }\n        local i = 0\n        while true do\n            local configurationKey = string.format( "%s.configuration(%d)" , baseKey, i)\n            if not self.xmlFile:hasProperty(configurationKey) then\n                break\n            end\n\n            local name = self.xmlFile:getValue(configurationKey .. "#name" )\n            local id = self.xmlFile:getValue(configurationKey .. "#id" )\n            if name ~ = nil and id ~ = nil then\n                spec.configurations[name] = id\n            end\n\n            i = i + 1\n        end\n\n        spec.firstRun = true\n        spec.loadedSupportVehicle = nil\n        spec.isLoadingSupportVehicle = false\n\n        if not self.isServer or spec.storeItem = = nil then\n            SpecializationUtil.removeEventListener( self , "onDelete" , SupportVehicle )\n            SpecializationUtil.removeEventListener( self , "onUpdate" , SupportVehicle )\n            SpecializationUtil.removeEventListener( self , "onPostDetach" , SupportVehicle )\n        end\n    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"onpostdetach",children:"onPostDetach"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Called if vehicle gets detached"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onPostDetach(table attacherVehicle, table implement)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"attacherVehicle"}),(0,s.jsx)(n.th,{children:"attacher vehicle"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"table"}),(0,s.jsx)(n.td,{children:"implement"}),(0,s.jsx)(n.td,{children:"implement"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function SupportVehicle:onPostDetach(attacherVehicle, implement)\n    self:enableSupportVehicle()\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onupdate",children:"onUpdate"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onUpdate()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"dt"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"isActiveForInput"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"isActiveForInputIgnoreSelection"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"isSelected"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function SupportVehicle:onUpdate(dt, isActiveForInput, isActiveForInputIgnoreSelection, isSelected)\n    local spec = self.spec_supportVehicle\n    if spec.firstRun and not g_currentMission.vehicleSystem.isReloadRunning then\n        if self:getAttacherVehicle() = = nil then\n            self:addSupportVehicle( false )\n        else\n                if spec.supportVehicle = = nil then\n                    local attacherVehicle = self:getAttacherVehicle()\n                    if attacherVehicle.configFileName = = spec.filename then\n                        spec.supportVehicle = attacherVehicle\n                        spec.supportVehicle:setIsSupportVehicle()\n\n                        self:setReducedComponentMass( true )\n                    end\n                end\n            end\n\n            spec.firstRun = false\n        end\n    end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"prerequisitesPresent()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function SupportVehicle.prerequisitesPresent(specializations)\n    return SpecializationUtil.hasSpecialization( AttacherJoints , specializations) and SpecializationUtil.hasSpecialization( Mountable , specializations)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function SupportVehicle.registerEventListeners(vehicleType)\n    SpecializationUtil.registerEventListener(vehicleType, "onLoad" , SupportVehicle )\n    SpecializationUtil.registerEventListener(vehicleType, "onDelete" , SupportVehicle )\n    SpecializationUtil.registerEventListener(vehicleType, "onUpdate" , SupportVehicle )\n    SpecializationUtil.registerEventListener(vehicleType, "onPostDetach" , SupportVehicle )\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function SupportVehicle.registerFunctions(vehicleType)\n    SpecializationUtil.registerFunction(vehicleType, "addSupportVehicle" , SupportVehicle.addSupportVehicle)\n    SpecializationUtil.registerFunction(vehicleType, "enableSupportVehicle" , SupportVehicle.enableSupportVehicle)\n    SpecializationUtil.registerFunction(vehicleType, "removeSupportVehicle" , SupportVehicle.removeSupportVehicle)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registeroverwrittenfunctions",children:"registerOverwrittenFunctions"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerOverwrittenFunctions()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function SupportVehicle.registerOverwrittenFunctions(vehicleType)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getAllowMultipleAttachments" , SupportVehicle.getAllowMultipleAttachments)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "resolveMultipleAttachments" , SupportVehicle.resolveMultipleAttachments)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getShowAttachableMapHotspot" , SupportVehicle.getShowAttachableMapHotspot)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getIsReadyToFinishDetachProcess" , SupportVehicle.getIsReadyToFinishDetachProcess)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "startDetachProcess" , SupportVehicle.startDetachProcess)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"removesupportvehicle",children:"removeSupportVehicle"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"removeSupportVehicle()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function SupportVehicle:removeSupportVehicle()\n    local spec = self.spec_supportVehicle\n    if spec.supportVehicle ~ = nil and not spec.supportVehicle.isDeleted then\n        spec.supportVehicle:delete()\n    end\n    spec.supportVehicle = nil\n\n    if self.isServer and self.components ~ = nil then\n        self:setReducedComponentMass( false )\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"resolvemultipleattachments",children:"resolveMultipleAttachments"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Function that is called before attaching a attachable to second vehicle"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"resolveMultipleAttachments()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function SupportVehicle:resolveMultipleAttachments(superFunc)\n    if self.isServer then\n        self:removeSupportVehicle()\n    end\n\n    superFunc( self )\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"startdetachprocess",children:"startDetachProcess"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"startDetachProcess()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"noEventSend"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function SupportVehicle:startDetachProcess(superFunc, noEventSend)\n    if not self.isDeleting then\n        self:addSupportVehicle( true )\n    end\n\n    return superFunc( self , noEventSend)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"supportvehicleloaded",children:"supportVehicleLoaded"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Called after the additional attachment was loaded"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"supportVehicleLoaded()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"vehicles"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"vehicleLoadState"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"asyncCallbackArguments"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function SupportVehicle:supportVehicleLoaded(vehicles, vehicleLoadState, asyncCallbackArguments)\n    local spec = self.spec_supportVehicle\n\n    if vehicleLoadState = = VehicleLoadingState.OK and #vehicles > 0 then\n        if not self.isDeleted then\n            spec.loadedSupportVehicle = vehicles[ 1 ]\n\n            if asyncCallbackArguments.isDetach ~ = true then\n                self:enableSupportVehicle()\n            end\n        else\n                -- if the parent vehicle was deleted while loading the support vehicle we remove also the support vehicle\n                    for _, vehicle in ipairs(vehicles) do\n                        vehicle:delete()\n                    end\n                end\n            end\n\n            spec.isLoadingSupportVehicle = false\n        end\n\n"})})]})}function d(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}}}]);