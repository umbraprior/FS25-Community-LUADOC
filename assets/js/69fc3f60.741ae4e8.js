"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[71660],{28453(e,n,s){s.d(n,{R:()=>c,x:()=>t});var i=s(96540);const l={},r=i.createContext(l);function c(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:c(e.components),i.createElement(r.Provider,{value:n},e.children)}},43005(e,n,s){s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"script/Specializations/PlaceableHusbandryFence","title":"PlaceableHusbandryFence","description":"PlaceableHusbandryFence","source":"@site/../docs/script/Specializations/PlaceableHusbandryFence.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/PlaceableHusbandryFence","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableHusbandryFence","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"PlaceableHusbandryFeedingRobot","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableHusbandryFeedingRobot"},"next":{"title":"PlaceableHusbandryFood","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableHusbandryFood"}}');var l=s(74848),r=s(28453);const c={},t=void 0,a={},d=[{value:"PlaceableHusbandryFence",id:"placeablehusbandryfence",level:2},{value:"getCanBePlacedAt",id:"getcanbeplacedat",level:3},{value:"getFence",id:"getfence",level:3},{value:"getHasCustomizableFence",id:"gethascustomizablefence",level:3},{value:"loadFromXMLFile",id:"loadfromxmlfile",level:3},{value:"onDelete",id:"ondelete",level:3},{value:"onFenceI3DLoaded",id:"onfencei3dloaded",level:3},{value:"onLoad",id:"onload",level:3},{value:"onPreFinalizePlacement",id:"onprefinalizeplacement",level:3},{value:"onReadStream",id:"onreadstream",level:3},{value:"onWriteStream",id:"onwritestream",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3},{value:"registerFunctions",id:"registerfunctions",level:3},{value:"registerOverwrittenFunctions",id:"registeroverwrittenfunctions",level:3},{value:"registerSavegameXMLPaths",id:"registersavegamexmlpaths",level:3},{value:"registerXMLPaths",id:"registerxmlpaths",level:3},{value:"setPreviewPosition",id:"setpreviewposition",level:3},{value:"updateHusbandryFence",id:"updatehusbandryfence",level:3}];function o(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"placeablehusbandryfence",children:"PlaceableHusbandryFence"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Specialization for placeables"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Functions"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getcanbeplacedat",children:"getCanBePlacedAt"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#getfence",children:"getFence"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#gethascustomizablefence",children:"getHasCustomizableFence"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#loadfromxmlfile",children:"loadFromXMLFile"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#ondelete",children:"onDelete"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#onfencei3dloaded",children:"onFenceI3DLoaded"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#onprefinalizeplacement",children:"onPreFinalizePlacement"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#onreadstream",children:"onReadStream"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#onwritestream",children:"onWriteStream"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#registeroverwrittenfunctions",children:"registerOverwrittenFunctions"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#registersavegamexmlpaths",children:"registerSavegameXMLPaths"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#registerxmlpaths",children:"registerXMLPaths"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#setpreviewposition",children:"setPreviewPosition"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#updatehusbandryfence",children:"updateHusbandryFence"})}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"getcanbeplacedat",children:"getCanBePlacedAt"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getCanBePlacedAt()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"superFunc"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"x"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"y"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"z"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"farmId"})]})]})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryFence:getCanBePlacedAt(superFunc, x, y, z, farmId)\n    local spec = self.spec_husbandryFence\n    if not self.spec_husbandryFence.canBePlaced then\n        local lastError = spec.lastFenceError\n        local errorMessageLocaKey = ConstructionBrushNewFence.SEGMENT_ERROR_TO_MESSAGE[lastError] or "warning_canNotPlaceFence"\n\n        return false , g_i18n:getText(errorMessageLocaKey)\n    end\n\n    return superFunc( self , x, y, z, farmId)\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"getfence",children:"getFence"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getFence()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryFence:getFence()\n    local spec = self.spec_husbandryFence\n    return spec.fence\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"gethascustomizablefence",children:"getHasCustomizableFence"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"getHasCustomizableFence()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryFence:getHasCustomizableFence()\n    local spec = self.spec_husbandryFence\n    return spec.hasCustomizableFence\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"loadfromxmlfile",children:"loadFromXMLFile"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"loadFromXMLFile(XMLFile xmlFile, string key)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"XMLFile"}),(0,l.jsx)(n.th,{children:"xmlFile"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"string"}),(0,l.jsx)(n.td,{children:"key"})]})})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryFence:loadFromXMLFile(xmlFile, key)\n    local spec = self.spec_husbandryFence\n    if spec.fence ~ = nil then\n        if xmlFile:hasProperty(key .. ".fence" ) then\n            spec.fence:loadFromXMLFile(xmlFile, key .. ".fence" )\n        end\n    end\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"ondelete",children:"onDelete"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"onDelete()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryFence:onDelete()\n    local spec = self.spec_husbandryFence\n\n    if self.fenceXmlFile ~ = nil then\n        self.fenceXmlFile:delete()\n        self.fenceXmlFile = nil\n    end\n\n    if spec.previewSegments ~ = nil then\n        for _, segment in ipairs(spec.previewSegments) do\n            segment:delete()\n        end\n        spec.previewSegments = nil\n    end\n\n    if spec.fence ~ = nil then\n        spec.fence:delete()\n        spec.fence = nil\n    end\n\n    if spec.sharedLoadRequestId ~ = nil then\n        g_i3DManager:releaseSharedI3DFile(spec.sharedLoadRequestId)\n        spec.sharedLoadRequestId = nil\n    end\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"onfencei3dloaded",children:"onFenceI3DLoaded"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"onFenceI3DLoaded()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"i3dNode"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"failedReason"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"args"})]})]})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryFence:onFenceI3DLoaded(i3dNode, failedReason, args)\n    local spec = self.spec_husbandryFence\n\n    local fenceI3dFilename = args.fenceI3dFilename\n    local loadingTask = args.loadingTask\n\n    if i3dNode ~ = 0 then\n        local components = I3DUtil.loadI3DComponents(i3dNode)\n        local i3dMappings = I3DUtil.loadI3DMapping( self.fenceXmlFile, "placeable" , components)\n\n        spec.fence = Fence.new( self.fenceXmlFile, "placeable.fence" , fenceI3dFilename, components, i3dMappings, self )\n        if spec.fence:load( self.fenceXmlFile, "placeable.fence" ) then\n\n            -- load default fence from placeable config\n            spec.fenceSegmentsData = { }\n\n            for _, sectionKey in self.xmlFile:iterator( "placeable.husbandry.fence.sections.section" ) do\n                if spec.hasCustomizableFence then\n                    Logging.xmlError( self.xmlFile, "Customizable section needs to be the last section.No more section definitions allowed: %q" , sectionKey)\n                    break\n                end\n\n                local sectionSegmentId = self.xmlFile:getValue(sectionKey .. "#segmentId" )\n                if sectionSegmentId = = nil then\n                    Logging.xmlError( self.xmlFile, "Missing segment id for %q" , sectionKey)\n                        continue\n                    end\n                    if spec.fence:getSegmentTemplateById(sectionSegmentId) = = nil then\n                        Logging.xmlError( self.xmlFile, "Segment id %q does not exist in %q" , sectionSegmentId, self.fenceXmlFile:getFilename())\n                        continue\n                    end\n\n                    local isReversed = self.xmlFile:getValue(sectionKey .. "#isReversed" )\n                    local customizable = self.xmlFile:getValue(sectionKey .. "#customizable" )\n\n                    local sectionNodes = { }\n                    for _, sectionNodeKey in self.xmlFile:iterator(sectionKey .. ".node" ) do\n                        local node = self.xmlFile:getValue(sectionNodeKey .. "#node" , nil , self.components, self.i3dMappings)\n\n                        table.insert(sectionNodes, node)\n                    end\n\n                    table.insert(spec.fenceSegmentsData, {\n                    segmentId = sectionSegmentId,\n                    nodes = sectionNodes,\n                    isReversed = isReversed,\n                    isCustomizable = customizable\n                    } )\n\n                    if customizable then\n                        spec.hasCustomizableFence = true\n                    end\n                end\n\n                spec.hasFence = #spec.fenceSegmentsData > 0\n\n                if self.propertyState = = PlaceablePropertyState.CONSTRUCTION_PREVIEW then\n                    self:createDefaultFence()\n                end\n            end\n\n            delete(i3dNode)\n        end\n\n        if self.fenceXmlFile ~ = nil then\n            self.fenceXmlFile:delete()\n            self.fenceXmlFile = nil\n        end\n\n        self:finishLoadingTask(loadingTask)\n    end\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"onLoad()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryFence:onLoad(savegame)\n    local spec = self.spec_husbandryFence\n\n    spec.userIsCustomizing = false\n    spec.hasCustomizableFence = nil\n    spec.canBePlaced = true\n\n    -- do not include fences in icon generation as the user can customize them\n        if _G[ "g_iconGenerator" ] ~ = nil then\n            return\n        end\n\n        local fenceXmlFilename = self.xmlFile:getValue( "placeable.husbandry.fence#xmlFilename" )\n        if fenceXmlFilename = = nil then\n            return\n        end\n\n        fenceXmlFilename = Utils.getFilename(fenceXmlFilename, self.baseDirectory)\n\n        if fenceXmlFilename = = nil then\n            Logging.xmlWarning( self.xmlFile, "No fence xml filename defined at %q" , "placeable.husbandry.fence.xmlFilename" )\n            return\n        end\n\n        self.fenceXmlFile = XMLFile.load( "placeableHusbandryfence" , fenceXmlFilename, Fence.xmlSchema)\n        if self.fenceXmlFile = = nil then\n            Logging.xmlWarning( self.xmlFile, "Could not load fence xml file" )\n            return\n        end\n\n        local fenceI3dFilename = self.fenceXmlFile:getString( "placeable.base.filename" )\n        if string.isNilOrWhitespace(fenceI3dFilename) then\n            Logging.xmlWarning( self.fenceXmlFile, "No fence i3d file defined at %q" , "placeable.base.filename" )\n            self.fenceXmlFile:delete()\n            self.fenceXmlFile = nil\n            return\n        end\n\n        fenceI3dFilename = Utils.getFilename(fenceI3dFilename, self.baseDirectory)\n        local loadingTask = self:createLoadingTask()\n        local arguments = {\n        fenceI3dFilename = fenceI3dFilename,\n        loadingTask = loadingTask\n        }\n\n        spec.sharedLoadRequestId = g_i3DManager:loadSharedI3DFileAsync(fenceI3dFilename, false , false , self.onFenceI3DLoaded, self , arguments)\n    end\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"onprefinalizeplacement",children:"onPreFinalizePlacement"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"onPreFinalizePlacement()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryFence:onPreFinalizePlacement()\n    local spec = self.spec_husbandryFence\n\n    if spec.fence = = nil then\n        Logging.devInfo( "PlaceableHusbandryFence:onPreFinalizePlacement() fence nil, return" )\n        return\n    end\n\n    if self.isServer then\n        if not self.isLoadedFromSavegame then\n            self:createDefaultFence()\n\n            for _, segment in ipairs(spec.previewSegments) do\n                Logging.devInfo( "PlaceableHusbandryFence.finalizeHusbandryFence:Finalize segments" )\n                segment:finalize()\n            end\n\n            Logging.devInfo( "PlaceableHusbandryFence.finalizeHusbandryFence:Finalize fence" )\n            spec.fence:finalize()\n        end\n    end\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"onreadstream",children:"onReadStream"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"onReadStream()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"streamId"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryFence:onReadStream(streamId, connection)\n    local spec = self.spec_husbandryFence\n    if spec.fence ~ = nil then\n        -- delete any existing fence\n        for _, segment in ipairs _reverse(spec.fence:getSegments()) do\n            segment:delete()\n        end\n\n        spec.fence:readStream(streamId, connection)\n\n        for _, segment in ipairs(spec.fence:getSegments()) do\n            segment.husbandryFenceIsCustomizable = streamReadBool(streamId)\n            segment.husbandryFenceIsDefaultSegment = streamReadBool(streamId)\n        end\n\n        self:finalizeHusbandryFence()\n\n        spec.userIsCustomizing = streamReadBool(streamId)\n        if spec.userIsCustomizing then\n            self:hideDefaultFence()\n        end\n    end\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"onwritestream",children:"onWriteStream"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"onWriteStream()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"streamId"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryFence:onWriteStream(streamId, connection)\n    local spec = self.spec_husbandryFence\n    if spec.fence ~ = nil then\n        spec.fence:writeStream(streamId, connection)\n\n        for _, segment in ipairs(spec.fence:getSegments()) do\n            streamWriteBool(streamId, Utils.getNoNil(segment.husbandryFenceIsCustomizable, false ))\n            streamWriteBool(streamId, Utils.getNoNil(segment.husbandryFenceIsDefaultSegment, false ))\n        end\n\n        streamWriteBool(streamId, spec.userIsCustomizing)\n    end\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Checks if all prerequisite specializations are loaded"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"prerequisitesPresent(table specializations)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"table"}),(0,l.jsx)(n.th,{children:"specializations"}),(0,l.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"table"}),(0,l.jsx)(n.th,{children:"hasPrerequisite"}),(0,l.jsx)(n.th,{children:"true if all prerequisite specializations are loaded"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryFence.prerequisitesPresent(specializations)\n    return true\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryFence.registerEventListeners(placeableType)\n    SpecializationUtil.registerEventListener(placeableType, "onLoad" , PlaceableHusbandryFence )\n    SpecializationUtil.registerEventListener(placeableType, "onDelete" , PlaceableHusbandryFence )\n    SpecializationUtil.registerEventListener(placeableType, "onPreFinalizePlacement" , PlaceableHusbandryFence )\n    SpecializationUtil.registerEventListener(placeableType, "onPostFinalizePlacement" , PlaceableHusbandryFence )\n    SpecializationUtil.registerEventListener(placeableType, "onReadStream" , PlaceableHusbandryFence )\n    SpecializationUtil.registerEventListener(placeableType, "onWriteStream" , PlaceableHusbandryFence )\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryFence.registerFunctions(placeableType)\n    SpecializationUtil.registerFunction(placeableType, "getHasCustomizableFence" , PlaceableHusbandryFence.getHasCustomizableFence)\n    SpecializationUtil.registerFunction(placeableType, "getFence" , PlaceableHusbandryFence.getFence)\n    SpecializationUtil.registerFunction(placeableType, "getCustomizeableSectionStartAndEndPositions" , PlaceableHusbandryFence.getCustomizeableSectionStartAndEndPositions)\n    SpecializationUtil.registerFunction(placeableType, "getDefaultFenceOrientation" , PlaceableHusbandryFence.getDefaultFenceOrientation)\n    SpecializationUtil.registerFunction(placeableType, "getFenceContourPositions" , PlaceableHusbandryFence.getFenceContourPositions)\n    SpecializationUtil.registerFunction(placeableType, "updateHusbandryFence" , PlaceableHusbandryFence.updateHusbandryFence)\n    SpecializationUtil.registerFunction(placeableType, "finalizeHusbandryFence" , PlaceableHusbandryFence.finalizeHusbandryFence)\n    SpecializationUtil.registerFunction(placeableType, "createDefaultFence" , PlaceableHusbandryFence.createDefaultFence)\n    SpecializationUtil.registerFunction(placeableType, "deleteCustomizableSegments" , PlaceableHusbandryFence.deleteCustomizableSegments)\n    SpecializationUtil.registerFunction(placeableType, "onFenceI3DLoaded" , PlaceableHusbandryFence.onFenceI3DLoaded)\n    SpecializationUtil.registerFunction(placeableType, "startFenceCustomization" , PlaceableHusbandryFence.startFenceCustomization)\n    SpecializationUtil.registerFunction(placeableType, "finishFenceCustomization" , PlaceableHusbandryFence.finishFenceCustomization)\n    SpecializationUtil.registerFunction(placeableType, "onHusbandryFenceUserRemoved" , PlaceableHusbandryFence.onHusbandryFenceUserRemoved)\n    SpecializationUtil.registerFunction(placeableType, "hideDefaultFence" , PlaceableHusbandryFence.hideDefaultFence)\n    SpecializationUtil.registerFunction(placeableType, "restoreDefaultFence" , PlaceableHusbandryFence.restoreDefaultFence)\n    SpecializationUtil.registerFunction(placeableType, "tryFinalizeFence" , PlaceableHusbandryFence.tryFinalizeFence)\n    SpecializationUtil.registerFunction(placeableType, "getAllowFenceSegmentDeletion" , PlaceableHusbandryFence.getAllowFenceSegmentDeletion)\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"registeroverwrittenfunctions",children:"registerOverwrittenFunctions"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"registerOverwrittenFunctions()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryFence.registerOverwrittenFunctions(placeableType)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "setPreviewPosition" , PlaceableHusbandryFence.setPreviewPosition)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "getCanBePlacedAt" , PlaceableHusbandryFence.getCanBePlacedAt)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "createNavigationMesh" , PlaceableHusbandryFence.createNavigationMesh)\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"registersavegamexmlpaths",children:"registerSavegameXMLPaths"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"registerSavegameXMLPaths()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"schema"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"basePath"})]})})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryFence.registerSavegameXMLPaths(schema, basePath)\n    schema:setXMLSpecializationType( "Husbandry" )\n    Fence.registerSavegameXMLPaths(schema, basePath .. ".fence" )\n    schema:setXMLSpecializationType()\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"registerxmlpaths",children:"registerXMLPaths"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"registerXMLPaths(XMLSchema schema, string basePath)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"XMLSchema"}),(0,l.jsx)(n.th,{children:"schema"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"string"}),(0,l.jsx)(n.td,{children:"basePath"})]})})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryFence.registerXMLPaths(schema, basePath)\n    schema:setXMLSpecializationType( "Husbandry" )\n    basePath = basePath .. ".husbandry.fence"\n    schema:register(XMLValueType.STRING, basePath .. "#xmlFilename" , "Fence xml filename" )\n    schema:register(XMLValueType.STRING, basePath .. ".sections.section(?)#segmentId" , "segment id from fence xml to use for this section" , nil , true )\n        schema:register(XMLValueType.BOOL, basePath .. ".sections.section(?)#isReversed" , "Reverse segment(gate)" )\n        schema:register(XMLValueType.BOOL, basePath .. ".sections.section(?)#customizable" , "User has the option to place this section manually" )\n        schema:register(XMLValueType.NODE_INDEX, basePath .. ".sections.section(?).node(?)#node" , "Fence node" )\n        schema:setXMLSpecializationType()\n    end\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"setpreviewposition",children:"setPreviewPosition"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"setPreviewPosition()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"superFunc"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"x"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"y"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"z"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"rotX"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"rotY"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"rotZ"})]})]})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryFence:setPreviewPosition(superFunc, x, y, z, rotX, rotY, rotZ)\n    superFunc( self , x, y, z, rotX, rotY, rotZ)\n\n    local spec = self.spec_husbandryFence\n    spec.canBePlaced = true\n    local canBePlaced = self:updateHusbandryFence()\n    spec.canBePlaced = spec.canBePlaced and canBePlaced\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"updatehusbandryfence",children:"updateHusbandryFence"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"updateHusbandryFence()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"success"}),(0,l.jsx)(n.th,{children:"false if a segment could not be placed or is blocked"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryFence:updateHusbandryFence()\n    local spec = self.spec_husbandryFence\n\n    if spec.fenceSegmentsData = = nil then\n        return true\n    end\n\n    spec.lastFenceError = nil\n\n    local hitNodes = { }\n    local isBlocked = false\n\n    local segmentIndex = 1\n    local segments = spec.previewSegments\n    for _, section in ipairs(spec.fenceSegmentsData) do\n        for nodeIndex, node in ipairs(section.nodes) do\n            if nodeIndex = = #section.nodes then\n                break -- no segment for last node as its just the end of the previous segment\n            end\n\n            local segment = segments[segmentIndex]\n            segment:setStartPos(getWorldTranslation(node))\n            segment:setEndPos(getWorldTranslation(section.nodes[nodeIndex + 1 ]))\n\n            if not segment:updateMeshes() then\n                spec.lastFenceError = segment.lastError\n                return false\n            end\n\n            segment:checkOverlap(hitNodes)\n\n            if segment:getHasBlockingOverlap( self.ownerFarmId) then\n                isBlocked = true\n            end\n\n            -- do not exit loop early to still update all visible fence meshes to the current position\n\n                segmentIndex = segmentIndex + 1\n            end\n        end\n\n        for node in pairs(hitNodes) do\n            DebugShapeOutline.render(node)\n        end\n\n        local hasOverlap = next(hitNodes) ~ = nil\n        return not hasOverlap and not isBlocked\n    end\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}}}]);