"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[61822],{10642(n,e,r){r.r(e),r.d(e,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"script/GUI/GuiUtils","title":"GuiUtils","description":"GuiUtils","source":"@site/../docs/script/GUI/GuiUtils.md","sourceDirName":"script/GUI","slug":"/script/GUI/GuiUtils","permalink":"/FS25-Community-LUADOC/script/GUI/GuiUtils","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"GuiTopDownCursor","permalink":"/FS25-Community-LUADOC/script/GUI/GuiTopDownCursor"},"next":{"title":"HUDDisplayElement","permalink":"/FS25-Community-LUADOC/script/GUI/HUDDisplayElement"}}');var l=r(74848),s=r(28453);const i={},a=void 0,d={},o=[{value:"GuiUtils",id:"guiutils",level:2},{value:"checkOverlayOverlap",id:"checkoverlayoverlap",level:3},{value:"getColorArray",id:"getcolorarray",level:3},{value:"getColorGradientArray",id:"getcolorgradientarray",level:3},{value:"getNormalizedValues",id:"getnormalizedvalues",level:3},{value:"getUVs",id:"getuvs",level:3}];function c(n){const e={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.h2,{id:"guiutils",children:"GuiUtils"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"GUI utility functions"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Functions"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#checkoverlayoverlap",children:"checkOverlayOverlap"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#getcolorarray",children:"getColorArray"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#getcolorgradientarray",children:"getColorGradientArray"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#getnormalizedvalues",children:"getNormalizedValues"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#getuvs",children:"getUVs"})}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"checkoverlayoverlap",children:"checkOverlayOverlap"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"Check if a point lies within or a hotspot overlaps an overlay."}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"checkOverlayOverlap(posX Point, posY Point, overlayX Overlay, overlayY Overlay, overlaySizeX Overlay, overlaySizeY\nOverlay, hotspot If)"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"posX"}),(0,l.jsx)(e.th,{children:"Point"}),(0,l.jsx)(e.th,{children:"or hotspot x position"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"posY"}),(0,l.jsx)(e.td,{children:"Point"}),(0,l.jsx)(e.td,{children:"or hotspot y position"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"overlayX"}),(0,l.jsx)(e.td,{children:"Overlay"}),(0,l.jsx)(e.td,{children:"x position"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"overlayY"}),(0,l.jsx)(e.td,{children:"Overlay"}),(0,l.jsx)(e.td,{children:"y position"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"overlaySizeX"}),(0,l.jsx)(e.td,{children:"Overlay"}),(0,l.jsx)(e.td,{children:"width"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"overlaySizeY"}),(0,l.jsx)(e.td,{children:"Overlay"}),(0,l.jsx)(e.td,{children:"height"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"hotspot"}),(0,l.jsx)(e.td,{children:"If"}),(0,l.jsx)(e.td,{children:"provided as an array having 4 numbers for the bounding points of a rectangle {minX, minY, maxX, maxY}, will be checked if it overlaps the overlay area given by the other parameters."})]})]})]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:"function GuiUtils.checkOverlayOverlap(posX, posY, overlayX, overlayY, overlaySizeX, overlaySizeY, hotspot)\n    if hotspot ~ = nil and #hotspot = = 4 then\n        return overlaySizeX > 0 and overlaySizeY > 0\n        and posX > = overlayX + hotspot[ 1 ]\n        and posX < = overlayX + overlaySizeX + hotspot[ 3 ]\n        and posY > = overlayY + hotspot[ 4 ]\n        and posY < = overlayY + overlaySizeY + hotspot[ 2 ]\n    else\n            return overlaySizeX > 0 and overlaySizeY > 0\n            and posX > = overlayX\n            and posX < = overlayX + overlaySizeX\n            and posY > = overlayY\n            and posY < = overlayY + overlaySizeY\n        end\n    end\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"getcolorarray",children:"getColorArray"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"Transform an attribute string representing a 4D color array into an actual array."}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"getColorArray(str Attribute, defaultValue Default)"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"str"}),(0,l.jsx)(e.th,{children:"Attribute"}),(0,l.jsx)(e.th,{children:"string containing exactly 4 numbers"})]})}),(0,l.jsx)(e.tbody,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"defaultValue"}),(0,l.jsx)(e.td,{children:"Default"}),(0,l.jsx)(e.td,{children:'value to return if the "str" parameter value is nil or invalid for transformation.'})]})})]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,l.jsx)(e.table,{children:(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"defaultValue"}),(0,l.jsx)(e.th,{children:"list"}),(0,l.jsx)(e.th,{children:"of the 4 converted values as numbers: {red, green, blue, alpha}"})]})})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:"function GuiUtils.getColorArray(colorStr, defaultValue)\n    return string.getVector(colorStr, 4 ) or defaultValue\nend\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"getcolorgradientarray",children:"getColorGradientArray"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"Transform an attribute string representing a 4D color array into an actual array."}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"getColorGradientArray(str Attribute, defaultValue Default)"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"str"}),(0,l.jsx)(e.th,{children:"Attribute"}),(0,l.jsx)(e.th,{children:"string containing exactly 4 numbers"})]})}),(0,l.jsx)(e.tbody,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"defaultValue"}),(0,l.jsx)(e.td,{children:"Default"}),(0,l.jsx)(e.td,{children:'value to return if the "str" parameter value is nil or invalid for transformation.'})]})})]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,l.jsx)(e.table,{children:(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"defaultValue"}),(0,l.jsx)(e.th,{children:"list"}),(0,l.jsx)(e.th,{children:"of the 4 converted values as numbers: {red, green, blue, alpha}, or 16 numbers: 4x rgba."})]})})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:"function GuiUtils.getColorGradientArray(colorStr, defaultValue)\n    local data = string.getVector(colorStr)\n    if data ~ = nil and(#data = = 4 or #data = = 16 ) then\n        return data\n    end\n    return defaultValue\nend\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"getnormalizedvalues",children:"getNormalizedValues"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"Transform an attribute string representing a list of numbers into an array and normalize the values."}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"getNormalizedValues(str Attribute, refSize Reference, defaultValue Default)"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"str"}),(0,l.jsx)(e.th,{children:"Attribute"}),(0,l.jsx)(e.th,{children:'string containing numbers, either raw or with a pixel unit designation on each number (e.g. "12 24" or "12px 24px")'})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"refSize"}),(0,l.jsx)(e.td,{children:"Reference"}),(0,l.jsx)(e.td,{children:"size for normalization, e.g. a reference screen resolution used to scale pixel values, {sizeX, sizeY}"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"defaultValue"}),(0,l.jsx)(e.td,{children:"Default"}),(0,l.jsx)(e.td,{children:'value to return if the "str" parameter value is nil'})]})]})]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,l.jsx)(e.table,{children:(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"defaultValue"}),(0,l.jsx)(e.th,{children:"list"}),(0,l.jsx)(e.th,{children:"of normalized values"})]})})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:'function GuiUtils.getNormalizedValues(data, refSize, defaultValue)\n    if data ~ = nil then\n        local parts = data\n        local isString = type(data) = = "string"\n        if isString then\n            parts = data:split( " " )\n        end\n        local values = { }\n        for k, part in pairs(parts) do\n            local value = part\n\n            if isString then\n                local isPixelValue, isDisplayPixelValue = false , false\n                if string.find(value, "px" ) ~ = nil then\n                    isPixelValue = true\n                    value = string.gsub(value, "px" , "" )\n                elseif string.find(value, "dp" ) ~ = nil then\n                        isDisplayPixelValue = true\n                        value = string.gsub(value, "dp" , "" )\n                    end\n\n                    value = tonumber(value)\n\n                    if isDisplayPixelValue then\n                        local s = (k + 1 ) % 2\n                        if s = = 0 then -- horizontal\n                            value = value * g_pixelSizeX\n                            else -- vertical\n                                value = value * g_pixelSizeY\n                            end\n                        elseif isPixelValue then\n                                -- refSize stores only 2 values(width, height).As str can contains more than 2 values we have to do a\n                                    -- loop match with this modulo operation(1->1, 2->2, 3->1, 4->2, 5->1, 6->1 .. .)\n                                    value = value / refSize[((k + 1 ) % 2 ) + 1 ]\n                                end\n                            else\n                                    value = value / refSize[((k + 1 ) % 2 ) + 1 ]\n                                end\n\n                                table.insert(values, value)\n                            end\n\n                            if defaultValue ~ = nil and #defaultValue > #parts then\n                                -- Repeat missing values, so that 0 -> 0 0 or 0 0 0 0, and 0 1 -> 0 1 0 1.\n                                -- This is also what CSS effectively does\n                                local wrap = #parts\n                                for i = #parts + 1 , #defaultValue do\n                                    table.insert(values, values[(i - 1 ) % wrap + 1 ])\n                                end\n                            end\n\n                            return values\n                        end\n\n                        return defaultValue\n                    end\n\n'})}),"\n",(0,l.jsx)(e.h3,{id:"getuvs",children:"getUVs"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"Transform an attribute string representing a UV array into an actual array and normalize the values."}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"getUVs(str Attribute, ref Texture, defaultValue Default, )"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"str"}),(0,l.jsx)(e.th,{children:"Attribute"}),(0,l.jsx)(e.th,{children:'string containing exactly 4 numbers, order and format: "x[px] y[px] sizeX[px] sizeY[px]"'})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"ref"}),(0,l.jsx)(e.td,{children:"Texture"}),(0,l.jsx)(e.td,{children:"reference size used to normalize pixel UV coordinates into unit sized UV coordinates"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"defaultValue"}),(0,l.jsx)(e.td,{children:"Default"}),(0,l.jsx)(e.td,{children:'value to return if the "str" parameter value is nil or invalid for transformation.'})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"any"}),(0,l.jsx)(e.td,{children:"rotation"}),(0,l.jsx)(e.td,{})]})]})]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,l.jsx)(e.table,{children:(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"any"}),(0,l.jsx)(e.th,{children:"list"}),(0,l.jsx)(e.th,{children:"of the UV coordinates as {u1, v1, u2, v2, u3, v3, u4, v4}"})]})})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:'function GuiUtils.getUVs(str, ref, defaultValue, rotation)\n    if str ~ = nil then\n\n        --#debug if type(str) = = "string" then\n            --#debug local valid, errorMessage = GuiUtils.validateUvs(str)\n            --#debug if not valid then\n                --#debug Logging.error("%s; string: %s", errorMessage, str)\n                --#debug printCallstack()\n                --#debug return defaultValue\n                --#debug end\n                --#debug end\n\n                local uvs = GuiUtils.getNormalizedValues(str, ref or { 1024 , 1024 } )\n                if uvs[ 1 ] ~ = nil then\n                    local result = { uvs[ 1 ], 1 - uvs[ 2 ] - uvs[ 4 ], uvs[ 1 ], 1 - uvs[ 2 ], uvs[ 1 ] + uvs[ 3 ], 1 - uvs[ 2 ] - uvs[ 4 ], uvs[ 1 ] + uvs[ 3 ], 1 - uvs[ 2 ] }\n\n                    if rotation ~ = nil then\n                        GuiUtils.rotateUVs(result, rotation)\n                    end\n\n                    return result\n                else\n                        Logging.devError( "GuiUtils.getUVs() Unable to get uvs for \'%s\'" , str)\n                        end\n                    end\n\n                    return defaultValue\n                end\n\n'})})]})}function h(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(c,{...n})}):c(n)}},28453(n,e,r){r.d(e,{R:()=>i,x:()=>a});var t=r(96540);const l={},s=t.createContext(l);function i(n){const e=t.useContext(s);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:i(n.components),t.createElement(s.Provider,{value:e},n.children)}}}]);