"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[60064],{28453(e,n,i){i.d(n,{R:()=>t,x:()=>r});var s=i(96540);const l={},a=s.createContext(l);function t(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),s.createElement(a.Provider,{value:n},e.children)}},93883(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"script/Specializations/PlaceableAI","title":"PlaceableAI","description":"PlaceableAI","source":"@site/../docs/script/Specializations/PlaceableAI.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/PlaceableAI","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableAI","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Pipe","permalink":"/FS25-Community-LUADOC/script/Specializations/Pipe"},"next":{"title":"PlaceableAnimalLoadingTrigger","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableAnimalLoadingTrigger"}}');var l=i(74848),a=i(28453);const t={},r=void 0,c={},d=[{value:"PlaceableAI",id:"placeableai",level:2},{value:"loadAIObstacle",id:"loadaiobstacle",level:3},{value:"loadAISpline",id:"loadaispline",level:3},{value:"loadAIUpdateArea",id:"loadaiupdatearea",level:3},{value:"onDelete",id:"ondelete",level:3},{value:"onFinalizePlacement",id:"onfinalizeplacement",level:3},{value:"onLoad",id:"onload",level:3},{value:"onPostLoad",id:"onpostload",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3},{value:"registerFunctions",id:"registerfunctions",level:3},{value:"registerXMLPaths",id:"registerxmlpaths",level:3},{value:"setObstacleActive",id:"setobstacleactive",level:3},{value:"updateAIUpdateAreas",id:"updateaiupdateareas",level:3}];function o(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"placeableai",children:"PlaceableAI"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Specialization for placeables"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Functions"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#loadaiobstacle",children:"loadAIObstacle"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#loadaispline",children:"loadAISpline"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#loadaiupdatearea",children:"loadAIUpdateArea"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#ondelete",children:"onDelete"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#onfinalizeplacement",children:"onFinalizePlacement"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#onpostload",children:"onPostLoad"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#registerxmlpaths",children:"registerXMLPaths"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#setobstacleactive",children:"setObstacleActive"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#updateaiupdateareas",children:"updateAIUpdateAreas"})}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"loadaiobstacle",children:"loadAIObstacle"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"loadAIObstacle()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"xmlFile"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"key"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"obstacle"})]})]})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function PlaceableAI:loadAIObstacle(xmlFile, key, obstacle)\n    obstacle.node = xmlFile:getValue(key .. "#node" , nil , self.components, self.i3dMappings)\n    if obstacle.node = = nil then\n        Logging.xmlWarning(xmlFile, "Obstacle \'%s\' node does not exist" , key)\n        return false\n    end\n\n    obstacle.size = xmlFile:getValue(key .. "#size" , "0 0 0" , true )\n    obstacle.offset = xmlFile:getValue(key .. "#offset" , "0 0 0" , true )\n\n    -- size can only be omitted if node is a rigid body / has a collision box\n        if getRigidBodyType(obstacle.node) = = RigidBodyType.NONE and obstacle.size[ 1 ] = = 0 then\n            Logging.xmlWarning(xmlFile, "Obstacle \'%s\' is not a rigid body and needs a size" , key)\n            return false\n        end\n\n        obstacle.animatedObjectSaveId = xmlFile:getValue(key .. ".animatedObject#saveId" )\n        if obstacle.animatedObjectSaveId = = nil then\n            obstacle.animatedObjectIndex = xmlFile:getValue(key .. ".animatedObject#index" )\n\n            if obstacle.animatedObjectIndex = = nil then\n                Logging.xmlWarning(xmlFile, "Obstacle \'%s\' does specify \'index\' or \'saveId\' attribute, one needs to be present to identify the animated object" , key)\n                return false\n            end\n        end\n\n        obstacle.animatedObjectTimeStart = xmlFile:getValue(key .. ".animatedObject#startTime" )\n        obstacle.animatedObjectTimeEnd = xmlFile:getValue(key .. ".animatedObject#endTime" )\n\n        if obstacle.animatedObjectTimeStart = = nil or obstacle.animatedObjectTimeEnd = = nil then\n            Logging.xmlWarning(xmlFile, "Obstacle \'%s\' is missing start or end time" , key)\n            return false\n        end\n\n        if obstacle.animatedObjectTimeStart > = obstacle.animatedObjectTimeEnd then\n            Logging.xmlWarning(xmlFile, "Obstacle \'%s\' start time need to be smaller than end time" , key)\n            return false\n        end\n\n        obstacle.isActive = false\n\n        return true\n    end\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"loadaispline",children:"loadAISpline"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"loadAISpline()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"xmlFile"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"key"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"spline"})]})]})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function PlaceableAI:loadAISpline(xmlFile, key, spline)\n    local splineNode = xmlFile:getValue(key .. "#node" , nil , self.components, self.i3dMappings)\n\n    if splineNode = = nil then\n        Logging.xmlWarning(xmlFile, "Spline node does not exist in \'%s\'" , key)\n        return false\n    end\n\n    setVisibility(splineNode, false )\n\n    local maxWidth = xmlFile:getValue(key .. "#maxWidth" )\n    local maxHeight = xmlFile:getValue(key .. "#maxHeight" )\n    local maxTurningRadius = xmlFile:getValue(key .. "#maxTurningRadius" )\n\n    spline.splineNode = splineNode\n    spline.maxWidth = maxWidth\n    spline.maxHeight = maxHeight\n    spline.maxTurningRadius = maxTurningRadius\n\n    return true\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"loadaiupdatearea",children:"loadAIUpdateArea"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"loadAIUpdateArea()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"xmlFile"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"key"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"area"})]})]})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function PlaceableAI:loadAIUpdateArea(xmlFile, key, area)\n    local startNode = xmlFile:getValue(key .. "#startNode" , nil , self.components, self.i3dMappings)\n    local endNode = xmlFile:getValue(key .. "#endNode" , nil , self.components, self.i3dMappings)\n\n    if startNode = = nil then\n        Logging.xmlWarning(xmlFile, "Missing ai update area start node for \'%s\'" , key)\n            return false\n        end\n\n        if endNode = = nil then\n            Logging.xmlWarning(xmlFile, "Missing ai update area end node for \'%s\'" , key)\n            return false\n        end\n\n        local startX, _, startZ = localToLocal(startNode, self.rootNode, 0 , 0 , 0 )\n        local endX, _, endZ = localToLocal(endNode, self.rootNode, 0 , 0 , 0 )\n\n        local sizeX = math.abs(endX - startX)\n        local sizeZ = math.abs(endZ - startZ)\n\n        area.center = { }\n        area.center.x = (endX + startX) * 0.5\n        area.center.z = (endZ + startZ) * 0.5\n\n        area.size = { }\n        area.size.x = sizeX\n        area.size.z = sizeZ\n\n        area.startNode = startNode\n        area.endNode = endNode\n\n        return true\n    end\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"ondelete",children:"onDelete"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"onDelete()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function PlaceableAI:onDelete()\n    if self.isServer then\n        local spec = self.spec_ai\n        if spec.updateAreaOnDelete then\n            self:updateAIUpdateAreas()\n        end\n\n        if g_currentMission.aiSystem ~ = nil then\n            if spec.splines ~ = nil then\n                for _, spline in pairs(spec.splines) do\n                    g_currentMission.aiSystem:removeRoadSpline(spline.splineNode)\n                end\n            end\n\n            if self.spec_animatedObjects ~ = nil and g_currentMission.aiSystem.navigationMap ~ = nil then\n                local animatedObjects = self.spec_animatedObjects.animatedObjects\n                if animatedObjects ~ = nil then\n                    for _, obstacle in ipairs(spec.obstacles) do\n                        if obstacle.isActive then\n                            self:setObstacleActive(obstacle, false )\n                        end\n                    end\n                end\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"onfinalizeplacement",children:"onFinalizePlacement"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"onFinalizePlacement()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function PlaceableAI:onFinalizePlacement()\n    if self.isServer then\n        local spec = self.spec_ai\n        local missionInfo = g_currentMission.missionInfo\n\n        spec.updateAreaOnDelete = true\n\n        if not self.isLoadedFromSavegame or not missionInfo.isValid or g_currentMission.placeableSystem.isReloadRunning then\n            self:updateAIUpdateAreas()\n        end\n\n        if g_currentMission.aiSystem ~ = nil then\n            for _, spline in ipairs(spec.splines) do\n                g_currentMission.aiSystem:addRoadSpline(spline.splineNode, spline.maxWidth, spline.maxTurningRadius, spline.maxHeight)\n            end\n\n            -- explicitly update state once\n            if g_currentMission.aiSystem.navigationMap ~ = nil then\n                for _, obstacle in ipairs(spec.obstacles) do\n                    if obstacle.animatedObject ~ = nil then\n                        obstacle.updateState( nil , obstacle.animatedObject.animation.time )\n                    end\n                end\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Called on loading"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"onLoad(table savegame)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"table"}),(0,l.jsx)(n.th,{children:"savegame"}),(0,l.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function PlaceableAI:onLoad(savegame)\n    local spec = self.spec_ai\n    local xmlFile = self.xmlFile\n\n    spec.updateAreaOnDelete = false\n\n    spec.areas = { }\n    xmlFile:iterate( "placeable.ai.updateAreas.updateArea" , function (_, key)\n        local area = { }\n        if self:loadAIUpdateArea(xmlFile, key, area) then\n            table.insert(spec.areas, area)\n        end\n    end )\n\n    if not self.xmlFile:hasProperty( "placeable.ai.updateAreas" ) then\n        Logging.xmlWarning( self.xmlFile, "Missing ai update areas" )\n    end\n\n    spec.splines = { }\n    xmlFile:iterate( "placeable.ai.splines.spline" , function (_, key)\n        local spline = { }\n        if self:loadAISpline(xmlFile, key, spline) then\n            table.insert(spec.splines, spline)\n        end\n    end )\n\n    spec.obstacles = { }\n    xmlFile:iterate( "placeable.ai.obstacles.obstacle" , function (_, key)\n        local obstacle = { }\n        if self:loadAIObstacle(xmlFile, key, obstacle) then\n            table.insert(spec.obstacles, obstacle)\n        end\n    end )\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"onpostload",children:"onPostLoad"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"onPostLoad()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function PlaceableAI:onPostLoad(savegame)\n    local spec = self.spec_ai\n    if self.spec_animatedObjects ~ = nil and g_currentMission.aiSystem ~ = nil and g_currentMission.aiSystem.navigationMap ~ = nil then\n        local animatedObjects = self.spec_animatedObjects.animatedObjects\n\n        for obstacleIndex, obstacle in ipairs(spec.obstacles) do\n            local animatedObject\n\n            if obstacle.animatedObjectIndex ~ = nil then\n                animatedObject = animatedObjects[obstacle.animatedObjectIndex]\n                if animatedObject = = nil then\n                    Logging.warning( "Placeable AI obstacle %d:AnimatedObject with index %d does not exist" , obstacleIndex, obstacle.animatedObjectIndex)\n                    continue\n                end\n            else\n                    animatedObject = self.spec_animatedObjects:getAnimatedObjectBySaveId(obstacle.animatedObjectSaveId)\n                    if animatedObject = = nil then\n                        Logging.warning( "Placeable AI obstacle %d:AnimatedObject with saveId %q does not exist" , obstacleIndex, obstacle.animatedObjectSaveId)\n                        continue\n                    end\n                end\n\n                obstacle.animatedObject = animatedObject\n                obstacle.updateState = function (_, t, omitSound)\n                    if t > = obstacle.animatedObjectTimeStart and t < = obstacle.animatedObjectTimeEnd then\n                        if not obstacle.isActive then\n                            self:setObstacleActive(obstacle, true )\n                        end\n                    else\n                            if obstacle.isActive then\n                                self:setObstacleActive(obstacle, false )\n                            end\n                        end\n                    end\n                    -- hook into setAnimTime to add and remove AI obstacle in animation\n                    animatedObject.setAnimTime = Utils.appendedFunction(animatedObject.setAnimTime, obstacle.updateState)\n                end\n            end\n        end\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Checks if all prerequisite specializations are loaded"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"prerequisitesPresent(table specializations)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"table"}),(0,l.jsx)(n.th,{children:"specializations"}),(0,l.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"table"}),(0,l.jsx)(n.th,{children:"hasPrerequisite"}),(0,l.jsx)(n.th,{children:"true if all prerequisite specializations are loaded"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function PlaceableAI.prerequisitesPresent(specializations)\n    return true\nend\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function PlaceableAI.registerEventListeners(placeableType)\n    SpecializationUtil.registerEventListener(placeableType, "onLoad" , PlaceableAI )\n    SpecializationUtil.registerEventListener(placeableType, "onPostLoad" , PlaceableAI )\n    SpecializationUtil.registerEventListener(placeableType, "onDelete" , PlaceableAI )\n    SpecializationUtil.registerEventListener(placeableType, "onFinalizePlacement" , PlaceableAI )\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(n.table,{children:(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function PlaceableAI.registerFunctions(placeableType)\n    SpecializationUtil.registerFunction(placeableType, "setObstacleActive" , PlaceableAI.setObstacleActive)\n    SpecializationUtil.registerFunction(placeableType, "loadAIUpdateArea" , PlaceableAI.loadAIUpdateArea)\n    SpecializationUtil.registerFunction(placeableType, "loadAISpline" , PlaceableAI.loadAISpline)\n    SpecializationUtil.registerFunction(placeableType, "loadAIObstacle" , PlaceableAI.loadAIObstacle)\n    SpecializationUtil.registerFunction(placeableType, "updateAIUpdateAreas" , PlaceableAI.updateAIUpdateAreas)\nend\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"registerxmlpaths",children:"registerXMLPaths"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"registerXMLPaths()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"schema"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"basePath"})]})})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'function PlaceableAI.registerXMLPaths(schema, basePath)\n    schema:setXMLSpecializationType( "AI" )\n    schema:register(XMLValueType.NODE_INDEX, basePath .. ".ai.updateAreas.updateArea(?)#startNode" , "Start node of ai update area" )\n    schema:register(XMLValueType.NODE_INDEX, basePath .. ".ai.updateAreas.updateArea(?)#endNode" , "End node of ai update area" )\n\n    schema:register(XMLValueType.NODE_INDEX, basePath .. ".ai.splines.spline(?)#node" , "Spline node or transform group containing splines.Spline direction not relevant" )\n    schema:register(XMLValueType.FLOAT, basePath .. ".ai.splines.spline(?)#maxWidth" , "Maximum vehicle width supported by the spline" )\n    schema:register(XMLValueType.FLOAT, basePath .. ".ai.splines.spline(?)#maxHeight" , "Maximum vehicle height supported by the spline" )\n    schema:register(XMLValueType.FLOAT, basePath .. ".ai.splines.spline(?)#maxTurningRadius" , "Maximum vehicle turning supported by the spline" )\n\n    schema:register(XMLValueType.NODE_INDEX, basePath .. ".ai.obstacles.obstacle(?)#node" , "Node to be used for obstacle box" , nil , true )\n        schema:register(XMLValueType.VECTOR_ 3 , basePath .. ".ai.obstacles.obstacle(?)#size" , "Obstacle box size as x y z vector, required if node is not a rigid body" )\n            schema:register(XMLValueType.VECTOR_ 3 , basePath .. ".ai.obstacles.obstacle(?)#offset" , "Obstacle box offset to node as x y z vector" )\n            schema:register(XMLValueType.INT, basePath .. ".ai.obstacles.obstacle(?).animatedObject#index" , "Index of corresponding animated object in xml, can be used instead of \'saveId\'" , nil , false )\n            schema:register(XMLValueType.STRING, basePath .. ".ai.obstacles.obstacle(?).animatedObject#saveId" , "SaveId of corresponding animated object in xml, can be used instead of \'index\'" , nil , false )\n            schema:register(XMLValueType.FLOAT, basePath .. ".ai.obstacles.obstacle(?).animatedObject#startTime" , "Normalized start time to activate obstacle" , nil , true )\n            schema:register(XMLValueType.FLOAT, basePath .. ".ai.obstacles.obstacle(?).animatedObject#endTime" , "Normalized end time to deactivate obstacle" , nil , true )\n            schema:setXMLSpecializationType()\n        end\n\n'})}),"\n",(0,l.jsx)(n.h3,{id:"setobstacleactive",children:"setObstacleActive"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"setObstacleActive()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"any"}),(0,l.jsx)(n.th,{children:"obstacle"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"any"}),(0,l.jsx)(n.td,{children:"active"})]})})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function PlaceableAI:setObstacleActive(obstacle, active)\n    if g_currentMission.aiSystem = = nil then\n        return\n    end\n\n    if active then\n        g_currentMission.aiSystem:addObstacle(obstacle.node, obstacle.offset[ 1 ],obstacle.offset[ 2 ],obstacle.offset[ 3 ], obstacle.size[ 1 ],obstacle.size[ 2 ],obstacle.size[ 3 ], 0 , false )\n    else\n            g_currentMission.aiSystem:removeObstacle(obstacle.node)\n        end\n\n        obstacle.isActive = active\n    end\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"updateaiupdateareas",children:"updateAIUpdateAreas"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Description"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"updateAIUpdateAreas()"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"function PlaceableAI:updateAIUpdateAreas()\n    if self.isServer then\n        local spec = self.spec_ai\n        for _, area in pairs(spec.areas) do\n            local x, z = area.center.x, area.center.z\n            local sizeX, sizeZ = area.size.x, area.size.z\n\n            local x1, _, z1 = localToWorld( self.rootNode, x + sizeX * 0.5 , 0 , z + sizeZ * 0.5 )\n            local x2, _, z2 = localToWorld( self.rootNode, x - sizeX * 0.5 , 0 , z + sizeZ * 0.5 )\n            local x3, _, z3 = localToWorld( self.rootNode, x + sizeX * 0.5 , 0 , z - sizeZ * 0.5 )\n            local x4, _, z4 = localToWorld( self.rootNode, x - sizeX * 0.5 , 0 , z - sizeZ * 0.5 )\n\n            local minX = math.min(x1, x2, x3, x4)\n            local maxX = math.max(x1, x2, x3, x4)\n            local minZ = math.min(z1, z2, z3, z4)\n            local maxZ = math.max(z1, z2, z3, z4)\n            g_currentMission.aiSystem:setAreaDirty(minX, maxX, minZ, maxZ)\n        end\n    end\nend\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}}}]);