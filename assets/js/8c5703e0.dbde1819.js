"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[32552],{28453(e,n,i){i.d(n,{R:()=>r,x:()=>a});var l=i(96540);const s={},t=l.createContext(s);function r(e){const n=l.useContext(t);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),l.createElement(t.Provider,{value:n},e.children)}},41995(e,n,i){i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>d});const l=JSON.parse('{"id":"script/AI/AISystem","title":"AISystem","description":"AISystem","source":"@site/../docs/script/AI/AISystem.md","sourceDirName":"script/AI","slug":"/script/AI/AISystem","permalink":"/FS25-Community-LUADOC/script/AI/AISystem","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"AIJobTypeManager","permalink":"/FS25-Community-LUADOC/script/AI/AIJobTypeManager"},"next":{"title":"HelperManager","permalink":"/FS25-Community-LUADOC/script/AI/HelperManager"}}');var s=i(74848),t=i(28453);const r={},a=void 0,o={},d=[{value:"AISystem",id:"aisystem",level:2},{value:"addAgent",id:"addagent",level:3},{value:"addBlockingRegion",id:"addblockingregion",level:3},{value:"addJob",id:"addjob",level:3},{value:"addJobVehicle",id:"addjobvehicle",level:3},{value:"addObstacle",id:"addobstacle",level:3},{value:"addRoadSpline",id:"addroadspline",level:3},{value:"consoleCommandAICheckSplineInterference",id:"consolecommandaichecksplineinterference",level:3},{value:"consoleCommandAICostmapExport",id:"consolecommandaicostmapexport",level:3},{value:"consoleCommandAIEnableDebug",id:"consolecommandaienabledebug",level:3},{value:"consoleCommandAISetAreaDirty",id:"consolecommandaisetareadirty",level:3},{value:"consoleCommandAISetLastTarget",id:"consolecommandaisetlasttarget",level:3},{value:"consoleCommandAISetTarget",id:"consolecommandaisettarget",level:3},{value:"consoleCommandAIShowCosts",id:"consolecommandaishowcosts",level:3},{value:"consoleCommandAIShowObstacles",id:"consolecommandaishowobstacles",level:3},{value:"consoleCommandAIStart",id:"consolecommandaistart",level:3},{value:"consoleCommandAIToggleAINodeDebug",id:"consolecommandaitoggleainodedebug",level:3},{value:"consoleCommandAIToggleSplineVisibility",id:"consolecommandaitogglesplinevisibility",level:3},{value:"consoleCommandShowPlanningDebug",id:"consolecommandshowplanningdebug",level:3},{value:"delete",id:"delete",level:3},{value:"drawDebug",id:"drawdebug",level:3},{value:"getActiveJobs",id:"getactivejobs",level:3},{value:"getAgentStateName",id:"getagentstatename",level:3},{value:"getAILimitedReached",id:"getailimitedreached",level:3},{value:"getJobById",id:"getjobbyid",level:3},{value:"getNavigationMap",id:"getnavigationmap",level:3},{value:"getNavigationMapFilename",id:"getnavigationmapfilename",level:3},{value:"getNumActiveJobs",id:"getnumactivejobs",level:3},{value:"getVehicleByAgent",id:"getvehiclebyagent",level:3},{value:"loadFromXMLFile",id:"loadfromxmlfile",level:3},{value:"loadMapData",id:"loadmapdata",level:3},{value:"new",id:"new",level:3},{value:"onClientJoined",id:"onclientjoined",level:3},{value:"onCreateAIRoadSpline",id:"oncreateairoadspline",level:3},{value:"onMissionStarted",id:"onmissionstarted",level:3},{value:"onTerrainLoad",id:"onterrainload",level:3},{value:"registerXMLPaths",id:"registerxmlpaths",level:3},{value:"removeAgent",id:"removeagent",level:3},{value:"removeBlockingRegion",id:"removeblockingregion",level:3},{value:"removeJob",id:"removejob",level:3},{value:"removeJobVehicle",id:"removejobvehicle",level:3},{value:"removeObstacle",id:"removeobstacle",level:3},{value:"removeRoadSpline",id:"removeroadspline",level:3},{value:"save",id:"save",level:3},{value:"setAreaDirty",id:"setareadirty",level:3},{value:"setBlockingRegionState",id:"setblockingregionstate",level:3},{value:"setObstacleIsPassable",id:"setobstacleispassable",level:3},{value:"skipCurrentTask",id:"skipcurrenttask",level:3},{value:"skipCurrentTaskInternal",id:"skipcurrenttaskinternal",level:3},{value:"startJob",id:"startjob",level:3},{value:"startJobInternal",id:"startjobinternal",level:3},{value:"stopJob",id:"stopjob",level:3},{value:"stopJobById",id:"stopjobbyid",level:3},{value:"stopJobInternal",id:"stopjobinternal",level:3},{value:"update",id:"update",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"aisystem",children:"AISystem"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Functions"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#addagent",children:"addAgent"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#addblockingregion",children:"addBlockingRegion"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#addjob",children:"addJob"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#addjobvehicle",children:"addJobVehicle"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#addobstacle",children:"addObstacle"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#addroadspline",children:"addRoadSpline"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#consolecommandaichecksplineinterference",children:"consoleCommandAICheckSplineInterference"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#consolecommandaicostmapexport",children:"consoleCommandAICostmapExport"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#consolecommandaienabledebug",children:"consoleCommandAIEnableDebug"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#consolecommandaisetareadirty",children:"consoleCommandAISetAreaDirty"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#consolecommandaisetlasttarget",children:"consoleCommandAISetLastTarget"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#consolecommandaisettarget",children:"consoleCommandAISetTarget"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#consolecommandaishowcosts",children:"consoleCommandAIShowCosts"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#consolecommandaishowobstacles",children:"consoleCommandAIShowObstacles"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#consolecommandaistart",children:"consoleCommandAIStart"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#consolecommandaitoggleainodedebug",children:"consoleCommandAIToggleAINodeDebug"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#consolecommandaitogglesplinevisibility",children:"consoleCommandAIToggleSplineVisibility"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#consolecommandshowplanningdebug",children:"consoleCommandShowPlanningDebug"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#delete",children:"delete"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#drawdebug",children:"drawDebug"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getactivejobs",children:"getActiveJobs"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getagentstatename",children:"getAgentStateName"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getailimitedreached",children:"getAILimitedReached"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getjobbyid",children:"getJobById"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getnavigationmap",children:"getNavigationMap"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getnavigationmapfilename",children:"getNavigationMapFilename"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getnumactivejobs",children:"getNumActiveJobs"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getvehiclebyagent",children:"getVehicleByAgent"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#loadfromxmlfile",children:"loadFromXMLFile"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#loadmapdata",children:"loadMapData"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#new",children:"new"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onclientjoined",children:"onClientJoined"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#oncreateairoadspline",children:"onCreateAIRoadSpline"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onmissionstarted",children:"onMissionStarted"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onterrainload",children:"onTerrainLoad"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registerxmlpaths",children:"registerXMLPaths"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#removeagent",children:"removeAgent"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#removeblockingregion",children:"removeBlockingRegion"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#removejob",children:"removeJob"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#removejobvehicle",children:"removeJobVehicle"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#removeobstacle",children:"removeObstacle"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#removeroadspline",children:"removeRoadSpline"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#save",children:"save"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#setareadirty",children:"setAreaDirty"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#setblockingregionstate",children:"setBlockingRegionState"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#setobstacleispassable",children:"setObstacleIsPassable"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#skipcurrenttask",children:"skipCurrentTask"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#skipcurrenttaskinternal",children:"skipCurrentTaskInternal"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#startjob",children:"startJob"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#startjobinternal",children:"startJobInternal"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#stopjob",children:"stopJob"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#stopjobbyid",children:"stopJobById"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#stopjobinternal",children:"stopJobInternal"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#update",children:"update"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"addagent",children:"addAgent"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"addAgent()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"agentId"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"vehicle"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AISystem:addAgent(agentId, vehicle)\n    self.activeAgents[agentId] = vehicle\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"addblockingregion",children:"addBlockingRegion"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Adds a static, fixed size, toggleable blocking area to the AI system, default state: blocking\nIf blocking is enabled and an agent crosses the region it will wait meters in front of the region and the invoke the\ncallback function continously\nDebug rendering is enabled via enableVehicleNavigationMapDebugRendering (included in console command\ngsAIObstaclesShow)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"addBlockingRegion(float x, float y, float z, float rx, float ry, float rz, float sizeX, float sizeY, float sizeZ,\nfloat stopDistance, string callbackFuncName, table? callbackTarget)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"float"}),(0,s.jsx)(n.th,{children:"x"}),(0,s.jsx)(n.th,{})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"float"}),(0,s.jsx)(n.td,{children:"y"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"float"}),(0,s.jsx)(n.td,{children:"z"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"float"}),(0,s.jsx)(n.td,{children:"rx"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"float"}),(0,s.jsx)(n.td,{children:"ry"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"float"}),(0,s.jsx)(n.td,{children:"rz"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"float"}),(0,s.jsx)(n.td,{children:"sizeX"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"float"}),(0,s.jsx)(n.td,{children:"sizeY"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"float"}),(0,s.jsx)(n.td,{children:"sizeZ"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"float"}),(0,s.jsx)(n.td,{children:"stopDistance"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"callbackFuncName"}),(0,s.jsx)(n.td,{children:"callback(entityId navMapId, entityId agentId, integer blockingRegionId), periodically called when agent is overlapping or waiting at the blocking region"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"table?"}),(0,s.jsx)(n.td,{children:"callbackTarget"}),(0,s.jsx)(n.td,{})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table?"}),(0,s.jsx)(n.th,{children:"blockingRegionId"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AISystem:addBlockingRegion(x,y,z, rx,ry,rz, sizeX,sizeY,sizeZ, stopDistance, callbackFuncName, callbackTarget)\n    if not self.isServer then\n        return nil\n    end\n\n    if self.navigationMap = = nil then\n        Logging.warning( "AISystem:addBlockingRegion():vehicle navigation not initialized yet/anymore" )\n        printCallstack()\n        -- TODO:enqueue\n        return nil\n    end\n\n    local blockingRegionId = addVehicleNavigationWorldBlockingRegion( self.navigationMap, x,y,z, rx,ry,rz, sizeX,sizeY,sizeZ, stopDistance, callbackFuncName, callbackTarget)\n    log( "AISystem:addVehicleNavigationWorldBlockingRegion pos:" , x,y,z, "rot:" , rx,ry,rz, "size:" , sizeX,sizeY,sizeZ, "stopDistance:" , stopDistance, " = > id:" , blockingRegionId)\n\n    return blockingRegionId\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"addjob",children:"addJob"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"addJob()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"job"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AISystem:addJob(job)\n    table.insert( self.activeJobs, job)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"addjobvehicle",children:"addJobVehicle"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"addJobVehicle()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"vehicle"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AISystem:addJobVehicle(vehicle)\n    table.addElement( self.activeJobVehicles, vehicle)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"addobstacle",children:"addObstacle"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"addObstacle(entityId node, float? centerOffsetX, float? centerOffsetY, float? centerOffsetZ, float? sizeX, float?\nsizeY, float? sizeZ, float? brakeAcceleration, boolean? isPassable)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"entityId"}),(0,s.jsx)(n.th,{children:"node"}),(0,s.jsx)(n.th,{})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"float?"}),(0,s.jsx)(n.td,{children:"centerOffsetX"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"float?"}),(0,s.jsx)(n.td,{children:"centerOffsetY"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"float?"}),(0,s.jsx)(n.td,{children:"centerOffsetZ"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"float?"}),(0,s.jsx)(n.td,{children:"sizeX"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"float?"}),(0,s.jsx)(n.td,{children:"sizeY"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"float?"}),(0,s.jsx)(n.td,{children:"sizeZ"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"float?"}),(0,s.jsx)(n.td,{children:"brakeAcceleration"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"boolean?"}),(0,s.jsx)(n.td,{children:"isPassable"}),(0,s.jsx)(n.td,{children:"If not passable, other vehicles are not allowed to overtake when approaching from behind. default: true"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AISystem:addObstacle(node, centerOffsetX, centerOffsetY, centerOffsetZ, sizeX, sizeY, sizeZ, brakeAcceleration, isPassable)\n    if self.isServer and self.navigationMap ~ = nil and node ~ = nil then\n        centerOffsetX = centerOffsetX or 0\n        centerOffsetY = centerOffsetY or 0\n        centerOffsetZ = centerOffsetZ or 0\n        sizeX = sizeX or 0\n        sizeY = sizeY or 0\n        sizeZ = sizeZ or 0\n        brakeAcceleration = brakeAcceleration or 0\n        isPassable = Utils.getNoNil(isPassable, true )\n\n        addVehicleNavigationPhysicsObstacle( self.navigationMap, node, centerOffsetX, centerOffsetY, centerOffsetZ, sizeX, sizeY, sizeZ, brakeAcceleration)\n\n        if not isPassable then\n            setVehicleNavigationPhysicsObstacleIsPassable( self.navigationMap, node, false )\n        end\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"addroadspline",children:"addRoadSpline"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"addRoadSpline(entityId spline, float? maxWidth, float? maxTurningRadius, float? maxHeight)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"entityId"}),(0,s.jsx)(n.th,{children:"spline"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"float?"}),(0,s.jsx)(n.td,{children:"maxWidth"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"float?"}),(0,s.jsx)(n.td,{children:"maxTurningRadius"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"float?"}),(0,s.jsx)(n.td,{children:"maxHeight"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AISystem:addRoadSpline(spline, maxWidth, maxTurningRadius, maxHeight)\n    if self.isServer and spline ~ = nil then\n        if self.navigationMap ~ = nil then\n            I3DUtil.iterateRecursively(spline, function (subSpline)\n                if I3DUtil.getIsSpline(subSpline) then\n                    local isAllowed = true\n                    if getUserAttribute(subSpline, "isAISpline" ) = = false then\n                        isAllowed = false\n                    end\n\n                    if isAllowed then\n                        local defaultMaxWidth = maxWidth or self.defaultVehicleMaxWidth\n                        local defaultMaxHeight = maxHeight or self.defaultVehicleMaxHeightSpline\n                        local defaultMaxTurningRadius = maxTurningRadius or self.defaultVehicleMaxTurningRadius\n                        addRoadsToVehicleNavigationMap( self.navigationMap, subSpline, defaultMaxWidth, defaultMaxHeight, defaultMaxTurningRadius)\n\n                        setVisibility(subSpline, self.splinesVisible)\n\n                        table.addElement( self.roadSplines, subSpline)\n                    end\n                end\n            end , true )\n        else\n                local delayedSplineData = { }\n                delayedSplineData.spline = spline\n                delayedSplineData.maxWidth = maxWidth\n                delayedSplineData.maxTurningRadius = maxTurningRadius\n                delayedSplineData.maxHeight = maxHeight\n\n                table.addElement( self.delayedRoadSplines, delayedSplineData)\n            end\n        end\n    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"consolecommandaichecksplineinterference",children:"consoleCommandAICheckSplineInterference"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"walk across all AI splines and check if they interfere with any objects"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"consoleCommandAICheckSplineInterference()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"stepLength"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"heightOffset"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"defaultSplineWidth"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"defaultSplineHeight"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AISystem:consoleCommandAICheckSplineInterference(stepLength, heightOffset, defaultSplineWidth, defaultSplineHeight)\n    if not self.isServer then\n        return "gsAISplinesCheckInterference is a server-only command"\n    end\n\n    local usage = "gsAISplineCheckInterference [stepLength] [heightOffset] [defaultSplineWidth] [defaultSplineHeight]\\nUse \'gsDebugManagerClearElements\' to remove boxes."\n\n    g_debugManager:removeGroup( "AIInterference" )\n\n    local debugLastPos = { }\n    local debugNumInterferences = 0\n\n    stepLength = tonumber(stepLength) or 5\n    heightOffset = tonumber(heightOffset) or 0.2\n    defaultSplineWidth = tonumber(defaultSplineWidth) or self.defaultVehicleMaxWidth\n    defaultSplineHeight = tonumber(defaultSplineHeight) or self.defaultVehicleMaxHeightSpline\n    local collisionMask = CollisionMask.ALL - CollisionFlag.TERRAIN - CollisionFlag.TERRAIN_DELTA - CollisionFlag.TERRAIN_DISPLACEMENT - CollisionFlag.TRIGGER - CollisionFlag.FILLABLE\n    local overlapFactor = 0.9 -- slightly overlap to reduce change of unchecked areas in curves\n\n    Logging.info( "Checking interference:stepLength = %.2f heightOffset = %.2f defaultSplineWidth = %.2f defaultSplineHeight = %.2f" , stepLength, heightOffset, defaultSplineWidth, defaultSplineHeight)\n\n    local numSplines = 0\n    local testPosition = createTransformGroup( "testPosition" )\n    local splineMaxWidth -- save spline max width as they might be inherited\n    local splineMaxHeight -- save spline max width as they might be inherited\n\n    local splinesWithIntersections = { }\n\n    local callbackTarget = { }\n    callbackTarget.onOverlapCallback = function (target, nodeId)\n        if nodeId = = 0 then\n            return\n        end\n\n        -- ignore anything which does not collide, e.g.tip collisions\n        if getCollisionFilterMask(nodeId) = = 1 then\n            return\n        end\n\n        if CollisionFlag.getHasGroupFlagSet(nodeId, CollisionFlag.VEHICLE) or CollisionFlag.getHasGroupFlagSet(nodeId, CollisionFlag.TRAFFIC_VEHICLE) then\n            return\n        end\n        if CollisionFlag.getHasGroupFlagSet(nodeId, CollisionFlag.ROAD) then\n            return\n        end\n\n        -- CollisionFlag.getHasGroupFlagSet(nodeId, CollisionFlag.AI_BLOCKING)\n        local last = debugLastPos\n\n        local customWidth = getUserAttribute(nodeId, \'maxWidth\')\n        local customWidthText = customWidth and string.format( " (maxWidth UserAttribute: %.2f)" , customWidth) or ""\n\n        local nodeName = string.format( "%s|%s" , getName(getParent(nodeId)), getName(nodeId))\n        Logging.warning( "found interference for spline \'%s\'%s with object \'%s\' at %d %d %d" , getName(last.spline), customWidthText, nodeName, last.wx, last.wy, last.wz)\n\n            local overlapDebugBox = DebugBox.new():createFromOverlapBoxParameters(last.wx, last.wy, last.wz, last.rx, last.ry, last.rz, last.sx, last.sy, last.sz)\n            overlapDebugBox:setText(nodeName)\n            overlapDebugBox:addToManager( "AIInterference" )\n\n            splinesWithIntersections[last.spline] = true\n\n            debugNumInterferences = debugNumInterferences + 1\n        end\n\n        local function checkInterference(spline)\n            numSplines = numSplines + 1\n            local splineWidth = getUserAttribute(spline, "maxWidth" ) or splineMaxWidth or defaultSplineWidth\n            local splineHeight = getUserAttribute(spline, "maxHeight" ) or splineMaxHeight or defaultSplineHeight\n            local splineLength = getSplineLength(spline)\n            local stepSize = stepLength * overlapFactor / splineLength\n            for offset = 0 , 1 + stepSize, stepSize do\n                local clampedSplineTime = math.clamp(offset, 0 , 1 )\n                local wx, wy, wz = getSplinePosition(spline, clampedSplineTime)\n                local dx, dy, dz = getSplineDirection(spline, clampedSplineTime)\n                setWorldTranslation(testPosition, wx, wy, wz)\n                setDirection(testPosition, dx, dy, dz, 0 , 1 , 0 )\n\n                local rx, ry, rz = getWorldRotation(testPosition)\n                local sx, sy, sz = splineWidth / 2 , (splineHeight / 2 ) - heightOffset / 2 , stepLength / 2\n                wy = wy + sy + heightOffset -- offset height by extent and 20 cm to avoid clipping with bridges\n\n                debugLastPos = {\n                rx = rx, ry = ry, rz = rz,\n                sx = sx, sy = sy, sz = sz,\n                wx = wx, wy = wy, wz = wz,\n                spline = spline,\n                }\n\n                overlapBox(wx, wy, wz, rx, ry, rz, sx, sy, sz, "onOverlapCallback" , callbackTarget, collisionMask, false , true , true , true )\n            end\n        end\n\n        local function filterSplines(node, depth)\n            if I3DUtil.getIsSpline(node) then\n                checkInterference(node)\n            else\n                    -- save spline index for transform groups as it\'s inherited to child splines\n                        splineMaxWidth = getUserAttribute(node, "maxWidth" )\n                        splineMaxHeight = getUserAttribute(node, "maxHeight" )\n                    end\n                end\n\n                for _, aiSpline in ipairs( self.roadSplines) do\n                    I3DUtil.iterateRecursively(aiSpline, filterSplines, true )\n                end\n\n                for spline in pairs(splinesWithIntersections) do\n                    DebugSpline.new():createWithNode(spline):addToManager( "AIInterference" )\n                end\n\n                delete(testPosition)\n\n                return string.format( "Checked %d splines, found %d interferences\\n%s" , numSplines, debugNumInterferences, usage)\n            end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"consolecommandaicostmapexport",children:"consoleCommandAICostmapExport"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"consoleCommandAICostmapExport()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"imageFormatStr"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AISystem:consoleCommandAICostmapExport(imageFormatStr)\n    if not self.isServer then\n        return "gsAICostsExport is a server-only command"\n    end\n\n    if g_currentMission.missionInfo.savegameDirectory = = nil then\n        return "Error:Savegame directory does not exist yet, please save the game first"\n    end\n\n    local imageFormat = BitmapUtil.FORMAT.PIXELMAP\n    if imageFormatStr ~ = nil then\n        imageFormat = BitmapUtil.FORMAT[ string.upper(imageFormatStr)]\n        if imageFormat = = nil then\n            Logging.error( "Unknown image format \'%s\'.Available formats: %s" , imageFormatStr, table.concatKeys( BitmapUtil.FORMAT, ", " ))\n            return "Error:Costmap export failed"\n        end\n    end\n\n    local terrainSizeHalf = self.mission.terrainSize * 0.5\n    local cellSizeHalf = self.cellSizeMeters / 2\n    local imageSize = self.mission.terrainSize\n\n    local isGreymap = imageFormat = = BitmapUtil.FORMAT.GREYMAP\n    local colorBlocking = self.debug.colors.blocking\n    local colorSpline = self.debug.colors.spline\n\n    local splines = self:getRoadSplines()\n\n    -- create mapping table from rounded world [x][z] coordinates for existing splines\n        -- checking for near spline for a given world position for each pixel is too expensive/slow\n            local posToHasSpline = { }\n            for spline in pairs(splines) do\n                local splineLength = getSplineLength(spline)\n                for splineTime = 0 , 1 , 1 / splineLength do -- step spline in 1m increments\n                    local wx, _, wz = getSplinePosition(spline, splineTime)\n                    local xInt, zInt = MathUtil.round(wx), MathUtil.round(wz)\n                    posToHasSpline[xInt] = posToHasSpline[xInt] or { }\n                    posToHasSpline[xInt][zInt] = true\n                end\n            end\n\n            local terrainNode = g_terrainNode\n            local function getPixelsIterator()\n                local stepZ = - terrainSizeHalf + cellSizeHalf\n                local stepX = - terrainSizeHalf + cellSizeHalf\n\n                local pixel = { 0 , 0 , 0 }\n\n                return function ()\n                    if stepZ > (terrainSizeHalf - cellSizeHalf) then\n                        return nil\n                    end\n\n                    local worldPosY = getTerrainHeightAtWorldPos(terrainNode, stepX, 0 , stepZ)\n                    local cost, isBlocking = getVehicleNavigationMapCostAtWorldPos( self.navigationMap, stepX, worldPosY, stepZ)\n\n                    -- check lookup table if position has a spline\n                        local xInt, zInt = MathUtil.round(stepX), MathUtil.round(stepZ)\n                        local posHasSpline = posToHasSpline[xInt] and posToHasSpline[xInt][zInt]\n\n                        if isGreymap then\n                            if posHasSpline then\n                                pixel[ 1 ] = 1\n                            else\n                                    pixel[ 1 ] = cost\n                                end\n                                pixel[ 1 ] = (pixel[ 1 ] / AISystem.COSTMAP_MAX_VALUE) * 255\n                            else\n                                    if posHasSpline then\n                                        pixel[ 1 ], pixel[ 2 ], pixel[ 3 ] = colorSpline[ 1 ], colorSpline[ 2 ], colorSpline[ 3 ]\n                                    else\n                                            if isBlocking then\n                                                pixel[ 1 ], pixel[ 2 ], pixel[ 3 ] = colorBlocking[ 1 ], colorBlocking[ 2 ], colorBlocking[ 3 ]\n                                            else\n                                                    pixel[ 1 ], pixel[ 2 ], pixel[ 3 ] = Utils.getGreenRedBlendedColor(cost / AISystem.COSTMAP_MAX_VALUE)\n                                                end\n                                            end\n                                            pixel[ 1 ], pixel[ 2 ], pixel[ 3 ] = pixel[ 1 ] * 255 , pixel[ 2 ] * 255 , pixel[ 3 ] * 255\n                                        end\n\n                                        if stepX < (terrainSizeHalf - self.cellSizeMeters) then\n                                            stepX = stepX + self.cellSizeMeters\n                                        else\n                                                stepX = - terrainSizeHalf + cellSizeHalf\n                                                stepZ = stepZ + self.cellSizeMeters\n                                            end\n\n                                            return pixel\n                                        end\n                                    end\n\n                                    if not BitmapUtil.writeBitmapToFileFromIterator(getPixelsIterator, imageSize, imageSize, g_currentMission.missionInfo.savegameDirectory .. "/navigationMap" , imageFormat) then\n                                        return "Error:Costmap export failed"\n                                    end\n\n                                    return "Finished costmap export"\n                                end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"consolecommandaienabledebug",children:"consoleCommandAIEnableDebug"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"consoleCommandAIEnableDebug()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AISystem:consoleCommandAIEnableDebug()\n    self.debugEnabled = not self.debugEnabled\n    return "debugEnabled = " .. tostring( self.debugEnabled)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"consolecommandaisetareadirty",children:"consoleCommandAISetAreaDirty"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"consoleCommandAISetAreaDirty()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"width"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AISystem:consoleCommandAISetAreaDirty(width)\n    if not self.isServer then\n        return "gsAICostsUpdate is a server-only command"\n    end\n\n    local x,_,z = getWorldTranslation(g_cameraManager:getActiveCamera())\n    width = math.clamp( tonumber(width) or 30 , 2 , g_terrainSize or 2048 )\n    local halfWidth = width / 2\n    self:setAreaDirty(x - halfWidth, x + halfWidth, z - halfWidth, z + halfWidth)\n    return string.format( "Updated costmap in a %dx%d area around the camera" , width, width)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"consolecommandaisetlasttarget",children:"consoleCommandAISetLastTarget"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"consoleCommandAISetLastTarget()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AISystem:consoleCommandAISetLastTarget()\n    if not self.isServer then\n        return "gsAISetLastTarget is a server-only command"\n    end\n\n    if self.debug.target ~ = nil then\n        local x = self.debug.target.x\n        local y = self.debug.target.y\n        local z = self.debug.target.z\n        local dirX = self.debug.target.dirX\n        local dirZ = self.debug.target.dirZ\n\n        local marker = self.debug.marker\n        if marker ~ = nil then\n            marker:create(x,y,z, dirX,dirZ)\n        end\n        return "Set target to last target"\n    else\n            return "No last target found"\n        end\n    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"consolecommandaisettarget",children:"consoleCommandAISetTarget"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"consoleCommandAISetTarget()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"offsetX"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"offsetZ"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AISystem:consoleCommandAISetTarget(offsetX, offsetZ)\n    if not self.isServer then\n        return "gsAISetTarget is a server-only command"\n    end\n\n    local x, y, z = 0 , 0 , 0\n    local dirX, dirY, dirZ, _ = 1 , 0 , 0 , nil\n    local localPlayer = g_localPlayer\n    if not localPlayer:getIsInVehicle() then\n        if localPlayer ~ = nil and localPlayer:getIsControlled() and localPlayer.rootNode ~ = nil and localPlayer.rootNode ~ = 0 then\n            local yaw\n            x, z, yaw = localPlayer:getMapPositionAndLookYaw()\n            y = getTerrainHeightAtWorldPos(g_terrainNode, x, 0 , z)\n            dirX, dirZ = MathUtil.getDirectionFromYRotation(yaw)\n        end\n    elseif localPlayer:getCurrentVehicle() ~ = nil then\n            x, y, z = getWorldTranslation(localPlayer:getCurrentVehicle().rootNode)\n            dirX, _, dirZ = localDirectionToWorld(localPlayer:getCurrentVehicle().rootNode, 0 , 0 , 1 )\n        else\n                x, y, z = getWorldTranslation(g_cameraManager:getActiveCamera())\n                dirX, _, dirZ = localDirectionToWorld(g_cameraManager:getActiveCamera(), 0 , 0 , - 1 )\n            end\n\n            local normX, _, normZ = MathUtil.crossProduct( 0 , 1 , 0 , dirX, dirY, dirZ)\n\n            offsetX = tonumber(offsetX) or 0\n            offsetZ = tonumber(offsetZ) or 0\n\n            x = x + dirX * offsetZ + normX * offsetX\n            z = z + dirZ * offsetZ + normZ * offsetX\n\n            self.debug.target = {\n            x = x,\n            y = y,\n            z = z,\n            dirX = dirX,\n            dirY = dirY,\n            dirZ = dirZ,\n            }\n\n            if self.debug.marker ~ = nil then\n                g_debugManager:removeElement( self.debug.marker)\n                self.debug.marker = nil\n            end\n            self.debug.marker = DebugFlag.new():create(x,y,z, dirX, dirZ):setText( "AI Target" )\n            g_debugManager:addElement( self.debug.marker, "AI" )\n\n            return "Set AI Target"\n        end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"consolecommandaishowcosts",children:"consoleCommandAIShowCosts"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"consoleCommandAIShowCosts()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AISystem:consoleCommandAIShowCosts()\n    if not self.isServer then\n        return "gsAICostsShow is a server-only command"\n    end\n\n    self.debug.isCostRenderingActive = not self.debug.isCostRenderingActive\n\n    if self.debug.isCostRenderingActive then\n        g_debugManager:addDrawable( self )\n        return "showCosts = true"\n    else\n            g_debugManager:removeDrawable( self )\n            return "showCosts = false"\n        end\n    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"consolecommandaishowobstacles",children:"consoleCommandAIShowObstacles"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"consoleCommandAIShowObstacles()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AISystem:consoleCommandAIShowObstacles()\n    if not self.isServer then\n        return "gsAIObstaclesShow is a server-only command"\n    end\n\n    self.mapDebugRenderingEnabled = not self.mapDebugRenderingEnabled\n    enableVehicleNavigationMapDebugRendering( self.navigationMap, self.mapDebugRenderingEnabled)\n\n    return "AIShowObstacles = " .. tostring( self.mapDebugRenderingEnabled)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"consolecommandaistart",children:"consoleCommandAIStart"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"consoleCommandAIStart()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AISystem:consoleCommandAIStart()\n    if not self.isServer then\n        return "Only available on server"\n    end\n\n    if g_localPlayer:getCurrentVehicle() = = nil then\n        return "Please enter a vehicle first"\n    end\n\n    local target = self.debug.target\n    if target = = nil then\n        return "Please set a target first"\n    end\n\n    local job = g_currentMission.aiJobTypeManager:createJob(AIJobType.GOTO)\n    local angle = MathUtil.getYRotationFromDirection(target.dirX, target.dirZ)\n\n    job.vehicleParameter:setVehicle(g_localPlayer:getCurrentVehicle())\n    job.positionAngleParameter:setPosition(target.x, target.z)\n    job.positionAngleParameter:setAngle(angle)\n    job:setValues()\n\n    local success, errorMessage = job:validate(g_localPlayer.farmId)\n    if success then\n        self:startJob(job, g_localPlayer.farmId)\n        return "Started ai .. ."\n    else\n            return "Error: " .. tostring(errorMessage)\n        end\n    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"consolecommandaitoggleainodedebug",children:"consoleCommandAIToggleAINodeDebug"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"consoleCommandAIToggleAINodeDebug()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AISystem:consoleCommandAIToggleAINodeDebug()\n    self.stationsAINodesVisible = not self.stationsAINodesVisible\n\n    if self.stationsAINodesVisible then\n        self.stationsAINodesDebugElements = { }\n\n        for _, unloadingStation in pairs(g_currentMission.storageSystem:getUnloadingStations()) do\n            if unloadingStation:isa( UnloadingStation ) then\n                local x, _, _, _, unloadTrigger = unloadingStation:getAITargetPositionAndDirection(FillType.UNKNOWN)\n                if x ~ = nil then\n                    local text = "UnloadingStation: " .. unloadingStation:getName()\n                    local gizmo = DebugGizmo.new():createWithNode(unloadTrigger.aiNode, text, nil , nil , nil , false )\n                    g_debugManager:addElement(gizmo)\n                    table.insert( self.stationsAINodesDebugElements, gizmo)\n                end\n            end\n        end\n\n        for _, loadingStation in pairs(g_currentMission.storageSystem:getLoadingStations()) do\n            local x, _, _, _, loadTrigger = loadingStation:getAITargetPositionAndDirection(FillType.UNKNOWN)\n            if x ~ = nil then\n                local text = "LoadingStation: " .. loadingStation:getName()\n                local gizmo = DebugGizmo.new():createWithNode(loadTrigger.aiNode, text, nil , nil , nil , false )\n                g_debugManager:addElement(gizmo)\n                table.insert( self.stationsAINodesDebugElements, gizmo)\n            end\n        end\n    else\n            for _, gizmo in pairs( self.stationsAINodesDebugElements) do\n                g_debugManager:removeElement(gizmo)\n                gizmo:delete()\n            end\n            self.stationsAINodesDebugElements = nil\n        end\n\n        if self.stationsAINodesVisible then\n            Logging.warning( "Nodes in reloaded placeables are not updated automatically.Toggle this command again to update the station nodes if placeables were reloaded." )\n            end\n            return "AISystem.stationsAINodesVisible = " .. tostring( self.stationsAINodesVisible)\n        end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"consolecommandaitogglesplinevisibility",children:"consoleCommandAIToggleSplineVisibility"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"consoleCommandAIToggleSplineVisibility()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AISystem:consoleCommandAIToggleSplineVisibility()\n    if not self.isServer then\n        return "gsAISplinesShow is a server-only command"\n    end\n\n    self.splinesVisible = not self.splinesVisible\n\n    if self.splinesVisible then\n        local debugMat = g_debugManager:getDebugMat()\n\n        -- set visible and create debug elements\n        for spline in pairs( self:getRoadSplines()) do\n            local r, g, b = DebugUtil.getDebugColor(spline):unpack()\n            setMaterial(spline, debugMat, 0 )\n            setShaderParameter(spline, "color" , r, g, b, 0 , false )\n            setShaderParameter(spline, "alpha" , 1 , 0 , 0 , 0 , false )\n\n            local debugSpline = DebugSpline.new():createWithNode(spline):setColorRGBA(r,g,b):setClipDistance( 250 )\n            g_debugManager:addElement(debugSpline, "AISystemSplines" )\n        end\n    else\n            -- remove existing debug elements\n            g_debugManager:removeGroup( "AISystemSplines" )\n\n            -- hide splines implicitly unhidden by DebugSpline\n            for spline in pairs( self:getRoadSplines()) do\n                setVisibility(spline, false )\n            end\n        end\n\n        if g_currentMission.trafficSystem ~ = nil and g_currentMission.trafficSystem.rootNodeId ~ = nil then\n            setVisibility(g_currentMission.trafficSystem.rootNodeId, self.splinesVisible)\n        end\n\n        return "AISystem.splinesVisible = " .. tostring( self.splinesVisible)\n    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"consolecommandshowplanningdebug",children:"consoleCommandShowPlanningDebug"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"consoleCommandShowPlanningDebug()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AISystem:consoleCommandShowPlanningDebug()\n    self.planningDebugEnabled = not self.planningDebugEnabled\n    Logging.info( "AI Planning debug " .. ( self.planningDebugEnabled and "on" or "off" ))\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"delete",children:"delete"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"delete()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AISystem:delete()\n    --#debug log("AISystem:delete()")\n    if self.isServer then\n        for i = # self.jobsToRemove, 1 , - 1 do\n            local job = self.jobsToRemove[i]\n            local jobId = job.jobId\n\n            table.removeElement( self.activeJobs, job)\n            table.remove( self.jobsToRemove, i)\n\n            g_messageCenter:publish(MessageType.AI_JOB_REMOVED, jobId)\n        end\n\n        for i = # self.activeJobs, 1 , - 1 do\n            local job = self.activeJobs[i]\n            self:stopJob(job, AIMessageErrorUnknown.new())\n        end\n    end\n\n    if self.navigationMap ~ = nil then\n        delete( self.navigationMap)\n        self.navigationMap = nil\n    end\n\n    if self.debug ~ = nil and self.debug.marker ~ = nil then\n        g_debugManager:removeElement( self.debug.marker)\n        self.debug.marker = nil\n    end\n\n    if self.lastPlanningBitVectorMap ~ = nil then\n        delete( self.lastPlanningBitVectorMap)\n        self.lastPlanningBitVectorMap = nil\n    end\n\n    self.activeAgents = { }\n\n    g_messageCenter:unsubscribeAll( self )\n\n    removeConsoleCommand( "gsAISetTarget" )\n    removeConsoleCommand( "gsAISetLastTarget" )\n    removeConsoleCommand( "gsAIStart" )\n    removeConsoleCommand( "gsAIEnableDebug" )\n    removeConsoleCommand( "gsAISplinesShow" )\n    removeConsoleCommand( "gsAISplinesCheckInterference" )\n    removeConsoleCommand( "gsAIStationsShow" )\n    removeConsoleCommand( "gsAIObstaclesShow" )\n    removeConsoleCommand( "gsAICostsShow" )\n    removeConsoleCommand( "gsAICostsUpdate" )\n    removeConsoleCommand( "gsAICostsExport" )\n    removeConsoleCommand( "gsAIAgentSetState" )\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"drawdebug",children:"drawDebug"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"drawDebug()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AISystem:drawDebug()\n    if not self.debug.isCostRenderingActive or(g_gui:getIsGuiVisible() and g_gui.currentGuiName ~ = "ConstructionScreen" ) then\n        return\n    end\n\n    local x,_,z = getWorldTranslation(g_cameraManager:getActiveCamera())\n    if g_localPlayer:getCurrentVehicle() ~ = nil then\n        local object = g_localPlayer:getCurrentVehicle()\n        if g_localPlayer:getCurrentVehicle().selectedImplement ~ = nil then\n            object = g_localPlayer:getCurrentVehicle().selectedImplement.object\n        end\n        x,_,z = getWorldTranslation(object.components[ 1 ].node)\n    end\n\n    local cellSizeHalf = self.cellSizeMeters * 0.5\n    x = ( math.floor(x / self.cellSizeMeters) * self.cellSizeMeters) + cellSizeHalf\n    z = ( math.floor(z / self.cellSizeMeters) * self.cellSizeMeters) + cellSizeHalf\n\n    local range = 15 * self.cellSizeMeters\n    local terrainSizeHalf = self.mission.terrainSize * 0.5\n    local minX = math.max(x - range, - terrainSizeHalf + cellSizeHalf)\n    local minZ = math.max(z - range, - terrainSizeHalf + cellSizeHalf)\n    local maxX = math.min(x + range, terrainSizeHalf - cellSizeHalf)\n    local maxZ = math.min(z + range, terrainSizeHalf - cellSizeHalf)\n\n    local worldPosX, worldPosY, worldPosZ\n    local terrainNode = g_terrainNode\n    local cost, isBlocking\n    local color\n    local textSize = getCorrectTextSize( 0.015 )\n    local r, g, b\n\n    for stepZ = minZ, maxZ, self.cellSizeMeters do\n        for stepX = minX, maxX, self.cellSizeMeters do\n\n            worldPosX = stepX\n            worldPosY = getTerrainHeightAtWorldPos(terrainNode, stepX, 0 , stepZ)\n            worldPosZ = stepZ\n\n            cost, isBlocking = getVehicleNavigationMapCostAtWorldPos( self.navigationMap, worldPosX, worldPosY, worldPosZ)\n            color = self.debug.colors.default\n            if isBlocking then\n                color = self.debug.colors.blocking\n            else\n                    r, g, b = Utils.getGreenRedBlendedColor(cost / AISystem.COSTMAP_MAX_VALUE)\n\n                    color[ 1 ] = r\n                    color[ 2 ] = g\n                    color[ 3 ] = b\n                end\n\n                Utils.renderTextAtWorldPosition(worldPosX, worldPosY, worldPosZ, string.format( "%.1f" , cost), textSize, 0 , color)\n            end\n        end\n    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"getactivejobs",children:"getActiveJobs"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getActiveJobs()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AISystem:getActiveJobs()\n    return self.activeJobs\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getagentstatename",children:"getAgentStateName"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getAgentStateName()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"index"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AISystem.getAgentStateName(index)\n    for k, v in pairs(AgentState) do\n        if v = = index then\n            return k\n        end\n    end\n\n    return "UNKNOWN"\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"getailimitedreached",children:"getAILimitedReached"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getAILimitedReached()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AISystem:getAILimitedReached()\n    return # self.activeJobVehicles > = g_currentMission.maxNumHirables\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getjobbyid",children:"getJobById"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getJobById()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"jobId"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AISystem:getJobById(jobId)\n    for _, job in ipairs( self.activeJobs) do\n        if job.jobId = = jobId then\n            return job\n        end\n    end\n\n    return nil\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getnavigationmap",children:"getNavigationMap"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getNavigationMap()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"navigationCostmap"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AISystem:getNavigationMap()\n    return self.navigationMap\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getnavigationmapfilename",children:"getNavigationMapFilename"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getNavigationMapFilename()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AISystem:getNavigationMapFilename()\n    return self.filename\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getnumactivejobs",children:"getNumActiveJobs"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getNumActiveJobs()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AISystem:getNumActiveJobs()\n    return # self.activeJobs\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getvehiclebyagent",children:"getVehicleByAgent"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getVehicleByAgent()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"agentId"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AISystem:getVehicleByAgent(agentId)\n    return self.activeAgents[agentId]\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"loadfromxmlfile",children:"loadFromXMLFile"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"loadFromXMLFile()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"xmlFilename"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AISystem:loadFromXMLFile(xmlFilename)\n    local xmlFile = XMLFile.load( "aiSystemXML" , xmlFilename)\n    if xmlFile = = nil then\n        return\n    end\n\n    local x = xmlFile:getFloat( "aiSystem.debug.target#posX" )\n    local y = xmlFile:getFloat( "aiSystem.debug.target#posY" )\n    local z = xmlFile:getFloat( "aiSystem.debug.target#posZ" )\n    local dirX = xmlFile:getFloat( "aiSystem.debug.target#dirX" )\n    local dirY = xmlFile:getFloat( "aiSystem.debug.target#dirY" )\n    local dirZ = xmlFile:getFloat( "aiSystem.debug.target#dirZ" )\n\n    if x ~ = nil and y ~ = nil and z ~ = nil and dirX ~ = nil and dirY ~ = nil and dirZ ~ = nil then\n        self.debug.target = { }\n        self.debug.target.x = x\n        self.debug.target.y = y\n        self.debug.target.z = z\n        self.debug.target.dirX = dirX\n        self.debug.target.dirY = dirY\n        self.debug.target.dirZ = dirZ\n    end\n\n    xmlFile:delete()\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"loadmapdata",children:"loadMapData"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Load data on map load"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"loadMapData(entityId xmlFile, table? missionInfo, string? baseDirectory)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"entityId"}),(0,s.jsx)(n.th,{children:"xmlFile"}),(0,s.jsx)(n.th,{children:"xml file handle"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"table?"}),(0,s.jsx)(n.td,{children:"missionInfo"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"string?"}),(0,s.jsx)(n.td,{children:"baseDirectory"}),(0,s.jsx)(n.td,{})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AISystem:loadMapData(xmlFile, missionInfo, baseDirectory)\n    if g_addCheatCommands then\n        if self.isServer then\n            addConsoleCommand( "gsAISetTarget" , "Sets AI Target" , "consoleCommandAISetTarget" , self )\n            addConsoleCommand( "gsAISetLastTarget" , "Sets AI Target to last position" , "consoleCommandAISetLastTarget" , self )\n            addConsoleCommand( "gsAIStart" , "Starts driving to target" , "consoleCommandAIStart" , self )\n\n            if g_isDevelopmentVersion then\n                addConsoleCommand( "gsAIAgentSetState" , "Sets the AI Agent State" , "consoleCommandAIAgentSetState" , self )\n            end\n        end\n        addConsoleCommand( "gsAIEnableDebug" , "Enables AI debugging" , "consoleCommandAIEnableDebug" , self )\n        addConsoleCommand( "gsAISplinesShow" , "Toggle AI system spline visibility" , "consoleCommandAIToggleSplineVisibility" , self )\n        addConsoleCommand( "gsAISplinesCheckInterference" , "Check if AI splines interfere with any objects" , "consoleCommandAICheckSplineInterference" , self , "[stepLength]; [heightOffset]; [defaultSplineWidth]; [defaultSplineHeight]" )\n            addConsoleCommand( "gsAIStationsShow" , "Toggle AI system stations ai nodes visibility" , "consoleCommandAIToggleAINodeDebug" , self )\n            addConsoleCommand( "gsAIObstaclesShow" , "Shows the obstacles around the camera" , "consoleCommandAIShowObstacles" , self )\n            addConsoleCommand( "gsAIPlanningDebug" , "Shows the last planning bit vector map" , "consoleCommandShowPlanningDebug" , self )\n            addConsoleCommand( "gsAICostsShow" , "Shows the costs per cell" , "consoleCommandAIShowCosts" , self )\n            addConsoleCommand( "gsAICostsUpdate" , "Update costmap given width around the camera" , "consoleCommandAISetAreaDirty" , self , "[width = 30]" )\n            addConsoleCommand( "gsAICostsExport" , "Export costmap to image file" , "consoleCommandAICostmapExport" , self )\n        end\n\n        self.cellSizeMeters = 1\n        self.maxSlopeAngle = math.rad( 15 )\n        self.infoLayerName = "navigationCollision"\n        self.infoLayerChannel = 0\n        self.aiDrivableCollisionMask = CollisionFlag.AI_DRIVABLE\n        self.obstacleCollisionMask = CollisionFlag.AI_BLOCKING\n        self.vehicleMaxHeight = 4 -- for costmap generation\n            self.defaultVehicleMaxWidth = 6\n            self.defaultVehicleMaxTurningRadius = 20 -- TODO\n            self.defaultVehicleMaxHeightSpline = 10\n            self.isLeftHandTraffic = false\n\n            -- load map specific xml with custom settings\n            local relFilename = getXMLString(xmlFile, "map.aiSystem#filename" )\n            if relFilename ~ = nil then\n                local filepath = Utils.getFilename(relFilename, baseDirectory)\n                if filepath ~ = nil then\n                    local xmlFileAISystem = XMLFile.load( "mapAISystem" , filepath, AISystem.xmlSchema)\n                    if xmlFileAISystem ~ = nil then\n\n                        self.maxSlopeAngle = xmlFileAISystem:getValue( "aiSystem.maxSlopeAngle" ) or self.maxSlopeAngle\n                        self.infoLayerName = xmlFileAISystem:getValue( "aiSystem.blockedAreaInfoLayer#name" ) or self.infoLayerName\n                        self.infoLayerChannel = xmlFileAISystem:getValue( "aiSystem.blockedAreaInfoLayer#channel" ) or self.infoLayerChannel\n                        self.vehicleMaxHeight = xmlFileAISystem:getValue( "aiSystem.vehicleMaxHeight" ) or self.vehicleMaxHeight\n                        self.defaultVehicleMaxHeightSpline = xmlFileAISystem:getValue( "aiSystem.vehicleMaxHeightSpline" ) or self.defaultVehicleMaxHeightSpline\n                        self.isLeftHandTraffic = Utils.getNoNil(xmlFileAISystem:getValue( "aiSystem.isLeftHandTraffic" ), self.isLeftHandTraffic)\n\n                        xmlFileAISystem:delete()\n                    end\n                end\n            end\n\n            self.debugEnabled = g_isDevelopmentVersion\n            self.debug = { }\n            self.debug.target = nil\n            self.debug.isCostRenderingActive = false\n            self.debug.colors = { }\n            self.debug.colors.default = { 0 , 1 , 0 , 1 }\n            self.debug.colors.blocking = { 1 , 0 , 0 , 1 }\n            self.debug.colors.spline = { 0 , 0 , 1 , 1 }\n\n            self.activeJobs = { }\n            self.jobsToRemove = { }\n\n            self.splinesVisible = false\n            self.roadSplines = { }\n        end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"new",children:"new"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"new(boolean isServer, table mission, table? customMt)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"boolean"}),(0,s.jsx)(n.th,{children:"isServer"}),(0,s.jsx)(n.th,{})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"table"}),(0,s.jsx)(n.td,{children:"mission"}),(0,s.jsx)(n.td,{children:"mission instance"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"table?"}),(0,s.jsx)(n.td,{children:"customMt"}),(0,s.jsx)(n.td,{})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table?"}),(0,s.jsx)(n.th,{children:"self"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AISystem.new(isServer, mission, customMt)\n    local self = setmetatable( { } , customMt or AISystem _mt)\n\n    self.isServer = isServer\n    self.mission = mission\n    self.filename = "vehicleNavigationCostmap.dat"\n    self.navigationMap = nil\n\n    self.planningDebugEnabled = false\n    self.lastPlanningBitVectorMap = nil\n\n    self.activeAgents = { }\n\n    self.jobsToRemove = { }\n    self.activeJobs = { }\n    self.activeJobVehicles = { }\n    self.delayedRoadSplines = { }\n\n    AISystem.xmlSchema = XMLSchema.new( "aiSystem" )\n    self:registerXMLPaths( AISystem.xmlSchema)\n\n    return self\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"onclientjoined",children:"onClientJoined"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onClientJoined()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"connection"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AISystem:onClientJoined(connection)\n    for _, job in ipairs( self.activeJobs) do\n        connection:sendEvent( AIJobStartEvent.new(job, job.startedFarmId))\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"oncreateairoadspline",children:"onCreateAIRoadSpline"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"OnCreate callback for adding splines part of a map the to vehicle navigation system.\nSearches given node and all children recursively for spline nodes.\nFor adding splines from placeables use 'PlaceableAI' specialization"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onCreateAIRoadSpline(entityId node, )"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"entityId"}),(0,s.jsx)(n.th,{children:"node"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"node"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AISystem.onCreateAIRoadSpline(_, node)\n    if node ~ = nil and node ~ = 0 then\n        local maxWidth = tonumber(getUserAttribute(node, "maxWidth" ))\n        local maxTurningRadius = tonumber(getUserAttribute(node, "maxTurningRadius" ))\n        local maxHeight = tonumber(getUserAttribute(node, "maxHeight" ))\n        g_currentMission.aiSystem:addRoadSpline(node, maxWidth, maxTurningRadius, maxHeight)\n    end\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"onmissionstarted",children:"onMissionStarted"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onMissionStarted()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"isNewSavegame"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AISystem:onMissionStarted(isNewSavegame)\n    local worldSizeHalf = 0.5 * self.mission.terrainSize\n    Logging.info( "No vehicle navigation cost map found.Start scanning map .. ." )\n    updateVehicleNavigationMap( self.navigationMap, - worldSizeHalf, worldSizeHalf, - worldSizeHalf, worldSizeHalf)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"onterrainload",children:"onTerrainLoad"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onTerrainLoad()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"terrainNode"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AISystem:onTerrainLoad(terrainNode)\n    if self.isServer then\n        self.navigationMap = createVehicleNavigationMap( self.cellSizeMeters, terrainNode, self.maxSlopeAngle, self.infoLayerName, self.infoLayerChannel, self.aiDrivableCollisionMask, self.obstacleCollisionMask, self.vehicleMaxHeight, self.isLeftHandTraffic)\n\n        if self.mission.trafficSystem ~ = nil then\n            local roadSplineRootNodeId = self.mission.trafficSystem.rootNodeId\n            self:addRoadSpline(roadSplineRootNodeId)\n        end\n\n        for i = # self.delayedRoadSplines, 1 , - 1 do\n            local delayedSplineData = table.remove( self.delayedRoadSplines, 1 )\n            self:addRoadSpline(delayedSplineData.spline, delayedSplineData.maxWidth, delayedSplineData.maxTurningRadius, delayedSplineData.maxHeight)\n        end\n\n        local missionInfo = self.mission.missionInfo\n        local loadFromSave = false\n        if missionInfo.isValid and missionInfo:getIsNavigationCollisionValid( self.mission) then\n            local path = missionInfo.savegameDirectory .. "/" .. self.filename\n            local success = loadVehicleNavigationCostMapFromFile( self.navigationMap, path)\n            if success then\n                Logging.info( "Loaded navigation cost map from savegame" )\n                loadFromSave = true\n            end\n        end\n\n        if not loadFromSave then\n            g_messageCenter:subscribeOneshot(MessageType.CURRENT_MISSION_START, AISystem.onMissionStarted, self )\n        end\n\n        g_messageCenter:publishDelayedAfterFrames(MessageType.AI_SYSTEM_LOADED, 2 ) -- delay 2 frames as added splines need this to be processed in the engine\n    end\n\n    return true\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registerxmlpaths",children:"registerXMLPaths"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerXMLPaths()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"schema"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AISystem:registerXMLPaths(schema)\n    schema:register(XMLValueType.ANGLE, "aiSystem.maxSlopeAngle" , "Maximum terrain angle in degrees which is classified as drivable" , 15 )\n    schema:register(XMLValueType.STRING, "aiSystem.blockedAreaInfoLayer#name" , "Map info layer name defining areas which are blocked for AI driving" , "navigationCollision" )\n        schema:register(XMLValueType.INT, "aiSystem.blockedAreaInfoLayer#channel" , "Map info layer channel defining areas which are blocked for AI driving" , 0 )\n            schema:register(XMLValueType.FLOAT, "aiSystem.vehicleMaxHeight" , "Maximum expected vehicle height used for generating the costmap, e.g.relevant for overhanging collisions" , 4 )\n                schema:register(XMLValueType.FLOAT, "aiSystem.vehicleMaxHeightSpline" , "Default maximum vehicle height allowed for driving on splines, can be adjusted per spline via userAttribute \'maxHeight\'" , 10 )\n                    schema:register(XMLValueType.BOOL, "aiSystem.isLeftHandTraffic" , "Map has left-hand traffic.This setting will only affect collision avoidance, traffic and ai splines need to be set up as left hand in map itself" , false )\n                end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"removeagent",children:"removeAgent"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"removeAgent()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"agentId"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AISystem:removeAgent(agentId)\n    self.activeAgents[agentId] = nil\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"removeblockingregion",children:"removeBlockingRegion"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"removeBlockingRegion(integer blockingRegionId)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"integer"}),(0,s.jsx)(n.th,{children:"blockingRegionId"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AISystem:removeBlockingRegion(blockingRegionId)\n    if not self.isServer then\n        return\n    end\n\n    if self.navigationMap = = nil or blockingRegionId = = nil then\n        return\n    end\n\n    log( "AISystem:removeVehicleNavigationWorldBlockingRegion" , blockingRegionId)\n    removeVehicleNavigationWorldBlockingRegion( self.navigationMap, blockingRegionId)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"removejob",children:"removeJob"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"removeJob()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"job"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AISystem:removeJob(job)\n    table.insert( self.jobsToRemove, job)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"removejobvehicle",children:"removeJobVehicle"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"removeJobVehicle()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"vehicle"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AISystem:removeJobVehicle(vehicle)\n    table.removeElement( self.activeJobVehicles, vehicle)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"removeobstacle",children:"removeObstacle"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"removeObstacle(entityId node)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"entityId"}),(0,s.jsx)(n.th,{children:"node"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AISystem:removeObstacle(node)\n    if self.isServer and self.navigationMap ~ = nil and node ~ = nil then\n        removeVehicleNavigationPhysicsObstacle( self.navigationMap, node)\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"removeroadspline",children:"removeRoadSpline"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"removeRoadSpline(entityId spline)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"entityId"}),(0,s.jsx)(n.th,{children:"spline"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AISystem:removeRoadSpline(spline)\n    if self.isServer and spline ~ = nil then\n        if self.navigationMap ~ = nil then\n            removeRoadsFromVehicleNavigationMap( self.navigationMap, spline)\n            setVisibility(spline, false )\n            table.removeElement( self.roadSplines, spline)\n        else\n                for _, delayedSplineData in ipairs( self.delayedRoadSplines) do\n                    if delayedSplineData.spline = = spline then\n                        table.removeElement( self.delayedRoadSplines, delayedSplineData)\n                        break\n                    end\n                end\n            end\n        end\n    end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"save",children:"save"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"save()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"xmlFilename"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"usedModNames"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AISystem:save(xmlFilename, usedModNames)\n    local xmlFile = XMLFile.create( "aiSystemXML" , xmlFilename, "aiSystem" )\n    if xmlFile ~ = nil then\n        local hasData = false\n        if self.debug.target ~ = nil then\n            local target = self.debug.target\n            xmlFile:setFloat( "aiSystem.debug.target#posX" , target.x)\n            xmlFile:setFloat( "aiSystem.debug.target#posY" , target.y)\n            xmlFile:setFloat( "aiSystem.debug.target#posZ" , target.z)\n            xmlFile:setFloat( "aiSystem.debug.target#dirX" , target.dirX)\n            xmlFile:setFloat( "aiSystem.debug.target#dirY" , target.dirY)\n            xmlFile:setFloat( "aiSystem.debug.target#dirZ" , target.dirZ)\n\n            hasData = true\n        end\n\n        if hasData then\n            xmlFile:save()\n        end\n\n        xmlFile:delete()\n    end\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"setareadirty",children:"setAreaDirty"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Set vehicle navigation costmap dirty for given AABB to enqueue reevaluation of costs, e.g. after removing or adding\nstatic phyiscs ojects"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"setAreaDirty(float minX, float maxX, float minZ, float maxZ)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"float"}),(0,s.jsx)(n.th,{children:"minX"}),(0,s.jsx)(n.th,{children:"world AABB min x"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"float"}),(0,s.jsx)(n.td,{children:"maxX"}),(0,s.jsx)(n.td,{children:"world AABB max x"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"float"}),(0,s.jsx)(n.td,{children:"minZ"}),(0,s.jsx)(n.td,{children:"world AABB min z"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"float"}),(0,s.jsx)(n.td,{children:"maxZ"}),(0,s.jsx)(n.td,{children:"world AABB max z"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AISystem:setAreaDirty(minX, maxX, minZ, maxZ)\n    if self.navigationMap ~ = nil then\n        --#debug if self.debug.isCostRenderingActive then\n            --#debug DebugPlane.newSimple(false, false, nil, true):createWithPositions(minX,0,minZ, maxX,0,minZ, minX,0,maxZ):addToManager("AISystemCostmap", 10000, 50)\n            --#debug end\n            updateVehicleNavigationMap( self.navigationMap, minX, maxX, minZ, maxZ)\n        end\n    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"setblockingregionstate",children:"setBlockingRegionState"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"setBlockingRegionState(integer blockingRegionId, boolean isBlocking)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"integer"}),(0,s.jsx)(n.th,{children:"blockingRegionId"}),(0,s.jsx)(n.th,{})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"boolean"}),(0,s.jsx)(n.td,{children:"isBlocking"}),(0,s.jsx)(n.td,{children:"if true agents will be blocked by the region and wait in front of it"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function AISystem:setBlockingRegionState(blockingRegionId, isBlocking)\n    if not self.isServer then\n        return\n    end\n\n    if self.navigationMap = = nil then\n        -- TODO:enqueue\n        Logging.warning( "AISystem:setBlockingRegionState():vehicle navigation not initialized yet/anymore" )\n        printCallstack()\n        return\n    end\n\n    setVehicleNavigationWorldBlockingRegionState( self.navigationMap, blockingRegionId, isBlocking)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"setobstacleispassable",children:"setObstacleIsPassable"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"setObstacleIsPassable(entityId node, boolean isPassable)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"entityId"}),(0,s.jsx)(n.th,{children:"node"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"boolean"}),(0,s.jsx)(n.td,{children:"isPassable"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AISystem:setObstacleIsPassable(node, isPassable)\n    if self.isServer and self.navigationMap ~ = nil and node ~ = nil then\n        setVehicleNavigationPhysicsObstacleIsPassable( self.navigationMap, node, isPassable)\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"skipcurrenttask",children:"skipCurrentTask"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"skipCurrentTask()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"job"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AISystem:skipCurrentTask(job)\n    -- if self.isServer then\n        -- self:skipCurrentTaskInternal(job)\n        -- else\n            g_client:getServerConnection():sendEvent( AIJobSkipTaskEvent.new(job))\n            -- end\n        end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"skipcurrenttaskinternal",children:"skipCurrentTaskInternal"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"skipCurrentTaskInternal()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"job"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AISystem:skipCurrentTaskInternal(job)\n    job:skipCurrentTask()\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"startjob",children:"startJob"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"startJob()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"job"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"startFarmId"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AISystem:startJob(job, startFarmId)\n    assert( self.isServer)\n    if self.isServer then\n        job:setId( AISystem.NEXT_JOB_ID)\n        AISystem.NEXT_JOB_ID = AISystem.NEXT_JOB_ID + 1\n\n        g_server:broadcastEvent( AIJobStartEvent.new(job, startFarmId))\n\n        self:startJobInternal(job, startFarmId)\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"startjobinternal",children:"startJobInternal"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"startJobInternal()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"job"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"startFarmId"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AISystem:startJobInternal(job, startFarmId)\n    job:start(startFarmId)\n    self:addJob(job)\n\n    g_messageCenter:publish(MessageType.AI_JOB_STARTED, job, startFarmId)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"stopjob",children:"stopJob"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"stopJob()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"job"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"aiMessage"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AISystem:stopJob(job, aiMessage)\n    if self.isServer then\n        self:stopJobInternal(job, aiMessage)\n        g_server:broadcastEvent( AIJobStopEvent.new(job, aiMessage))\n    else\n            -- just send a request to the server.\n            -- server will broadcast the real job to all clients\n            g_client:getServerConnection():sendEvent( AIJobStopEvent.new(job, aiMessage))\n        end\n    end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"stopjobbyid",children:"stopJobById"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"stopJobById()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"jobId"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"aiMessage"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"noEventSend"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AISystem:stopJobById(jobId, aiMessage, noEventSend)\n    local job = self:getJobById(jobId)\n    if job ~ = nil then\n        self:stopJob(job, aiMessage, noEventSend)\n        return true\n    end\n\n    return false\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"stopjobinternal",children:"stopJobInternal"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"stopJobInternal()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"job"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"aiMessage"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AISystem:stopJobInternal(job, aiMessage)\n    job:stop(aiMessage)\n    self:removeJob(job)\n\n    g_messageCenter:publish(MessageType.AI_JOB_STOPPED, job, aiMessage)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"update",children:"update"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"update()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"dt"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function AISystem:update(dt)\n    for i = # self.jobsToRemove, 1 , - 1 do\n        local job = self.jobsToRemove[i]\n        local jobId = job.jobId\n\n        table.removeElement( self.activeJobs, job)\n        table.remove( self.jobsToRemove, i)\n\n        g_messageCenter:publish(MessageType.AI_JOB_REMOVED, jobId)\n    end\n\n    for _, job in ipairs( self.activeJobs) do\n        job:update(dt)\n\n        if self.isServer and g_currentMission.isRunning then\n            job:updateCost(dt)\n        end\n    end\nend\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);