"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[99696],{28453(e,n,i){i.d(n,{R:()=>a,x:()=>c});var s=i(96540);const r={},t=s.createContext(r);function a(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(t.Provider,{value:n},e.children)}},72549(e,n,i){i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>o,frontMatter:()=>a,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"script/Specializations/Dischargeable","title":"Dischargeable","description":"Dischargeable","source":"@site/../docs/script/Specializations/Dischargeable.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/Dischargeable","permalink":"/FS25-Community-LUADOC/script/Specializations/Dischargeable","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Dashboard","permalink":"/FS25-Community-LUADOC/script/Specializations/Dashboard"},"next":{"title":"Drivable","permalink":"/FS25-Community-LUADOC/script/Specializations/Drivable"}}');var r=i(74848),t=i(28453);const a={},c=void 0,l={},d=[{value:"Dischargeable",id:"dischargeable",level:2},{value:"actionEventToggleDischargeToGround",id:"actioneventtoggledischargetoground",level:3},{value:"actionEventToggleDischarging",id:"actioneventtoggledischarging",level:3},{value:"dashboardDischargeAttributes",id:"dashboarddischargeattributes",level:3},{value:"discharge",id:"discharge",level:3},{value:"dischargeActivationTriggerCallback",id:"dischargeactivationtriggercallback",level:3},{value:"dischargeToGround",id:"dischargetoground",level:3},{value:"dischargeToObject",id:"dischargetoobject",level:3},{value:"dischargeTriggerCallback",id:"dischargetriggercallback",level:3},{value:"finishDischargeRaycast",id:"finishdischargeraycast",level:3},{value:"getAllowLoadTriggerActivation",id:"getallowloadtriggeractivation",level:3},{value:"getCanBeSelected",id:"getcanbeselected",level:3},{value:"getCanDischargeAtPosition",id:"getcandischargeatposition",level:3},{value:"getCanDischargeToGround",id:"getcandischargetoground",level:3},{value:"getCanDischargeToLand",id:"getcandischargetoland",level:3},{value:"getCanDischargeToObject",id:"getcandischargetoobject",level:3},{value:"getCanToggleDischargeToGround",id:"getcantoggledischargetoground",level:3},{value:"getCanToggleDischargeToObject",id:"getcantoggledischargetoobject",level:3},{value:"getCurrentDischargeNode",id:"getcurrentdischargenode",level:3},{value:"getCurrentDischargeNodeIndex",id:"getcurrentdischargenodeindex",level:3},{value:"getCurrentDischargeObject",id:"getcurrentdischargeobject",level:3},{value:"getDischargeFillType",id:"getdischargefilltype",level:3},{value:"getDischargeNodeAutomaticDischarge",id:"getdischargenodeautomaticdischarge",level:3},{value:"getDischargeNodeByIndex",id:"getdischargenodebyindex",level:3},{value:"getDischargeNodeByNode",id:"getdischargenodebynode",level:3},{value:"getDischargeNodeEmptyFactor",id:"getdischargenodeemptyfactor",level:3},{value:"getDischargeNotAllowedWarning",id:"getdischargenotallowedwarning",level:3},{value:"getDischargeState",id:"getdischargestate",level:3},{value:"getDischargeTargetObject",id:"getdischargetargetobject",level:3},{value:"getDoConsumePtoPower",id:"getdoconsumeptopower",level:3},{value:"getIsDischargeNodeActive",id:"getisdischargenodeactive",level:3},{value:"getIsPowerTakeOffActive",id:"getispowertakeoffactive",level:3},{value:"getRequiresTipOcclusionArea",id:"getrequirestipocclusionarea",level:3},{value:"handleDischarge",id:"handledischarge",level:3},{value:"handleDischargeNodeChanged",id:"handledischargenodechanged",level:3},{value:"handleDischargeOnEmpty",id:"handledischargeonempty",level:3},{value:"handleDischargeRaycast",id:"handledischargeraycast",level:3},{value:"handleFoundDischargeObject",id:"handlefounddischargeobject",level:3},{value:"initSpecialization",id:"initspecialization",level:3},{value:"loadDischargeNode",id:"loaddischargenode",level:3},{value:"onDeactivate",id:"ondeactivate",level:3},{value:"onDelete",id:"ondelete",level:3},{value:"onDeleteActivationTriggerObject",id:"ondeleteactivationtriggerobject",level:3},{value:"onDeleteDischargeTriggerObject",id:"ondeletedischargetriggerobject",level:3},{value:"onFillUnitFillLevelChanged",id:"onfillunitfilllevelchanged",level:3},{value:"onLoad",id:"onload",level:3},{value:"onPostLoad",id:"onpostload",level:3},{value:"onReadStream",id:"onreadstream",level:3},{value:"onReadUpdateStream",id:"onreadupdatestream",level:3},{value:"onRegisterActionEvents",id:"onregisteractionevents",level:3},{value:"onRegisterDashboardValueTypes",id:"onregisterdashboardvaluetypes",level:3},{value:"onStateChange",id:"onstatechange",level:3},{value:"onUpdate",id:"onupdate",level:3},{value:"onUpdateTick",id:"onupdatetick",level:3},{value:"onWriteStream",id:"onwritestream",level:3},{value:"onWriteUpdateStream",id:"onwriteupdatestream",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"raycastCallbackDischargeNode",id:"raycastcallbackdischargenode",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3},{value:"registerEvents",id:"registerevents",level:3},{value:"registerFunctions",id:"registerfunctions",level:3},{value:"registerOverwrittenFunctions",id:"registeroverwrittenfunctions",level:3},{value:"registerXMLPaths",id:"registerxmlpaths",level:3},{value:"saveToXMLFile",id:"savetoxmlfile",level:3},{value:"setCurrentDischargeNodeIndex",id:"setcurrentdischargenodeindex",level:3},{value:"setDischargeEffectActive",id:"setdischargeeffectactive",level:3},{value:"setDischargeEffectDistance",id:"setdischargeeffectdistance",level:3},{value:"setDischargeState",id:"setdischargestate",level:3},{value:"setForcedFillTypeIndex",id:"setforcedfilltypeindex",level:3},{value:"setManualDischargeState",id:"setmanualdischargestate",level:3},{value:"updateActionEvents",id:"updateactionevents",level:3},{value:"updateDebugValues",id:"updatedebugvalues",level:3},{value:"updateDischargeInfo",id:"updatedischargeinfo",level:3},{value:"updateDischargeSound",id:"updatedischargesound",level:3},{value:"updateRaycast",id:"updateraycast",level:3}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"dischargeable",children:"Dischargeable"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Specialization for discharging fillables from a vehicle"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Functions"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#actioneventtoggledischargetoground",children:"actionEventToggleDischargeToGround"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#actioneventtoggledischarging",children:"actionEventToggleDischarging"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#dashboarddischargeattributes",children:"dashboardDischargeAttributes"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#discharge",children:"discharge"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#dischargeactivationtriggercallback",children:"dischargeActivationTriggerCallback"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#dischargetoground",children:"dischargeToGround"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#dischargetoobject",children:"dischargeToObject"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#dischargetriggercallback",children:"dischargeTriggerCallback"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#finishdischargeraycast",children:"finishDischargeRaycast"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getallowloadtriggeractivation",children:"getAllowLoadTriggerActivation"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getcanbeselected",children:"getCanBeSelected"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getcandischargeatposition",children:"getCanDischargeAtPosition"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getcandischargetoground",children:"getCanDischargeToGround"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getcandischargetoland",children:"getCanDischargeToLand"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getcandischargetoobject",children:"getCanDischargeToObject"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getcantoggledischargetoground",children:"getCanToggleDischargeToGround"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getcantoggledischargetoobject",children:"getCanToggleDischargeToObject"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getcurrentdischargenode",children:"getCurrentDischargeNode"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getcurrentdischargenodeindex",children:"getCurrentDischargeNodeIndex"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getcurrentdischargeobject",children:"getCurrentDischargeObject"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getdischargefilltype",children:"getDischargeFillType"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getdischargenodeautomaticdischarge",children:"getDischargeNodeAutomaticDischarge"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getdischargenodebyindex",children:"getDischargeNodeByIndex"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getdischargenodebynode",children:"getDischargeNodeByNode"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getdischargenodeemptyfactor",children:"getDischargeNodeEmptyFactor"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getdischargenotallowedwarning",children:"getDischargeNotAllowedWarning"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getdischargestate",children:"getDischargeState"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getdischargetargetobject",children:"getDischargeTargetObject"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getdoconsumeptopower",children:"getDoConsumePtoPower"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getisdischargenodeactive",children:"getIsDischargeNodeActive"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getispowertakeoffactive",children:"getIsPowerTakeOffActive"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getrequirestipocclusionarea",children:"getRequiresTipOcclusionArea"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#handledischarge",children:"handleDischarge"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#handledischargenodechanged",children:"handleDischargeNodeChanged"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#handledischargeonempty",children:"handleDischargeOnEmpty"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#handledischargeraycast",children:"handleDischargeRaycast"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#handlefounddischargeobject",children:"handleFoundDischargeObject"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#initspecialization",children:"initSpecialization"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#loaddischargenode",children:"loadDischargeNode"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#ondeactivate",children:"onDeactivate"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#ondelete",children:"onDelete"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#ondeleteactivationtriggerobject",children:"onDeleteActivationTriggerObject"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#ondeletedischargetriggerobject",children:"onDeleteDischargeTriggerObject"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onfillunitfilllevelchanged",children:"onFillUnitFillLevelChanged"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onpostload",children:"onPostLoad"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onreadstream",children:"onReadStream"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onreadupdatestream",children:"onReadUpdateStream"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onregisteractionevents",children:"onRegisterActionEvents"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onregisterdashboardvaluetypes",children:"onRegisterDashboardValueTypes"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onstatechange",children:"onStateChange"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onupdate",children:"onUpdate"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onupdatetick",children:"onUpdateTick"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onwritestream",children:"onWriteStream"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#onwriteupdatestream",children:"onWriteUpdateStream"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#raycastcallbackdischargenode",children:"raycastCallbackDischargeNode"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#registerevents",children:"registerEvents"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#registeroverwrittenfunctions",children:"registerOverwrittenFunctions"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#registerxmlpaths",children:"registerXMLPaths"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#savetoxmlfile",children:"saveToXMLFile"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#setcurrentdischargenodeindex",children:"setCurrentDischargeNodeIndex"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#setdischargeeffectactive",children:"setDischargeEffectActive"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#setdischargeeffectdistance",children:"setDischargeEffectDistance"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#setdischargestate",children:"setDischargeState"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#setforcedfilltypeindex",children:"setForcedFillTypeIndex"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#setmanualdischargestate",children:"setManualDischargeState"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#updateactionevents",children:"updateActionEvents"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#updatedebugvalues",children:"updateDebugValues"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#updatedischargeinfo",children:"updateDischargeInfo"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#updatedischargesound",children:"updateDischargeSound"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#updateraycast",children:"updateRaycast"})}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"actioneventtoggledischargetoground",children:"actionEventToggleDischargeToGround"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"actionEventToggleDischargeToGround()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"self"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"actionName"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"inputValue"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"callbackState"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"isAnalog"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function Dischargeable.actionEventToggleDischargeToGround( self , actionName, inputValue, callbackState, isAnalog)\n    if self:getCanToggleDischargeToGround() then\n        local spec = self.spec_dischargeable\n        local currentDischargeNode = spec.currentDischargeNode\n        if spec.currentDischargeState = = Dischargeable.DISCHARGE_STATE_OFF then\n            if self:getCanDischargeToGround(currentDischargeNode) then\n                if self:getCanDischargeToLand(currentDischargeNode) then\n                    if self:getCanDischargeAtPosition(currentDischargeNode) then\n                        self:setManualDischargeState( Dischargeable.DISCHARGE_STATE_GROUND)\n                    else\n                            g_currentMission:showBlinkingWarning(g_i18n:getText( "warning_actionNotAllowedHere" ), 5000 )\n                        end\n                    else\n                            g_currentMission:showBlinkingWarning(g_i18n:getText( "warning_youDontHaveAccessToThisLand" ), 5000 )\n                        end\n                    end\n                else\n                        self:setManualDischargeState( Dischargeable.DISCHARGE_STATE_OFF)\n                    end\n                end\n            end\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"actioneventtoggledischarging",children:"actionEventToggleDischarging"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"actionEventToggleDischarging()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"self"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"actionName"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"inputValue"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"callbackState"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"isAnalog"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable.actionEventToggleDischarging( self , actionName, inputValue, callbackState, isAnalog)\n    if self:getCanToggleDischargeToObject() then\n        local spec = self.spec_dischargeable\n        local currentDischargeNode = spec.currentDischargeNode\n\n        if spec.currentDischargeState = = Dischargeable.DISCHARGE_STATE_OFF then\n            if self:getCanDischargeToObject(currentDischargeNode) then\n                self:setManualDischargeState( Dischargeable.DISCHARGE_STATE_OBJECT)\n            elseif currentDischargeNode.dischargeHit then\n                    if self:getDischargeFillType(currentDischargeNode) ~ = FillType.UNKNOWN then\n                        local warning = self:getDischargeNotAllowedWarning(currentDischargeNode)\n                        g_currentMission:showBlinkingWarning(warning, 5000 )\n                    end\n                end\n            else\n                    self:setManualDischargeState( Dischargeable.DISCHARGE_STATE_OFF)\n                end\n            end\n        end\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"dashboarddischargeattributes",children:"dashboardDischargeAttributes"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"dashboardDischargeAttributes()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"self"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"xmlFile"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"key"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"dashboard"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"isActive"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function Dischargeable.dashboardDischargeAttributes( self , xmlFile, key, dashboard, isActive)\n    dashboard.dischargeNodeIndex = xmlFile:getValue(key .. "#dischargeNodeIndex" )\n    return true\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"discharge",children:"discharge"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"discharge()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"dischargeNode"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"emptyLiters"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:discharge(dischargeNode, emptyLiters)\n    local spec = self.spec_dischargeable\n    local dischargedLiters = 0\n    local minDropReached = true\n    local hasMinDropFillLevel = true\n    local object, fillUnitIndex = self:getDischargeTargetObject(dischargeNode)\n\n    dischargeNode.currentDischargeObject = nil\n\n    if object ~ = nil then\n        if spec.currentDischargeState = = Dischargeable.DISCHARGE_STATE_OBJECT then\n            dischargedLiters = self:dischargeToObject(dischargeNode, emptyLiters, object, fillUnitIndex)\n        end\n    elseif dischargeNode.dischargeHitTerrain then\n            if spec.currentDischargeState = = Dischargeable.DISCHARGE_STATE_GROUND then\n                dischargedLiters, minDropReached, hasMinDropFillLevel = self:dischargeToGround(dischargeNode, emptyLiters)\n            end\n        end\n\n        return dischargedLiters, minDropReached, hasMinDropFillLevel\n    end\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"dischargeactivationtriggercallback",children:"dischargeActivationTriggerCallback"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"dischargeActivationTriggerCallback()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"triggerId"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"otherActorId"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"onEnter"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"onLeave"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"onStay"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"otherShapeId"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function Dischargeable:dischargeActivationTriggerCallback(triggerId, otherActorId, onEnter, onLeave, onStay, otherShapeId)\n    local spec = self.spec_dischargeable\n    if onEnter or onLeave then\n        local object = g_currentMission:getNodeObject(otherActorId)\n        if object ~ = nil and object ~ = self then\n            if object.getFillUnitIndexFromNode ~ = nil then\n                local fillUnitIndex = object:getFillUnitIndexFromNode(otherShapeId)\n                local dischargeNode = spec.activationTriggerToDischargeNode[triggerId]\n\n                if dischargeNode ~ = nil and fillUnitIndex ~ = nil then\n                    local trigger = dischargeNode.activationTrigger\n                    if onEnter then\n                        if trigger.objects[object] = = nil then\n                            trigger.objects[object] = { count = 0 , fillUnitIndex = fillUnitIndex, shape = otherShapeId }\n                            trigger.numObjects = trigger.numObjects + 1\n\n                            object:addDeleteListener( self , "onDeleteActivationTriggerObject" )\n                        end\n                        trigger.objects[object].count = trigger.objects[object].count + 1\n\n                        self:raiseActive()\n                    elseif onLeave then\n                            trigger.objects[object].count = trigger.objects[object].count - 1\n                            if trigger.objects[object].count = = 0 then\n                                trigger.objects[object] = nil\n                                trigger.numObjects = trigger.numObjects - 1\n\n                                object:removeDeleteListener( self , "onDeleteActivationTriggerObject" )\n                            end\n                        end\n                    end\n                end\n            end\n        end\n    end\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"dischargetoground",children:"dischargeToGround"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"dischargeToGround()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"dischargeNode"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"emptyLiters"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:dischargeToGround(dischargeNode, emptyLiters)\n    if emptyLiters = = 0 then\n        return 0 , false , false\n    end\n\n    local fillType, factor = self:getDischargeFillType(dischargeNode)\n    local fillLevel = self:getFillUnitFillLevel(dischargeNode.fillUnitIndex)\n    local minLiterToDrop = g_densityMapHeightManager:getMinValidLiterValue(fillType)\n\n    dischargeNode.litersToDrop = math.min(dischargeNode.litersToDrop + emptyLiters, math.max(dischargeNode.emptySpeed * 250 , minLiterToDrop))\n\n    -- do not tip more than we have if defined via xml\n        -- has the side effect that the fill unit never goes completely empty\n        if dischargeNode.limitGroundTipToFillLevel then\n            dischargeNode.litersToDrop = math.min(dischargeNode.litersToDrop, fillLevel)\n        end\n\n        local minDropReached = dischargeNode.litersToDrop > minLiterToDrop\n        local hasMinDropFillLevel = fillLevel > minLiterToDrop\n        local info = dischargeNode.info\n        local dischargedLiters = 0\n        local sx,sy,sz = localToWorld(info.node, - info.width, 0 , info.zOffset)\n        local ex,ey,ez = localToWorld(info.node, info.width, 0 , info.zOffset)\n\n        sy = sy + info.yOffset\n        ey = ey + info.yOffset\n\n        if info.limitToGround then\n            sy = math.max(getTerrainHeightAtWorldPos(g_terrainNode, sx, 0 , sz) + 0.1 , sy)\n            ey = math.max(getTerrainHeightAtWorldPos(g_terrainNode, ex, 0 , ez) + 0.1 , ey)\n        end\n\n        local dropped, lineOffset = DensityMapHeightUtil.tipToGroundAroundLine( self , dischargeNode.litersToDrop * factor, fillType, sx,sy,sz, ex,ey,ez, info.length, nil , dischargeNode.lineOffset, true , nil , true )\n        dropped = dropped / factor\n        dischargeNode.lineOffset = lineOffset\n        dischargeNode.litersToDrop = dischargeNode.litersToDrop - dropped\n\n        if dropped > 0 then\n            local unloadInfo = self:getFillVolumeUnloadInfo(dischargeNode.unloadInfoIndex)\n            dischargedLiters = self:addFillUnitFillLevel( self:getOwnerFarmId(), dischargeNode.fillUnitIndex, - dropped, self:getFillUnitFillType(dischargeNode.fillUnitIndex), ToolType.UNDEFINED, unloadInfo)\n        end\n\n        fillLevel = self:getFillUnitFillLevel(dischargeNode.fillUnitIndex)\n        if fillLevel > 0 and fillLevel < = minLiterToDrop then\n            dischargeNode.litersToDrop = minLiterToDrop\n        end\n\n        return dischargedLiters, minDropReached, hasMinDropFillLevel\n    end\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"dischargetoobject",children:"dischargeToObject"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"dischargeToObject()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"dischargeNode"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"emptyLiters"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"object"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"targetFillUnitIndex"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:dischargeToObject(dischargeNode, emptyLiters, object, targetFillUnitIndex)\n    local fillType, factor = self:getDischargeFillType(dischargeNode)\n    local supportsFillType = object:getFillUnitSupportsFillType(targetFillUnitIndex, fillType)\n    local dischargedLiters = 0\n\n    if supportsFillType then\n        local allowFillType = object:getFillUnitAllowsFillType(targetFillUnitIndex, fillType)\n        if allowFillType then\n            dischargeNode.currentDischargeObject = object\n\n            local delta = object:addFillUnitFillLevel( self:getActiveFarm(), targetFillUnitIndex, emptyLiters * factor, fillType, dischargeNode.toolType, dischargeNode.info)\n            delta = delta / factor\n            local unloadInfo = self:getFillVolumeUnloadInfo(dischargeNode.unloadInfoIndex)\n\n            dischargedLiters = self:addFillUnitFillLevel( self:getOwnerFarmId(), dischargeNode.fillUnitIndex, - delta, self:getFillUnitFillType(dischargeNode.fillUnitIndex), ToolType.UNDEFINED, unloadInfo)\n        end\n    end\n\n    return dischargedLiters\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"dischargetriggercallback",children:"dischargeTriggerCallback"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"dischargeTriggerCallback()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"triggerId"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"otherActorId"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"onEnter"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"onLeave"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"onStay"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"otherShapeId"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function Dischargeable:dischargeTriggerCallback(triggerId, otherActorId, onEnter, onLeave, onStay, otherShapeId)\n    local spec = self.spec_dischargeable\n    if onEnter or onLeave then\n        local object = g_currentMission:getNodeObject(otherActorId)\n        if object ~ = nil and object ~ = self then\n            if object.getFillUnitIndexFromNode ~ = nil then\n                local fillUnitIndex = object:getFillUnitIndexFromNode(otherShapeId)\n                local dischargeNode = spec.triggerToDischargeNode[triggerId]\n\n                local validObject = fillUnitIndex ~ = nil\n                if not dischargeNode.canDischargeToVehicle then\n                    validObject = validObject and not object:isa( Vehicle )\n                end\n\n                if dischargeNode ~ = nil and validObject then\n                    local trigger = dischargeNode.trigger\n                    if onEnter then\n                        if trigger.objects[object] = = nil then\n                            trigger.objects[object] = { count = 0 , fillUnitIndex = fillUnitIndex, shape = otherShapeId }\n                            trigger.numObjects = trigger.numObjects + 1\n\n                            object:addDeleteListener( self , "onDeleteDischargeTriggerObject" )\n                        end\n                        trigger.objects[object].count = trigger.objects[object].count + 1\n                        self:raiseActive()\n                    elseif onLeave then\n                            trigger.objects[object].count = trigger.objects[object].count - 1\n                            if trigger.objects[object].count = = 0 then\n                                trigger.objects[object] = nil\n                                trigger.numObjects = trigger.numObjects - 1\n\n                                if object = = dischargeNode.dischargeObject then\n                                    dischargeNode.dischargeObject = nil\n                                    dischargeNode.dischargeHitTerrain = false\n                                    dischargeNode.dischargeShape = nil\n                                    dischargeNode.dischargeDistance = 0\n                                    dischargeNode.dischargeFillUnitIndex = nil\n                                end\n\n                                object:removeDeleteListener( self , "onDeleteDischargeTriggerObject" )\n                            end\n                        end\n                    end\n                end\n            end\n        end\n    end\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"finishdischargeraycast",children:"finishDischargeRaycast"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"finishDischargeRaycast()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function Dischargeable:finishDischargeRaycast()\n    local spec = self.spec_dischargeable\n\n    local dischargeNode = spec.currentRaycastDischargeNode\n\n    dischargeNode.dischargeObject = dischargeNode.raycastDischargeObject\n    dischargeNode.dischargeHitObject = dischargeNode.raycastDischargeHitObject\n    dischargeNode.dischargeHitObjectUnitIndex = dischargeNode.raycastDischargeHitObjectUnitIndex\n    dischargeNode.dischargeHitTerrain = dischargeNode.raycastDischargeHitTerrain\n    dischargeNode.dischargeShape = dischargeNode.raycastDischargeShape\n    dischargeNode.dischargeDistance = dischargeNode.raycastDischargeDistance\n    dischargeNode.dischargeFillUnitIndex = dischargeNode.raycastDischargeFillUnitIndex\n    dischargeNode.dischargeHit = dischargeNode.raycastDischargeHit\n    dischargeNode.dischargeFailedReason = dischargeNode.raycastDischargeFailedReason\n\n    self:handleDischargeRaycast(dischargeNode, dischargeNode.dischargeObject, dischargeNode.dischargeShape, dischargeNode.dischargeDistance, dischargeNode.dischargeFillUnitIndex, dischargeNode.dischargeHitTerrain)\n    spec.isAsyncRaycastActive = false\n\n    if dischargeNode.lastDischargeObject ~ = dischargeNode.dischargeObject then\n        SpecializationUtil.raiseEvent( self , "onDischargeTargetObjectChanged" , dischargeNode.dischargeObject)\n        self.rootVehicle:raiseActive()\n    end\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"getallowloadtriggeractivation",children:"getAllowLoadTriggerActivation"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getAllowLoadTriggerActivation()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"superFunc"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"rootVehicle"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:getAllowLoadTriggerActivation(superFunc, rootVehicle)\n    if superFunc( self , rootVehicle) then\n        return true\n    end\n\n    local spec = self.spec_dischargeable\n    if spec.currentDischargeNode ~ = nil then\n        local object = spec.currentDischargeNode.dischargeHitObject\n        if object ~ = nil and object.getAllowLoadTriggerActivation ~ = nil then\n            -- if we start to hit ourself again we break to avoid the endless looping\n                if object = = rootVehicle then\n                    return false\n                end\n\n                return object:getAllowLoadTriggerActivation(rootVehicle)\n            end\n        end\n\n        return false\n    end\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getcanbeselected",children:"getCanBeSelected"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getCanBeSelected()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:getCanBeSelected(superFunc)\n    return true\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getcandischargeatposition",children:"getCanDischargeAtPosition"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getCanDischargeAtPosition()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"dischargeNode"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function Dischargeable:getCanDischargeAtPosition(dischargeNode)\n    if dischargeNode = = nil then\n        return false\n    end\n\n    --#profile RemoteProfiler.zoneBeginN("Dischargeable:getCanDischargeAtPosition")\n    if self:getFillUnitFillLevel(dischargeNode.fillUnitIndex) > 0 then\n        local info = dischargeNode.info\n        local sx,sy,sz = localToWorld(info.node, - info.width, 0 , info.zOffset)\n        local ex,ey,ez = localToWorld(info.node, info.width, 0 , info.zOffset)\n\n        -- check if at the ground position is still space for some more\n            -- check this only if we wan\'t to discharge to the ground(farmland check is also done while discharging to objects)\n                local spec = self.spec_dischargeable\n                if spec.currentDischargeState = = Dischargeable.DISCHARGE_STATE_OFF or spec.currentDischargeState = = Dischargeable.DISCHARGE_STATE_GROUND then\n                    sy = sy + info.yOffset\n                    ey = ey + info.yOffset\n\n                    if info.limitToGround then\n                        sy = math.max(getTerrainHeightAtWorldPos(g_terrainNode, sx, 0 , sz) + 0.1 , sy)\n                        ey = math.max(getTerrainHeightAtWorldPos(g_terrainNode, ex, 0 , ez) + 0.1 , ey)\n                    end\n\n                    local fillType = self:getDischargeFillType(dischargeNode)\n                    local testDrop = g_densityMapHeightManager:getMinValidLiterValue(fillType)\n                    if not DensityMapHeightUtil.getCanTipToGroundAroundLine( self , testDrop, fillType, sx,sy,sz, ex,ey,ez, info.length, nil , dischargeNode.lineOffset, true , nil , true ) then\n                        --#profile RemoteProfiler.zoneEnd()\n                        return false\n                    end\n                end\n            end\n            --#profile RemoteProfiler.zoneEnd()\n\n            return true\n        end\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"getcandischargetoground",children:"getCanDischargeToGround"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getCanDischargeToGround()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"dischargeNode"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:getCanDischargeToGround(dischargeNode)\n    if not self.spec_dischargeable.isDischargeAllowed then\n        return false\n    end\n\n    if dischargeNode = = nil then\n        return false\n    end\n\n    if not dischargeNode.dischargeHitTerrain then\n        return false\n    end\n\n    if self:getFillUnitFillLevel(dischargeNode.fillUnitIndex) > 0 then\n        local fillTypeIndex = self:getDischargeFillType(dischargeNode)\n        if not DensityMapHeightUtil.getCanTipToGround(fillTypeIndex) then\n            return false\n        end\n    end\n\n    return true\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getcandischargetoland",children:"getCanDischargeToLand"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getCanDischargeToLand()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"dischargeNode"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:getCanDischargeToLand(dischargeNode)\n    if dischargeNode = = nil then\n        return false\n    end\n\n    if dischargeNode.canDischargeToGroundAnywhere then\n        return true\n    end\n\n    local info = dischargeNode.info\n    local sx,_,sz = localToWorld(info.node, - info.width, 0 , info.zOffset)\n    local ex,_,ez = localToWorld(info.node, info.width, 0 , info.zOffset)\n    local activeFarmId = self:getActiveFarm()\n\n    if dischargeNode.canDischargeToMissionGround then\n        local mission = g_missionManager:getMissionAtWorldPosition(sx, sz)\n        if mission = = nil then\n            mission = g_missionManager:getMissionAtWorldPosition(ex, ez)\n        end\n\n        if mission ~ = nil and mission.farmId ~ = nil and mission.farmId = = activeFarmId then\n            return true\n        end\n    end\n\n    -- is start owned\n    if not g_currentMission.accessHandler:canFarmAccessLand(activeFarmId, sx, sz) then\n        return false\n    end\n\n    -- is end owned\n    if not g_currentMission.accessHandler:canFarmAccessLand(activeFarmId, ex, ez) then\n        return false\n    end\n\n    return true\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getcandischargetoobject",children:"getCanDischargeToObject"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getCanDischargeToObject()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"dischargeNode"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:getCanDischargeToObject(dischargeNode)\n    if not self.spec_dischargeable.isDischargeAllowed then\n        return false\n    end\n\n    if dischargeNode = = nil then\n        return false\n    end\n\n    local object = dischargeNode.dischargeObject\n    if object = = nil then\n        return false\n    end\n\n    local fillType = self:getDischargeFillType(dischargeNode)\n\n    if not object:getFillUnitSupportsFillType(dischargeNode.dischargeFillUnitIndex, fillType) then\n        return false\n    end\n\n    local allowFillType = object:getFillUnitAllowsFillType(dischargeNode.dischargeFillUnitIndex, fillType)\n    if not allowFillType then\n        return false\n    end\n\n    if object.getFillUnitFreeCapacity ~ = nil and object:getFillUnitFreeCapacity(dischargeNode.dischargeFillUnitIndex, fillType, self:getActiveFarm()) < = 0 then\n        return false\n    end\n\n    if object.getIsFillAllowedFromFarm ~ = nil and not object:getIsFillAllowedFromFarm( self:getActiveFarm()) then\n        return false\n    end\n\n    -- Adding should only be done if removing is allowed(generally adding is always allowed because it is beneficial to the receiver)\n        -- A case where this is not allowed is when this is a pallet where the the controller does not own it(or can access it)\n        if self.getDynamicMountObject ~ = nil then\n            local mounter = self:getDynamicMountObject()\n            if mounter ~ = nil then\n                -- if the active farm of the mounter has NO access to farmId fill unit:disallow\n                    if not g_currentMission.accessHandler:canFarmAccess(mounter:getActiveFarm(), self , true ) then\n                        return false\n                    end\n                end\n            end\n\n            return true\n        end\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getcantoggledischargetoground",children:"getCanToggleDischargeToGround"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getCanToggleDischargeToGround()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:getCanToggleDischargeToGround()\n    local spec = self.spec_dischargeable\n    local dischargeNode = spec.currentDischargeNode\n\n    return dischargeNode ~ = nil and dischargeNode.canDischargeToGround and not dischargeNode.canStartGroundDischargeAutomatically\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getcantoggledischargetoobject",children:"getCanToggleDischargeToObject"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getCanToggleDischargeToObject()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:getCanToggleDischargeToObject()\n    local spec = self.spec_dischargeable\n    local dischargeNode = spec.currentDischargeNode\n\n    return dischargeNode ~ = nil and dischargeNode.canDischargeToObject\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getcurrentdischargenode",children:"getCurrentDischargeNode"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getCurrentDischargeNode()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:getCurrentDischargeNode()\n    local spec = self.spec_dischargeable\n    return spec.currentDischargeNode\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getcurrentdischargenodeindex",children:"getCurrentDischargeNodeIndex"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getCurrentDischargeNodeIndex()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:getCurrentDischargeNodeIndex()\n    local spec = self.spec_dischargeable\n    if spec.currentDischargeNode ~ = nil then\n        return spec.currentDischargeNode.index\n    end\n\n    return 0\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getcurrentdischargeobject",children:"getCurrentDischargeObject"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Object being discharged to"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getCurrentDischargeObject()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"dischargeNode"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:getCurrentDischargeObject(dischargeNode)\n    return dischargeNode.currentDischargeObject\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getdischargefilltype",children:"getDischargeFillType"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getDischargeFillType()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"dischargeNode"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:getDischargeFillType(dischargeNode)\n    local fillType = self:getFillUnitFillType(dischargeNode.fillUnitIndex)\n    local conversionFactor = 1\n\n    if dischargeNode.fillTypeConverter ~ = nil then\n        local conversion = dischargeNode.fillTypeConverter[fillType]\n        if conversion ~ = nil then\n            fillType = conversion.targetFillTypeIndex\n            conversionFactor = conversion.conversionFactor\n        end\n    end\n\n    return fillType, conversionFactor\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getdischargenodeautomaticdischarge",children:"getDischargeNodeAutomaticDischarge"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getDischargeNodeAutomaticDischarge()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"dischargeNode"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:getDischargeNodeAutomaticDischarge(dischargeNode)\n    return dischargeNode.canStartDischargeAutomatically\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getdischargenodebyindex",children:"getDischargeNodeByIndex"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getDischargeNodeByIndex()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"index"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:getDischargeNodeByIndex(index)\n    local spec = self.spec_dischargeable\n    return spec.dischargeNodes[index]\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getdischargenodebynode",children:"getDischargeNodeByNode"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getDischargeNodeByNode()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"node"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:getDischargeNodeByNode(node)\n    return self.spec_dischargeable.dischargNodeMapping[node]\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getdischargenodeemptyfactor",children:"getDischargeNodeEmptyFactor"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getDischargeNodeEmptyFactor()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"dischargeNode"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:getDischargeNodeEmptyFactor(dischargeNode)\n    return 1.0\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getdischargenotallowedwarning",children:"getDischargeNotAllowedWarning"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getDischargeNotAllowedWarning()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"dischargeNode"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function Dischargeable:getDischargeNotAllowedWarning(dischargeNode)\n    local text = g_i18n:getText( Dischargeable.DISCHARGE_WARNINGS[dischargeNode.dischargeFailedReason or Dischargeable.DISCHARGE_REASON_NOT_ALLOWED_HERE] or "warning_actionNotAllowedHere" )\n    if dischargeNode.customNotAllowedWarning ~ = nil then\n        text = dischargeNode.customNotAllowedWarning\n    end\n\n    local fillType = self:getDischargeFillType(dischargeNode)\n    local fillTypeDesc = g_fillTypeManager:getFillTypeByIndex(fillType)\n    return string.format(text, fillTypeDesc.title)\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"getdischargestate",children:"getDischargeState"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getDischargeState()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:getDischargeState()\n    return self.spec_dischargeable.currentDischargeState\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getdischargetargetobject",children:"getDischargeTargetObject"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Object found for possible discharging"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getDischargeTargetObject()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"dischargeNode"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:getDischargeTargetObject(dischargeNode)\n    return dischargeNode.dischargeObject, dischargeNode.dischargeFillUnitIndex\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getdoconsumeptopower",children:"getDoConsumePtoPower"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getDoConsumePtoPower()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:getDoConsumePtoPower(superFunc)\n    return( self.spec_dischargeable.consumePower and self:getDischargeState() ~ = Dischargeable.DISCHARGE_STATE_OFF) or superFunc( self )\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getisdischargenodeactive",children:"getIsDischargeNodeActive"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getIsDischargeNodeActive()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"dischargeNode"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:getIsDischargeNodeActive(dischargeNode)\n    return self.spec_dischargeable.isDischargeAllowed\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getispowertakeoffactive",children:"getIsPowerTakeOffActive"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getIsPowerTakeOffActive()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:getIsPowerTakeOffActive(superFunc)\n    return( self.spec_dischargeable.consumePower and self:getDischargeState() ~ = Dischargeable.DISCHARGE_STATE_OFF) or superFunc( self )\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"getrequirestipocclusionarea",children:"getRequiresTipOcclusionArea"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getRequiresTipOcclusionArea()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:getRequiresTipOcclusionArea()\n    local spec = self.spec_dischargeable\n    return spec.requiresTipOcclusionArea\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"handledischarge",children:"handleDischarge"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"handleDischarge()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"dischargeNode"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"dischargedLiters"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"minDropReached"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"hasMinDropFillLevel"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:handleDischarge(dischargeNode, dischargedLiters, minDropReached, hasMinDropFillLevel)\n    local spec = self.spec_dischargeable\n\n    if spec.currentDischargeState = = Dischargeable.DISCHARGE_STATE_GROUND then\n        local canDrop = not minDropReached and hasMinDropFillLevel\n\n        if dischargeNode.stopDischargeIfNotPossible then\n            if dischargedLiters = = 0 and not canDrop then\n                self:setDischargeState( Dischargeable.DISCHARGE_STATE_OFF)\n            end\n        end\n    else\n            if dischargeNode.stopDischargeIfNotPossible then\n                if dischargedLiters = = 0 then\n                    self:setDischargeState( Dischargeable.DISCHARGE_STATE_OFF)\n                end\n            end\n        end\n    end\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"handledischargenodechanged",children:"handleDischargeNodeChanged"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"handleDischargeNodeChanged()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:handleDischargeNodeChanged()\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"handledischargeonempty",children:"handleDischargeOnEmpty"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"handleDischargeOnEmpty()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"dischargeNode"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:handleDischargeOnEmpty(dischargeNode)\n    local spec = self.spec_dischargeable\n    if spec.currentDischargeNode.stopDischargeOnEmpty then\n        self:setDischargeState( Dischargeable.DISCHARGE_STATE_OFF, true )\n    end\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"handledischargeraycast",children:"handleDischargeRaycast"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"handleDischargeRaycast()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"dischargeNode"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"object"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"shape"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"distance"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"illUnitIndex"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"hitTerrain"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:handleDischargeRaycast(dischargeNode, object, shape, distance, illUnitIndex, hitTerrain)\n    local spec = self.spec_dischargeable\n    if self.isServer then\n        -- stop tipping if discharge to object is active but object is not hit anymore\n            if object = = nil and spec.currentDischargeState = = Dischargeable.DISCHARGE_STATE_OBJECT then\n                self:setDischargeState( Dischargeable.DISCHARGE_STATE_OFF)\n            end\n\n            if object = = nil and dischargeNode.canStartGroundDischargeAutomatically then\n                if self:getCanDischargeToGround(dischargeNode) and self:getCanDischargeToLand(dischargeNode) and self:getCanDischargeAtPosition(dischargeNode) then\n                    self:setDischargeState( Dischargeable.DISCHARGE_STATE_GROUND)\n                end\n            end\n        end\n\n        local currentDischargeNode = spec.currentDischargeNode\n        if currentDischargeNode.distanceObjectChanges ~ = nil then\n            ObjectChangeUtil.setObjectChanges(currentDischargeNode.distanceObjectChanges, distance > currentDischargeNode.distanceObjectChangeThreshold or spec.currentDischargeState ~ = Dischargeable.DISCHARGE_STATE_OFF, self , self.setMovingToolDirty)\n        end\n    end\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"handlefounddischargeobject",children:"handleFoundDischargeObject"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"handleFoundDischargeObject()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"dischargeNode"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:handleFoundDischargeObject(dischargeNode)\n    if self:getDischargeNodeAutomaticDischarge(dischargeNode) then\n        self:setDischargeState( Dischargeable.DISCHARGE_STATE_OBJECT)\n    end\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"initspecialization",children:"initSpecialization"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"initSpecialization()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function Dischargeable.initSpecialization()\n    g_vehicleConfigurationManager:addConfigurationType( "dischargeable" , g_i18n:getText( "configuration_dischargeable" ), "dischargeable" , VehicleConfigurationItem )\n\n    local schema = Vehicle.xmlSchema\n    schema:setXMLSpecializationType( "Dischargeable" )\n\n    Dischargeable.registerXMLPaths(schema, "vehicle.dischargeable" )\n    Dischargeable.registerXMLPaths(schema, "vehicle.dischargeable.dischargeableConfigurations.dischargeableConfiguration(?)" )\n\n    Dashboard.registerDashboardXMLPaths(schema, "vehicle.dischargeable.dashboards" , { "activeDischargeNode" , "dischargeState" } )\n    schema:register(XMLValueType.INT, "vehicle.dischargeable.dashboards.dashboard(?)#dischargeNodeIndex" , "Index of discharge node" )\n\n    schema:setXMLSpecializationType()\n\n    local schemaSavegame = Vehicle.xmlSchemaSavegame\n    schemaSavegame:register(XMLValueType.BOOL, "vehicles.vehicle(?).dischargeable#isAllowed" , "If is dicharge allowed" , nil )\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"loaddischargenode",children:"loadDischargeNode"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"loadDischargeNode()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"xmlFile"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"key"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"entry"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function Dischargeable:loadDischargeNode(xmlFile, key, entry)\n    entry.isActive = true\n\n    entry.node = xmlFile:getValue(key .. "#node" , nil , self.components, self.i3dMappings)\n    if entry.node = = nil then\n        Logging.xmlWarning( self.xmlFile, "Missing discharge \'node\' for dischargeNode \'%s\'" , key)\n            return false\n        end\n\n        entry.fillUnitIndex = xmlFile:getValue(key .. "#fillUnitIndex" )\n        if entry.fillUnitIndex = = nil then\n            Logging.xmlWarning( self.xmlFile, "Missing \'fillUnitIndex\' for dischargeNode \'%s\'" , key)\n                return false\n            end\n\n            entry.unloadInfoIndex = xmlFile:getValue(key .. "#unloadInfoIndex" , 1 )\n            entry.stopDischargeOnEmpty = xmlFile:getValue(key .. "#stopDischargeOnEmpty" , true )\n            entry.canDischargeToGround = xmlFile:getValue(key .. "#canDischargeToGround" , true )\n            entry.canDischargeToObject = xmlFile:getValue(key .. "#canDischargeToObject" , true )\n            entry.canDischargeToVehicle = xmlFile:getValue(key .. "#canDischargeToVehicle" , entry.canDischargeToObject)\n            entry.canStartDischargeAutomatically = xmlFile:getValue(key .. "#canStartDischargeAutomatically" , Platform.gameplay.automaticDischarge)\n            entry.canStartGroundDischargeAutomatically = xmlFile:getValue(key .. "#canStartGroundDischargeAutomatically" , false )\n            entry.stopDischargeIfNotPossible = xmlFile:getValue(key .. "#stopDischargeIfNotPossible" , xmlFile:hasProperty(key .. ".trigger#node" ))\n            entry.canDischargeToGroundAnywhere = xmlFile:getValue(key .. "#canDischargeToGroundAnywhere" , false )\n            entry.canDischargeToMissionGround = xmlFile:getValue(key .. "#canDischargeToMissionGround" , false )\n            entry.canFillOwnVehicle = xmlFile:getValue(key .. "#canFillOwnVehicle" , false )\n            entry.limitGroundTipToFillLevel = xmlFile:getValue(key .. "#limitGroundTipToFillLevel" , false )\n            entry.emptySpeed = xmlFile:getValue(key .. "#emptySpeed" , self:getFillUnitCapacity(entry.fillUnitIndex)) / 1000 * Platform.gameplay.dischargeSpeedFactor\n            entry.effectTurnOffThreshold = xmlFile:getValue(key .. "#effectTurnOffThreshold" , 0.25 )\n\n            entry.lineOffset = 0\n            entry.litersToDrop = 0\n\n            local toolTypeStr = xmlFile:getValue(key .. "#toolType" , "dischargeable" )\n            entry.toolType = g_toolTypeManager:getToolTypeIndexByName(toolTypeStr)\n\n            entry.info = { }\n            entry.info.node = xmlFile:getValue(key .. ".info#node" , entry.node, self.components, self.i3dMappings)\n            if entry.info.node = = entry.node then\n                entry.info.node = createTransformGroup( "dischargeInfoNode" )\n                link(entry.node, entry.info.node)\n            end\n            entry.info.width = xmlFile:getValue(key .. ".info#width" , 1.0 ) / 2\n            entry.info.length = xmlFile:getValue(key .. ".info#length" , 1.0 ) / 2\n            entry.info.zOffset = xmlFile:getValue(key .. ".info#zOffset" , 0.0 )\n            entry.info.yOffset = xmlFile:getValue(key .. ".info#yOffset" , 2.0 )\n            entry.info.limitToGround = xmlFile:getValue(key .. ".info#limitToGround" , true )\n            entry.info.useRaycastHitPosition = xmlFile:getValue(key .. ".info#useRaycastHitPosition" , false )\n\n            entry.trigger = { }\n            entry.trigger.node = xmlFile:getValue(key .. ".trigger#node" , nil , self.components, self.i3dMappings)\n            if entry.trigger.node ~ = nil then\n                addTrigger(entry.trigger.node, "dischargeTriggerCallback" , self )\n                setTriggerReportStatics(entry.trigger.node, true ) -- enable for static exactFillNodes e.g.in placeables\n                end\n                entry.trigger.objects = { }\n                entry.trigger.numObjects = 0\n\n                entry.raycast = { }\n                entry.raycast.node = xmlFile:getValue(key .. ".raycast#node" , nil , self.components, self.i3dMappings)\n                if entry.raycast.node = = nil and entry.trigger.node = = nil then\n                    entry.raycast.node = entry.node\n                end\n                entry.raycast.useWorldNegYDirection = xmlFile:getValue(key .. ".raycast#useWorldNegYDirection" , false )\n                entry.raycast.yOffset = xmlFile:getValue(key .. ".raycast#yOffset" , 0 )\n\n                local raycastMaxDistance = xmlFile:getValue(key .. ".raycast#maxDistance" )\n                entry.maxDistance = xmlFile:getValue(key .. "#maxDistance" , raycastMaxDistance) or 10\n\n                entry.dischargeObject = nil\n                entry.dischargeHitObject = nil\n                entry.dischargeHitObjectUnitIndex = nil\n                entry.dischargeHitTerrain = false\n                entry.dischargeShape = nil\n                entry.dischargeDistance = 0\n                entry.dischargeDistanceSent = 0\n                entry.dischargeFillUnitIndex = nil\n                entry.dischargeHit = false\n\n                entry.activationTrigger = { }\n                entry.activationTrigger.node = xmlFile:getValue(key .. ".activationTrigger#node" , nil , self.components, self.i3dMappings)\n                if entry.activationTrigger.node ~ = nil then\n                    addTrigger(entry.activationTrigger.node, "dischargeActivationTriggerCallback" , self )\n                end\n                entry.activationTrigger.objects = { }\n                entry.activationTrigger.numObjects = 0\n\n                local fillTypeConverterName = xmlFile:getValue(key .. ".fillType#converterName" )\n                if fillTypeConverterName ~ = nil then\n                    entry.fillTypeConverter = g_fillTypeManager:getConverterDataByName(fillTypeConverterName)\n                end\n\n                entry.distanceObjectChanges = { }\n                ObjectChangeUtil.loadObjectChangeFromXML(xmlFile, key .. ".distanceObjectChanges" , entry.distanceObjectChanges, self.components, self )\n                if #entry.distanceObjectChanges = = 0 then\n                    entry.distanceObjectChanges = nil\n                else\n                        entry.distanceObjectChangeThreshold = xmlFile:getValue(key .. ".distanceObjectChanges#threshold" , 0.5 )\n                        ObjectChangeUtil.setObjectChanges(entry.distanceObjectChanges, false , self , self.setMovingToolDirty)\n                    end\n\n                    entry.stateObjectChanges = { }\n                    ObjectChangeUtil.loadObjectChangeFromXML(xmlFile, key .. ".stateObjectChanges" , entry.stateObjectChanges, self.components, self )\n                    if #entry.stateObjectChanges = = 0 then\n                        entry.stateObjectChanges = nil\n                    else\n                            ObjectChangeUtil.setObjectChanges(entry.stateObjectChanges, false , self , self.setMovingToolDirty)\n                        end\n\n                        entry.nodeActiveObjectChanges = { }\n                        ObjectChangeUtil.loadObjectChangeFromXML(xmlFile, key .. ".nodeActiveObjectChanges" , entry.nodeActiveObjectChanges, self.components, self )\n                        if #entry.nodeActiveObjectChanges = = 0 then\n                            entry.nodeActiveObjectChanges = nil\n                        else\n                                ObjectChangeUtil.setObjectChanges(entry.nodeActiveObjectChanges, false , self , self.setMovingToolDirty)\n                            end\n\n                            entry.effects = g_effectManager:loadEffect(xmlFile, key .. ".effects" , self.components, self , self.i3dMappings, math.huge)\n\n                            entry.animationName = xmlFile:getValue(key .. ".animation#name" )\n                            entry.animationSpeed = xmlFile:getValue(key .. ".animation#speed" , 1 )\n                            entry.animationResetSpeed = xmlFile:getValue(key .. ".animation#resetSpeed" , 1 )\n\n                            if self.isClient then\n                                entry.playSound = xmlFile:getValue(key .. "#playSound" , true )\n                                entry.soundNode = xmlFile:getValue(key .. "#soundNode" , nil , self.components, self.i3dMappings)\n\n                                -- additional discharge sound if the flag overwriteSharedSound is not set\n                                    if entry.playSound then\n                                        entry.dischargeSample = g_soundManager:loadSampleFromXML( self.xmlFile, key, "dischargeSound" , self.baseDirectory, self.components, 0 , AudioGroup.VEHICLE, self.i3dMappings, self )\n                                    end\n\n                                    if xmlFile:getValue(key .. ".dischargeSound#overwriteSharedSound" , false ) then\n                                        entry.playSound = false\n                                    end\n\n                                    entry.dischargeStateSamples = g_soundManager:loadSamplesFromXML( self.xmlFile, key, "dischargeStateSound" , self.baseDirectory, self.components, 0 , AudioGroup.VEHICLE, self.i3dMappings, self )\n\n                                    entry.animationNodes = g_animationManager:loadAnimations( self.xmlFile, key .. ".animationNodes" , self.components, self , self.i3dMappings)\n                                    entry.effectAnimationNodes = g_animationManager:loadAnimations( self.xmlFile, key .. ".effectAnimationNodes" , self.components, self , self.i3dMappings)\n                                end\n\n                                entry.sentHitDistance = 0\n                                entry.isEffectActive = false\n                                entry.isEffectActiveSent = false\n\n                                entry.lastEffect = entry.effects[#entry.effects]\n\n                                return true\n                            end\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"ondeactivate",children:"onDeactivate"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onDeactivate()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:onDeactivate()\n    local spec = self.spec_dischargeable\n    if spec.stopDischargeOnDeactivate then\n        if spec.currentDischargeState ~ = Dischargeable.DISCHARGE_STATE_OFF then\n            self:setDischargeState( Dischargeable.DISCHARGE_STATE_OFF, true )\n        end\n    end\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ondelete",children:"onDelete"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onDelete()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function Dischargeable:onDelete()\n    local spec = self.spec_dischargeable\n    if spec.dischargeNodes ~ = nil then\n        for _, dischargeNode in ipairs(spec.dischargeNodes) do\n            g_effectManager:deleteEffects(dischargeNode.effects)\n            g_soundManager:deleteSample(dischargeNode.sample)\n            g_soundManager:deleteSample(dischargeNode.dischargeSample)\n            g_soundManager:deleteSamples(dischargeNode.dischargeStateSamples)\n            g_animationManager:deleteAnimations(dischargeNode.animationNodes)\n            g_animationManager:deleteAnimations(dischargeNode.effectAnimationNodes)\n\n            if dischargeNode.trigger.node ~ = nil then\n                local trigger = dischargeNode.trigger\n                removeTrigger(trigger.node)\n\n                for object, _ in pairs(trigger.objects) do\n                    if object.removeDeleteListener ~ = nil then\n                        object:removeDeleteListener( self , "onDeleteDischargeTriggerObject" )\n                    end\n                end\n                table.clear(trigger.objects)\n                trigger.numObjects = 0\n            end\n\n            if dischargeNode.activationTrigger.node ~ = nil then\n                local trigger = dischargeNode.activationTrigger\n                removeTrigger(trigger.node)\n\n                for object, _ in pairs(trigger.objects) do\n                    if object.removeDeleteListener ~ = nil then\n                        object:removeDeleteListener( self , "onDeleteActivationTriggerObject" )\n                    end\n                end\n                table.clear(trigger.objects)\n                trigger.numObjects = 0\n            end\n        end\n    end\n\n    spec.dischargeNodes = nil\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"ondeleteactivationtriggerobject",children:"onDeleteActivationTriggerObject"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onDeleteActivationTriggerObject()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"object"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:onDeleteActivationTriggerObject(object)\n    local spec = self.spec_dischargeable\n    for _, dischargeNode in pairs(spec.activationTriggerToDischargeNode) do\n        local trigger = dischargeNode.activationTrigger\n\n        if trigger.objects[object] ~ = nil then\n            trigger.objects[object] = nil\n            trigger.numObjects = trigger.numObjects - 1\n        end\n    end\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ondeletedischargetriggerobject",children:"onDeleteDischargeTriggerObject"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onDeleteDischargeTriggerObject()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"object"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:onDeleteDischargeTriggerObject(object)\n    local spec = self.spec_dischargeable\n    for _, dischargeNode in pairs(spec.triggerToDischargeNode) do\n        local trigger = dischargeNode.trigger\n\n        if object = = dischargeNode.dischargeObject then\n            dischargeNode.dischargeObject = nil\n            dischargeNode.dischargeHitTerrain = false\n            dischargeNode.dischargeShape = nil\n            dischargeNode.dischargeDistance = 0\n            dischargeNode.dischargeFillUnitIndex = nil\n        end\n\n        if trigger.objects[object] ~ = nil then\n            trigger.objects[object] = nil\n            trigger.numObjects = trigger.numObjects - 1\n        end\n    end\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"onfillunitfilllevelchanged",children:"onFillUnitFillLevelChanged"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onFillUnitFillLevelChanged()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"fillUnitIndex"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"fillLevelDelta"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"fillType"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"toolType"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"fillPositionData"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"appliedDelta"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:onFillUnitFillLevelChanged(fillUnitIndex, fillLevelDelta, fillType, toolType, fillPositionData, appliedDelta)\n    local spec = self.spec_dischargeable\n\n    local dischargeNode = spec.fillUnitDischargeNodeMapping[fillUnitIndex]\n    if dischargeNode ~ = nil then\n        local fillLevel = self:getFillUnitFillLevel(fillUnitIndex)\n        if fillLevel = = 0 then\n            self:handleDischargeOnEmpty(dischargeNode)\n        end\n    end\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onLoad()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function Dischargeable:onLoad(savegame)\n    local spec = self.spec_dischargeable\n\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.pipeEffect" , "vehicle.dischargeable.dischargeNode.effects" ) --FS17 to FS19\n\n    local coverConfigurationId = Utils.getNoNil( self.configurations[ "dischargeable" ], 1 )\n    local configKey = string.format( "vehicle.dischargeable.dischargeableConfigurations.dischargeableConfiguration(%d)" , coverConfigurationId - 1 )\n\n    if not self.xmlFile:hasProperty(configKey) then\n        configKey = "vehicle.dischargeable"\n    end\n\n    spec.isDischargeAllowed = true\n    spec.dischargeNodes = { }\n    spec.fillUnitDischargeNodeMapping = { }\n    spec.dischargNodeMapping = { }\n    spec.triggerToDischargeNode = { }\n    spec.activationTriggerToDischargeNode = { }\n\n    spec.requiresTipOcclusionArea = self.xmlFile:getValue(configKey .. "#requiresTipOcclusionArea" , true )\n    spec.consumePower = self.xmlFile:getValue(configKey .. "#consumePower" , true )\n    spec.stopDischargeOnDeactivate = self.xmlFile:getValue(configKey .. "#stopDischargeOnDeactivate" , true )\n\n    spec.dischargedLiters = 0\n\n    self.xmlFile:iterate(configKey .. ".dischargeNode" , function (i, key)\n        local entry = { }\n        if self:loadDischargeNode( self.xmlFile, key, entry) then\n            local canBeAdded = true\n\n            if spec.dischargNodeMapping[entry.node] ~ = nil then\n                Logging.xmlWarning( self.xmlFile, "DischargeNode \'%d | %s\' already defined.Discharge nodes need to be unique.Ignoring it!" , entry.node, getName(entry.node))\n                canBeAdded = false\n            end\n            if entry.trigger.node ~ = nil and spec.triggerToDischargeNode[entry.trigger.node] ~ = nil then\n                Logging.xmlWarning( self.xmlFile, "DischargeNode trigger \'%d | %s\' already defined.DischargeNode triggers need to be unique.Ignoring it!" , entry.trigger.node, getName(entry.trigger.node))\n                canBeAdded = false\n            end\n            if entry.activationTrigger.node ~ = nil and spec.activationTriggerToDischargeNode[entry.activationTrigger.node] ~ = nil then\n                Logging.xmlWarning( self.xmlFile, "DischargeNode activationTrigger \'%d | %s\' already defined.DischargeNode activationTriggers need to be unique.Ignoring it!" , entry.activationTrigger.node, getName(entry.activationTrigger.node))\n                canBeAdded = false\n            end\n            if self.getFillUnitExists ~ = nil and not self:getFillUnitExists(entry.fillUnitIndex) then\n                Logging.xmlWarning( self.xmlFile, "FillUnit with index \'%d\' does not exist for discharge node \'%s\'.Ignoring discharge node!" , entry.fillUnitIndex, key)\n                    canBeAdded = false\n                end\n\n                if canBeAdded then\n                    table.insert(spec.dischargeNodes, entry)\n                    entry.index = #spec.dischargeNodes\n                    spec.fillUnitDischargeNodeMapping[entry.fillUnitIndex] = entry\n                    spec.dischargNodeMapping[entry.node] = entry\n\n                    if entry.trigger.node ~ = nil then\n                        spec.triggerToDischargeNode[entry.trigger.node] = entry\n                    end\n                    if entry.activationTrigger.node ~ = nil then\n                        spec.activationTriggerToDischargeNode[entry.activationTrigger.node] = entry\n                    end\n                end\n            end\n        end )\n\n        spec.requiresTipOcclusionArea = spec.requiresTipOcclusionArea and #spec.dischargeNodes > 0\n\n        spec.currentDischargeState = Dischargeable.DISCHARGE_STATE_OFF\n        spec.currentRaycast = nil\n        spec.forcedFillTypeIndex = nil\n        spec.raycastCollisionMask = CollisionFlag.FILLABLE + CollisionFlag.VEHICLE + CollisionFlag.TERRAIN\n        spec.isAsyncRaycastActive = false\n        spec.currentRaycast = { }\n        self:setCurrentDischargeNodeIndex( 1 )\n\n        spec.dirtyFlag = self:getNextDirtyFlag()\n\n        if #spec.dischargeNodes = = 0 then\n            SpecializationUtil.removeEventListener( self , "onPostLoad" , Dischargeable )\n            SpecializationUtil.removeEventListener( self , "onReadStream" , Dischargeable )\n            SpecializationUtil.removeEventListener( self , "onWriteStream" , Dischargeable )\n            SpecializationUtil.removeEventListener( self , "onReadUpdateStream" , Dischargeable )\n            SpecializationUtil.removeEventListener( self , "onWriteUpdateStream" , Dischargeable )\n            SpecializationUtil.removeEventListener( self , "onUpdate" , Dischargeable )\n            SpecializationUtil.removeEventListener( self , "onUpdateTick" , Dischargeable )\n            SpecializationUtil.removeEventListener( self , "onRegisterActionEvents" , Dischargeable )\n            SpecializationUtil.removeEventListener( self , "onFillUnitFillLevelChanged" , Dischargeable )\n            SpecializationUtil.removeEventListener( self , "onDeactivate" , Dischargeable )\n        end\n    end\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"onpostload",children:"onPostLoad"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onPostLoad()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function Dischargeable:onPostLoad(savegame)\n    local spec = self.spec_dischargeable\n    if savegame ~ = nil and not savegame.resetVehicles then\n        spec.isDischargeAllowed = savegame.xmlFile:getValue(savegame.key .. ".dischargeable#isAllowed" , spec.isDischargeAllowed)\n    end\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"onreadstream",children:"onReadStream"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onReadStream()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"streamId"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:onReadStream(streamId, connection)\n    if connection:getIsServer() then\n        local spec = self.spec_dischargeable\n\n        for _, dischargeNode in ipairs(spec.dischargeNodes) do\n            if streamReadBool(streamId) then\n                local distance = streamReadUIntN(streamId, 8 ) * dischargeNode.maxDistance / 255\n                dischargeNode.dischargeDistance = distance\n                local fillTypeIndex = streamReadUIntN(streamId, FillTypeManager.SEND_NUM_BITS)\n                self:setDischargeEffectActive(dischargeNode, true , true , fillTypeIndex)\n                self:setDischargeEffectDistance(dischargeNode, distance)\n            else\n                    self:setDischargeEffectActive(dischargeNode, false , true )\n                end\n            end\n\n            self:setDischargeState(streamReadUIntN(streamId, Dischargeable.SEND_NUM_BITS_DISCHARGE_STATE), true )\n        end\n    end\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"onreadupdatestream",children:"onReadUpdateStream"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onReadUpdateStream()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"streamId"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"timestamp"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"connection"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:onReadUpdateStream(streamId, timestamp, connection)\n    if connection:getIsServer() then\n        local spec = self.spec_dischargeable\n\n        if streamReadBool(streamId) then\n            for _, dischargeNode in ipairs(spec.dischargeNodes) do\n                if streamReadBool(streamId) then\n                    local distance = streamReadUIntN(streamId, 8 ) * dischargeNode.maxDistance / 255\n                    dischargeNode.dischargeDistance = distance\n                    local fillTypeIndex = streamReadUIntN(streamId, FillTypeManager.SEND_NUM_BITS)\n                    self:setDischargeEffectActive(dischargeNode, true , true , fillTypeIndex)\n                    self:setDischargeEffectDistance(dischargeNode, distance)\n                else\n                        self:setDischargeEffectActive(dischargeNode, false , true )\n                    end\n                end\n            end\n        end\n    end\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"onregisteractionevents",children:"onRegisterActionEvents"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onRegisterActionEvents()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"isActiveForInput"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"isActiveForInputIgnoreSelection"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:onRegisterActionEvents(isActiveForInput, isActiveForInputIgnoreSelection)\n    if self.isClient then\n        local spec = self.spec_dischargeable\n        self:clearActionEventsTable(spec.actionEvents)\n\n        if isActiveForInputIgnoreSelection then\n            if self:getCanToggleDischargeToGround() then\n                local _, actionEventId = self:addPoweredActionEvent(spec.actionEvents, InputAction.TOGGLE_TIPSTATE_GROUND, self , Dischargeable.actionEventToggleDischargeToGround, false , true , false , true , nil )\n                g_inputBinding:setActionEventTextPriority(actionEventId, GS_PRIO_NORMAL)\n            end\n            if self:getCanToggleDischargeToObject() then\n                local _, actionEventId = self:addPoweredActionEvent(spec.actionEvents, InputAction.TOGGLE_TIPSTATE, self , Dischargeable.actionEventToggleDischarging, false , true , false , true , nil )\n                g_inputBinding:setActionEventTextPriority(actionEventId, GS_PRIO_VERY_HIGH)\n            end\n\n            Dischargeable.updateActionEvents( self )\n        end\n    end\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"onregisterdashboardvaluetypes",children:"onRegisterDashboardValueTypes"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Called on post load to register dashboard value types"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onRegisterDashboardValueTypes()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function Dischargeable:onRegisterDashboardValueTypes()\n    local spec = self.spec_dischargeable\n\n    local activeDischargeNode = DashboardValueType.new( "dischargeable" , "activeDischargeNode" )\n    activeDischargeNode:setValue( self , function (_, dashboard)\n        return dashboard.dischargeNodeIndex ~ = nil and self:getCurrentDischargeNodeIndex() = = dashboard.dischargeNodeIndex\n    end )\n    activeDischargeNode:setAdditionalFunctions( Dischargeable.dashboardDischargeAttributes)\n    activeDischargeNode:setPollUpdate( false )\n    self:registerDashboardValueType(activeDischargeNode)\n\n    local dischargeState = DashboardValueType.new( "dischargeable" , "dischargeState" )\n    dischargeState:setValue(spec, "currentDischargeState" )\n    dischargeState:setValueCompare( Dischargeable.DISCHARGE_STATE_OBJECT, Dischargeable.DISCHARGE_STATE_GROUND)\n    dischargeState:setPollUpdate( false )\n    self:registerDashboardValueType(dischargeState)\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"onstatechange",children:"onStateChange"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onStateChange()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"state"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"data"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:onStateChange(state, data)\n    if state = = VehicleStateChange.MOTOR_TURN_OFF then\n        if not self:getIsPowered() then\n            local spec = self.spec_dischargeable\n            if spec.stopDischargeOnDeactivate then\n                if spec.currentDischargeState ~ = Dischargeable.DISCHARGE_STATE_OFF then\n                    self:setDischargeState( Dischargeable.DISCHARGE_STATE_OFF, true )\n                end\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"onupdate",children:"onUpdate"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onUpdate()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"dt"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"isActiveForInput"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"isActiveForInputIgnoreSelection"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"isSelected"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:onUpdate(dt, isActiveForInput, isActiveForInputIgnoreSelection, isSelected)\n    local spec = self.spec_dischargeable\n\n    local dischargeNode = spec.currentDischargeNode\n    if dischargeNode ~ = nil then\n        if dischargeNode.activationTrigger.numObjects > 0 or spec.currentDischargeState ~ = Dischargeable.DISCHARGE_STATE_OFF then\n            self:raiseActive()\n        end\n    end\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"onupdatetick",children:"onUpdateTick"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onUpdateTick()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"dt"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"isActiveForInput"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"isActiveForInputIgnoreSelection"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"isSelected"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function Dischargeable:onUpdateTick(dt, isActiveForInput, isActiveForInputIgnoreSelection, isSelected)\n    local spec = self.spec_dischargeable\n\n    local dischargeNode = spec.currentDischargeNode\n    if dischargeNode ~ = nil then\n        if isActiveForInputIgnoreSelection then\n            --#profile RemoteProfiler.zoneBeginN("Dischargeable:updateActionEvents")\n            Dischargeable.updateActionEvents( self )\n            --#profile RemoteProfiler.zoneEnd()\n        end\n\n        if self:getIsDischargeNodeActive(dischargeNode) then\n            local trigger = dischargeNode.trigger\n            if trigger.numObjects > 0 then\n                local lastDischargeObject = dischargeNode.dischargeObject\n\n                dischargeNode.dischargeObject = nil\n                dischargeNode.dischargeHitObject = nil\n                dischargeNode.dischargeHitObjectUnitIndex = nil\n                dischargeNode.dischargeHitTerrain = false\n                dischargeNode.dischargeShape = nil\n                dischargeNode.dischargeDistance = 0\n                dischargeNode.dischargeFillUnitIndex = nil\n                dischargeNode.dischargeHit = false -- any(also unsupported) object hit\n\n                local nearestDistance = math.huge\n                for object, data in pairs(trigger.objects) do\n                    local fillType = spec.forcedFillTypeIndex\n                    if fillType = = nil then\n                        fillType = self:getDischargeFillType(dischargeNode)\n                    end\n\n                    local dischargeFailedReason = nil\n                    local dischargeFailedReasonShowAuto = false\n                    local customNotAllowedWarning = nil\n\n                    if object:getFillUnitSupportsFillType(data.fillUnitIndex, fillType) then\n                        local allowFillType = object:getFillUnitAllowsFillType(data.fillUnitIndex, fillType)\n                        local allowToolType = object:getFillUnitSupportsToolType(data.fillUnitIndex, ToolType.TRIGGER)\n                        local freeSpace = object:getFillUnitFreeCapacity(data.fillUnitIndex, fillType, self:getActiveFarm()) > 0\n                        local accessible = object:getIsFillAllowedFromFarm( self:getActiveFarm())\n\n                        if allowFillType and allowToolType and freeSpace then\n                            local exactFillRootNode = object:getFillUnitExactFillRootNode(data.fillUnitIndex)\n                            if exactFillRootNode ~ = nil and entityExists(exactFillRootNode) then\n                                local distance = calcDistanceFrom(dischargeNode.node, exactFillRootNode)\n                                if distance < nearestDistance then\n                                    dischargeNode.dischargeObject = object\n                                    dischargeNode.dischargeHitTerrain = false\n                                    dischargeNode.dischargeShape = data.shape\n                                    dischargeNode.dischargeDistance = distance\n                                    dischargeNode.dischargeFillUnitIndex = data.fillUnitIndex\n                                    nearestDistance = distance\n\n                                    if object ~ = lastDischargeObject then\n                                        SpecializationUtil.raiseEvent( self , "onDischargeTargetObjectChanged" , object)\n                                        self.rootVehicle:raiseActive()\n                                    end\n                                end\n                            end\n                        elseif not allowFillType then\n                                dischargeFailedReason = Dischargeable.DISCHARGE_REASON_FILLTYPE_NOT_SUPPORTED\n                            elseif not allowToolType then\n                                    dischargeFailedReason = Dischargeable.DISCHARGE_REASON_TOOLTYPE_NOT_SUPPORTED\n                                elseif not accessible then\n                                        dischargeFailedReason = Dischargeable.DISCHARGE_REASON_NO_ACCESS\n                                    elseif not freeSpace then\n                                            dischargeFailedReason = Dischargeable.DISCHARGE_REASON_NO_FREE_CAPACITY\n                                        end\n\n                                        dischargeNode.dischargeHitObject = object\n                                        dischargeNode.dischargeHitObjectUnitIndex = data.fillUnitIndex\n                                    else\n                                            if fillType ~ = FillType.UNKNOWN then\n                                                dischargeFailedReason = Dischargeable.DISCHARGE_REASON_FILLTYPE_NOT_SUPPORTED\n                                            end\n                                        end\n\n                                        if dischargeFailedReason = = Dischargeable.DISCHARGE_REASON_FILLTYPE_NOT_SUPPORTED\n                                            or dischargeFailedReason = = Dischargeable.DISCHARGE_REASON_NO_FREE_CAPACITY\n                                            or dischargeFailedReason = = Dischargeable.DISCHARGE_REASON_NO_ACCESS then\n                                            if object.isa = = nil or not object:isa( Vehicle ) then\n                                                dischargeFailedReasonShowAuto = true\n                                            end\n                                        end\n\n                                        if dischargeFailedReason ~ = nil then\n                                            -- only display custom warning if at least the fill type would be supported\n                                                if dischargeFailedReason ~ = Dischargeable.DISCHARGE_REASON_FILLTYPE_NOT_SUPPORTED then\n                                                    if object.getCustomDischargeNotAllowedWarning ~ = nil then\n                                                        customNotAllowedWarning = object:getCustomDischargeNotAllowedWarning()\n                                                    end\n                                                end\n                                            end\n\n                                            if dischargeNode.dischargeObject = = nil and dischargeFailedReason ~ = nil then\n                                                -- failed reasons are priorized by their value(e.g.if one trigger has a NO_FREE_CAPACITY it has a higher prio than NOT_SUPPORTED warning, so we show the least worst warning)\n                                                    if dischargeNode.dischargeFailedReason = = nil or dischargeFailedReason < dischargeNode.dischargeFailedReason then\n                                                        dischargeNode.dischargeFailedReason = dischargeFailedReason\n                                                        dischargeNode.dischargeFailedReasonShowAuto = dischargeFailedReasonShowAuto\n                                                        dischargeNode.customNotAllowedWarning = customNotAllowedWarning\n                                                    end\n                                                else\n                                                        -- if we found at least one object to discharge we ignore failed warnings for all other hit objects\n                                                            dischargeNode.dischargeFailedReason = nil\n                                                            dischargeNode.dischargeFailedReasonShowAuto = false\n                                                            dischargeNode.customNotAllowedWarning = nil\n                                                        end\n\n                                                        dischargeNode.dischargeHit = true -- any(also unsupported) object has been hit\n                                                    end\n\n                                                    if lastDischargeObject ~ = nil and dischargeNode.dischargeObject = = nil then\n                                                        SpecializationUtil.raiseEvent( self , "onDischargeTargetObjectChanged" , nil )\n                                                        self.rootVehicle:raiseActive()\n                                                    end\n                                                else\n                                                        if not spec.isAsyncRaycastActive then\n                                                            --#profile RemoteProfiler.zoneBeginN("Dischargeable:updateRaycast")\n                                                            self:updateRaycast(dischargeNode)\n                                                            --#profile RemoteProfiler.zoneEnd()\n                                                        end\n                                                    end\n                                                else\n                                                        if spec.currentDischargeState ~ = Dischargeable.DISCHARGE_STATE_OFF then\n                                                            self:setDischargeState( Dischargeable.DISCHARGE_STATE_OFF, true )\n                                                        end\n\n                                                        if dischargeNode.dischargeObject ~ = nil then\n                                                            SpecializationUtil.raiseEvent( self , "onDischargeTargetObjectChanged" , nil )\n                                                            self.rootVehicle:raiseActive()\n                                                        end\n\n                                                        dischargeNode.dischargeObject = nil\n                                                        dischargeNode.dischargeHitObject = nil\n                                                        dischargeNode.dischargeHitObjectUnitIndex = nil\n                                                        dischargeNode.dischargeHitTerrain = false\n                                                        dischargeNode.dischargeShape = nil\n                                                        dischargeNode.dischargeDistance = 0\n                                                        dischargeNode.dischargeFillUnitIndex = nil\n                                                        dischargeNode.dischargeHit = false -- any(also unsupported) object hit\n                                                    end\n\n                                                    --#profile RemoteProfiler.zoneBeginN("Dischargeable:updateDischargeSound")\n                                                    self:updateDischargeSound(dischargeNode, dt)\n                                                    --#profile RemoteProfiler.zoneEnd()\n\n                                                    --#profile RemoteProfiler.zoneBeginN("Dischargeable:handleDischarge")\n                                                    if self.isServer then\n                                                        if spec.currentDischargeState = = Dischargeable.DISCHARGE_STATE_OFF then\n                                                            if dischargeNode.dischargeObject ~ = nil then\n                                                                self:handleFoundDischargeObject(dischargeNode)\n                                                            end\n                                                        else\n                                                                local fillLevel = self:getFillUnitFillLevel(dischargeNode.fillUnitIndex)\n                                                                local emptySpeed = self:getDischargeNodeEmptyFactor(dischargeNode)\n\n                                                                -- Only allow discharge into a node, or if the land is owned\n                                                                    local canDischargeToObject = self:getCanDischargeToObject(dischargeNode) and spec.currentDischargeState = = Dischargeable.DISCHARGE_STATE_OBJECT\n                                                                    local canDischargeToGround = self:getCanDischargeToGround(dischargeNode) and spec.currentDischargeState = = Dischargeable.DISCHARGE_STATE_GROUND\n                                                                    local canDischarge = canDischargeToObject or canDischargeToGround\n                                                                    local allowedToDischarge = dischargeNode.dischargeObject ~ = nil or( self:getCanDischargeToLand(dischargeNode) and self:getCanDischargeAtPosition(dischargeNode))\n                                                                    local isReadyToStartDischarge = fillLevel > 0 and emptySpeed > 0 and allowedToDischarge and canDischarge\n\n                                                                    self:setDischargeEffectActive(dischargeNode, isReadyToStartDischarge)\n                                                                    self:setDischargeEffectDistance(dischargeNode, dischargeNode.dischargeDistance)\n\n                                                                    local isReadyForDischarge = dischargeNode.lastEffect = = nil or dischargeNode.lastEffect:getIsFullyVisible()\n                                                                    if isReadyForDischarge and allowedToDischarge and canDischarge then\n                                                                        local emptyLiters = math.min(fillLevel, dischargeNode.emptySpeed * emptySpeed * dt)\n                                                                        local dischargedLiters, minDropReached, hasMinDropFillLevel = self:discharge(dischargeNode, emptyLiters)\n\n                                                                        spec.dischargedLiters = dischargedLiters\n                                                                        self:handleDischarge(dischargeNode, dischargedLiters, minDropReached, hasMinDropFillLevel)\n                                                                    end\n                                                                end\n\n                                                                if math.abs(dischargeNode.dischargeDistanceSent - dischargeNode.dischargeDistance) > 0.05 then\n                                                                    self:raiseDirtyFlags(spec.dirtyFlag)\n                                                                    dischargeNode.dischargeDistanceSent = dischargeNode.dischargeDistance\n                                                                end\n                                                            end\n                                                            --#profile RemoteProfiler.zoneEnd()\n                                                        end\n\n                                                        --#profile RemoteProfiler.zoneBeginN("Dischargeable:showTipContext")\n                                                        if spec.currentDischargeState = = Dischargeable.DISCHARGE_STATE_OFF then\n                                                            local currentDischargeNode = spec.currentDischargeNode\n                                                            if isActiveForInput and self:getCanDischargeToObject(currentDischargeNode) and self:getCanToggleDischargeToObject() then\n                                                                g_currentMission:showTipContext( self:getFillUnitFillType(dischargeNode.fillUnitIndex))\n                                                            end\n                                                        end\n                                                        --#profile RemoteProfiler.zoneEnd()\n\n                                                        -- permanent warning if automatic discharge is enabled, otherwise only on action event\n                                                            if isActiveForInputIgnoreSelection then\n                                                                if dischargeNode ~ = nil and dischargeNode.canStartDischargeAutomatically then\n                                                                    if dischargeNode.dischargeHit then\n                                                                        if dischargeNode.dischargeFailedReasonShowAuto then\n                                                                            if dischargeNode.dischargeFailedReason ~ = nil and g_currentMission.time > 10000 then\n                                                                                local warning = self:getDischargeNotAllowedWarning(dischargeNode)\n                                                                                g_currentMission:showBlinkingWarning(warning, 5000 )\n                                                                            end\n                                                                        end\n                                                                    end\n                                                                end\n                                                            end\n\n                                                            -- Look for non-used discharge node that still have their stop animation running\n                                                                if self.isServer then\n                                                                    for _, inactiveDischargeNode in ipairs(spec.dischargeNodes) do\n                                                                        if inactiveDischargeNode.stopEffectTime ~ = nil then\n                                                                            if inactiveDischargeNode.stopEffectTime < g_ time then\n                                                                                self:setDischargeEffectActive(inactiveDischargeNode, false , true )\n                                                                                inactiveDischargeNode.stopEffectTime = nil\n                                                                            else\n                                                                                    self:raiseActive()\n                                                                                end\n                                                                            end\n                                                                        end\n                                                                    end\n\n                                                                    -- keep updating while discharge sounds are still playing(until the effect is done and the sound is stopped)\n                                                                        if self.isClient then\n                                                                            for _, dischargeNode in ipairs(spec.dischargeNodes) do\n                                                                                if g_soundManager:getIsSamplePlaying(dischargeNode.dischargeSample) then\n                                                                                    self:raiseActive()\n                                                                                end\n\n                                                                                if dischargeNode.sample ~ = nil then\n                                                                                    if g_soundManager:getIsSamplePlaying(dischargeNode.sample) then\n                                                                                        self:raiseActive()\n                                                                                    end\n                                                                                end\n                                                                            end\n                                                                        end\n                                                                    end\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"onwritestream",children:"onWriteStream"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onWriteStream()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"streamId"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:onWriteStream(streamId, connection)\n    if not connection:getIsServer() then\n        local spec = self.spec_dischargeable\n\n        for _, dischargeNode in ipairs(spec.dischargeNodes) do\n            if streamWriteBool(streamId, dischargeNode.isEffectActiveSent) then\n                streamWriteUIntN(streamId, math.clamp( math.floor(dischargeNode.dischargeDistanceSent / dischargeNode.maxDistance * 255 ), 1 , 255 ), 8 )\n                streamWriteUIntN(streamId, self:getDischargeFillType(dischargeNode), FillTypeManager.SEND_NUM_BITS)\n            end\n        end\n\n        streamWriteUIntN(streamId, spec.currentDischargeState, Dischargeable.SEND_NUM_BITS_DISCHARGE_STATE)\n    end\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"onwriteupdatestream",children:"onWriteUpdateStream"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onWriteUpdateStream()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"streamId"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"connection"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"dirtyMask"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:onWriteUpdateStream(streamId, connection, dirtyMask)\n    if not connection:getIsServer() then\n        local spec = self.spec_dischargeable\n\n        if streamWriteBool(streamId, bit32.band(dirtyMask, spec.dirtyFlag) ~ = 0 ) then\n            for _, dischargeNode in ipairs(spec.dischargeNodes) do\n                if streamWriteBool(streamId, dischargeNode.isEffectActiveSent) then\n                    streamWriteUIntN(streamId, math.clamp( math.floor(dischargeNode.dischargeDistanceSent / dischargeNode.maxDistance * 255 ), 1 , 255 ), 8 )\n                    streamWriteUIntN(streamId, self:getDischargeFillType(dischargeNode), FillTypeManager.SEND_NUM_BITS)\n                end\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"prerequisitesPresent()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable.prerequisitesPresent(specializations)\n    return SpecializationUtil.hasSpecialization( FillUnit , specializations) and SpecializationUtil.hasSpecialization( FillVolume , specializations)\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"raycastcallbackdischargenode",children:"raycastCallbackDischargeNode"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"raycastCallbackDischargeNode()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"hitActorId"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"x"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"y"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"z"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"distance"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"nx"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"ny"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"nz"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"subShapeIndex"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"hitShapeId"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"isLast"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function Dischargeable:raycastCallbackDischargeNode(hitActorId, x, y, z, distance, nx, ny, nz, subShapeIndex, hitShapeId, isLast)\n    if self.isDeleted or self.isDeleting then\n        return\n    end\n\n    local spec = self.spec_dischargeable\n    local dischargeNode = spec.currentRaycastDischargeNode\n\n    if hitActorId ~ = 0 then\n        local object = g_currentMission:getNodeObject(hitActorId)\n\n        distance = distance - dischargeNode.raycast.yOffset\n\n        if VehicleDebug.state = = VehicleDebug.DEBUG then\n            DebugGizmo.renderAtPositionSimple(x,y,z, string.format( "hitActorId %d | %s; hitShape %d | %s; object %s" , hitActorId, getName(hitActorId), hitShapeId, getName(hitShapeId), object))\n        end\n\n        local validObject = object ~ = nil and(object ~ = self or dischargeNode.canFillOwnVehicle)\n        -- if we hit a object because of the yOffset it has to be a exact fill root node, otherwise we ignore it\n            -- is used to get exactFillRootNodes if the dischargeNode of the shovel is already below it\n                if validObject and distance < 0 then\n                    if object.getFillUnitIndexFromNode ~ = nil then\n                        validObject = validObject and object:getFillUnitIndexFromNode(hitShapeId) ~ = nil\n                    end\n\n                    if not dischargeNode.canDischargeToVehicle then\n                        validObject = validObject and not object:isa( Vehicle )\n                    end\n                end\n\n                if validObject then\n                    if object.getFillUnitIndexFromNode ~ = nil then\n                        local fillUnitIndex = object:getFillUnitIndexFromNode(hitShapeId)\n                        if fillUnitIndex ~ = nil then\n                            local fillType = spec.forcedFillTypeIndex\n                            if fillType = = nil then\n                                fillType = self:getDischargeFillType(dischargeNode)\n                            end\n\n                            local dischargeFailedReason = nil\n                            local dischargeFailedReasonShowAuto = false\n                            local customNotAllowedWarning = nil\n\n                            if object:getFillUnitSupportsFillType(fillUnitIndex, fillType) then\n                                local allowFillType = object:getFillUnitAllowsFillType(fillUnitIndex, fillType)\n                                local allowToolType = object:getFillUnitSupportsToolType(fillUnitIndex, dischargeNode.toolType)\n                                local freeSpace = object:getFillUnitFreeCapacity(fillUnitIndex, fillType, self:getActiveFarm()) > 0\n                                local accessible = object:getIsFillAllowedFromFarm( self:getActiveFarm())\n\n                                if allowFillType and allowToolType and freeSpace then\n                                    dischargeNode.raycastDischargeObject = object\n                                    dischargeNode.raycastDischargeShape = hitShapeId\n                                    dischargeNode.raycastDischargeDistance = distance\n                                    dischargeNode.raycastDischargeFillUnitIndex = fillUnitIndex\n\n                                    if object.getFillUnitExtraDistanceFromNode ~ = nil then\n                                        dischargeNode.raycastDischargeExtraDistance = object:getFillUnitExtraDistanceFromNode(hitShapeId)\n                                    end\n                                elseif not allowFillType then\n                                        dischargeFailedReason = Dischargeable.DISCHARGE_REASON_FILLTYPE_NOT_SUPPORTED\n                                    elseif not allowToolType then\n                                            dischargeFailedReason = Dischargeable.DISCHARGE_REASON_TOOLTYPE_NOT_SUPPORTED\n                                        elseif not accessible then\n                                                dischargeFailedReason = Dischargeable.DISCHARGE_REASON_NO_ACCESS\n                                            elseif not freeSpace then\n                                                    dischargeFailedReason = Dischargeable.DISCHARGE_REASON_NO_FREE_CAPACITY\n                                                end\n                                            else\n                                                    if fillType ~ = FillType.UNKNOWN then\n                                                        dischargeFailedReason = Dischargeable.DISCHARGE_REASON_FILLTYPE_NOT_SUPPORTED\n                                                    end\n                                                end\n\n                                                if dischargeFailedReason = = Dischargeable.DISCHARGE_REASON_FILLTYPE_NOT_SUPPORTED\n                                                    or dischargeFailedReason = = Dischargeable.DISCHARGE_REASON_NO_FREE_CAPACITY\n                                                    or dischargeFailedReason = = Dischargeable.DISCHARGE_REASON_NO_ACCESS then\n                                                    if object.isa = = nil or not object:isa( Vehicle ) then\n                                                        dischargeFailedReasonShowAuto = true\n                                                    end\n                                                end\n\n                                                if dischargeFailedReason ~ = nil then\n                                                    -- only display custom warning if at least the fill type would be supported\n                                                        if dischargeFailedReason ~ = Dischargeable.DISCHARGE_REASON_FILLTYPE_NOT_SUPPORTED then\n                                                            if object.getCustomDischargeNotAllowedWarning ~ = nil then\n                                                                customNotAllowedWarning = object:getCustomDischargeNotAllowedWarning()\n                                                            end\n                                                        end\n                                                    end\n\n                                                    if dischargeNode.raycastDischargeObject = = nil and dischargeFailedReason ~ = nil then\n                                                        -- failed reasons are priorized by their value(e.g.if one trigger has a NO_FREE_CAPACITY it has a higher prio than NOT_SUPPORTED warning, so we show the least worst warning)\n                                                            if dischargeNode.raycastDischargeFailedReason = = nil or dischargeFailedReason < dischargeNode.raycastDischargeFailedReason then\n                                                                dischargeNode.raycastDischargeFailedReason = dischargeFailedReason\n                                                                dischargeNode.raycastDischargeFailedReasonShowAuto = dischargeFailedReasonShowAuto\n                                                                dischargeNode.customNotAllowedWarning = customNotAllowedWarning\n                                                            end\n                                                        else\n                                                                -- if we found at least one object to discharge we ignore failed warnings for all other hit objects\n                                                                    dischargeNode.raycastDischargeFailedReason = nil\n                                                                    dischargeNode.raycastDischargeFailedReasonShowAuto = false\n                                                                    dischargeNode.customNotAllowedWarning = nil\n                                                                end\n\n                                                                dischargeNode.raycastDischargeHit = true -- any, even unsupported, object has been hit.\n                                                                dischargeNode.raycastDischargeHitObject = object -- hit object, no matter if it\'s fillable or not\n                                                                    dischargeNode.raycastDischargeHitObjectUnitIndex = fillUnitIndex\n                                                                else\n                                                                        if dischargeNode.raycastDischargeHit then\n                                                                            -- raycast until we hit the object underneath the exact fill root node\n                                                                            dischargeNode.raycastDischargeDistance = distance + (dischargeNode.raycastDischargeExtraDistance or 0 )\n                                                                            dischargeNode.raycastDischargeExtraDistance = nil\n                                                                            self:updateDischargeInfo(dischargeNode, x, y, z)\n\n                                                                            self:finishDischargeRaycast()\n                                                                            return false\n                                                                        end\n                                                                    end\n                                                                end\n                                                            elseif hitActorId = = g_terrainNode then\n                                                                    dischargeNode.raycastDischargeDistance = math.min(dischargeNode.raycastDischargeDistance, distance)\n                                                                    dischargeNode.raycastDischargeHitTerrain = true\n                                                                    self:updateDischargeInfo(dischargeNode, x, y, z)\n                                                                    self:finishDischargeRaycast()\n                                                                    return false -- stop callbacks\n                                                                end\n                                                            end\n\n                                                            if isLast then\n                                                                self:finishDischargeRaycast()\n                                                                return false\n                                                            end\n\n                                                            return true\n                                                        end\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function Dischargeable.registerEventListeners(vehicleType)\n    SpecializationUtil.registerEventListener(vehicleType, "onLoad" , Dischargeable )\n    SpecializationUtil.registerEventListener(vehicleType, "onPostLoad" , Dischargeable )\n    SpecializationUtil.registerEventListener(vehicleType, "onRegisterDashboardValueTypes" , Dischargeable )\n    SpecializationUtil.registerEventListener(vehicleType, "onDelete" , Dischargeable )\n    SpecializationUtil.registerEventListener(vehicleType, "onReadStream" , Dischargeable )\n    SpecializationUtil.registerEventListener(vehicleType, "onWriteStream" , Dischargeable )\n    SpecializationUtil.registerEventListener(vehicleType, "onReadUpdateStream" , Dischargeable )\n    SpecializationUtil.registerEventListener(vehicleType, "onWriteUpdateStream" , Dischargeable )\n    SpecializationUtil.registerEventListener(vehicleType, "onUpdate" , Dischargeable )\n    SpecializationUtil.registerEventListener(vehicleType, "onUpdateTick" , Dischargeable )\n    SpecializationUtil.registerEventListener(vehicleType, "onRegisterActionEvents" , Dischargeable )\n    SpecializationUtil.registerEventListener(vehicleType, "onFillUnitFillLevelChanged" , Dischargeable )\n    SpecializationUtil.registerEventListener(vehicleType, "onDeactivate" , Dischargeable )\n    SpecializationUtil.registerEventListener(vehicleType, "onStateChange" , Dischargeable )\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"registerevents",children:"registerEvents"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"registerEvents()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function Dischargeable.registerEvents(vehicleType)\n    SpecializationUtil.registerEvent(vehicleType, "onDischargeStateChanged" )\n    SpecializationUtil.registerEvent(vehicleType, "onDischargeTargetObjectChanged" )\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function Dischargeable.registerFunctions(vehicleType)\n    SpecializationUtil.registerFunction(vehicleType, "loadDischargeNode" , Dischargeable.loadDischargeNode)\n    SpecializationUtil.registerFunction(vehicleType, "setCurrentDischargeNodeIndex" , Dischargeable.setCurrentDischargeNodeIndex)\n    SpecializationUtil.registerFunction(vehicleType, "getCurrentDischargeNode" , Dischargeable.getCurrentDischargeNode)\n    SpecializationUtil.registerFunction(vehicleType, "getCurrentDischargeNodeIndex" , Dischargeable.getCurrentDischargeNodeIndex)\n    SpecializationUtil.registerFunction(vehicleType, "getDischargeTargetObject" , Dischargeable.getDischargeTargetObject)\n    SpecializationUtil.registerFunction(vehicleType, "getCurrentDischargeObject" , Dischargeable.getCurrentDischargeObject)\n    SpecializationUtil.registerFunction(vehicleType, "discharge" , Dischargeable.discharge)\n    SpecializationUtil.registerFunction(vehicleType, "dischargeToGround" , Dischargeable.dischargeToGround)\n    SpecializationUtil.registerFunction(vehicleType, "dischargeToObject" , Dischargeable.dischargeToObject)\n    SpecializationUtil.registerFunction(vehicleType, "setManualDischargeState" , Dischargeable.setManualDischargeState)\n    SpecializationUtil.registerFunction(vehicleType, "setDischargeState" , Dischargeable.setDischargeState)\n    SpecializationUtil.registerFunction(vehicleType, "getDischargeState" , Dischargeable.getDischargeState)\n    SpecializationUtil.registerFunction(vehicleType, "getDischargeFillType" , Dischargeable.getDischargeFillType)\n    SpecializationUtil.registerFunction(vehicleType, "getCanDischargeToGround" , Dischargeable.getCanDischargeToGround)\n    SpecializationUtil.registerFunction(vehicleType, "getCanDischargeAtPosition" , Dischargeable.getCanDischargeAtPosition)\n    SpecializationUtil.registerFunction(vehicleType, "getCanDischargeToLand" , Dischargeable.getCanDischargeToLand)\n    SpecializationUtil.registerFunction(vehicleType, "getCanDischargeToObject" , Dischargeable.getCanDischargeToObject)\n    SpecializationUtil.registerFunction(vehicleType, "getDischargeNotAllowedWarning" , Dischargeable.getDischargeNotAllowedWarning)\n    SpecializationUtil.registerFunction(vehicleType, "getCanToggleDischargeToObject" , Dischargeable.getCanToggleDischargeToObject)\n    SpecializationUtil.registerFunction(vehicleType, "getCanToggleDischargeToGround" , Dischargeable.getCanToggleDischargeToGround)\n    SpecializationUtil.registerFunction(vehicleType, "getIsPossibleToDischargeToObject" , Dischargeable.getIsPossibleToDischargeToObject)\n    SpecializationUtil.registerFunction(vehicleType, "getIsDischargeNodeActive" , Dischargeable.getIsDischargeNodeActive)\n    SpecializationUtil.registerFunction(vehicleType, "setIsDischargeAllowed" , Dischargeable.setIsDischargeAllowed)\n    SpecializationUtil.registerFunction(vehicleType, "getDischargeNodeEmptyFactor" , Dischargeable.getDischargeNodeEmptyFactor)\n    SpecializationUtil.registerFunction(vehicleType, "getDischargeNodeAutomaticDischarge" , Dischargeable.getDischargeNodeAutomaticDischarge)\n    SpecializationUtil.registerFunction(vehicleType, "getDischargeNodeByNode" , Dischargeable.getDischargeNodeByNode)\n    SpecializationUtil.registerFunction(vehicleType, "updateRaycast" , Dischargeable.updateRaycast)\n    SpecializationUtil.registerFunction(vehicleType, "updateDischargeInfo" , Dischargeable.updateDischargeInfo)\n    SpecializationUtil.registerFunction(vehicleType, "raycastCallbackDischargeNode" , Dischargeable.raycastCallbackDischargeNode)\n    SpecializationUtil.registerFunction(vehicleType, "finishDischargeRaycast" , Dischargeable.finishDischargeRaycast)\n    SpecializationUtil.registerFunction(vehicleType, "getDischargeNodeByIndex" , Dischargeable.getDischargeNodeByIndex)\n    SpecializationUtil.registerFunction(vehicleType, "handleDischargeOnEmpty" , Dischargeable.handleDischargeOnEmpty)\n    SpecializationUtil.registerFunction(vehicleType, "handleDischargeNodeChanged" , Dischargeable.handleDischargeNodeChanged)\n    SpecializationUtil.registerFunction(vehicleType, "handleDischarge" , Dischargeable.handleDischarge)\n    SpecializationUtil.registerFunction(vehicleType, "handleDischargeRaycast" , Dischargeable.handleDischargeRaycast)\n    SpecializationUtil.registerFunction(vehicleType, "handleFoundDischargeObject" , Dischargeable.handleFoundDischargeObject)\n    SpecializationUtil.registerFunction(vehicleType, "setDischargeEffectDistance" , Dischargeable.setDischargeEffectDistance)\n    SpecializationUtil.registerFunction(vehicleType, "setDischargeEffectActive" , Dischargeable.setDischargeEffectActive)\n    SpecializationUtil.registerFunction(vehicleType, "updateDischargeSound" , Dischargeable.updateDischargeSound)\n    SpecializationUtil.registerFunction(vehicleType, "dischargeTriggerCallback" , Dischargeable.dischargeTriggerCallback)\n    SpecializationUtil.registerFunction(vehicleType, "onDeleteDischargeTriggerObject" , Dischargeable.onDeleteDischargeTriggerObject)\n    SpecializationUtil.registerFunction(vehicleType, "dischargeActivationTriggerCallback" , Dischargeable.dischargeActivationTriggerCallback)\n    SpecializationUtil.registerFunction(vehicleType, "onDeleteActivationTriggerObject" , Dischargeable.onDeleteActivationTriggerObject)\n    SpecializationUtil.registerFunction(vehicleType, "setForcedFillTypeIndex" , Dischargeable.setForcedFillTypeIndex)\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"registeroverwrittenfunctions",children:"registerOverwrittenFunctions"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"registerOverwrittenFunctions()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function Dischargeable.registerOverwrittenFunctions(vehicleType)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getRequiresTipOcclusionArea" , Dischargeable.getRequiresTipOcclusionArea)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getCanBeSelected" , Dischargeable.getCanBeSelected)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getDoConsumePtoPower" , Dischargeable.getDoConsumePtoPower)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getIsPowerTakeOffActive" , Dischargeable.getIsPowerTakeOffActive)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getAllowLoadTriggerActivation" , Dischargeable.getAllowLoadTriggerActivation)\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"registerxmlpaths",children:"registerXMLPaths"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"registerXMLPaths()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"schema"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"basePath"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function Dischargeable.registerXMLPaths(schema, basePath)\n    schema:register(XMLValueType.BOOL, basePath .. "#requiresTipOcclusionArea" , "Requires tip occlusion area" , true )\n    schema:register(XMLValueType.BOOL, basePath .. "#consumePower" , "While in discharge state, PTO power is consumed" , true )\n    schema:register(XMLValueType.BOOL, basePath .. "#stopDischargeOnDeactivate" , "Stop discharge if the vehicle is deactivated" , true )\n\n        schema:register(XMLValueType.NODE_INDEX, basePath .. ".dischargeNode(?)#node" , "Discharge node" )\n        schema:register(XMLValueType.INT, basePath .. ".dischargeNode(?)#fillUnitIndex" , "Fill unit index" )\n        schema:register(XMLValueType.INT, basePath .. ".dischargeNode(?)#unloadInfoIndex" , "Unload info index" , 1 )\n        schema:register(XMLValueType.BOOL, basePath .. ".dischargeNode(?)#stopDischargeOnEmpty" , "Stop discharge if fill unit empty" , true )\n            schema:register(XMLValueType.BOOL, basePath .. ".dischargeNode(?)#canDischargeToGround" , "Can discharge to ground" , true )\n            schema:register(XMLValueType.BOOL, basePath .. ".dischargeNode(?)#canDischargeToObject" , "Can discharge to object" , true )\n            schema:register(XMLValueType.BOOL, basePath .. ".dischargeNode(?)#canDischargeToVehicle" , "Can discharge to other vehicles" , "same as canDischargeToObject" )\n            schema:register(XMLValueType.BOOL, basePath .. ".dischargeNode(?)#canStartDischargeAutomatically" , "Can start discharge automatically" , false )\n            schema:register(XMLValueType.BOOL, basePath .. ".dischargeNode(?)#canStartGroundDischargeAutomatically" , "Can start discharge to ground automatically" , false )\n            schema:register(XMLValueType.BOOL, basePath .. ".dischargeNode(?)#stopDischargeIfNotPossible" , "Stop discharge if not possible" , "default \'true\' while having discharge trigger" )\n                schema:register(XMLValueType.BOOL, basePath .. ".dischargeNode(?)#canDischargeToGroundAnywhere" , "Can discharge to ground independent of land owned state" , false )\n                schema:register(XMLValueType.BOOL, basePath .. ".dischargeNode(?)#canDischargeToMissionGround" , "Can discharge to ground if an active mission is running on the farmland" , false )\n                    schema:register(XMLValueType.BOOL, basePath .. ".dischargeNode(?)#canFillOwnVehicle" , "Discharge node can fill other fill units of the vehicle itself" , false )\n                    schema:register(XMLValueType.BOOL, basePath .. ".dischargeNode(?)#limitGroundTipToFillLevel" , "Limit the amount that is dropped on the ground to the fill level of the tool(Otherwise it will tip the min.amount possible even if the fill level is below.)" , false )\n                        schema:register(XMLValueType.FLOAT, basePath .. ".dischargeNode(?)#emptySpeed" , "Empty speed in l/sec" , "fill unit capacity" )\n                        schema:register(XMLValueType.TIME, basePath .. ".dischargeNode(?)#effectTurnOffThreshold" , "After this time has passed and nothing has been harvested the effects are turned off" , 0.25 )\n                        schema:register(XMLValueType.STRING, basePath .. ".dischargeNode(?)#toolType" , "Tool type" , "dischargable" )\n\n                        schema:register(XMLValueType.NODE_INDEX, basePath .. ".dischargeNode(?).info#node" , "Discharge info node" , "Discharge node" )\n                        schema:register(XMLValueType.FLOAT, basePath .. ".dischargeNode(?).info#width" , "Discharge info width" , 1 )\n                        schema:register(XMLValueType.FLOAT, basePath .. ".dischargeNode(?).info#length" , "Discharge info length" , 1 )\n                        schema:register(XMLValueType.FLOAT, basePath .. ".dischargeNode(?).info#zOffset" , "Discharge info Z axis offset" , 0 )\n                        schema:register(XMLValueType.FLOAT, basePath .. ".dischargeNode(?).info#yOffset" , "Discharge info y axis offset" , 2 )\n                        schema:register(XMLValueType.BOOL, basePath .. ".dischargeNode(?).info#limitToGround" , "Discharge info is limited to ground" , true )\n                        schema:register(XMLValueType.BOOL, basePath .. ".dischargeNode(?).info#useRaycastHitPosition" , "Discharge info uses raycast hit position" , false )\n\n                        schema:register(XMLValueType.NODE_INDEX, basePath .. ".dischargeNode(?).raycast#node" , "Raycast node" , "Discharge node" )\n                        schema:register(XMLValueType.BOOL, basePath .. ".dischargeNode(?).raycast#useWorldNegYDirection" , "Use world negative Y Direction" , false )\n                        schema:register(XMLValueType.FLOAT, basePath .. ".dischargeNode(?).raycast#yOffset" , "Y Offset" , 0 )\n                        schema:register(XMLValueType.FLOAT, basePath .. ".dischargeNode(?).raycast#maxDistance" , "Max.raycast distance" , 10 )\n                        schema:register(XMLValueType.FLOAT, basePath .. ".dischargeNode(?)#maxDistance" , "Max.raycast distance" , 10 )\n\n                        schema:register(XMLValueType.STRING, basePath .. ".dischargeNode(?).fillType#converterName" , "Converter to be used to convert the fill types" )\n\n                        schema:register(XMLValueType.NODE_INDEX, basePath .. ".dischargeNode(?).trigger#node" , "Discharge trigger node" )\n                        schema:register(XMLValueType.NODE_INDEX, basePath .. ".dischargeNode(?).activationTrigger#node" , "Discharge activation trigger node" )\n\n                        ObjectChangeUtil.registerObjectChangeXMLPaths(schema, basePath .. ".dischargeNode(?).distanceObjectChanges" )\n                        schema:register(XMLValueType.FLOAT, basePath .. ".dischargeNode(?).distanceObjectChanges#threshold" , "Defines at which raycast distance the object changes" , 0.5 )\n\n                        ObjectChangeUtil.registerObjectChangeXMLPaths(schema, basePath .. ".dischargeNode(?).stateObjectChanges" )\n                        ObjectChangeUtil.registerObjectChangeXMLPaths(schema, basePath .. ".dischargeNode(?).nodeActiveObjectChanges" )\n\n                        EffectManager.registerEffectXMLPaths(schema, basePath .. ".dischargeNode(?).effects" )\n\n                        schema:register(XMLValueType.BOOL, basePath .. ".dischargeNode(?)#playSound" , "Play discharge sound" , true )\n                        schema:register(XMLValueType.NODE_INDEX, basePath .. ".dischargeNode(?)#soundNode" , "Sound link node" , "Discharge node" )\n\n                        schema:register(XMLValueType.STRING, basePath .. ".dischargeNode(?).animation#name" , "Name of animation to play while discharging" )\n                            schema:register(XMLValueType.FLOAT, basePath .. ".dischargeNode(?).animation#speed" , "Animation speed while discharging" , 1 )\n                                schema:register(XMLValueType.FLOAT, basePath .. ".dischargeNode(?).animation#resetSpeed" , "Animation speed while discharge has been stopped" , 1 )\n\n                                    SoundManager.registerSampleXMLPaths(schema, basePath .. ".dischargeNode(?)" , "dischargeSound" )\n                                    schema:register(XMLValueType.BOOL, basePath .. ".dischargeNode(?).dischargeSound#overwriteSharedSound" , "Overwrite shared discharge sound with sound defined in discharge node" , false )\n\n                                    SoundManager.registerSampleXMLPaths(schema, basePath .. ".dischargeNode(?)" , "dischargeStateSound(?)" )\n\n                                    AnimationManager.registerAnimationNodesXMLPaths(schema, basePath .. ".dischargeNode(?).animationNodes" )\n                                    AnimationManager.registerAnimationNodesXMLPaths(schema, basePath .. ".dischargeNode(?).effectAnimationNodes" )\n                                end\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"savetoxmlfile",children:"saveToXMLFile"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"saveToXMLFile()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"xmlFile"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"key"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"usedModNames"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function Dischargeable:saveToXMLFile(xmlFile, key, usedModNames)\n    local spec = self.spec_dischargeable\n    xmlFile:setValue(key .. "#isAllowed" , spec.isDischargeAllowed)\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"setcurrentdischargenodeindex",children:"setCurrentDischargeNodeIndex"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"setCurrentDischargeNodeIndex()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"dischargeNodeIndex"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function Dischargeable:setCurrentDischargeNodeIndex(dischargeNodeIndex)\n    local spec = self.spec_dischargeable\n\n    -- deactivate effects on old discharge node\n    if spec.currentDischargeNode ~ = nil and spec.dischargeNodes[dischargeNodeIndex] ~ = spec.currentDischargeNode then\n        self:setDischargeEffectActive(spec.currentDischargeNode, false , true )\n        self:updateDischargeSound(spec.currentDischargeNode, 99999 )\n\n        if spec.dischargeNodes[dischargeNodeIndex] ~ = spec.currentDischargeNode then\n            g_animationManager:stopAnimations(spec.currentDischargeNode.animationNodes)\n            g_animationManager:stopAnimations(spec.currentDischargeNode.effectAnimationNodes)\n        end\n\n        g_soundManager:stopSamples(spec.currentDischargeNode.dischargeStateSamples)\n    end\n\n    spec.currentDischargeNode = spec.dischargeNodes[dischargeNodeIndex]\n\n    for i = 1 , #spec.dischargeNodes do\n        local node = spec.dischargeNodes[i]\n        if node.nodeActiveObjectChanges ~ = nil then\n            ObjectChangeUtil.setObjectChanges(node.nodeActiveObjectChanges, i = = dischargeNodeIndex, self , self.setMovingToolDirty)\n        end\n    end\n\n    if self.isClient then\n        if self.updateDashboardValueType ~ = nil then\n            self:updateDashboardValueType( "dischargeable.activeDischargeNode" )\n        end\n    end\n\n    self:handleDischargeNodeChanged()\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"setdischargeeffectactive",children:"setDischargeEffectActive"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"setDischargeEffectActive()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"dischargeNode"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"isActive"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"force"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"fillTypeIndex"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:setDischargeEffectActive(dischargeNode, isActive, force, fillTypeIndex)\n    if isActive then\n        if not dischargeNode.isEffectActive then\n            if fillTypeIndex = = nil then\n                fillTypeIndex = self:getDischargeFillType(dischargeNode)\n            end\n\n            g_effectManager:setEffectTypeInfo(dischargeNode.effects, fillTypeIndex)\n            g_effectManager:startEffects(dischargeNode.effects)\n            g_animationManager:startAnimations(dischargeNode.effectAnimationNodes)\n\n            dischargeNode.isEffectActive = true\n        end\n\n        dischargeNode.stopEffectTime = nil\n    else\n            if force = = nil or not force then\n                if dischargeNode.stopEffectTime = = nil then\n                    dischargeNode.stopEffectTime = g_ time + dischargeNode.effectTurnOffThreshold\n                    self:raiseActive()\n                end\n            else\n                    if dischargeNode.isEffectActive then\n                        g_effectManager:stopEffects(dischargeNode.effects)\n                        g_animationManager:stopAnimations(dischargeNode.effectAnimationNodes)\n\n                        dischargeNode.isEffectActive = false\n                    end\n                end\n            end\n\n            if self.isServer then\n                if dischargeNode.isEffectActive ~ = dischargeNode.isEffectActiveSent then\n                    self:raiseDirtyFlags( self.spec_dischargeable.dirtyFlag)\n                    dischargeNode.isEffectActiveSent = dischargeNode.isEffectActive\n                end\n            end\n        end\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"setdischargeeffectdistance",children:"setDischargeEffectDistance"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"setDischargeEffectDistance()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"dischargeNode"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"distance"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:setDischargeEffectDistance(dischargeNode, distance)\n    if dischargeNode.isEffectActive then\n        if dischargeNode.effects ~ = nil and distance ~ = math.huge then\n            for _, effect in pairs(dischargeNode.effects) do\n                if effect.setDistance ~ = nil then\n                    effect:setDistance(distance, g_terrainNode)\n                end\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"setdischargestate",children:"setDischargeState"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"setDischargeState()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"state"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"noEventSend"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function Dischargeable:setDischargeState(state, noEventSend)\n    local spec = self.spec_dischargeable\n    if state ~ = spec.currentDischargeState then\n        SetDischargeStateEvent.sendEvent( self , state, noEventSend)\n\n        spec.currentDischargeState = state\n\n        local dischargeNode = spec.currentDischargeNode\n        if self.isServer then\n            if state = = Dischargeable.DISCHARGE_STATE_OFF then\n                self:setDischargeEffectActive(dischargeNode, false )\n            end\n        end\n\n        if self.isClient then\n            if state = = Dischargeable.DISCHARGE_STATE_OFF then\n                g_animationManager:stopAnimations(dischargeNode.animationNodes)\n                g_soundManager:stopSamples(dischargeNode.dischargeStateSamples)\n            else\n                    g_animationManager:startAnimations(dischargeNode.animationNodes)\n                    g_soundManager:playSamples(dischargeNode.dischargeStateSamples)\n                end\n\n                if self.updateDashboardValueType ~ = nil then\n                    self:updateDashboardValueType( "dischargeable.dischargeState" )\n                end\n            end\n\n            for i = 1 , #spec.dischargeNodes do\n                local node = spec.dischargeNodes[i]\n                if node.stateObjectChanges ~ = nil then\n                    ObjectChangeUtil.setObjectChanges(node.stateObjectChanges, state ~ = Dischargeable.DISCHARGE_STATE_OFF and node = = dischargeNode, self , self.setMovingToolDirty)\n                end\n            end\n\n            if dischargeNode.animationName ~ = nil then\n                if state ~ = Dischargeable.DISCHARGE_STATE_OFF then\n                    self:playAnimation(dischargeNode.animationName, dischargeNode.animationSpeed, self:getAnimationTime(dischargeNode.animationName), true )\n                else\n                        self:playAnimation(dischargeNode.animationName, - dischargeNode.animationResetSpeed, self:getAnimationTime(dischargeNode.animationName), true )\n                    end\n                end\n\n                SpecializationUtil.raiseEvent( self , "onDischargeStateChanged" , state)\n            end\n        end\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"setforcedfilltypeindex",children:"setForcedFillTypeIndex"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"setForcedFillTypeIndex()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"fillTypeIndex"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:setForcedFillTypeIndex(fillTypeIndex)\n    self.spec_dischargeable.forcedFillTypeIndex = fillTypeIndex\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"setmanualdischargestate",children:"setManualDischargeState"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Discharge state set that is triggered by a manual user action (button press)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"setManualDischargeState()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"state"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"noEventSend"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:setManualDischargeState(state, noEventSend)\n    self:setDischargeState(state, noEventSend)\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"updateactionevents",children:"updateActionEvents"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"updateActionEvents()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"self"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function Dischargeable.updateActionEvents( self )\n    local spec = self.spec_dischargeable\n\n    local actionEventTip = spec.actionEvents[InputAction.TOGGLE_TIPSTATE]\n    local actionEventTipGround = spec.actionEvents[InputAction.TOGGLE_TIPSTATE_GROUND]\n    local showTip = false\n    local showTipGround = false\n\n    if spec.currentDischargeState = = Dischargeable.DISCHARGE_STATE_OFF then\n        if actionEventTip ~ = nil or actionEventTipGround ~ = nil then\n            local currentDischargeNode = spec.currentDischargeNode\n            if self:getIsDischargeNodeActive(currentDischargeNode) then\n                if actionEventTip ~ = nil and self:getCanDischargeToObject(currentDischargeNode) and self:getCanToggleDischargeToObject() then\n                    g_inputBinding:setActionEventText(actionEventTip.actionEventId, g_i18n:getText( "action_startOverloading" ))\n                    showTip = true\n                elseif actionEventTipGround ~ = nil and self:getCanDischargeToGround(currentDischargeNode) and self:getCanToggleDischargeToGround() then\n                        g_inputBinding:setActionEventText(actionEventTipGround.actionEventId, g_i18n:getText( "action_startTipToGround" ))\n                        showTipGround = true\n                    end\n                end\n            end\n        elseif spec.currentDischargeState = = Dischargeable.DISCHARGE_STATE_GROUND then\n                if actionEventTipGround ~ = nil then\n                    g_inputBinding:setActionEventText(actionEventTipGround.actionEventId, g_i18n:getText( "action_stopTipToGround" ))\n                    showTipGround = true\n                end\n            else\n                    if actionEventTip ~ = nil then\n                        g_inputBinding:setActionEventText(actionEventTip.actionEventId, g_i18n:getText( "action_stopOverloading" ))\n                        showTip = true\n                    end\n                end\n\n                if actionEventTip ~ = nil then\n                    g_inputBinding:setActionEventTextVisibility(actionEventTip.actionEventId, showTip)\n                end\n                if actionEventTipGround ~ = nil then\n                    g_inputBinding:setActionEventTextVisibility(actionEventTipGround.actionEventId, showTipGround)\n                end\n            end\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"updatedebugvalues",children:"updateDebugValues"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"updateDebugValues()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"values"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function Dischargeable:updateDebugValues(values)\n    local spec = self.spec_dischargeable\n    local currentDischargeNode = spec.currentDischargeNode\n\n    local state = "OFF"\n    if spec.currentDischargeState = = Dischargeable.DISCHARGE_STATE_OBJECT then\n        state = "OBJECT"\n    elseif spec.currentDischargeState = = Dischargeable.DISCHARGE_STATE_GROUND then\n            state = "GROUND"\n        end\n        table.insert(values, { name = "state" , value = state } )\n        table.insert(values, { name = "getCanDischargeToObject" , value = tostring( self:getCanDischargeToObject(currentDischargeNode)) } )\n        table.insert(values, { name = "getCanDischargeToGround" , value = tostring( self:getCanDischargeToGround(currentDischargeNode)) } )\n        table.insert(values, { name = "dischargedLiters" , value = tostring(spec.dischargedLiters) } )\n        table.insert(values, { name = "currentNode" , value = tostring(currentDischargeNode) } )\n\n        for _, dischargeNode in ipairs(spec.dischargeNodes) do\n            table.insert(values, { name = "---\x3e" , value = tostring(dischargeNode) } )\n            local object = nil\n            if dischargeNode.dischargeObject ~ = nil then\n                object = tostring(dischargeNode.dischargeObject.configFileName)\n            end\n            table.insert(values, { name = "object" , value = tostring(object) } )\n            table.insert(values, { name = "distance" , value = dischargeNode.dischargeDistance } )\n            table.insert(values, { name = "effect" , value = tostring(dischargeNode.isEffectActive) } )\n            table.insert(values, { name = "fillLevel" , value = tostring( self:getFillUnitFillLevel(dischargeNode.fillUnitIndex)) } )\n            table.insert(values, { name = "litersToDrop" , value = tostring(dischargeNode.litersToDrop) } )\n            table.insert(values, { name = "emptyFactor" , value = tostring( self:getDischargeNodeEmptyFactor(dischargeNode)) } )\n            table.insert(values, { name = "emptySpeed" , value = tostring( self:getDischargeNodeEmptyFactor(dischargeNode)) } )\n            table.insert(values, { name = "readyForDischarge" , value = tostring(dischargeNode.lastEffect = = nil or dischargeNode.lastEffect:getIsFullyVisible()) } )\n            table.insert(values, { name = "objectsInTrigger" , value = tostring(dischargeNode.trigger.numObjects) } )\n            table.insert(values, { name = "objectsInActivationTrigger" , value = tostring(dischargeNode.activationTrigger.numObjects) } )\n        end\n    end\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"updatedischargeinfo",children:"updateDischargeInfo"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"updateDischargeInfo()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"dischargeNode"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"x"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"y"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"z"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:updateDischargeInfo(dischargeNode, x, y, z)\n    if dischargeNode.info.useRaycastHitPosition then\n        setWorldTranslation(dischargeNode.info.node, x, y, z)\n    end\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"updatedischargesound",children:"updateDischargeSound"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"updateDischargeSound()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"dischargeNode"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"dt"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function Dischargeable:updateDischargeSound(dischargeNode, dt)\n    if self.isClient then\n        local fillType = self:getDischargeFillType(dischargeNode)\n        local isInDischargeState = self.spec_dischargeable.currentDischargeState ~ = Dischargeable.DISCHARGE_STATE_OFF\n        local isEffectActive = dischargeNode.isEffectActive and fillType ~ = FillType.UNKNOWN\n        local lastEffectVisible = dischargeNode.lastEffect = = nil or dischargeNode.lastEffect:getIsVisible()\n        local effectsStillActive = dischargeNode.lastEffect ~ = nil and dischargeNode.lastEffect:getIsVisible()\n        if ((isInDischargeState and isEffectActive) or effectsStillActive) and lastEffectVisible then\n            -- shared sample\n            if dischargeNode.playSound and fillType ~ = FillType.UNKNOWN then\n                local sharedSample = g_fillTypeManager:getSampleByFillType(fillType)\n                if sharedSample ~ = nil then\n                    if sharedSample ~ = dischargeNode.sharedSample then\n                        if dischargeNode.sample ~ = nil then\n                            g_soundManager:deleteSample(dischargeNode.sample)\n                        end\n\n                        dischargeNode.sample = g_soundManager:cloneSample(sharedSample, dischargeNode.node or dischargeNode.soundNode, self )\n                        dischargeNode.sharedSample = sharedSample\n\n                        g_soundManager:playSample(dischargeNode.sample)\n                    else\n                            if not g_soundManager:getIsSamplePlaying(dischargeNode.sample) then\n                                g_soundManager:playSample(dischargeNode.sample)\n                            end\n                        end\n                    end\n                end\n\n                -- additional sample\n                if dischargeNode.dischargeSample ~ = nil then\n                    if not g_soundManager:getIsSamplePlaying(dischargeNode.dischargeSample) then\n                        g_soundManager:playSample(dischargeNode.dischargeSample)\n                    end\n                end\n                dischargeNode.turnOffSoundTimer = 250\n            else\n                    if dischargeNode.turnOffSoundTimer ~ = nil and dischargeNode.turnOffSoundTimer > 0 then\n                        dischargeNode.turnOffSoundTimer = dischargeNode.turnOffSoundTimer - dt\n                        if dischargeNode.turnOffSoundTimer < = 0 then\n                            -- shared sample\n                            if dischargeNode.playSound then\n                                if g_soundManager:getIsSamplePlaying(dischargeNode.sample) then\n                                    g_soundManager:stopSample(dischargeNode.sample)\n                                end\n                            end\n\n                            -- additional sample\n                            if dischargeNode.dischargeSample ~ = nil then\n                                if g_soundManager:getIsSamplePlaying(dischargeNode.dischargeSample) then\n                                    g_soundManager:stopSample(dischargeNode.dischargeSample)\n                                end\n                            end\n\n                            dischargeNode.turnOffSoundTimer = 0\n                        end\n                    end\n                end\n            end\n        end\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"updateraycast",children:"updateRaycast"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"updateRaycast()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"dischargeNode"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function Dischargeable:updateRaycast(dischargeNode)\n    local spec = self.spec_dischargeable\n    local raycast = dischargeNode.raycast\n\n    if raycast.node = = nil then\n        return\n    end\n\n    dischargeNode.lastDischargeObject = dischargeNode.dischargeObject\n\n    dischargeNode.raycastDischargeObject = nil\n    dischargeNode.raycastDischargeHitObject = nil\n    dischargeNode.raycastDischargeHitObjectUnitIndex = nil\n    dischargeNode.raycastDischargeHitTerrain = false\n    dischargeNode.raycastDischargeShape = nil\n    dischargeNode.raycastDischargeDistance = math.huge\n    dischargeNode.raycastDischargeFillUnitIndex = nil\n    dischargeNode.raycastDischargeHit = false\n    dischargeNode.raycastDischargeFailedReason = nil\n\n    local x, y, z = getWorldTranslation(raycast.node)\n    local dx, dy, dz = 0 , - 1 , 0\n\n    y = y + raycast.yOffset\n\n    if not raycast.useWorldNegYDirection then\n        dx, dy, dz = localDirectionToWorld(raycast.node, 0 , - 1 , 0 )\n    end\n\n    spec.currentRaycastDischargeNode = dischargeNode\n    spec.currentRaycast = raycast\n    spec.isAsyncRaycastActive = true\n\n    raycastAllAsync(x, y, z, dx, dy, dz, dischargeNode.maxDistance, "raycastCallbackDischargeNode" , self , spec.raycastCollisionMask)\n\n    if VehicleDebug.state = = VehicleDebug.DEBUG then\n        drawDebugLine(x, y, z, 0 , 1 , 0 , x + dx * dischargeNode.maxDistance, y + dy * dischargeNode.maxDistance, z + dz * dischargeNode.maxDistance, 0 , 1 , 0 , true )\n    end\nend\n\n'})})]})}function o(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}}}]);