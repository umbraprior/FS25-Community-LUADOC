"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[61696],{28453(e,n,l){l.d(n,{R:()=>t,x:()=>h});var i=l(96540);const s={},r=i.createContext(s);function t(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function h(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(r.Provider,{value:n},e.children)}},72813(e,n,l){l.r(n),l.d(n,{assets:()=>d,contentTitle:()=>h,default:()=>o,frontMatter:()=>t,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"script/Wheels/WheelManager","title":"WheelManager","description":"WheelManager","source":"@site/../docs/script/Wheels/WheelManager.md","sourceDirName":"script/Wheels","slug":"/script/Wheels/WheelManager","permalink":"/FS25-Community-LUADOC/script/Wheels/WheelManager","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"WheelEffects","permalink":"/FS25-Community-LUADOC/script/Wheels/WheelEffects"},"next":{"title":"WheelPhysics","permalink":"/FS25-Community-LUADOC/script/Wheels/WheelPhysics"}}');var s=l(74848),r=l(28453);const t={},h=void 0,d={},a=[{value:"WheelManager",id:"wheelmanager",level:2},{value:"getWheelRadiusAndWidthFromDimension",id:"getwheelradiusandwidthfromdimension",level:3},{value:"getWheelRadiusAndWidthFromFilename",id:"getwheelradiusandwidthfromfilename",level:3},{value:"initDataStructures",id:"initdatastructures",level:3},{value:"loadMapData",id:"loadmapdata",level:3},{value:"loadWheelsFromXML",id:"loadwheelsfromxml",level:3},{value:"new",id:"new",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"wheelmanager",children:"WheelManager"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"This class manages the available wheels"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parent"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"?version=script&category=93&class=906",children:"AbstractManager"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Functions"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getwheelradiusandwidthfromdimension",children:"getWheelRadiusAndWidthFromDimension"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getwheelradiusandwidthfromfilename",children:"getWheelRadiusAndWidthFromFilename"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#initdatastructures",children:"initDataStructures"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#loadmapdata",children:"loadMapData"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#loadwheelsfromxml",children:"loadWheelsFromXML"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#new",children:"new"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"getwheelradiusandwidthfromdimension",children:"getWheelRadiusAndWidthFromDimension"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Returns the radius and width for the given wheel dimension string (if available)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getWheelRadiusAndWidthFromDimension(string dimension)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"string"}),(0,s.jsx)(n.th,{children:"dimension"}),(0,s.jsx)(n.th,{children:"dimension string (e.g. '600_70R34')"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"string"}),(0,s.jsx)(n.th,{children:"radius"}),(0,s.jsx)(n.th,{children:"radius (nil, if not available)"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"width"}),(0,s.jsx)(n.td,{children:"width (nil, if not available)"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function WheelManager:getWheelRadiusAndWidthFromDimension(dimension)\n    for _, wheels in ipairs( self.sortedTypedWheels) do\n        for _, wheel in ipairs(wheels) do\n            if wheel.filename = = dimension then\n                return wheel.radius, wheel.width\n            end\n        end\n    end\n\n    return nil , nil\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getwheelradiusandwidthfromfilename",children:"getWheelRadiusAndWidthFromFilename"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Returns the radius and width for the given wheel xml path"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getWheelRadiusAndWidthFromFilename(string filename)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"string"}),(0,s.jsx)(n.th,{children:"filename"}),(0,s.jsx)(n.th,{children:"filename (e.g. 'data/shared/wheels/tires/trelleborg/TM1000/900_60R42.xml')"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"string"}),(0,s.jsx)(n.th,{children:"radius"}),(0,s.jsx)(n.th,{children:"radius (nil, if not available)"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"width"}),(0,s.jsx)(n.td,{children:"width (nil, if not available)"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function WheelManager:getWheelRadiusAndWidthFromFilename(filename)\n    for _, wheels in ipairs( self.sortedTypedWheels) do\n        for _, wheel in ipairs(wheels) do\n            if wheel.path = = filename then\n                return wheel.radius, wheel.width\n            end\n        end\n    end\n\n    return nil , nil\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"initdatastructures",children:"initDataStructures"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Initialize data structures"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"initDataStructures()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function WheelManager:initDataStructures()\n    self.wheels = { }\n    self.wheelsByBasePath = { }\n    self.sortedTypedWheels = { }\n    self.wheelFilenameToAttributes = { }\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"loadmapdata",children:"loadMapData"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Load data on map load"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"loadMapData()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"xmlFile"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"missionInfo"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"baseDirectory"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"true"}),(0,s.jsx)(n.th,{children:"if loading was successful else false"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function WheelManager:loadMapData(xmlFile, missionInfo, baseDirectory)\n    WheelManager:superClass().loadMapData( self )\n    self.baseDirectory = baseDirectory\n\n    local wheelsXMLFile = XMLFile.load( "wheelsXML" , WheelManager.DEFAULT_FILENAME)\n    if wheelsXMLFile ~ = nil then\n        self:loadWheelsFromXML(wheelsXMLFile, "wheels" , baseDirectory)\n\n        wheelsXMLFile:delete()\n    end\n\n    return true\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"loadwheelsfromxml",children:"loadWheelsFromXML"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Load wheels from xml"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"loadWheelsFromXML(table xmlFile, string key, string baseDirectory)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"xmlFile"}),(0,s.jsx)(n.th,{children:"xml file object"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"key"}),(0,s.jsx)(n.td,{children:"xml key to laod from"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"baseDirectory"}),(0,s.jsx)(n.td,{children:"base directory"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function WheelManager:loadWheelsFromXML(xmlFile, key, baseDirectory)\n    xmlFile:iterate(key .. ".wheel" , function (_, wheelKey)\n        local wheel = { }\n        wheel.path = xmlFile:getString(wheelKey .. "#filename" )\n        if wheel.path = = nil then\n            Logging.xmlWarning(xmlFile, "Missing filename for wheel \'%s\'" , wheelKey)\n                return\n            else\n                    wheel.path = Utils.getFilename(wheel.path, baseDirectory)\n                end\n\n                wheel.radius = xmlFile:getFloat(wheelKey .. "#radius" )\n                if wheel.radius = = nil then\n                    Logging.xmlWarning(xmlFile, "Missing radius for wheel \'%s\'" , wheelKey)\n                        return\n                    end\n\n                    wheel.width = xmlFile:getFloat(wheelKey .. "#width" )\n                    if wheel.width = = nil then\n                        Logging.xmlWarning(xmlFile, "Missing width for wheel \'%s\'" , wheelKey)\n                            return\n                        end\n\n                        wheel.category = xmlFile:getString(wheelKey .. "#category" , "UNKNOWN" )\n\n                        wheel.allowMixture = xmlFile:getBool(wheelKey .. "#allowMixture" , true )\n                        wheel.priority = xmlFile:getFloat(wheelKey .. "#priority" , 1 )\n\n                        wheel.filename = Utils.getFilenameFromPath(wheel.path)\n                        wheel.filename = string.split(wheel.filename, "." )[ 1 ]\n\n                        wheel.basePath = Utils.getDirectory(wheel.path)\n\n                        local pathParts = wheel.basePath:split( "/" )\n                        wheel.wheelBrand = g_brandManager:getBrandByName(pathParts[#pathParts - 2 ]) or g_brandManager:getBrandByIndex(Brand.NONE)\n\n                        wheel.wheelName = pathParts[#pathParts - 1 ] or "Unknown"\n\n                        if self.wheelFilenameToAttributes[wheel.filename] = = nil then\n                            self.wheelFilenameToAttributes[wheel.filename] = { baseFilename = wheel.path, radius = wheel.radius, width = wheel.width }\n                        else\n                                local targetAttributes = self.wheelFilenameToAttributes[wheel.filename]\n                                if math.abs(wheel.radius - targetAttributes.radius) > 0.001 then\n                                    Logging.xmlWarning(xmlFile, "Invalid radius for wheel \'%s\'.Does not equal the default radius for this tire size. (Base: %.3f from %s)" , wheel.path, targetAttributes.radius, targetAttributes.baseFilename)\n                                    end\n                                    if math.abs(wheel.width - targetAttributes.width) > 0.001 then\n                                        Logging.xmlWarning(xmlFile, "Invalid width for wheel \'%s\'.Does not equal the default width for this tire size. (Base: %.3f from %s)" , wheel.path, targetAttributes.width, targetAttributes.baseFilename)\n                                        end\n                                    end\n\n                                    table.insert( self.wheels, wheel)\n\n                                    if self.wheelsByBasePath[wheel.basePath] = = nil then\n                                        self.wheelsByBasePath[wheel.basePath] = { }\n                                        table.insert( self.sortedTypedWheels, self.wheelsByBasePath[wheel.basePath])\n                                    end\n                                    table.insert( self.wheelsByBasePath[wheel.basePath], wheel)\n                                end )\n\n                                table.sort( self.sortedTypedWheels, function (a, b)\n                                    if a[ 1 ].wheelBrand.name = = b[ 1 ].wheelBrand.name then\n                                        if a[ 1 ].priority = = b[ 1 ].priority then\n                                            return a[ 1 ].wheelName < b[ 1 ].wheelName\n                                        else\n                                                return a[ 1 ].priority > b[ 1 ].priority\n                                            end\n                                        else\n                                                return a[ 1 ].wheelBrand.name < b[ 1 ].wheelBrand.name\n                                            end\n                                        end )\n                                    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"new",children:"new"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Creating manager"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"new()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"customMt"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"instance"}),(0,s.jsx)(n.th,{children:"instance of object"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function WheelManager.new(customMt)\n    return AbstractManager.new(customMt or WheelManager _mt)\nend\n\n"})})]})}function o(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);