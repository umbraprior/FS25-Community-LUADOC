"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[78548],{28453(e,n,t){t.d(n,{R:()=>l,x:()=>a});var i=t(96540);const s={},r=i.createContext(s);function l(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(r.Provider,{value:n},e.children)}},52975(e,n,t){t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"script/Specializations/PlaceableVine","title":"PlaceableVine","description":"PlaceableVine","source":"@site/../docs/script/Specializations/PlaceableVine.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/PlaceableVine","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableVine","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"PlaceableVehicleBuyingStation","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableVehicleBuyingStation"},"next":{"title":"PlaceableWardrobe","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableWardrobe"}}');var s=t(74848),r=t(28453);const l={},a=void 0,d={},c=[{value:"PlaceableVine",id:"placeablevine",level:2},{value:"deleteSegment",id:"deletesegment",level:3},{value:"destroyVineArea",id:"destroyvinearea",level:3},{value:"doDeletePanel",id:"dodeletepanel",level:3},{value:"generateSegmentPoles",id:"generatesegmentpoles",level:3},{value:"getCanBePlacedAt",id:"getcanbeplacedat",level:3},{value:"getHasSegmentTargetGrowthState",id:"gethassegmenttargetgrowthstate",level:3},{value:"getSectionFactor",id:"getsectionfactor",level:3},{value:"getSegmentSideArea",id:"getsegmentsidearea",level:3},{value:"getVineAreaByNode",id:"getvineareabynode",level:3},{value:"getVineFruitType",id:"getvinefruittype",level:3},{value:"getVineFruitTypeIndex",id:"getvinefruittypeindex",level:3},{value:"harvestVine",id:"harvestvine",level:3},{value:"onCreateSegmentPanel",id:"oncreatesegmentpanel",level:3},{value:"onLoad",id:"onload",level:3},{value:"prepareVine",id:"preparevine",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3},{value:"registerFunctions",id:"registerfunctions",level:3},{value:"registerOverwrittenFunctions",id:"registeroverwrittenfunctions",level:3},{value:"registerSavegameXMLPaths",id:"registersavegamexmlpaths",level:3},{value:"registerXMLPaths",id:"registerxmlpaths",level:3},{value:"setShakingFactor",id:"setshakingfactor",level:3},{value:"updateVineNode",id:"updatevinenode",level:3},{value:"updateVineVisuals",id:"updatevinevisuals",level:3}];function o(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"placeablevine",children:"PlaceableVine"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Specialization for placeables"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Functions"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#deletesegment",children:"deleteSegment"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#destroyvinearea",children:"destroyVineArea"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#dodeletepanel",children:"doDeletePanel"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#generatesegmentpoles",children:"generateSegmentPoles"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getcanbeplacedat",children:"getCanBePlacedAt"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#gethassegmenttargetgrowthstate",children:"getHasSegmentTargetGrowthState"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getsectionfactor",children:"getSectionFactor"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getsegmentsidearea",children:"getSegmentSideArea"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getvineareabynode",children:"getVineAreaByNode"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getvinefruittype",children:"getVineFruitType"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getvinefruittypeindex",children:"getVineFruitTypeIndex"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#harvestvine",children:"harvestVine"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#oncreatesegmentpanel",children:"onCreateSegmentPanel"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#preparevine",children:"prepareVine"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registeroverwrittenfunctions",children:"registerOverwrittenFunctions"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registersavegamexmlpaths",children:"registerSavegameXMLPaths"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registerxmlpaths",children:"registerXMLPaths"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#setshakingfactor",children:"setShakingFactor"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#updatevinenode",children:"updateVineNode"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#updatevinevisuals",children:"updateVineVisuals"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"deletesegment",children:"deleteSegment"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"deleteSegment()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"segment"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableVine:deleteSegment(superFunc, segment)\n    local spec = self.spec_vine\n\n    local data = spec.vineSegments[segment]\n    if data ~ = nil then\n        spec.vineSegments[segment] = nil\n    end\n\n    superFunc( self , segment)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"destroyvinearea",children:"destroyVineArea"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"destroyVineArea()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"data"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableVine:destroyVineArea(data)\n    local spec = self.spec_vine\n\n    if self.isServer then\n        for i = 1 , spec.numSections do\n            local section = data.sections[i]\n            FSDensityMapUtil.destroyVineArea(spec.fruitType.index, section[ 1 ], section[ 2 ], section[ 3 ], section[ 4 ], section[ 5 ], section[ 6 ])\n\n            -- local debugArea = data.sectionDebugAreas[i]\n            -- if debugArea ~ = nil then\n                -- debugArea:delete()\n                -- g_debugManager:removeElement(debugArea)\n                -- end\n            end\n        end\n    end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"dodeletepanel",children:"doDeletePanel"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"doDeletePanel()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"segment"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"segmentIndex"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"poleIndex"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableVine:doDeletePanel(superFunc, segment, segmentIndex, poleIndex)\n    if segment = = nil or poleIndex > #segment.poles then\n        return\n    end\n\n    local previewSegment = self:getPreviewSegment()\n    local isPreviewSegment = segment = = previewSegment\n\n    if not isPreviewSegment then\n        local spec = self.spec_vine\n\n        local segmentData = spec.vineSegments[segment]\n        if segmentData ~ = nil then\n            for k, data in ipairs(segmentData) do\n                if data.poleIndex = = poleIndex then\n                    spec.nodes[data.node] = nil\n                    table.remove(segmentData, k)\n\n                    g_currentMission.vineSystem:removeElement( self , data.node, spec.width, spec.length)\n                    self:destroyVineArea(data)\n\n                    break\n                end\n            end\n        end\n    end\n\n    superFunc( self , segment, segmentIndex, poleIndex)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"generatesegmentpoles",children:"generateSegmentPoles"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"generateSegmentPoles()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"segment"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"sync"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableVine:generateSegmentPoles(superFunc, segment, sync)\n\n    local previewSegment = self:getPreviewSegment()\n    local isPreviewSegment = segment = = previewSegment\n\n    if not isPreviewSegment then\n        local spec = self.spec_vine\n        local segmentData = spec.vineSegments[segment]\n        if segmentData ~ = nil then\n            for _, data in ipairs(segmentData) do\n                g_currentMission.vineSystem:removeElement( self , data.node, spec.width, spec.length)\n                spec.nodes[data.node] = nil\n                --\n                -- for _, debugArea in pairs(data.sectionDebugAreas) do\n                    -- debugArea:delete()\n                    -- g_debugManager:removeElement(debugArea)\n                    -- end\n                end\n            end\n\n            spec.vineSegments[segment] = { }\n        end\n\n        superFunc( self , segment, sync)\n    end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getcanbeplacedat",children:"getCanBePlacedAt"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getCanBePlacedAt()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"x"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"y"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"z"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"farmId"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableVine:getCanBePlacedAt(superFunc, x, y, z, farmId)\n    local fruitDesc = g_fruitTypeManager:getFruitTypeByIndex( self:getVineFruitTypeIndex())\n    local isPlantingSeason = fruitDesc:getIsPlantableInPeriod(g_currentMission.missionInfo.growthMode, g_currentMission.environment.currentPeriod)\n\n    if not isPlantingSeason then\n        return false , string.format(g_i18n:getText( "warning_theSelectedFruitTypeCantBePlantedInThisPeriod" ), g_i18n:formatPeriod())\n    end\n\n    return superFunc( self , x, y, z)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"gethassegmenttargetgrowthstate",children:"getHasSegmentTargetGrowthState"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getHasSegmentTargetGrowthState()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"segment"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"fruitTypeIndex"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"useHarvestStates"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"usePrepareStates"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableVine:getHasSegmentTargetGrowthState(segment, fruitTypeIndex, useHarvestStates, usePrepareStates)\n    local spec = self.spec_vine\n    local minState, maxState\n\n    if fruitTypeIndex ~ = self.spec_vine.fruitType.index then\n        return false\n    end\n\n    local fruitTypeDesc = g_fruitTypeManager:getFruitTypeByIndex( self.spec_vine.fruitType.index)\n    if usePrepareStates then\n        minState, maxState = fruitTypeDesc.witheredState, fruitTypeDesc.witheredState\n    elseif useHarvestStates then\n            minState, maxState = fruitTypeDesc.minHarvestingGrowthState, fruitTypeDesc.maxHarvestingGrowthState\n        else\n                return false\n            end\n\n            if minState = = nil or maxState = = nil then\n                return false\n            end\n\n            local data = spec.vineSegments[segment]\n            if data ~ = nil then\n                for i = 1 , #data do\n                    local growthValues = data[i].growthValues\n                    for j = 1 , #growthValues do\n                        for targetState = minState, maxState do\n                            local area = growthValues[j].values[targetState]\n                            if area > 0 then\n                                return true\n                            end\n                        end\n                    end\n                end\n            end\n\n            return false\n        end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getsectionfactor",children:"getSectionFactor"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getSectionFactor()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"node"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"i"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"startX"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"startY"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"startZ"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"currentX"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"currentY"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"currentZ"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableVine:getSectionFactor(node, i, startX, startY, startZ, currentX, currentY, currentZ)\n    local spec = self.spec_vine\n\n    local factor = 0\n    local sectionStart = spec.sectionLength * (i - 1 )\n    local sectionEnd = spec.sectionLength * i\n\n    -- convert to local space\n    local _, _, localStartZ = worldToLocal(node, startX, startY, startZ)\n    local _, _, localCurrentZ = worldToLocal(node, currentX, currentY, currentZ)\n\n    if localStartZ > localCurrentZ then\n        localStartZ, localCurrentZ = localCurrentZ, localStartZ\n    end\n\n    if localStartZ < sectionEnd and localCurrentZ > sectionStart then\n        local checkStart = math.max(localStartZ, sectionStart)\n        local checkEnd = math.min(localCurrentZ, sectionEnd)\n\n        local checkDistance = math.abs(checkStart - checkEnd)\n        factor = checkDistance / spec.sectionLength\n    end\n\n    return factor\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getsegmentsidearea",children:"getSegmentSideArea"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getSegmentSideArea()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"segment"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"segmentSide"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableVine:getSegmentSideArea(segment, segmentSide)\n    local snapDistance = self:getSnapDistance()\n\n    segmentSide = segmentSide or 1\n    local dirX, dirZ = MathUtil.vector2Normalize(segment.x2 - segment.x1, segment.z2 - segment.z1)\n\n    local startWorldX, startWorldZ = segment.x1 + dirZ * segmentSide * snapDistance * 0.5 , segment.z1 - dirX * segmentSide * snapDistance * 0.5\n    local widthWorldX, widthWorldZ = segment.x1 + dirZ * segmentSide * snapDistance * 0.4 , segment.z1 - dirX * segmentSide * snapDistance * 0.4\n    local heightWorldX, heightWorldZ = segment.x2 + dirZ * segmentSide * snapDistance * 0.5 , segment.z2 - dirX * segmentSide * snapDistance * 0.5\n\n    return startWorldX, startWorldZ, widthWorldX, widthWorldZ, heightWorldX, heightWorldZ\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getvineareabynode",children:"getVineAreaByNode"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getVineAreaByNode()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"node"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableVine:getVineAreaByNode(node)\n    local spec = self.spec_vine\n    local x, _, z = getWorldTranslation(node)\n    local dirX, _, dirZ = localDirectionToWorld(node, 0 , 0 , 1 )\n    local normX, _, normZ = MathUtil.crossProduct(dirX, 0 , dirZ, 0 , 1 , 0 )\n    local sizeHalfX = spec.width * 0.5\n    local startX = x + normX * - sizeHalfX\n    local startZ = z + normZ * - sizeHalfX\n    local widthX = startX + normX * spec.width\n    local widthZ = startZ + normZ * spec.width\n    local heightX = startX + dirX * spec.length\n    local heightZ = startZ + dirZ * spec.length\n\n    return startX, startZ, widthX, widthZ, heightX, heightZ\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getvinefruittype",children:"getVineFruitType"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getVineFruitType()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableVine:getVineFruitType()\n    return self.spec_vine.fruitType.index\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getvinefruittypeindex",children:"getVineFruitTypeIndex"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getVineFruitTypeIndex()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableVine:getVineFruitTypeIndex()\n    return self.spec_vine.fruitType.index\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"harvestvine",children:"harvestVine"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"harvestVine()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"node"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"startX"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"startY"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"startZ"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"currentX"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"currentY"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"currentZ"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"callback"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"target"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableVine:harvestVine(node, startX, startY, startZ, currentX, currentY, currentZ, callback, target)\n    if not self.isServer then\n        return\n    end\n\n    local spec = self.spec_vine\n    local data = spec.nodes[node]\n    if data = = nil then\n        return\n    end\n\n    local needsUpdate = false\n    for i = 1 , spec.numSections do\n        local factor = self:getSectionFactor(node, i, startX, startY, startZ, currentX, currentY, currentZ)\n\n        if factor > spec.thresholdFactor then\n            local section = data.sections[i]\n\n            local area, totalArea, weedFactor, sprayFactor, plowFactor = FSDensityMapUtil.updateVineCutArea(spec.fruitType.index, section[ 1 ], section[ 2 ], section[ 3 ], section[ 4 ], section[ 5 ], section[ 6 ])\n\n            if area > 0 then\n                callback(target, self , area, totalArea, weedFactor, sprayFactor, plowFactor, spec.sectionLength)\n\n                needsUpdate = true\n            end\n        end\n    end\n\n    if needsUpdate then\n        self:updateVineNode(node, false )\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"oncreatesegmentpanel",children:"onCreateSegmentPanel"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onCreateSegmentPanel()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"isPreview"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"segment"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"panel"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"poleIndex"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"dy"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"pole"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableVine:onCreateSegmentPanel(isPreview, segment, panel, poleIndex, dy, pole)\n    local spec = self.spec_vine\n\n    if not getAllowFoliageShadows() then\n        local function disableShadows(node)\n            if getHasClassId(node, ClassIds.SHAPE) then\n                setShapeCastShadowmap(node, false )\n            end\n        end\n\n        I3DUtil.iterateRecursively(panel, disableShadows)\n        if pole ~ = nil then\n            I3DUtil.iterateRecursively(pole, disableShadows)\n        end\n    end\n\n    if not isPreview then\n        local node = getChildAt(panel, 0 )\n\n        local data = { node = node, poleIndex = poleIndex }\n        spec.nodes[node] = data\n        table.insert(spec.vineSegments[segment], data)\n\n        local x, _, z = getWorldTranslation(panel)\n        local dirX, _, dirZ = localDirectionToWorld(panel, 0 , 0 , 1 )\n        dirX, dirZ = MathUtil.vector2Normalize(dirX, dirZ)\n\n        local normX, _, normZ = MathUtil.crossProduct(dirX, 0 , dirZ, 0 , 1 , 0 )\n        normX, normZ = MathUtil.vector2Normalize(normX, normZ)\n        local sizeHalfX = spec.width * 0.5\n\n        data.growthStates = { }\n        for nodeIndex, foliageStates in pairs(spec.growthStates) do\n            local stateNode = I3DUtil.indexToObject(panel, nodeIndex)\n            if stateNode = = nil then\n                Logging.warning( "Failed to get vine panel growth state node(\'%s\')" , nodeIndex)\n                return\n            end\n\n            data.growthStates[stateNode] = { foliageStates = foliageStates, value = 0 , sectionStates = { } }\n            setVisibility(stateNode, false )\n\n            -- check if node has custom lod1 with children\n                for i = 0 , getNumOfChildren(stateNode) - 1 do\n                    local lodNode = getChildAt(stateNode, i)\n                    if getNumOfChildren(lodNode) > 1 then\n                        for j = 0 , getNumOfChildren(lodNode) - 1 do\n                            local lodChildNode = getChildAt(lodNode, j)\n                            local lodX, lodY, lodZ = getTranslation(lodChildNode)\n                            local distanceFactor = lodZ / spec.length\n\n                            lodY = lodY + distanceFactor * - dy\n                            setTranslation(lodChildNode, lodX, lodY, lodZ)\n\n                            if spec.numLODOffsets > 0 and getHasShaderParameter(lodChildNode, "uvOffset" ) then\n                                local uvOffset = math.random( 0 , spec.numLODOffsets - 1 ) * ( 1 / spec.numLODOffsets)\n                                setShaderParameter(lodChildNode, "uvOffset" , uvOffset, 0 , 0 , 0 , false )\n                            end\n                        end\n                    end\n                end\n            end\n\n            local maxState = 1\n            local maxPixels = 0\n            data.sections = { }\n            -- data.sectionDebugAreas = {}\n            data.growthValues = { }\n\n            local sectionLength = spec.sectionLength\n\n            for i = 1 , spec.numSections do\n                local startX = x + dirX * sectionLength * (i - 1 ) + normX * - sizeHalfX\n                local startZ = z + dirZ * sectionLength * (i - 1 ) + normZ * - sizeHalfX\n                local widthX = startX + normX * spec.width\n                local widthZ = startZ + normZ * spec.width\n                local heightX = startX + dirX * sectionLength\n                local heightZ = startZ + dirZ * sectionLength\n\n                data.sections[i] = { startX, startZ, widthX, widthZ, heightX, heightZ }\n\n                -- local debugArea = DebugPlane.newSimple(true, false, Color.new(0, 0.7 * (i / spec.numSections), 0, 0.1))\n                -- debugArea:createWithPositions(startX, 0, startZ, widthX, 0, widthZ, heightX, 0, heightZ)\n                -- data.sectionDebugAreas[i] = debugArea\n                -- g_debugManager:addElement(debugArea)\n\n                data.growthValues[i] = { totalArea = 0 , values = { } }\n                for stateNode, growthStateData in pairs(data.growthStates) do\n                    for _, foliageData in ipairs(growthStateData.foliageStates) do\n                        data.growthValues[i].values[foliageData.state] = 0\n                    end\n                end\n\n                data.growthValues[i].totalArea = FSDensityMapUtil.updateVineAreaValues(spec.fruitType.index, startX, startZ, widthX, widthZ, heightX, heightZ, data.growthValues[i].values)\n\n                for state, value in pairs(data.growthValues[i].values) do\n                    if value > maxPixels then\n                        maxPixels = value\n                        maxState = state\n                    end\n                end\n            end\n\n            if not self.isLoadingFromSavegameXML or spec.startGrowthState ~ = nil then\n                if spec.startGrowthState ~ = nil then\n                    maxState = spec.startGrowthState\n                end\n                for i = 1 , spec.numSections do\n                    local section = data.sections[i]\n                    FSDensityMapUtil.createVineArea(spec.fruitType.index, section[ 1 ], section[ 2 ], section[ 3 ], section[ 4 ], section[ 5 ], section[ 6 ], maxState)\n                end\n            end\n\n            g_currentMission.vineSystem:addElement( self , node, spec.width, spec.length)\n            self:updateVineNode(node, false )\n        else\n                local states = getChildAt(panel, 1 )\n                for i = 0 , getNumOfChildren(states) - 1 do\n                    setVisibility(getChildAt(states, i), i = = spec.previewNodeIndex)\n                end\n            end\n        end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Called on loading"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onLoad(table savegame)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"savegame"}),(0,s.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableVine:onLoad(savegame)\n    local spec = self.spec_vine\n    local xmlFile = self.xmlFile\n\n    local fruitTypeName = xmlFile:getValue( "placeable.vine#fruitType" )\n    if fruitTypeName = = nil then\n        Logging.xmlWarning(xmlFile, "Missing fruit type name" )\n        return\n    end\n\n    local fruitType = g_fruitTypeManager:getFruitTypeByName(fruitTypeName)\n    if fruitType = = nil then\n        Logging.xmlWarning(xmlFile, "Fruit type \'%s\' not defined" , fruitTypeName)\n        return\n    end\n\n    spec.fruitType = fruitType\n    spec.length = xmlFile:getValue( "placeable.vine#length" , 1 )\n    spec.width = xmlFile:getValue( "placeable.vine#width" , 1 )\n    spec.thresholdFactor = xmlFile:getValue( "placeable.vine#thresholdFactor" , 0.5 )\n    spec.numLODOffsets = xmlFile:getValue( "placeable.vine#numLODOffsets" , 0 )\n    spec.numSections = math.max(xmlFile:getValue( "placeable.vine#numSections" , 1 ), 1 )\n    spec.sectionLength = spec.length / spec.numSections\n    spec.vineSegments = { }\n    spec.nodes = { }\n    spec.growthStates = { }\n\n    xmlFile:iterate( "placeable.vine.growthStates.growthState" , function (_, key)\n        local nodeIndex = xmlFile:getValue(key .. "#nodeIndex" )\n        if nodeIndex = = nil then\n            Logging.xmlWarning(xmlFile, "Missing growth state nodeIndex for \'%s\'" , key)\n                return\n            end\n\n            local foliageStates = { }\n\n            xmlFile:iterate(key .. ".foliage" , function (_, foliageKey)\n                local state = xmlFile:getValue(foliageKey .. "#state" )\n                if state = = nil then\n                    Logging.xmlWarning(xmlFile, "Missing foliage state for \'%s\'" , foliageKey)\n                        return\n                    end\n\n                    if state < 0 or state > (fruitType.numStateChannels ^ 2 - 1 ) then\n                        Logging.xmlWarning(xmlFile, "Invalid foliage state for \'%s\'" , foliageKey)\n                            return\n                        end\n\n                        local sectionState = xmlFile:getValue(foliageKey .. "#sectionState" )\n                        if sectionState = = nil then\n                            Logging.xmlWarning(xmlFile, "Missing foliage sectionState for \'%s\'" , foliageKey)\n                                return\n                            end\n\n                            table.insert(foliageStates, { state = state, sectionState = sectionState } )\n                        end )\n\n                        if #foliageStates = = 0 then\n                            Logging.xmlWarning(xmlFile, "Missing foliage states for growthstate \'%s\'" , key)\n                                return\n                            end\n\n                            spec.growthStates[nodeIndex] = foliageStates\n                        end )\n\n                        spec.previewNodeIndex = xmlFile:getValue( "placeable.vine.growthStates#previewNodeIndex" , 0 )\n\n                        spec.resetStates = { }\n                        xmlFile:iterate( "placeable.vine.resetStates.resetState" , function (_, key)\n                            local state = xmlFile:getValue(key .. "#state" )\n                            if state = = nil then\n                                Logging.xmlWarning(xmlFile, "Missing reset state for \'%s\'" , key)\n                                    return\n                                end\n                                local targetState = xmlFile:getValue(key .. "#targetState" )\n                                if targetState = = nil then\n                                    Logging.xmlWarning(xmlFile, "Missing reset target state for \'%s\'" , key)\n                                        return\n                                    end\n                                    local threshold = xmlFile:getValue(key .. "#threshold" )\n                                    if threshold = = nil then\n                                        Logging.xmlWarning(xmlFile, "Missing reset state threshold for \'%s\'" , key)\n                                            return\n                                        end\n\n                                        local resetState = { }\n                                        resetState.state = state\n                                        resetState.targetState = targetState\n                                        resetState.values = { }\n                                        resetState.values[state] = 0\n                                        resetState.threshold = threshold\n\n                                        table.insert(spec.resetStates, resetState)\n                                    end )\n\n                                    spec.startGrowthState = nil\n                                    if savegame ~ = nil then\n                                        spec.startGrowthState = savegame.xmlFile:getValue(savegame.key .. ".vine#startGrowthState" )\n                                    end\n                                end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"preparevine",children:"prepareVine"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"prepareVine()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"node"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"startX"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"startY"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"startZ"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"currentX"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"currentY"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"currentZ"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableVine:prepareVine(node, startX, startY, startZ, currentX, currentY, currentZ)\n    if not self.isServer then\n        return 0\n    end\n\n    local spec = self.spec_vine\n    local data = spec.nodes[node]\n    if data = = nil then\n        return 0\n    end\n\n    local area = 0\n\n    for i = 1 , spec.numSections do\n        local factor = self:getSectionFactor(node, i, startX, startY, startZ, currentX, currentY, currentZ)\n\n        if factor > spec.thresholdFactor then\n            local section = data.sections[i]\n            local currentArea, _ = FSDensityMapUtil.updateVinePrepareArea(spec.fruitType.index, section[ 1 ], section[ 2 ], section[ 3 ], section[ 4 ], section[ 5 ], section[ 6 ])\n            area = area + currentArea\n        end\n    end\n\n    if area > 0 then\n        self:updateVineNode(node, false )\n    end\n\n    return area\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Checks if all prerequisite specializations are loaded"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"prerequisitesPresent(table specializations)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"specializations"}),(0,s.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"hasPrerequisite"}),(0,s.jsx)(n.th,{children:"true if all prerequisite specializations are loaded"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableVine.prerequisitesPresent(specializations)\n    return SpecializationUtil.hasSpecialization( PlaceableFence , specializations)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableVine.registerEventListeners(placeableType)\n    SpecializationUtil.registerEventListener(placeableType, "onLoad" , PlaceableVine )\n    SpecializationUtil.registerEventListener(placeableType, "onCreateSegmentPanel" , PlaceableVine )\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableVine.registerFunctions(placeableType)\n    SpecializationUtil.registerFunction(placeableType, "updateVineNode" , PlaceableVine.updateVineNode)\n    SpecializationUtil.registerFunction(placeableType, "updateVineVisuals" , PlaceableVine.updateVineVisuals)\n    SpecializationUtil.registerFunction(placeableType, "destroyVineArea" , PlaceableVine.destroyVineArea)\n    SpecializationUtil.registerFunction(placeableType, "getVineFruitTypeIndex" , PlaceableVine.getVineFruitTypeIndex)\n    SpecializationUtil.registerFunction(placeableType, "setShakingFactor" , PlaceableVine.setShakingFactor)\n    SpecializationUtil.registerFunction(placeableType, "harvestVine" , PlaceableVine.harvestVine)\n    SpecializationUtil.registerFunction(placeableType, "prepareVine" , PlaceableVine.prepareVine)\n    SpecializationUtil.registerFunction(placeableType, "getVineFruitType" , PlaceableVine.getVineFruitType)\n    SpecializationUtil.registerFunction(placeableType, "getHasSegmentTargetGrowthState" , PlaceableVine.getHasSegmentTargetGrowthState)\n    SpecializationUtil.registerFunction(placeableType, "getSegmentSideArea" , PlaceableVine.getSegmentSideArea)\n    SpecializationUtil.registerFunction(placeableType, "getSectionFactor" , PlaceableVine.getSectionFactor)\n    SpecializationUtil.registerFunction(placeableType, "getVineAreaByNode" , PlaceableVine.getVineAreaByNode)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registeroverwrittenfunctions",children:"registerOverwrittenFunctions"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerOverwrittenFunctions()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableVine.registerOverwrittenFunctions(placeableType)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "doDeletePanel" , PlaceableVine.doDeletePanel)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "generateSegmentPoles" , PlaceableVine.generateSegmentPoles)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "deleteSegment" , PlaceableVine.deleteSegment)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "getCanBePlacedAt" , PlaceableVine.getCanBePlacedAt)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "getHasParallelSnapping" , PlaceableVine.getHasParallelSnapping)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registersavegamexmlpaths",children:"registerSavegameXMLPaths"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerSavegameXMLPaths()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"schema"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"basePath"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableVine.registerSavegameXMLPaths(schema, basePath)\n    schema:setXMLSpecializationType( "Vine" )\n    schema:register(XMLValueType.INT, basePath .. "#startGrowthState" , "Vineyard start growth state" )\n    schema:setXMLSpecializationType()\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registerxmlpaths",children:"registerXMLPaths"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerXMLPaths()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"schema"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"basePath"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableVine.registerXMLPaths(schema, basePath)\n    schema:setXMLSpecializationType( "Vine" )\n    schema:register(XMLValueType.STRING, basePath .. ".vine#fruitType" , "Vine fruit type" )\n    schema:register(XMLValueType.FLOAT, basePath .. ".vine#width" , "Vine width" )\n    schema:register(XMLValueType.FLOAT, basePath .. ".vine#length" , "Vine length" )\n    schema:register(XMLValueType.FLOAT, basePath .. ".vine#thresholdFactor" , "Section work threshold factor" )\n    schema:register(XMLValueType.INT, basePath .. ".vine#numLODOffsets" , "Vine num lod offsets" )\n    schema:register(XMLValueType.INT, basePath .. ".vine#numSections" , "Vine num sub sections" )\n    schema:register(XMLValueType.INT, basePath .. ".vine.growthStates#previewNodeIndex" , "Node index of preview node" )\n    schema:register(XMLValueType.STRING, basePath .. ".vine.growthStates.growthState(?)#nodeIndex" , "Growthstate node index.Relative to panel rootnode" )\n    schema:register(XMLValueType.INT, basePath .. ".vine.growthStates.growthState(?).foliage(?)#state" , "Growthstate" )\n    schema:register(XMLValueType.INT, basePath .. ".vine.growthStates.growthState(?).foliage(?)#sectionState" , "SectionState" )\n    schema:register(XMLValueType.INT, basePath .. ".vine.resetStates.resetState(?)#state" , "Reset state" )\n    schema:register(XMLValueType.INT, basePath .. ".vine.resetStates.resetState(?)#targetState" , "Reset target state" )\n    schema:register(XMLValueType.FLOAT, basePath .. ".vine.resetStates.resetState(?)#threshold" , "Threshold to apply reset" )\n    schema:setXMLSpecializationType()\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"setshakingfactor",children:"setShakingFactor"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"setShakingFactor()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"node"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"worldX"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"worldY"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"worldZ"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"intensity"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableVine:setShakingFactor(node, worldX, worldY, worldZ, intensity)\n    local spec = self.spec_vine\n    local data = spec.nodes[node]\n    if data = = nil then\n        return\n    end\n\n    for stateNode, _ in pairs(data.growthStates) do\n        I3DUtil.setShaderParameterRec(stateNode, "harvestPosition" , worldX, worldY, worldZ, intensity)\n    end\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"updatevinenode",children:"updateVineNode"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"updateVineNode()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"node"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"isGrowing"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableVine:updateVineNode(node, isGrowing)\n    local spec = self.spec_vine\n\n    local data = spec.nodes[node]\n    if data = = nil then\n        return\n    end\n\n    if not entityExists(node) then\n        return\n    end\n\n    if isGrowing then\n        -- check if an area needs to be reset\n            -- e.g.only a small part of was prepared for new growing\n                -- in that case we need to reset the whole are to make sure that vine is regrowing completly\n\n                local startX, startZ, widthX, widthZ, heightX, heightZ = self:getVineAreaByNode(node)\n\n                for _, resetState in ipairs(spec.resetStates) do\n                    local totalArea = FSDensityMapUtil.updateVineAreaValues(spec.fruitType.index, startX, startZ, widthX, widthZ, heightX, heightZ, resetState.values)\n\n                    local factor = 0\n                    if totalArea > 0 then\n                        factor = resetState.values[resetState.state] / totalArea\n                    end\n                    if self.isServer and factor < 1 and factor > resetState.threshold then\n                        FSDensityMapUtil.resetVineArea(spec.fruitType.index, startX, startZ, widthX, widthZ, heightX, heightZ, resetState.targetState)\n\n                        break\n                    end\n                end\n            end\n\n            data.totalArea = 0\n            if data.growthValues = = nil then\n                data.growthValues = { }\n            end\n\n            for i = 1 , spec.numSections do\n                local section = data.sections[i]\n                if data.growthValues[i] = = nil then\n                    data.growthValues[i] = { totalArea = 0 , values = { } }\n                    for stateNode, growthStateData in pairs(data.growthStates) do\n                        for _, foliageData in ipairs(growthStateData.foliageStates) do\n                            data.growthValues[i].values[foliageData.state] = 0\n                        end\n                    end\n                end\n\n                data.growthValues[i].totalArea = FSDensityMapUtil.updateVineAreaValues(spec.fruitType.index, section[ 1 ], section[ 2 ], section[ 3 ], section[ 4 ], section[ 5 ], section[ 6 ], data.growthValues[i].values)\n            end\n\n            self:updateVineVisuals(data)\n        end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"updatevinevisuals",children:"updateVineVisuals"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"updateVineVisuals()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"data"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableVine:updateVineVisuals(data)\n    local spec = self.spec_vine\n    local maxValue = 0\n    local growthStateNode = nil\n\n    for stateNode, growthStateData in pairs(data.growthStates) do\n        setVisibility(stateNode, false )\n        growthStateData.value = 0\n        for i = 1 , spec.numSections do\n            local maxSectionValue = 0\n            growthStateData.sectionStates[i] = 1\n\n            for _, foliageState in ipairs(growthStateData.foliageStates) do\n                local value = data.growthValues[i].values[foliageState.state]\n                growthStateData.value = growthStateData.value + value\n\n                if value > = maxSectionValue then\n                    growthStateData.sectionStates[i] = foliageState.sectionState\n                    maxSectionValue = value\n                end\n            end\n        end\n\n        if growthStateData.value > maxValue then\n            if growthStateNode ~ = nil then\n                setVisibility(growthStateNode, false )\n            end\n\n            maxValue = growthStateData.value\n            setVisibility(stateNode, true )\n            growthStateNode = stateNode\n\n            local sectionStates = growthStateData.sectionStates\n            I3DUtil.setShaderParameterRec(stateNode, "hideSectionStates" , sectionStates[ 1 ], sectionStates[ 2 ], sectionStates[ 3 ], spec.sectionLength)\n        end\n    end\nend\n\n'})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}}}]);