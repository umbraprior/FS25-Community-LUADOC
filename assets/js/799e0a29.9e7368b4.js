"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[45111],{8559(e,n,r){r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"script/Specializations/VinePrepruner","title":"VinePrepruner","description":"VinePrepruner","source":"@site/../docs/script/Specializations/VinePrepruner.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/VinePrepruner","permalink":"/FS25-Community-LUADOC/script/Specializations/VinePrepruner","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"VineCutter","permalink":"/FS25-Community-LUADOC/script/Specializations/VineCutter"},"next":{"title":"Washable","permalink":"/FS25-Community-LUADOC/script/Specializations/Washable"}}');var t=r(74848),s=r(28453);const l={},c=void 0,d={},a=[{value:"VinePrepruner",id:"vineprepruner",level:2},{value:"initSpecialization",id:"initspecialization",level:3},{value:"onDelete",id:"ondelete",level:3},{value:"onLoad",id:"onload",level:3},{value:"onReadStream",id:"onreadstream",level:3},{value:"onReadUpdateStream",id:"onreadupdatestream",level:3},{value:"onUpdate",id:"onupdate",level:3},{value:"onWriteStream",id:"onwritestream",level:3},{value:"onWriteUpdateStream",id:"onwriteupdatestream",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"readPrePrunerFromStream",id:"readpreprunerfromstream",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3},{value:"registerFunctions",id:"registerfunctions",level:3},{value:"registerOverwrittenFunctions",id:"registeroverwrittenfunctions",level:3},{value:"writePrePrunerToStream",id:"writepreprunertostream",level:3}];function o(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"vineprepruner",children:"VinePrepruner"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Specialization for vine prepruners"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Functions"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#initspecialization",children:"initSpecialization"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#ondelete",children:"onDelete"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onreadstream",children:"onReadStream"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onreadupdatestream",children:"onReadUpdateStream"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onupdate",children:"onUpdate"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onwritestream",children:"onWriteStream"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onwriteupdatestream",children:"onWriteUpdateStream"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#readpreprunerfromstream",children:"readPrePrunerFromStream"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#registeroverwrittenfunctions",children:"registerOverwrittenFunctions"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#writepreprunertostream",children:"writePrePrunerToStream"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"initspecialization",children:"initSpecialization"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"initSpecialization()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function VinePrepruner.initSpecialization()\n    local schema = Vehicle.xmlSchema\n    schema:setXMLSpecializationType( "VinePrepruner" )\n    schema:register(XMLValueType.STRING, "vehicle.vinePrepruner#fruitType" , "Fruit type" )\n\n    local nodeKey = VinePrepruner.PRUNER_NODE_XML_KEY\n    schema:register(XMLValueType.NODE_INDEX, nodeKey .. "#node" , "Pruner node that adjusts translation depending on raycast distance" )\n    schema:register(XMLValueType.FLOAT, nodeKey .. "#offset" , "Offset from raycast node to center of pruning unit" , 0.5 )\n    schema:register(XMLValueType.INT, nodeKey .. "#axis" , "Move axis" , 1 )\n    schema:register(XMLValueType.INT, nodeKey .. "#direction" , "Translation direction" , 1 )\n    schema:register(XMLValueType.FLOAT, nodeKey .. "#transMin" , "Min.translation" , 0 )\n    schema:register(XMLValueType.FLOAT, nodeKey .. "#transMax" , "Max.translation" , 1 )\n    schema:register(XMLValueType.FLOAT, nodeKey .. "#transSpeed" , "Translation speed(m/sec)" , 0.5 )\n    schema:register(XMLValueType.INT, nodeKey .. "#numBits" , "Number of bits to sync state in multiplayer" , 8 )\n\n    schema:register(XMLValueType.STRING, "vehicle.vinePrepruner.poleAnimation#name" , "Name of pole animation(will be triggered as soon as pole has been detected)" )\n    schema:register(XMLValueType.FLOAT, "vehicle.vinePrepruner.poleAnimation#speedScale" , "Animation speed scale" , 1 )\n    schema:register(XMLValueType.FLOAT, "vehicle.vinePrepruner.poleAnimation#poleThreshold" , "Defines when the pole is detected as percentage of segment length" , 0.1 )\n\n    EffectManager.registerEffectXMLPaths(schema, "vehicle.vinePrepruner.effect" )\n\n    schema:setXMLSpecializationType()\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"ondelete",children:"onDelete"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on deleting"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onDelete()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function VinePrepruner:onDelete()\n    local spec = self.spec_vinePrepruner\n    g_effectManager:deleteEffects(spec.effects)\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onLoad()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function VinePrepruner:onLoad(savegame)\n    local spec = self.spec_vinePrepruner\n\n    local fruitTypeName = self.xmlFile:getValue( "vehicle.vinePrepruner#fruitType" )\n    local fruitType = g_fruitTypeManager:getFruitTypeByName(fruitTypeName)\n    if fruitType ~ = nil then\n        spec.fruitTypeIndex = fruitType.index\n    else\n            spec.fruitTypeIndex = FruitType.GRAPE\n        end\n\n        spec.prunerNodes = { }\n        self.xmlFile:iterate( "vehicle.vinePrepruner.prunerNode" , function (index, key)\n            local entry = { }\n            if self:loadPreprunerNodeFromXML( self.xmlFile, key, entry) then\n                table.insert(spec.prunerNodes, entry)\n            end\n        end )\n\n        spec.poleAnimation = { }\n        spec.poleAnimation.name = self.xmlFile:getValue( "vehicle.vinePrepruner.poleAnimation#name" )\n        spec.poleAnimation.speedScale = self.xmlFile:getValue( "vehicle.vinePrepruner.poleAnimation#speedScale" , 1 )\n        spec.poleAnimation.poleThreshold = 1 - self.xmlFile:getValue( "vehicle.vinePrepruner.poleAnimation#poleThreshold" , 0.1 )\n\n        spec.lastWorkTime = - 10000\n        spec.effectState = false\n\n        if self.isClient then\n            spec.effects = g_effectManager:loadEffect( self.xmlFile, "vehicle.vinePrepruner.effect" , self.components, self , self.i3dMappings)\n        end\n\n        spec.dirtyFlag = self:getNextDirtyFlag()\n    end\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"onreadstream",children:"onReadStream"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onReadStream()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"streamId"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function VinePrepruner:onReadStream(streamId, connection)\n    VinePrepruner.readPrePrunerFromStream( self , streamId, true )\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"onreadupdatestream",children:"onReadUpdateStream"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onReadUpdateStream()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"streamId"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"timestamp"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"connection"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function VinePrepruner:onReadUpdateStream(streamId, timestamp, connection)\n    if connection:getIsServer() then\n        if streamReadBool(streamId) then\n            VinePrepruner.readPrePrunerFromStream( self , streamId)\n        end\n    end\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"onupdate",children:"onUpdate"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onUpdate()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"dt"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"isActiveForInput"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"isActiveForInputIgnoreSelection"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"isSelected"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function VinePrepruner:onUpdate(dt, isActiveForInput, isActiveForInputIgnoreSelection, isSelected)\n    local spec = self.spec_vinePrepruner\n    for i = 1 , #spec.prunerNodes do\n        local prunerNode = spec.prunerNodes[i]\n        if self:getIsPreprunerNodeActive(prunerNode) then\n            local curTrans = prunerNode.curTrans[prunerNode.axis]\n            if prunerNode.transTarget ~ = curTrans then\n                local moveDirection = math.sign(prunerNode.transTarget - curTrans)\n                local func = moveDirection > = 0 and math.min or math.max\n                prunerNode.curTrans[prunerNode.axis] = func(curTrans + prunerNode.transSpeed * dt * moveDirection, prunerNode.transTarget)\n                setTranslation(prunerNode.node, prunerNode.curTrans[ 1 ], prunerNode.curTrans[ 2 ], prunerNode.curTrans[ 3 ])\n            end\n        end\n    end\n\n    if self.isServer then\n        local effectState = spec.lastWorkTime + 1000 > g_ time\n        if effectState ~ = spec.effectState then\n            spec.effectState = effectState\n\n            if self.isClient then\n                if effectState then\n                    g_effectManager:setEffectTypeInfo(spec.effects, nil , spec.fruitTypeIndex, nil )\n                    g_effectManager:startEffects(spec.effects)\n                else\n                        g_effectManager:stopEffects(spec.effects)\n                    end\n                end\n\n                self:raiseDirtyFlags(spec.dirtyFlag)\n            end\n        end\n    end\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"onwritestream",children:"onWriteStream"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onWriteStream()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"streamId"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function VinePrepruner:onWriteStream(streamId, connection)\n    VinePrepruner.writePrePrunerToStream( self , streamId)\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"onwriteupdatestream",children:"onWriteUpdateStream"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onWriteUpdateStream()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"streamId"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"connection"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"dirtyMask"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function VinePrepruner:onWriteUpdateStream(streamId, connection, dirtyMask)\n    if not connection:getIsServer() then\n        local spec = self.spec_vinePrepruner\n        if streamWriteBool(streamId, bit32.band(dirtyMask, spec.dirtyFlag) ~ = 0 ) then\n            VinePrepruner.writePrePrunerToStream( self , streamId)\n        end\n    end\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"prerequisitesPresent()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function VinePrepruner.prerequisitesPresent(specializations)\n    return SpecializationUtil.hasSpecialization(VineDetector, specializations)\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"readpreprunerfromstream",children:"readPrePrunerFromStream"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"readPrePrunerFromStream()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"self"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"streamId"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"forceState"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function VinePrepruner.readPrePrunerFromStream( self , streamId, forceState)\n    local spec = self.spec_vinePrepruner\n    for i = 1 , #spec.prunerNodes do\n        local prunerNode = spec.prunerNodes[i]\n\n        local maxValue = ( 2 ^ prunerNode.numBits) - 1\n        local rawValue = streamReadUIntN(streamId, prunerNode.numBits)\n        prunerNode.transTarget = rawValue / maxValue * (prunerNode.transMax - prunerNode.transMin) + prunerNode.transMin\n        if forceState then\n            prunerNode.curTrans[prunerNode.axis] = prunerNode.transTarget\n            setTranslation(prunerNode.node, prunerNode.curTrans[ 1 ], prunerNode.curTrans[ 2 ], prunerNode.curTrans[ 3 ])\n        end\n    end\n\n    local effectState = streamReadBool(streamId)\n    if effectState ~ = spec.effectState then\n        spec.effectState = effectState\n\n        if effectState then\n            g_effectManager:setEffectTypeInfo(spec.effects, nil , spec.fruitTypeIndex, nil )\n            g_effectManager:startEffects(spec.effects)\n        else\n                g_effectManager:stopEffects(spec.effects)\n            end\n        end\n    end\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function VinePrepruner.registerEventListeners(vehicleType)\n    SpecializationUtil.registerEventListener(vehicleType, "onLoad" , VinePrepruner )\n    SpecializationUtil.registerEventListener(vehicleType, "onDelete" , VinePrepruner )\n    SpecializationUtil.registerEventListener(vehicleType, "onReadStream" , VinePrepruner )\n    SpecializationUtil.registerEventListener(vehicleType, "onWriteStream" , VinePrepruner )\n    SpecializationUtil.registerEventListener(vehicleType, "onReadUpdateStream" , VinePrepruner )\n    SpecializationUtil.registerEventListener(vehicleType, "onWriteUpdateStream" , VinePrepruner )\n    SpecializationUtil.registerEventListener(vehicleType, "onUpdate" , VinePrepruner )\n    SpecializationUtil.registerEventListener(vehicleType, "onTurnedOff" , VinePrepruner )\n    SpecializationUtil.registerEventListener(vehicleType, "onAnimationPartChanged" , VinePrepruner )\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function VinePrepruner.registerFunctions(vehicleType)\n    SpecializationUtil.registerFunction(vehicleType, "loadPreprunerNodeFromXML" , VinePrepruner.loadPreprunerNodeFromXML)\n    SpecializationUtil.registerFunction(vehicleType, "getIsPreprunerNodeActive" , VinePrepruner.getIsPreprunerNodeActive)\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"registeroverwrittenfunctions",children:"registerOverwrittenFunctions"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"registerOverwrittenFunctions()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function VinePrepruner.registerOverwrittenFunctions(vehicleType)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "doCheckSpeedLimit" , VinePrepruner.doCheckSpeedLimit)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getCanStartVineDetection" , VinePrepruner.getCanStartVineDetection)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getIsValidVinePlaceable" , VinePrepruner.getIsValidVinePlaceable)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "handleVinePlaceable" , VinePrepruner.handleVinePlaceable)\n    SpecializationUtil.registerOverwrittenFunction(vehicleType, "getAIImplementUseVineSegment" , VinePrepruner.getAIImplementUseVineSegment)\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"writepreprunertostream",children:"writePrePrunerToStream"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"writePrePrunerToStream()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"self"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"streamId"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function VinePrepruner.writePrePrunerToStream( self , streamId)\n    local spec = self.spec_vinePrepruner\n    for i = 1 , #spec.prunerNodes do\n        local prunerNode = spec.prunerNodes[i]\n\n        local maxValue = ( 2 ^ prunerNode.numBits) - 1\n        local state = (prunerNode.transTarget - prunerNode.transMin) / (prunerNode.transMax - prunerNode.transMin)\n        streamWriteUIntN(streamId, state * maxValue, prunerNode.numBits)\n    end\n\n    streamWriteBool(streamId, spec.effectState)\nend\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},28453(e,n,r){r.d(n,{R:()=>l,x:()=>c});var i=r(96540);const t={},s=i.createContext(t);function l(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);