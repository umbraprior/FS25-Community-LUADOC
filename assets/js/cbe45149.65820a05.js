"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[50128],{28453(e,n,a){a.d(n,{R:()=>r,x:()=>s});var l=a(96540);const t={},i=l.createContext(t);function r(e){const n=l.useContext(i);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),l.createElement(i.Provider,{value:n},e.children)}},71971(e,n,a){a.r(n),a.d(n,{assets:()=>m,contentTitle:()=>s,default:()=>o,frontMatter:()=>r,metadata:()=>l,toc:()=>d});const l=JSON.parse('{"id":"script/Vehicles/VehicleMaterialManager","title":"VehicleMaterialManager","description":"VehicleMaterialManager","source":"@site/../docs/script/Vehicles/VehicleMaterialManager.md","sourceDirName":"script/Vehicles","slug":"/script/Vehicles/VehicleMaterialManager","permalink":"/FS25-Community-LUADOC/script/Vehicles/VehicleMaterialManager","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"VehicleMaterial","permalink":"/FS25-Community-LUADOC/script/Vehicles/VehicleMaterial"},"next":{"title":"VehicleMotor","permalink":"/FS25-Community-LUADOC/script/Vehicles/VehicleMotor"}}');var t=a(74848),i=a(28453);const r={},s=void 0,m={},d=[{value:"VehicleMaterialManager",id:"vehiclematerialmanager",level:2},{value:"addModMaterialTemplatesToLoad",id:"addmodmaterialtemplatestoload",level:3},{value:"getMaterialTemplateByName",id:"getmaterialtemplatebyname",level:3},{value:"getMaterialTemplateColorAndTitleByName",id:"getmaterialtemplatecolorandtitlebyname",level:3},{value:"getMaterialTemplateColorByName",id:"getmaterialtemplatecolorbyname",level:3},{value:"getMaterialTemplateFinish",id:"getmaterialtemplatefinish",level:3},{value:"getMaterialTemplateIndexByName",id:"getmaterialtemplateindexbyname",level:3},{value:"getMaterialTemplateNameByIndex",id:"getmaterialtemplatenamebyindex",level:3},{value:"initDataStructures",id:"initdatastructures",level:3},{value:"loadMapData",id:"loadmapdata",level:3},{value:"loadMaterialTemplates",id:"loadmaterialtemplates",level:3},{value:"loadMaterialTemplatesFromXML",id:"loadmaterialtemplatesfromxml",level:3},{value:"registerXMLPaths",id:"registerxmlpaths",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"vehiclematerialmanager",children:"VehicleMaterialManager"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"This class handles the material templates that are used with the vehicle shader"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parent"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"?version=script&category=91&class=893",children:"AbstractManager"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Functions"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#addmodmaterialtemplatestoload",children:"addModMaterialTemplatesToLoad"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#getmaterialtemplatebyname",children:"getMaterialTemplateByName"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#getmaterialtemplatecolorandtitlebyname",children:"getMaterialTemplateColorAndTitleByName"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#getmaterialtemplatecolorbyname",children:"getMaterialTemplateColorByName"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#getmaterialtemplatefinish",children:"getMaterialTemplateFinish"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#getmaterialtemplateindexbyname",children:"getMaterialTemplateIndexByName"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#getmaterialtemplatenamebyindex",children:"getMaterialTemplateNameByIndex"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#initdatastructures",children:"initDataStructures"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#loadmapdata",children:"loadMapData"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#loadmaterialtemplates",children:"loadMaterialTemplates"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#loadmaterialtemplatesfromxml",children:"loadMaterialTemplatesFromXML"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#registerxmlpaths",children:"registerXMLPaths"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"addmodmaterialtemplatestoload",children:"addModMaterialTemplatesToLoad"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"addModMaterialTemplatesToLoad()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"xmlFilename"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"key"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"baseDirectory"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"customEnvironment"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function VehicleMaterialManager:addModMaterialTemplatesToLoad(xmlFilename, key, baseDirectory, customEnvironment)\n    table.insert( self.modMaterialTemplatesToLoad, { xmlFilename = xmlFilename, key = key, baseDirectory = baseDirectory, customEnvironment = customEnvironment } )\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"getmaterialtemplatebyname",children:"getMaterialTemplateByName"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"getMaterialTemplateByName()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"name"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"customEnvironment"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function VehicleMaterialManager:getMaterialTemplateByName(name, customEnvironment)\n    if name ~ = nil then\n        if customEnvironment ~ = nil then\n            local template = self.materialTemplatesByName[ string.upper(customEnvironment .. "." .. name)]\n            if template ~ = nil then\n                return template\n            end\n        end\n\n        return self.materialTemplatesByName[ string.upper(name)]\n    end\n\n    return nil\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"getmaterialtemplatecolorandtitlebyname",children:"getMaterialTemplateColorAndTitleByName"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"getMaterialTemplateColorAndTitleByName()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"name"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"customEnvironment"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function VehicleMaterialManager:getMaterialTemplateColorAndTitleByName(name, customEnvironment)\n    if name ~ = nil then\n        name = string.upper(name)\n        local materialTemplate = self:getMaterialTemplateByName(name, customEnvironment)\n        if materialTemplate ~ = nil then\n            local title\n            if materialTemplate.brand ~ = nil then\n                title = materialTemplate.brand.title\n            end\n\n            if materialTemplate.titleL10N ~ = nil then\n                if title ~ = nil then\n                    title = title .. " "\n                else\n                        title = ""\n                    end\n\n                    title = title .. g_i18n:convertText(materialTemplate.titleL10N, materialTemplate.customEnvironment)\n                end\n\n                if materialTemplate.colorScale = = nil then\n                    return { 1 , 1 , 1 } , title\n                end\n\n                return table.clone(materialTemplate.colorScale), title\n            end\n        end\n\n        return nil , nil\n    end\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"getmaterialtemplatecolorbyname",children:"getMaterialTemplateColorByName"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"getMaterialTemplateColorByName()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"name"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"customEnvironment"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function VehicleMaterialManager:getMaterialTemplateColorByName(name, customEnvironment)\n    if name ~ = nil then\n        name = string.upper(name)\n        local materialTemplate = self:getMaterialTemplateByName(name, customEnvironment)\n        if materialTemplate ~ = nil and materialTemplate.colorScale ~ = nil then\n            return { materialTemplate.colorScale[ 1 ], materialTemplate.colorScale[ 2 ], materialTemplate.colorScale[ 3 ], 0 }\n        end\n    end\n\n    return nil\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"getmaterialtemplatefinish",children:"getMaterialTemplateFinish"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"getMaterialTemplateFinish()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"materialTemplateName"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function VehicleMaterialManager:getMaterialTemplateFinish(materialTemplateName)\n    local isMetallic, isMat = false , false\n    if materialTemplateName = = nil then\n        return isMetallic, isMat\n    end\n\n    local materialTemplateNameLower = string.lower(materialTemplateName)\n\n    if materialTemplateNameLower:contains( "silver" )\n        or materialTemplateNameLower:contains( "copper" )\n        or materialTemplateNameLower:contains( "gold" )\n        or materialTemplateNameLower:contains( "bronze" )\n        or materialTemplateNameLower:contains( "chrome" )\n        or materialTemplateNameLower:contains( "metallic" ) then\n        isMetallic = true\n    end\n\n    if materialTemplateNameLower:contains( "matpaint" ) then\n        isMat = true\n    end\n\n    return isMetallic, isMat\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"getmaterialtemplateindexbyname",children:"getMaterialTemplateIndexByName"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"getMaterialTemplateIndexByName()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"name"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function VehicleMaterialManager:getMaterialTemplateIndexByName(name)\n    if name ~ = nil then\n        name = string.upper(name)\n        for i, materialTemplate in ipairs( self.materialTemplates) do\n            if materialTemplate.name = = name then\n                return i\n            end\n        end\n    end\n\n    return 1\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"getmaterialtemplatenamebyindex",children:"getMaterialTemplateNameByIndex"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"getMaterialTemplateNameByIndex()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"index"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function VehicleMaterialManager:getMaterialTemplateNameByIndex(index)\n    local template = self.materialTemplates[index] or self.materialTemplates[ 1 ]\n    return template.name\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"initdatastructures",children:"initDataStructures"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"initDataStructures()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function VehicleMaterialManager:initDataStructures()\n    self.materialTemplates = { }\n    self.materialTemplatesByName = { }\n    self.modMaterialTemplatesToLoad = { }\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"loadmapdata",children:"loadMapData"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Load data on map load"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"loadMapData(integer mapXMLFile, table missionInfo, string baseDirectory)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"integer"}),(0,t.jsx)(n.th,{children:"mapXMLFile"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"table"}),(0,t.jsx)(n.td,{children:"missionInfo"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"baseDirectory"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"string"}),(0,t.jsx)(n.th,{children:"true"}),(0,t.jsx)(n.th,{children:"if loading was successful else false"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function VehicleMaterialManager:loadMapData(mapXMLFile, missionInfo, baseDirectory)\n    self:loadMaterialTemplates( VehicleMaterialManager.DEFAULT_TEMPLATES_FILENAME)\n    self:loadMaterialTemplates( VehicleMaterialManager.DEFAULT_BRAND_TEMPLATES_FILENAME)\n\n    for i = # self.modMaterialTemplatesToLoad, 1 , - 1 do\n        local modMaterialTemplate = self.modMaterialTemplatesToLoad[i]\n\n        local xmlFile = XMLFile.load( "ModFile" , modMaterialTemplate.xmlFilename, g_modDescSchema)\n        if xmlFile ~ = nil then\n            self:loadMaterialTemplatesFromXML(xmlFile, modMaterialTemplate.key, modMaterialTemplate.baseDirectory, modMaterialTemplate.customEnvironment, "calibratedPaint" )\n\n            xmlFile:delete()\n        end\n\n        table.remove( self.modMaterialTemplatesToLoad, i)\n    end\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"loadmaterialtemplates",children:"loadMaterialTemplates"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"loadMaterialTemplates()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"xmlFilename"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"baseDirectory"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"customEnvironment"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function VehicleMaterialManager:loadMaterialTemplates(xmlFilename, baseDirectory, customEnvironment)\n    local xmlFile = XMLFile.load( "templates" , xmlFilename, VehicleMaterialManager.xmlSchema)\n    if xmlFile ~ = nil then\n        self:loadMaterialTemplatesFromXML(xmlFile, "templates" , baseDirectory, customEnvironment)\n        xmlFile:delete()\n    end\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"loadmaterialtemplatesfromxml",children:"loadMaterialTemplatesFromXML"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"loadMaterialTemplatesFromXML()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"xmlFile"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"key"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"baseDirectory"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"customEnvironment"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"parentTemplateDefault"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function VehicleMaterialManager:loadMaterialTemplatesFromXML(xmlFile, key, baseDirectory, customEnvironment, parentTemplateDefault)\n    parentTemplateDefault = xmlFile:getValue(key .. "#parentTemplateDefault" , parentTemplateDefault)\n\n    xmlFile:iterate(key .. ".template" , function (index, templateKey)\n        local name = xmlFile:getValue(templateKey .. "#name" )\n        if name ~ = nil then\n            if customEnvironment ~ = nil then\n                name = string.upper(customEnvironment .. "." .. name)\n            else\n                    name = string.upper(name)\n                end\n\n                local parentName = xmlFile:getValue(templateKey .. "#parentTemplate" , parentTemplateDefault)\n                local parentTemplate\n                if parentName ~ = nil then\n                    parentTemplate = self.materialTemplatesByName[ string.upper(parentName)]\n                    if parentTemplate = = nil then\n                        Logging.xmlWarning(xmlFile, "Unable to find parent template \'%s\' for \'%s\'" , parentName, templateKey)\n                            return\n                        end\n                    end\n\n                    local materialTemplate = self.materialTemplatesByName[name]\n                    if materialTemplate = = nil then\n                        materialTemplate = { }\n                    end\n\n                    materialTemplate.name = name\n                    materialTemplate.parentTemplate = parentTemplate or materialTemplate\n\n                    materialTemplate.customEnvironment = customEnvironment\n\n                    local brandName = xmlFile:getValue(templateKey .. "#brand" )\n                    if brandName ~ = nil then\n                        materialTemplate.brand = g_brandManager:getBrandByName(brandName)\n                        if materialTemplate.brand = = nil then\n                            Logging.xmlWarning(xmlFile, "Unknown brand \'%s\' defined in material template \'%s\'" , brandName, templateKey)\n                        end\n                    end\n\n                    materialTemplate.titleL10N = xmlFile:getValue(templateKey .. "#title" )\n\n                    materialTemplate.colorScale = xmlFile:getValue(templateKey .. "#colorScale" , nil , true )\n\n                    materialTemplate.smoothnessScale = xmlFile:getValue(templateKey .. "#smoothnessScale" )\n                    materialTemplate.metalnessScale = xmlFile:getValue(templateKey .. "#metalnessScale" )\n                    materialTemplate.clearCoatSmoothness = xmlFile:getValue(templateKey .. "#clearCoatSmoothness" )\n                    materialTemplate.clearCoatIntensity = xmlFile:getValue(templateKey .. "#clearCoatIntensity" )\n                    materialTemplate.porosity = xmlFile:getValue(templateKey .. "#porosity" )\n\n                    materialTemplate.detailDiffuse = xmlFile:getValue(templateKey .. "#detailDiffuse" )\n                    if materialTemplate.detailDiffuse ~ = nil then\n                        materialTemplate.detailDiffuse = Utils.getFilename(materialTemplate.detailDiffuse, baseDirectory)\n                        if not textureFileExists(materialTemplate.detailDiffuse) then\n                            Logging.xmlWarning(xmlFile, "Unable to find detail texture \'%s\' in \'%s\'" , materialTemplate.detailDiffuse, templateKey)\n                            materialTemplate.detailDiffuse = nil\n                        end\n                    end\n                    if materialTemplate.detailDiffuse = = nil and materialTemplate.parentTemplate.detailDiffuse = = nil then\n                        Logging.xmlWarning(xmlFile, "Missing detail diffuse texture for \'%s\'" , templateKey)\n                            return\n                        end\n\n                        materialTemplate.detailNormal = xmlFile:getValue(templateKey .. "#detailNormal" )\n                        if materialTemplate.detailNormal ~ = nil then\n                            materialTemplate.detailNormal = Utils.getFilename(materialTemplate.detailNormal, baseDirectory)\n                            if not textureFileExists(materialTemplate.detailNormal) then\n                                Logging.xmlWarning(xmlFile, "Unable to find detail texture \'%s\' in \'%s\'" , materialTemplate.detailNormal, templateKey)\n                                materialTemplate.detailNormal = nil\n                            end\n                        end\n                        if materialTemplate.detailNormal = = nil and materialTemplate.parentTemplate.detailNormal = = nil then\n                            Logging.xmlWarning(xmlFile, "Missing detail normal texture for \'%s\'" , templateKey)\n                                return\n                            end\n\n                            materialTemplate.detailSpecular = xmlFile:getValue(templateKey .. "#detailSpecular" )\n                            if materialTemplate.detailSpecular ~ = nil then\n                                materialTemplate.detailSpecular = Utils.getFilename(materialTemplate.detailSpecular, baseDirectory)\n                                if not textureFileExists(materialTemplate.detailSpecular) then\n                                    Logging.xmlWarning(xmlFile, "Unable to find detail texture \'%s\' in \'%s\'" , materialTemplate.detailSpecular, templateKey)\n                                    materialTemplate.detailSpecular = nil\n                                end\n                            end\n                            if materialTemplate.detailSpecular = = nil and materialTemplate.parentTemplate.detailSpecular = = nil then\n                                Logging.xmlWarning(xmlFile, "Missing detail specular texture for \'%s\'" , templateKey)\n                                    return\n                                end\n\n                                table.insert( self.materialTemplates, materialTemplate)\n                                self.materialTemplatesByName[name] = materialTemplate\n                            else\n                                    Logging.xmlWarning(xmlFile, "Missing name attribute for \'%s\'" , templateKey)\n                                    end\n                                end )\n                            end\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"registerxmlpaths",children:"registerXMLPaths"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"registerXMLPaths()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"schema"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"basePath"})]})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function VehicleMaterialManager.registerXMLPaths(schema, basePath)\n    schema:register(XMLValueType.STRING, basePath .. "#id" , "File Identifier" )\n    schema:register(XMLValueType.STRING, basePath .. "#name" , "File Name" )\n\n    schema:register(XMLValueType.STRING, basePath .. "#parentTemplateDefault" , "Name of default parent template" )\n    schema:register(XMLValueType.STRING, basePath .. "#parentTemplateFilename" , "Path to parent template file" )\n\n    schema:register(XMLValueType.STRING, basePath .. ".template(?)#name" , "Name of template" )\n    schema:register(XMLValueType.STRING, basePath .. ".template(?)#title" , "Name of the color to display in the shop" )\n    schema:register(XMLValueType.STRING, basePath .. ".template(?)#description" , "Descrpition text of the template" )\n    schema:register(XMLValueType.INT, basePath .. ".template(?)#usage" , "Usage of the color" )\n    schema:register(XMLValueType.STRING, basePath .. ".template(?)#parentTemplate" , "Name of parent template" , "templates#parentTemplateDefault" )\n\n    schema:register(XMLValueType.STRING, basePath .. ".template(?)#brand" , "Brand identifier" )\n\n    schema:register(XMLValueType.VECTOR_ 3 , basePath .. ".template(?)#colorScale" , "Color values(sRGB)" )\n\n    schema:register(XMLValueType.FLOAT, basePath .. ".template(?)#smoothnessScale" )\n    schema:register(XMLValueType.FLOAT, basePath .. ".template(?)#metalnessScale" )\n    schema:register(XMLValueType.FLOAT, basePath .. ".template(?)#clearCoatSmoothness" )\n    schema:register(XMLValueType.FLOAT, basePath .. ".template(?)#clearCoatIntensity" )\n    schema:register(XMLValueType.FLOAT, basePath .. ".template(?)#porosity" )\n\n    schema:register(XMLValueType.STRING, basePath .. ".template(?)#category" , "Category name(Used by DCC Tool)" )\n    schema:register(XMLValueType.STRING, basePath .. ".template(?)#iconFilename" , "Icon filename(Used by DCC Tool)" )\n\n    schema:register(XMLValueType.STRING, basePath .. ".template(?)#detailDiffuse" , "Detail diffuse texture" )\n    schema:register(XMLValueType.STRING, basePath .. ".template(?)#detailNormal" , "Detail normal texture" )\n    schema:register(XMLValueType.STRING, basePath .. ".template(?)#detailSpecular" , "Detail specular texture" )\n\n    schema:register(XMLValueType.STRING, basePath .. ".template(?).colorScan#filename" , "Path to scan reference" )\n    schema:register(XMLValueType.BOOL, basePath .. ".template(?).colorScan#channelR" , "Calibrate red channel" , true )\n    schema:register(XMLValueType.BOOL, basePath .. ".template(?).colorScan#channelG" , "Calibrate green channel" , true )\n    schema:register(XMLValueType.BOOL, basePath .. ".template(?).colorScan#channelB" , "Calibrate blue channel" , true )\n    schema:register(XMLValueType.BOOL, basePath .. ".template(?).colorScan#channelSmoothness" , "Calibrate smoothness" , true )\n    schema:register(XMLValueType.BOOL, basePath .. ".template(?).colorScan#channelMetalness" , "Calibrate metalness" , true )\nend\n\n'})})]})}function o(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);