"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[85191],{28453(e,n,t){t.d(n,{R:()=>i,x:()=>r});var l=t(96540);const s={},a=l.createContext(s);function i(e){const n=l.useContext(a);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),l.createElement(a.Provider,{value:n},e.children)}},93220(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>o});const l=JSON.parse('{"id":"script/Specializations/PlaceablePlacement","title":"PlaceablePlacement","description":"PlaceablePlacement","source":"@site/../docs/script/Specializations/PlaceablePlacement.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/PlaceablePlacement","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceablePlacement","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"PlaceablePalletBuyingStation","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceablePalletBuyingStation"},"next":{"title":"PlaceablePointOfInterest","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceablePointOfInterest"}}');var s=t(74848),a=t(28453);const i={},r=void 0,c={},o=[{value:"PlaceablePlacement",id:"placeableplacement",level:2},{value:"getHasOverlap",id:"gethasoverlap",level:3},{value:"getHasOverlapWithPlaces",id:"gethasoverlapwithplaces",level:3},{value:"getHasOverlapWithZones",id:"gethasoverlapwithzones",level:3},{value:"getIsAreaOwnedByFarm",id:"getisareaownedbyfarm",level:3},{value:"getPlacementPosition",id:"getplacementposition",level:3},{value:"getPlacementRotation",id:"getplacementrotation",level:3},{value:"getPositionSnapOffset",id:"getpositionsnapoffset",level:3},{value:"getPositionSnapSize",id:"getpositionsnapsize",level:3},{value:"getRotationSnapAngle",id:"getrotationsnapangle",level:3},{value:"getTestParallelogramAtWorldPosition",id:"gettestparallelogramatworldposition",level:3},{value:"loadTestArea",id:"loadtestarea",level:3},{value:"onDelete",id:"ondelete",level:3},{value:"onLoad",id:"onload",level:3},{value:"onPreFinalizePlacement",id:"onprefinalizeplacement",level:3},{value:"playDestroySound",id:"playdestroysound",level:3},{value:"playPlaceSound",id:"playplacesound",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3},{value:"registerFunctions",id:"registerfunctions",level:3},{value:"registerXMLPaths",id:"registerxmlpaths",level:3},{value:"startPlacementCheck",id:"startplacementcheck",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"placeableplacement",children:"PlaceablePlacement"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Specialization for placeables"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Functions"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#gethasoverlap",children:"getHasOverlap"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#gethasoverlapwithplaces",children:"getHasOverlapWithPlaces"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#gethasoverlapwithzones",children:"getHasOverlapWithZones"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getisareaownedbyfarm",children:"getIsAreaOwnedByFarm"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getplacementposition",children:"getPlacementPosition"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getplacementrotation",children:"getPlacementRotation"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getpositionsnapoffset",children:"getPositionSnapOffset"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getpositionsnapsize",children:"getPositionSnapSize"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getrotationsnapangle",children:"getRotationSnapAngle"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#gettestparallelogramatworldposition",children:"getTestParallelogramAtWorldPosition"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#loadtestarea",children:"loadTestArea"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#ondelete",children:"onDelete"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onprefinalizeplacement",children:"onPreFinalizePlacement"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#playdestroysound",children:"playDestroySound"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#playplacesound",children:"playPlaceSound"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registerxmlpaths",children:"registerXMLPaths"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#startplacementcheck",children:"startPlacementCheck"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"gethasoverlap",children:"getHasOverlap"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getHasOverlap()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"x"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"y"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"z"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"rotY"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"checkFunc"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceablePlacement:getHasOverlap(x, y, z, rotY, checkFunc)\n    local spec = self.spec_placement\n\n    local placementOverlapMask = self:getPlacementOverlapMask()\n\n    local callbackTarget = { hasOverlap = false }\n    callbackTarget.overlapCallback = function (target, hitObjectId, hitX, hitY, hitZ, distance)\n        if checkFunc ~ = nil then\n            if checkFunc(hitObjectId) then\n                callbackTarget.hasOverlap = true\n                callbackTarget.node = hitObjectId\n                return false\n            end\n        else\n                if self:isValidOverlapNode(hitObjectId) then\n                    callbackTarget.hasOverlap = true\n                    callbackTarget.node = hitObjectId\n                    return false\n                end\n            end\n\n            return true\n        end\n\n        for _, area in ipairs(spec.testAreas) do\n            local size = area.size\n            local center = area.center\n\n            local dirX, dirZ = MathUtil.getDirectionFromYRotation(rotY)\n            local normX, _, normZ = MathUtil.crossProduct( 0 , 1 , 0 , dirX, 0 , dirZ)\n\n            local posX = x + dirX * center.z + normX * center.x\n            local posY = y + center.y\n            local posZ = z + dirZ * center.z + normZ * center.x\n\n            local sizeXHalf, sizeZHalf = size.x * 0.5 , size.z * 0.5\n            local frontLeftX, frontLeftZ = posX + dirX * sizeZHalf - normX * sizeXHalf, posZ + dirZ * sizeZHalf - normZ * sizeXHalf\n            local frontRightX, frontRightZ = posX + dirX * sizeZHalf + normX * sizeXHalf, posZ + dirZ * sizeZHalf + normZ * sizeXHalf\n            local backLeftX, backLeftZ = posX - dirX * sizeZHalf - normX * sizeXHalf, posZ - dirZ * sizeZHalf - normZ * sizeXHalf\n            local backRightX, backRightZ = posX - dirX * sizeZHalf + normX * sizeXHalf, posZ - dirZ * sizeZHalf + normZ * sizeXHalf\n\n            if self:getIsAreaBlocked(frontLeftX, frontLeftZ, frontRightX, frontRightZ, backLeftX, backLeftZ) then\n                return true , nil\n            end\n\n            local frontLeftY = getTerrainHeightAtWorldPos(g_terrainNode, frontLeftX, 0 , frontLeftZ)\n            local frontRightY = getTerrainHeightAtWorldPos(g_terrainNode, frontRightX, 0 , frontRightZ)\n            local backLeftY = getTerrainHeightAtWorldPos(g_terrainNode, backLeftX, 0 , backLeftZ)\n            local backRightY = getTerrainHeightAtWorldPos(g_terrainNode, backRightX, 0 , backRightZ)\n            local centerY = getTerrainHeightAtWorldPos(g_terrainNode, posX, 0 , posZ)\n\n            local terrainBasedCenterY = math.min(frontLeftY, frontRightY, backLeftY, backRightY, centerY) + size.y * 0.5 - 0.5 -- we want to check 0.5m below terrain\n            posY = math.max(terrainBasedCenterY, posY)\n\n            local extendX, extendY, extendZ = size.x * 0.5 , size.y * 0.5 , size.z * 0.5\n            overlapBox(posX, posY, posZ, 0 , rotY + area.rotYOffset, 0 , extendX, extendY, extendZ, "overlapCallback" , callbackTarget, placementOverlapMask, true , true , true , true )\n\n            --#debug local boxColor = callbackTarget.hasOverlap and Color.PRESETS.RED or Color.PRESETS.GREEN\n            --#debug DebugBox.renderAtPosition(posX, posY, posZ, 0, 1, 0, -math.sin(rotY + area.rotYOffset), 0, -math.cos(rotY + area.rotYOffset), size.x, size.y, size.z, boxColor, false)\n\n            --#debug DebugGizmo.renderAtPosition(frontLeftX, frontLeftY, frontLeftZ, dirX, 0, dirZ, 0, 1, 0, "frontLeft", false, 5, 0.02)\n            --#debug DebugGizmo.renderAtPosition(frontRightX, frontRightY, frontRightZ, dirX, 0, dirZ, 0, 1, 0, "frontRightX", false, 2, 0.02)\n            --#debug DebugGizmo.renderAtPosition(backLeftX, backLeftY, backLeftZ, dirX, 0, dirZ, 0, 1, 0, "backLeftX", false, 2, 0.02)\n            --#debug DebugGizmo.renderAtPosition(backRightX, backRightY, backRightZ, dirX, 0, dirZ, 0, 1, 0, "backRightX", false, 2, 0.02)\n\n            if callbackTarget.hasOverlap then\n                return true , callbackTarget.node\n            end\n\n            if self:getHasOverlapWithDensityHeight(area, x, z, rotY) then\n                return true , nil\n            end\n        end\n\n        return false , nil\n    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"gethasoverlapwithplaces",children:"getHasOverlapWithPlaces"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getHasOverlapWithPlaces()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"places"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"x"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"y"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"z"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"rotY"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceablePlacement:getHasOverlapWithPlaces(places, x, y, z, rotY)\n    local spec = self.spec_placement\n    for _, area in ipairs(spec.testAreas) do\n        local x1, z1, x2, z2, x3, z3, x4, z4 = self:getTestParallelogramAtWorldPosition(area, x, z, rotY)\n\n        if PlacementUtil.isInsidePlacementPlaces(places, x1, y, z1) then\n            return true\n        end\n        if PlacementUtil.isInsidePlacementPlaces(places, x2, y, z2) then\n            return true\n        end\n        if PlacementUtil.isInsidePlacementPlaces(places, x3, y, z3) then\n            return true\n        end\n        if PlacementUtil.isInsidePlacementPlaces(places, x4, y, z4) then\n            return true\n        end\n    end\n\n    return false\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"gethasoverlapwithzones",children:"getHasOverlapWithZones"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getHasOverlapWithZones()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"zones"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"x"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"y"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"z"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"rotY"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceablePlacement:getHasOverlapWithZones(zones, x, y, z, rotY)\n    local spec = self.spec_placement\n\n    local doWaterCheck = not self:getCanBePlacedInWater()\n\n    for _, area in ipairs(spec.testAreas) do\n        local x1, z1, x2, z2, x3, z3, x4, z4 = self:getTestParallelogramAtWorldPosition(area, x, z, rotY)\n\n        --#debug DebugGizmo.renderAtPosition(x1, y, z1, 0, 0, 1, 0, 1, 0, "P1", false, 2)\n        --#debug DebugGizmo.renderAtPosition(x2, y, z2, 0, 0, 1, 0, 1, 0, "P2", false, 2)\n        --#debug DebugGizmo.renderAtPosition(x3, y, z3, 0, 0, 1, 0, 1, 0, "P3", false, 2)\n        --#debug DebugGizmo.renderAtPosition(x4, y, z4, 0, 0, 1, 0, 1, 0, "P4", false, 2)\n\n        if PlacementUtil.isInsideRestrictedZone(zones, x1, y, z1, doWaterCheck) then\n            return true\n        end\n        if PlacementUtil.isInsideRestrictedZone(zones, x2, y, z2, doWaterCheck) then\n            return true\n        end\n        if PlacementUtil.isInsideRestrictedZone(zones, x3, y, z3, doWaterCheck) then\n            return true\n        end\n        if PlacementUtil.isInsideRestrictedZone(zones, x4, y, z4, doWaterCheck) then\n            return true\n        end\n\n        if not g_currentMission.placeableSystem:getIsInsideBoundary(x1, z1) then\n            return true\n        end\n\n        if not g_currentMission.placeableSystem:getIsInsideBoundary(x2, z2) then\n            return true\n        end\n\n        if not g_currentMission.placeableSystem:getIsInsideBoundary(x3, z3) then\n            return true\n        end\n\n        if not g_currentMission.placeableSystem:getIsInsideBoundary(x4, z4) then\n            return true\n        end\n    end\n\n    return false\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"getisareaownedbyfarm",children:"getIsAreaOwnedByFarm"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getIsAreaOwnedByFarm()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"sx"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"sz"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"wx"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"wz"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"hx"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"hz"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"farmId"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceablePlacement:getIsAreaOwnedByFarm(sx, sz, wx, wz, hx, hz, farmId)\n    local dx1, dz1 = wx - sx, wz - sz\n    local dx2, dz2 = hx - sx, hz - sz\n\n    -- DebugLine.renderBetweenPositions(sx, nil, sz, wx, nil, wz, Color.PRESETS.RED)\n    -- DebugLine.renderBetweenPositions(sx, nil, sz, hx, nil, hz, Color.PRESETS.GREEN)\n    -- DebugLine.renderBetweenPositions(hx, nil, hz, hx + dx1, nil, hz + dz1, Color.PRESETS.BLUE)\n    -- DebugLine.renderBetweenPositions(wx, nil, wz, wx + dx2, nil, wz + dz2, Color.PRESETS.YELLOW)\n\n    return g_farmlandManager:getIsOwnedByFarmAlongLine(farmId, sx, sz, wx, wz) and\n    g_farmlandManager:getIsOwnedByFarmAlongLine(farmId, sx, sz, hx, hz) and\n    g_farmlandManager:getIsOwnedByFarmAlongLine(farmId, hx, hz, hx + dx1, hz + dz1) and\n    g_farmlandManager:getIsOwnedByFarmAlongLine(farmId, wx, wz, wx + dx2, wz + dz2)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getplacementposition",children:"getPlacementPosition"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getPlacementPosition()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"x"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"y"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"z"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceablePlacement:getPlacementPosition(x, y, z)\n    local spec = self.spec_placement\n    local snapSize = spec.positionSnapSize\n    if snapSize ~ = 0 then\n        snapSize = 1 / snapSize\n\n        x = math.floor(x * snapSize) / snapSize + spec.positionSnapOffset\n        z = math.floor(z * snapSize) / snapSize + spec.positionSnapOffset\n    end\n\n    return x, y, z\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getplacementrotation",children:"getPlacementRotation"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getPlacementRotation()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"x"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"y"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"z"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceablePlacement:getPlacementRotation(x, y, z)\n    local spec = self.spec_placement\n    if spec.rotationSnapAngle ~ = 0 then\n        local degAngle = MathUtil.snapValue( math.deg(y), math.deg(spec.rotationSnapAngle))\n        y = math.rad(degAngle)\n    end\n\n    return x, y, z\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getpositionsnapoffset",children:"getPositionSnapOffset"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getPositionSnapOffset()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceablePlacement:getPositionSnapOffset()\n    return self.spec_placement.positionSnapOffset\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getpositionsnapsize",children:"getPositionSnapSize"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getPositionSnapSize()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceablePlacement:getPositionSnapSize()\n    return self.spec_placement.positionSnapSize\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getrotationsnapangle",children:"getRotationSnapAngle"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getRotationSnapAngle()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceablePlacement:getRotationSnapAngle()\n    return self.spec_placement.rotationSnapAngle\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"gettestparallelogramatworldposition",children:"getTestParallelogramAtWorldPosition"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getTestParallelogramAtWorldPosition()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"testArea"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"x"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"z"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"rotY"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceablePlacement:getTestParallelogramAtWorldPosition(testArea, x, z, rotY)\n    local dirX, dirZ = MathUtil.getDirectionFromYRotation(rotY)\n    local normX, _, normZ = MathUtil.crossProduct( 0 , 1 , 0 , dirX, 0 , dirZ)\n\n    local centerXOffset = testArea.center.x\n    local centerZOffset = testArea.center.z\n    local centerX = x + dirX * centerZOffset + normX * centerXOffset\n    local centerZ = z + dirZ * centerZOffset + normZ * centerXOffset\n\n    dirX, dirZ = MathUtil.getDirectionFromYRotation(rotY + testArea.rotYOffset)\n    normX, _, normZ = MathUtil.crossProduct( 0 , 1 , 0 , dirX, 0 , dirZ)\n\n    local startOffsetX = testArea.size.x * 0.5\n    local startOffsetZ = testArea.size.z * 0.5\n    local startX = centerX - dirX * startOffsetZ - normX * startOffsetX\n    local startZ = centerZ - dirZ * startOffsetZ - normZ * startOffsetX\n\n    local widthOffset = testArea.size.x\n    local widthX = startX + normX * widthOffset\n    local widthZ = startZ + normZ * widthOffset\n\n    local heightOffset = testArea.size.z\n    local heightX = startX + dirX * heightOffset\n    local heightZ = startZ + dirZ * heightOffset\n\n    local heightX2 = widthX + dirX * heightOffset\n    local heightZ2 = widthZ + dirZ * heightOffset\n\n    return startX, startZ, widthX, widthZ, heightX, heightZ, heightX2, heightZ2\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"loadtestarea",children:"loadTestArea"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"loadTestArea()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"xmlFile"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"key"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"area"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceablePlacement:loadTestArea(xmlFile, key, area)\n    local startNode = xmlFile:getValue(key .. "#startNode" , nil , self.components, self.i3dMappings)\n    local endNode = xmlFile:getValue(key .. "#endNode" , nil , self.components, self.i3dMappings)\n\n    if startNode = = nil then\n        Logging.xmlWarning(xmlFile, "Missing test area start node for \'%s\'" , key)\n            return false\n        end\n\n        if endNode = = nil then\n            Logging.xmlWarning(xmlFile, "Missing test area end node for \'%s\'" , key)\n            return false\n        end\n\n        if getParent(endNode) ~ = startNode then\n            Logging.xmlWarning(xmlFile, "Test area end node is not a direct child of startNode for \'%s\'" , key)\n            return false\n        end\n\n        area.startNode = startNode\n        area.endNode = endNode\n\n        local ySafetyOffset = 0.05 -- shift all test areas down by 5cm to avoid stacking of placables with testArea start at y = 0\n        local offsetX, offsetY, offsetZ = localToLocal(endNode, startNode, 0 , - ySafetyOffset, 0 )\n        local centerX, centerY, centerZ = localToLocal(startNode, self.rootNode, offsetX * 0.5 , offsetY * 0.5 , offsetZ * 0.5 )\n        local sizeX, sizeY, sizeZ = math.abs(offsetX), math.abs(offsetY + ySafetyOffset), math.abs(offsetZ)\n\n        if offsetY < 0.01 then\n            Logging.xmlDevWarning(xmlFile, "TestArea \'%s \'has no height(endNode has same y as startNode)" , key)\n        end\n\n        area.size = { }\n        area.size.x = math.abs(sizeX)\n        area.size.y = math.abs(sizeY)\n        area.size.z = math.abs(sizeZ)\n\n        area.center = { }\n        area.center.x = centerX\n        area.center.y = centerY\n        area.center.z = centerZ\n\n        local dirX, _, dirZ = localDirectionToLocal(startNode, self.rootNode, 0 , 0 , 1 )\n        local rotY = MathUtil.getYRotationFromDirection(dirX, dirZ)\n        area.rotYOffset = rotY\n\n        return true\n    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"ondelete",children:"onDelete"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onDelete()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceablePlacement:onDelete()\n    if self.isClient then\n        local spec = self.spec_placement\n        g_soundManager:deleteSamples(spec.samples)\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Called on loading"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onLoad(table savegame)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"savegame"}),(0,s.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceablePlacement:onLoad(savegame)\n    local spec = self.spec_placement\n    local xmlFile = self.xmlFile\n\n    spec.testAreas = { }\n    xmlFile:iterate( "placeable.placement.testAreas.testArea" , function (_, key)\n        local testArea = { }\n        if self:loadTestArea(xmlFile, key, testArea) then\n            table.insert(spec.testAreas, testArea)\n        end\n    end )\n\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "placeable.placement#sizeX" ) -- FS19 to FS22\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "placeable.placement#sizeZ" ) -- FS19 to FS22\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "placeable.placement#sizeOffsetX" ) -- FS19 to FS22\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "placeable.placement#sizeOffsetZ" ) -- FS19 to FS22\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "placeable.placement#testSizeX" , "placeable.placement.testAreas.testArea" ) -- FS19 to FS22\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "placeable.placement#testSizeZ" , "placeable.placement.testAreas.testArea" ) -- FS19 to FS22\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "placeable.placement#testSizeOffsetX" , "placeable.placement.testAreas.testArea" ) -- FS19 to FS22\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "placeable.placement#testSizeOffsetZ" , "placeable.placement.testAreas.testArea" ) -- FS19 to FS22\n\n    spec.useRandomYRotation = xmlFile:getValue( "placeable.placement#useRandomYRotation" , spec.useRandomYRotation)\n    spec.useManualYRotation = xmlFile:getValue( "placeable.placement#useManualYRotation" , spec.useManualYRotation)\n    spec.positionSnapSize = math.abs(xmlFile:getValue( "placeable.placement#placementPositionSnapSize" , 0.0 ))\n    spec.positionSnapOffset = math.abs(xmlFile:getValue( "placeable.placement#placementPositionSnapOffset" , 0.0 ))\n    spec.rotationSnapAngle = math.abs(xmlFile:getValue( "placeable.placement#placementRotationSnapAngle" , 0.0 ))\n\n    spec.alignToWorldY = xmlFile:getValue( "placeable.placement#alignToWorldY" , true )\n    if not spec.alignToWorldY then\n        spec.pos1Node = xmlFile:getValue( "placeable.placement#pos1Node" , nil , self.components, self.i3dMappings)\n        spec.pos2Node = xmlFile:getValue( "placeable.placement#pos2Node" , nil , self.components, self.i3dMappings)\n        spec.pos3Node = xmlFile:getValue( "placeable.placement#pos3Node" , nil , self.components, self.i3dMappings)\n        if spec.pos1Node = = nil or spec.pos2Node = = nil or spec.pos3Node = = nil then\n            spec.alignToWorldY = true\n            Logging.xmlWarning(xmlFile, "pos1Node, pos2Node and pos3Node has to be set when alignToWorldY is false!" )\n        end\n    end\n\n    if self.isClient and Platform.hasContruction then\n        spec.samples = { }\n        spec.samples.place = g_soundManager:loadSample2DFromXML(xmlFile.handle, "placeable.placement.sounds" , "place" , self.baseDirectory, 1 , AudioGroup.GUI)\n        spec.samples.placeLayered = g_soundManager:loadSample2DFromXML(xmlFile.handle, "placeable.placement.sounds" , "placeLayered" , self.baseDirectory, 1 , AudioGroup.GUI)\n        spec.samples.destroy = g_soundManager:loadSample2DFromXML(xmlFile.handle, "placeable.placement.sounds" , "destroy" , self.baseDirectory, 1 , AudioGroup.GUI)\n    end\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"onprefinalizeplacement",children:"onPreFinalizePlacement"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onPreFinalizePlacement()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceablePlacement:onPreFinalizePlacement()\n    local spec = self.spec_placement\n    -- only(re-)align if the property is set and we're on the server, clients will get the correct transform in sync.\n        -- This also avoids wrong positioning of placeables on modified terrain.\n        if not spec.alignToWorldY and self.isServer then\n            local x1,y1,z1 = getWorldTranslation( self.rootNode)\n            y1 = getTerrainHeightAtWorldPos(g_terrainNode, x1,y1,z1)\n            setTranslation( self.rootNode, x1,y1,z1)\n            local x2,y2,z2 = getWorldTranslation(spec.pos1Node)\n            y2 = getTerrainHeightAtWorldPos(g_terrainNode, x2,y2,z2)\n            local x3,y3,z3 = getWorldTranslation(spec.pos2Node)\n            y3 = getTerrainHeightAtWorldPos(g_terrainNode, x3,y3,z3)\n            local x4,y4,z4 = getWorldTranslation(spec.pos3Node)\n            y4 = getTerrainHeightAtWorldPos(g_terrainNode, x4,y4,z4)\n            local dirX = x2 - x1\n            local dirY = y2 - y1\n            local dirZ = z2 - z1\n            local dir2X = x3 - x4\n            local dir2Y = y3 - y4\n            local dir2Z = z3 - z4\n            local upX,upY,upZ = MathUtil.crossProduct(dir2X, dir2Y, dir2Z, dirX, dirY, dirZ)\n            setDirection( self.rootNode, dirX, dirY, dirZ, upX,upY,upZ)\n        end\n    end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"playdestroysound",children:"playDestroySound"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"playDestroySound()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"onlyIfNotPlaying"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceablePlacement:playDestroySound(onlyIfNotPlaying)\n    if self.isClient then\n        local spec = self.spec_placement\n\n        if not onlyIfNotPlaying or not g_soundManager:getIsSamplePlaying(spec.samples.destroy) then\n            g_soundManager:playSample(spec.samples.destroy)\n        end\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"playplacesound",children:"playPlaceSound"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"playPlaceSound()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceablePlacement:playPlaceSound()\n    if self.isClient then\n        local spec = self.spec_placement\n        g_soundManager:playSample(spec.samples.place)\n        g_soundManager:playSample(spec.samples.placeLayered)\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Checks if all prerequisite specializations are loaded"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"prerequisitesPresent(table specializations)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"specializations"}),(0,s.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"hasPrerequisite"}),(0,s.jsx)(n.th,{children:"true if all prerequisite specializations are loaded"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceablePlacement.prerequisitesPresent(specializations)\n    return true\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceablePlacement.registerEventListeners(placeableType)\n    SpecializationUtil.registerEventListener(placeableType, "onLoad" , PlaceablePlacement )\n    SpecializationUtil.registerEventListener(placeableType, "onDelete" , PlaceablePlacement )\n    SpecializationUtil.registerEventListener(placeableType, "onPreFinalizePlacement" , PlaceablePlacement )\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceablePlacement.registerFunctions(placeableType)\n    SpecializationUtil.registerFunction(placeableType, "loadTestArea" , PlaceablePlacement.loadTestArea)\n    SpecializationUtil.registerFunction(placeableType, "getIsAreaOwnedByFarm" , PlaceablePlacement.getIsAreaOwnedByFarm)\n    SpecializationUtil.registerFunction(placeableType, "getIsOnOwnedFarmland" , PlaceablePlacement.getIsOnOwnedFarmland)\n    SpecializationUtil.registerFunction(placeableType, "startPlacementCheck" , PlaceablePlacement.startPlacementCheck)\n    SpecializationUtil.registerFunction(placeableType, "getPlacementRotation" , PlaceablePlacement.getPlacementRotation)\n    SpecializationUtil.registerFunction(placeableType, "getPlacementPosition" , PlaceablePlacement.getPlacementPosition)\n    SpecializationUtil.registerFunction(placeableType, "getPositionSnapSize" , PlaceablePlacement.getPositionSnapSize)\n    SpecializationUtil.registerFunction(placeableType, "getPositionSnapOffset" , PlaceablePlacement.getPositionSnapOffset)\n    SpecializationUtil.registerFunction(placeableType, "getRotationSnapAngle" , PlaceablePlacement.getRotationSnapAngle)\n    SpecializationUtil.registerFunction(placeableType, "getPlacementOverlapMask" , PlaceablePlacement.getPlacementOverlapMask)\n    SpecializationUtil.registerFunction(placeableType, "isValidOverlapNode" , PlaceablePlacement.isValidOverlapNode)\n    SpecializationUtil.registerFunction(placeableType, "getHasOverlap" , PlaceablePlacement.getHasOverlap)\n    SpecializationUtil.registerFunction(placeableType, "getHasOverlapWithPlaces" , PlaceablePlacement.getHasOverlapWithPlaces)\n    SpecializationUtil.registerFunction(placeableType, "getCanBePlacedInWater" , PlaceablePlacement.getCanBePlacedInWater)\n    SpecializationUtil.registerFunction(placeableType, "getHasOverlapWithZones" , PlaceablePlacement.getHasOverlapWithZones)\n    SpecializationUtil.registerFunction(placeableType, "getTestParallelogramAtWorldPosition" , PlaceablePlacement.getTestParallelogramAtWorldPosition)\n    SpecializationUtil.registerFunction(placeableType, "playPlaceSound" , PlaceablePlacement.playPlaceSound)\n    SpecializationUtil.registerFunction(placeableType, "playDestroySound" , PlaceablePlacement.playDestroySound)\n    SpecializationUtil.registerFunction(placeableType, "getIsAreaBlocked" , PlaceablePlacement.getIsAreaBlocked)\n    SpecializationUtil.registerFunction(placeableType, "getHasOverlapWithDensityHeight" , PlaceablePlacement.getHasOverlapWithDensityHeight)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registerxmlpaths",children:"registerXMLPaths"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerXMLPaths()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"schema"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"basePath"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceablePlacement.registerXMLPaths(schema, basePath)\n    schema:setXMLSpecializationType( "Placement" )\n    schema:register(XMLValueType.NODE_INDEX, basePath .. ".placement#pos1Node" , "Position node 1(Required if alignToWorldY is false to calculate the terrain alignment)" )\n        schema:register(XMLValueType.NODE_INDEX, basePath .. ".placement#pos2Node" , "Position node 2(Required if alignToWorldY is false to calculate the terrain alignment)" )\n            schema:register(XMLValueType.NODE_INDEX, basePath .. ".placement#pos3Node" , "Position node 3(Required if alignToWorldY is false to calculate the terrain alignment)" )\n\n                schema:register(XMLValueType.NODE_INDEX, basePath .. ".placement.testAreas.testArea(?)#startNode" , "Start node of box for testing overlap" )\n                    schema:register(XMLValueType.NODE_INDEX, basePath .. ".placement.testAreas.testArea(?)#endNode" , "End node of box for testing overlap" )\n\n                        schema:register(XMLValueType.BOOL, basePath .. ".placement#useRandomYRotation" , "Use random Y rotation" , false )\n                        schema:register(XMLValueType.BOOL, basePath .. ".placement#useManualYRotation" , "Use manual Y rotation" , false )\n                        schema:register(XMLValueType.BOOL, basePath .. ".placement#alignToWorldY" , "Placeable is aligned to world Y instead of terrain" , true )\n                        schema:register(XMLValueType.FLOAT, basePath .. ".placement#placementPositionSnapSize" , "Position snap size" , 0 )\n                        schema:register(XMLValueType.FLOAT, basePath .. ".placement#placementPositionSnapOffset" , "Position snap offset" , 0 )\n                        schema:register(XMLValueType.ANGLE, basePath .. ".placement#placementRotationSnapAngle" , "Rotation snap angle" , 0 )\n\n                        SoundManager.registerSampleXMLPaths(schema, basePath .. ".placement.sounds" , "place" )\n                        SoundManager.registerSampleXMLPaths(schema, basePath .. ".placement.sounds" , "placeLayered" )\n                        SoundManager.registerSampleXMLPaths(schema, basePath .. ".placement.sounds" , "destroy" )\n\n                        schema:setXMLSpecializationType()\n                    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"startplacementcheck",children:"startPlacementCheck"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"startPlacementCheck()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"x"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"y"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"z"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"rotY"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceablePlacement:startPlacementCheck(x, y, z, rotY)\nend\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);