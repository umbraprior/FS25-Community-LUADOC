"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[19020],{28453(e,n,l){l.d(n,{R:()=>s,x:()=>a});var t=l(96540);const r={},i=t.createContext(r);function s(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(i.Provider,{value:n},e.children)}},90818(e,n,l){l.r(n),l.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"script/GUI/GuiProfile","title":"GuiProfile","description":"GuiProfile","source":"@site/../docs/script/GUI/GuiProfile.md","sourceDirName":"script/GUI","slug":"/script/GUI/GuiProfile","permalink":"/FS25-Community-LUADOC/script/GUI/GuiProfile","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"GuiOverlay","permalink":"/FS25-Community-LUADOC/script/GUI/GuiOverlay"},"next":{"title":"GuiSoundPlayer","permalink":"/FS25-Community-LUADOC/script/GUI/GuiSoundPlayer"}}');var r=l(74848),i=l(28453);const s={},a=void 0,d={},o=[{value:"GuiProfile",id:"guiprofile",level:2},{value:"getBool",id:"getbool",level:3},{value:"getNumber",id:"getnumber",level:3},{value:"getValue",id:"getvalue",level:3},{value:"loadFromXML",id:"loadfromxml",level:3},{value:"new",id:"new",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"guiprofile",children:"GuiProfile"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"GUI element display profile.\nHolds GuiElement property data for re-use similar to a HTML/CSS definition."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Functions"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getbool",children:"getBool"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getnumber",children:"getNumber"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#getvalue",children:"getValue"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#loadfromxml",children:"loadFromXML"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#new",children:"new"})}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"getbool",children:"getBool"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Get a boolean value from this profile (and its ancestors) by name."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getBool(string name, boolean default)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"string"}),(0,r.jsx)(n.th,{children:"name"}),(0,r.jsx)(n.th,{children:"Name of attribute value to retrieve"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:"default"}),(0,r.jsx)(n.td,{children:"Default value to use if the attribute is not defined."})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"boolean"}),(0,r.jsx)(n.th,{children:"bool"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function GuiProfile:getBool(name, default)\n    local value = self:getValue(name)\n    local ret = default\n    if value ~ = nil and value ~ = "nil" then\n        --#debug Assert.assert(string.lower(value) = = "true" or string.lower(value) = = "false", "Invalid boolean", "Value %q for key %q is not a valid boolean string", value, name)\n            ret = ( string.lower(value) = = "true" )\n        end\n\n        return ret\n    end\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"getnumber",children:"getNumber"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Get a number value from this profile (and its ancestors) by name."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getNumber(string name, float default)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"string"}),(0,r.jsx)(n.th,{children:"name"}),(0,r.jsx)(n.th,{children:"Name of attribute value to retrieve"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"float"}),(0,r.jsx)(n.td,{children:"default"}),(0,r.jsx)(n.td,{children:"Default value to use if the attribute is not defined."})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"float"}),(0,r.jsx)(n.th,{children:"number"}),(0,r.jsx)(n.th,{children:"value of attribute if set, given 'default' otherwise"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function GuiProfile:getNumber(name, default)\n    local value = self:getValue(name)\n    local ret = default\n    if value ~ = nil and value ~ = "nil" then\n        ret = tonumber(value)\n        --#debug Assert.isNotNil(ret)\n    end\n\n    return ret\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"getvalue",children:"getValue"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Get a string value from this profile (and its ancestors) by name."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getValue(string name, string default)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"string"}),(0,r.jsx)(n.th,{children:"name"}),(0,r.jsx)(n.th,{children:"Name of attribute value to retrieve"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"default"}),(0,r.jsx)(n.td,{children:"Default value to use if the attribute is not defined."})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"string"}),(0,r.jsx)(n.th,{children:"value"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function GuiProfile:getValue(name, default)\n    local ret = default\n\n    -- Try a special case\n    if self.values[name .. g_baseUIPostfix] ~ = nil and self.values[name .. g_baseUIPostfix] ~ = "nil" then\n        ret = self.values[name .. g_baseUIPostfix]\n\n        -- Try definition in the profile\n    elseif self.values[name] ~ = nil and self.values[name] ~ = "nil" then\n            ret = self.values[name]\n\n            -- Try the profile itself\n        else\n                if self.parent ~ = nil then\n                    -- Try parent\n                    local parentProfile\n                    if self.isVariant then\n                        parentProfile = self.profiles[ self.parent]\n                    else\n                            -- Follow the path of special variants so top-level variants update all children\n                            parentProfile = g_gui:getProfile( self.parent)\n                        end\n\n                        if parentProfile ~ = nil and parentProfile ~ = "nil" then\n                            ret = parentProfile:getValue(name, default)\n                        else\n                                Logging.warning( "Parent-profile \'%s\' not found for profile \'%s\'" , self.parent, self.name)\n                                end\n                            end\n                        end\n\n                        return ret\n                    end\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"loadfromxml",children:"loadFromXML"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Load profile data from XML."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"loadFromXML(entityId xmlFile, string key, table presets, boolean? isTrait, boolean? isVariant)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"entityId"}),(0,r.jsx)(n.th,{children:"xmlFile"}),(0,r.jsx)(n.th,{children:"XML file handle"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"key"}),(0,r.jsx)(n.td,{children:"Profile XML element node path"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"table"}),(0,r.jsx)(n.td,{children:"presets"}),(0,r.jsx)(n.td,{children:"Table of presets for symbol resolution, {preset name=preset value}"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"boolean?"}),(0,r.jsx)(n.td,{children:"isTrait"}),(0,r.jsx)(n.td,{children:"Whether this profile is a trait"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"boolean?"}),(0,r.jsx)(n.td,{children:"isVariant"}),(0,r.jsx)(n.td,{})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"boolean?"}),(0,r.jsx)(n.th,{children:"success"}),(0,r.jsx)(n.th,{children:"True if profile values could be loaded, false otherwise."})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function GuiProfile:loadFromXML(xmlFile, key, presets, isTrait, isVariant)\n    local name = getXMLString(xmlFile, key .. "#name" )\n    if name = = nil then\n        Logging.xmlWarning(xmlFile, "Missing name for a profile in XML file %s at path %s" , getXMLFilename(xmlFile), key)\n            return false\n        end\n\n        self.name = name\n        self.isTrait = isTrait or false\n        self.parent = getXMLString(xmlFile, key .. "#extends" )\n        self.isVariant = isVariant\n\n        if self.parent = = self.name then\n            error( "Profile " .. name .. " extends itself" )\n        end\n\n        -- If this is not a trait, resolve traits\n        if not isTrait then\n            local traitsStr = getXMLString(xmlFile, key .. "#with" )\n            if traitsStr ~ = nil then\n                local traitNames = string.split( string.trim(traitsStr), " " )\n\n                -- Copy all values, overwriting previous ones.\n                -- This is resolving of the traits.\n                for i, traitName in ipairs(traitNames) do\n                    local trait = self.traits[traitName]\n\n                    if trait ~ = nil then\n                        for traitValueName, value in pairs(trait.values) do\n                            self.values[traitValueName] = value\n                        end\n                    else\n                            Logging.xmlWarning(xmlFile, "Trait-profile \'%s\' not found for trait \'%s\' at \'%s\'" , traitName, self.name, key)\n                            end\n                        end\n                    end\n                end\n\n                local numElements = getXMLNumOfChildren(xmlFile, key)\n                local oldFormatCount = 0\n                for i = 0 , numElements - 1 do\n                    local valueName = getXMLElementName(xmlFile, string.format( "%s.*(%i)" , key, i))\n                    local valueKey = key .. string.format( ".%s(0)#value" , valueName)\n\n                    --if old format is still used, we throw a warning\n                        if valueName = = "Value" then\n                            valueName = getXMLString(xmlFile, key .. string.format( ".Value(%i)#name" , oldFormatCount))\n                            valueKey = key .. string.format( ".Value(%i)#value" , oldFormatCount)\n                            oldFormatCount = oldFormatCount + 1\n\n                            Logging.xmlWarning(xmlFile, "Gui profile \'%s\' still uses old format, please convert it to the new one" , valueName)\n                        end\n\n                        local value = getXMLString(xmlFile, valueKey)\n                        if valueName = = nil or value = = nil or valueName = = "Variant" then\n                            break\n                        end\n\n                        if value:startsWith( "$preset_" ) then\n                            local preset = string.gsub(value, "$preset_" , "" )\n                            if presets[preset] ~ = nil then\n                                value = presets[preset]\n                            else\n                                    Logging.xmlWarning(xmlFile, "Preset \'%s\' it profile \'%s\' at \'%s\' is not defined" , preset, name, valueKey)\n                                end\n                            end\n\n                            self.values[valueName] = value\n                        end\n\n                        return true\n                    end\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"new",children:"new"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Create a new GuiProfile."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"new(table profiles, table traits)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"table"}),(0,r.jsx)(n.th,{children:"profiles"}),(0,r.jsx)(n.th,{children:"Reference to loaded profiles table for inheritance checking."})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"table"}),(0,r.jsx)(n.td,{children:"traits"}),(0,r.jsx)(n.td,{children:"Reference to loaded traits table for inheritance checking."})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"table"}),(0,r.jsx)(n.th,{children:"GuiProfile"}),(0,r.jsx)(n.th,{children:"instance"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function GuiProfile.new(profiles, traits)\n    local self = setmetatable( { } , GuiProfile _mt)\n\n    self.values = { }\n    self.name = ""\n    self.profiles = profiles\n    self.traits = traits\n    self.parent = nil\n\n    return self\nend\n\n'})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);