"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[71706],{28453(e,n,s){s.d(n,{R:()=>t,x:()=>d});var l=s(96540);const i={},a=l.createContext(i);function t(e){const n=l.useContext(a);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),l.createElement(a.Provider,{value:n},e.children)}},49592(e,n,s){s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>l,toc:()=>o});const l=JSON.parse('{"id":"script/Specializations/Washable","title":"Washable","description":"Washable","source":"@site/../docs/script/Specializations/Washable.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/Washable","permalink":"/FS25-Community-LUADOC/script/Specializations/Washable","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"VinePrepruner","permalink":"/FS25-Community-LUADOC/script/Specializations/VinePrepruner"},"next":{"title":"WaterTrailer","permalink":"/FS25-Community-LUADOC/script/Specializations/WaterTrailer"}}');var i=s(74848),a=s(28453);const t={},d=void 0,r={},o=[{value:"Washable",id:"washable",level:2},{value:"addAllSubWashableNodes",id:"addallsubwashablenodes",level:3},{value:"addDirtAmount",id:"adddirtamount",level:3},{value:"addToGlobalWashableNode",id:"addtoglobalwashablenode",level:3},{value:"addToLocalWashableNode",id:"addtolocalwashablenode",level:3},{value:"addWashableNode",id:"addwashablenode",level:3},{value:"addWashableNodes",id:"addwashablenodes",level:3},{value:"addWetnessAmount",id:"addwetnessamount",level:3},{value:"cleanVehicle",id:"cleanvehicle",level:3},{value:"getAllowsWashingByType",id:"getallowswashingbytype",level:3},{value:"getDirtAmount",id:"getdirtamount",level:3},{value:"getDirtMultiplier",id:"getdirtmultiplier",level:3},{value:"getIntervalMultiplier",id:"getintervalmultiplier",level:3},{value:"getIsWet",id:"getiswet",level:3},{value:"getNodeDirtAmount",id:"getnodedirtamount",level:3},{value:"getWashableNodeByCustomIndex",id:"getwashablenodebycustomindex",level:3},{value:"getWashDuration",id:"getwashduration",level:3},{value:"getWorkDirtMultiplier",id:"getworkdirtmultiplier",level:3},{value:"initSpecialization",id:"initspecialization",level:3},{value:"onLoad",id:"onload",level:3},{value:"onLoadFinished",id:"onloadfinished",level:3},{value:"onReadStream",id:"onreadstream",level:3},{value:"onReadUpdateStream",id:"onreadupdatestream",level:3},{value:"onUpdateTick",id:"onupdatetick",level:3},{value:"onWriteStream",id:"onwritestream",level:3},{value:"onWriteUpdateStream",id:"onwriteupdatestream",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"readWashableNodeData",id:"readwashablenodedata",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3},{value:"registerFunctions",id:"registerfunctions",level:3},{value:"removeAllSubWashableNodes",id:"removeallsubwashablenodes",level:3},{value:"removeWashableNode",id:"removewashablenode",level:3},{value:"saveToXMLFile",id:"savetoxmlfile",level:3},{value:"setDirtAmount",id:"setdirtamount",level:3},{value:"setNodeDirtAmount",id:"setnodedirtamount",level:3},{value:"setNodeDirtColor",id:"setnodedirtcolor",level:3},{value:"setNodeWetness",id:"setnodewetness",level:3},{value:"updateDebugValues",id:"updatedebugvalues",level:3},{value:"updateDirtAmount",id:"updatedirtamount",level:3},{value:"updateWetness",id:"updatewetness",level:3},{value:"validateWashableNode",id:"validatewashablenode",level:3},{value:"writeWashableNodeData",id:"writewashablenodedata",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"washable",children:"Washable"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Specialization for vehicles which can get dirty and be cleaned by a pressure washer"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Functions"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#addallsubwashablenodes",children:"addAllSubWashableNodes"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#adddirtamount",children:"addDirtAmount"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#addtoglobalwashablenode",children:"addToGlobalWashableNode"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#addtolocalwashablenode",children:"addToLocalWashableNode"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#addwashablenode",children:"addWashableNode"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#addwashablenodes",children:"addWashableNodes"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#addwetnessamount",children:"addWetnessAmount"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#cleanvehicle",children:"cleanVehicle"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getallowswashingbytype",children:"getAllowsWashingByType"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getdirtamount",children:"getDirtAmount"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getdirtmultiplier",children:"getDirtMultiplier"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getintervalmultiplier",children:"getIntervalMultiplier"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getiswet",children:"getIsWet"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getnodedirtamount",children:"getNodeDirtAmount"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getwashablenodebycustomindex",children:"getWashableNodeByCustomIndex"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getwashduration",children:"getWashDuration"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getworkdirtmultiplier",children:"getWorkDirtMultiplier"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#initspecialization",children:"initSpecialization"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onloadfinished",children:"onLoadFinished"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onreadstream",children:"onReadStream"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onreadupdatestream",children:"onReadUpdateStream"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onupdatetick",children:"onUpdateTick"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onwritestream",children:"onWriteStream"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#onwriteupdatestream",children:"onWriteUpdateStream"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#readwashablenodedata",children:"readWashableNodeData"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#removeallsubwashablenodes",children:"removeAllSubWashableNodes"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#removewashablenode",children:"removeWashableNode"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#savetoxmlfile",children:"saveToXMLFile"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#setdirtamount",children:"setDirtAmount"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#setnodedirtamount",children:"setNodeDirtAmount"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#setnodedirtcolor",children:"setNodeDirtColor"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#setnodewetness",children:"setNodeWetness"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#updatedebugvalues",children:"updateDebugValues"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#updatedirtamount",children:"updateDirtAmount"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#updatewetness",children:"updateWetness"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#validatewashablenode",children:"validateWashableNode"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#writewashablenodedata",children:"writeWashableNodeData"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"addallsubwashablenodes",children:"addAllSubWashableNodes"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"addAllSubWashableNodes()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"rootNode"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Washable:addAllSubWashableNodes(rootNode)\n    if rootNode ~ = nil then\n        I3DUtil.iterateShaderParametersNodesRecursively(rootNode, Washable.SHADER_PARAMETERS, self.addWashableNode, self )\n    end\n\n    -- if we are done with adding new nodes we apply the last dirt amount to all nodes\n        self:addDirtAmount( 0 , true )\n    end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"adddirtamount",children:"addDirtAmount"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"addDirtAmount()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"dirtAmount"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"force"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Washable:addDirtAmount(dirtAmount, force)\n    local spec = self.spec_washable\n    for i = 1 , #spec.washableNodes do\n        local nodeData = spec.washableNodes[i]\n        self:setNodeDirtAmount(nodeData, nodeData.dirtAmount + dirtAmount, force)\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"addtoglobalwashablenode",children:"addToGlobalWashableNode"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"addToGlobalWashableNode()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"node"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Washable:addToGlobalWashableNode(node)\n    local spec = self.spec_washable\n    if spec.washableNodes[ 1 ] ~ = nil then\n        local useWetness = true\n        if next(spec.wetnessIgnoreNodes) ~ = nil then\n            local nodeToCheck = node\n            while nodeToCheck ~ = 0 do\n                if spec.wetnessIgnoreNodes[nodeToCheck] = = true then\n                    useWetness = false\n                    break\n                end\n                nodeToCheck = getParent(nodeToCheck)\n            end\n        end\n\n        spec.washableNodes[ 1 ].nodes[node] = useWetness\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"addtolocalwashablenode",children:"addToLocalWashableNode"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"addToLocalWashableNode()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"node"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"updateFunc"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"customIndex"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"extraParams"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Washable:addToLocalWashableNode(node, updateFunc, customIndex, extraParams)\n    local spec = self.spec_washable\n\n    local useWetness = true\n    if node ~ = nil and next(spec.wetnessIgnoreNodes) ~ = nil then\n        local nodeToCheck = node\n        while nodeToCheck ~ = 0 do\n            if spec.wetnessIgnoreNodes[nodeToCheck] = = true then\n                useWetness = false\n                break\n            end\n            nodeToCheck = getParent(nodeToCheck)\n        end\n    end\n\n    local nodeData = { }\n\n    --if washableNode already exists we add node to existing washableNode\n        if customIndex ~ = nil then\n            if spec.washableNodesByIndex[customIndex] ~ = nil then\n                if getHasShaderParameter(node, "scratches_dirt_snow_wetness" ) then\n                    spec.washableNodesByIndex[customIndex].nodes[node] = useWetness\n                else\n                        spec.washableNodesByIndex[customIndex].mudNodes[node] = useWetness\n                    end\n                    return\n                else\n                        spec.washableNodesByIndex[customIndex] = nodeData\n                    end\n                end\n\n                --if washableNode doesn\'t exists we create a new one\n                    nodeData.nodes = { }\n                    nodeData.mudNodes = { }\n                    if node ~ = nil then\n                        if getHasShaderParameter(node, "scratches_dirt_snow_wetness" ) then\n                            nodeData.nodes[node] = useWetness\n                        else\n                                nodeData.mudNodes[node] = useWetness\n                            end\n                        end\n\n                        nodeData.updateFunc = updateFunc\n                        nodeData.dirtAmount = 0\n                        nodeData.dirtAmountSent = 0\n\n                        nodeData.wetness = 0\n                        nodeData.wetnessSent = 0\n\n                        nodeData.colorChanged = false\n                        local defaultColor, _ = g_currentMission.environment:getDirtColors()\n                        nodeData.color = { defaultColor[ 1 ], defaultColor[ 2 ], defaultColor[ 3 ] }\n                        nodeData.defaultColor = { defaultColor[ 1 ], defaultColor[ 2 ], defaultColor[ 3 ] }\n\n                        if extraParams ~ = nil then\n                            for i, v in pairs(extraParams) do\n                                nodeData[i] = v\n                            end\n                        end\n\n                        table.insert(spec.washableNodes, nodeData)\n                    end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"addwashablenode",children:"addWashableNode"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"addWashableNode()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"node"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Washable:addWashableNode(node)\n    local isGlobal, updateFunc, customIndex, extraParams = self:validateWashableNode(node)\n    if isGlobal then\n        self:addToGlobalWashableNode(node)\n    elseif updateFunc ~ = nil then\n            self:addToLocalWashableNode(node, updateFunc, customIndex, extraParams)\n        end\n    end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"addwashablenodes",children:"addWashableNodes"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"addWashableNodes()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"nodes"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Washable:addWashableNodes(nodes)\n    for _, node in ipairs(nodes) do\n        self:addWashableNode(node)\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"addwetnessamount",children:"addWetnessAmount"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"addWetnessAmount()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"amount"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Washable:addWetnessAmount(amount)\n    local spec = self.spec_washable\n\n    for i = 1 , #spec.washableNodes do\n        local nodeData = spec.washableNodes[i]\n        self:setNodeWetness(nodeData, nodeData.wetness + amount)\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"cleanvehicle",children:"cleanVehicle"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"cleanVehicle()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"amount"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Washable:cleanVehicle(amount)\n    local spec = self.spec_washable\n    for i = 1 , #spec.washableNodes do\n        local nodeData = spec.washableNodes[i]\n        local nodeAmount = amount * (nodeData.cleaningMultiplier or 1 )\n        self:setNodeDirtAmount(nodeData, nodeData.dirtAmount - nodeAmount, true )\n        self:setNodeWetness(nodeData, nodeData.wetness + nodeAmount * 5 , true )\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getallowswashingbytype",children:"getAllowsWashingByType"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getAllowsWashingByType()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"type"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Washable:getAllowsWashingByType( type )\n    local spec = self.spec_washable\n    return spec.blockedWashTypes[ type ] = = nil\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getdirtamount",children:"getDirtAmount"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getDirtAmount()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Washable:getDirtAmount()\n    local spec = self.spec_washable\n\n    if #spec.washableNodes > 0 then\n        return spec.washableNodes[ 1 ].dirtAmount\n    end\n\n    return 0\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getdirtmultiplier",children:"getDirtMultiplier"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getDirtMultiplier()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Washable:getDirtMultiplier()\n    local spec = self.spec_washable\n\n    local multiplier = 1\n    if self:getLastSpeed() < 1 then\n        multiplier = 0\n    end\n\n    if self.isOnField then\n        multiplier = multiplier * spec.fieldMultiplier\n\n        local wetness = g_currentMission.environment.weather:getGroundWetness()\n        if wetness > 0 then\n            multiplier = multiplier * ( 1 + wetness * spec.wetMultiplier)\n        end\n    end\n\n    return multiplier\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getintervalmultiplier",children:"getIntervalMultiplier"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getIntervalMultiplier()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Washable.getIntervalMultiplier()\n    if g_currentMission.missionInfo.dirtInterval = = 1 then\n        return 0\n    elseif g_currentMission.missionInfo.dirtInterval = = 2 then\n            return 0.25\n        elseif g_currentMission.missionInfo.dirtInterval = = 3 then\n                return 0.5\n            elseif g_currentMission.missionInfo.dirtInterval = = 4 then\n                    return 1\n                end\n                return 1\n            end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getiswet",children:"getIsWet"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getIsWet()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Washable:getIsWet()\n    for _, nodeData in pairs( self.spec_washable.washableNodes) do\n        if nodeData.wetness > 0 then\n            return true\n        end\n    end\n\n    return false\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getnodedirtamount",children:"getNodeDirtAmount"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getNodeDirtAmount()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"nodeData"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Washable:getNodeDirtAmount(nodeData)\n    return nodeData.dirtAmount\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getwashablenodebycustomindex",children:"getWashableNodeByCustomIndex"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getWashableNodeByCustomIndex()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"customIndex"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Washable:getWashableNodeByCustomIndex(customIndex)\n    return self.spec_washable.washableNodesByIndex[customIndex]\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getwashduration",children:"getWashDuration"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getWashDuration()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Washable:getWashDuration()\n    local spec = self.spec_washable\n\n    return spec.washDuration\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getworkdirtmultiplier",children:"getWorkDirtMultiplier"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getWorkDirtMultiplier()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Washable:getWorkDirtMultiplier()\n    local spec = self.spec_washable\n\n    return spec.workMultiplier\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"initspecialization",children:"initSpecialization"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"initSpecialization()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Washable.initSpecialization()\n    local schema = Vehicle.xmlSchema\n    schema:setXMLSpecializationType( "Washable" )\n    schema:register(XMLValueType.FLOAT, "vehicle.washable#dirtDuration" , "Duration until fully dirty(minutes)" , 90 )\n    schema:register(XMLValueType.FLOAT, "vehicle.washable#washDuration" , "Duration until fully clean(minutes)" , 1 )\n    schema:register(XMLValueType.FLOAT, "vehicle.washable#rainWashDuration" , "Duration until fully clean when it rains(minutes)" , 10 )\n    schema:register(XMLValueType.FLOAT, "vehicle.washable#wetDuration" , "Duration until fully wet(ingame minutes)" , 10 )\n    schema:register(XMLValueType.FLOAT, "vehicle.washable#dryDuration" , "Duration until the vehicle is fully dry again(ingame minutes)" , 120 )\n    schema:register(XMLValueType.FLOAT, "vehicle.washable#workMultiplier" , "Multiplier while working" , 4 )\n        schema:register(XMLValueType.FLOAT, "vehicle.washable#fieldMultiplier" , "Multiplier while on field" , 2 )\n            schema:register(XMLValueType.FLOAT, "vehicle.washable#wetMultiplier" , "Multiplier while on it\'s wet" , 5 )\n                schema:register(XMLValueType.STRING, "vehicle.washable#blockedWashTypes" , "Block specific ways to clean vehicle(HIGH_PRESSURE_WASHER, RAIN, TRIGGER)" )\n                schema:register(XMLValueType.NODE_INDEX, "vehicle.washable.wetnessIgnoreNode(?)#node" , "Node, including it\'s children will never get wet" )\n                schema:setXMLSpecializationType()\n\n                local schemaSavegame = Vehicle.xmlSchemaSavegame\n                schemaSavegame:register(XMLValueType.FLOAT, "vehicles.vehicle(?).washable.dirtNode(?)#amount" , "Dirt amount" )\n                schemaSavegame:register(XMLValueType.FLOAT, "vehicles.vehicle(?).washable.dirtNode(?)#snowScale" , "Snow scale" )\n                schemaSavegame:register(XMLValueType.FLOAT, "vehicles.vehicle(?).washable.dirtNode(?)#wetness" , "Wetness" )\n            end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onLoad()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Washable:onLoad(savegame)\n    local spec = self.spec_washable\n\n    spec.wetnessIgnoreNodes = { }\n    for _, key in self.xmlFile:iterator( "vehicle.washable.wetnessIgnoreNode" ) do\n        local node = self.xmlFile:getValue(key .. "#node" , nil , self.components, self.i3dMappings)\n        if node ~ = nil then\n            spec.wetnessIgnoreNodes[node] = true\n        else\n                Logging.xmlWarning( self.xmlFile, "Invalid node for wetnessIgnoreNode \'%s\'" , key)\n                end\n            end\n\n            spec.washableNodes = { }\n            spec.washableNodesByIndex = { }\n            self:addToLocalWashableNode( nil , Washable.updateDirtAmount, nil , nil ) -- create global / default washableNode\n            spec.globalWashableNode = spec.washableNodes[ 1 ]\n\n            spec.dirtDuration = self.xmlFile:getValue( "vehicle.washable#dirtDuration" , 90 ) * 60 * 1000\n            if spec.dirtDuration ~ = 0 then\n                spec.dirtDuration = 1 / spec.dirtDuration\n            end\n\n            spec.washDuration = math.max( self.xmlFile:getValue( "vehicle.washable#washDuration" , 1 ) * 60 * 1000 , 0.00001 ) -- washDuration = = 0 washes vehicle immediately\n            spec.rainWashDuration = math.max( self.xmlFile:getValue( "vehicle.washable#rainWashDuration" , 10 ) * 60 * 1000 , 0.00001 )\n            spec.wetDuration = self.xmlFile:getValue( "vehicle.washable#wetDuration" , 10 ) / 60 / 1000\n            spec.dryDuration = 1 / math.max( self.xmlFile:getValue( "vehicle.washable#dryDuration" , 120 ) * 60 * 1000 , 0.0001 )\n\n            spec.workMultiplier = self.xmlFile:getValue( "vehicle.washable#workMultiplier" , 4 )\n            spec.fieldMultiplier = self.xmlFile:getValue( "vehicle.washable#fieldMultiplier" , 2 )\n            spec.wetMultiplier = self.xmlFile:getValue( "vehicle.washable#wetMultiplier" , 5 )\n\n            spec.blockedWashTypes = { }\n            local blockedWashTypesStr = self.xmlFile:getValue( "vehicle.washable#blockedWashTypes" )\n            if blockedWashTypesStr ~ = nil then\n                local blockedWashTypes = blockedWashTypesStr:split( " " )\n                for _, typeStr in pairs(blockedWashTypes) do\n                    typeStr = "WASHTYPE_" .. typeStr\n                    if Washable [typeStr] ~ = nil then\n                        spec.blockedWashTypes[ Washable [typeStr]] = true\n                    else\n                            Logging.xmlWarning( self.xmlFile, "Unknown wash type \'%s\' in \'%s\'" , typeStr, "vehicle.washable#blockedWashTypes" )\n                        end\n                    end\n                end\n\n                spec.lastDirtMultiplier = 0\n\n                spec.dirtyFlag = self:getNextDirtyFlag()\n\n                if self.propertyState = = VehiclePropertyState.SHOP_CONFIG then\n                    SpecializationUtil.removeEventListener( self , "onUpdateTick" , Washable )\n                end\n            end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"onloadfinished",children:"onLoadFinished"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onLoadFinished()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Washable:onLoadFinished(savegame)\n    local spec = self.spec_washable\n\n    -- getting als washable nodes in postLoad to make sure also linked nodes are washable\n    for _, component in pairs( self.components) do\n        self:addAllSubWashableNodes(component.node)\n    end\n\n    if savegame ~ = nil and Washable.getIntervalMultiplier() ~ = 0 then\n        for i = 1 , #spec.washableNodes do\n            local nodeData = spec.washableNodes[i]\n            local nodeKey = string.format( "%s.washable.dirtNode(%d)" , savegame.key, i - 1 )\n            local amount = savegame.xmlFile:getValue(nodeKey .. "#amount" , 0 )\n            self:setNodeDirtAmount(nodeData, amount, true )\n\n            local wetness = savegame.xmlFile:getValue(nodeKey .. "#wetness" , 0 )\n            self:setNodeWetness(nodeData, wetness, true )\n\n            if nodeData.loadFromSavegameFunc ~ = nil then\n                nodeData.loadFromSavegameFunc(savegame.xmlFile, nodeKey)\n            end\n        end\n    else\n            for i = 1 , #spec.washableNodes do\n                local nodeData = spec.washableNodes[i]\n                self:setNodeDirtAmount(nodeData, 0 , true )\n            end\n        end\n    end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"onreadstream",children:"onReadStream"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onReadStream()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"streamId"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Washable:onReadStream(streamId, connection)\n    Washable.readWashableNodeData( self , streamId, connection)\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"onreadupdatestream",children:"onReadUpdateStream"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onReadUpdateStream()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"streamId"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"timestamp"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"connection"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Washable:onReadUpdateStream(streamId, timestamp, connection)\n    if connection:getIsServer() then\n        local spec = self.spec_washable\n        if spec.washableNodes ~ = nil then\n            if streamReadBool(streamId) then\n                Washable.readWashableNodeData( self , streamId, connection)\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"onupdatetick",children:"onUpdateTick"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onUpdateTick()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"dt"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"isActiveForInput"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"isActiveForInputIgnoreSelection"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"isSelected"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Washable:onUpdateTick(dt, isActiveForInput, isActiveForInputIgnoreSelection, isSelected)\n    if self.isServer then\n        local spec = self.spec_washable\n        spec.lastDirtMultiplier = self:getDirtMultiplier() * Washable.getIntervalMultiplier() * Platform.gameplay.dirtDurationScale\n\n        local allowsWashingByRain = self:getAllowsWashingByType( Washable.WASHTYPE_RAIN)\n        local rainScale, timeSinceLastRain, temperature = 0 , 0 , 0\n        if allowsWashingByRain then\n            local weather = g_currentMission.environment.weather\n            rainScale = weather:getRainFallScale()\n            timeSinceLastRain = weather:getTimeSinceLastRain()\n            temperature = weather:getCurrentTemperature()\n        end\n\n        for i = 1 , #spec.washableNodes do\n            local nodeData = spec.washableNodes[i]\n            local changeDirt, changeWetness = nodeData.updateFunc( self , nodeData, dt, allowsWashingByRain, rainScale, timeSinceLastRain, temperature)\n            if changeDirt ~ = 0 then\n                self:setNodeDirtAmount(nodeData, nodeData.dirtAmount + changeDirt)\n            end\n            if changeWetness ~ = 0 then\n                self:setNodeWetness(nodeData, nodeData.wetness + changeWetness)\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"onwritestream",children:"onWriteStream"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onWriteStream()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"streamId"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Washable:onWriteStream(streamId, connection)\n    Washable.writeWashableNodeData( self , streamId, connection)\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"onwriteupdatestream",children:"onWriteUpdateStream"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"onWriteUpdateStream()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"streamId"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"connection"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"dirtyMask"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Washable:onWriteUpdateStream(streamId, connection, dirtyMask)\n    if not connection:getIsServer() then\n        local spec = self.spec_washable\n        if streamWriteBool(streamId, bit32.band(dirtyMask, spec.dirtyFlag) ~ = 0 ) then\n            Washable.writeWashableNodeData( self , streamId, connection)\n        end\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"prerequisitesPresent()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Washable.prerequisitesPresent(specializations)\n    return true\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"readwashablenodedata",children:"readWashableNodeData"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"readWashableNodeData()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"self"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"streamId"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"connection"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Washable.readWashableNodeData( self , streamId, connection)\n    local spec = self.spec_washable\n    for i = 1 , #spec.washableNodes do\n        local nodeData = spec.washableNodes[i]\n        local dirtAmount = streamReadUIntN(streamId, Washable.SEND_NUM_BITS) / Washable.SEND_MAX_VALUE\n        self:setNodeDirtAmount(nodeData, dirtAmount, true )\n\n        local wetness = streamReadUIntN(streamId, Washable.SEND_NUM_BITS_WETNESS) / Washable.SEND_MAX_VALUE_WETNESS\n        self:setNodeWetness(nodeData, wetness, true )\n\n        if streamReadBool(streamId) then\n            local r = streamReadUIntN(streamId, Washable.SEND_NUM_BITS) / Washable.SEND_MAX_VALUE\n            local g = streamReadUIntN(streamId, Washable.SEND_NUM_BITS) / Washable.SEND_MAX_VALUE\n            local b = streamReadUIntN(streamId, Washable.SEND_NUM_BITS) / Washable.SEND_MAX_VALUE\n\n            self:setNodeDirtColor(nodeData, r, g, b, true )\n        end\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Washable.registerEventListeners(vehicleType)\n    SpecializationUtil.registerEventListener(vehicleType, "onLoad" , Washable )\n    SpecializationUtil.registerEventListener(vehicleType, "onLoadFinished" , Washable )\n    SpecializationUtil.registerEventListener(vehicleType, "onReadStream" , Washable )\n    SpecializationUtil.registerEventListener(vehicleType, "onWriteStream" , Washable )\n    SpecializationUtil.registerEventListener(vehicleType, "onReadUpdateStream" , Washable )\n    SpecializationUtil.registerEventListener(vehicleType, "onWriteUpdateStream" , Washable )\n    SpecializationUtil.registerEventListener(vehicleType, "onUpdateTick" , Washable )\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Washable.registerFunctions(vehicleType)\n    SpecializationUtil.registerFunction(vehicleType, "cleanVehicle" , Washable.cleanVehicle)\n    SpecializationUtil.registerFunction(vehicleType, "updateDirtAmount" , Washable.updateDirtAmount)\n    SpecializationUtil.registerFunction(vehicleType, "addDirtAmount" , Washable.addDirtAmount)\n    SpecializationUtil.registerFunction(vehicleType, "setDirtAmount" , Washable.setDirtAmount)\n    SpecializationUtil.registerFunction(vehicleType, "getDirtAmount" , Washable.getDirtAmount)\n    SpecializationUtil.registerFunction(vehicleType, "setNodeDirtAmount" , Washable.setNodeDirtAmount)\n    SpecializationUtil.registerFunction(vehicleType, "getNodeDirtAmount" , Washable.getNodeDirtAmount)\n    SpecializationUtil.registerFunction(vehicleType, "setNodeDirtColor" , Washable.setNodeDirtColor)\n    SpecializationUtil.registerFunction(vehicleType, "updateWetness" , Washable.updateWetness)\n    SpecializationUtil.registerFunction(vehicleType, "getIsWet" , Washable.getIsWet)\n    SpecializationUtil.registerFunction(vehicleType, "addWetnessAmount" , Washable.addWetnessAmount)\n    SpecializationUtil.registerFunction(vehicleType, "setNodeWetness" , Washable.setNodeWetness)\n    SpecializationUtil.registerFunction(vehicleType, "addAllSubWashableNodes" , Washable.addAllSubWashableNodes)\n    SpecializationUtil.registerFunction(vehicleType, "addWashableNodes" , Washable.addWashableNodes)\n    SpecializationUtil.registerFunction(vehicleType, "addWashableNode" , Washable.addWashableNode)\n    SpecializationUtil.registerFunction(vehicleType, "validateWashableNode" , Washable.validateWashableNode)\n    SpecializationUtil.registerFunction(vehicleType, "addToGlobalWashableNode" , Washable.addToGlobalWashableNode)\n    SpecializationUtil.registerFunction(vehicleType, "getWashableNodeByCustomIndex" , Washable.getWashableNodeByCustomIndex)\n    SpecializationUtil.registerFunction(vehicleType, "addToLocalWashableNode" , Washable.addToLocalWashableNode)\n    SpecializationUtil.registerFunction(vehicleType, "removeAllSubWashableNodes" , Washable.removeAllSubWashableNodes)\n    SpecializationUtil.registerFunction(vehicleType, "removeWashableNode" , Washable.removeWashableNode)\n    SpecializationUtil.registerFunction(vehicleType, "getDirtMultiplier" , Washable.getDirtMultiplier)\n    SpecializationUtil.registerFunction(vehicleType, "getWorkDirtMultiplier" , Washable.getWorkDirtMultiplier)\n    SpecializationUtil.registerFunction(vehicleType, "getWashDuration" , Washable.getWashDuration)\n    SpecializationUtil.registerFunction(vehicleType, "getAllowsWashingByType" , Washable.getAllowsWashingByType)\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"removeallsubwashablenodes",children:"removeAllSubWashableNodes"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"removeAllSubWashableNodes()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"rootNode"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Washable:removeAllSubWashableNodes(rootNode)\n    if rootNode ~ = nil then\n        I3DUtil.iterateShaderParametersNodesRecursively(rootNode, Washable.SHADER_PARAMETERS, self.removeWashableNode, self )\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"removewashablenode",children:"removeWashableNode"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"removeWashableNode()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"node"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Washable:removeWashableNode(node)\n    local spec = self.spec_washable\n\n    if node ~ = nil then\n        for i = 1 , #spec.washableNodes do\n            spec.washableNodes[i].nodes[node] = nil\n            spec.washableNodes[i].mudNodes[node] = nil\n        end\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"savetoxmlfile",children:"saveToXMLFile"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"saveToXMLFile()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"xmlFile"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"key"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"usedModNames"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Washable:saveToXMLFile(xmlFile, key, usedModNames)\n    local spec = self.spec_washable\n\n    for i = 1 , #spec.washableNodes do\n        local nodeData = spec.washableNodes[i]\n        local nodeKey = string.format( "%s.dirtNode(%d)" , key, i - 1 )\n        xmlFile:setValue(nodeKey .. "#amount" , nodeData.dirtAmount)\n        xmlFile:setValue(nodeKey .. "#wetness" , nodeData.wetness)\n\n        if nodeData.saveToSavegameFunc ~ = nil then\n            nodeData.saveToSavegameFunc(xmlFile, nodeKey)\n        end\n    end\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"setdirtamount",children:"setDirtAmount"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"setDirtAmount()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"dirtAmount"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Washable:setDirtAmount(dirtAmount)\n    local spec = self.spec_washable\n    for i = 1 , #spec.washableNodes do\n        local nodeData = spec.washableNodes[i]\n\n        if next(nodeData.mudNodes) ~ = nil then\n            self:setNodeDirtAmount(nodeData, (dirtAmount - 0.75 ) / 0.25 , true )\n        else\n                self:setNodeDirtAmount(nodeData, dirtAmount, true )\n            end\n        end\n    end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"setnodedirtamount",children:"setNodeDirtAmount"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"setNodeDirtAmount()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"nodeData"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"dirtAmount"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"force"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Washable:setNodeDirtAmount(nodeData, dirtAmount, force)\n    local spec = self.spec_washable\n    nodeData.dirtAmount = math.clamp(dirtAmount, 0 , 1 )\n\n    local diff = nodeData.dirtAmountSent - nodeData.dirtAmount\n    if math.abs(diff) > Washable.SEND_THRESHOLD or force or(nodeData.dirtAmount = = 0 and nodeData.dirtAmountSent ~ = 0 ) then\n        for node, _ in pairs(nodeData.nodes) do\n            setShaderParameter(node, "scratches_dirt_snow_wetness" , nil , nodeData.dirtAmount, nil , nil , false )\n        end\n\n        for node, _ in pairs(nodeData.mudNodes) do\n            g_animationManager:setPrevShaderParameter(node, "mudAmount" , nodeData.dirtAmount, 0 , 0 , 0 , false , "prevMudAmount" )\n        end\n\n        if self.isServer then\n            self:raiseDirtyFlags(spec.dirtyFlag)\n            nodeData.dirtAmountSent = nodeData.dirtAmount\n        end\n    end\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"setnodedirtcolor",children:"setNodeDirtColor"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"setNodeDirtColor()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"nodeData"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"r"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"g"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"b"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"force"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Washable:setNodeDirtColor(nodeData, r, g, b, force)\n    local spec = self.spec_washable\n    local cr, cg, cb = nodeData.color[ 1 ], nodeData.color[ 2 ], nodeData.color[ 3 ]\n    if ( math.abs(r - cr) > Washable.SEND_THRESHOLD or math.abs(g - cg) > Washable.SEND_THRESHOLD or math.abs(b - cb) > Washable.SEND_THRESHOLD) or force then\n        for node, _ in pairs(nodeData.nodes) do\n            setShaderParameter(node, "dirtColor" , r, g, b, nil , false )\n        end\n\n        for node, _ in pairs(nodeData.mudNodes) do\n            setShaderParameter(node, "dirtColor" , r, g, b, nil , false )\n        end\n\n        nodeData.color[ 1 ], nodeData.color[ 2 ], nodeData.color[ 3 ] = r, g, b\n\n        if self.isServer then\n            self:raiseDirtyFlags(spec.dirtyFlag)\n            nodeData.colorChanged = true\n        end\n    end\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"setnodewetness",children:"setNodeWetness"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"setNodeWetness()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"nodeData"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"wetness"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"force"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Washable:setNodeWetness(nodeData, wetness, force)\n    local spec = self.spec_washable\n    nodeData.wetness = math.clamp(wetness, 0 , 1 )\n\n    local diff = nodeData.wetnessSent - nodeData.wetness\n    if math.abs(diff) > Washable.SEND_THRESHOLD_WETNESS or force then\n        for node, useWetness in pairs(nodeData.nodes) do\n            if useWetness then\n                setShaderParameter(node, "scratches_dirt_snow_wetness" , nil , nil , nil , nodeData.wetness, false )\n            end\n        end\n\n        for node, useWetness in pairs(nodeData.mudNodes) do\n            if useWetness then\n                setShaderParameter(node, "wetness" , nodeData.wetness, nil , nil , nil , false )\n            end\n        end\n\n        if self.isServer then\n            self:raiseDirtyFlags(spec.dirtyFlag)\n            nodeData.wetnessSent = nodeData.wetness\n        end\n    end\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"updatedebugvalues",children:"updateDebugValues"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"updateDebugValues()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"values"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function Washable:updateDebugValues(values)\n    local spec = self.spec_washable\n    if spec.washableNodes ~ = nil then\n        local allowsWashingByRain = self:getAllowsWashingByType( Washable.WASHTYPE_RAIN)\n        local rainScale, timeSinceLastRain, temperature = 0 , 0 , 0\n        if allowsWashingByRain then\n            local weather = g_currentMission.environment.weather\n            rainScale = weather:getRainFallScale()\n            timeSinceLastRain = weather:getTimeSinceLastRain()\n            temperature = weather:getCurrentTemperature()\n        end\n\n        local isRaining = rainScale > 0.1 and timeSinceLastRain < 30 and temperature > 0\n        local changeWetness = 0\n        if isRaining then\n            changeWetness = 3600000 * spec.wetDuration * ( 1 + math.min( self.lastSpeed * 3600 / 10 , 1 ))\n        end\n\n        table.insert(values, { name = "Dirt Multiplier" , value = string.format( "%.3f" , self:getDirtMultiplier()) } )\n\n        for i, nodeData in ipairs(spec.washableNodes) do\n\n            local changedAmountDirt, changedAmountWetness = nodeData.updateFunc( self , nodeData, 3600000 , allowsWashingByRain, rainScale, timeSinceLastRain, temperature)\n\n            if not isRaining then\n                local dirtFactor = ( 1 - nodeData.dirtAmount) * 0.5 + 0.5 -- vehicle drys slower if completely dirty\n                    changedAmountWetness = changedAmountWetness - 3600000 * spec.dryDuration * dirtFactor * ( 1 + math.min( self.lastSpeed * 3600 / 10 , 1 ))\n                else\n                        changedAmountWetness = changedAmountWetness + changeWetness\n                    end\n\n                    table.insert(values, { name = "WashableNode" .. i, value = string.format( "%.4f a/h(%.2f) (color %.2f %.2f %.2f) (wetness: %.2f , %.4f a/min)" , changedAmountDirt, spec.washableNodes[i].dirtAmount, nodeData.color[ 1 ], nodeData.color[ 2 ], nodeData.color[ 3 ], nodeData.wetness, changedAmountWetness / 60 ) } )\n                end\n            end\n        end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"updatedirtamount",children:"updateDirtAmount"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"updateDirtAmount()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"nodeData"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"dt"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"allowsWashingByRain"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"rainScale"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"timeSinceLastRain"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"temperature"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Washable:updateDirtAmount(nodeData, dt, allowsWashingByRain, rainScale, timeSinceLastRain, temperature)\n    local spec = self.spec_washable\n    local changeDirt, changeWetness = 0 , 0\n    local dirtMultiplier = spec.lastDirtMultiplier\n\n    if allowsWashingByRain then\n        if rainScale > 0.1 and timeSinceLastRain < 30 and temperature > 0 then\n            if nodeData.dirtAmount > 0.5 and( not self:getIsOnField() or self:getLastSpeed() < 1 ) then\n                changeDirt = - (dt / spec.rainWashDuration)\n            end\n        end\n    end\n\n    if temperature > 0 and rainScale > 0.1 and timeSinceLastRain < 30 then\n        dirtMultiplier = dirtMultiplier * 2.5\n    end\n\n    if dirtMultiplier ~ = 0 then\n        changeDirt = dt * spec.dirtDuration * dirtMultiplier\n    end\n\n    return changeDirt, changeWetness\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"updatewetness",children:"updateWetness"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"updateWetness()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"isRaining"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"dt"})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Washable:updateWetness(isRaining, dt)\n    local spec = self.spec_washable\n\n    local changeWetness\n    if isRaining then\n        changeWetness = dt * spec.wetDuration * ( 1 + math.min( self.lastSpeed * 3600 / 10 , 1 ))\n    end\n\n    for i = 1 , #spec.washableNodes do\n        local nodeData = spec.washableNodes[i]\n\n        if not isRaining then\n            local dirtFactor = ( 1 - nodeData.dirtAmount) * 0.5 + 0.5 -- vehicle drys slower if completely dirty\n                changeWetness = - dt * spec.dryDuration * dirtFactor * ( 1 + math.min( self.lastSpeed * 3600 / 10 , 1 ))\n            end\n\n            self:setNodeWetness(nodeData, nodeData.wetness + changeWetness)\n        end\n    end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"validatewashablenode",children:"validateWashableNode"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"validateWashableNode()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"node"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Washable:validateWashableNode(node)\n    return true , nil -- by default all nodes are global\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"writewashablenodedata",children:"writeWashableNodeData"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"writeWashableNodeData()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"self"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"streamId"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"connection"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function Washable.writeWashableNodeData( self , streamId, connection)\n    local spec = self.spec_washable\n    for i = 1 , #spec.washableNodes do\n        local nodeData = spec.washableNodes[i]\n        streamWriteUIntN(streamId, math.floor(nodeData.dirtAmount * Washable.SEND_MAX_VALUE + 0.5 ), Washable.SEND_NUM_BITS)\n        streamWriteUIntN(streamId, math.floor(nodeData.wetness * Washable.SEND_MAX_VALUE_WETNESS + 0.5 ), Washable.SEND_NUM_BITS_WETNESS)\n\n        streamWriteBool(streamId, nodeData.colorChanged)\n        if nodeData.colorChanged then\n            streamWriteUIntN(streamId, math.floor(nodeData.color[ 1 ] * Washable.SEND_MAX_VALUE + 0.5 ), Washable.SEND_NUM_BITS)\n            streamWriteUIntN(streamId, math.floor(nodeData.color[ 2 ] * Washable.SEND_MAX_VALUE + 0.5 ), Washable.SEND_NUM_BITS)\n            streamWriteUIntN(streamId, math.floor(nodeData.color[ 3 ] * Washable.SEND_MAX_VALUE + 0.5 ), Washable.SEND_NUM_BITS)\n            nodeData.colorChanged = false\n        end\n    end\nend\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);