"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[54047],{20616(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"script/Specializations/PlaceableBoatyard","title":"PlaceableBoatyard","description":"PlaceableBoatyard","source":"@site/../docs/script/Specializations/PlaceableBoatyard.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/PlaceableBoatyard","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableBoatyard","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"PlaceableBeehivePalletSpawner","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableBeehivePalletSpawner"},"next":{"title":"PlaceableBunkerSilo","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableBunkerSilo"}}');var a=t(74848),i=t(28453);const l={},r=void 0,c={},o=[{value:"PlaceableBoatyard",id:"placeableboatyard",level:2},{value:"collectPickObjects",id:"collectpickobjects",level:3},{value:"loadFromXMLFile",id:"loadfromxmlfile",level:3},{value:"onLoad",id:"onload",level:3},{value:"onReadStream",id:"onreadstream",level:3},{value:"onWriteStream",id:"onwritestream",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3},{value:"registerFunctions",id:"registerfunctions",level:3},{value:"registerOverwrittenFunctions",id:"registeroverwrittenfunctions",level:3},{value:"registerSavegameXMLPaths",id:"registersavegamexmlpaths",level:3},{value:"registerXMLPaths",id:"registerxmlpaths",level:3},{value:"saveToXMLFile",id:"savetoxmlfile",level:3},{value:"setOwnerFarmId",id:"setownerfarmid",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"placeableboatyard",children:"PlaceableBoatyard"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Specialization for placeables"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Functions"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#collectpickobjects",children:"collectPickObjects"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#loadfromxmlfile",children:"loadFromXMLFile"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#onreadstream",children:"onReadStream"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#onwritestream",children:"onWriteStream"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#registeroverwrittenfunctions",children:"registerOverwrittenFunctions"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#registersavegamexmlpaths",children:"registerSavegameXMLPaths"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#registerxmlpaths",children:"registerXMLPaths"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#savetoxmlfile",children:"saveToXMLFile"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#setownerfarmid",children:"setOwnerFarmId"})}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"collectpickobjects",children:"collectPickObjects"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"collectPickObjects()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"superFunc"})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"node"})]})})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"function PlaceableBoatyard:collectPickObjects(superFunc, node)\n    local spec = self.spec_boatyard\n\n    for i = 1 , #spec.unloadingStation.unloadTriggers do\n        local unloadTrigger = spec.unloadingStation.unloadTriggers[i]\n        if node = = unloadTrigger.exactFillRootNode then\n            return\n        end\n    end\n\n    superFunc( self , node)\nend\n\n"})}),"\n",(0,a.jsx)(n.h3,{id:"loadfromxmlfile",children:"loadFromXMLFile"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"loadFromXMLFile()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"xmlFile"})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"key"})]})})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'function PlaceableBoatyard:loadFromXMLFile(xmlFile, key)\n    local spec = self.spec_boatyard\n\n    local stateIndex = xmlFile:getValue(key .. ".state#index" ) or 0\n    local splineTimeLoaded = xmlFile:getValue(key .. "#splineTime" )\n\n    for i = 0 , stateIndex do\n        self:setState(i)\n    end\n    if splineTimeLoaded ~ = nil then\n        self:setSplineTime(splineTimeLoaded)\n    end\n\n    local state = spec.stateMachine[spec.stateIndex]\n    state:loadFromXMLFile(xmlFile, key)\n\n    spec.storage:loadFromXMLFile(xmlFile, key .. ".storage" )\nend\n\n'})}),"\n",(0,a.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Called on loading"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"onLoad(table savegame)"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(n.table,{children:(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"table"}),(0,a.jsx)(n.th,{children:"savegame"}),(0,a.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'function PlaceableBoatyard:onLoad(savegame)\n    local spec = self.spec_boatyard\n\n    local key = "placeable.boatyard"\n\n    spec.spline = self.xmlFile:getValue(key .. "#spline" , nil , self.components, self.i3dMappings)\n    spec.splineLength = getSplineLength(spec.spline)\n    spec.splineTime = 0\n    spec.splineTimeInterpolator = InterpolationTime.new( 1.2 )\n    spec.splineInterpolator = InterpolatorValue.new( 0 )\n    spec.splineTimeDirtyFlag = self:getNextDirtyFlag()\n    spec.splineTimeChanged = false\n\n    spec.boatLinkNode = self.xmlFile:getValue(key .. "#linkNode" , nil , self.components, self.i3dMappings)\n    link(getRootNode(), spec.boatLinkNode) -- link to root flat hierarchy -> best performance\n\n    local boatI3DFilename = self.xmlFile:getValue(key .. ".boat#filename" )\n    boatI3DFilename = Utils.getFilename(boatI3DFilename, self.baseDirectory)\n    spec.boatLaunchReward = self.xmlFile:getValue(key .. ".boat#reward" , 100000 )\n\n    spec.idToMesh = { }\n    spec.meshes = { }\n\n    local arguments = {\n    loadingTask = self:createLoadingTask(spec),\n    }\n\n    spec.sharedLoadRequestId = g_i3DManager:loadSharedI3DFileAsync(boatI3DFilename, true , false , self.onBoatI3DFileLoaded, self , arguments)\n\n    spec.unloadingStation = SellingStation.new( self.isServer, self.isClient)\n    spec.unloadingStation:load( self.components, self.xmlFile, key .. ".sellingStation" , self.customEnvironment, self.i3dMappings, self.components[ 1 ].node)\n    spec.unloadingStation.owningPlaceable = self\n\n    spec.unloadingStation.getStoreGoods = function (_, farmId, fillTypeIndex)\n        return true\n    end\n    spec.unloadingStation.getSkipSell = function (_, farmId, fillTypeIndex)\n        return self:getOwnerFarmId() ~ = AccessHandler.EVERYONE\n    end\n    spec.unloadingStation.getIsFillAllowedFromFarm = function (_, farmId)\n        return true\n    end\n\n    spec.unloadingStation:register( true )\n\n    spec.storage = Storage.new( self.isServer, self.isClient)\n    spec.storage:load( self.components, self.xmlFile, key .. ".storage" , self.i3dMappings, self.baseDirectory)\n    spec.storage:register( true )\n    spec.storage:addFillLevelChangedListeners( function () self:raiseActive() end ) -- trigger update loop after storage was changed\n    spec.fillTypesAndLevelsAuxiliary = { }\n    spec.fillTypeToFillTypeStorageTable = { }\n    spec.infoTriggerFillTypesAndLevels = { }\n    spec.infoTableEntryStorage = { title = g_i18n:getText( "statistic_storage" ), accentuate = true }\n\n    spec.unloadingStation:addTargetStorage(spec.storage)\n\n    spec.playerTrigger = self.xmlFile:getValue(key .. "#playerTrigger" , nil , self.components, self.i3dMappings)\n    if spec.playerTrigger ~ = nil then\n        addTrigger(spec.playerTrigger, "playerTriggerCallback" , self )\n    end\n    spec.activatable = BoatyardActivatable.new( self )\n\n    spec.stateMachine = { }\n    spec.stateNameToIndex = { }\n    spec.stateTransitions = { }\n    spec.stateIndex = - 1\n    spec.stateMachineNextIndex = 0\n    spec.statesDirtyMask = 0 -- dirty mask for all state dirty flags to easily check if a state needs updating\n        local maxNumStates = ( 2 ^ 8 ) - 1\n\n        local stateMachineXmlKey = "placeable.boatyard.stateMachine"\n        for _, stateKey in self.xmlFile:iterator(stateMachineXmlKey .. ".states.state" ) do\n            if spec.stateMachineNextIndex > maxNumStates then\n                Logging.xmlWarning( self.xmlFile, "Maximum number of states reached(%d)" , maxNumStates)\n                break\n            end\n\n            local stateName = self.xmlFile:getValue(stateKey .. "#name" , "" ):upper()\n            if spec.stateNameToIndex[stateName] ~ = nil then\n                Logging.xmlError( self.xmlFile, "State \'%s\' already defined" , stateName, stateKey)\n                break\n            end\n\n            local stateClassName = self.xmlFile:getValue(stateKey .. "#class" , "" )\n\n            local class = ClassUtil.getClassObject(stateClassName)\n            if class = = nil then\n                Logging.xmlError( self.xmlFile, "State class \'%s\' at \'%s\' not defined" , stateClassName, stateKey)\n                break\n            end\n\n            local stateIndex = spec.stateMachineNextIndex\n            spec.stateNameToIndex[stateName] = stateIndex\n            local state = class.new( self )\n            state:load( self.xmlFile, stateKey)\n            spec.stateMachine[stateIndex] = state\n            spec.statesDirtyMask = spec.statesDirtyMask + state.dirtyFlag -- accumulate all flags from states to one mask\n\n            spec.stateMachineNextIndex = spec.stateMachineNextIndex + 1\n        end\n\n        for _, transitionKey in self.xmlFile:iterator(stateMachineXmlKey .. ".transitions.transition" ) do\n            local stateFromName = self.xmlFile:getValue(transitionKey .. "#from" , "" ):upper()\n            local stateFromIndex = spec.stateNameToIndex[stateFromName]\n            if stateFromIndex = = nil then\n                Logging.xmlError( self.xmlFile, "Invalid state.Transition from name \'%s\' not defined for \'%s\'" , stateFromName, transitionKey)\n                    break\n                end\n\n                local stateToName = self.xmlFile:getValue(transitionKey .. "#to" , "" ):upper()\n                local stateToIndex = spec.stateNameToIndex[stateToName]\n                if stateToIndex = = nil then\n                    Logging.xmlError( self.xmlFile, "Invalid state.Transition to name \'%s\' not defined for \'%s\'" , stateToName, transitionKey)\n                        break\n                    end\n\n                    spec.stateTransitions[stateFromIndex] = stateToIndex\n                end\n\n                spec.sailingSplines = { }\n                spec.boatBobbingFreq = self.xmlFile:getValue(key .. ".sailingSplines#bobbingFreq" , 1 ) / 1000 / math.pi\n                spec.boatBobbingAmount = self.xmlFile:getValue(key .. ".sailingSplines#bobbingAmount" , 0.05 )\n                spec.boatSwayingFreq = self.xmlFile:getValue(key .. ".sailingSplines#swayingFreq" , 0.8 ) / 1000 / math.pi\n                spec.boatSwayingAmount = self.xmlFile:getValue(key .. ".sailingSplines#swayingAmount" , 0.025 )\n\n                for _, sailingSplineKey in self.xmlFile:iterator(key .. ".sailingSplines.spline" ) do\n                    local sailingSpline = self.xmlFile:getValue(sailingSplineKey .. "#node" , nil , self.components, self.i3dMappings)\n                    local splineLength = getSplineLength(sailingSpline)\n\n                    table.insert(spec.sailingSplines, {\n                    node = sailingSpline,\n                    length = splineLength,\n                    } )\n                end\n\n                spec.nextSailingSplineIndex = math.random( 1 , #spec.sailingSplines)\n\n                spec.boatsSailingLinkNode = createTransformGroup( "sailingBoatsLinkNode" )\n                link(getRootNode(), spec.boatsSailingLinkNode)\n\n                spec.boatsSailing = { }\n                spec.sailingAcc = 0.2\n                spec.windSpeed = 1\n                g_currentMission.environment.weather.windUpdater:addWindChangedListener( self )\n            end\n\n'})}),"\n",(0,a.jsx)(n.h3,{id:"onreadstream",children:"onReadStream"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"onReadStream()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"streamId"})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"function PlaceableBoatyard:onReadStream(streamId, connection)\n    local spec = self.spec_boatyard\n\n    -- unloading station\n    local unloadingStationId = NetworkUtil.readNodeObjectId(streamId)\n    spec.unloadingStation:readStream(streamId, connection)\n    g_client:finishRegisterObject(spec.unloadingStation, unloadingStationId)\n\n    -- storage\n    local storageId = NetworkUtil.readNodeObjectId(streamId)\n    spec.storage:readStream(streamId, connection)\n    g_client:finishRegisterObject(spec.storage, storageId)\n\n    local stateIndex = streamReadUInt8(streamId)\n\n    for i = 0 , stateIndex do\n        self:setState(i)\n    end\n\n    local state = spec.stateMachine[stateIndex]\n    state:onReadStream(streamId, connection)\n\n    local splineTime = streamReadFloat32(streamId)\n    spec.splineTimeChanged = true\n    spec.splineInterpolator:setValue(splineTime)\n    spec.splineTimeInterpolator:reset()\n\n    for meshIndex, mesh in ipairs(spec.meshes) do\n        local hideByIndexValue = streamReadUIntN(streamId, mesh.numBits)\n        local progress = MathUtil.inverseLerp(mesh.indexMax, mesh.indexMin, hideByIndexValue)\n        self:setMeshProgress(mesh.id, progress)\n    end\n\n    spec.nextSailingSplineIndex = streamReadUInt8(streamId)\nend\n\n"})}),"\n",(0,a.jsx)(n.h3,{id:"onwritestream",children:"onWriteStream"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"onWriteStream()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"streamId"})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"function PlaceableBoatyard:onWriteStream(streamId, connection)\n    local spec = self.spec_boatyard\n\n    -- unloading station\n    NetworkUtil.writeNodeObjectId(streamId, NetworkUtil.getObjectId(spec.unloadingStation))\n    spec.unloadingStation:writeStream(streamId, connection)\n    g_server:registerObjectInStream(connection, spec.unloadingStation)\n\n    -- storage\n    NetworkUtil.writeNodeObjectId(streamId, NetworkUtil.getObjectId(spec.storage))\n    spec.storage:writeStream(streamId, connection)\n    g_server:registerObjectInStream(connection, spec.storage)\n\n    streamWriteUInt8(streamId, spec.stateIndex)\n\n    local state = spec.stateMachine[spec.stateIndex]\n    state:onWriteStream(streamId, connection)\n\n    streamWriteFloat32(streamId, spec.splineTime)\n\n    for meshIndex, mesh in ipairs(spec.meshes) do\n        streamWriteUIntN(streamId, mesh.lastValue, mesh.numBits)\n    end\n\n    streamWriteUInt8(streamId, spec.nextSailingSplineIndex)\nend\n\n"})}),"\n",(0,a.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Checks if all prerequisite specializations are loaded"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"prerequisitesPresent(table specializations)"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(n.table,{children:(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"table"}),(0,a.jsx)(n.th,{children:"specializations"}),(0,a.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,a.jsx)(n.table,{children:(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"table"}),(0,a.jsx)(n.th,{children:"hasPrerequisite"}),(0,a.jsx)(n.th,{children:"true if all prerequisite specializations are loaded"})]})})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"function PlaceableBoatyard.prerequisitesPresent(specializations)\n    return true\nend\n\n"})}),"\n",(0,a.jsx)(n.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,a.jsx)(n.table,{children:(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'function PlaceableBoatyard.registerEventListeners(placeableType)\n    SpecializationUtil.registerEventListener(placeableType, "onLoad" , PlaceableBoatyard )\n    SpecializationUtil.registerEventListener(placeableType, "onDelete" , PlaceableBoatyard )\n    SpecializationUtil.registerEventListener(placeableType, "onUpdate" , PlaceableBoatyard )\n    SpecializationUtil.registerEventListener(placeableType, "onReadStream" , PlaceableBoatyard )\n    SpecializationUtil.registerEventListener(placeableType, "onWriteStream" , PlaceableBoatyard )\n    SpecializationUtil.registerEventListener(placeableType, "onReadUpdateStream" , PlaceableBoatyard )\n    SpecializationUtil.registerEventListener(placeableType, "onWriteUpdateStream" , PlaceableBoatyard )\nend\n\n'})}),"\n",(0,a.jsx)(n.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,a.jsx)(n.table,{children:(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'function PlaceableBoatyard.registerFunctions(placeableType)\n    SpecializationUtil.registerFunction(placeableType, "onBoatI3DFileLoaded" , PlaceableBoatyard.onBoatI3DFileLoaded)\n    SpecializationUtil.registerFunction(placeableType, "setMeshProgress" , PlaceableBoatyard.setMeshProgress)\n    SpecializationUtil.registerFunction(placeableType, "setState" , PlaceableBoatyard.setState)\n    SpecializationUtil.registerFunction(placeableType, "setSplineTime" , PlaceableBoatyard.setSplineTime)\n    SpecializationUtil.registerFunction(placeableType, "addSplineDistanceDelta" , PlaceableBoatyard.addSplineDistanceDelta)\n    SpecializationUtil.registerFunction(placeableType, "getSplineTime" , PlaceableBoatyard.getSplineTime)\n    SpecializationUtil.registerFunction(placeableType, "releaseBoat" , PlaceableBoatyard.releaseBoat)\n    SpecializationUtil.registerFunction(placeableType, "createBoat" , PlaceableBoatyard.createBoat)\n    SpecializationUtil.registerFunction(placeableType, "setWindValues" , PlaceableBoatyard.setWindValues)\n    SpecializationUtil.registerFunction(placeableType, "getFillLevel" , PlaceableBoatyard.getFillLevel)\n    SpecializationUtil.registerFunction(placeableType, "removeFillLevel" , PlaceableBoatyard.removeFillLevel)\n    SpecializationUtil.registerFunction(placeableType, "playerTriggerCallback" , PlaceableBoatyard.playerTriggerCallback)\n    SpecializationUtil.registerFunction(placeableType, "buyRequest" , PlaceableBoatyard.buyRequest)\nend\n\n'})}),"\n",(0,a.jsx)(n.h3,{id:"registeroverwrittenfunctions",children:"registerOverwrittenFunctions"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"registerOverwrittenFunctions()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,a.jsx)(n.table,{children:(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'function PlaceableBoatyard.registerOverwrittenFunctions(placeableType)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "collectPickObjects" , PlaceableBoatyard.collectPickObjects)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "updateInfo" , PlaceableBoatyard.updateInfo)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "setOwnerFarmId" , PlaceableBoatyard.setOwnerFarmId)\nend\n\n'})}),"\n",(0,a.jsx)(n.h3,{id:"registersavegamexmlpaths",children:"registerSavegameXMLPaths"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"registerSavegameXMLPaths()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"schema"})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"basePath"})]})})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'function PlaceableBoatyard.registerSavegameXMLPaths(schema, basePath)\n    schema:register(XMLValueType.INT, basePath .. ".state#index" , "" )\n    schema:register(XMLValueType.FLOAT, basePath .. "#splineTime" , "" )\n\n    BoatyardStateBuilding.registerSavegameXMLPaths(schema, basePath)\n\n    Storage.registerSavegameXMLPaths(schema, basePath .. ".storage" )\nend\n\n'})}),"\n",(0,a.jsx)(n.h3,{id:"registerxmlpaths",children:"registerXMLPaths"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"registerXMLPaths()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"schema"})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"basePath"})]})})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'function PlaceableBoatyard.registerXMLPaths(schema, basePath)\n    schema:setXMLSpecializationType( "Boatyard" )\n\n    schema:register(XMLValueType.NODE_INDEX, basePath .. ".boatyard#spline" , "" )\n    schema:register(XMLValueType.NODE_INDEX, basePath .. ".boatyard#linkNode" , "" )\n\n    schema:register(XMLValueType.NODE_INDEX, basePath .. ".boatyard#playerTrigger" , "" )\n\n    schema:register(XMLValueType.STRING, basePath .. ".boatyard.boat#filename" , "" )\n    schema:register(XMLValueType.INT, basePath .. ".boatyard.boat#reward" , "" )\n    schema:register(XMLValueType.NODE_INDEX, basePath .. ".boatyard.boat.progressiveVisibilityMesh.mesh(?)#node" , "" )\n    schema:register(XMLValueType.STRING, basePath .. ".boatyard.boat.progressiveVisibilityMesh.mesh(?)#id" , "" )\n    schema:register(XMLValueType.INT, basePath .. ".boatyard.boat.progressiveVisibilityMesh.mesh(?)#indexMin" , "" )\n    schema:register(XMLValueType.INT, basePath .. ".boatyard.boat.progressiveVisibilityMesh.mesh(?)#indexMax" , "" )\n\n    schema:register(XMLValueType.STRING, basePath .. ".boatyard.stateMachine.states.state(?)#name" , "State name" )\n    schema:register(XMLValueType.STRING, basePath .. ".boatyard.stateMachine.states.state(?)#class" , "State class" )\n    BoatyardState.registerXMLPaths(schema, basePath .. ".boatyard.stateMachine.states.state(?)" )\n    BoatyardStateMoving.registerXMLPaths(schema, basePath .. ".boatyard.stateMachine.states.state(?)" )\n    BoatyardStateBuilding.registerXMLPaths(schema, basePath .. ".boatyard.stateMachine.states.state(?)" )\n    BoatyardStateLaunching.registerXMLPaths(schema, basePath .. ".boatyard.stateMachine.states.state(?)" )\n\n    schema:register(XMLValueType.STRING, basePath .. ".boatyard.stateMachine.transitions.transition(?)#from" , "State name from" )\n    schema:register(XMLValueType.STRING, basePath .. ".boatyard.stateMachine.transitions.transition(?)#to" , "State name to" )\n\n    schema:register(XMLValueType.FLOAT, basePath .. ".boatyard.sailingSplines#bobbingFreq" , "" )\n    schema:register(XMLValueType.FLOAT, basePath .. ".boatyard.sailingSplines#bobbingAmount" , "" )\n    schema:register(XMLValueType.FLOAT, basePath .. ".boatyard.sailingSplines#swayingFreq" , "" )\n    schema:register(XMLValueType.FLOAT, basePath .. ".boatyard.sailingSplines#swayingAmount" , "" )\n    schema:register(XMLValueType.NODE_INDEX, basePath .. ".boatyard.sailingSplines.spline(?)#node" , "" )\n\n    SellingStation.registerXMLPaths(schema, basePath .. ".boatyard.sellingStation" )\n    Storage.registerXMLPaths(schema , basePath .. ".boatyard.storage" )\n\n    schema:setXMLSpecializationType()\nend\n\n'})}),"\n",(0,a.jsx)(n.h3,{id:"savetoxmlfile",children:"saveToXMLFile"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"saveToXMLFile()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"xmlFile"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"key"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"usedModNames"})]})]})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'function PlaceableBoatyard:saveToXMLFile(xmlFile, key, usedModNames)\n    local spec = self.spec_boatyard\n\n    if spec.stateIndex > 0 then\n        xmlFile:setValue(key .. ".state#index" , spec.stateIndex)\n        xmlFile:setValue(key .. "#splineTime" , spec.splineTime)\n\n        local state = spec.stateMachine[spec.stateIndex]\n\n        state:saveToXMLFile(xmlFile, key, usedModNames)\n    end\n\n    spec.storage:saveToXMLFile(xmlFile, key .. ".storage" )\nend\n\n'})}),"\n",(0,a.jsx)(n.h3,{id:"setownerfarmid",children:"setOwnerFarmId"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Description"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Definition"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"setOwnerFarmId()"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"any"}),(0,a.jsx)(n.th,{children:"superFunc"})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"any"}),(0,a.jsx)(n.td,{children:"farmId"})]})})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Code"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"function PlaceableBoatyard:setOwnerFarmId(superFunc, farmId)\n    superFunc( self , farmId)\n\n    local spec = self.spec_boatyard\n\n    if spec.unloadingStation ~ = nil then\n        -- remove from selling station overview if owned, as it does not generate revenue upon deliver anymore\n            if farmId = = AccessHandler.EVERYONE then\n                g_currentMission.storageSystem:addUnloadingStation(spec.unloadingStation, self )\n                g_currentMission.economyManager:addSellingStation(spec.unloadingStation)\n            else\n                    g_currentMission.economyManager:removeSellingStation(spec.unloadingStation)\n                    g_currentMission.storageSystem:removeUnloadingStation(spec.unloadingStation, self )\n                end\n            end\n\n            if spec.playerTrigger ~ = nil then\n                setVisibility(spec.playerTrigger, farmId = = AccessHandler.EVERYONE) -- or farmId = = g_currentMission:getFarmId()\n            end\n        end\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},28453(e,n,t){t.d(n,{R:()=>l,x:()=>r});var s=t(96540);const a={},i=s.createContext(a);function l(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);