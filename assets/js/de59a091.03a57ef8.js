"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[9749],{28453(n,e,i){i.d(e,{R:()=>s,x:()=>r});var t=i(96540);const l={},c=t.createContext(l);function s(n){const e=t.useContext(c);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:s(n.components),t.createElement(c.Provider,{value:e},n.children)}},85262(n,e,i){i.r(e),i.d(e,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"script/Vehicles/VehicleActionController","title":"VehicleActionController","description":"VehicleActionController","source":"@site/../docs/script/Vehicles/VehicleActionController.md","sourceDirName":"script/Vehicles","slug":"/script/Vehicles/VehicleActionController","permalink":"/FS25-Community-LUADOC/script/Vehicles/VehicleActionController","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Vehicle","permalink":"/FS25-Community-LUADOC/script/Vehicles/Vehicle"},"next":{"title":"VehicleActionControllerAction","permalink":"/FS25-Community-LUADOC/script/Vehicles/VehicleActionControllerAction"}}');var l=i(74848),c=i(28453);const s={},r=void 0,o={},d=[{value:"VehicleActionController",id:"vehicleactioncontroller",level:2},{value:"actionEvent",id:"actionevent",level:3},{value:"actionSequenceEvent",id:"actionsequenceevent",level:3},{value:"activate",id:"activate",level:3},{value:"addAction",id:"addaction",level:3},{value:"continueActionSequence",id:"continueactionsequence",level:3},{value:"deactivate",id:"deactivate",level:3},{value:"doAction",id:"doaction",level:3},{value:"drawDebugRendering",id:"drawdebugrendering",level:3},{value:"getActionControllerDirection",id:"getactioncontrollerdirection",level:3},{value:"getActionsByIndex",id:"getactionsbyindex",level:3},{value:"getAreControlledActionsAccessible",id:"getarecontrolledactionsaccessible",level:3},{value:"getAreControlledActionsAvailable",id:"getarecontrolledactionsavailable",level:3},{value:"getControlledActionIcons",id:"getcontrolledactionicons",level:3},{value:"load",id:"load",level:3},{value:"new",id:"new",level:3},{value:"onAIEvent",id:"onaievent",level:3},{value:"playControlledActions",id:"playcontrolledactions",level:3},{value:"registerAction",id:"registeraction",level:3},{value:"registerActionEvents",id:"registeractionevents",level:3},{value:"registerXMLPaths",id:"registerxmlpaths",level:3},{value:"removeAction",id:"removeaction",level:3},{value:"resetCurrentState",id:"resetcurrentstate",level:3},{value:"saveToXMLFile",id:"savetoxmlfile",level:3},{value:"startActionSequence",id:"startactionsequence",level:3},{value:"stopActionSequence",id:"stopactionsequence",level:3},{value:"update",id:"update",level:3},{value:"updateForAI",id:"updateforai",level:3},{value:"updateSortedActions",id:"updatesortedactions",level:3}];function a(n){const e={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.h2,{id:"vehicleactioncontroller",children:"VehicleActionController"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"Copyright (C) GIANTS Software GmbH, Confidential, All Rights Reserved."}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Functions"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#actionevent",children:"actionEvent"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#actionsequenceevent",children:"actionSequenceEvent"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#activate",children:"activate"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#addaction",children:"addAction"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#continueactionsequence",children:"continueActionSequence"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#deactivate",children:"deactivate"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#doaction",children:"doAction"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#drawdebugrendering",children:"drawDebugRendering"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#getactioncontrollerdirection",children:"getActionControllerDirection"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#getactionsbyindex",children:"getActionsByIndex"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#getarecontrolledactionsaccessible",children:"getAreControlledActionsAccessible"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#getarecontrolledactionsavailable",children:"getAreControlledActionsAvailable"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#getcontrolledactionicons",children:"getControlledActionIcons"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#load",children:"load"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#new",children:"new"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#onaievent",children:"onAIEvent"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#playcontrolledactions",children:"playControlledActions"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#registeraction",children:"registerAction"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#registeractionevents",children:"registerActionEvents"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#registerxmlpaths",children:"registerXMLPaths"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#removeaction",children:"removeAction"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#resetcurrentstate",children:"resetCurrentState"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#savetoxmlfile",children:"saveToXMLFile"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#startactionsequence",children:"startActionSequence"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#stopactionsequence",children:"stopActionSequence"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#update",children:"update"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#updateforai",children:"updateForAI"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"#updatesortedactions",children:"updateSortedActions"})}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"actionevent",children:"actionEvent"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"actionEvent()"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"any"}),(0,l.jsx)(e.th,{children:"actionName"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"any"}),(0,l.jsx)(e.td,{children:"inputValue"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"any"}),(0,l.jsx)(e.td,{children:"actionIndex"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"any"}),(0,l.jsx)(e.td,{children:"isAnalog"})]})]})]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:"function VehicleActionController:actionEvent(actionName, inputValue, actionIndex, isAnalog)\n    self:doAction(actionIndex)\nend\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"actionsequenceevent",children:"actionSequenceEvent"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"actionSequenceEvent()"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:"function VehicleActionController:actionSequenceEvent()\n    if self.loadedNumActions ~ = 0 then -- don't play the controlled action if pressed directly after loading since we first apply the last state\n        return\n    end\n\n    if self.vehicle.getAreControlledActionsAccessible ~ = nil then\n        if not self.vehicle:getAreControlledActionsAccessible() then\n            return\n        end\n    end\n\n    if self.vehicle.getAreControlledActionsAvailable ~ = nil then\n        if not self.vehicle:getAreControlledActionsAvailable() then\n            return\n        end\n\n        local allowed, warning = self.vehicle:getAreControlledActionsAllowed()\n        if not allowed then\n            if warning ~ = nil then\n                g_currentMission:showBlinkingWarning(warning, 2500 )\n            end\n\n            return\n        end\n    end\n\n    self:startActionSequence()\nend\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"activate",children:"activate"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"activate()"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:"function VehicleActionController:activate()\n    if self.pendingControllerReactivation then\n        if self.vehicle = = self.vehicle.rootVehicle then\n            -- reactivation of the controlled actions\n            -- some of them might have been turned of by the deactivation of the vehicle(e.g.turnOn)\n            -- we avoid a complete deactivation of the controlled actions in:deactivate() to keep the current folding and lowered state\n            -- so it's not too annoying while just switching to another vehicle\n                self.lastDirection = - self.lastDirection\n                self:startActionSequence( true )\n            end\n\n            self.pendingControllerReactivation = false\n        end\n    end\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"addaction",children:"addAction"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"addAction()"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(e.table,{children:(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"any"}),(0,l.jsx)(e.th,{children:"action"})]})})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:"function VehicleActionController:addAction(action)\n    table.insert( self.actions, action)\n\n    self:updateSortedActions()\n\n    self.actionsDirty = true\n\n    self.vehicle:requestActionEventUpdate()\nend\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"continueactionsequence",children:"continueActionSequence"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"continueActionSequence()"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:"function VehicleActionController:continueActionSequence()\n    self.currentSequenceIndex = self.currentSequenceIndex + 1\n    local success = self:doAction( self.currentSequenceIndex, self.currentSequenceActions, self.lastDirection)\n\n    if self.currentSequenceIndex > = self.currentMaxSequenceIndex then\n        self:stopActionSequence()\n    else\n            if not success then\n                self:continueActionSequence()\n            end\n        end\n    end\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"deactivate",children:"deactivate"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"deactivate()"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:"function VehicleActionController:deactivate()\n    if self.vehicle = = self.vehicle.rootVehicle then\n        if self.lastDirection > 0 then\n            self.pendingControllerReactivation = true\n        end\n    end\nend\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"doaction",children:"doAction"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"doAction()"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"any"}),(0,l.jsx)(e.th,{children:"actionIndex"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"any"}),(0,l.jsx)(e.td,{children:"customTable"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"any"}),(0,l.jsx)(e.td,{children:"direction"})]})]})]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:"function VehicleActionController:doAction(actionIndex, customTable, direction)\n    local actions = self:getActionsByIndex(actionIndex, customTable)\n\n    if actions ~ = nil then\n        local retValue = false\n        for _, action in ipairs(actions) do\n            local success = action:doAction(direction)\n            retValue = retValue or success\n        end\n\n        return retValue\n    end\n\n    return false\nend\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"drawdebugrendering",children:"drawDebugRendering"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"drawDebugRendering()"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:'function VehicleActionController:drawDebugRendering()\n    local renderTextVAC = function (x, y, height, text, color)\n        setTextColor( 0.0 , 0.0 , 0.0 , 0.75 )\n        renderText(x, y - 0.0015 , height, text)\n\n        color = color or { 1 , 1 , 1 , 1 }\n        setTextColor( unpack(color))\n        renderText(x, y, height, text)\n    end\n\n    local drawActions = function (name, sequenceActions, highlightIndex, posX, posY)\n        if sequenceActions ~ = nil and #sequenceActions > 0 then\n            setTextBold( false )\n            setTextAlignment(RenderText.ALIGN_CENTER)\n            local textHeight = 0.012\n            local lineSpacing = 0.002\n            local lineHeight = textHeight + lineSpacing\n\n            local currentHeight = 0\n            for i = #sequenceActions, 1 , - 1 do\n                local actions = sequenceActions[i]\n\n                setTextBold(highlightIndex = = i)\n                local color\n                if i < highlightIndex then\n                    color = { 0 , 1 , 0 , 1 }\n                elseif i = = highlightIndex then\n                        color = { 1 , 0.5 , 0 , 1 }\n                    end\n\n                    for _, action in ipairs(actions) do\n                        renderTextVAC(posX, posY + currentHeight, textHeight, action:getDebugText(), color)\n                        currentHeight = currentHeight + lineHeight\n                    end\n\n                    renderTextVAC(posX, posY + currentHeight + lineHeight * 0.5 , textHeight, "__________________________" )\n                    currentHeight = currentHeight + lineHeight\n                end\n\n                renderTextVAC(posX, posY + currentHeight + lineHeight * 0.5 , textHeight * 1.5 , name)\n\n                setTextBold( false )\n                setTextAlignment(RenderText.ALIGN_LEFT)\n            end\n        end\n\n        -- all actions\n        drawActions( string.format( "Controlled Actions(%s)" , self.lastDirection = = 1 and "On" or "Off" ), self.sortedActions, - 1 , 0.2 , 0.3 )\n\n        -- current action sequence\n        local directionText = self.lastDirection = = 1 and "TurnOn" or "TurnOff"\n        drawActions( string.format( "Current Action Sequence(%s)" , directionText), self.currentSequenceActions, self.currentSequenceIndex, 0.4 , 0.3 )\n    end\n\n'})}),"\n",(0,l.jsx)(e.h3,{id:"getactioncontrollerdirection",children:"getActionControllerDirection"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"getActionControllerDirection()"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:"function VehicleActionController:getActionControllerDirection()\n    return - self.lastDirection\nend\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"getactionsbyindex",children:"getActionsByIndex"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"getActionsByIndex()"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"any"}),(0,l.jsx)(e.th,{children:"actionIndex"})]})}),(0,l.jsx)(e.tbody,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"any"}),(0,l.jsx)(e.td,{children:"customTable"})]})})]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:"function VehicleActionController:getActionsByIndex(actionIndex, customTable)\n    if customTable ~ = nil then\n        return customTable[actionIndex]\n    else\n            return self.actionsByPrio[actionIndex]\n        end\n    end\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"getarecontrolledactionsaccessible",children:"getAreControlledActionsAccessible"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"getAreControlledActionsAccessible()"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:"function VehicleActionController:getAreControlledActionsAccessible()\n    for i = 1 , # self.actions do\n        if not self.actions[i]:isAccessible() then\n            return false\n        end\n    end\n\n    return # self.actions > 0\nend\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"getarecontrolledactionsavailable",children:"getAreControlledActionsAvailable"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"getAreControlledActionsAvailable()"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:"function VehicleActionController:getAreControlledActionsAvailable()\n    for i = 1 , # self.actions do\n        if not self.actions[i]:isAvailable() then\n            return false\n        end\n    end\n\n    return # self.actions > 0\nend\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"getcontrolledactionicons",children:"getControlledActionIcons"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"getControlledActionIcons()"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:"function VehicleActionController:getControlledActionIcons()\n    for i = 1 , # self.actions do\n        local iconPos, iconNeg, changeColor = self.actions[i]:getControlledActionIcons()\n        if iconPos ~ = nil then\n            return iconPos, iconNeg, changeColor\n        end\n    end\n\n    return nil\nend\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"load",children:"load"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"load()"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(e.table,{children:(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"any"}),(0,l.jsx)(e.th,{children:"savegame"})]})})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:'function VehicleActionController:load(savegame)\n    if savegame ~ = nil and not savegame.resetVehicles then\n        self.lastDirection = savegame.xmlFile:getValue(savegame.key .. ".actionController#lastDirection" , self.lastDirection)\n        self.loadedNumActions = savegame.xmlFile:getValue(savegame.key .. ".actionController#numActions" , 0 )\n        self.loadTime = g_ time\n\n        local needsToApply = false\n\n        self.loadedActions = { }\n        local i = 0\n        while true do\n            local baseKey = string.format( "%s.actionController.action(%d)" , savegame.key, i)\n            if not savegame.xmlFile:hasProperty(baseKey) then\n                break\n            end\n\n            local action = { }\n            action.name = savegame.xmlFile:getValue(baseKey .. "#name" )\n            action.identifier = savegame.xmlFile:getValue(baseKey .. "#identifier" )\n            action.lastDirection = savegame.xmlFile:getValue(baseKey .. "#lastDirection" )\n            if action.lastDirection > 0 then\n                needsToApply = true\n            end\n\n            table.insert( self.loadedActions, action)\n\n            i = i + 1\n        end\n        if not needsToApply then\n            self.loadedNumActions = 0\n            self.loadedActions = { }\n        end\n    end\nend\n\n'})}),"\n",(0,l.jsx)(e.h3,{id:"new",children:"new"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"new()"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"any"}),(0,l.jsx)(e.th,{children:"vehicle"})]})}),(0,l.jsx)(e.tbody,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"any"}),(0,l.jsx)(e.td,{children:"customMt"})]})})]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:"function VehicleActionController.new(vehicle, customMt)\n    local self = setmetatable( { } , customMt or VehicleActionController _mt)\n\n    self.vehicle = vehicle\n    self.actions = { }\n    self.actionsByPrio = { }\n    self.sortedActions = { }\n    self.sortedActionsRev = { }\n    self.currentSequenceActions = { }\n    self.actionEvents = { }\n\n    self.lastDirection = - 1\n    self.pendingControllerReactivation = false\n\n    self.loadedNumActions = 0\n\n    return self\nend\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"onaievent",children:"onAIEvent"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"onAIEvent()"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"any"}),(0,l.jsx)(e.th,{children:"sourceVehicle"})]})}),(0,l.jsx)(e.tbody,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"any"}),(0,l.jsx)(e.td,{children:"eventName"})]})})]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:"function VehicleActionController:onAIEvent(sourceVehicle, eventName)\n    for _, action in ipairs( self.actions) do\n        if action:getSourceVehicle() = = sourceVehicle then\n            action:onAIEvent(eventName)\n        end\n    end\nend\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"playcontrolledactions",children:"playControlledActions"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"playControlledActions()"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:"function VehicleActionController:playControlledActions()\n    if self.loadedNumActions = = 0 then -- don't play the controlled action if pressed directly after loading since we first apply the last state\n        self:startActionSequence()\n    end\nend\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"registeraction",children:"registerAction"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"registerAction()"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"any"}),(0,l.jsx)(e.th,{children:"name"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"any"}),(0,l.jsx)(e.td,{children:"inputAction"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"any"}),(0,l.jsx)(e.td,{children:"prio"})]})]})]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:"function VehicleActionController:registerAction(name, inputAction, prio)\n    local action = VehicleActionControllerAction.new( self , name, inputAction, prio)\n    self:addAction(action)\n\n    return action\nend\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"registeractionevents",children:"registerActionEvents"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"registerActionEvents()"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"any"}),(0,l.jsx)(e.th,{children:"isActiveForInput"})]})}),(0,l.jsx)(e.tbody,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"any"}),(0,l.jsx)(e.td,{children:"isActiveForInputIgnoreSelection"})]})})]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:"function VehicleActionController:registerActionEvents(isActiveForInput, isActiveForInputIgnoreSelection)\n    if # self.actions > 0 and self.vehicle.rootVehicle = = self.vehicle then\n        self.vehicle:clearActionEventsTable( self.actionEvents)\n        for _, action in ipairs( self.actions) do\n            action:registerActionEvents( self , self.vehicle, self.actionEvents, isActiveForInput, isActiveForInputIgnoreSelection)\n        end\n\n        if self.actionEventId ~ = nil then\n            g_inputBinding:removeActionEvent( self.actionEventId)\n        end\n\n        local _, actionEventId, _ = g_inputBinding:registerActionEvent(InputAction.VEHICLE_ACTION_CONTROL, self , VehicleActionController.actionSequenceEvent, false , true , false , true )\n        self.actionEventId = actionEventId\n    end\nend\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"registerxmlpaths",children:"registerXMLPaths"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"registerXMLPaths()"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"any"}),(0,l.jsx)(e.th,{children:"schema"})]})}),(0,l.jsx)(e.tbody,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"any"}),(0,l.jsx)(e.td,{children:"basePath"})]})})]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:'function VehicleActionController.registerXMLPaths(schema, basePath)\n    schema:register(XMLValueType.INT, basePath .. "#lastDirection" , "Last action controller direction" )\n    schema:register(XMLValueType.INT, basePath .. "#numActions" , "Action controller actions" )\n    schema:register(XMLValueType.STRING, basePath .. ".action(?)#name" , "Action name" )\n    schema:register(XMLValueType.STRING, basePath .. ".action(?)#identifier" , "Action identifier" )\n    schema:register(XMLValueType.INT, basePath .. ".action(?)#lastDirection" , "Last action direction" )\nend\n\n'})}),"\n",(0,l.jsx)(e.h3,{id:"removeaction",children:"removeAction"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"removeAction()"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(e.table,{children:(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"any"}),(0,l.jsx)(e.th,{children:"action"})]})})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:"function VehicleActionController:removeAction(action)\n    if Platform.gameplay.automaticVehicleControl then\n        if action:getLastDirection() = = 1 then\n            if action:getDoResetOnDeactivation() then\n                action:doAction()\n            end\n        end\n    end\n\n    for i, v in ipairs( self.actions) do\n        if v = = action then\n            table.remove( self.actions, i)\n            break\n        end\n    end\n\n    -- reset direction state if no actions connected\n        if # self.actions = = 0 then\n            self.lastDirection = - 1\n        end\n\n        self:updateSortedActions()\n    end\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"resetcurrentstate",children:"resetCurrentState"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"resetCurrentState()"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:"function VehicleActionController:resetCurrentState()\n    self.lastDirection = - 1\nend\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"savetoxmlfile",children:"saveToXMLFile"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"saveToXMLFile()"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"any"}),(0,l.jsx)(e.th,{children:"xmlFile"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"any"}),(0,l.jsx)(e.td,{children:"key"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"any"}),(0,l.jsx)(e.td,{children:"usedModNames"})]})]})]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:'function VehicleActionController:saveToXMLFile(xmlFile, key, usedModNames)\n    if # self.actions > 0 then\n        xmlFile:setValue(key .. "#lastDirection" , self.lastDirection)\n        xmlFile:setValue(key .. "#numActions" , # self.actions)\n\n        local i = 0\n        for _, action in ipairs( self.actions) do\n            if action:getIsSaved() then\n                local actionKey = string.format( "%s.action(%d)" , key, i)\n                xmlFile:setValue(actionKey .. "#name" , action.name)\n                xmlFile:setValue(actionKey .. "#identifier" , action.identifier)\n                xmlFile:setValue(actionKey .. "#lastDirection" , action:getLastDirection())\n                i = i + 1\n            end\n        end\n    end\nend\n\n'})}),"\n",(0,l.jsx)(e.h3,{id:"startactionsequence",children:"startActionSequence"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"startActionSequence()"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(e.table,{children:(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"any"}),(0,l.jsx)(e.th,{children:"force"})]})})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:"function VehicleActionController:startActionSequence(force)\n    local direction = - self.lastDirection\n\n    self.currentSequenceActions = self.sortedActionsRev\n    if direction > 0 then\n        self.currentSequenceActions = self.sortedActions\n    end\n\n    if not force then\n        local alreadyFinished = true\n        for _, actions in ipairs( self.currentSequenceActions) do\n            for _, action in ipairs(actions) do\n                local finished = action.lastValidDirection = = direction\n                alreadyFinished = alreadyFinished and finished\n            end\n        end\n\n        -- if we are already in the target state we restart the sequence to flip the direction\n            if alreadyFinished then\n                self.lastDirection = direction\n                self:startActionSequence( true )\n                return\n            end\n        end\n\n        if self.currentSequenceIndex ~ = nil then\n            self.currentSequenceIndex = self.currentMaxSequenceIndex - ( self.currentSequenceIndex - 1 )\n        else\n                self.currentSequenceIndex = 1\n                self.currentMaxSequenceIndex = # self.currentSequenceActions\n            end\n\n            self.lastDirection = direction\n            if not self:doAction( self.currentSequenceIndex, self.currentSequenceActions, self.lastDirection) then\n                if self.currentMaxSequenceIndex = = 1 then\n                    -- failed to even execute one action, so we keep the direction\n                    self.lastDirection = - direction\n                    self:stopActionSequence()\n                else\n                        self:continueActionSequence()\n                    end\n                end\n            end\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"stopactionsequence",children:"stopActionSequence"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"stopActionSequence()"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:"function VehicleActionController:stopActionSequence()\n    self.currentSequenceActions = nil\n    self.currentSequenceIndex = nil\n    self.currentMaxSequenceIndex = nil\nend\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"update",children:"update"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"update()"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(e.table,{children:(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"any"}),(0,l.jsx)(e.th,{children:"dt"})]})})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:"function VehicleActionController:update(dt)\n    if self.currentSequenceIndex ~ = nil then\n        if self.currentSequenceIndex < = self.currentMaxSequenceIndex then\n            local actions = self:getActionsByIndex( self.currentSequenceIndex, self.currentSequenceActions)\n            if actions ~ = nil then\n                local allFinished = true\n                for _, action in ipairs(actions) do\n                    if not action:getIsFinished( self.lastDirection) then\n                        allFinished = false\n                        break\n                    end\n                end\n\n                if allFinished then\n                    if self.currentSequenceIndex < self.currentMaxSequenceIndex then\n                        self:continueActionSequence()\n                    else\n                            self:stopActionSequence()\n                        end\n                    end\n                end\n            end\n        end\n\n        for _, action in ipairs( self.actions) do\n            action:update(dt)\n        end\n\n        -- apply the loaded state from savegame to the actions\n        if self.loadedNumActions ~ = 0 and self.loadedNumActions = = # self.actions and self.loadTime + 500 < g_ time then\n            local isStarted = true\n            if self.vehicle.getIsMotorStarted ~ = nil then\n                isStarted = self.vehicle:getIsMotorStarted()\n            end\n\n            if isStarted then\n                for _, loadedAction in ipairs( self.loadedActions) do\n                    for _, actionToCheck in ipairs( self.actions) do\n                        if actionToCheck.name = = loadedAction.name then\n                            if actionToCheck.identifier = = loadedAction.identifier then\n                                if actionToCheck:getLastDirection() ~ = loadedAction.lastDirection then\n                                    actionToCheck:doAction()\n                                end\n                            end\n                        end\n                    end\n                end\n                self.loadedNumActions = 0\n                self.actionsDirty = false\n            end\n        end\n\n        -- if a new action was added we check if the action has a different direction than the controller and if so, we execute the action\n            if self.actionsDirty and self.loadedNumActions = = 0 then\n                for _, action in ipairs( self.actions) do\n                    if action:getLastDirection() ~ = self.lastDirection then\n                        action:doAction()\n                    end\n                end\n\n                self.actionsDirty = nil\n            end\n        end\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"updateforai",children:"updateForAI"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"updateForAI()"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,l.jsx)(e.table,{children:(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"any"}),(0,l.jsx)(e.th,{children:"dt"})]})})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:"function VehicleActionController:updateForAI(dt)\n    for _, action in ipairs( self.actions) do\n        action:updateForAI(dt)\n    end\nend\n\n"})}),"\n",(0,l.jsx)(e.h3,{id:"updatesortedactions",children:"updateSortedActions"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Description"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Definition"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"updateSortedActions()"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Code"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-lua",children:"function VehicleActionController:updateSortedActions()\n    local prioToActionTable = { }\n    self.actionsByPrio = { }\n    for _, action in ipairs( self.actions) do\n        if prioToActionTable[action.priority] = = nil then\n            local prioTable = { action }\n            table.insert( self.actionsByPrio, prioTable)\n\n            prioToActionTable[action.priority] = prioTable\n        else\n                table.insert(prioToActionTable[action.priority], action)\n            end\n        end\n\n        local sortFunc = function (a, b) return a[ 1 ].priority > b[ 1 ].priority end\n        self.sortedActions = table.clone( self.actionsByPrio)\n        table.sort( self.sortedActions, sortFunc)\n\n        local sortFuncRev = function (a, b) return a[ 1 ].priority < b[ 1 ].priority end\n        self.sortedActionsRev = table.clone( self.actionsByPrio)\n        table.sort( self.sortedActionsRev, sortFuncRev)\n    end\n\n"})})]})}function h(n={}){const{wrapper:e}={...(0,c.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(a,{...n})}):a(n)}}}]);