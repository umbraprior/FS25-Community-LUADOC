"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[92086],{28453(n,e,s){s.d(e,{R:()=>r,x:()=>t});var l=s(96540);const i={},a=l.createContext(i);function r(n){const e=l.useContext(a);return l.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:r(n.components),l.createElement(a.Provider,{value:e},n.children)}},61863(n,e,s){s.r(e),s.d(e,{assets:()=>d,contentTitle:()=>t,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>c});const l=JSON.parse('{"id":"script/Specializations/PlaceableHusbandryAnimals","title":"PlaceableHusbandryAnimals","description":"PlaceableHusbandryAnimals","source":"@site/../docs/script/Specializations/PlaceableHusbandryAnimals.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/PlaceableHusbandryAnimals","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableHusbandryAnimals","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"PlaceableHusbandry","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableHusbandry"},"next":{"title":"PlaceableHusbandryFeedingRobot","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableHusbandryFeedingRobot"}}');var i=s(74848),a=s(28453);const r={},t=void 0,d={},c=[{value:"PlaceableHusbandryAnimals",id:"placeablehusbandryanimals",level:2},{value:"addAnimals",id:"addanimals",level:3},{value:"addCluster",id:"addcluster",level:3},{value:"canBeSold",id:"canbesold",level:3},{value:"consoleCommandAddAnimals",id:"consolecommandaddanimals",level:3},{value:"createHusbandry",id:"createhusbandry",level:3},{value:"getAnimalCanBeRidden",id:"getanimalcanberidden",level:3},{value:"getAnimalDescription",id:"getanimaldescription",level:3},{value:"getAnimalInfos",id:"getanimalinfos",level:3},{value:"getAnimalSupportsRiding",id:"getanimalsupportsriding",level:3},{value:"getAnimalTypeIndex",id:"getanimaltypeindex",level:3},{value:"getCluster",id:"getcluster",level:3},{value:"getClusterById",id:"getclusterbyid",level:3},{value:"getClusters",id:"getclusters",level:3},{value:"getClusterSystem",id:"getclustersystem",level:3},{value:"getConditionInfos",id:"getconditioninfos",level:3},{value:"getIsInAnimalDeliveryArea",id:"getisinanimaldeliveryarea",level:3},{value:"getMaxNumOfAnimals",id:"getmaxnumofanimals",level:3},{value:"getNeedDayChanged",id:"getneeddaychanged",level:3},{value:"getNumOfAnimals",id:"getnumofanimals",level:3},{value:"getNumOfClusters",id:"getnumofclusters",level:3},{value:"getNumOfFreeAnimalSlots",id:"getnumoffreeanimalslots",level:3},{value:"getSpecValueNumberAnimals",id:"getspecvaluenumberanimals",level:3},{value:"getSupportsAnimalSubType",id:"getsupportsanimalsubtype",level:3},{value:"initSpecialization",id:"initspecialization",level:3},{value:"loadDeliveryArea",id:"loaddeliveryarea",level:3},{value:"loadFromXMLFile",id:"loadfromxmlfile",level:3},{value:"loadSpecValueNumberAnimals",id:"loadspecvaluenumberanimals",level:3},{value:"onDayChanged",id:"ondaychanged",level:3},{value:"onDelete",id:"ondelete",level:3},{value:"onExternalNavigationMeshLoaded",id:"onexternalnavigationmeshloaded",level:3},{value:"onFinalizePlacement",id:"onfinalizeplacement",level:3},{value:"onLoad",id:"onload",level:3},{value:"onLoadedRideable",id:"onloadedrideable",level:3},{value:"onMissionStarted",id:"onmissionstarted",level:3},{value:"onPeriodChanged",id:"onperiodchanged",level:3},{value:"onReadStream",id:"onreadstream",level:3},{value:"onUpdate",id:"onupdate",level:3},{value:"onWriteStream",id:"onwritestream",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3},{value:"registerEvents",id:"registerevents",level:3},{value:"registerFunctions",id:"registerfunctions",level:3},{value:"registerOverwrittenFunctions",id:"registeroverwrittenfunctions",level:3},{value:"registerSavegameXMLPaths",id:"registersavegamexmlpaths",level:3},{value:"registerXMLPaths",id:"registerxmlpaths",level:3},{value:"renameAnimal",id:"renameanimal",level:3},{value:"saveToXMLFile",id:"savetoxmlfile",level:3},{value:"startRiding",id:"startriding",level:3},{value:"updatedClusters",id:"updatedclusters",level:3},{value:"updateInfo",id:"updateinfo",level:3},{value:"updateOutput",id:"updateoutput",level:3},{value:"updateVisualAnimals",id:"updatevisualanimals",level:3}];function o(n){const e={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h2,{id:"placeablehusbandryanimals",children:"PlaceableHusbandryAnimals"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"Specialization for placeables"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Functions"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#addanimals",children:"addAnimals"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#addcluster",children:"addCluster"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#canbesold",children:"canBeSold"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#consolecommandaddanimals",children:"consoleCommandAddAnimals"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#createhusbandry",children:"createHusbandry"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#getanimalcanberidden",children:"getAnimalCanBeRidden"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#getanimaldescription",children:"getAnimalDescription"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#getanimalinfos",children:"getAnimalInfos"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#getanimalsupportsriding",children:"getAnimalSupportsRiding"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#getanimaltypeindex",children:"getAnimalTypeIndex"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#getcluster",children:"getCluster"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#getclusterbyid",children:"getClusterById"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#getclusters",children:"getClusters"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#getclustersystem",children:"getClusterSystem"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#getconditioninfos",children:"getConditionInfos"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#getisinanimaldeliveryarea",children:"getIsInAnimalDeliveryArea"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#getmaxnumofanimals",children:"getMaxNumOfAnimals"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#getneeddaychanged",children:"getNeedDayChanged"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#getnumofanimals",children:"getNumOfAnimals"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#getnumofclusters",children:"getNumOfClusters"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#getnumoffreeanimalslots",children:"getNumOfFreeAnimalSlots"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#getspecvaluenumberanimals",children:"getSpecValueNumberAnimals"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#getsupportsanimalsubtype",children:"getSupportsAnimalSubType"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#initspecialization",children:"initSpecialization"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#loaddeliveryarea",children:"loadDeliveryArea"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#loadfromxmlfile",children:"loadFromXMLFile"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#loadspecvaluenumberanimals",children:"loadSpecValueNumberAnimals"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#ondaychanged",children:"onDayChanged"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#ondelete",children:"onDelete"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#onexternalnavigationmeshloaded",children:"onExternalNavigationMeshLoaded"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#onfinalizeplacement",children:"onFinalizePlacement"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#onload",children:"onLoad"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#onloadedrideable",children:"onLoadedRideable"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#onmissionstarted",children:"onMissionStarted"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#onperiodchanged",children:"onPeriodChanged"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#onreadstream",children:"onReadStream"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#onupdate",children:"onUpdate"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#onwritestream",children:"onWriteStream"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#registerevents",children:"registerEvents"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#registeroverwrittenfunctions",children:"registerOverwrittenFunctions"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#registersavegamexmlpaths",children:"registerSavegameXMLPaths"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#registerxmlpaths",children:"registerXMLPaths"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#renameanimal",children:"renameAnimal"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#savetoxmlfile",children:"saveToXMLFile"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#startriding",children:"startRiding"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#updatedclusters",children:"updatedClusters"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#updateinfo",children:"updateInfo"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#updateoutput",children:"updateOutput"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"#updatevisualanimals",children:"updateVisualAnimals"})}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"addanimals",children:"addAnimals"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"addAnimals()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"subTypeIndex"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"any"}),(0,i.jsx)(e.td,{children:"numAnimals"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"any"}),(0,i.jsx)(e.td,{children:"age"})]})]})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals:addAnimals(subTypeIndex, numAnimals, age)\n    local mission = g_currentMission\n    local animalSystem = mission.animalSystem\n    local cluster = animalSystem:createClusterFromSubTypeIndex(subTypeIndex)\n    if cluster:getSupportsMerging() then\n        cluster.numAnimals = numAnimals\n        cluster.age = age\n        cluster.subTypeIndex = subTypeIndex\n        self:addCluster(cluster)\n    else\n            for i = 1 , numAnimals do\n                cluster = animalSystem:createClusterFromSubTypeIndex(subTypeIndex)\n                cluster.numAnimals = 1\n                cluster.age = age\n                self:addCluster(cluster)\n            end\n        end\n    end\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"addcluster",children:"addCluster"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"addCluster()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(e.table,{children:(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"cluster"})]})})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals:addCluster(cluster)\n    if cluster ~ = nil then\n        local spec = self.spec_husbandryAnimals\n        spec.clusterSystem:addPendingAddCluster(cluster)\n        self:raiseActive()\n    end\nend\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"canbesold",children:"canBeSold"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"canBeSold()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(e.table,{children:(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"superFunc"})]})})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:'function PlaceableHusbandryAnimals:canBeSold(superFunc)\n    if self:getNumOfAnimals() > 0 then\n        return false , g_i18n:getText( "info_husbandryNotEmpty" )\n    end\n\n    return superFunc( self )\nend\n\n'})}),"\n",(0,i.jsx)(e.h3,{id:"consolecommandaddanimals",children:"consoleCommandAddAnimals"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"consoleCommandAddAnimals()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"_"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"any"}),(0,i.jsx)(e.td,{children:"numAnimals"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"any"}),(0,i.jsx)(e.td,{children:"subTypeIndex"})]})]})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:'function PlaceableHusbandryAnimals.consoleCommandAddAnimals(_, numAnimals, subTypeIndex)\n    local usage = \'Usage:gsHusbandryAddAnimals numAnimals [subTypeIndex]\\nUse negative number to remove animals\'\n\n    local x,y,z = getWorldTranslation(g_cameraManager:getActiveCamera())\n    local mask = CollisionFlag.STATIC_OBJECT + CollisionFlag.BUILDING + CollisionFlag.ANIMAL_POSITIONING + CollisionFlag.GROUND_TIP_BLOCKING + CollisionFlag.PLACEMENT_BLOCKING + CollisionFlag.TRIGGER\n    raycastAll(x,y + 100 ,z, 0 , - 1 , 0 , 110 , "consoleCommandAddAnimalsRaycastCallback" , PlaceableHusbandryAnimals , mask)\n\n    local husbandryInstance = PlaceableHusbandryAnimals.consoleCommandCurrentHusbandry\n    PlaceableHusbandryAnimals.consoleCommandCurrentHusbandry = nil\n    if husbandryInstance = = nil then\n        return "Error:No husbandry found.Enter a husbandry with the player first"\n    end\n    local spec = husbandryInstance.spec_husbandryAnimals\n\n    numAnimals = tonumber(numAnimals) or 0\n    subTypeIndex = tonumber(subTypeIndex)\n\n    if numAnimals > 0 then\n        if husbandryInstance:getNumOfFreeAnimalSlots() = = 0 then\n            return "Error:Husbandry is full"\n        end\n\n        numAnimals = math.min(numAnimals, husbandryInstance:getNumOfFreeAnimalSlots())\n        subTypeIndex = tonumber(subTypeIndex) or 1\n\n        local globalSubTypeIndex = spec.animalType.subTypes[subTypeIndex]\n        if globalSubTypeIndex ~ = nil then\n            local mission = g_currentMission\n            local newCluster = mission.animalSystem:createClusterFromSubTypeIndex(globalSubTypeIndex)\n            newCluster.numAnimals = numAnimals\n            spec.clusterSystem:addPendingAddCluster(newCluster)\n            husbandryInstance:raiseActive()\n\n            return "Added " .. numAnimals .. " animal(s)"\n        else\n                return "Error:Invalid subtype index\\n" .. usage\n            end\n        elseif numAnimals < 0 then\n                local remainingAnimals = numAnimals\n                for _, cluster in pairs(husbandryInstance:getClusters()) do\n                    if subTypeIndex = = nil or cluster:getSubTypeIndex() = = subTypeIndex then\n                        remainingAnimals = cluster:changeNumAnimals(remainingAnimals)\n                    end\n                    if remainingAnimals > = 0 then\n                        break\n                    end\n                end\n                if numAnimals ~ = remainingAnimals then\n                    return string.format( "Removed %d animal(s)" , math.abs(numAnimals - remainingAnimals))\n                end\n                if subTypeIndex ~ = nil then\n                    return "Error:Husbandry has no animals of subtype " .. subTypeIndex\n                end\n                return "Error:Husbandry has no animals"\n            end\n\n            return "Error:Invalid number of animals\\n" .. usage\n        end\n\n'})}),"\n",(0,i.jsx)(e.h3,{id:"createhusbandry",children:"createHusbandry"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"createHusbandry()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:'function PlaceableHusbandryAnimals:createHusbandry()\n    local spec = self.spec_husbandryAnimals\n    if spec.navigationMesh = = nil then\n        if self.isServer then\n            Logging.xmlError( self.xmlFile, "Navigation mesh node not defined for animal husbandry!" )\n                printCallstack()\n            end\n            return\n        end\n\n        if not getHasClassId(spec.navigationMesh, ClassIds.NAVIGATION_MESH) then\n            Logging.error( "Given mesh node \'%s\' is not a navigation mesh!" , getName(spec.navigationMesh))\n            return\n        end\n\n        -- executeConsoleCommand("showNavMesh true", true)\n\n        if getNavMeshSurfaceArea(spec.navigationMesh) = = 0 then\n            Logging.error( "Given nav mesh %q has no surface area" , getName(spec.navigationMesh))\n            return\n        end\n\n        local mission = g_currentMission\n        local collisionMaskFilter = CollisionMask.ANIMAL_SINGLEPLAYER\n        if mission.missionDynamicInfo.isMultiplayer then\n            collisionMaskFilter = CollisionMask.ANIMAL_MULTIPLAYER\n        end\n\n        mission.husbandrySystem:removeClusterHusbandry(spec.clusterHusbandry)\n\n        local husbandryId = spec.clusterHusbandry:create(spec.animalType.configFilename, spec.navigationMesh, spec.placementRaycastDistance, collisionMaskFilter)\n\n        if husbandryId = = nil or husbandryId = = 0 then\n            Logging.error( "Could not create animal husbandry!" )\n            return\n        end\n\n        if husbandryId ~ = nil then\n            mission.husbandrySystem:addClusterHusbandry(spec.clusterHusbandry) -- duplicates avoided internally\n        end\n\n        SpecializationUtil.raiseEvent( self , "onHusbandryAnimalsCreated" , husbandryId)\n    end\n\n'})}),"\n",(0,i.jsx)(e.h3,{id:"getanimalcanberidden",children:"getAnimalCanBeRidden"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"getAnimalCanBeRidden()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(e.table,{children:(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"clusterId"})]})})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals:getAnimalCanBeRidden(clusterId)\n    local mission = g_currentMission\n    return mission.husbandrySystem:getCanAddRideable( self:getOwnerFarmId())\nend\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"getanimaldescription",children:"getAnimalDescription"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"getAnimalDescription()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"superFunc"})]})}),(0,i.jsx)(e.tbody,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"any"}),(0,i.jsx)(e.td,{children:"cluster"})]})})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals:getAnimalDescription(superFunc, cluster)\n    local text = superFunc( self , cluster)\n\n    local mission = g_currentMission\n    local visual = mission.animalSystem:getVisualByAge(cluster.subTypeIndex, cluster:getAge())\n\n    return text .. visual.store.description\nend\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"getanimalinfos",children:"getAnimalInfos"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"getAnimalInfos()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"superFunc"})]})}),(0,i.jsx)(e.tbody,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"any"}),(0,i.jsx)(e.td,{children:"cluster"})]})})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals:getAnimalInfos(superFunc, cluster)\n    local infos = superFunc( self )\n\n    cluster:addInfos(infos)\n\n    return infos\nend\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"getanimalsupportsriding",children:"getAnimalSupportsRiding"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"getAnimalSupportsRiding()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(e.table,{children:(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"clusterId"})]})})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals:getAnimalSupportsRiding(clusterId)\n    local spec = self.spec_husbandryAnimals\n    local cluster = spec.clusterSystem:getClusterById(clusterId)\n    if cluster ~ = nil then\n        local filename = cluster:getRidableFilename()\n        if filename ~ = nil then\n            return true\n        end\n    end\n\n    return false\nend\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"getanimaltypeindex",children:"getAnimalTypeIndex"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"getAnimalTypeIndex()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals:getAnimalTypeIndex()\n    local spec = self.spec_husbandryAnimals\n    return spec.animalTypeIndex\nend\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"getcluster",children:"getCluster"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"getCluster()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(e.table,{children:(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"index"})]})})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals:getCluster(index)\n    local spec = self.spec_husbandryAnimals\n    return spec.clusterSystem:getCluster(index)\nend\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"getclusterbyid",children:"getClusterById"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"getClusterById()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(e.table,{children:(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"id"})]})})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals:getClusterById(id)\n    local spec = self.spec_husbandryAnimals\n    return spec.clusterSystem:getClusterById(id)\nend\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"getclusters",children:"getClusters"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"getClusters()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals:getClusters()\n    local spec = self.spec_husbandryAnimals\n    return spec.clusterSystem:getClusters()\nend\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"getclustersystem",children:"getClusterSystem"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"getClusterSystem()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals:getClusterSystem()\n    local spec = self.spec_husbandryAnimals\n    return spec.clusterSystem\nend\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"getconditioninfos",children:"getConditionInfos"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"getConditionInfos()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(e.table,{children:(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"superFunc"})]})})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:'function PlaceableHusbandryAnimals:getConditionInfos(superFunc)\n    local infos = superFunc( self )\n    local spec = self.spec_husbandryAnimals\n\n    local animalTypeIndex = self:getAnimalTypeIndex()\n    if animalTypeIndex ~ = AnimalType.HORSE and animalTypeIndex ~ = AnimalType.PIG then\n        local globalProductionFactor = self:getGlobalProductionFactor()\n        local productionFactor = self:getProductionFactor()\n        local productivity = globalProductionFactor * productionFactor\n        spec.info.value = productivity\n        spec.info.ratio = productivity\n        spec.info.valueText = string.format( "%s %%" , g_i18n:formatNumber(productivity * 100 , 0 ))\n        table.insert(infos, spec.info)\n    end\n\n    return infos\nend\n\n'})}),"\n",(0,i.jsx)(e.h3,{id:"getisinanimaldeliveryarea",children:"getIsInAnimalDeliveryArea"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"getIsInAnimalDeliveryArea()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"x"})]})}),(0,i.jsx)(e.tbody,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"any"}),(0,i.jsx)(e.td,{children:"z"})]})})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals:getIsInAnimalDeliveryArea(x, z)\n    local spec = self.spec_husbandryAnimals\n\n    if spec.outdoorContourPolygon ~ = nil then\n        local inPolygon = spec.outdoorContourPolygon:getIsPosInside(x, z)\n        return inPolygon\n    end\n\n    for _, deliveryArea in ipairs(spec.deliveryAreas) do\n\n        local startX, _, startZ = getWorldTranslation(deliveryArea.start)\n        local widthX, _, widthZ = getWorldTranslation(deliveryArea.width)\n        local heightX, _, heightZ = getWorldTranslation(deliveryArea.height)\n\n        widthX, widthZ = widthX - startX, widthZ - startZ\n        heightX, heightZ = heightX - startX, heightZ - startZ\n\n        local inArea = MathUtil.isPointInParallelogram(x, z, startX, startZ, widthX, widthZ, heightX, heightZ)\n\n        if inArea then\n            return true\n        end\n    end\n\n    if #spec.deliveryAreas = = 0 then\n        local px, _, pz = getWorldTranslation( self.rootNode)\n        if MathUtil.vector2Length(px - x, pz - z) < 30 then\n            return true\n        end\n    end\n\n    return false\n\nend\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"getmaxnumofanimals",children:"getMaxNumOfAnimals"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"getMaxNumOfAnimals()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals:getMaxNumOfAnimals()\n    local spec = self.spec_husbandryAnimals\n    return spec.maxNumAnimals or spec.baseMaxNumAnimals\nend\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"getneeddaychanged",children:"getNeedDayChanged"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"getNeedDayChanged()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(e.table,{children:(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"superFunc"})]})})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals:getNeedDayChanged(superFunc)\n    return true\nend\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"getnumofanimals",children:"getNumOfAnimals"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"getNumOfAnimals()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals:getNumOfAnimals()\n    local spec = self.spec_husbandryAnimals\n    local numAnimals = 0\n    local clusters = spec.clusterSystem:getClusters()\n    for _, cluster in ipairs(clusters) do\n        numAnimals = numAnimals + cluster.numAnimals\n    end\n\n    return numAnimals\nend\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"getnumofclusters",children:"getNumOfClusters"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"getNumOfClusters()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals:getNumOfClusters()\n    local spec = self.spec_husbandryAnimals\n    local clusters = spec.clusterSystem:getClusters()\n    return #clusters\nend\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"getnumoffreeanimalslots",children:"getNumOfFreeAnimalSlots"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"getNumOfFreeAnimalSlots()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals:getNumOfFreeAnimalSlots()\n    local totalNumAnimals = self:getNumOfAnimals()\n    local maxNumAnimals = self:getMaxNumOfAnimals()\n    return math.max(maxNumAnimals - totalNumAnimals, 0 )\nend\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"getspecvaluenumberanimals",children:"getSpecValueNumberAnimals"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"getSpecValueNumberAnimals()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"storeItem"})]})}),(0,i.jsx)(e.tbody,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"any"}),(0,i.jsx)(e.td,{children:"realItem"})]})})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:'function PlaceableHusbandryAnimals.getSpecValueNumberAnimals(storeItem, realItem)\n    local data = storeItem.specs.numberAnimals\n    if data = = nil then\n        return nil\n    end\n\n    local profile = nil\n\n    local mission = g_currentMission\n    local animalTypeIndex = mission.animalSystem:getTypeIndexByName(data.animalTypeName)\n    if animalTypeIndex = = AnimalType.COW then\n        profile = "shopListAttributeIconCow"\n    elseif animalTypeIndex = = AnimalType.SHEEP then\n            profile = "shopListAttributeIconSheep"\n        elseif animalTypeIndex = = AnimalType.HORSE then\n                profile = "shopListAttributeIconHorse"\n            elseif animalTypeIndex = = AnimalType.PIG then\n                    profile = "shopListAttributeIconPig"\n                elseif animalTypeIndex = = AnimalType.CHICKEN then\n                        profile = "shopListAttributeIconChicken"\n                    end\n\n                    return data.maxNumAnimals, profile\n                end\n\n'})}),"\n",(0,i.jsx)(e.h3,{id:"getsupportsanimalsubtype",children:"getSupportsAnimalSubType"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"getSupportsAnimalSubType()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(e.table,{children:(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"subTypeIndex"})]})})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals:getSupportsAnimalSubType(subTypeIndex)\n    local spec = self.spec_husbandryAnimals\n    local mission = g_currentMission\n    local animalSystem = mission.animalSystem\n    local subType = animalSystem:getSubTypeByIndex(subTypeIndex)\n    return spec.animalTypeIndex = = subType.typeIndex\nend\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"initspecialization",children:"initSpecialization"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"initSpecialization()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:'function PlaceableHusbandryAnimals.initSpecialization()\n    g_storeManager:addSpecType( "numberAnimals" , "shopListAttributeIconCapacity" , PlaceableHusbandryAnimals.loadSpecValueNumberAnimals, PlaceableHusbandryAnimals.getSpecValueNumberAnimals, StoreSpecies.PLACEABLE)\n\n    if g_isDevelopmentVersion then\n        addConsoleCommand( "gsHusbandryAddAnimals" , "Add or remove animals from husbandry where player is currently located" , "consoleCommandAddAnimals" , PlaceableHusbandryAnimals , "numAnimals; [subTypeIndex]" )\n        addConsoleCommand( "gsHusbandryDebugToggle" , "Toggle husbandry debug mode" , "consoleCommandToggleDebug" , PlaceableHusbandryAnimals )\n    end\nend\n\n'})}),"\n",(0,i.jsx)(e.h3,{id:"loaddeliveryarea",children:"loadDeliveryArea"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"loadDeliveryArea()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"xmlFile"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"any"}),(0,i.jsx)(e.td,{children:"key"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"any"}),(0,i.jsx)(e.td,{children:"area"})]})]})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:'function PlaceableHusbandryAnimals:loadDeliveryArea(xmlFile, key, area)\n    local start = xmlFile:getValue(key .. "#startNode" , nil , self.components, self.i3dMappings)\n    if start = = nil then\n        Logging.xmlWarning(xmlFile, "Delivery area start node not defined for \'%s\'" , key)\n            return false\n        end\n\n        local width = xmlFile:getValue(key .. "#widthNode" , nil , self.components, self.i3dMappings)\n        if width = = nil then\n            Logging.xmlWarning(xmlFile, "Delivery area width node not defined for \'%s\'" , key)\n                return false\n            end\n\n            local height = xmlFile:getValue(key .. "#heightNode" , nil , self.components, self.i3dMappings)\n            if height = = nil then\n                Logging.xmlWarning(xmlFile, "Delivery area height node not defined for \'%s\'" , key)\n                    return false\n                end\n\n                area.start = start\n                area.width = width\n                area.height = height\n\n                return true\n            end\n\n'})}),"\n",(0,i.jsx)(e.h3,{id:"loadfromxmlfile",children:"loadFromXMLFile"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"loadFromXMLFile()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"xmlFile"})]})}),(0,i.jsx)(e.tbody,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"any"}),(0,i.jsx)(e.td,{children:"key"})]})})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:'function PlaceableHusbandryAnimals:loadFromXMLFile(xmlFile, key)\n    local spec = self.spec_husbandryAnimals\n    spec.clusterSystem:loadFromXMLFile(xmlFile, key .. ".clusters" )\nend\n\n'})}),"\n",(0,i.jsx)(e.h3,{id:"loadspecvaluenumberanimals",children:"loadSpecValueNumberAnimals"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"loadSpecValueNumberAnimals()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"xmlFile"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"any"}),(0,i.jsx)(e.td,{children:"customEnvironment"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"any"}),(0,i.jsx)(e.td,{children:"baseDir"})]})]})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:'function PlaceableHusbandryAnimals.loadSpecValueNumberAnimals(xmlFile, customEnvironment, baseDir)\n    local data = nil\n\n    if xmlFile:hasProperty( "placeable.husbandry.animals" ) then\n        local maxNumAnimals = xmlFile:getInt( "placeable.husbandry.animals#maxNumAnimals" , 16 )\n        local animalTypeName = xmlFile:getString( "placeable.husbandry.animals#type" )\n        data = { maxNumAnimals = maxNumAnimals, animalTypeName = animalTypeName }\n    end\n\n    return data\nend\n\n'})}),"\n",(0,i.jsx)(e.h3,{id:"ondaychanged",children:"onDayChanged"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"onDayChanged()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals:onDayChanged()\n    if self.isServer then\n        local spec = self.spec_husbandryAnimals\n        local clusters = spec.clusterSystem:getClusters()\n        for _, cluster in ipairs(clusters) do\n            cluster:onDayChanged()\n        end\n    end\nend\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"ondelete",children:"onDelete"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"onDelete()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals:onDelete()\n    local spec = self.spec_husbandryAnimals\n\n    g_messageCenter:unsubscribe(AnimalClusterUpdateEvent, self )\n    g_messageCenter:unsubscribe(MessageType.CURRENT_MISSION_START, self )\n\n    self:deleteNavigationMeshPlacementCollision()\n\n    if spec.clusterHusbandry ~ = nil then\n        local mission = g_currentMission\n        mission.husbandrySystem:removeClusterHusbandry(spec.clusterHusbandry)\n        spec.clusterHusbandry:delete()\n        spec.clusterHusbandry = nil\n    end\n    if spec.animalLoadingTrigger ~ = nil then\n        spec.animalLoadingTrigger:delete()\n        spec.animalLoadingTrigger = nil\n    end\n\n    if spec.sharedLoadRequestId ~ = nil then\n        g_i3DManager:releaseSharedI3DFile(spec.sharedLoadRequestId)\n    end\nend\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"onexternalnavigationmeshloaded",children:"onExternalNavigationMeshLoaded"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"onExternalNavigationMeshLoaded()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"node"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"any"}),(0,i.jsx)(e.td,{children:"failedReason"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"any"}),(0,i.jsx)(e.td,{children:"args"})]})]})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:'function PlaceableHusbandryAnimals:onExternalNavigationMeshLoaded(node, failedReason, args)\n    local spec = self.spec_husbandryAnimals\n\n    local loadingTask = args.loadingTask\n\n    if node = = 0 or node = = nil then\n        self:finishLoadingTask(loadingTask)\n        Logging.error( "Missing navigation mesh in external navigation mesh file!" )\n        return\n    end\n\n    if spec.navigationMeshRootNode ~ = nil then\n        spec.navigationMesh = I3DUtil.indexToObject(node, spec.navigationMeshNodePath)\n        link(spec.navigationMeshRootNode, spec.navigationMesh)\n    end\n    delete(node)\n\n    self:finishLoadingTask(loadingTask)\nend\n\n'})}),"\n",(0,i.jsx)(e.h3,{id:"onfinalizeplacement",children:"onFinalizePlacement"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"onFinalizePlacement()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals:onFinalizePlacement()\n    self:createNavigationMesh()\n\n    if self.isLoadedFromSavegame then\n        g_messageCenter:subscribeOneshot(MessageType.CURRENT_MISSION_START, PlaceableHusbandryAnimals.onMissionStarted, self )\n    end\nend\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"onload",children:"onLoad"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"onLoad()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(e.table,{children:(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"savegame"})]})})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:'function PlaceableHusbandryAnimals:onLoad(savegame)\n    local spec = self.spec_husbandryAnimals\n    local xmlFile = self.xmlFile\n\n    spec.infoHealth = { title = g_i18n:getText( "ui_horseHealth" ), text = "" }\n    spec.infoNumAnimals = { title = g_i18n:getText( "ui_numAnimals" ), text = "" }\n    spec.updateVisuals = false\n\n    local animalTypeName = xmlFile:getValue( "placeable.husbandry.animals#type" )\n    if animalTypeName = = nil then\n        Logging.xmlError(xmlFile, "Missing animal type!" )\n        self:setLoadingState(PlaceableLoadingState.ERROR)\n        return\n    end\n\n    local mission = g_currentMission\n    spec.animalType = mission.animalSystem:getTypeByName(animalTypeName)\n    if spec.animalType = = nil then\n        Logging.xmlError(xmlFile, "Animal type \'%s\' not found!" , animalTypeName)\n        self:setLoadingState(PlaceableLoadingState.ERROR)\n        return\n    end\n\n    spec.animalTypeIndex = spec.animalType.typeIndex\n\n    spec.navigationMeshRootNode = xmlFile:getValue( "placeable.husbandry.animals.navigation#rootNode" , nil , self.components, self.i3dMappings)\n    spec.navigationMesh = xmlFile:getValue( "placeable.husbandry.animals.navigation#node" , nil , self.components, self.i3dMappings)\n    local navigationMeshShape = xmlFile:getValue( "placeable.husbandry.animals.navigation#shape" , nil , self.components, self.i3dMappings)\n    if navigationMeshShape ~ = nil then\n        local navMeshShapeValid = true\n        if not getHasClassId(navigationMeshShape, ClassIds.SHAPE) then\n            Logging.xmlError(xmlFile, "Given navigation shape %q at %q is not of type \'SHAPE\'" , getName(navigationMeshShape), "placeable.husbandry.animals.navigation#shape" )\n            navMeshShapeValid = false\n        end\n\n        if getHasClassId(navigationMeshShape, ClassIds.NAVIGATION_MESH) then\n            Logging.xmlError(xmlFile, "Given navigation shape %q at %q is a navigation mesh instead of a regular shape" , getName(navigationMeshShape), "placeable.husbandry.animals.navigation#shape" )\n            navMeshShapeValid = false\n        end\n\n        if navMeshShapeValid and not getShapeIsCPUMesh(navigationMeshShape) then\n            Logging.xmlError(xmlFile, "Given navigation shape %q at %q is missing the \'CPU Mesh\' flag" , getName(navigationMeshShape), "placeable.husbandry.animals.navigation#shape" )\n            navMeshShapeValid = false\n        end\n\n        if navMeshShapeValid then\n            setIsNonRenderable(navigationMeshShape, true )\n            spec.navigationMeshShape = navigationMeshShape\n        end\n    end\n    local navigationMeshFilename = xmlFile:getValue( "placeable.husbandry.animals.navigation#filename" , nil )\n    if navigationMeshFilename ~ = nil then\n        navigationMeshFilename = Utils.getFilename(navigationMeshFilename, self.baseDirectory)\n        local loadingTask = self:createLoadingTask(spec)\n        spec.navigationMeshNodePath = xmlFile:getValue( "placeable.husbandry.animals.navigation#nodePath" , "0" )\n\n        local arguments = {\n        loadingTask = loadingTask\n        }\n        spec.sharedLoadRequestId = g_i3DManager:loadSharedI3DFileAsync(navigationMeshFilename, true , false , self.onExternalNavigationMeshLoaded, self , arguments)\n    end\n\n    -- polygon for the nav mesh area defined by the fence outline, excluding the area defined by the navigationMeshShape\n        spec.outdoorContourPolygon = nil\n\n        spec.placementRaycastDistance = xmlFile:getValue( "placeable.husbandry.animals#placementRaycastDistance" , 10.0 )\n        spec.sqmPerAnimal = self.xmlFile:getValue( "placeable.husbandry.animals#sqmPerAnimal" , spec.animalType.sqmPerAnimal)\n        spec.configMaxNumAnimals = xmlFile:getValue( "placeable.husbandry.animals#maxNumAnimals" , 16 )\n        spec.baseMaxNumAnimals = self.xmlFile:getValue( "placeable.husbandry.animals#baseMaxNumAnimals" , spec.configMaxNumAnimals)\n        spec.configMaxNumVisualAnimals = self.xmlFile:getValue( "placeable.husbandry.animals#maxNumVisualAnimals" )\n\n        spec.clusterHusbandry = AnimalClusterHusbandry.new( self , animalTypeName, 0 ) --spec.maxNumVisualAnimals)\n\n        spec.clusterSystem = AnimalClusterSystem.new( self.isServer, self )\n        g_messageCenter:subscribe(AnimalClusterUpdateEvent, self.updatedClusters, self )\n\n        local animalLoadingTriggerNode = xmlFile:getValue( "placeable.husbandry.animals.loadingTrigger#node" , nil , self.components, self.i3dMappings)\n        if animalLoadingTriggerNode ~ = nil then\n            spec.animalLoadingTrigger = AnimalLoadingTrigger.new( self.isServer, self.isClient)\n            if not spec.animalLoadingTrigger:load(animalLoadingTriggerNode, self ) then\n                spec.animalLoadingTrigger:delete()\n            end\n        end\n\n        spec.deliveryAreas = { }\n        self.xmlFile:iterate( "placeable.husbandry.animals.deliveryAreas.deliveryArea" , function (_, key)\n            local area = { }\n            if self:loadDeliveryArea( self.xmlFile, key, area) then\n                table.insert(spec.deliveryAreas, area)\n            end\n        end )\n\n        spec.info = { title = g_i18n:getText( "statistic_productivity" ), text = "" }\n\n        if not self.isServer or not g_isDevelopmentVersion then\n            removeConsoleCommand( "gsHusbandryAddAnimals" )\n        end\n    end\n\n'})}),"\n",(0,i.jsx)(e.h3,{id:"onloadedrideable",children:"onLoadedRideable"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"onLoadedRideable()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"vehicles"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"any"}),(0,i.jsx)(e.td,{children:"vehicleLoadState"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"any"}),(0,i.jsx)(e.td,{children:"arguments"})]})]})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals:onLoadedRideable(vehicles, vehicleLoadState, arguments)\n    local cluster = arguments.cluster\n\n    if vehicleLoadState ~ = VehicleLoadingState.OK or #vehicles = = 0 then\n        local spec = self.spec_husbandryAnimals\n        cluster:changeNumAnimals( 1 )\n        spec.clusterSystem:updateNow()\n\n        return\n    end\n\n    local newCluster = cluster:clone()\n    newCluster:changeNumAnimals( 1 )\n    vehicles[ 1 ]:setCluster(newCluster)\n    vehicles[ 1 ]:setPlayerToEnter(arguments.player)\nend\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"onmissionstarted",children:"onMissionStarted"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"onMissionStarted()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(e.table,{children:(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"isNewSavegame"})]})})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals:onMissionStarted(isNewSavegame)\n    -- process animalsToLoad on onMissionStarted because dedi server is paused on start up and\n    -- therefore animals are first loaded if the first player joins.In this state husbandry is already synced with player\n        -- and no animals are visible for first player joining the server\n            self:updateVisualAnimals()\n        end\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"onperiodchanged",children:"onPeriodChanged"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"onPeriodChanged()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals:onPeriodChanged()\n    if self.isServer then\n        local spec = self.spec_husbandryAnimals\n        local clusters = spec.clusterSystem:getClusters()\n\n        local totalNumAnimals = self:getNumOfAnimals()\n        local maxNumAnimals = self:getMaxNumOfAnimals()\n        local freeSlots = math.max(maxNumAnimals - totalNumAnimals, 0 )\n\n        local mission = g_currentMission\n        local animalSystem = mission.animalSystem\n        for _, cluster in ipairs(clusters) do\n            cluster:onPeriodChanged()\n\n            local numNewAnimals = cluster:updateReproduction()\n            if numNewAnimals > 0 then\n                numNewAnimals = math.min(freeSlots, numNewAnimals)\n                if numNewAnimals > 0 then\n                    local newCluster = animalSystem:createClusterFromSubTypeIndex(cluster:getSubTypeIndex())\n                    newCluster.numAnimals = numNewAnimals\n                    freeSlots = freeSlots - numNewAnimals\n\n                    spec.clusterSystem:addPendingAddCluster(newCluster)\n\n                    local subType = animalSystem:getSubTypeByIndex(cluster:getSubTypeIndex())\n                    if subType.statsBreedingName ~ = nil then\n                        g_farmManager:updateFarmStats( self:getOwnerFarmId(), subType.statsBreedingName, newCluster.numAnimals)\n                    end\n                end\n            end\n        end\n\n        self:raiseActive()\n    end\nend\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"onreadstream",children:"onReadStream"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"onReadStream()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"streamId"})]})}),(0,i.jsx)(e.tbody,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"any"}),(0,i.jsx)(e.td,{children:"connection"})]})})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals:onReadStream(streamId, connection)\n    local spec = self.spec_husbandryAnimals\n    spec.clusterSystem:readStream(streamId, connection)\nend\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"onupdate",children:"onUpdate"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"onUpdate()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(e.table,{children:(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"dt"})]})})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals:onUpdate(dt)\n    local spec = self.spec_husbandryAnimals\n    if self.isServer then\n        spec.clusterSystem:update(dt)\n    end\n\n    if spec.clusterHusbandry ~ = nil then\n        spec.clusterHusbandry:update(dt)\n    end\n\n    if spec.updateVisuals then\n        self:updateVisualAnimals()\n        spec.updateVisuals = false\n    end\n\n    if spec.clusterHusbandry:getNeedsUpdate() then\n        self:raiseActive()\n    end\nend\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"onwritestream",children:"onWriteStream"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"onWriteStream()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"streamId"})]})}),(0,i.jsx)(e.tbody,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"any"}),(0,i.jsx)(e.td,{children:"connection"})]})})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals:onWriteStream(streamId, connection)\n    local spec = self.spec_husbandryAnimals\n    spec.clusterSystem:writeStream(streamId, connection)\nend\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"Checks if all prerequisite specializations are loaded"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"prerequisitesPresent(table specializations)"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(e.table,{children:(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"table"}),(0,i.jsx)(e.th,{children:"specializations"}),(0,i.jsx)(e.th,{children:"specializations"})]})})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(e.table,{children:(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"table"}),(0,i.jsx)(e.th,{children:"hasPrerequisite"}),(0,i.jsx)(e.th,{children:"true if all prerequisite specializations are loaded"})]})})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals.prerequisitesPresent(specializations)\n    return SpecializationUtil.hasSpecialization( PlaceableHusbandry , specializations)\nend\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(e.table,{children:(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"placeableType"})]})})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:'function PlaceableHusbandryAnimals.registerEventListeners(placeableType)\n    SpecializationUtil.registerEventListener(placeableType, "onLoad" , PlaceableHusbandryAnimals )\n    SpecializationUtil.registerEventListener(placeableType, "onDelete" , PlaceableHusbandryAnimals )\n    SpecializationUtil.registerEventListener(placeableType, "onFinalizePlacement" , PlaceableHusbandryAnimals )\n    SpecializationUtil.registerEventListener(placeableType, "onReadStream" , PlaceableHusbandryAnimals )\n    SpecializationUtil.registerEventListener(placeableType, "onWriteStream" , PlaceableHusbandryAnimals )\n    SpecializationUtil.registerEventListener(placeableType, "onUpdate" , PlaceableHusbandryAnimals )\n    SpecializationUtil.registerEventListener(placeableType, "onPeriodChanged" , PlaceableHusbandryAnimals )\n    SpecializationUtil.registerEventListener(placeableType, "onDayChanged" , PlaceableHusbandryAnimals )\nend\n\n'})}),"\n",(0,i.jsx)(e.h3,{id:"registerevents",children:"registerEvents"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"registerEvents()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(e.table,{children:(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"placeableType"})]})})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:'function PlaceableHusbandryAnimals.registerEvents(placeableType)\n    SpecializationUtil.registerEvent(placeableType, "onHusbandryAnimalsCreated" )\n    SpecializationUtil.registerEvent(placeableType, "onHusbandryAnimalsUpdate" )\nend\n\n'})}),"\n",(0,i.jsx)(e.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(e.table,{children:(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"placeableType"})]})})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:'function PlaceableHusbandryAnimals.registerFunctions(placeableType)\n    SpecializationUtil.registerFunction(placeableType, "onExternalNavigationMeshLoaded" , PlaceableHusbandryAnimals.onExternalNavigationMeshLoaded)\n    SpecializationUtil.registerFunction(placeableType, "createNavigationMeshFromContour" , PlaceableHusbandryAnimals.createNavigationMeshFromContour)\n    SpecializationUtil.registerFunction(placeableType, "createNavigationMesh" , PlaceableHusbandryAnimals.createNavigationMesh)\n    SpecializationUtil.registerFunction(placeableType, "setMaxNumAnimals" , PlaceableHusbandryAnimals.setMaxNumAnimals)\n    SpecializationUtil.registerFunction(placeableType, "createHusbandry" , PlaceableHusbandryAnimals.createHusbandry)\n    SpecializationUtil.registerFunction(placeableType, "updateVisualAnimals" , PlaceableHusbandryAnimals.updateVisualAnimals)\n    SpecializationUtil.registerFunction(placeableType, "getNumOfFreeAnimalSlots" , PlaceableHusbandryAnimals.getNumOfFreeAnimalSlots)\n    SpecializationUtil.registerFunction(placeableType, "getNumOfAnimals" , PlaceableHusbandryAnimals.getNumOfAnimals)\n    SpecializationUtil.registerFunction(placeableType, "getMaxNumOfAnimals" , PlaceableHusbandryAnimals.getMaxNumOfAnimals)\n    SpecializationUtil.registerFunction(placeableType, "getNumOfClusters" , PlaceableHusbandryAnimals.getNumOfClusters)\n    SpecializationUtil.registerFunction(placeableType, "getSupportsAnimalSubType" , PlaceableHusbandryAnimals.getSupportsAnimalSubType)\n    SpecializationUtil.registerFunction(placeableType, "getClusters" , PlaceableHusbandryAnimals.getClusters)\n    SpecializationUtil.registerFunction(placeableType, "getCluster" , PlaceableHusbandryAnimals.getCluster)\n    SpecializationUtil.registerFunction(placeableType, "getClusterById" , PlaceableHusbandryAnimals.getClusterById)\n    SpecializationUtil.registerFunction(placeableType, "getClusterSystem" , PlaceableHusbandryAnimals.getClusterSystem)\n    SpecializationUtil.registerFunction(placeableType, "getAnimalTypeIndex" , PlaceableHusbandryAnimals.getAnimalTypeIndex)\n    SpecializationUtil.registerFunction(placeableType, "renameAnimal" , PlaceableHusbandryAnimals.renameAnimal)\n    SpecializationUtil.registerFunction(placeableType, "addCluster" , PlaceableHusbandryAnimals.addCluster)\n    SpecializationUtil.registerFunction(placeableType, "addAnimals" , PlaceableHusbandryAnimals.addAnimals)\n    SpecializationUtil.registerFunction(placeableType, "updatedClusters" , PlaceableHusbandryAnimals.updatedClusters)\n    SpecializationUtil.registerFunction(placeableType, "consoleCommandAddAnimals" , PlaceableHusbandryAnimals.consoleCommandAddAnimals)\n    SpecializationUtil.registerFunction(placeableType, "getAnimalSupportsRiding" , PlaceableHusbandryAnimals.getAnimalSupportsRiding)\n    SpecializationUtil.registerFunction(placeableType, "getAnimalCanBeRidden" , PlaceableHusbandryAnimals.getAnimalCanBeRidden)\n    SpecializationUtil.registerFunction(placeableType, "startRiding" , PlaceableHusbandryAnimals.startRiding)\n    SpecializationUtil.registerFunction(placeableType, "onLoadedRideable" , PlaceableHusbandryAnimals.onLoadedRideable)\n    SpecializationUtil.registerFunction(placeableType, "getIsInAnimalDeliveryArea" , PlaceableHusbandryAnimals.getIsInAnimalDeliveryArea)\n    SpecializationUtil.registerFunction(placeableType, "loadDeliveryArea" , PlaceableHusbandryAnimals.loadDeliveryArea)\n    SpecializationUtil.registerFunction(placeableType, "getOutdoorContourPolygon" , PlaceableHusbandryAnimals.getOutdoorContourPolygon)\n    SpecializationUtil.registerFunction(placeableType, "createNavigationMeshPlacementCollision" , PlaceableHusbandryAnimals.createNavigationMeshPlacementCollision)\n    SpecializationUtil.registerFunction(placeableType, "deleteNavigationMeshPlacementCollision" , PlaceableHusbandryAnimals.deleteNavigationMeshPlacementCollision)\nend\n\n'})}),"\n",(0,i.jsx)(e.h3,{id:"registeroverwrittenfunctions",children:"registerOverwrittenFunctions"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"registerOverwrittenFunctions()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(e.table,{children:(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"placeableType"})]})})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:'function PlaceableHusbandryAnimals.registerOverwrittenFunctions(placeableType)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "getNeedDayChanged" , PlaceableHusbandryAnimals.getNeedDayChanged)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "updateInfo" , PlaceableHusbandryAnimals.updateInfo)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "updateOutput" , PlaceableHusbandryAnimals.updateOutput)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "canBeSold" , PlaceableHusbandryAnimals.canBeSold)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "getConditionInfos" , PlaceableHusbandryAnimals.getConditionInfos)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "getAnimalInfos" , PlaceableHusbandryAnimals.getAnimalInfos)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "getAnimalDescription" , PlaceableHusbandryAnimals.getAnimalDescription)\nend\n\n'})}),"\n",(0,i.jsx)(e.h3,{id:"registersavegamexmlpaths",children:"registerSavegameXMLPaths"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"registerSavegameXMLPaths()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"schema"})]})}),(0,i.jsx)(e.tbody,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"any"}),(0,i.jsx)(e.td,{children:"basePath"})]})})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:'function PlaceableHusbandryAnimals.registerSavegameXMLPaths(schema, basePath)\n    schema:setXMLSpecializationType( "Husbandry" )\n    AnimalClusterSystem.registerSavegameXMLPaths(schema, basePath .. ".clusters" )\n    schema:setXMLSpecializationType()\nend\n\n'})}),"\n",(0,i.jsx)(e.h3,{id:"registerxmlpaths",children:"registerXMLPaths"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"registerXMLPaths()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"schema"})]})}),(0,i.jsx)(e.tbody,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"any"}),(0,i.jsx)(e.td,{children:"basePath"})]})})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:'function PlaceableHusbandryAnimals.registerXMLPaths(schema, basePath)\n    schema:setXMLSpecializationType( "Husbandry" )\n    basePath = basePath .. ".husbandry.animals"\n    schema:register(XMLValueType.NODE_INDEX, basePath .. ".navigation#rootNode" , "Navigation mesh rootnode" )\n    schema:register(XMLValueType.NODE_INDEX, basePath .. ".navigation#node" , "Navigation mesh node" )\n    schema:register(XMLValueType.NODE_INDEX, basePath .. ".navigation#shape" , "Shape to generate navigation mesh from" )\n    schema:register(XMLValueType.STRING, basePath .. ".navigation#filename" , "Filename for an external navigation mesh" )\n        schema:register(XMLValueType.STRING, basePath .. ".navigation#nodePath" , "Nodepath for an external navigation mesh" )\n            schema:register(XMLValueType.STRING, basePath .. "#type" , "Animal type" )\n            schema:register(XMLValueType.STRING, basePath .. "#filename" , "Animal configuration file" )\n            schema:register(XMLValueType.FLOAT, basePath .. "#placementRaycastDistance" , "Placement raycast distance" , 2 )\n            schema:register(XMLValueType.INT, basePath .. "#maxNumAnimals" , "Max number of animals" , 16 )\n            schema:register(XMLValueType.INT, basePath .. "#baseMaxNumAnimals" , "Base max number of animals without outoor area" , 16 )\n            schema:register(XMLValueType.INT, basePath .. "#sqmPerAnimal" , "Square meter need per animal" )\n            schema:register(XMLValueType.INT, basePath .. "#maxNumVisualAnimals" , "Max number of visual animals" )\n            schema:register(XMLValueType.NODE_INDEX, basePath .. ".loadingTrigger#node" , "Animal loading trigger" )\n            schema:register(XMLValueType.NODE_INDEX, basePath .. ".deliveryAreas.deliveryArea(?)#startNode" , "Animal delivery area start node" )\n            schema:register(XMLValueType.NODE_INDEX, basePath .. ".deliveryAreas.deliveryArea(?)#widthNode" , "Animal delivery area width node" )\n            schema:register(XMLValueType.NODE_INDEX, basePath .. ".deliveryAreas.deliveryArea(?)#heightNode" , "Animal delivery area height node" )\n            schema:setXMLSpecializationType()\n        end\n\n'})}),"\n",(0,i.jsx)(e.h3,{id:"renameanimal",children:"renameAnimal"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"renameAnimal()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"clusterId"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"any"}),(0,i.jsx)(e.td,{children:"name"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"any"}),(0,i.jsx)(e.td,{children:"noEventSend"})]})]})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals:renameAnimal(clusterId, name, noEventSend)\n    local spec = self.spec_husbandryAnimals\n    AnimalNameEvent.sendEvent( self , clusterId, name, noEventSend)\n\n    local cluster = spec.clusterSystem:getClusterById(clusterId)\n    if cluster ~ = nil then\n        cluster:setName(name)\n    end\nend\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"savetoxmlfile",children:"saveToXMLFile"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"saveToXMLFile()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"xmlFile"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"any"}),(0,i.jsx)(e.td,{children:"key"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"any"}),(0,i.jsx)(e.td,{children:"usedModNames"})]})]})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:'function PlaceableHusbandryAnimals:saveToXMLFile(xmlFile, key, usedModNames)\n    local spec = self.spec_husbandryAnimals\n    spec.clusterSystem:saveToXMLFile(xmlFile, key .. ".clusters" , usedModNames)\nend\n\n'})}),"\n",(0,i.jsx)(e.h3,{id:"startriding",children:"startRiding"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"startRiding()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"clusterId"})]})}),(0,i.jsx)(e.tbody,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"any"}),(0,i.jsx)(e.td,{children:"player"})]})})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals:startRiding(clusterId, player)\n    if not self.isServer then\n        g_client:getServerConnection():sendEvent( AnimalRidingEvent.new( self , clusterId, player))\n    else\n            local spec = self.spec_husbandryAnimals\n            local cluster = spec.clusterSystem:getClusterById(clusterId)\n            if cluster ~ = nil then\n                local x, y, z, rx, ry, rz = spec.clusterHusbandry:getAnimalPosition(clusterId)\n\n                if x ~ = nil then\n                    local farmId = self:getOwnerFarmId()\n                    local filename = cluster:getRidableFilename()\n                    local arguments = {\n                    player = player,\n                    cluster = cluster\n                    }\n\n                    cluster:changeNumAnimals( - 1 )\n                    spec.clusterSystem:updateNow()\n\n                    local data = VehicleLoadingData.new()\n                    data:setFilename(filename)\n                    data:setPosition(x, y, z)\n                    data:setRotation(rx, ry, rz)\n                    data:setPropertyState(VehiclePropertyState.OWNED)\n                    data:setOwnerFarmId(farmId)\n\n                    data:load( self.onLoadedRideable, self , arguments)\n                end\n            end\n        end\n    end\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"updatedclusters",children:"updatedClusters"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"updatedClusters()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(e.table,{children:(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"husbandry"})]})})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:'function PlaceableHusbandryAnimals:updatedClusters(husbandry)\n    if husbandry = = self then\n        local spec = self.spec_husbandryAnimals\n        local clusters = spec.clusterSystem:getClusters()\n\n        SpecializationUtil.raiseEvent( self , "onHusbandryAnimalsUpdate" , clusters)\n\n        g_messageCenter:publish(MessageType.HUSBANDRY_ANIMALS_CHANGED, self )\n\n        spec.updateVisuals = true\n        self:raiseActive()\n    end\nend\n\n'})}),"\n",(0,i.jsx)(e.h3,{id:"updateinfo",children:"updateInfo"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"updateInfo()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"superFunc"})]})}),(0,i.jsx)(e.tbody,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"any"}),(0,i.jsx)(e.td,{children:"infoTable"})]})})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:'function PlaceableHusbandryAnimals:updateInfo(superFunc, infoTable)\n    superFunc( self , infoTable)\n\n    local spec = self.spec_husbandryAnimals\n    local health = 0\n    local numAnimals = 0\n    local clusters = spec.clusterSystem:getClusters()\n    local numClusters = #clusters\n    if numClusters > 0 then\n        for _, cluster in ipairs(clusters) do\n            health = health + cluster.health\n            numAnimals = numAnimals + cluster.numAnimals\n        end\n\n        health = health / numClusters\n    end\n\n    spec.infoNumAnimals.text = string.format( "%d / %d" , numAnimals, self:getMaxNumOfAnimals())\n    spec.infoHealth.text = string.format( "%d %%" , health)\n    table.insert(infoTable, spec.infoNumAnimals)\n    table.insert(infoTable, spec.infoHealth)\nend\n\n'})}),"\n",(0,i.jsx)(e.h3,{id:"updateoutput",children:"updateOutput"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"updateOutput()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"any"}),(0,i.jsx)(e.th,{children:"superFunc"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"any"}),(0,i.jsx)(e.td,{children:"foodFactor"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"any"}),(0,i.jsx)(e.td,{children:"productionFactor"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"any"}),(0,i.jsx)(e.td,{children:"globalProductionFactor"})]})]})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals:updateOutput(superFunc, foodFactor, productionFactor, globalProductionFactor)\n    if self.isServer then\n        local spec = self.spec_husbandryAnimals\n        local clusters = spec.clusterSystem:getClusters()\n        for _, cluster in ipairs(clusters) do\n            cluster:updateHealth(foodFactor)\n        end\n\n        self:raiseActive()\n    end\n\n    superFunc( self , foodFactor, productionFactor, globalProductionFactor)\nend\n\n"})}),"\n",(0,i.jsx)(e.h3,{id:"updatevisualanimals",children:"updateVisualAnimals"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Description"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"updateVisualAnimals()"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Code"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-lua",children:"function PlaceableHusbandryAnimals:updateVisualAnimals()\n    local spec = self.spec_husbandryAnimals\n    local clusters = spec.clusterSystem:getClusters()\n    spec.clusterHusbandry:setClusters(clusters)\n    self:raiseActive()\nend\n\n"})})]})}function h(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(o,{...n})}):o(n)}}}]);