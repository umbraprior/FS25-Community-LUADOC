"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[16699],{28453(e,n,l){l.d(n,{R:()=>t,x:()=>r});var i=l(96540);const s={},a=i.createContext(s);function t(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(a.Provider,{value:n},e.children)}},70868(e,n,l){l.r(n),l.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>o,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"script/Specializations/PlaceableHusbandryPallets","title":"PlaceableHusbandryPallets","description":"PlaceableHusbandryPallets","source":"@site/../docs/script/Specializations/PlaceableHusbandryPallets.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/PlaceableHusbandryPallets","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableHusbandryPallets","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"PlaceableHusbandryMilk","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableHusbandryMilk"},"next":{"title":"PlaceableHusbandryStraw","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableHusbandryStraw"}}');var s=l(74848),a=l(28453);const t={},r=void 0,d={},c=[{value:"PlaceableHusbandryPallets",id:"placeablehusbandrypallets",level:2},{value:"getAllPalletsCallback",id:"getallpalletscallback",level:3},{value:"getConditionInfos",id:"getconditioninfos",level:3},{value:"getPalletCallback",id:"getpalletcallback",level:3},{value:"loadFromXMLFile",id:"loadfromxmlfile",level:3},{value:"onDelete",id:"ondelete",level:3},{value:"onFinalizePlacement",id:"onfinalizeplacement",level:3},{value:"onHusbandryAnimalsUpdate",id:"onhusbandryanimalsupdate",level:3},{value:"onLoad",id:"onload",level:3},{value:"onPalletTriggerCallback",id:"onpallettriggercallback",level:3},{value:"onReadStream",id:"onreadstream",level:3},{value:"onReadUpdateStream",id:"onreadupdatestream",level:3},{value:"onWriteStream",id:"onwritestream",level:3},{value:"onWriteUpdateStream",id:"onwriteupdatestream",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3},{value:"registerFunctions",id:"registerfunctions",level:3},{value:"registerOverwrittenFunctions",id:"registeroverwrittenfunctions",level:3},{value:"registerSavegameXMLPaths",id:"registersavegamexmlpaths",level:3},{value:"registerXMLPaths",id:"registerxmlpaths",level:3},{value:"saveToXMLFile",id:"savetoxmlfile",level:3},{value:"showPalletBlockedWarning",id:"showpalletblockedwarning",level:3},{value:"showSpawnerBlockedWarning",id:"showspawnerblockedwarning",level:3},{value:"updateInfo",id:"updateinfo",level:3},{value:"updateOutput",id:"updateoutput",level:3},{value:"updatePalletInfo",id:"updatepalletinfo",level:3},{value:"updatePallets",id:"updatepallets",level:3}];function p(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"placeablehusbandrypallets",children:"PlaceableHusbandryPallets"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Specialization for placeables"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Functions"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getallpalletscallback",children:"getAllPalletsCallback"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getconditioninfos",children:"getConditionInfos"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getpalletcallback",children:"getPalletCallback"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#loadfromxmlfile",children:"loadFromXMLFile"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#ondelete",children:"onDelete"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onfinalizeplacement",children:"onFinalizePlacement"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onhusbandryanimalsupdate",children:"onHusbandryAnimalsUpdate"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onpallettriggercallback",children:"onPalletTriggerCallback"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onreadstream",children:"onReadStream"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onreadupdatestream",children:"onReadUpdateStream"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onwritestream",children:"onWriteStream"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onwriteupdatestream",children:"onWriteUpdateStream"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registeroverwrittenfunctions",children:"registerOverwrittenFunctions"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registersavegamexmlpaths",children:"registerSavegameXMLPaths"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registerxmlpaths",children:"registerXMLPaths"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#savetoxmlfile",children:"saveToXMLFile"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#showpalletblockedwarning",children:"showPalletBlockedWarning"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#showspawnerblockedwarning",children:"showSpawnerBlockedWarning"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#updateinfo",children:"updateInfo"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#updateoutput",children:"updateOutput"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#updatepalletinfo",children:"updatePalletInfo"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#updatepallets",children:"updatePallets"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"getallpalletscallback",children:"getAllPalletsCallback"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getAllPalletsCallback()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"pallets"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"fillTypeIndex"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryPallets:getAllPalletsCallback(pallets, fillTypeIndex)\n    local spec = self.spec_husbandryPallets\n    spec.numPalletInfoUpdateRunning = math.max(spec.numPalletInfoUpdateRunning - 1 , 0 )\n\n    for _, pallet in pairs(pallets) do\n        local fillUnitIndex = pallet.spec_pallet.fillUnitIndex\n        local palletCapacity = pallet:getFillUnitCapacity(fillUnitIndex)\n        spec.capacitiesPending[fillTypeIndex] = spec.capacitiesPending[fillTypeIndex] + palletCapacity\n        spec.fillLevelsPending[fillTypeIndex] = spec.fillLevelsPending[fillTypeIndex] + pallet:getFillUnitFillLevel(fillUnitIndex)\n        spec.maxCapacitiesPending[fillTypeIndex] = math.max(spec.maxCapacitiesPending[fillTypeIndex], palletCapacity)\n    end\n\n    if spec.numPalletInfoUpdateRunning < = 0 then\n        for fillTypeIndex, _ in pairs(spec.fillLevels) do\n            spec.fillLevels[fillTypeIndex] = spec.fillLevelsPending[fillTypeIndex]\n\n            local capacity = spec.capacitiesPending[fillTypeIndex]\n            if #pallets < spec.maxNumPallets[fillTypeIndex] then\n                capacity = spec.maxCapacitiesPending[fillTypeIndex] * spec.maxNumPallets[fillTypeIndex]\n            end\n            spec.capacities[fillTypeIndex] = capacity\n\n            if math.abs(spec.fillLevels[fillTypeIndex] - spec.fillLevelsSent[fillTypeIndex]) > 1 or math.abs(spec.capacities[fillTypeIndex] - spec.capacitiesSent[fillTypeIndex]) > 1 then\n                spec.fillLevelsSent[fillTypeIndex] = spec.fillLevels[fillTypeIndex]\n                spec.capacitiesSent[fillTypeIndex] = spec.capacities[fillTypeIndex]\n                self:raiseDirtyFlags(spec.dirtyFlag)\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getconditioninfos",children:"getConditionInfos"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getConditionInfos()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryPallets:getConditionInfos(superFunc)\n    local infos = superFunc( self )\n\n    local spec = self.spec_husbandryPallets\n\n    for _, fillTypeIndex in ipairs(spec.activeFillTypes) do\n        local fillType = g_fillTypeManager:getFillTypeByIndex(fillTypeIndex)\n        if fillType ~ = nil then\n            local info = { }\n            local fillLevel = spec.fillLevels[fillTypeIndex]\n            local capacity = spec.capacities[fillTypeIndex]\n            info.title = fillType.title\n            info.value = fillLevel\n\n            local ratio = 0\n            if capacity > 0 then\n                ratio = fillLevel / capacity\n            end\n            info.ratio = math.clamp(ratio, 0 , 1 )\n            info.invertedBar = true\n            info.customUnitText = spec.fillTypeUnit\n\n            table.insert(infos, info)\n        end\n    end\n\n    return infos\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getpalletcallback",children:"getPalletCallback"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getPalletCallback()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"pallet"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"result"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"fillTypeIndex"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryPallets:getPalletCallback(pallet, result, fillTypeIndex)\n    local spec = self.spec_husbandryPallets\n    spec.numSpawnsPending = math.max(spec.numSpawnsPending - 1 , 0 )\n    spec.currentPallets[fillTypeIndex] = pallet\n\n    if pallet ~ = nil then\n        if spec.palletLimitReached then\n            spec.palletLimitReached = false\n            self:raiseDirtyFlags(spec.dirtyFlag)\n        end\n\n        if result = = PalletSpawner.RESULT_SUCCESS then\n            pallet:emptyAllFillUnits( true )\n        end\n\n        spec.pallets[pallet] = true\n        local fillUnitIndex = pallet.spec_pallet.fillUnitIndex\n        local pendingLiters = spec.pendingLiters[fillTypeIndex]\n        local delta = pallet:addFillUnitFillLevel( self:getOwnerFarmId(), fillUnitIndex, pendingLiters, fillTypeIndex, ToolType.UNDEFINED)\n        if delta > 0 then\n            spec.pendingLiters[fillTypeIndex] = math.max(spec.pendingLiters[fillTypeIndex] - delta, 0 )\n\n            if spec.pendingLiters[fillTypeIndex] > 5 then\n                self:updatePallets()\n            end\n        end\n    elseif result = = PalletSpawner.RESULT_NO_SPACE then\n            self:showSpawnerBlockedWarning(fillTypeIndex)\n        elseif result = = PalletSpawner.PALLET_LIMITED_REACHED then\n                if not spec.palletLimitReached then\n                    spec.palletLimitReached = true\n                    self:raiseDirtyFlags(spec.dirtyFlag)\n                end\n            end\n\n            self:updatePalletInfo()\n        end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"loadfromxmlfile",children:"loadFromXMLFile"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"loadFromXMLFile()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"xmlFile"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"key"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryPallets:loadFromXMLFile(xmlFile, key)\n    local spec = self.spec_husbandryPallets\n\n    for _, pendingKey in xmlFile:iterator(key .. ".pendingLiters" ) do\n        local fillTypeIndex = g_fillTypeManager:getFillTypeIndexByName(xmlFile:getValue(pendingKey .. "#fillType" ))\n        if fillTypeIndex ~ = nil then\n            spec.pendingLiters[fillTypeIndex] = xmlFile:getValue(pendingKey .. "#liters" ) or 0\n        end\n    end\n\n    self:updatePalletInfo()\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"ondelete",children:"onDelete"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onDelete()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryPallets:onDelete()\n    local spec = self.spec_husbandryPallets\n\n    if spec.palletSpawner ~ = nil then\n        for _, info in ipairs(spec.palletSpawner) do\n            info.palletSpawner:delete()\n\n            if info.palletTriggers ~ = nil then\n                for _, trigger in ipairs(info.palletTriggers) do\n                    if trigger.added then\n                        removeTrigger(trigger.node)\n                    end\n                end\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onfinalizeplacement",children:"onFinalizePlacement"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onFinalizePlacement()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryPallets:onFinalizePlacement()\n    local spec = self.spec_husbandryPallets\n\n    if spec.palletSpawner ~ = nil then\n        for _, info in ipairs(spec.palletSpawner) do\n            if info.palletTriggers ~ = nil then\n                for _, trigger in ipairs(info.palletTriggers) do\n                    addTrigger(trigger.node, "onPalletTriggerCallback" , self )\n                    trigger.added = true\n                end\n            end\n        end\n    end\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"onhusbandryanimalsupdate",children:"onHusbandryAnimalsUpdate"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onHusbandryAnimalsUpdate()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"clusters"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryPallets:onHusbandryAnimalsUpdate(clusters)\n    local spec = self.spec_husbandryPallets\n\n    for fillTypeIndex, _ in pairs(spec.litersPerHour) do\n        spec.litersPerHour[fillTypeIndex] = 0\n    end\n\n    spec.activeFillTypes = { }\n\n    for _, cluster in ipairs(clusters) do\n        local subType = g_currentMission.animalSystem:getSubTypeByIndex(cluster.subTypeIndex)\n        if subType ~ = nil then\n            local pallets = subType.output.pallets\n            if pallets ~ = nil then\n                local age = cluster:getAge()\n                local litersPerAnimals = pallets.curve:get(age)\n                local litersPerDay = litersPerAnimals * cluster:getNumAnimals()\n\n                spec.litersPerHour[pallets.fillType] = spec.litersPerHour[pallets.fillType] + (litersPerDay / 24 )\n\n                table.addElement(spec.activeFillTypes, pallets.fillType)\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onLoad()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryPallets:onLoad(savegame)\n    local spec = self.spec_husbandryPallets\n\n    spec.fillTypeIndexToPalletSpawner = { }\n    spec.palletSpawner = { }\n    spec.fillTypes = { }\n    spec.litersPerHour = { }\n    spec.currentPallets = { }\n    spec.maxNumPallets = { }\n    spec.numPalletInfoUpdateRunning = 0\n    spec.numSpawnsPending = 0\n    spec.pendingLiters = { }\n    spec.capacities = { }\n    spec.capacitiesPending = { }\n    spec.capacitiesSent = { }\n    spec.maxCapacitiesPending = { }\n    spec.fillLevels = { }\n    spec.fillLevelsPending = { }\n    spec.fillLevelsSent = { }\n    spec.pallets = { }\n    spec.activeFillTypes = { }\n\n    for _, key in self.xmlFile:iterator( "placeable.husbandry.pallets.palletSpawner" ) do\n        local fillTypes = g_fillTypeManager:loadCombinedFillTypesFromConfig( self.xmlFile, key)\n        if #fillTypes > 0 then\n            local maxNumPallets = self.xmlFile:getValue(key .. "#maxNumPallets" , 1 )\n\n            local palletSpawner = PalletSpawner.new( self.baseDirectory)\n            palletSpawner:load( self.components, self.xmlFile, key, self.customEnvironment, self.i3dMappings)\n\n            for _, fillTypeIndex in ipairs(fillTypes) do\n                if spec.fillTypeIndexToPalletSpawner[fillTypeIndex] = = nil then\n                    spec.fillTypeIndexToPalletSpawner[fillTypeIndex] = palletSpawner\n                    table.insert(spec.fillTypes, fillTypeIndex)\n                    spec.litersPerHour[fillTypeIndex] = 0\n                    spec.maxNumPallets[fillTypeIndex] = maxNumPallets\n                    spec.capacities[fillTypeIndex] = 0\n                    spec.capacitiesPending[fillTypeIndex] = 0\n                    spec.capacitiesSent[fillTypeIndex] = 0\n                    spec.maxCapacitiesPending[fillTypeIndex] = 0\n                    spec.fillLevels[fillTypeIndex] = 0\n                    spec.fillLevelsPending[fillTypeIndex] = 0\n                    spec.fillLevelsSent[fillTypeIndex] = 0\n                    spec.pendingLiters[fillTypeIndex] = 0\n                else\n                        Logging.xmlWarning( self.xmlFile, "There is already a palletSpawner defined for fillType \'%s\'" , g_fillTypeManager:getFillTypeNameByIndex(fillTypeIndex))\n                        end\n                    end\n\n                    local palletTriggers\n                    if self.isServer then\n                        palletTriggers = { }\n                        for _, triggerKey in self.xmlFile:iterator(key .. ".palletTrigger" ) do\n                            local node = self.xmlFile:getValue(triggerKey .. "#node" , nil , self.components, self.i3dMappings)\n                            if node ~ = nil then\n                                if not CollisionFlag.getHasMaskFlagSet(node, CollisionFlag.VEHICLE) then -- check if proper bit for pallets is set\n                                    Logging.xmlWarning( self.xmlFile, "Pallet trigger %q at %q does not have \'VEHICLE\' bit set in its mask, ignoring" , I3DUtil.getNodePath(node, self.rootNode), triggerKey)\n                                    continue\n                                end\n                                table.insert(palletTriggers, { node = node, added = false } )\n                            end\n                        end\n                    end\n\n                    local info = {\n                    palletSpawner = palletSpawner,\n                    maxNumPallets = maxNumPallets,\n                    palletTriggers = palletTriggers\n                    }\n                    table.insert(spec.palletSpawner, info)\n                end\n            end\n\n            spec.palletLimitReached = false\n            spec.infoHudTooManyPallets = { title = g_i18n:getText( "infohud_tooManyPallets" ), accentuate = true }\n            spec.dirtyFlag = self:getNextDirtyFlag()\n\n            local animalTypeIndex = self:getAnimalTypeIndex()\n            local animalType = g_currentMission.animalSystem:getTypeByIndex(animalTypeIndex)\n            if animalType ~ = nil then\n                for _, subTypeIndex in ipairs(animalType.subTypes) do\n                    local subType = g_currentMission.animalSystem:getSubTypeByIndex(subTypeIndex)\n                    if subType.output ~ = nil then\n                        local pallets = subType.output.pallets\n                        if pallets ~ = nil then\n                            if spec.litersPerHour[pallets.fillType] = = nil then\n                                Logging.xmlWarning( self.xmlFile, "Husbandry does not support pallet filltype \'%s\'" , g_fillTypeManager:getFillTypeNameByIndex(pallets.fillType))\n                            end\n                        end\n                    end\n                end\n            end\n        end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"onpallettriggercallback",children:"onPalletTriggerCallback"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onPalletTriggerCallback()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"triggerId"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"otherId"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"onEnter"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"onLeave"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"onStay"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryPallets:onPalletTriggerCallback(triggerId, otherId, onEnter, onLeave, onStay)\n    if onLeave then\n        local spec = self.spec_husbandryPallets\n        local object = g_currentMission:getNodeObject(otherId)\n        if object ~ = nil then\n            for fillTypeIndex, pallet in pairs(spec.currentPallets) do\n                if object = = pallet then\n                    spec.currentPallets[fillTypeIndex] = nil\n                end\n            end\n\n            spec.pallets[object] = nil\n            self:updatePalletInfo()\n        end\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onreadstream",children:"onReadStream"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onReadStream()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"streamId"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryPallets:onReadStream(streamId, connection)\n    local spec = self.spec_husbandryPallets\n    for _, fillTypeIndex in ipairs(spec.fillTypes) do\n        spec.fillLevelsSent[fillTypeIndex] = streamReadFloat32(streamId)\n        spec.capacitiesSent[fillTypeIndex] = streamReadFloat32(streamId)\n    end\n\n    spec.palletLimitReached = streamReadBool(streamId)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onreadupdatestream",children:"onReadUpdateStream"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onReadUpdateStream()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"streamId"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"timestamp"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"connection"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryPallets:onReadUpdateStream(streamId, timestamp, connection)\n    if connection:getIsServer() then\n        if streamReadBool(streamId) then\n            local spec = self.spec_husbandryPallets\n            for _, fillTypeIndex in ipairs(spec.fillTypes) do\n                spec.fillLevelsSent[fillTypeIndex] = streamReadFloat32(streamId)\n                spec.capacitiesSent[fillTypeIndex] = streamReadFloat32(streamId)\n            end\n\n            spec.palletLimitReached = streamReadBool(streamId)\n        end\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onwritestream",children:"onWriteStream"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onWriteStream()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"streamId"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryPallets:onWriteStream(streamId, connection)\n    local spec = self.spec_husbandryPallets\n\n    for _, fillTypeIndex in ipairs(spec.fillTypes) do\n        streamWriteFloat32(streamId, spec.fillLevelsSent[fillTypeIndex])\n        streamWriteFloat32(streamId, spec.capacitiesSent[fillTypeIndex])\n    end\n\n    streamWriteBool(streamId, spec.palletLimitReached)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onwriteupdatestream",children:"onWriteUpdateStream"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onWriteUpdateStream()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"streamId"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"connection"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"dirtyMask"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryPallets:onWriteUpdateStream(streamId, connection, dirtyMask)\n    if not connection:getIsServer() then\n        local spec = self.spec_husbandryPallets\n        if streamWriteBool(streamId, bit32.band(dirtyMask, spec.dirtyFlag) ~ = 0 ) then\n            for _, fillTypeIndex in ipairs(spec.fillTypes) do\n                streamWriteFloat32(streamId, spec.fillLevelsSent[fillTypeIndex])\n                streamWriteFloat32(streamId, spec.capacitiesSent[fillTypeIndex])\n            end\n\n            streamWriteBool(streamId, spec.palletLimitReached)\n        end\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Checks if all prerequisite specializations are loaded"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"prerequisitesPresent(table specializations)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"specializations"}),(0,s.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"hasPrerequisite"}),(0,s.jsx)(n.th,{children:"true if all prerequisite specializations are loaded"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryPallets.prerequisitesPresent(specializations)\n    return SpecializationUtil.hasSpecialization( PlaceableHusbandryAnimals , specializations)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryPallets.registerEventListeners(placeableType)\n    SpecializationUtil.registerEventListener(placeableType, "onLoad" , PlaceableHusbandryPallets )\n    SpecializationUtil.registerEventListener(placeableType, "onDelete" , PlaceableHusbandryPallets )\n    SpecializationUtil.registerEventListener(placeableType, "onFinalizePlacement" , PlaceableHusbandryPallets )\n    SpecializationUtil.registerEventListener(placeableType, "onReadStream" , PlaceableHusbandryPallets )\n    SpecializationUtil.registerEventListener(placeableType, "onWriteStream" , PlaceableHusbandryPallets )\n    SpecializationUtil.registerEventListener(placeableType, "onReadUpdateStream" , PlaceableHusbandryPallets )\n    SpecializationUtil.registerEventListener(placeableType, "onWriteUpdateStream" , PlaceableHusbandryPallets )\n    SpecializationUtil.registerEventListener(placeableType, "onHusbandryAnimalsUpdate" , PlaceableHusbandryPallets )\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryPallets.registerFunctions(placeableType)\n    SpecializationUtil.registerFunction(placeableType, "onPalletTriggerCallback" , PlaceableHusbandryPallets.onPalletTriggerCallback)\n    SpecializationUtil.registerFunction(placeableType, "getAllPalletsCallback" , PlaceableHusbandryPallets.getAllPalletsCallback)\n    SpecializationUtil.registerFunction(placeableType, "updatePallets" , PlaceableHusbandryPallets.updatePallets)\n    SpecializationUtil.registerFunction(placeableType, "getPalletCallback" , PlaceableHusbandryPallets.getPalletCallback)\n    SpecializationUtil.registerFunction(placeableType, "showSpawnerBlockedWarning" , PlaceableHusbandryPallets.showSpawnerBlockedWarning)\n    SpecializationUtil.registerFunction(placeableType, "showPalletBlockedWarning" , PlaceableHusbandryPallets.showPalletBlockedWarning)\n    SpecializationUtil.registerFunction(placeableType, "updatePalletInfo" , PlaceableHusbandryPallets.updatePalletInfo)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registeroverwrittenfunctions",children:"registerOverwrittenFunctions"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerOverwrittenFunctions()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryPallets.registerOverwrittenFunctions(placeableType)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "getConditionInfos" , PlaceableHusbandryPallets.getConditionInfos)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "updateOutput" , PlaceableHusbandryPallets.updateOutput)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "updateInfo" , PlaceableHusbandryPallets.updateInfo)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registersavegamexmlpaths",children:"registerSavegameXMLPaths"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerSavegameXMLPaths()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"schema"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"basePath"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryPallets.registerSavegameXMLPaths(schema, basePath)\n    schema:setXMLSpecializationType( "Husbandry" )\n    schema:register(XMLValueType.STRING, basePath .. ".pendingLiters(?)#fillType" , "Name of the filltype" )\n    schema:register(XMLValueType.FLOAT, basePath .. ".pendingLiters(?)#liters" , "Pending liters" )\n    schema:setXMLSpecializationType()\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registerxmlpaths",children:"registerXMLPaths"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerXMLPaths()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"schema"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"basePath"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryPallets.registerXMLPaths(schema, basePath)\n    schema:setXMLSpecializationType( "Husbandry" )\n    basePath = basePath .. ".husbandry.pallets.palletSpawner(?)"\n    schema:register(XMLValueType.NODE_INDEX, basePath .. ".palletTrigger(?)#node" , "A pallet trigger" )\n    FillTypeManager.registerConfigXMLFilltypes(schema, basePath)\n    schema:register(XMLValueType.STRING, basePath .. "#unitText" , "Pallet fill type unit" )\n    schema:register(XMLValueType.INT, basePath .. "#maxNumPallets" , "Maximum number of pallets" )\n    PalletSpawner.registerXMLPaths(schema, basePath)\n    schema:setXMLSpecializationType()\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"savetoxmlfile",children:"saveToXMLFile"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"saveToXMLFile()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"xmlFile"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"key"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"usedModNames"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryPallets:saveToXMLFile(xmlFile, key, usedModNames)\n    local spec = self.spec_husbandryPallets\n    local index = 0\n    for fillTypeIndex, pendingLiters in pairs(spec.pendingLiters) do\n        if pendingLiters > 0 then\n            local pendingKey = string.format( "%s.pendingLiters(%d)" , key, index)\n            xmlFile:setValue(pendingKey .. "#fillType" , g_fillTypeManager:getFillTypeNameByIndex(fillTypeIndex))\n            xmlFile:setValue(pendingKey .. "#liters" , pendingLiters)\n            index = index + 1\n        end\n    end\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"showpalletblockedwarning",children:"showPalletBlockedWarning"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"showPalletBlockedWarning()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"fillTypeIndex"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryPallets:showPalletBlockedWarning(fillTypeIndex)\n    if self.isClient and g_currentMission:getFarmId() = = self:getOwnerFarmId() then\n        local fillType = g_fillTypeManager:getFillTypeByIndex(fillTypeIndex)\n        if fillType ~ = nil then\n            local text = string.format(g_i18n:getText( "ingameNotification_palletSpawnerBlocked" ), fillType.title, self:getName())\n            g_currentMission:addIngameNotification(FSBaseMission.INGAME_NOTIFICATION_CRITICAL, text)\n        end\n    end\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"showspawnerblockedwarning",children:"showSpawnerBlockedWarning"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"showSpawnerBlockedWarning()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"fillTypeIndex"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryPallets:showSpawnerBlockedWarning(fillTypeIndex)\n    local spec = self.spec_husbandryPallets\n    if not spec.showedWarning then\n        if self.isServer then\n            g_currentMission:broadcastEventToFarm( AnimalHusbandryNoMorePalletSpaceEvent.new( self , fillTypeIndex), self:getOwnerFarmId(), false )\n        end\n\n        self:showPalletBlockedWarning(fillTypeIndex)\n\n        spec.showedWarning = true\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"updateinfo",children:"updateInfo"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"updateInfo()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"infoTable"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryPallets:updateInfo(superFunc, infoTable)\n    superFunc( self , infoTable)\n    local spec = self.spec_husbandryPallets\n\n    if spec.palletLimitReached then\n        table.insert(infoTable, spec.infoHudTooManyPallets)\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"updateoutput",children:"updateOutput"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"updateOutput()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"foodFactor"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"productionFactor"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"globalProductionFactor"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryPallets:updateOutput(superFunc, foodFactor, productionFactor, globalProductionFactor)\n    superFunc( self , foodFactor, productionFactor, globalProductionFactor)\n\n    local spec = self.spec_husbandryPallets\n    spec.showedWarning = false\n\n    if self.isServer then\n        for _, fillTypeIndex in ipairs(spec.fillTypes) do\n            local litersPerHour = spec.litersPerHour[fillTypeIndex]\n            if litersPerHour > 0 then\n                local delta = productionFactor * globalProductionFactor * litersPerHour * g_currentMission.environment.timeAdjustment\n                spec.pendingLiters[fillTypeIndex] = spec.pendingLiters[fillTypeIndex] + delta\n                self:updatePallets()\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"updatepalletinfo",children:"updatePalletInfo"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"updatePalletInfo()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryPallets:updatePalletInfo()\n    if self.isServer then\n        local spec = self.spec_husbandryPallets\n        if spec.numPalletInfoUpdateRunning = = 0 then\n            for fillTypeIndex in pairs(spec.capacitiesPending) do\n                spec.fillLevelsPending[fillTypeIndex] = 0\n                spec.capacitiesPending[fillTypeIndex] = 0\n                spec.maxCapacitiesPending[fillTypeIndex] = 0\n            end\n\n            for fillTypeIndex, palletSpawner in pairs(spec.fillTypeIndexToPalletSpawner) do\n                spec.numPalletInfoUpdateRunning = spec.numPalletInfoUpdateRunning + 1\n                palletSpawner:getAllPallets(fillTypeIndex, self.getAllPalletsCallback, self )\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"updatepallets",children:"updatePallets"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"updatePallets()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryPallets:updatePallets()\n    if self.isServer then\n        local spec = self.spec_husbandryPallets\n        if spec.numSpawnsPending = = 0 then\n            for fillTypeIndex, pendingLiters in pairs(spec.pendingLiters) do\n                if pendingLiters > 5 then\n                    local palletSpawner = spec.fillTypeIndexToPalletSpawner[fillTypeIndex]\n                    spec.numSpawnsPending = spec.numSpawnsPending + 1\n                    palletSpawner:getOrSpawnPallet( self:getOwnerFarmId(), fillTypeIndex, self.getPalletCallback, self )\n                end\n            end\n        end\n    end\nend\n\n"})})]})}function o(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}}}]);