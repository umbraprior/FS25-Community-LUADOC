"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[53496],{597(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"script/Specializations/TreeSaw","title":"TreeSaw","description":"TreeSaw","source":"@site/../docs/script/Specializations/TreeSaw.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/TreeSaw","permalink":"/FS25-Community-LUADOC/script/Specializations/TreeSaw","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"TreeSaplingPallet","permalink":"/FS25-Community-LUADOC/script/Specializations/TreeSaplingPallet"},"next":{"title":"TurnOnVehicle","permalink":"/FS25-Community-LUADOC/script/Specializations/TurnOnVehicle"}}');var t=i(74848),l=i(28453);const c={},r=void 0,a={},d=[{value:"TreeSaw",id:"treesaw",level:2},{value:"initSpecialization",id:"initspecialization",level:3},{value:"onDeactivate",id:"ondeactivate",level:3},{value:"onDelete",id:"ondelete",level:3},{value:"onDraw",id:"ondraw",level:3},{value:"onLoad",id:"onload",level:3},{value:"onReadUpdateStream",id:"onreadupdatestream",level:3},{value:"onTurnedOff",id:"onturnedoff",level:3},{value:"onTurnedOn",id:"onturnedon",level:3},{value:"onUpdate",id:"onupdate",level:3},{value:"onUpdateTick",id:"onupdatetick",level:3},{value:"onWriteUpdateStream",id:"onwriteupdatestream",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3}];function o(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"treesaw",children:"TreeSaw"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Specialization for vehicles with sawing functionality. Not to confuse with Chainsaw hand tool"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Functions"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#initspecialization",children:"initSpecialization"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#ondeactivate",children:"onDeactivate"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#ondelete",children:"onDelete"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#ondraw",children:"onDraw"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onreadupdatestream",children:"onReadUpdateStream"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onturnedoff",children:"onTurnedOff"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onturnedon",children:"onTurnedOn"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onupdate",children:"onUpdate"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onupdatetick",children:"onUpdateTick"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#onwriteupdatestream",children:"onWriteUpdateStream"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"initspecialization",children:"initSpecialization"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"initSpecialization()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function TreeSaw.initSpecialization()\n    local schema = Vehicle.xmlSchema\n    schema:setXMLSpecializationType( "TreeSaw" )\n\n    SoundManager.registerSampleXMLPaths(schema, "vehicle.treeSaw.sounds" , "cut" )\n    SoundManager.registerSampleXMLPaths(schema, "vehicle.treeSaw.sounds" , "saw" )\n\n    AnimationManager.registerAnimationNodesXMLPaths(schema, "vehicle.treeSaw.animationNodes" )\n    EffectManager.registerEffectXMLPaths(schema, "vehicle.treeSaw.effects" )\n\n    schema:register(XMLValueType.NODE_INDEX, "vehicle.treeSaw.cutNode#node" , "Cut node" )\n    schema:register(XMLValueType.FLOAT, "vehicle.treeSaw.cutNode#sizeY" , "Size Y" , 1 )\n    schema:register(XMLValueType.FLOAT, "vehicle.treeSaw.cutNode#sizeZ" , "Size Z" , 1 )\n    schema:register(XMLValueType.FLOAT, "vehicle.treeSaw.cutNode#lengthAboveThreshold" , "Min.tree length above cut node" , 0.3 )\n    schema:register(XMLValueType.FLOAT, "vehicle.treeSaw.cutNode#lengthBelowThreshold" , "Min.tree length below cut node" , 0.3 )\n    schema:register(XMLValueType.FLOAT, "vehicle.treeSaw.cutNode#timer" , "Cut delay(sec.)" , 1 )\n\n    schema:setXMLSpecializationType()\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"ondeactivate",children:"onDeactivate"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on deactivate"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onDeactivate()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function TreeSaw:onDeactivate()\n    local spec = self.spec_treeSaw\n\n    spec.curSplitShape = nil\n    spec.cutTimer = - 1\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"ondelete",children:"onDelete"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on deleting"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onDelete()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function TreeSaw:onDelete()\n    local spec = self.spec_treeSaw\n    g_effectManager:deleteEffects(spec.effects)\n    g_soundManager:deleteSamples(spec.samples)\n    g_animationManager:deleteAnimations(spec.animationNodes)\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"ondraw",children:"onDraw"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on draw"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onDraw(boolean isActiveForInput, boolean isSelected, )"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"boolean"}),(0,t.jsx)(n.th,{children:"isActiveForInput"}),(0,t.jsx)(n.th,{children:"true if vehicle is active for input"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"boolean"}),(0,t.jsx)(n.td,{children:"isSelected"}),(0,t.jsx)(n.td,{children:"true if vehicle is selected"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"isSelected"}),(0,t.jsx)(n.td,{})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function TreeSaw:onDraw(isActiveForInput, isActiveForInputIgnoreSelection, isSelected)\n    local spec = self.spec_treeSaw\n\n    if spec.isCutting then\n        g_currentMission:addExtraPrintText(g_i18n:getText( "info_cutting" ))\n    end\n\n    if spec.warnTreeNotOwned then\n        g_currentMission:showBlinkingWarning(g_i18n:getText( "warning_youDontHaveAccessToThisLand" ), 1000 )\n    end\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on loading"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onLoad(table savegame)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"table"}),(0,t.jsx)(n.th,{children:"savegame"}),(0,t.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function TreeSaw:onLoad(savegame)\n    local spec = self.spec_treeSaw\n\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.turnedOnRotationNodes.turnedOnRotationNode" , "vehicle.treeSaw.animationNodes.animationNode" , "stumbCutter" ) --FS17 to FS19\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.treeSaw.cutParticleSystems.emitterShape(0)" , "vehicle.treeSaw.effects.effectNode" ) --FS17 to FS19\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.treeSaw.sawSound" , "vehicle.treeSaw.sounds.saw" ) --FS17 to FS19\n    XMLUtil.checkDeprecatedXMLElements( self.xmlFile, "vehicle.treeSaw.cutSound" , "vehicle.treeSaw.sounds.cut" ) --FS17 to FS19\n\n    local baseKey = "vehicle.treeSaw"\n\n    if self.isClient then\n        spec.animationNodes = g_animationManager:loadAnimations( self.xmlFile, baseKey .. ".animationNodes" , self.components, self , self.i3dMappings)\n        spec.effects = g_effectManager:loadEffect( self.xmlFile, baseKey .. ".effects" , self.components, self , self.i3dMappings)\n\n        spec.samples = { }\n        spec.samples.cut = g_soundManager:loadSampleFromXML( self.xmlFile, baseKey .. ".sounds" , "cut" , self.baseDirectory, self.components, 0 , AudioGroup.VEHICLE, self.i3dMappings, self )\n        spec.samples.saw = g_soundManager:loadSampleFromXML( self.xmlFile, baseKey .. ".sounds" , "saw" , self.baseDirectory, self.components, 0 , AudioGroup.VEHICLE, self.i3dMappings, self )\n    end\n\n    spec.cutNode = self.xmlFile:getValue(baseKey .. ".cutNode#node" , nil , self.components, self.i3dMappings)\n    spec.cutSizeY = self.xmlFile:getValue(baseKey .. ".cutNode#sizeY" , 1 )\n    spec.cutSizeZ = self.xmlFile:getValue(baseKey .. ".cutNode#sizeZ" , 1 )\n    spec.lengthAboveThreshold = self.xmlFile:getValue(baseKey .. ".cutNode#lengthAboveThreshold" , 0.3 )\n    spec.lengthBelowThreshold = self.xmlFile:getValue(baseKey .. ".cutNode#lengthBelowThreshold" , 0.3 )\n    spec.cutTimerDuration = self.xmlFile:getValue(baseKey .. ".cutNode#timer" , 1 ) * 1000\n\n    spec.curSplitShape = nil\n    spec.cutTimer = - 1\n    spec.isCutting = false\n    spec.warnTreeNotOwned = false\nend\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"onreadupdatestream",children:"onReadUpdateStream"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on on update"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onReadUpdateStream(integer streamId, integer timestamp, table connection)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"integer"}),(0,t.jsx)(n.th,{children:"streamId"}),(0,t.jsx)(n.th,{children:"stream ID"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"integer"}),(0,t.jsx)(n.td,{children:"timestamp"}),(0,t.jsx)(n.td,{children:"timestamp"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"table"}),(0,t.jsx)(n.td,{children:"connection"}),(0,t.jsx)(n.td,{children:"connection"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function TreeSaw:onReadUpdateStream(streamId, timestamp, connection)\n    if connection:getIsServer() then\n        local spec = self.spec_treeSaw\n        spec.isCutting = streamReadBool(streamId)\n    end\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"onturnedoff",children:"onTurnedOff"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on turn off"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onTurnedOff()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function TreeSaw:onTurnedOff()\n    local spec = self.spec_treeSaw\n\n    spec.curSplitShape = nil\n    spec.cutTimer = - 1\n\n    if self.isClient then\n        g_animationManager:stopAnimations(spec.animationNodes)\n        g_effectManager:stopEffects(spec.effects)\n        g_soundManager:stopSamples(spec.samples)\n    end\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"onturnedon",children:"onTurnedOn"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on turn on"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onTurnedOn()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function TreeSaw:onTurnedOn()\n    if self.isClient then\n        local spec = self.spec_treeSaw\n        g_animationManager:startAnimations(spec.animationNodes)\n        g_soundManager:playSample(spec.samples.saw)\n    end\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"onupdate",children:"onUpdate"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on update"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onUpdate(float dt, boolean isActiveForInput, boolean isSelected, )"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"float"}),(0,t.jsx)(n.th,{children:"dt"}),(0,t.jsx)(n.th,{children:"time since last call in ms"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"boolean"}),(0,t.jsx)(n.td,{children:"isActiveForInput"}),(0,t.jsx)(n.td,{children:"true if vehicle is active for input"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"boolean"}),(0,t.jsx)(n.td,{children:"isSelected"}),(0,t.jsx)(n.td,{children:"true if vehicle is selected"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"isSelected"}),(0,t.jsx)(n.td,{})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function TreeSaw:onUpdate(dt, isActiveForInput, isActiveForInputIgnoreSelection, isSelected)\n    local spec = self.spec_treeSaw\n\n    -- Verify that the split shapes still exist(possible that someone has cut them)\n    if self.isServer then\n        if spec.curSplitShape ~ = nil then\n            if not entityExists(spec.curSplitShape) then\n                spec.curSplitShape = nil\n                if g_server ~ = nil then\n                    spec.cutTimer = - 1\n                end\n            end\n        end\n\n        spec.isCutting = spec.curSplitShape ~ = nil\n        if spec.curSplitShape ~ = nil then\n            if spec.cutTimer > 0 then\n                spec.cutTimer = math.max(spec.cutTimer - dt, 0 )\n            end\n\n            -- cut\n            if spec.cutTimer = = 0 then\n                spec.cutTimer = - 1\n\n                local x,y,z = getWorldTranslation(spec.cutNode)\n                local nx,ny,nz = localDirectionToWorld(spec.cutNode, 1 , 0 , 0 )\n                local yx,yy,yz = localDirectionToWorld(spec.cutNode, 0 , 1 , 0 )\n\n                ChainsawUtil.cutSplitShape(spec.curSplitShape, x,y,z, nx,ny,nz, yx,yy,yz, spec.cutSizeY, spec.cutSizeZ, self:getActiveFarm())\n                spec.curSplitShape = nil\n            end\n        end\n    end\n\n    -- effect and sound for cut\n        if self.isClient then\n            if spec.cutTimer > 0 then\n                g_effectManager:setEffectTypeInfo(spec.effects, FillType.WOODCHIPS)\n                g_effectManager:startEffects(spec.effects)\n                if not g_soundManager:getIsSamplePlaying(spec.samples.cut) then\n                    g_soundManager:playSample(spec.samples.cut)\n                end\n            else\n                    g_effectManager:stopEffects(spec.effects)\n                    if g_soundManager:getIsSamplePlaying(spec.samples.cut) then\n                        g_soundManager:stopSample(spec.samples.cut)\n                    end\n                end\n            end\n        end\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"onupdatetick",children:"onUpdateTick"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on update tick"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onUpdateTick(float dt, boolean isActiveForInput, boolean isSelected, )"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"float"}),(0,t.jsx)(n.th,{children:"dt"}),(0,t.jsx)(n.th,{children:"time since last call in ms"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"boolean"}),(0,t.jsx)(n.td,{children:"isActiveForInput"}),(0,t.jsx)(n.td,{children:"true if vehicle is active for input"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"boolean"}),(0,t.jsx)(n.td,{children:"isSelected"}),(0,t.jsx)(n.td,{children:"true if vehicle is selected"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"any"}),(0,t.jsx)(n.td,{children:"isSelected"}),(0,t.jsx)(n.td,{})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function TreeSaw:onUpdateTick(dt, isActiveForInput, isActiveForInputIgnoreSelection, isSelected)\n    local spec = self.spec_treeSaw\n    spec.warnTreeNotOwned = false\n\n    if self:getIsTurnedOn() then\n        if spec.cutNode ~ = nil then\n            local x,y,z = getWorldTranslation(spec.cutNode)\n            local nx,ny,nz = localDirectionToWorld(spec.cutNode, 1 , 0 , 0 )\n            local yx,yy,yz = localDirectionToWorld(spec.cutNode, 0 , 1 , 0 )\n\n            if spec.curSplitShape = = nil then\n                local shape, _, _, _, _ = findSplitShape(x,y,z, nx,ny,nz, yx,yy,yz, spec.cutSizeY, spec.cutSizeZ)\n                if shape ~ = 0 then\n                    if g_currentMission.accessHandler:canFarmAccessLand( self:getActiveFarm(), x, z) then\n                        spec.curSplitShape = shape\n                        spec.cutTimer = spec.cutTimerDuration\n                    else\n                            spec.warnTreeNotOwned = true\n                        end\n                    end\n                elseif not entityExists(spec.curSplitShape) then\n                        spec.curSplitShape = nil\n                    end\n\n                    if spec.curSplitShape ~ = nil then\n                        local minY,maxY, minZ,maxZ = testSplitShape(spec.curSplitShape, x,y,z, nx,ny,nz, yx,yy,yz, spec.cutSizeY, spec.cutSizeZ)\n                        if minY = = nil then\n                            spec.curSplitShape = nil\n                        else\n                                -- check if cut would be below y = 0(tree CoSy)\n                                    local cutTooLow = false\n                                    local _,ly,_ = localToLocal(spec.cutNode, spec.curSplitShape, 0 ,minY,minZ)\n                                    cutTooLow = cutTooLow or ly < 0.01\n                                    _,ly,_ = localToLocal(spec.cutNode, spec.curSplitShape, 0 ,minY,maxZ)\n                                    cutTooLow = cutTooLow or ly < 0.01\n                                    _,ly,_ = localToLocal(spec.cutNode, spec.curSplitShape, 0 ,maxY,minZ)\n                                    cutTooLow = cutTooLow or ly < 0.01\n                                    _,ly,_ = localToLocal(spec.cutNode, spec.curSplitShape, 0 ,maxY,maxZ)\n                                    cutTooLow = cutTooLow or ly < 0.01\n                                    if cutTooLow then\n                                        spec.curSplitShape = nil\n                                    end\n                                end\n                            end\n\n                            if spec.curSplitShape ~ = nil then\n                                local lenBelow, lenAbove = getSplitShapePlaneExtents(spec.curSplitShape, x,y,z, nx,ny,nz)\n                                if lenAbove < spec.lengthAboveThreshold or lenBelow < spec.lengthBelowThreshold then\n                                    spec.curSplitShape = nil\n                                end\n                            end\n\n                            if spec.curSplitShape = = nil and spec.cutTimer > - 1 then\n                                spec.cutTimer = - 1\n                            end\n                        end\n                    end\n                end\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"onwriteupdatestream",children:"onWriteUpdateStream"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Called on on update"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"onWriteUpdateStream(integer streamId, table connection, integer dirtyMask)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"integer"}),(0,t.jsx)(n.th,{children:"streamId"}),(0,t.jsx)(n.th,{children:"stream ID"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"table"}),(0,t.jsx)(n.td,{children:"connection"}),(0,t.jsx)(n.td,{children:"connection"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"integer"}),(0,t.jsx)(n.td,{children:"dirtyMask"}),(0,t.jsx)(n.td,{children:"dirty mask"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function TreeSaw:onWriteUpdateStream(streamId, connection, dirtyMask)\n    if not connection:getIsServer() then\n        local spec = self.spec_treeSaw\n        streamWriteBool(streamId, spec.isCutting)\n    end\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Checks if all prerequisite specializations are loaded"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"prerequisitesPresent(table specializations)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"table"}),(0,t.jsx)(n.th,{children:"specializations"}),(0,t.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"table"}),(0,t.jsx)(n.th,{children:"hasPrerequisite"}),(0,t.jsx)(n.th,{children:"true if all prerequisite specializations are loaded"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"function TreeSaw.prerequisitesPresent(specializations)\n    return SpecializationUtil.hasSpecialization( TurnOnVehicle , specializations)\nend\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(n.table,{children:(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"any"}),(0,t.jsx)(n.th,{children:"vehicleType"})]})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'function TreeSaw.registerEventListeners(vehicleType)\n    SpecializationUtil.registerEventListener(vehicleType, "onLoad" , TreeSaw )\n    SpecializationUtil.registerEventListener(vehicleType, "onDelete" , TreeSaw )\n    SpecializationUtil.registerEventListener(vehicleType, "onReadUpdateStream" , TreeSaw )\n    SpecializationUtil.registerEventListener(vehicleType, "onWriteUpdateStream" , TreeSaw )\n    SpecializationUtil.registerEventListener(vehicleType, "onUpdate" , TreeSaw )\n    SpecializationUtil.registerEventListener(vehicleType, "onUpdateTick" , TreeSaw )\n    SpecializationUtil.registerEventListener(vehicleType, "onDraw" , TreeSaw )\n    SpecializationUtil.registerEventListener(vehicleType, "onDeactivate" , TreeSaw )\n    SpecializationUtil.registerEventListener(vehicleType, "onTurnedOn" , TreeSaw )\n    SpecializationUtil.registerEventListener(vehicleType, "onTurnedOff" , TreeSaw )\nend\n\n'})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},28453(e,n,i){i.d(n,{R:()=>c,x:()=>r});var s=i(96540);const t={},l=s.createContext(t);function c(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);