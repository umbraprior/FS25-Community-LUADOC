"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[45611],{28453(e,n,l){l.d(n,{R:()=>s,x:()=>t});var a=l(96540);const i={},r=a.createContext(i);function s(e){const n=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),a.createElement(r.Provider,{value:n},e.children)}},82884(e,n,l){l.r(n),l.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>c,frontMatter:()=>s,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"script/Wheels/WheelDebug","title":"WheelDebug","description":"WheelDebug","source":"@site/../docs/script/Wheels/WheelDebug.md","sourceDirName":"script/Wheels","slug":"/script/Wheels/WheelDebug","permalink":"/FS25-Community-LUADOC/script/Wheels/WheelDebug","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"WheelChock","permalink":"/FS25-Community-LUADOC/script/Wheels/WheelChock"},"next":{"title":"WheelDestruction","permalink":"/FS25-Community-LUADOC/script/Wheels/WheelDestruction"}}');var i=l(74848),r=l(28453);const s={},t=void 0,o={},d=[{value:"WheelDebug",id:"wheeldebug",level:2},{value:"delete",id:"delete",level:3},{value:"drawSlipGraphs",id:"drawslipgraphs",level:3},{value:"fillDebugValues",id:"filldebugvalues",level:3},{value:"getDebugValueHeader",id:"getdebugvalueheader",level:3},{value:"new",id:"new",level:3}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"wheeldebug",children:"WheelDebug"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Contains wheel debug rendering functions"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Functions"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#delete",children:"delete"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#drawslipgraphs",children:"drawSlipGraphs"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#filldebugvalues",children:"fillDebugValues"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getdebugvalueheader",children:"getDebugValueHeader"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#new",children:"new"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"delete",children:"delete"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"delete()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function WheelDebug:delete()\n    if self.lateralFrictionGraph ~ = nil then\n        self.lateralFrictionGraph:delete()\n    end\n    if self.longitudalFrictionGraph ~ = nil then\n        self.longitudalFrictionGraph:delete()\n    end\n    if self.longitudalFrictionSlipOverlay ~ = nil then\n        delete( self.longitudalFrictionSlipOverlay)\n    end\n    if self.lateralFrictionSlipOverlay ~ = nil then\n        delete( self.lateralFrictionSlipOverlay)\n    end\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"drawslipgraphs",children:"drawSlipGraphs"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"drawSlipGraphs()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function WheelDebug:drawSlipGraphs()\n    -- while vehicle reload\n        if not self.wheel.physics.wheelShapeCreated then\n            return\n        end\n\n        local longSlip, latSlip = getWheelShapeSlip( self.wheel.node, self.wheel.physics.wheelShape)\n        local gravity = 9.81\n\n        local tireLoad = getWheelShapeContactForce( self.wheel.node, self.wheel.physics.wheelShape)\n        if tireLoad ~ = nil then\n            local nx,ny,nz = getWheelShapeContactNormal( self.wheel.node, self.wheel.physics.wheelShape)\n            local dx,dy,dz = localDirectionToWorld( self.wheel.node, 0 , - 1 , 0 )\n            tireLoad = - tireLoad * MathUtil.dotProduct(dx,dy,dz, nx,ny,nz)\n\n            tireLoad = tireLoad + math.max(ny * gravity, 0.0 ) * self.wheel.physics.mass -- add gravity force of tire\n        else\n                tireLoad = 0\n            end\n\n            local longMaxSlip = 1\n            local latMaxSlip = 0.9\n\n            local sizeX = 0.11\n            local sizeY = 0.15\n            local spacingX = 0.028\n            local spacingY = 0.013\n            local x = 0.028 + (sizeX + spacingX) * ( self.wheel.wheelIndex - 1 )\n            local longY = 1 - spacingY - sizeY\n            local latY = longY - spacingY - sizeY\n\n            local numGraphValues = 20\n\n            -- tire forces graph\n            if self.longitudalFrictionGraph = = nil then\n                self.longitudalFrictionGraph = Graph.new(numGraphValues, x, longY, sizeX, sizeY, 0 , 0.0001 , true , "" , Graph.STYLE_LINES)\n                self.longitudalFrictionGraph:setColor( 1 , 1 , 1 , 1 )\n            else\n                    self.longitudalFrictionGraph.left, self.longitudalFrictionGraph.bottom, self.longitudalFrictionGraph.width, self.longitudalFrictionGraph.height = x, longY, sizeX, sizeY\n                end\n                self.longitudalFrictionGraph.maxValue = 0.01\n                for s = 1 , numGraphValues do\n                    local longForce, _ = computeWheelShapeTireForces( self.wheel.node, self.wheel.physics.wheelShape, (s - 1 ) / (numGraphValues - 1 ) * longMaxSlip, latSlip, tireLoad)\n                    self.longitudalFrictionGraph:setValue(s, longForce)\n                    self.longitudalFrictionGraph.maxValue = math.max( self.longitudalFrictionGraph.maxValue, longForce)\n                end\n\n                -- lateral graph\n                if self.lateralFrictionGraph = = nil then\n                    self.lateralFrictionGraph = Graph.new(numGraphValues, x, latY, sizeX, sizeY, 0 , 0.0001 , true , "" , Graph.STYLE_LINES)\n                    self.lateralFrictionGraph:setColor( 1 , 1 , 1 , 1 )\n                else\n                        self.lateralFrictionGraph.left, self.lateralFrictionGraph.bottom, self.lateralFrictionGraph.width, self.lateralFrictionGraph.height = x, latY, sizeX, sizeY\n                    end\n                    self.lateralFrictionGraph.maxValue = 0.01\n                    for s = 1 , numGraphValues do\n                        local _, latForce = computeWheelShapeTireForces( self.wheel.node, self.wheel.physics.wheelShape, longSlip, (s - 1 ) / (numGraphValues - 1 ) * latMaxSlip, tireLoad)\n                        latForce = math.abs(latForce)\n                        self.lateralFrictionGraph:setValue(s, latForce)\n                        self.lateralFrictionGraph.maxValue = math.max( self.lateralFrictionGraph.maxValue, latForce)\n                    end\n\n                    if self.longitudalFrictionSlipOverlay = = nil then\n                        self.longitudalFrictionSlipOverlay = createImageOverlay( "dataS/menu/base/graph_pixel.png" )\n                        setOverlayColor( self.longitudalFrictionSlipOverlay, 0 , 1 , 0 , 0.2 )\n                    end\n\n                    if self.lateralFrictionSlipOverlay = = nil then\n                        self.lateralFrictionSlipOverlay = createImageOverlay( "dataS/menu/base/graph_pixel.png" )\n                        setOverlayColor( self.lateralFrictionSlipOverlay, 0 , 1 , 0 , 0.2 )\n                    end\n\n                    self.longitudalFrictionGraph:draw()\n                    self.lateralFrictionGraph:draw()\n\n                    local longForce, latForce = computeWheelShapeTireForces( self.wheel.node, self.wheel.physics.wheelShape, longSlip, latSlip, tireLoad)\n\n                    renderOverlay( self.longitudalFrictionSlipOverlay, x, longY, sizeX * math.min( math.abs(longSlip) / longMaxSlip, 1 ), sizeY * math.min( math.abs(longForce) / self.longitudalFrictionGraph.maxValue, 1 ))\n                    renderOverlay( self.lateralFrictionSlipOverlay, x, latY, sizeX * math.min( math.abs(latSlip) / latMaxSlip, 1 ), sizeY * math.min( math.abs(latForce) / self.lateralFrictionGraph.maxValue, 1 ))\n                end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"filldebugvalues",children:"fillDebugValues"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"fillDebugValues()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"debugTable"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function WheelDebug:fillDebugValues(debugTable)\n    local physics = self.wheel.physics\n\n    -- while vehicle reload\n        if not physics.wheelShapeCreated then\n            debugTable[ 1 ] = debugTable[ 1 ] .. "n/a\\n"\n            debugTable[ 2 ] = debugTable[ 2 ] .. "n/a\\n"\n            debugTable[ 3 ] = debugTable[ 3 ] .. "n/a\\n"\n            debugTable[ 4 ] = debugTable[ 4 ] .. "n/a\\n"\n            debugTable[ 5 ] = debugTable[ 5 ] .. "n/a\\n"\n            debugTable[ 6 ] = debugTable[ 6 ] .. "n/a\\n"\n            debugTable[ 7 ] = debugTable[ 7 ] .. "n/a\\n"\n            debugTable[ 8 ] = debugTable[ 8 ] .. "n/a\\n"\n            debugTable[ 9 ] = debugTable[ 9 ] .. "n/a\\n"\n            debugTable[ 10 ] = debugTable[ 10 ] .. "n/a\\n"\n            debugTable[ 11 ] = debugTable[ 11 ] .. "n/a\\n"\n            debugTable[ 12 ] = debugTable[ 12 ] .. "n/a\\n"\n            debugTable[ 13 ] = debugTable[ 13 ] .. "n/a\\n"\n            debugTable[ 14 ] = debugTable[ 14 ] .. "n/a\\n"\n            debugTable[ 15 ] = debugTable[ 15 ] .. "n/a\\n"\n            return\n        end\n\n        local susp = 100 * (physics.netInfo.y - (physics.positionY + physics.deltaY - 1.2 * physics.suspTravel)) / physics.suspTravel - 20 -- If at yMin, we have -20% compression\n\n        local rpm = getWheelShapeAxleSpeed( self.wheel.node, physics.wheelShape) * 30 / math.pi\n        local longSlip, latSlip = getWheelShapeSlip( self.wheel.node, physics.wheelShape)\n\n        debugTable[ 1 ] = debugTable[ 1 ] .. string.format( "%d:\\n" , self.wheel.wheelIndex)\n        debugTable[ 2 ] = debugTable[ 2 ] .. string.format( "%2.2f\\n" , longSlip)\n        debugTable[ 3 ] = debugTable[ 3 ] .. string.format( "%2.2f\\n" , latSlip)\n        debugTable[ 4 ] = debugTable[ 4 ] .. string.format( "%2.2f\\n" , physics:getTireLoad())\n        debugTable[ 5 ] = debugTable[ 5 ] .. string.format( "%2.2f\\n" , physics.frictionScale * physics.tireGroundFrictionCoeff)\n        debugTable[ 6 ] = debugTable[ 6 ] .. string.format( "%1.0f%%\\n" , susp)\n        debugTable[ 7 ] = debugTable[ 7 ] .. string.format( "%3.1f\\n" , rpm)\n        debugTable[ 8 ] = debugTable[ 8 ] .. string.format( "%6.3f\\n" , math.deg(physics.steeringAngle))\n        debugTable[ 9 ] = debugTable[ 9 ] .. string.format( "%.2f\\n" , physics.radius)\n        debugTable[ 10 ] = debugTable[ 10 ] .. string.format( "%.2f\\n" , physics.maxLongStiffness)\n        debugTable[ 11 ] = debugTable[ 11 ] .. string.format( "%.2f\\n" , physics.maxLatStiffness)\n        debugTable[ 12 ] = debugTable[ 12 ] .. string.format( "%.2f\\n" , physics.mass)\n        debugTable[ 13 ] = debugTable[ 13 ] .. string.format( "%s\\n" , WheelsUtil.getTireTypeName(physics.tireType))\n\n        local deformation\n        for _, visualWheel in ipairs( self.wheel.visualWheels) do\n            for _, visualPart in ipairs(visualWheel.visualParts) do\n                if visualPart.deformation ~ = nil then\n                    deformation = math.max(visualPart.deformation, deformation or 0 )\n                end\n            end\n        end\n\n        if deformation ~ = nil then\n            debugTable[ 14 ] = debugTable[ 14 ] .. string.format( "%.3f\\n" , deformation)\n        else\n                debugTable[ 14 ] = debugTable[ 14 ] .. "-\\n"\n            end\n\n            debugTable[ 15 ] = debugTable[ 15 ] .. string.format( "%s\\n" , WheelContactType.getName(physics.contact))\n        end\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"getdebugvalueheader",children:"getDebugValueHeader"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getDebugValueHeader()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function WheelDebug.getDebugValueHeader()\n    return { "\\n" , "loSlip\\n" , "laSlip\\n" , "load\\n" , "frict.\\n" , "comp.\\n" , "rpm\\n" , "steer.\\n" , "radius\\n" , "loStiff\\n" , "laStiff\\n" , "mass[t]\\n" , "type\\n" , "deform\\n" , "contact\\n" }\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"new",children:"new"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"new()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"wheel"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function WheelDebug.new(wheel)\n    local self = setmetatable( { } , { __index = WheelDebug } )\n\n    self.wheel = wheel\n    self.vehicle = wheel.vehicle\n\n    return self\nend\n\n"})})]})}function c(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}}}]);