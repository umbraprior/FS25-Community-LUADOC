"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[91156],{28453(e,n,t){t.d(n,{R:()=>i,x:()=>d});var s=t(96540);const r={},l=s.createContext(r);function i(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(l.Provider,{value:n},e.children)}},77474(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"script/Collections/ValueInterpolator","title":"ValueInterpolator","description":"ValueInterpolator","source":"@site/../docs/script/Collections/ValueInterpolator.md","sourceDirName":"script/Collections","slug":"/script/Collections/ValueInterpolator","permalink":"/FS25-Community-LUADOC/script/Collections/ValueInterpolator","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"ListenerList","permalink":"/FS25-Community-LUADOC/script/Collections/ListenerList"},"next":{"title":"AttacherJointTopArm","permalink":"/FS25-Community-LUADOC/script/Components/AttacherJointTopArm"}}');var r=t(74848),l=t(28453);const i={},d=void 0,c={},o=[{value:"ValueInterpolator",id:"valueinterpolator",level:2},{value:"delete",id:"delete",level:3},{value:"getTarget",id:"gettarget",level:3},{value:"hasInterpolator",id:"hasinterpolator",level:3},{value:"new",id:"new",level:3},{value:"onDeleteParent",id:"ondeleteparent",level:3},{value:"removeInterpolator",id:"removeinterpolator",level:3},{value:"setDeleteListenerObject",id:"setdeletelistenerobject",level:3},{value:"setFinishedFunc",id:"setfinishedfunc",level:3},{value:"setUpdateFunc",id:"setupdatefunc",level:3},{value:"update",id:"update",level:3},{value:"updateSpeed",id:"updatespeed",level:3}];function a(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"valueinterpolator",children:"ValueInterpolator"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Class to interpolate between values"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Functions"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#delete",children:"delete"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#gettarget",children:"getTarget"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#hasinterpolator",children:"hasInterpolator"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#new",children:"new"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#ondeleteparent",children:"onDeleteParent"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#removeinterpolator",children:"removeInterpolator"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#setdeletelistenerobject",children:"setDeleteListenerObject"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#setfinishedfunc",children:"setFinishedFunc"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#setupdatefunc",children:"setUpdateFunc"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#update",children:"update"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#updatespeed",children:"updateSpeed"})}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"delete",children:"delete"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"delete()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function ValueInterpolator:delete()\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"gettarget",children:"getTarget"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"getTarget()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function ValueInterpolator:getTarget()\n    return self.target\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"hasinterpolator",children:"hasInterpolator"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"hasInterpolator()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"key"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function ValueInterpolator.hasInterpolator(key)\n    return g_currentMission:getHasUpdateable(key)\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"new",children:"new"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"new(any customKey, function get, function set, array target, float? duration, float? speed, table? customMt)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"customKey"}),(0,r.jsx)(n.th,{children:"custom key used for the updateable added to the mission"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"function"}),(0,r.jsx)(n.td,{children:"get"}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"function"}),(0,r.jsx)(n.td,{children:"set"}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"array"}),(0,r.jsx)(n.td,{children:"target"}),(0,r.jsx)(n.td,{children:"list of values to interpolate"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"float?"}),(0,r.jsx)(n.td,{children:"duration"}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"float?"}),(0,r.jsx)(n.td,{children:"speed"}),(0,r.jsx)(n.td,{children:"default: 1"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"table?"}),(0,r.jsx)(n.td,{children:"customMt"}),(0,r.jsx)(n.td,{})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"table?"}),(0,r.jsx)(n.th,{children:"ValueInterpolator"}),(0,r.jsx)(n.th,{children:"can be nil if validation check fails"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function ValueInterpolator.new(customKey, get, set, target, duration, speed, customMt)\n    local self = setmetatable( { } , customMt or ValueInterpolator _mt)\n\n    self.customKey = customKey\n\n    self.get = get\n    self.set = set\n\n    self.target = target\n    self.duration = duration\n\n    self.cur = { get() }\n\n    if self.duration ~ = nil then\n        self:updateSpeed()\n    else\n            speed = (speed or 1 ) / 1000\n            self.speed = { }\n            for i = 1 , # self.target do\n                self.speed[i] = speed\n            end\n        end\n\n        local isValid = false\n        for i = 1 , # self.speed do\n            if math.abs( self.speed[i]) > 0.000000001 then\n                isValid = true\n                break\n            end\n        end\n\n        if not isValid then\n            return nil\n        end\n\n        g_currentMission:addUpdateable( self , customKey)\n\n        return self\n    end\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ondeleteparent",children:"onDeleteParent"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"onDeleteParent()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function ValueInterpolator:onDeleteParent()\n    g_currentMission:removeUpdateable( self.customKey)\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"removeinterpolator",children:"removeInterpolator"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"removeInterpolator()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"key"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function ValueInterpolator.removeInterpolator(key)\n    if g_currentMission:getHasUpdateable(key) then\n        g_currentMission:removeUpdateable(key)\n    end\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"setdeletelistenerobject",children:"setDeleteListenerObject"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"setDeleteListenerObject()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"object"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function ValueInterpolator:setDeleteListenerObject(object)\n    if object ~ = nil and object:isa(Object) then\n        object:addDeleteListener( self , "onDeleteParent" )\n        self.deleteListenerObject = object\n    end\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"setfinishedfunc",children:"setFinishedFunc"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"setFinishedFunc()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"finishedFunc"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"finishedTarget"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"..."})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function ValueInterpolator:setFinishedFunc(finishedFunc, finishedTarget, .. .)\n    self.finishedFunc = finishedFunc\n    self.finishedTarget = finishedTarget\n    self.finishedArgs = { .. . }\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"setupdatefunc",children:"setUpdateFunc"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"setUpdateFunc()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"updateFunc"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"updateTarget"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"..."})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"function ValueInterpolator:setUpdateFunc(updateFunc, updateTarget, .. .)\n    self.updateFunc = updateFunc\n    self.updateTarget = updateTarget\n    self.updateArgs = { .. . }\nend\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"update",children:"update"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"update()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,r.jsx)(n.table,{children:(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"any"}),(0,r.jsx)(n.th,{children:"dt"})]})})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function ValueInterpolator:update(dt)\n    local finished = true\n    for i = 1 , # self.cur do\n        local direction = math.sign( self.target[i] - self.cur[i])\n        local limitFunc = math.min\n        if direction < 0 then\n            limitFunc = math.max\n        end\n        self.cur[i] = limitFunc( self.cur[i] + self.speed[i] * dt * direction, self.target[i])\n\n        finished = finished and self.cur[i] = = self.target[i]\n    end\n\n    self.set( unpack( self.cur))\n\n    if self.updateFunc ~ = nil then\n        self.updateFunc( self.updateTarget, unpack( self.updateArgs))\n    end\n\n    if self.duration ~ = nil then\n        self.duration = math.max( self.duration - dt, 1 )\n    end\n\n    if finished then\n        g_currentMission:removeUpdateable( self.customKey)\n\n        if self.deleteListenerObject ~ = nil then\n            self.deleteListenerObject:removeDeleteListener( "onDeleteParent" )\n        end\n\n        if self.finishedFunc ~ = nil then\n            self.finishedFunc( self.finishedTarget, unpack( self.finishedArgs))\n        end\n    end\nend\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"updatespeed",children:"updateSpeed"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Description"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Definition"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"updateSpeed()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Code"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'function ValueInterpolator:updateSpeed()\n    if type( self.duration) = = "number" then\n        self.speed = { }\n        for i = 1 , # self.target do\n            self.speed[i] = math.abs( self.target[i] - self.cur[i]) / self.duration\n        end\n    else\n            self.speed = self.duration\n        end\n    end\n\n'})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);