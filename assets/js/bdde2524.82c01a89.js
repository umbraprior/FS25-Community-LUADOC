"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[29485],{11214(e,n,t){t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>o,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"script/Hud/ExtendedSowingMachineHUDExtension","title":"ExtendedSowingMachineHUDExtension","description":"ExtendedSowingMachineHUDExtension","source":"@site/../docs/script/Hud/ExtendedSowingMachineHUDExtension.md","sourceDirName":"script/Hud","slug":"/script/Hud/ExtendedSowingMachineHUDExtension","permalink":"/FS25-Community-LUADOC/script/Hud/ExtendedSowingMachineHUDExtension","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"ExtendedCombineHUDExtension","permalink":"/FS25-Community-LUADOC/script/Hud/ExtendedCombineHUDExtension"},"next":{"title":"ExtendedSprayerHUDExtension","permalink":"/FS25-Community-LUADOC/script/Hud/ExtendedSprayerHUDExtension"}}');var i=t(74848),l=t(28453);const d={},o=void 0,r={},a=[{value:"ExtendedSowingMachineHUDExtension",id:"extendedsowingmachinehudextension",level:2},{value:"delete",id:"delete",level:3},{value:"draw",id:"draw",level:3},{value:"getHeight",id:"getheight",level:3},{value:"new",id:"new",level:3},{value:"setColorBlindMode",id:"setcolorblindmode",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"extendedsowingmachinehudextension",children:"ExtendedSowingMachineHUDExtension"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Custom HUD drawing extension for precision farming sowing machines\nDisplays the current seed rate"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Functions"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#delete",children:"delete"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#draw",children:"draw"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#getheight",children:"getHeight"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#new",children:"new"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#setcolorblindmode",children:"setColorBlindMode"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"delete",children:"delete"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Delete this instance and clean up resources."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"delete()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function ExtendedSowingMachineHUDExtension:delete()\n    for _, dotData in ipairs( self.dots) do\n        dotData.dotEmpty:delete()\n        dotData.dotFilled:delete()\n        dotData.dotFill:delete()\n    end\n\n    self.backgroundTop:delete()\n    self.backgroundMiddle:delete()\n    self.backgroundBottom:delete()\n\n    self.separatorHorizontal:delete()\n    self.seedsOverlay:delete()\n    self.recommendOverlay:delete()\n\n    g_messageCenter:unsubscribeAll( self )\n\n    self.vehicle = nil\n    self.extendedSowingMachine = nil\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"draw",children:"draw"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Draw mixing ratio information for a mixing wagon when it is active."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"draw()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"inputHelpDisplay"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"posX"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"posY"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function ExtendedSowingMachineHUDExtension:draw(inputHelpDisplay, posX, posY)\n    if self.extendedSowingMachine = = nil then\n        return posY\n    end\n\n    self.backgroundTop:setPosition(posX, posY - self.backgroundTop.height)\n    self.backgroundMiddle:setPosition(posX, posY - self.backgroundTop.height - self.backgroundMiddle.height)\n    self.backgroundBottom:setPosition(posX, posY - self.backgroundTop.height - self.backgroundMiddle.height - self.backgroundBottom.height)\n    self.backgroundTop:render()\n    self.backgroundMiddle:render()\n    self.backgroundBottom:render()\n\n    posY = posY - self.seedRateHeight\n\n    local contentOffset = ( self.displayWidth - self.contentWidth) * 0.5\n\n    setTextColor( 1 , 1 , 1 , 1 )\n    setTextBold( true )\n    setTextAlignment(RenderText.ALIGN_LEFT)\n    setTextVerticalAlignment(RenderText.VERTICAL_ALIGN_MIDDLE)\n    renderLimitedText(posX + contentOffset, posY + self.seedRateHeight * 0.55 + self.textOffsetHeadline, self.textHeightHeadline, self.texts.headline, self.textMaxWidthHeadline)\n    setTextVerticalAlignment(RenderText.VERTICAL_ALIGN_BASELINE)\n    setTextBold( false )\n\n    local spec = self.extendedSowingMachine\n    local seedsFruitType = self.vehicle.spec_sowingMachine.workAreaParameters.seedsFruitType\n    local lastSeedRate = spec.lastSeedRate\n    local lastSeedRateIndex = spec.lastSeedRateIndex\n\n    if not spec.seedRateAutoMode then\n        lastSeedRateIndex = spec.manualSeedRate\n        lastSeedRate = self.seedRateMap:getSeedRateByFruitTypeAndIndex(seedsFruitType, lastSeedRateIndex)\n    end\n\n    local isSupported = self.seedRateMap:getIsFruitTypeSupported(seedsFruitType)\n    if isSupported then\n        setTextAlignment(RenderText.ALIGN_CENTER)\n        local currentRatePosX = posX + self.rateTextOffsetX\n        local currentRatePosY = posY + self.seedRateHeight * 0.5 - self.rateTextHeight * 0.5 + self.rateTextOffsetY\n        renderLimitedText(currentRatePosX, currentRatePosY, self.rateTextHeight, string.format( self.texts.seedRate, lastSeedRate))\n\n        for i = 1 , # self.dots do\n            local dotData = self.dots[i]\n\n            local dotPosX = currentRatePosX + (i / 2 - 1 ) * self.dotsFullWidth - dotData.dotEmpty.width * 0.5\n            local dotPosY = currentRatePosY - dotData.dotEmpty.height * 1.5\n\n            if i > lastSeedRateIndex then\n                dotData.dotEmpty:setPosition(dotPosX, dotPosY)\n                dotData.dotEmpty:render()\n            else\n                    dotData.dotFilled:setPosition(dotPosX, dotPosY)\n                    dotData.dotFill:setPosition(dotPosX, dotPosY)\n\n                    dotData.dotFilled:render()\n\n                    local displayValues = self.seedRateMap:getDisplayValues()\n                    local displayValue = displayValues[lastSeedRateIndex]\n                    local color = displayValue.colors[ self.isColorBlindMode][ 1 ]\n\n                    dotData.dotFill:setColor(color[ 1 ], color[ 2 ], color[ 3 ], 1 )\n                    dotData.dotFill:render()\n                end\n\n                if not spec.seedRateAutoMode and spec.seedRateRecommendation ~ = nil then\n                    if i < = spec.seedRateRecommendation then\n                        self.recommendOverlay:setPosition(dotPosX + dotData.dotEmpty.width * 0.5 - self.recommendOverlay.width * 0.5 , dotPosY - self.recommendOverlay.height + self.recommendOverlayOffsetY)\n                        self.recommendOverlay:render()\n                    end\n                end\n            end\n\n            if spec.seedRateAutoMode then\n                setTextAlignment(RenderText.ALIGN_CENTER)\n                setTextVerticalAlignment(RenderText.VERTICAL_ALIGN_MIDDLE)\n                renderLimitedText(posX + self.modeTextOffsetX, posY + self.seedRateHeight * 0.52 , self.modeTextHeight, self.texts.auto)\n            end\n        else\n                setTextAlignment(RenderText.ALIGN_CENTER)\n                setTextVerticalAlignment(RenderText.VERTICAL_ALIGN_MIDDLE)\n                renderLimitedText(posX + contentOffset + self.naTextOffsetX, posY + self.seedRateHeight * 0.52 , self.naTextHeight, self.texts.notAvailable, self.naTextMaxX)\n            end\n\n            local uvIndex = lastSeedRateIndex\n            if uvIndex = = 0 or not isSupported then\n                uvIndex = 2\n            end\n            self.seedsOverlay:setSliceId( ExtendedSowingMachineHUDExtension.SEED_RATE_SLICES[ math.max( math.min(uvIndex, 3 ), 1 )])\n\n            self.seedsOverlay:setPosition(posX + self.backgroundTop.width - self.seedsOverlay.width - contentOffset * 0.5 , posY + self.seedRateHeight * 0.5 - self.seedsOverlay.height * 0.5 )\n            self.seedsOverlay:render()\n\n            posY = posY - self.tramlineHeight\n\n            self.separatorHorizontal:renderCustom(posX, posY + self.tramlineHeight)\n\n            local textSize = inputHelpDisplay.textSize\n\n            local tramlineText\n            if spec.tramlineWidth ~ = nil then\n                tramlineText = string.format( self.texts.tramlineWidth, spec.tramlineWidth)\n            else\n                    tramlineText = self.texts.tramlineNotAvailable\n                end\n                tramlineText = utf8ToUpper(tramlineText)\n\n                setTextAlignment(RenderText.ALIGN_LEFT)\n\n                setTextBold( true )\n                setTextVerticalAlignment(RenderText.VERTICAL_ALIGN_MIDDLE)\n                renderLimitedText(posX + contentOffset, posY + self.tramlineHeight * 0.6 , textSize, tramlineText)\n                setTextVerticalAlignment(RenderText.VERTICAL_ALIGN_BASELINE)\n                setTextBold( false )\n\n                return posY\n            end\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getheight",children:"getHeight"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Get this HUD extension's display height."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"getHeight()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"Display"}),(0,i.jsx)(n.th,{children:"height in screen space"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function ExtendedSowingMachineHUDExtension:getHeight()\n    return self.displayHeight or 0\nend\n\n"})}),"\n",(0,i.jsx)(n.h3,{id:"new",children:"new"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Create a new instance of ExtendedSowingMachineHUDExtension."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"new(table vehicle, )"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"table"}),(0,i.jsx)(n.th,{children:"vehicle"}),(0,i.jsx)(n.th,{children:"Vehicle which has the specialization required by a sub-class"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"customMt"}),(0,i.jsx)(n.td,{})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:'function ExtendedSowingMachineHUDExtension.new(vehicle, customMt)\n    local self = setmetatable( { } , customMt or ExtendedSowingMachineHUDExtension _mt)\n\n    self.priority = GS_PRIO_NORMAL\n\n    self.vehicle = vehicle\n    self.extendedSowingMachine = vehicle[ ExtendedSowingMachine.SPEC_TABLE_NAME]\n\n    self.backgroundTop = g_overlayManager:createOverlay( "precisionFarming.shortcutBox_top" , 0 , 0 , 0 , 0 )\n    self.backgroundMiddle = g_overlayManager:createOverlay( "precisionFarming.shortcutBox_middle" , 0 , 0 , 0 , 0 )\n    self.backgroundBottom = g_overlayManager:createOverlay( "precisionFarming.shortcutBox_bottom" , 0 , 0 , 0 , 0 )\n\n    local r, g, b, a = unpack(HUD.COLOR.BACKGROUND)\n    self.backgroundTop:setColor(r, g, b, a)\n    self.backgroundMiddle:setColor(r, g, b, a)\n    self.backgroundBottom:setColor(r, g, b, a)\n\n    self.separatorHorizontal = g_overlayManager:createOverlay(g_plainColorSliceId, 0 , 0 , 0 , 0 )\n    self.separatorHorizontal:setColor( 1 , 1 , 1 , 0.25 )\n\n    self.dots = { }\n    for i = 1 , 3 do\n        local dotData = { }\n        dotData.dotEmpty = g_overlayManager:createOverlay( "precisionFarming.seeds_dot_empty" , 0 , 0 , 0 , 0 )\n        dotData.dotFilled = g_overlayManager:createOverlay( "precisionFarming.seeds_dot_filled" , 0 , 0 , 0 , 0 )\n        dotData.dotFill = g_overlayManager:createOverlay( "precisionFarming.seeds_dot_fill" , 0 , 0 , 0 , 0 )\n\n        table.insert( self.dots, dotData)\n    end\n\n    self.seedsOverlay = g_overlayManager:createOverlay( ExtendedSowingMachineHUDExtension.SEED_RATE_SLICES[ 1 ], 0 , 0 , 0 , 0 )\n\n    self.recommendOverlay = g_overlayManager:createOverlay( "precisionFarming.seeds_recommendationBar" , 0 , 0 , 0 , 0 )\n    self.recommendOverlay:setColor( 0.5 , 0.5 , 0.5 , 1 )\n\n    self.texts = { }\n    self.texts.headline = g_i18n:getText( "hudExtensionSowingMachine_headline" , ExtendedSowingMachineHUDExtension.MOD_NAME)\n    self.texts.seedRate = g_i18n:getText( "hudExtensionSowingMachine_seedRate" , ExtendedSowingMachineHUDExtension.MOD_NAME)\n    self.texts.auto = g_i18n:getText( "hudExtensionSowingMachine_auto" , ExtendedSowingMachineHUDExtension.MOD_NAME)\n    self.texts.notAvailable = g_i18n:getText( "hudExtensionSowingMachine_notAvailable" , ExtendedSowingMachineHUDExtension.MOD_NAME)\n    self.texts.tramlineWidth = g_i18n:getText( "hudExtensionSowingMachine_tramlineWidth" , ExtendedSowingMachineHUDExtension.MOD_NAME)\n    self.texts.tramlineNotAvailable = g_i18n:getText( "hudExtensionSowingMachine_tramlineNotAvailable" , ExtendedSowingMachineHUDExtension.MOD_NAME)\n\n    self.seedRateMap = g_precisionFarming.seedRateMap\n\n    self.isColorBlindMode = g_gameSettings:getValue(GameSettings.SETTING.USE_COLORBLIND_MODE) or false\n\n    g_messageCenter:subscribe(MessageType.SETTING_CHANGED[GameSettings.SETTING.USE_COLORBLIND_MODE], self.setColorBlindMode, self )\n    g_messageCenter:subscribe(MessageType.SETTING_CHANGED[GameSettings.SETTING.UI_SCALE], self.storeScaledValues, self )\n\n    self:storeScaledValues()\n\n    return self\nend\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"setcolorblindmode",children:"setColorBlindMode"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Description"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Determine if the HUD extension should be drawn."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Definition"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"setColorBlindMode()"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,i.jsx)(n.table,{children:(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"any"}),(0,i.jsx)(n.th,{children:"isActive"})]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Code"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lua",children:"function ExtendedSowingMachineHUDExtension:setColorBlindMode(isActive)\n    if isActive ~ = self.isColorBlindMode then\n        self.isColorBlindMode = isActive\n    end\nend\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453(e,n,t){t.d(n,{R:()=>d,x:()=>o});var s=t(96540);const i={},l=s.createContext(i);function d(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);