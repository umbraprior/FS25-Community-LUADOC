"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[4753],{6409(e,n,l){l.r(n),l.d(n,{assets:()=>t,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"script/Specializations/PlaceableHusbandryFood","title":"PlaceableHusbandryFood","description":"PlaceableHusbandryFood","source":"@site/../docs/script/Specializations/PlaceableHusbandryFood.md","sourceDirName":"script/Specializations","slug":"/script/Specializations/PlaceableHusbandryFood","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableHusbandryFood","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"PlaceableHusbandryFence","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableHusbandryFence"},"next":{"title":"PlaceableHusbandryLiquidManure","permalink":"/FS25-Community-LUADOC/script/Specializations/PlaceableHusbandryLiquidManure"}}');var s=l(74848),d=l(28453);const a={},r=void 0,t={},o=[{value:"PlaceableHusbandryFood",id:"placeablehusbandryfood",level:2},{value:"addFood",id:"addfood",level:3},{value:"collectPickObjects",id:"collectpickobjects",level:3},{value:"getAnimalDescription",id:"getanimaldescription",level:3},{value:"getFoodCapacity",id:"getfoodcapacity",level:3},{value:"getFoodInfos",id:"getfoodinfos",level:3},{value:"getFreeFoodCapacity",id:"getfreefoodcapacity",level:3},{value:"getSpecValueAnimalFoodFillTypes",id:"getspecvalueanimalfoodfilltypes",level:3},{value:"getTotalFood",id:"gettotalfood",level:3},{value:"initSpecialization",id:"initspecialization",level:3},{value:"loadFromXMLFile",id:"loadfromxmlfile",level:3},{value:"loadSpecValueAnimalFoodFillTypes",id:"loadspecvalueanimalfoodfilltypes",level:3},{value:"onDelete",id:"ondelete",level:3},{value:"onFinalizePlacement",id:"onfinalizeplacement",level:3},{value:"onHusbandryAnimalsCreated",id:"onhusbandryanimalscreated",level:3},{value:"onHusbandryAnimalsUpdate",id:"onhusbandryanimalsupdate",level:3},{value:"onLoad",id:"onload",level:3},{value:"onPostFinalizePlacement",id:"onpostfinalizeplacement",level:3},{value:"onPostLoad",id:"onpostload",level:3},{value:"onReadStream",id:"onreadstream",level:3},{value:"onReadUpdateStream",id:"onreadupdatestream",level:3},{value:"onWriteStream",id:"onwritestream",level:3},{value:"onWriteUpdateStream",id:"onwriteupdatestream",level:3},{value:"prerequisitesPresent",id:"prerequisitespresent",level:3},{value:"registerEventListeners",id:"registereventlisteners",level:3},{value:"registerFunctions",id:"registerfunctions",level:3},{value:"registerOverwrittenFunctions",id:"registeroverwrittenfunctions",level:3},{value:"registerSavegameXMLPaths",id:"registersavegamexmlpaths",level:3},{value:"registerXMLPaths",id:"registerxmlpaths",level:3},{value:"removeFood",id:"removefood",level:3},{value:"saveToXMLFile",id:"savetoxmlfile",level:3},{value:"updateFeeding",id:"updatefeeding",level:3},{value:"updateFillPlanes",id:"updatefillplanes",level:3},{value:"updateFoodPlaces",id:"updatefoodplaces",level:3},{value:"updateInfo",id:"updateinfo",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"placeablehusbandryfood",children:"PlaceableHusbandryFood"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Specialization for placeables"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Functions"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#addfood",children:"addFood"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#collectpickobjects",children:"collectPickObjects"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getanimaldescription",children:"getAnimalDescription"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getfoodcapacity",children:"getFoodCapacity"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getfoodinfos",children:"getFoodInfos"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getfreefoodcapacity",children:"getFreeFoodCapacity"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#getspecvalueanimalfoodfilltypes",children:"getSpecValueAnimalFoodFillTypes"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#gettotalfood",children:"getTotalFood"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#initspecialization",children:"initSpecialization"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#loadfromxmlfile",children:"loadFromXMLFile"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#loadspecvalueanimalfoodfilltypes",children:"loadSpecValueAnimalFoodFillTypes"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#ondelete",children:"onDelete"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onfinalizeplacement",children:"onFinalizePlacement"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onhusbandryanimalscreated",children:"onHusbandryAnimalsCreated"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onhusbandryanimalsupdate",children:"onHusbandryAnimalsUpdate"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onload",children:"onLoad"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onpostfinalizeplacement",children:"onPostFinalizePlacement"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onpostload",children:"onPostLoad"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onreadstream",children:"onReadStream"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onreadupdatestream",children:"onReadUpdateStream"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onwritestream",children:"onWriteStream"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#onwriteupdatestream",children:"onWriteUpdateStream"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#prerequisitespresent",children:"prerequisitesPresent"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registereventlisteners",children:"registerEventListeners"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registerfunctions",children:"registerFunctions"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registeroverwrittenfunctions",children:"registerOverwrittenFunctions"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registersavegamexmlpaths",children:"registerSavegameXMLPaths"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#registerxmlpaths",children:"registerXMLPaths"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#removefood",children:"removeFood"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#savetoxmlfile",children:"saveToXMLFile"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#updatefeeding",children:"updateFeeding"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#updatefillplanes",children:"updateFillPlanes"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#updatefoodplaces",children:"updateFoodPlaces"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#updateinfo",children:"updateInfo"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"addfood",children:"addFood"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"addFood()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"farmId"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"deltaFillLevel"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"fillTypeIndex"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"fillPositionData"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"toolType"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"extraAttributes"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryFood:addFood(farmId, deltaFillLevel, fillTypeIndex, fillPositionData, toolType, extraAttributes)\n    local spec = self.spec_husbandryFood\n    if spec.supportedFillTypes[fillTypeIndex] = = nil then\n        return 0\n    end\n\n    local mixture = g_currentMission.animalFoodSystem:getMixtureByFillType(fillTypeIndex)\n    if mixture ~ = nil then\n        local filled = 0\n        local maxDelta = math.min(deltaFillLevel, self:getFreeFoodCapacity(fillTypeIndex))\n        for _, ingredient in ipairs(mixture.ingredients) do\n            local delta = maxDelta * ingredient.weight\n            local ingredientFillType = ingredient.fillTypes[ 1 ]\n            local filledDelta = self:addFood(farmId, delta, ingredientFillType, fillPositionData, toolType, extraAttributes)\n            filled = filled + filledDelta\n        end\n\n        if filled > 0 then\n            self:updateFillPlanes(fillTypeIndex)\n        end\n\n        return filled\n    end\n\n    local freeCapacity = self:getFreeFoodCapacity(fillTypeIndex)\n    if freeCapacity = = 0 then\n        return 0\n    end\n\n    deltaFillLevel = math.min(freeCapacity, deltaFillLevel)\n\n    if spec.dynamicFoodPlane ~ = nil then\n        if fillPositionData ~ = nil then\n            local data = fillPositionData\n\n            local x0, y0, z0 = getWorldTranslation(data.node)\n            local d1x, d1y, d1z = localDirectionToWorld(data.node, data.width, 0 , 0 )\n            local d2x, d2y, d2z = localDirectionToWorld(data.node, 0 , 0 , data.length)\n\n            if VehicleDebug.state = = VehicleDebug.DEBUG then\n                drawDebugLine( x0,y0,z0, 1 , 0 , 0 , x0 + d1x, y0 + d1y, z0 + d1z, 1 , 0 , 0 )\n                drawDebugLine( x0,y0,z0, 0 , 0 , 1 , x0 + d2x, y0 + d2y, z0 + d2z, 0 , 0 , 1 )\n                drawDebugPoint( x0,y0,z0, 1 , 1 , 1 , 1 )\n                drawDebugPoint( x0 + d1x, y0 + d1y, z0 + d1z, 1 , 0 , 0 , 1 )\n                drawDebugPoint( x0 + d2x, y0 + d2y, z0 + d2z, 0 , 0 , 1 , 1 )\n            end\n\n            x0 = x0 - (d1x + d2x) / 2\n            y0 = y0 - (d1y + d2y) / 2\n            z0 = z0 - (d1z + d2z) / 2\n            fillPlaneAdd(spec.dynamicFoodPlane, deltaFillLevel, x0, y0, z0, d1x, d1y, d1z, d2x, d2y, d2z)\n\n            if self.isServer and math.abs(x0 - spec.lastPositionInfoSent[ 1 ]) > FillVolume.SEND_PRECISION or math.abs(z0 - spec.lastPositionInfoSent[ 2 ]) > FillVolume.SEND_PRECISION then\n                spec.lastPositionInfoSent[ 1 ] = x0\n                spec.lastPositionInfoSent[ 2 ] = z0\n\n                self:raiseDirtyFlags(spec.dirtyFlagPosition)\n            end\n        else\n                local x,y,z = localToWorld(spec.dynamicFoodPlane, 0 , 0 , 0 )\n                local d1x,d1y,d1z = localDirectionToWorld(spec.dynamicFoodPlane, 0.1 , 0 , 0 )\n                local d2x,d2y,d2z = localDirectionToWorld(spec.dynamicFoodPlane, 0 , 0 , 0.1 )\n\n                if not self.isServer then\n                    if spec.lastPositionInfo[ 1 ] ~ = 0 and spec.lastPositionInfo[ 2 ] ~ = 0 then\n                        x, y, z = localToWorld(spec.dynamicFoodPlane, spec.lastPositionInfo[ 1 ], 0 , spec.lastPositionInfo[ 2 ])\n                    end\n                end\n\n                local steps = math.clamp( math.floor(deltaFillLevel / 400 ), 1 , 25 )\n                for _ = 1 , steps do\n                    fillPlaneAdd(spec.dynamicFoodPlane, deltaFillLevel / steps, x,y,z, d1x,d1y,d1z, d2x,d2y,d2z)\n                end\n            end\n        end\n\n        if self.isServer then\n            self:raiseDirtyFlags(spec.dirtyFlagFillLevel)\n        end\n\n        spec.fillLevels[fillTypeIndex] = spec.fillLevels[fillTypeIndex] + deltaFillLevel\n\n        self:updateFillPlanes(fillTypeIndex)\n        self:updateFoodPlaces()\n\n        return deltaFillLevel\n    end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"collectpickobjects",children:"collectPickObjects"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"collectPickObjects()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"node"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryFood:collectPickObjects(superFunc, node)\n    local spec = self.spec_husbandryFood\n\n    if spec.feedingTroughs ~ = nil then\n        for _, trigger in ipairs(spec.feedingTroughs) do\n            if node = = trigger.exactFillRootNode then\n                return\n            end\n        end\n    end\n\n    superFunc( self , node)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getanimaldescription",children:"getAnimalDescription"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getAnimalDescription()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"cluster"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryFood:getAnimalDescription(superFunc, cluster)\n    local text = superFunc( self , cluster)\n\n    return text .. " " .. g_i18n:getText( "animal_descriptionPercentage" )\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"getfoodcapacity",children:"getFoodCapacity"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getFoodCapacity()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryFood:getFoodCapacity()\n    return self.spec_husbandryFood.capacity\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getfoodinfos",children:"getFoodInfos"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getFoodInfos()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryFood:getFoodInfos(superFunc)\n    local foodInfos = superFunc( self )\n    local spec = self.spec_husbandryFood\n\n    local animalFood = g_currentMission.animalFoodSystem:getAnimalFood(spec.animalTypeIndex)\n\n    if animalFood ~ = nil then\n        for _, foodGroup in pairs(animalFood.groups) do\n            local title = foodGroup.title\n            local fillLevel = 0\n            local capacity = spec.capacity\n\n            for _, fillTypeIndex in pairs(foodGroup.fillTypes) do\n                if spec.fillLevels[fillTypeIndex] ~ = nil then\n                    fillLevel = fillLevel + spec.fillLevels[fillTypeIndex]\n                end\n            end\n\n            local info = { }\n            info.title = string.format( "%s(%d%%)" , title, MathUtil.round(foodGroup.productionWeight * 100 ))\n            info.value = fillLevel\n            info.capacity = capacity\n            info.ratio = 0\n            if capacity > 0 then\n                info.ratio = fillLevel / capacity\n            end\n\n            table.insert(foodInfos, info)\n        end\n    end\n\n    return foodInfos\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"getfreefoodcapacity",children:"getFreeFoodCapacity"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getFreeFoodCapacity()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"fillTypeIndex"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryFood:getFreeFoodCapacity(fillTypeIndex)\n    local spec = self.spec_husbandryFood\n    if spec.supportedFillTypes[fillTypeIndex] = = nil then\n        return 0\n    end\n\n    return spec.capacity - self:getTotalFood()\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getspecvalueanimalfoodfilltypes",children:"getSpecValueAnimalFoodFillTypes"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getSpecValueAnimalFoodFillTypes()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"storeItem"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"realItem"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryFood.getSpecValueAnimalFoodFillTypes(storeItem, realItem)\n    local data = storeItem.specs.animalFoodFillTypes\n    if data = = nil then\n        return nil\n    end\n\n    local fillTypes = { }\n    local animalType = g_currentMission.animalSystem:getTypeByName(data.animalTypeName)\n    if animalType = = nil then\n        return nil\n    end\n\n    local animalFood = g_currentMission.animalFoodSystem:getAnimalFood(animalType.typeIndex)\n    local mixtures = g_currentMission.animalFoodSystem:getMixturesByAnimalTypeIndex(animalType.typeIndex)\n\n    if animalFood ~ = nil then\n        for _, foodGroup in pairs(animalFood.groups) do\n            for _, fillTypeIndex in pairs(foodGroup.fillTypes) do\n                table.addElement(fillTypes, fillTypeIndex)\n            end\n        end\n    end\n\n    if mixtures ~ = nil then\n        for _, foodMixtureFillType in ipairs(mixtures) do\n            table.addElement(fillTypes, foodMixtureFillType)\n        end\n    end\n\n    if data.needsWater then\n        table.addElement(fillTypes, FillType.WATER)\n    end\n\n    return fillTypes\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"gettotalfood",children:"getTotalFood"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"getTotalFood()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryFood:getTotalFood()\n    local spec = self.spec_husbandryFood\n    local fillLevel = 0\n    for _, level in pairs(spec.fillLevels) do\n        fillLevel = fillLevel + level\n    end\n\n    return fillLevel\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"initspecialization",children:"initSpecialization"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"initSpecialization()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryFood.initSpecialization()\n    g_storeManager:addSpecType( "animalFoodFillTypes" , "shopListAttributeIconFillTypes" , PlaceableHusbandryFood.loadSpecValueAnimalFoodFillTypes, PlaceableHusbandryFood.getSpecValueAnimalFoodFillTypes, StoreSpecies.PLACEABLE)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"loadfromxmlfile",children:"loadFromXMLFile"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"loadFromXMLFile()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"xmlFile"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"key"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryFood:loadFromXMLFile(xmlFile, key)\n    local spec = self.spec_husbandryFood\n    xmlFile:iterate(key .. ".fillLevel" , function (_, fillLevelKey)\n        local fillTypeName = xmlFile:getValue(fillLevelKey .. "#fillType" )\n        local fillLevel = xmlFile:getValue(fillLevelKey .. "#fillLevel" )\n        if fillTypeName ~ = nil and fillLevel ~ = nil then\n            local fillTypeIndex = g_fillTypeManager:getFillTypeIndexByName(fillTypeName)\n            if fillTypeIndex ~ = nil and spec.supportedFillTypes[fillTypeIndex] ~ = nil then\n                self:addFood( self:getOwnerFarmId(), fillLevel, fillTypeIndex, nil , nil , nil )\n            end\n        end\n    end )\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"loadspecvalueanimalfoodfilltypes",children:"loadSpecValueAnimalFoodFillTypes"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"loadSpecValueAnimalFoodFillTypes()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"xmlFile"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"customEnvironment"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"baseDir"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryFood.loadSpecValueAnimalFoodFillTypes(xmlFile, customEnvironment, baseDir)\n    local data = nil\n\n    if xmlFile:hasProperty( "placeable.husbandry.animals" ) then\n        data = data or { }\n        data.animalTypeName = xmlFile:getString( "placeable.husbandry.animals#type" )\n    end\n\n    if xmlFile:hasProperty( "placeable.husbandry.water" ) then\n        data = data or { }\n        data.needsWater = not xmlFile:getValue( "placeable.husbandry.water#automaticWaterSupply" , false )\n    end\n\n    return data\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"ondelete",children:"onDelete"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onDelete()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryFood:onDelete()\n    local spec = self.spec_husbandryFood\n\n    if spec.feedingTroughs ~ = nil then\n        for _, trigger in ipairs(spec.feedingTroughs) do\n            trigger:delete()\n        end\n        spec.feedingTroughs = nil\n    end\n\n    if spec.dynamicFoodPlane ~ = nil then\n        delete(spec.dynamicFoodPlane)\n        spec.dynamicFoodPlane = nil\n    end\n\n    if spec.foodPlane ~ = nil then\n        spec.foodPlane:delete()\n        spec.foodPlane = nil\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onfinalizeplacement",children:"onFinalizePlacement"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onFinalizePlacement()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryFood:onFinalizePlacement()\n    local spec = self.spec_husbandryFood\n    if spec.feedingTroughs ~ = nil then\n        for _, trigger in ipairs(spec.feedingTroughs) do\n            trigger:register( true )\n        end\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onhusbandryanimalscreated",children:"onHusbandryAnimalsCreated"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onHusbandryAnimalsCreated()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"husbandryId"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryFood:onHusbandryAnimalsCreated(husbandryId)\n    if husbandryId ~ = nil then\n        local spec = self.spec_husbandryFood\n        spec.husbandryId = husbandryId\n        for _, foodPlace in ipairs(spec.foodPlaces) do\n            local feedingPlaceIndex, isAccessible = addFeedingPlace(husbandryId, foodPlace.node, 0.0 , AnimalHusbandryFeedingType.FOOD)\n            if isAccessible then\n                foodPlace.place = feedingPlaceIndex\n                -- else\n                    -- DebugGizmo.new():createWithNode(foodPlace.node, string.format("%q outside of nav mesh", getName(foodPlace.node))):setTextColor(Color.PRESETS.ORANGE):addToManager(nil, 30000)\n                end\n            end\n        end\n    end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"onhusbandryanimalsupdate",children:"onHusbandryAnimalsUpdate"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onHusbandryAnimalsUpdate()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"clusters"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryFood:onHusbandryAnimalsUpdate(clusters)\n    local spec = self.spec_husbandryFood\n\n    spec.litersPerHour = 0\n    for _, cluster in ipairs(clusters) do\n        local subType = g_currentMission.animalSystem:getSubTypeByIndex(cluster.subTypeIndex)\n        if subType ~ = nil then\n            local food = subType.input.food\n            if food ~ = nil then\n                local age = cluster:getAge()\n                local litersPerAnimal = food:get(age)\n                local litersPerDay = litersPerAnimal * cluster:getNumAnimals()\n\n                spec.litersPerHour = spec.litersPerHour + (litersPerDay / 24 )\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onload",children:"onLoad"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onLoad()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"savegame"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryFood:onLoad(savegame)\n    local spec = self.spec_husbandryFood\n\n    spec.animalTypeIndex = nil\n    spec.litersPerHour = 0\n    spec.fillLevels = { }\n    spec.supportedFillTypes = { }\n    spec.fillTypes = { }\n    spec.lastPositionInfoSent = { 0 , 0 }\n    spec.lastPositionInfo = { 0 , 0 }\n    spec.foodPlaces = { }\n    spec.info = { title = g_i18n:getText( "ui_animalFood" ), text = "" }\n\n    spec.dirtyFlagPosition = self:getNextDirtyFlag()\n    spec.dirtyFlagFillLevel = self:getNextDirtyFlag()\n\n    spec.capacity = self.xmlFile:getValue( "placeable.husbandry.food#capacity" , 5000 )\n    spec.FILLLEVEL_NUM_BITS = MathUtil.getNumRequiredBits(spec.capacity)\n\n    local target = {\n    getIsFillTypeAllowed = function (_, fillTypeIndex)\n        return spec.supportedFillTypes[fillTypeIndex]\n    end ,\n    getIsToolTypeAllowed = function (_, fillTypeIndex)\n        return true\n    end ,\n    addFillLevelFromTool = function (_, .. .)\n        return self:addFood( .. .)\n    end ,\n    getFreeCapacity = function (_, fillTypeIndex)\n        return self:getFreeFoodCapacity(fillTypeIndex)\n    end\n    }\n\n    spec.feedingTroughs = UnloadTrigger.createTriggers( self.isServer, self.isClient, self.xmlFile, "placeable.husbandry.food" , self.components, target, nil , self.i3dMappings)\n    if #spec.feedingTroughs = = 0 then\n        Logging.xmlWarning( self.xmlFile, "Missing no unload triggers defined for husbandry food" )\n            self:setLoadingState(PlaceableLoadingState.ERROR)\n            return\n        end\n\n        spec.baseNode = self.xmlFile:getValue( "placeable.husbandry.food.dynamicFoodPlane#node" , nil , self.components, self.i3dMappings)\n        if spec.baseNode ~ = nil then\n            local fillPlane = FillPlaneUtil.createFromXML( self.xmlFile, "placeable.husbandry.food.dynamicFoodPlane" , spec.baseNode, spec.capacity)\n            local defaultFillTypeName = self.xmlFile:getValue( "placeable.husbandry.food.dynamicFoodPlane#defaultFillType" )\n            local defaultFillTypeIndex = g_fillTypeManager:getFillTypeIndexByName(defaultFillTypeName) or FillType.FORAGE\n\n            if fillPlane ~ = nil then\n                FillPlaneUtil.assignDefaultMaterialsFromTerrain(fillPlane, g_terrainNode)\n                FillPlaneUtil.setFillType(fillPlane, defaultFillTypeIndex)\n\n                spec.dynamicFoodPlane = fillPlane\n            end\n        end\n\n        spec.foodPlane = FillPlane.new()\n        if spec.foodPlane:load( self.components, self.xmlFile, "placeable.husbandry.food.foodPlane" , self.i3dMappings) then\n            local defaultFillTypeName = self.xmlFile:getValue( "placeable.husbandry.food.foodPlane#defaultFillType" )\n            local defaultFillTypeIndex = g_fillTypeManager:getFillTypeIndexByName(defaultFillTypeName) or FillType.DRYGRASS_WINDROW\n\n            FillPlaneUtil.assignDefaultMaterialsFromTerrain(spec.foodPlane.node, g_terrainNode)\n            FillPlaneUtil.setFillType(spec.foodPlane.node, defaultFillTypeIndex)\n            setShaderParameter(spec.foodPlane.node, "isCustomShape" , 1 , 0 , 0 , 0 , false )\n            spec.foodPlane:setState( 0 )\n        else\n                spec.foodPlane:delete()\n                spec.foodPlane = nil\n            end\n\n            self.xmlFile:iterate( "placeable.husbandry.food.foodPlaces.foodPlace" , function (_, key)\n                local node = self.xmlFile:getValue(key .. "#node" , nil , self.components, self.i3dMappings)\n                table.insert(spec.foodPlaces, { node = node, place = nil } )\n            end )\n        end\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"onpostfinalizeplacement",children:"onPostFinalizePlacement"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onPostFinalizePlacement()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryFood:onPostFinalizePlacement()\n    self:updateFillPlanes()\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onpostload",children:"onPostLoad"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onPostLoad()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryFood:onPostLoad()\n    local spec = self.spec_husbandryFood\n    spec.animalTypeIndex = self:getAnimalTypeIndex()\n    local animalFood = g_currentMission.animalFoodSystem:getAnimalFood(spec.animalTypeIndex)\n    local mixtures = g_currentMission.animalFoodSystem:getMixturesByAnimalTypeIndex(spec.animalTypeIndex)\n\n    if animalFood ~ = nil then\n        for _, foodGroup in pairs(animalFood.groups) do\n            for _, fillTypeIndex in pairs(foodGroup.fillTypes) do\n                if spec.fillLevels[fillTypeIndex] = = nil then\n                    spec.fillLevels[fillTypeIndex] = 0.0\n                    spec.supportedFillTypes[fillTypeIndex] = true\n                    table.insert(spec.fillTypes, fillTypeIndex)\n                end\n            end\n        end\n    end\n\n    if mixtures ~ = nil then\n        for _, foodMixtureFillType in ipairs(mixtures) do\n            spec.supportedFillTypes[foodMixtureFillType] = true\n            table.insert(spec.fillTypes, foodMixtureFillType)\n        end\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onreadstream",children:"onReadStream"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onReadStream()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"streamId"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryFood:onReadStream(streamId, connection)\n    local spec = self.spec_husbandryFood\n    for _, fillTypeIndex in ipairs(spec.fillTypes) do\n        if spec.fillLevels[fillTypeIndex] ~ = nil then\n            spec.fillLevels[fillTypeIndex] = streamReadUIntN(streamId, spec.FILLLEVEL_NUM_BITS)\n        end\n    end\n\n    -- local totalFillLevel = self:getTotalFood()\n    -- if spec.dynamicFoodPlane ~ = nil then\n        -- readFillPlaneFromStream(spec.dynamicFoodPlane, streamId, totalFillLevel)\n        -- end\n\n        if spec.feedingTroughs ~ = nil then\n            for _, trigger in ipairs(spec.feedingTroughs) do\n                local feedingTroughId = NetworkUtil.readNodeObjectId(streamId)\n                trigger:readStream(streamId, connection)\n                g_client:finishRegisterObject(trigger, feedingTroughId)\n            end\n        end\n    end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onreadupdatestream",children:"onReadUpdateStream"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onReadUpdateStream()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"streamId"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"timestamp"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"connection"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryFood:onReadUpdateStream(streamId, timestamp, connection)\n    if connection:getIsServer() then\n        local spec = self.spec_husbandryFood\n        if streamReadBool(streamId) then\n            spec.lastPositionInfo[ 1 ] = FillVolume.readStreamCompressedPosition(streamId)\n            spec.lastPositionInfo[ 2 ] = FillVolume.readStreamCompressedPosition(streamId)\n        end\n\n        if streamReadBool(streamId) then\n            for _, fillTypeIndex in ipairs(spec.fillTypes) do\n                if spec.fillLevels[fillTypeIndex] ~ = nil then\n                    local newFillLevel = streamReadUIntN(streamId, spec.FILLLEVEL_NUM_BITS)\n                    local delta = newFillLevel - spec.fillLevels[fillTypeIndex]\n                    if delta > 0 then\n                        self:addFood( self:getOwnerFarmId(), delta, fillTypeIndex, nil , nil , nil )\n                    else\n                            self:removeFood( math.abs(delta), fillTypeIndex)\n                        end\n                    end\n                end\n            end\n        end\n    end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onwritestream",children:"onWriteStream"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onWriteStream()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"streamId"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"connection"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryFood:onWriteStream(streamId, connection)\n    local spec = self.spec_husbandryFood\n    for _, fillTypeIndex in ipairs(spec.fillTypes) do\n        if spec.fillLevels[fillTypeIndex] ~ = nil then\n            streamWriteUIntN(streamId, spec.fillLevels[fillTypeIndex], spec.FILLLEVEL_NUM_BITS)\n        end\n    end\n\n    -- if spec.dynamicFoodPlane ~ = nil then\n        -- writeFillPlaneToStream(spec.dynamicFoodPlane, streamId)\n        -- end\n\n        if spec.feedingTroughs ~ = nil then\n            for _, trigger in ipairs(spec.feedingTroughs) do\n                NetworkUtil.writeNodeObjectId(streamId, NetworkUtil.getObjectId(trigger))\n                trigger:writeStream(streamId, connection)\n                g_server:registerObjectInStream(connection, trigger)\n            end\n        end\n    end\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onwriteupdatestream",children:"onWriteUpdateStream"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"onWriteUpdateStream()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"streamId"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"connection"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"dirtyMask"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryFood:onWriteUpdateStream(streamId, connection, dirtyMask)\n    if not connection:getIsServer() then\n        local spec = self.spec_husbandryFood\n        if streamWriteBool(streamId, bit32.band(dirtyMask, spec.dirtyFlagPosition) ~ = 0 ) then\n            FillVolume.writeStreamCompressedPosition(streamId, spec.lastPositionInfoSent[ 1 ])\n            FillVolume.writeStreamCompressedPosition(streamId, spec.lastPositionInfoSent[ 2 ])\n        end\n\n        if streamWriteBool(streamId, bit32.band(dirtyMask, spec.dirtyFlagFillLevel) ~ = 0 ) then\n            for _, fillTypeIndex in ipairs(spec.fillTypes) do\n                if spec.fillLevels[fillTypeIndex] ~ = nil then\n                    streamWriteUIntN(streamId, spec.fillLevels[fillTypeIndex], spec.FILLLEVEL_NUM_BITS)\n                end\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"prerequisitespresent",children:"prerequisitesPresent"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Checks if all prerequisite specializations are loaded"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"prerequisitesPresent(table specializations)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"specializations"}),(0,s.jsx)(n.th,{children:"specializations"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"table"}),(0,s.jsx)(n.th,{children:"hasPrerequisite"}),(0,s.jsx)(n.th,{children:"true if all prerequisite specializations are loaded"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryFood.prerequisitesPresent(specializations)\n    return SpecializationUtil.hasSpecialization( PlaceableHusbandryAnimals , specializations)\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"registereventlisteners",children:"registerEventListeners"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerEventListeners()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryFood.registerEventListeners(placeableType)\n    SpecializationUtil.registerEventListener(placeableType, "onLoad" , PlaceableHusbandryFood )\n    SpecializationUtil.registerEventListener(placeableType, "onPostLoad" , PlaceableHusbandryFood )\n    SpecializationUtil.registerEventListener(placeableType, "onDelete" , PlaceableHusbandryFood )\n    SpecializationUtil.registerEventListener(placeableType, "onFinalizePlacement" , PlaceableHusbandryFood )\n    SpecializationUtil.registerEventListener(placeableType, "onPostFinalizePlacement" , PlaceableHusbandryFood )\n    SpecializationUtil.registerEventListener(placeableType, "onReadStream" , PlaceableHusbandryFood )\n    SpecializationUtil.registerEventListener(placeableType, "onWriteStream" , PlaceableHusbandryFood )\n    SpecializationUtil.registerEventListener(placeableType, "onReadUpdateStream" , PlaceableHusbandryFood )\n    SpecializationUtil.registerEventListener(placeableType, "onWriteUpdateStream" , PlaceableHusbandryFood )\n    SpecializationUtil.registerEventListener(placeableType, "onHusbandryAnimalsUpdate" , PlaceableHusbandryFood )\n    SpecializationUtil.registerEventListener(placeableType, "onHusbandryAnimalsCreated" , PlaceableHusbandryFood )\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registerfunctions",children:"registerFunctions"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerFunctions()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryFood.registerFunctions(placeableType)\n    SpecializationUtil.registerFunction(placeableType, "updateFillPlanes" , PlaceableHusbandryFood.updateFillPlanes)\n    SpecializationUtil.registerFunction(placeableType, "updateFoodPlaces" , PlaceableHusbandryFood.updateFoodPlaces)\n    SpecializationUtil.registerFunction(placeableType, "addFood" , PlaceableHusbandryFood.addFood)\n    SpecializationUtil.registerFunction(placeableType, "removeFood" , PlaceableHusbandryFood.removeFood)\n    SpecializationUtil.registerFunction(placeableType, "getTotalFood" , PlaceableHusbandryFood.getTotalFood)\n    SpecializationUtil.registerFunction(placeableType, "getAvailableFood" , PlaceableHusbandryFood.getAvailableFood)\n    SpecializationUtil.registerFunction(placeableType, "getFoodCapacity" , PlaceableHusbandryFood.getFoodCapacity)\n    SpecializationUtil.registerFunction(placeableType, "getFreeFoodCapacity" , PlaceableHusbandryFood.getFreeFoodCapacity)\n    SpecializationUtil.registerFunction(placeableType, "getFoodLitersPerHour" , PlaceableHusbandryFood.getFoodLitersPerHour)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registeroverwrittenfunctions",children:"registerOverwrittenFunctions"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerOverwrittenFunctions()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"placeableType"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryFood.registerOverwrittenFunctions(placeableType)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "updateInfo" , PlaceableHusbandryFood.updateInfo)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "updateFeeding" , PlaceableHusbandryFood.updateFeeding)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "getFoodInfos" , PlaceableHusbandryFood.getFoodInfos)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "collectPickObjects" , PlaceableHusbandryFood.collectPickObjects)\n    SpecializationUtil.registerOverwrittenFunction(placeableType, "getAnimalDescription" , PlaceableHusbandryFood.getAnimalDescription)\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registersavegamexmlpaths",children:"registerSavegameXMLPaths"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerSavegameXMLPaths()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"schema"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"basePath"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryFood.registerSavegameXMLPaths(schema, basePath)\n    schema:setXMLSpecializationType( "Husbandry" )\n    schema:register(XMLValueType.STRING, basePath .. ".fillLevel(?)#fillType" , "Fill type" )\n    schema:register(XMLValueType.FLOAT, basePath .. ".fillLevel(?)#fillLevel" , "Fill level" )\n    schema:setXMLSpecializationType()\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"registerxmlpaths",children:"registerXMLPaths"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"registerXMLPaths()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"schema"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"basePath"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryFood.registerXMLPaths(schema, basePath)\n    schema:setXMLSpecializationType( "Husbandry" )\n    basePath = basePath .. ".husbandry.food"\n    schema:register(XMLValueType.INT, basePath .. "#capacity" , "Trough capacity" , 5000 )\n    schema:register(XMLValueType.NODE_INDEX, basePath .. ".foodPlaces.foodPlace(?)#node" , "Foodplace" )\n\n    schema:register(XMLValueType.NODE_INDEX, basePath .. ".dynamicFoodPlane#node" , "Node" )\n    schema:register(XMLValueType.STRING, basePath .. ".dynamicFoodPlane#defaultFillType" , "Fillplane default filltype" )\n    FillPlaneUtil.registerFillPlaneXMLPaths(schema, basePath .. ".dynamicFoodPlane" )\n    FillPlane.registerXMLPaths(schema, basePath .. ".foodPlane" )\n    schema:register(XMLValueType.STRING, basePath .. ".foodPlane#defaultFillType" , "Fillplane default filltype" )\n    UnloadTrigger.registerTriggerXMLPaths(schema, basePath)\n    schema:setXMLSpecializationType()\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"removefood",children:"removeFood"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"removeFood()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"absDeltaFillLevel"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"fillTypeIndex"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryFood:removeFood(absDeltaFillLevel, fillTypeIndex)\n    local spec = self.spec_husbandryFood\n    if spec.supportedFillTypes[fillTypeIndex] = = nil then\n        return 0\n    end\n\n    if absDeltaFillLevel < = 0 then\n        return 0\n    end\n\n    absDeltaFillLevel = math.min( math.abs(absDeltaFillLevel), spec.fillLevels[fillTypeIndex])\n\n    if spec.dynamicFoodPlane ~ = nil then\n        local x,y,z = localToWorld(spec.dynamicFoodPlane, 0 , 0 , 0 )\n        local d1x,d1y,d1z = localDirectionToWorld(spec.dynamicFoodPlane, 0.1 , 0 , 0 )\n        local d2x,d2y,d2z = localDirectionToWorld(spec.dynamicFoodPlane, 0 , 0 , 0.1 )\n\n        local steps = math.clamp( math.floor(absDeltaFillLevel / 400 ), 1 , 25 )\n        local delta = absDeltaFillLevel / steps\n        for _ = 1 , steps do\n            fillPlaneAdd(spec.dynamicFoodPlane, - delta, x,y,z, d1x,d1y,d1z, d2x,d2y,d2z)\n        end\n    end\n\n    spec.fillLevels[fillTypeIndex] = spec.fillLevels[fillTypeIndex] - absDeltaFillLevel\n\n    if self.isServer then\n        self:raiseDirtyFlags(spec.dirtyFlagFillLevel)\n    end\n\n    self:updateFillPlanes()\n    self:updateFoodPlaces()\n\n    return absDeltaFillLevel\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"savetoxmlfile",children:"saveToXMLFile"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"saveToXMLFile()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"xmlFile"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"key"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"usedModNames"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryFood:saveToXMLFile(xmlFile, key, usedModNames)\n    local spec = self.spec_husbandryFood\n    local index = 0\n    for fillTypeIndex, fillLevel in pairs(spec.fillLevels) do\n        if fillLevel > 0 then\n            local fillTypeName = g_fillTypeManager:getFillTypeNameByIndex(fillTypeIndex)\n            if fillTypeName ~ = nil then\n                local fillLevelKey = string.format( "%s.fillLevel(%d)" , key, index)\n                xmlFile:setValue(fillLevelKey .. "#fillType" , fillTypeName)\n                xmlFile:setValue(fillLevelKey .. "#fillLevel" , fillLevel)\n                index = index + 1\n            end\n        end\n    end\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"updatefeeding",children:"updateFeeding"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"updateFeeding()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryFood:updateFeeding(superFunc)\n    local factor = superFunc( self )\n    local spec = self.spec_husbandryFood\n\n    if self.isServer and spec.animalTypeIndex ~ = nil then\n        local consumedFood = { }\n        factor = factor * g_currentMission.animalFoodSystem:consumeFood(spec.animalTypeIndex, spec.litersPerHour * g_currentMission.environment.timeAdjustment, self , consumedFood)\n\n        for fillTypeIndex, delta in pairs(consumedFood) do\n            self:removeFood(delta, fillTypeIndex)\n        end\n    end\n\n    return factor\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"updatefillplanes",children:"updateFillPlanes"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"updateFillPlanes()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,s.jsx)(n.table,{children:(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"fillTypeIndex"})]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryFood:updateFillPlanes(fillTypeIndex)\n    local spec = self.spec_husbandryFood\n    if spec.foodPlane ~ = nil then\n        local fillLevel = self:getTotalFood()\n        local capacity = self:getFoodCapacity()\n        local state = 0\n        if capacity > 0 then\n            state = math.clamp(fillLevel / capacity, 0 , 1 )\n        end\n        spec.foodPlane:setState(state)\n\n        if state > 0 and fillTypeIndex ~ = nil then\n            FillPlaneUtil.assignDefaultMaterialsFromTerrain(spec.foodPlane.node, g_terrainNode)\n            FillPlaneUtil.setFillType(spec.foodPlane.node, fillTypeIndex)\n            setShaderParameter(spec.foodPlane.node, "isCustomShape" , 1 , 0 , 0 , 0 , false )\n        end\n    end\nend\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"updatefoodplaces",children:"updateFoodPlaces"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"updateFoodPlaces()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"function PlaceableHusbandryFood:updateFoodPlaces()\n    local spec = self.spec_husbandryFood\n    if spec.husbandryId ~ = nil then\n        local fillLevel = self:getTotalFood()\n        for _, foodPlace in pairs(spec.foodPlaces) do\n            if foodPlace.place ~ = nil then\n                updateFeedingPlace(spec.husbandryId, foodPlace.place, fillLevel)\n            end\n        end\n    end\nend\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"updateinfo",children:"updateInfo"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Definition"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"updateInfo()"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"any"}),(0,s.jsx)(n.th,{children:"superFunc"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"infoTable"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'function PlaceableHusbandryFood:updateInfo(superFunc, infoTable)\n    superFunc( self , infoTable)\n    local spec = self.spec_husbandryFood\n\n    local fillLevel = self:getTotalFood()\n    spec.info.text = string.format( "%d l" , fillLevel)\n    table.insert(infoTable, spec.info)\nend\n\n'})})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453(e,n,l){l.d(n,{R:()=>a,x:()=>r});var i=l(96540);const s={},d=i.createContext(s);function a(e){const n=i.useContext(d);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(d.Provider,{value:n},e.children)}}}]);