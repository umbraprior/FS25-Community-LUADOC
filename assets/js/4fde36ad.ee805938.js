"use strict";(globalThis.webpackChunkfs25_community_luadoc=globalThis.webpackChunkfs25_community_luadoc||[]).push([[2708],{28453(n,e,i){i.d(e,{R:()=>r,x:()=>a});var s=i(96540);const t={},l=s.createContext(t);function r(n){const e=s.useContext(l);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:r(n.components),s.createElement(l.Provider,{value:e},n.children)}},61531(n,e,i){i.r(e),i.d(e,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"script/AI/NavigationSystem","title":"NavigationSystem","description":"NavigationSystem","source":"@site/../docs/script/AI/NavigationSystem.md","sourceDirName":"script/AI","slug":"/script/AI/NavigationSystem","permalink":"/FS25-Community-LUADOC/script/AI/NavigationSystem","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1767161192000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"HelperManager","permalink":"/FS25-Community-LUADOC/script/AI/HelperManager"},"next":{"title":"VehicleBuyingStationActivatable","permalink":"/FS25-Community-LUADOC/script/Activatables/VehicleBuyingStationActivatable"}}');var t=i(74848),l=i(28453);const r={},a=void 0,d={},o=[{value:"NavigationSystem",id:"navigationsystem",level:2},{value:"delete",id:"delete",level:3},{value:"draw",id:"draw",level:3},{value:"loadMapData",id:"loadmapdata",level:3},{value:"navigateTo",id:"navigateto",level:3},{value:"new",id:"new",level:3},{value:"onNavigationMarkerLoaded",id:"onnavigationmarkerloaded",level:3},{value:"saveToXMLFile",id:"savetoxmlfile",level:3},{value:"stop",id:"stop",level:3},{value:"updateMarker",id:"updatemarker",level:3}];function c(n){const e={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h2,{id:"navigationsystem",children:"NavigationSystem"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Functions"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#delete",children:"delete"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#draw",children:"draw"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#loadmapdata",children:"loadMapData"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#navigateto",children:"navigateTo"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#new",children:"new"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#onnavigationmarkerloaded",children:"onNavigationMarkerLoaded"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#savetoxmlfile",children:"saveToXMLFile"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#stop",children:"stop"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#updatemarker",children:"updateMarker"})}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"delete",children:"delete"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Description"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"delete()"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Code"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-lua",children:"function NavigationSystem:delete()\n    if self.loadRequestId ~ = nil then\n        g_i3DManager:cancelStreamI3DFile( self.loadRequestId)\n        self.loadRequestId = nil\n    end\n\n    if self.positionNode ~ = nil then\n        delete( self.positionNode)\n        self.positionNode = nil\n    end\n\n    if self.navigationMarker ~ = nil then\n        self.navigationMarker:delete()\n        self.navigationMarker = nil\n    end\nend\n\n"})}),"\n",(0,t.jsx)(e.h3,{id:"draw",children:"draw"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Description"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"draw()"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Code"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-lua",children:"function NavigationSystem:draw()\n    self.navigationMarker:render()\nend\n\n"})}),"\n",(0,t.jsx)(e.h3,{id:"loadmapdata",children:"loadMapData"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Description"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"Load data on map load"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"loadMapData()"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"any"}),(0,t.jsx)(e.th,{children:"xmlFile"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"any"}),(0,t.jsx)(e.td,{children:"missionInfo"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"any"}),(0,t.jsx)(e.td,{children:"baseDirectory"})]})]})]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Return Values"})}),"\n\n\n\n\n\n\n\n\n",(0,t.jsx)(e.table,{children:(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"any"}),(0,t.jsx)(e.th,{children:"true"}),(0,t.jsx)(e.th,{children:"if loading was successful else false"})]})})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Code"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-lua",children:'function NavigationSystem:loadMapData(xmlFile, missionInfo, baseDirectory)\n\n    local filepath = Utils.getFilename( "$data/shared/assets/marker/navigationMarker.i3d" , baseDirectory)\n    self.loadRequestId = g_i3DManager:loadI3DFileAsync(filepath, true , true , self.onNavigationMarkerLoaded, self , nil )\n\n    return true\nend\n\n'})}),"\n",(0,t.jsx)(e.h3,{id:"navigateto",children:"navigateTo"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Description"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"navigateTo()"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"any"}),(0,t.jsx)(e.th,{children:"x"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"any"}),(0,t.jsx)(e.td,{children:"y"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"any"}),(0,t.jsx)(e.td,{children:"z"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"any"}),(0,t.jsx)(e.td,{children:"dirX"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"any"}),(0,t.jsx)(e.td,{children:"dirY"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"any"}),(0,t.jsx)(e.td,{children:"dirZ"})]})]})]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Code"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-lua",children:"function NavigationSystem:navigateTo(x, y, z, dirX, dirY, dirZ)\n    self.navigationMarker:setWorldPosition(x, y + 1.4 , z)\n    self.navigationMarker:setVisibility( true )\n\n    self.targetX = x\n    self.targetY = y\n    self.targetZ = z\n\n    self.targetDirX = dirX\n    self.targetDirY = dirY\n    self.targetDirZ = dirZ\n\n    g_currentMission:addDrawable( self )\n\n    self:updateMarker()\nend\n\n"})}),"\n",(0,t.jsx)(e.h3,{id:"new",children:"new"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Description"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"new()"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(e.table,{children:(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"any"}),(0,t.jsx)(e.th,{children:"customMt"})]})})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Code"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-lua",children:"function NavigationSystem.new(customMt)\n    local self = setmetatable( { } , customMt or NavigationSystem _mt)\n\n    self.navigationMarker = NavigationMarker.new()\n\n    self.positionNode = nil\n    self.directionNode = nil\n\n    return self\nend\n\n"})}),"\n",(0,t.jsx)(e.h3,{id:"onnavigationmarkerloaded",children:"onNavigationMarkerLoaded"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Description"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"onNavigationMarkerLoaded()"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"any"}),(0,t.jsx)(e.th,{children:"i3dNode"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"any"}),(0,t.jsx)(e.td,{children:"failedReason"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"any"}),(0,t.jsx)(e.td,{children:"args"})]})]})]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Code"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-lua",children:"function NavigationSystem:onNavigationMarkerLoaded(i3dNode, failedReason, args)\n    if failedReason = = LoadI3DFailedReason.NONE then\n        self.positionNode = getChildAt(i3dNode, 0 )\n        self.directionNode = getChildAt( self.positionNode, 0 )\n        setVisibility( self.positionNode, false )\n        setVisibility( self.directionNode, false )\n        link(getRootNode(), self.positionNode)\n\n        self:updateMarker()\n\n        delete(i3dNode)\n    end\n\n    self.loadRequestId = nil\nend\n\n"})}),"\n",(0,t.jsx)(e.h3,{id:"savetoxmlfile",children:"saveToXMLFile"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Description"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"saveToXMLFile()"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Arguments"})}),"\n\n\n\n\n\n\n\n",(0,t.jsx)(e.table,{children:(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"any"}),(0,t.jsx)(e.th,{children:"xmlFilename"})]})})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Code"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-lua",children:'function NavigationSystem:saveToXMLFile(xmlFilename)\n    local xmlFile = XMLFile.create( "navigationSystem" , xmlFilename, "navigationSystem" , NavigationSystem.xmlSchema)\n\n    if self.targetX ~ = nil then\n        xmlFile:setValue( "navigationSystem.target#position" , self.targetX, self.targetY, self.targetZ)\n\n        if self.targetDirX ~ = nil then\n            xmlFile:setValue( "navigationSystem.target#direction" , self.targetDirX, self.targetDirY, self.targetDirZ)\n        end\n    end\n\n    xmlFile:save()\n    xmlFile:delete()\nend\n\n'})}),"\n",(0,t.jsx)(e.h3,{id:"stop",children:"stop"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Description"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"stop()"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Code"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-lua",children:"function NavigationSystem:stop()\n    self.targetX = nil\n    self.targetY = nil\n    self.targetZ = nil\n\n    self.targetDirX = nil\n    self.targetDirY = nil\n    self.targetDirZ = nil\n\n    g_currentMission:removeDrawable( self )\n\n    self:updateMarker()\nend\n\n"})}),"\n",(0,t.jsx)(e.h3,{id:"updatemarker",children:"updateMarker"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Description"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Definition"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"updateMarker()"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Code"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-lua",children:"function NavigationSystem:updateMarker()\n    local isActive = self.targetX ~ = nil\n    local isActiveDir = self.targetDirX ~ = nil\n\n    if self.navigationMarker ~ = nil then\n        self.navigationMarker:setVisibility(isActive)\n    end\n\n    if self.positionNode~ = nil then\n        setVisibility( self.positionNode, isActive)\n        setVisibility( self.directionNode, isActiveDir)\n\n        setWorldTranslation( self.positionNode, self.targetX or 0 , self.targetY or 0 , self.targetZ or 0 )\n\n        if self.targetDirX ~ = nil then\n            setVisibility( self.directionNode, true )\n            setWorldDirection( self.directionNode, self.targetDirX, self.targetDirY, self.targetDirZ, 0 , 1 , 0 )\n        end\n    end\nend\n\n"})})]})}function h(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(c,{...n})}):c(n)}}}]);